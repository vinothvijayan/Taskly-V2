const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SalesTrackerPage-z1C9dn8z.js","assets/xlsx-DZrnJ2o3.js","assets/format-CcypP5ZI.js","assets/trending-up-Dc2fOQoQ.js","assets/textarea-DJZO54Po.js","assets/send-5UL8mSPm.js","assets/alert-dialog-CR5ji12a.js","assets/save-DRoTLn0j.js","assets/calendar-BvZK3pUK.js","assets/subDays-BYudXbBI.js","assets/separator-BDnYhoo8.js","assets/drawer-gB5Jcqpd.js","assets/sortable.esm-Cydrjq7h.js","assets/download-UVAAmKOw.js","assets/skeletons-Bb8mVUWj.js","assets/resizable-VLfMrKzG.js","assets/upload-DzLu9PLr.js","assets/SalesOpportunityPage-DV_88Y2Z.js","assets/DeleteConfirmationDialog-DqhjKW4I.js","assets/award-agzPjywG.js","assets/SalesToolsPage-1_RPuH8L.js","assets/TasksPage-B-_sNHyU.js","assets/scoring-Pjt2sHeW.js","assets/select-DzEN2igF.js","assets/DashboardPage-Q_FSB1lb.js","assets/useTouchGestures-CT4C-tcC.js","assets/ContributionGraph-CkzfhOII.js","assets/target-BfCs93Dg.js","assets/TeamChatPage-CrC2C7li.js","assets/copy-9GNlnmGT.js","assets/MeetlyPage-A-Bpc60w.js","assets/sparkles-BAiwmII8.js","assets/circle-alert-x52EUvXx.js","assets/TimerPage-BBXzQVb1.js","assets/CalendarPage-Ctvj-Xvh.js","assets/external-link-GduCjZXm.js","assets/NotesPage-emw0VTkH.js","assets/purify.es-aGzT-_H7.js","assets/AnalyticsPage-Bjurj-jc.js","assets/ChatPage-DtXDHn6e.js","assets/ProfilePage-Cfwi3fNZ.js"])))=>i.map(i=>d[i]);
var DY=Object.defineProperty;var MO=t=>{throw TypeError(t)};var LY=(t,e,n)=>e in t?DY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Kt=(t,e,n)=>LY(t,typeof e!="symbol"?e+"":e,n),jE=(t,e,n)=>e.has(t)||MO("Cannot "+n);var Y=(t,e,n)=>(jE(t,e,"read from private field"),n?n.call(t):e.get(t)),pt=(t,e,n)=>e.has(t)?MO("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ke=(t,e,n,r)=>(jE(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),yr=(t,e,n)=>(jE(t,e,"access private method"),n);var Sy=(t,e,n,r)=>({set _(i){Ke(t,e,i,n)},get _(){return Y(t,e,r)}});function FY(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const VY="modulepreload",jY=function(t){return"/"+t},DO={},Wt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=jY(c),c in DO)return;DO[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":VY,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var EMe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MU={exports:{}},hT={},DU={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=Symbol.for("react.element"),UY=Symbol.for("react.portal"),$Y=Symbol.for("react.fragment"),BY=Symbol.for("react.strict_mode"),HY=Symbol.for("react.profiler"),zY=Symbol.for("react.provider"),WY=Symbol.for("react.context"),KY=Symbol.for("react.forward_ref"),qY=Symbol.for("react.suspense"),GY=Symbol.for("react.memo"),QY=Symbol.for("react.lazy"),LO=Symbol.iterator;function YY(t){return t===null||typeof t!="object"?null:(t=LO&&t[LO]||t["@@iterator"],typeof t=="function"?t:null)}var LU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FU=Object.assign,VU={};function Gh(t,e,n){this.props=t,this.context=e,this.refs=VU,this.updater=n||LU}Gh.prototype.isReactComponent={};Gh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jU(){}jU.prototype=Gh.prototype;function Zk(t,e,n){this.props=t,this.context=e,this.refs=VU,this.updater=n||LU}var e0=Zk.prototype=new jU;e0.constructor=Zk;FU(e0,Gh.prototype);e0.isPureReactComponent=!0;var FO=Array.isArray,UU=Object.prototype.hasOwnProperty,t0={current:null},$U={key:!0,ref:!0,__self:!0,__source:!0};function BU(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)UU.call(e,r)&&!$U.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Cg,type:t,key:s,ref:o,props:i,_owner:t0.current}}function XY(t,e){return{$$typeof:Cg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function n0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cg}function JY(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var VO=/\/+/g;function UE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JY(""+t.key):e.toString(36)}function vv(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cg:case UY:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+UE(o,0):r,FO(i)?(n="",t!=null&&(n=t.replace(VO,"$&/")+"/"),vv(i,e,n,"",function(l){return l})):i!=null&&(n0(i)&&(i=XY(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(VO,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",FO(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+UE(s,a);o+=vv(s,e,n,c,i)}else if(c=YY(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+UE(s,a++),o+=vv(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function by(t,e,n){if(t==null)return t;var r=[],i=0;return vv(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ZY(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wr={current:null},wv={transition:null},eX={ReactCurrentDispatcher:Wr,ReactCurrentBatchConfig:wv,ReactCurrentOwner:t0};function HU(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:by,forEach:function(t,e,n){by(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return by(t,function(){e++}),e},toArray:function(t){return by(t,function(e){return e})||[]},only:function(t){if(!n0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Gh;lt.Fragment=$Y;lt.Profiler=HY;lt.PureComponent=Zk;lt.StrictMode=BY;lt.Suspense=qY;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eX;lt.act=HU;lt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=FU({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=t0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)UU.call(e,c)&&!$U.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Cg,type:t.type,key:i,ref:s,props:r,_owner:o}};lt.createContext=function(t){return t={$$typeof:WY,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zY,_context:t},t.Consumer=t};lt.createElement=BU;lt.createFactory=function(t){var e=BU.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:KY,render:t}};lt.isValidElement=n0;lt.lazy=function(t){return{$$typeof:QY,_payload:{_status:-1,_result:t},_init:ZY}};lt.memo=function(t,e){return{$$typeof:GY,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=wv.transition;wv.transition={};try{t()}finally{wv.transition=e}};lt.unstable_act=HU;lt.useCallback=function(t,e){return Wr.current.useCallback(t,e)};lt.useContext=function(t){return Wr.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return Wr.current.useDeferredValue(t)};lt.useEffect=function(t,e){return Wr.current.useEffect(t,e)};lt.useId=function(){return Wr.current.useId()};lt.useImperativeHandle=function(t,e,n){return Wr.current.useImperativeHandle(t,e,n)};lt.useInsertionEffect=function(t,e){return Wr.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return Wr.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return Wr.current.useMemo(t,e)};lt.useReducer=function(t,e,n){return Wr.current.useReducer(t,e,n)};lt.useRef=function(t){return Wr.current.useRef(t)};lt.useState=function(t){return Wr.current.useState(t)};lt.useSyncExternalStore=function(t,e,n){return Wr.current.useSyncExternalStore(t,e,n)};lt.useTransition=function(){return Wr.current.useTransition()};lt.version="18.3.1";DU.exports=lt;var g=DU.exports;const Q=OU(g),r0=FY({__proto__:null,default:Q},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tX=g,nX=Symbol.for("react.element"),rX=Symbol.for("react.fragment"),iX=Object.prototype.hasOwnProperty,sX=tX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oX={key:!0,ref:!0,__self:!0,__source:!0};function zU(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iX.call(e,r)&&!oX.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nX,type:t,key:s,ref:o,props:i,_owner:sX.current}}hT.Fragment=rX;hT.jsx=zU;hT.jsxs=zU;MU.exports=hT;var p=MU.exports,WU={exports:{}},Di={},KU={exports:{}},qU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,j){var ie=V.length;V.push(j);e:for(;0<ie;){var Te=ie-1>>>1,ve=V[Te];if(0<i(ve,j))V[Te]=j,V[ie]=ve,ie=Te;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var j=V[0],ie=V.pop();if(ie!==j){V[0]=ie;e:for(var Te=0,ve=V.length,z=ve>>>1;Te<z;){var J=2*(Te+1)-1,G=V[J],q=J+1,ne=V[q];if(0>i(G,ie))q<ve&&0>i(ne,G)?(V[Te]=ne,V[q]=ie,Te=q):(V[Te]=G,V[J]=ie,Te=J);else if(q<ve&&0>i(ne,ie))V[Te]=ne,V[q]=ie,Te=q;else break e}}return j}function i(V,j){var ie=V.sortIndex-j.sortIndex;return ie!==0?ie:V.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,m=!1,w=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var j=n(l);j!==null;){if(j.callback===null)r(l);else if(j.startTime<=V)r(l),j.sortIndex=j.expirationTime,e(c,j);else break;j=n(l)}}function I(V){if(y=!1,C(V),!w)if(n(c)!==null)w=!0,X(x);else{var j=n(l);j!==null&&se(I,j.startTime-V)}}function x(V,j){w=!1,y&&(y=!1,v(S),S=-1),m=!0;var ie=h;try{for(C(j),d=n(c);d!==null&&(!(d.expirationTime>j)||V&&!R());){var Te=d.callback;if(typeof Te=="function"){d.callback=null,h=d.priorityLevel;var ve=Te(d.expirationTime<=j);j=t.unstable_now(),typeof ve=="function"?d.callback=ve:d===n(c)&&r(c),C(j)}else r(c);d=n(c)}if(d!==null)var z=!0;else{var J=n(l);J!==null&&se(I,J.startTime-j),z=!1}return z}finally{d=null,h=ie,m=!1}}var D=!1,A=null,S=-1,k=5,N=-1;function R(){return!(t.unstable_now()-N<k)}function O(){if(A!==null){var V=t.unstable_now();N=V;var j=!0;try{j=A(!0,V)}finally{j?P():(D=!1,A=null)}}else D=!1}var P;if(typeof T=="function")P=function(){T(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,H=$.port2;$.port1.onmessage=O,P=function(){H.postMessage(null)}}else P=function(){_(O,0)};function X(V){A=V,D||(D=!0,P())}function se(V,j){S=_(function(){V(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,X(x))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var ie=h;h=j;try{return V()}finally{h=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=h;h=V;try{return j()}finally{h=ie}},t.unstable_scheduleCallback=function(V,j,ie){var Te=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Te+ie:Te):ie=Te,V){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ie+ve,V={id:u++,callback:j,priorityLevel:V,startTime:ie,expirationTime:ve,sortIndex:-1},ie>Te?(V.sortIndex=ie,e(l,V),n(c)===null&&V===n(l)&&(y?(v(S),S=-1):y=!0,se(I,ie-Te))):(V.sortIndex=ve,e(c,V),w||m||(w=!0,X(x))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var j=h;return function(){var ie=h;h=j;try{return V.apply(this,arguments)}finally{h=ie}}}})(qU);KU.exports=qU;var aX=KU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cX=g,Oi=aX;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GU=new Set,um={};function Du(t,e){uh(t,e),uh(t+"Capture",e)}function uh(t,e){for(um[t]=e,t=0;t<e.length;t++)GU.add(e[t])}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ob=Object.prototype.hasOwnProperty,lX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jO={},UO={};function uX(t){return Ob.call(UO,t)?!0:Ob.call(jO,t)?!1:lX.test(t)?UO[t]=!0:(jO[t]=!0,!1)}function dX(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hX(t,e,n,r){if(e===null||typeof e>"u"||dX(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pr[t]=new Kr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pr[e]=new Kr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pr[t]=new Kr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pr[t]=new Kr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pr[t]=new Kr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pr[t]=new Kr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pr[t]=new Kr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pr[t]=new Kr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pr[t]=new Kr(t,5,!1,t.toLowerCase(),null,!1,!1)});var i0=/[\-:]([a-z])/g;function s0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(i0,s0);pr[e]=new Kr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(i0,s0);pr[e]=new Kr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(i0,s0);pr[e]=new Kr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pr[t]=new Kr(t,1,!1,t.toLowerCase(),null,!1,!1)});pr.xlinkHref=new Kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pr[t]=new Kr(t,1,!1,t.toLowerCase(),null,!0,!0)});function o0(t,e,n,r){var i=pr.hasOwnProperty(e)?pr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hX(e,n,i,r)&&(n=null),r||i===null?uX(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ba=cX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iy=Symbol.for("react.element"),gd=Symbol.for("react.portal"),yd=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),Mb=Symbol.for("react.profiler"),QU=Symbol.for("react.provider"),YU=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),Db=Symbol.for("react.suspense"),Lb=Symbol.for("react.suspense_list"),l0=Symbol.for("react.memo"),Ka=Symbol.for("react.lazy"),XU=Symbol.for("react.offscreen"),$O=Symbol.iterator;function Uf(t){return t===null||typeof t!="object"?null:(t=$O&&t[$O]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,$E;function ap(t){if($E===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$E=e&&e[1]||""}return`
`+$E+t}var BE=!1;function HE(t,e){if(!t||BE)return"";BE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{BE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ap(t):""}function fX(t){switch(t.tag){case 5:return ap(t.type);case 16:return ap("Lazy");case 13:return ap("Suspense");case 19:return ap("SuspenseList");case 0:case 2:case 15:return t=HE(t.type,!1),t;case 11:return t=HE(t.type.render,!1),t;case 1:return t=HE(t.type,!0),t;default:return""}}function Fb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yd:return"Fragment";case gd:return"Portal";case Mb:return"Profiler";case a0:return"StrictMode";case Db:return"Suspense";case Lb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case YU:return(t.displayName||"Context")+".Consumer";case QU:return(t._context.displayName||"Context")+".Provider";case c0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case l0:return e=t.displayName||null,e!==null?e:Fb(t.type)||"Memo";case Ka:e=t._payload,t=t._init;try{return Fb(t(e))}catch{}}return null}function pX(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fb(e);case 8:return e===a0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JU(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mX(t){var e=JU(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ay(t){t._valueTracker||(t._valueTracker=mX(t))}function ZU(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JU(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vb(t,e){var n=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function BO(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e4(t,e){e=e.checked,e!=null&&o0(t,"checked",e,!1)}function jb(t,e){e4(t,e);var n=Fc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ub(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ub(t,e.type,Fc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HO(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ub(t,e,n){(e!=="number"||iw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cp=Array.isArray;function Md(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $b(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zO(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(cp(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fc(n)}}function t4(t,e){var n=Fc(e.value),r=Fc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function WO(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ky,r4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ky=ky||document.createElement("div"),ky.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ky.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ep={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gX=["Webkit","ms","Moz","O"];Object.keys(Ep).forEach(function(t){gX.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ep[e]=Ep[t]})});function i4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ep.hasOwnProperty(t)&&Ep[t]?(""+e).trim():e+"px"}function s4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=i4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yX=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hb(t,e){if(e){if(yX[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function zb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wb=null;function u0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kb=null,Dd=null,Ld=null;function KO(t){if(t=bg(t)){if(typeof Kb!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=yT(e),Kb(t.stateNode,t.type,e))}}function o4(t){Dd?Ld?Ld.push(t):Ld=[t]:Dd=t}function a4(){if(Dd){var t=Dd,e=Ld;if(Ld=Dd=null,KO(t),e)for(t=0;t<e.length;t++)KO(e[t])}}function c4(t,e){return t(e)}function l4(){}var zE=!1;function u4(t,e,n){if(zE)return t(e,n);zE=!0;try{return c4(t,e,n)}finally{zE=!1,(Dd!==null||Ld!==null)&&(l4(),a4())}}function hm(t,e){var n=t.stateNode;if(n===null)return null;var r=yT(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var qb=!1;if(aa)try{var $f={};Object.defineProperty($f,"passive",{get:function(){qb=!0}}),window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch{qb=!1}function vX(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Sp=!1,sw=null,ow=!1,Gb=null,wX={onError:function(t){Sp=!0,sw=t}};function _X(t,e,n,r,i,s,o,a,c){Sp=!1,sw=null,vX.apply(wX,arguments)}function TX(t,e,n,r,i,s,o,a,c){if(_X.apply(this,arguments),Sp){if(Sp){var l=sw;Sp=!1,sw=null}else throw Error(ce(198));ow||(ow=!0,Gb=l)}}function Lu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function d4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qO(t){if(Lu(t)!==t)throw Error(ce(188))}function CX(t){var e=t.alternate;if(!e){if(e=Lu(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qO(i),t;if(s===r)return qO(i),e;s=s.sibling}throw Error(ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function h4(t){return t=CX(t),t!==null?f4(t):null}function f4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f4(t);if(e!==null)return e;t=t.sibling}return null}var p4=Oi.unstable_scheduleCallback,GO=Oi.unstable_cancelCallback,EX=Oi.unstable_shouldYield,SX=Oi.unstable_requestPaint,vn=Oi.unstable_now,bX=Oi.unstable_getCurrentPriorityLevel,d0=Oi.unstable_ImmediatePriority,m4=Oi.unstable_UserBlockingPriority,aw=Oi.unstable_NormalPriority,IX=Oi.unstable_LowPriority,g4=Oi.unstable_IdlePriority,fT=null,lo=null;function AX(t){if(lo&&typeof lo.onCommitFiberRoot=="function")try{lo.onCommitFiberRoot(fT,t,void 0,(t.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:RX,kX=Math.log,xX=Math.LN2;function RX(t){return t>>>=0,t===0?32:31-(kX(t)/xX|0)|0}var xy=64,Ry=4194304;function lp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=lp(a):(s&=o,s!==0&&(r=lp(s)))}else o=n&~i,o!==0?r=lp(o):s!==0&&(r=lp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Is(e),i=1<<n,r|=t[n],e&=~i;return r}function PX(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NX(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Is(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=PX(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Qb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function y4(){var t=xy;return xy<<=1,!(xy&4194240)&&(xy=64),t}function WE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Is(e),t[e]=n}function OX(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Is(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function h0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Is(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var kt=0;function v4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var w4,f0,_4,T4,C4,Yb=!1,Py=[],gc=null,yc=null,vc=null,fm=new Map,pm=new Map,Ya=[],MX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QO(t,e){switch(t){case"focusin":case"focusout":gc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":vc=null;break;case"pointerover":case"pointerout":fm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pm.delete(e.pointerId)}}function Bf(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=bg(e),e!==null&&f0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DX(t,e,n,r,i){switch(e){case"focusin":return gc=Bf(gc,t,e,n,r,i),!0;case"dragenter":return yc=Bf(yc,t,e,n,r,i),!0;case"mouseover":return vc=Bf(vc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fm.set(s,Bf(fm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pm.set(s,Bf(pm.get(s)||null,t,e,n,r,i)),!0}return!1}function E4(t){var e=Ll(t.target);if(e!==null){var n=Lu(e);if(n!==null){if(e=n.tag,e===13){if(e=d4(n),e!==null){t.blockedOn=e,C4(t.priority,function(){_4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _v(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wb=r,n.target.dispatchEvent(r),Wb=null}else return e=bg(n),e!==null&&f0(e),t.blockedOn=n,!1;e.shift()}return!0}function YO(t,e,n){_v(t)&&n.delete(e)}function LX(){Yb=!1,gc!==null&&_v(gc)&&(gc=null),yc!==null&&_v(yc)&&(yc=null),vc!==null&&_v(vc)&&(vc=null),fm.forEach(YO),pm.forEach(YO)}function Hf(t,e){t.blockedOn===e&&(t.blockedOn=null,Yb||(Yb=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,LX)))}function mm(t){function e(i){return Hf(i,t)}if(0<Py.length){Hf(Py[0],t);for(var n=1;n<Py.length;n++){var r=Py[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gc!==null&&Hf(gc,t),yc!==null&&Hf(yc,t),vc!==null&&Hf(vc,t),fm.forEach(e),pm.forEach(e),n=0;n<Ya.length;n++)r=Ya[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ya.length&&(n=Ya[0],n.blockedOn===null);)E4(n),n.blockedOn===null&&Ya.shift()}var Fd=ba.ReactCurrentBatchConfig,lw=!0;function FX(t,e,n,r){var i=kt,s=Fd.transition;Fd.transition=null;try{kt=1,p0(t,e,n,r)}finally{kt=i,Fd.transition=s}}function VX(t,e,n,r){var i=kt,s=Fd.transition;Fd.transition=null;try{kt=4,p0(t,e,n,r)}finally{kt=i,Fd.transition=s}}function p0(t,e,n,r){if(lw){var i=Xb(t,e,n,r);if(i===null)tS(t,e,r,uw,n),QO(t,r);else if(DX(i,t,e,n,r))r.stopPropagation();else if(QO(t,r),e&4&&-1<MX.indexOf(t)){for(;i!==null;){var s=bg(i);if(s!==null&&w4(s),s=Xb(t,e,n,r),s===null&&tS(t,e,r,uw,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tS(t,e,r,null,n)}}var uw=null;function Xb(t,e,n,r){if(uw=null,t=u0(r),t=Ll(t),t!==null)if(e=Lu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=d4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uw=t,null}function S4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bX()){case d0:return 1;case m4:return 4;case aw:case IX:return 16;case g4:return 536870912;default:return 16}default:return 16}}var lc=null,m0=null,Tv=null;function b4(){if(Tv)return Tv;var t,e=m0,n=e.length,r,i="value"in lc?lc.value:lc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Tv=i.slice(t,1<r?1-r:void 0)}function Cv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ny(){return!0}function XO(){return!1}function Li(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ny:XO,this.isPropagationStopped=XO,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ny)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ny)},persist:function(){},isPersistent:Ny}),e}var Qh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g0=Li(Qh),Sg=tn({},Qh,{view:0,detail:0}),jX=Li(Sg),KE,qE,zf,pT=tn({},Sg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zf&&(zf&&t.type==="mousemove"?(KE=t.screenX-zf.screenX,qE=t.screenY-zf.screenY):qE=KE=0,zf=t),KE)},movementY:function(t){return"movementY"in t?t.movementY:qE}}),JO=Li(pT),UX=tn({},pT,{dataTransfer:0}),$X=Li(UX),BX=tn({},Sg,{relatedTarget:0}),GE=Li(BX),HX=tn({},Qh,{animationName:0,elapsedTime:0,pseudoElement:0}),zX=Li(HX),WX=tn({},Qh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KX=Li(WX),qX=tn({},Qh,{data:0}),ZO=Li(qX),GX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XX(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YX[t])?!!e[t]:!1}function y0(){return XX}var JX=tn({},Sg,{key:function(t){if(t.key){var e=GX[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QX[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y0,charCode:function(t){return t.type==="keypress"?Cv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZX=Li(JX),eJ=tn({},pT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eM=Li(eJ),tJ=tn({},Sg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y0}),nJ=Li(tJ),rJ=tn({},Qh,{propertyName:0,elapsedTime:0,pseudoElement:0}),iJ=Li(rJ),sJ=tn({},pT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oJ=Li(sJ),aJ=[9,13,27,32],v0=aa&&"CompositionEvent"in window,bp=null;aa&&"documentMode"in document&&(bp=document.documentMode);var cJ=aa&&"TextEvent"in window&&!bp,I4=aa&&(!v0||bp&&8<bp&&11>=bp),tM=" ",nM=!1;function A4(t,e){switch(t){case"keyup":return aJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vd=!1;function lJ(t,e){switch(t){case"compositionend":return k4(e);case"keypress":return e.which!==32?null:(nM=!0,tM);case"textInput":return t=e.data,t===tM&&nM?null:t;default:return null}}function uJ(t,e){if(vd)return t==="compositionend"||!v0&&A4(t,e)?(t=b4(),Tv=m0=lc=null,vd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I4&&e.locale!=="ko"?null:e.data;default:return null}}var dJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dJ[t.type]:e==="textarea"}function x4(t,e,n,r){o4(r),e=dw(e,"onChange"),0<e.length&&(n=new g0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ip=null,gm=null;function hJ(t){U4(t,0)}function mT(t){var e=Td(t);if(ZU(e))return t}function fJ(t,e){if(t==="change")return e}var R4=!1;if(aa){var QE;if(aa){var YE="oninput"in document;if(!YE){var iM=document.createElement("div");iM.setAttribute("oninput","return;"),YE=typeof iM.oninput=="function"}QE=YE}else QE=!1;R4=QE&&(!document.documentMode||9<document.documentMode)}function sM(){Ip&&(Ip.detachEvent("onpropertychange",P4),gm=Ip=null)}function P4(t){if(t.propertyName==="value"&&mT(gm)){var e=[];x4(e,gm,t,u0(t)),u4(hJ,e)}}function pJ(t,e,n){t==="focusin"?(sM(),Ip=e,gm=n,Ip.attachEvent("onpropertychange",P4)):t==="focusout"&&sM()}function mJ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mT(gm)}function gJ(t,e){if(t==="click")return mT(e)}function yJ(t,e){if(t==="input"||t==="change")return mT(e)}function vJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rs=typeof Object.is=="function"?Object.is:vJ;function ym(t,e){if(Rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ob.call(e,i)||!Rs(t[i],e[i]))return!1}return!0}function oM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aM(t,e){var n=oM(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oM(n)}}function N4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O4(){for(var t=window,e=iw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iw(t.document)}return e}function w0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wJ(t){var e=O4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&N4(n.ownerDocument.documentElement,n)){if(r!==null&&w0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=aM(n,s);var o=aM(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _J=aa&&"documentMode"in document&&11>=document.documentMode,wd=null,Jb=null,Ap=null,Zb=!1;function cM(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zb||wd==null||wd!==iw(r)||(r=wd,"selectionStart"in r&&w0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ap&&ym(Ap,r)||(Ap=r,r=dw(Jb,"onSelect"),0<r.length&&(e=new g0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wd)))}function Oy(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _d={animationend:Oy("Animation","AnimationEnd"),animationiteration:Oy("Animation","AnimationIteration"),animationstart:Oy("Animation","AnimationStart"),transitionend:Oy("Transition","TransitionEnd")},XE={},M4={};aa&&(M4=document.createElement("div").style,"AnimationEvent"in window||(delete _d.animationend.animation,delete _d.animationiteration.animation,delete _d.animationstart.animation),"TransitionEvent"in window||delete _d.transitionend.transition);function gT(t){if(XE[t])return XE[t];if(!_d[t])return t;var e=_d[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in M4)return XE[t]=e[n];return t}var D4=gT("animationend"),L4=gT("animationiteration"),F4=gT("animationstart"),V4=gT("transitionend"),j4=new Map,lM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(t,e){j4.set(t,e),Du(e,[t])}for(var JE=0;JE<lM.length;JE++){var ZE=lM[JE],TJ=ZE.toLowerCase(),CJ=ZE[0].toUpperCase()+ZE.slice(1);rl(TJ,"on"+CJ)}rl(D4,"onAnimationEnd");rl(L4,"onAnimationIteration");rl(F4,"onAnimationStart");rl("dblclick","onDoubleClick");rl("focusin","onFocus");rl("focusout","onBlur");rl(V4,"onTransitionEnd");uh("onMouseEnter",["mouseout","mouseover"]);uh("onMouseLeave",["mouseout","mouseover"]);uh("onPointerEnter",["pointerout","pointerover"]);uh("onPointerLeave",["pointerout","pointerover"]);Du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Du("onBeforeInput",["compositionend","keypress","textInput","paste"]);Du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var up="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(up));function uM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TX(r,e,void 0,t),t.currentTarget=null}function U4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;uM(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;uM(i,a,l),s=c}}}if(ow)throw t=Gb,ow=!1,Gb=null,t}function $t(t,e){var n=e[iI];n===void 0&&(n=e[iI]=new Set);var r=t+"__bubble";n.has(r)||($4(e,t,2,!1),n.add(r))}function eS(t,e,n){var r=0;e&&(r|=4),$4(n,t,r,e)}var My="_reactListening"+Math.random().toString(36).slice(2);function vm(t){if(!t[My]){t[My]=!0,GU.forEach(function(n){n!=="selectionchange"&&(EJ.has(n)||eS(n,!1,t),eS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[My]||(e[My]=!0,eS("selectionchange",!1,e))}}function $4(t,e,n,r){switch(S4(e)){case 1:var i=FX;break;case 4:i=VX;break;default:i=p0}n=i.bind(null,e,n,t),i=void 0,!qb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tS(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ll(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}u4(function(){var l=s,u=u0(n),d=[];e:{var h=j4.get(t);if(h!==void 0){var m=g0,w=t;switch(t){case"keypress":if(Cv(n)===0)break e;case"keydown":case"keyup":m=ZX;break;case"focusin":w="focus",m=GE;break;case"focusout":w="blur",m=GE;break;case"beforeblur":case"afterblur":m=GE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=JO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$X;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=nJ;break;case D4:case L4:case F4:m=zX;break;case V4:m=iJ;break;case"scroll":m=jX;break;case"wheel":m=oJ;break;case"copy":case"cut":case"paste":m=KX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=eM}var y=(e&4)!==0,_=!y&&t==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var T=l,C;T!==null;){C=T;var I=C.stateNode;if(C.tag===5&&I!==null&&(C=I,v!==null&&(I=hm(T,v),I!=null&&y.push(wm(T,I,C)))),_)break;T=T.return}0<y.length&&(h=new m(h,w,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Wb&&(w=n.relatedTarget||n.fromElement)&&(Ll(w)||w[ca]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=l,w=w?Ll(w):null,w!==null&&(_=Lu(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=l),m!==w)){if(y=JO,I="onMouseLeave",v="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(y=eM,I="onPointerLeave",v="onPointerEnter",T="pointer"),_=m==null?h:Td(m),C=w==null?h:Td(w),h=new y(I,T+"leave",m,n,u),h.target=_,h.relatedTarget=C,I=null,Ll(u)===l&&(y=new y(v,T+"enter",w,n,u),y.target=C,y.relatedTarget=_,I=y),_=I,m&&w)t:{for(y=m,v=w,T=0,C=y;C;C=Xu(C))T++;for(C=0,I=v;I;I=Xu(I))C++;for(;0<T-C;)y=Xu(y),T--;for(;0<C-T;)v=Xu(v),C--;for(;T--;){if(y===v||v!==null&&y===v.alternate)break t;y=Xu(y),v=Xu(v)}y=null}else y=null;m!==null&&dM(d,h,m,y,!1),w!==null&&_!==null&&dM(d,_,w,y,!0)}}e:{if(h=l?Td(l):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var x=fJ;else if(rM(h))if(R4)x=yJ;else{x=mJ;var D=pJ}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=gJ);if(x&&(x=x(t,l))){x4(d,x,n,u);break e}D&&D(t,h,l),t==="focusout"&&(D=h._wrapperState)&&D.controlled&&h.type==="number"&&Ub(h,"number",h.value)}switch(D=l?Td(l):window,t){case"focusin":(rM(D)||D.contentEditable==="true")&&(wd=D,Jb=l,Ap=null);break;case"focusout":Ap=Jb=wd=null;break;case"mousedown":Zb=!0;break;case"contextmenu":case"mouseup":case"dragend":Zb=!1,cM(d,n,u);break;case"selectionchange":if(_J)break;case"keydown":case"keyup":cM(d,n,u)}var A;if(v0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else vd?A4(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(I4&&n.locale!=="ko"&&(vd||S!=="onCompositionStart"?S==="onCompositionEnd"&&vd&&(A=b4()):(lc=u,m0="value"in lc?lc.value:lc.textContent,vd=!0)),D=dw(l,S),0<D.length&&(S=new ZO(S,t,null,n,u),d.push({event:S,listeners:D}),A?S.data=A:(A=k4(n),A!==null&&(S.data=A)))),(A=cJ?lJ(t,n):uJ(t,n))&&(l=dw(l,"onBeforeInput"),0<l.length&&(u=new ZO("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}U4(d,e)})}function wm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dw(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=hm(t,n),s!=null&&r.unshift(wm(t,s,i)),s=hm(t,e),s!=null&&r.push(wm(t,s,i))),t=t.return}return r}function Xu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dM(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=hm(n,s),c!=null&&o.unshift(wm(n,c,a))):i||(c=hm(n,s),c!=null&&o.push(wm(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SJ=/\r\n?/g,bJ=/\u0000|\uFFFD/g;function hM(t){return(typeof t=="string"?t:""+t).replace(SJ,`
`).replace(bJ,"")}function Dy(t,e,n){if(e=hM(e),hM(t)!==e&&n)throw Error(ce(425))}function hw(){}var eI=null,tI=null;function nI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rI=typeof setTimeout=="function"?setTimeout:void 0,IJ=typeof clearTimeout=="function"?clearTimeout:void 0,fM=typeof Promise=="function"?Promise:void 0,AJ=typeof queueMicrotask=="function"?queueMicrotask:typeof fM<"u"?function(t){return fM.resolve(null).then(t).catch(kJ)}:rI;function kJ(t){setTimeout(function(){throw t})}function nS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),mm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mm(e)}function wc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yh=Math.random().toString(36).slice(2),Zs="__reactFiber$"+Yh,_m="__reactProps$"+Yh,ca="__reactContainer$"+Yh,iI="__reactEvents$"+Yh,xJ="__reactListeners$"+Yh,RJ="__reactHandles$"+Yh;function Ll(t){var e=t[Zs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ca]||n[Zs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pM(t);t!==null;){if(n=t[Zs])return n;t=pM(t)}return e}t=n,n=t.parentNode}return null}function bg(t){return t=t[Zs]||t[ca],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Td(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function yT(t){return t[_m]||null}var sI=[],Cd=-1;function il(t){return{current:t}}function zt(t){0>Cd||(t.current=sI[Cd],sI[Cd]=null,Cd--)}function Vt(t,e){Cd++,sI[Cd]=t.current,t.current=e}var Vc={},Ar=il(Vc),ci=il(!1),cu=Vc;function dh(t,e){var n=t.type.contextTypes;if(!n)return Vc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function li(t){return t=t.childContextTypes,t!=null}function fw(){zt(ci),zt(Ar)}function mM(t,e,n){if(Ar.current!==Vc)throw Error(ce(168));Vt(Ar,e),Vt(ci,n)}function B4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ce(108,pX(t)||"Unknown",i));return tn({},n,r)}function pw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vc,cu=Ar.current,Vt(Ar,t),Vt(ci,ci.current),!0}function gM(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=B4(t,e,cu),r.__reactInternalMemoizedMergedChildContext=t,zt(ci),zt(Ar),Vt(Ar,t)):zt(ci),Vt(ci,n)}var zo=null,vT=!1,rS=!1;function H4(t){zo===null?zo=[t]:zo.push(t)}function PJ(t){vT=!0,H4(t)}function sl(){if(!rS&&zo!==null){rS=!0;var t=0,e=kt;try{var n=zo;for(kt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zo=null,vT=!1}catch(i){throw zo!==null&&(zo=zo.slice(t+1)),p4(d0,sl),i}finally{kt=e,rS=!1}}return null}var Ed=[],Sd=0,mw=null,gw=0,Hi=[],zi=0,lu=null,Go=1,Qo="";function Tl(t,e){Ed[Sd++]=gw,Ed[Sd++]=mw,mw=t,gw=e}function z4(t,e,n){Hi[zi++]=Go,Hi[zi++]=Qo,Hi[zi++]=lu,lu=t;var r=Go;t=Qo;var i=32-Is(r)-1;r&=~(1<<i),n+=1;var s=32-Is(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Go=1<<32-Is(e)+i|n<<i|r,Qo=s+t}else Go=1<<s|n<<i|r,Qo=t}function _0(t){t.return!==null&&(Tl(t,1),z4(t,1,0))}function T0(t){for(;t===mw;)mw=Ed[--Sd],Ed[Sd]=null,gw=Ed[--Sd],Ed[Sd]=null;for(;t===lu;)lu=Hi[--zi],Hi[zi]=null,Qo=Hi[--zi],Hi[zi]=null,Go=Hi[--zi],Hi[zi]=null}var ki=null,bi=null,Gt=!1,vs=null;function W4(t,e){var n=qi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ki=t,bi=wc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ki=t,bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lu!==null?{id:Go,overflow:Qo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ki=t,bi=null,!0):!1;default:return!1}}function oI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aI(t){if(Gt){var e=bi;if(e){var n=e;if(!yM(t,e)){if(oI(t))throw Error(ce(418));e=wc(n.nextSibling);var r=ki;e&&yM(t,e)?W4(r,n):(t.flags=t.flags&-4097|2,Gt=!1,ki=t)}}else{if(oI(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Gt=!1,ki=t}}}function vM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ki=t}function Ly(t){if(t!==ki)return!1;if(!Gt)return vM(t),Gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nI(t.type,t.memoizedProps)),e&&(e=bi)){if(oI(t))throw K4(),Error(ce(418));for(;e;)W4(t,e),e=wc(e.nextSibling)}if(vM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bi=wc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bi=null}}else bi=ki?wc(t.stateNode.nextSibling):null;return!0}function K4(){for(var t=bi;t;)t=wc(t.nextSibling)}function hh(){bi=ki=null,Gt=!1}function C0(t){vs===null?vs=[t]:vs.push(t)}var NJ=ba.ReactCurrentBatchConfig;function Wf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Fy(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wM(t){var e=t._init;return e(t._payload)}function q4(t){function e(v,T){if(t){var C=v.deletions;C===null?(v.deletions=[T],v.flags|=16):C.push(T)}}function n(v,T){if(!t)return null;for(;T!==null;)e(v,T),T=T.sibling;return null}function r(v,T){for(v=new Map;T!==null;)T.key!==null?v.set(T.key,T):v.set(T.index,T),T=T.sibling;return v}function i(v,T){return v=Ec(v,T),v.index=0,v.sibling=null,v}function s(v,T,C){return v.index=C,t?(C=v.alternate,C!==null?(C=C.index,C<T?(v.flags|=2,T):C):(v.flags|=2,T)):(v.flags|=1048576,T)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,T,C,I){return T===null||T.tag!==6?(T=uS(C,v.mode,I),T.return=v,T):(T=i(T,C),T.return=v,T)}function c(v,T,C,I){var x=C.type;return x===yd?u(v,T,C.props.children,I,C.key):T!==null&&(T.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ka&&wM(x)===T.type)?(I=i(T,C.props),I.ref=Wf(v,T,C),I.return=v,I):(I=xv(C.type,C.key,C.props,null,v.mode,I),I.ref=Wf(v,T,C),I.return=v,I)}function l(v,T,C,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=dS(C,v.mode,I),T.return=v,T):(T=i(T,C.children||[]),T.return=v,T)}function u(v,T,C,I,x){return T===null||T.tag!==7?(T=eu(C,v.mode,I,x),T.return=v,T):(T=i(T,C),T.return=v,T)}function d(v,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=uS(""+T,v.mode,C),T.return=v,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Iy:return C=xv(T.type,T.key,T.props,null,v.mode,C),C.ref=Wf(v,null,T),C.return=v,C;case gd:return T=dS(T,v.mode,C),T.return=v,T;case Ka:var I=T._init;return d(v,I(T._payload),C)}if(cp(T)||Uf(T))return T=eu(T,v.mode,C,null),T.return=v,T;Fy(v,T)}return null}function h(v,T,C,I){var x=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return x!==null?null:a(v,T,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Iy:return C.key===x?c(v,T,C,I):null;case gd:return C.key===x?l(v,T,C,I):null;case Ka:return x=C._init,h(v,T,x(C._payload),I)}if(cp(C)||Uf(C))return x!==null?null:u(v,T,C,I,null);Fy(v,C)}return null}function m(v,T,C,I,x){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(C)||null,a(T,v,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Iy:return v=v.get(I.key===null?C:I.key)||null,c(T,v,I,x);case gd:return v=v.get(I.key===null?C:I.key)||null,l(T,v,I,x);case Ka:var D=I._init;return m(v,T,C,D(I._payload),x)}if(cp(I)||Uf(I))return v=v.get(C)||null,u(T,v,I,x,null);Fy(T,I)}return null}function w(v,T,C,I){for(var x=null,D=null,A=T,S=T=0,k=null;A!==null&&S<C.length;S++){A.index>S?(k=A,A=null):k=A.sibling;var N=h(v,A,C[S],I);if(N===null){A===null&&(A=k);break}t&&A&&N.alternate===null&&e(v,A),T=s(N,T,S),D===null?x=N:D.sibling=N,D=N,A=k}if(S===C.length)return n(v,A),Gt&&Tl(v,S),x;if(A===null){for(;S<C.length;S++)A=d(v,C[S],I),A!==null&&(T=s(A,T,S),D===null?x=A:D.sibling=A,D=A);return Gt&&Tl(v,S),x}for(A=r(v,A);S<C.length;S++)k=m(A,v,S,C[S],I),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?S:k.key),T=s(k,T,S),D===null?x=k:D.sibling=k,D=k);return t&&A.forEach(function(R){return e(v,R)}),Gt&&Tl(v,S),x}function y(v,T,C,I){var x=Uf(C);if(typeof x!="function")throw Error(ce(150));if(C=x.call(C),C==null)throw Error(ce(151));for(var D=x=null,A=T,S=T=0,k=null,N=C.next();A!==null&&!N.done;S++,N=C.next()){A.index>S?(k=A,A=null):k=A.sibling;var R=h(v,A,N.value,I);if(R===null){A===null&&(A=k);break}t&&A&&R.alternate===null&&e(v,A),T=s(R,T,S),D===null?x=R:D.sibling=R,D=R,A=k}if(N.done)return n(v,A),Gt&&Tl(v,S),x;if(A===null){for(;!N.done;S++,N=C.next())N=d(v,N.value,I),N!==null&&(T=s(N,T,S),D===null?x=N:D.sibling=N,D=N);return Gt&&Tl(v,S),x}for(A=r(v,A);!N.done;S++,N=C.next())N=m(A,v,S,N.value,I),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?S:N.key),T=s(N,T,S),D===null?x=N:D.sibling=N,D=N);return t&&A.forEach(function(O){return e(v,O)}),Gt&&Tl(v,S),x}function _(v,T,C,I){if(typeof C=="object"&&C!==null&&C.type===yd&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Iy:e:{for(var x=C.key,D=T;D!==null;){if(D.key===x){if(x=C.type,x===yd){if(D.tag===7){n(v,D.sibling),T=i(D,C.props.children),T.return=v,v=T;break e}}else if(D.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ka&&wM(x)===D.type){n(v,D.sibling),T=i(D,C.props),T.ref=Wf(v,D,C),T.return=v,v=T;break e}n(v,D);break}else e(v,D);D=D.sibling}C.type===yd?(T=eu(C.props.children,v.mode,I,C.key),T.return=v,v=T):(I=xv(C.type,C.key,C.props,null,v.mode,I),I.ref=Wf(v,T,C),I.return=v,v=I)}return o(v);case gd:e:{for(D=C.key;T!==null;){if(T.key===D)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(v,T.sibling),T=i(T,C.children||[]),T.return=v,v=T;break e}else{n(v,T);break}else e(v,T);T=T.sibling}T=dS(C,v.mode,I),T.return=v,v=T}return o(v);case Ka:return D=C._init,_(v,T,D(C._payload),I)}if(cp(C))return w(v,T,C,I);if(Uf(C))return y(v,T,C,I);Fy(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(v,T.sibling),T=i(T,C),T.return=v,v=T):(n(v,T),T=uS(C,v.mode,I),T.return=v,v=T),o(v)):n(v,T)}return _}var fh=q4(!0),G4=q4(!1),yw=il(null),vw=null,bd=null,E0=null;function S0(){E0=bd=vw=null}function b0(t){var e=yw.current;zt(yw),t._currentValue=e}function cI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vd(t,e){vw=t,E0=bd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ri=!0),t.firstContext=null)}function es(t){var e=t._currentValue;if(E0!==t)if(t={context:t,memoizedValue:e,next:null},bd===null){if(vw===null)throw Error(ce(308));bd=t,vw.dependencies={lanes:0,firstContext:t}}else bd=bd.next=t;return e}var Fl=null;function I0(t){Fl===null?Fl=[t]:Fl.push(t)}function Q4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,I0(e)):(n.next=i.next,i.next=n),e.interleaved=n,la(t,r)}function la(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qa=!1;function A0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _c(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,la(t,n)}return i=r.interleaved,i===null?(e.next=e,I0(r)):(e.next=i.next,i.next=e),r.interleaved=e,la(t,n)}function Ev(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,h0(t,n)}}function _M(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ww(t,e,n,r){var i=t.updateQueue;qa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,y=a;switch(h=e,m=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){d=w.call(m,d,h);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,h=typeof w=="function"?w.call(m,d,h):w,h==null)break e;d=tn({},d,h);break e;case 2:qa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);du|=o,t.lanes=o,t.memoizedState=d}}function TM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var Ig={},uo=il(Ig),Tm=il(Ig),Cm=il(Ig);function Vl(t){if(t===Ig)throw Error(ce(174));return t}function k0(t,e){switch(Vt(Cm,e),Vt(Tm,t),Vt(uo,Ig),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bb(e,t)}zt(uo),Vt(uo,e)}function ph(){zt(uo),zt(Tm),zt(Cm)}function X4(t){Vl(Cm.current);var e=Vl(uo.current),n=Bb(e,t.type);e!==n&&(Vt(Tm,t),Vt(uo,n))}function x0(t){Tm.current===t&&(zt(uo),zt(Tm))}var Yt=il(0);function _w(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var iS=[];function R0(){for(var t=0;t<iS.length;t++)iS[t]._workInProgressVersionPrimary=null;iS.length=0}var Sv=ba.ReactCurrentDispatcher,sS=ba.ReactCurrentBatchConfig,uu=0,Zt=null,Ln=null,Xn=null,Tw=!1,kp=!1,Em=0,OJ=0;function vr(){throw Error(ce(321))}function P0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rs(t[n],e[n]))return!1;return!0}function N0(t,e,n,r,i,s){if(uu=s,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sv.current=t===null||t.memoizedState===null?FJ:VJ,t=n(r,i),kp){s=0;do{if(kp=!1,Em=0,25<=s)throw Error(ce(301));s+=1,Xn=Ln=null,e.updateQueue=null,Sv.current=jJ,t=n(r,i)}while(kp)}if(Sv.current=Cw,e=Ln!==null&&Ln.next!==null,uu=0,Xn=Ln=Zt=null,Tw=!1,e)throw Error(ce(300));return t}function O0(){var t=Em!==0;return Em=0,t}function Ks(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?Zt.memoizedState=Xn=t:Xn=Xn.next=t,Xn}function ts(){if(Ln===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=Ln.next;var e=Xn===null?Zt.memoizedState:Xn.next;if(e!==null)Xn=e,Ln=t;else{if(t===null)throw Error(ce(310));Ln=t,t={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Xn===null?Zt.memoizedState=Xn=t:Xn=Xn.next=t}return Xn}function Sm(t,e){return typeof e=="function"?e(t):e}function oS(t){var e=ts(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=Ln,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((uu&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Zt.lanes|=u,du|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,Rs(r,e.memoizedState)||(ri=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zt.lanes|=s,du|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function aS(t){var e=ts(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rs(s,e.memoizedState)||(ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function J4(){}function Z4(t,e){var n=Zt,r=ts(),i=e(),s=!Rs(r.memoizedState,i);if(s&&(r.memoizedState=i,ri=!0),r=r.queue,M0(n$.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xn!==null&&Xn.memoizedState.tag&1){if(n.flags|=2048,bm(9,t$.bind(null,n,r,i,e),void 0,null),tr===null)throw Error(ce(349));uu&30||e$(n,e,i)}return i}function e$(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function t$(t,e,n,r){e.value=n,e.getSnapshot=r,r$(e)&&i$(t)}function n$(t,e,n){return n(function(){r$(e)&&i$(t)})}function r$(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rs(t,n)}catch{return!0}}function i$(t){var e=la(t,1);e!==null&&As(e,t,1,-1)}function CM(t){var e=Ks();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sm,lastRenderedState:t},e.queue=t,t=t.dispatch=LJ.bind(null,Zt,t),[e.memoizedState,t]}function bm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s$(){return ts().memoizedState}function bv(t,e,n,r){var i=Ks();Zt.flags|=t,i.memoizedState=bm(1|e,n,void 0,r===void 0?null:r)}function wT(t,e,n,r){var i=ts();r=r===void 0?null:r;var s=void 0;if(Ln!==null){var o=Ln.memoizedState;if(s=o.destroy,r!==null&&P0(r,o.deps)){i.memoizedState=bm(e,n,s,r);return}}Zt.flags|=t,i.memoizedState=bm(1|e,n,s,r)}function EM(t,e){return bv(8390656,8,t,e)}function M0(t,e){return wT(2048,8,t,e)}function o$(t,e){return wT(4,2,t,e)}function a$(t,e){return wT(4,4,t,e)}function c$(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function l$(t,e,n){return n=n!=null?n.concat([t]):null,wT(4,4,c$.bind(null,e,t),n)}function D0(){}function u$(t,e){var n=ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&P0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function d$(t,e){var n=ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&P0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function h$(t,e,n){return uu&21?(Rs(n,e)||(n=y4(),Zt.lanes|=n,du|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ri=!0),t.memoizedState=n)}function MJ(t,e){var n=kt;kt=n!==0&&4>n?n:4,t(!0);var r=sS.transition;sS.transition={};try{t(!1),e()}finally{kt=n,sS.transition=r}}function f$(){return ts().memoizedState}function DJ(t,e,n){var r=Cc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},p$(t))m$(e,n);else if(n=Q4(t,e,n,r),n!==null){var i=jr();As(n,t,r,i),g$(n,e,r)}}function LJ(t,e,n){var r=Cc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(p$(t))m$(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Rs(a,o)){var c=e.interleaved;c===null?(i.next=i,I0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Q4(t,e,i,r),n!==null&&(i=jr(),As(n,t,r,i),g$(n,e,r))}}function p$(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function m$(t,e){kp=Tw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function g$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,h0(t,n)}}var Cw={readContext:es,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},FJ={readContext:es,useCallback:function(t,e){return Ks().memoizedState=[t,e===void 0?null:e],t},useContext:es,useEffect:EM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bv(4194308,4,c$.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bv(4194308,4,t,e)},useInsertionEffect:function(t,e){return bv(4,2,t,e)},useMemo:function(t,e){var n=Ks();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ks();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DJ.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Ks();return t={current:t},e.memoizedState=t},useState:CM,useDebugValue:D0,useDeferredValue:function(t){return Ks().memoizedState=t},useTransition:function(){var t=CM(!1),e=t[0];return t=MJ.bind(null,t[1]),Ks().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,i=Ks();if(Gt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),tr===null)throw Error(ce(349));uu&30||e$(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,EM(n$.bind(null,r,s,t),[t]),r.flags|=2048,bm(9,t$.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ks(),e=tr.identifierPrefix;if(Gt){var n=Qo,r=Go;n=(r&~(1<<32-Is(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Em++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VJ={readContext:es,useCallback:u$,useContext:es,useEffect:M0,useImperativeHandle:l$,useInsertionEffect:o$,useLayoutEffect:a$,useMemo:d$,useReducer:oS,useRef:s$,useState:function(){return oS(Sm)},useDebugValue:D0,useDeferredValue:function(t){var e=ts();return h$(e,Ln.memoizedState,t)},useTransition:function(){var t=oS(Sm)[0],e=ts().memoizedState;return[t,e]},useMutableSource:J4,useSyncExternalStore:Z4,useId:f$,unstable_isNewReconciler:!1},jJ={readContext:es,useCallback:u$,useContext:es,useEffect:M0,useImperativeHandle:l$,useInsertionEffect:o$,useLayoutEffect:a$,useMemo:d$,useReducer:aS,useRef:s$,useState:function(){return aS(Sm)},useDebugValue:D0,useDeferredValue:function(t){var e=ts();return Ln===null?e.memoizedState=t:h$(e,Ln.memoizedState,t)},useTransition:function(){var t=aS(Sm)[0],e=ts().memoizedState;return[t,e]},useMutableSource:J4,useSyncExternalStore:Z4,useId:f$,unstable_isNewReconciler:!1};function hs(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _T={isMounted:function(t){return(t=t._reactInternals)?Lu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jr(),i=Cc(t),s=ra(r,i);s.payload=e,n!=null&&(s.callback=n),e=_c(t,s,i),e!==null&&(As(e,t,i,r),Ev(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jr(),i=Cc(t),s=ra(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_c(t,s,i),e!==null&&(As(e,t,i,r),Ev(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jr(),r=Cc(t),i=ra(n,r);i.tag=2,e!=null&&(i.callback=e),e=_c(t,i,r),e!==null&&(As(e,t,r,n),Ev(e,t,r))}};function SM(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ym(n,r)||!ym(i,s):!0}function y$(t,e,n){var r=!1,i=Vc,s=e.contextType;return typeof s=="object"&&s!==null?s=es(s):(i=li(e)?cu:Ar.current,r=e.contextTypes,s=(r=r!=null)?dh(t,i):Vc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_T,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function bM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_T.enqueueReplaceState(e,e.state,null)}function uI(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},A0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=es(s):(s=li(e)?cu:Ar.current,i.context=dh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lI(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_T.enqueueReplaceState(i,i.state,null),ww(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mh(t,e){try{var n="",r=e;do n+=fX(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function cS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UJ=typeof WeakMap=="function"?WeakMap:Map;function v$(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sw||(Sw=!0,TI=r),dI(t,e)},n}function w$(t,e,n){n=ra(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dI(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){dI(t,e),typeof r!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function IM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UJ;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=eZ.bind(null,t,e,n),e.then(t,t))}function AM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kM(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,_c(n,e,1))),n.lanes|=1),t)}var $J=ba.ReactCurrentOwner,ri=!1;function Mr(t,e,n,r){e.child=t===null?G4(e,null,n,r):fh(e,t.child,n,r)}function xM(t,e,n,r,i){n=n.render;var s=e.ref;return Vd(e,i),r=N0(t,e,n,r,s,i),n=O0(),t!==null&&!ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ua(t,e,i)):(Gt&&n&&_0(e),e.flags|=1,Mr(t,e,r,i),e.child)}function RM(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!H0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_$(t,e,s,r,i)):(t=xv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ym,n(o,r)&&t.ref===e.ref)return ua(t,e,i)}return e.flags|=1,t=Ec(s,r),t.ref=e.ref,t.return=e,e.child=t}function _$(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ym(s,r)&&t.ref===e.ref)if(ri=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ri=!0);else return e.lanes=t.lanes,ua(t,e,i)}return hI(t,e,n,r,i)}function T$(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Ad,Ti),Ti|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vt(Ad,Ti),Ti|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Vt(Ad,Ti),Ti|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Vt(Ad,Ti),Ti|=r;return Mr(t,e,i,n),e.child}function C$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hI(t,e,n,r,i){var s=li(n)?cu:Ar.current;return s=dh(e,s),Vd(e,i),n=N0(t,e,n,r,s,i),r=O0(),t!==null&&!ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ua(t,e,i)):(Gt&&r&&_0(e),e.flags|=1,Mr(t,e,n,i),e.child)}function PM(t,e,n,r,i){if(li(n)){var s=!0;pw(e)}else s=!1;if(Vd(e,i),e.stateNode===null)Iv(t,e),y$(e,n,r),uI(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=es(l):(l=li(n)?cu:Ar.current,l=dh(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&bM(e,o,r,l),qa=!1;var h=e.memoizedState;o.state=h,ww(e,r,o,i),c=e.memoizedState,a!==r||h!==c||ci.current||qa?(typeof u=="function"&&(lI(e,n,u,r),c=e.memoizedState),(a=qa||SM(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Y4(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:hs(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=es(c):(c=li(n)?cu:Ar.current,c=dh(e,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&bM(e,o,r,c),qa=!1,h=e.memoizedState,o.state=h,ww(e,r,o,i);var w=e.memoizedState;a!==d||h!==w||ci.current||qa?(typeof m=="function"&&(lI(e,n,m,r),w=e.memoizedState),(l=qa||SM(e,n,l,r,h,w,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return fI(t,e,n,r,s,i)}function fI(t,e,n,r,i,s){C$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&gM(e,n,!1),ua(t,e,s);r=e.stateNode,$J.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fh(e,t.child,null,s),e.child=fh(e,null,a,s)):Mr(t,e,a,s),e.memoizedState=r.state,i&&gM(e,n,!0),e.child}function E$(t){var e=t.stateNode;e.pendingContext?mM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mM(t,e.context,!1),k0(t,e.containerInfo)}function NM(t,e,n,r,i){return hh(),C0(i),e.flags|=256,Mr(t,e,n,r),e.child}var pI={dehydrated:null,treeContext:null,retryLane:0};function mI(t){return{baseLanes:t,cachePool:null,transitions:null}}function S$(t,e,n){var r=e.pendingProps,i=Yt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Vt(Yt,i&1),t===null)return aI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ET(o,r,0,null),t=eu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mI(n),e.memoizedState=pI,t):L0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BJ(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ec(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ec(a,s):(s=eu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?mI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=pI,r}return s=t.child,t=s.sibling,r=Ec(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function L0(t,e){return e=ET({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vy(t,e,n,r){return r!==null&&C0(r),fh(e,t.child,null,n),t=L0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BJ(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=cS(Error(ce(422))),Vy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ET({mode:"visible",children:r.children},i,0,null),s=eu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fh(e,t.child,null,o),e.child.memoizedState=mI(o),e.memoizedState=pI,s);if(!(e.mode&1))return Vy(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ce(419)),r=cS(s,r,void 0),Vy(t,e,o,r)}if(a=(o&t.childLanes)!==0,ri||a){if(r=tr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,la(t,i),As(r,t,i,-1))}return B0(),r=cS(Error(ce(421))),Vy(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tZ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bi=wc(i.nextSibling),ki=e,Gt=!0,vs=null,t!==null&&(Hi[zi++]=Go,Hi[zi++]=Qo,Hi[zi++]=lu,Go=t.id,Qo=t.overflow,lu=e),e=L0(e,r.children),e.flags|=4096,e)}function OM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cI(t.return,e,n)}function lS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function b$(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mr(t,e,r.children,n),r=Yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&OM(t,n,e);else if(t.tag===19)OM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vt(Yt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_w(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_w(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lS(e,!0,n,null,s);break;case"together":lS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ua(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),du|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=Ec(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ec(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HJ(t,e,n){switch(e.tag){case 3:E$(e),hh();break;case 5:X4(e);break;case 1:li(e.type)&&pw(e);break;case 4:k0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Vt(yw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vt(Yt,Yt.current&1),e.flags|=128,null):n&e.child.childLanes?S$(t,e,n):(Vt(Yt,Yt.current&1),t=ua(t,e,n),t!==null?t.sibling:null);Vt(Yt,Yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return b$(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(Yt,Yt.current),r)break;return null;case 22:case 23:return e.lanes=0,T$(t,e,n)}return ua(t,e,n)}var I$,gI,A$,k$;I$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gI=function(){};A$=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vl(uo.current);var s=null;switch(n){case"input":i=Vb(t,i),r=Vb(t,r),s=[];break;case"select":i=tn({},i,{value:void 0}),r=tn({},r,{value:void 0}),s=[];break;case"textarea":i=$b(t,i),r=$b(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hw)}Hb(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(um.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(um.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&$t("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};k$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kf(t,e){if(!Gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zJ(t,e,n){var r=e.pendingProps;switch(T0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return li(e.type)&&fw(),wr(e),null;case 3:return r=e.stateNode,ph(),zt(ci),zt(Ar),R0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ly(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(SI(vs),vs=null))),gI(t,e),wr(e),null;case 5:x0(e);var i=Vl(Cm.current);if(n=e.type,t!==null&&e.stateNode!=null)A$(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return wr(e),null}if(t=Vl(uo.current),Ly(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zs]=e,r[_m]=s,t=(e.mode&1)!==0,n){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(i=0;i<up.length;i++)$t(up[i],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":BO(r,s),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$t("invalid",r);break;case"textarea":zO(r,s),$t("invalid",r)}Hb(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dy(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dy(r.textContent,a,t),i=["children",""+a]):um.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$t("scroll",r)}switch(n){case"input":Ay(r),HO(r,s,!0);break;case"textarea":Ay(r),WO(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zs]=e,t[_m]=r,I$(t,e,!1,!1),e.stateNode=t;e:{switch(o=zb(n,r),n){case"dialog":$t("cancel",t),$t("close",t),i=r;break;case"iframe":case"object":case"embed":$t("load",t),i=r;break;case"video":case"audio":for(i=0;i<up.length;i++)$t(up[i],t);i=r;break;case"source":$t("error",t),i=r;break;case"img":case"image":case"link":$t("error",t),$t("load",t),i=r;break;case"details":$t("toggle",t),i=r;break;case"input":BO(t,r),i=Vb(t,r),$t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tn({},r,{value:void 0}),$t("invalid",t);break;case"textarea":zO(t,r),i=$b(t,r),$t("invalid",t);break;default:i=r}Hb(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?s4(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&r4(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&dm(t,c):typeof c=="number"&&dm(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(um.hasOwnProperty(s)?c!=null&&s==="onScroll"&&$t("scroll",t):c!=null&&o0(t,s,c,o))}switch(n){case"input":Ay(t),HO(t,r,!1);break;case"textarea":Ay(t),WO(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Md(t,!!r.multiple,s,!1):r.defaultValue!=null&&Md(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(t&&e.stateNode!=null)k$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Vl(Cm.current),Vl(uo.current),Ly(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zs]=e,(s=r.nodeValue!==n)&&(t=ki,t!==null))switch(t.tag){case 3:Dy(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dy(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zs]=e,e.stateNode=r}return wr(e),null;case 13:if(zt(Yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gt&&bi!==null&&e.mode&1&&!(e.flags&128))K4(),hh(),e.flags|=98560,s=!1;else if(s=Ly(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[Zs]=e}else hh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),s=!1}else vs!==null&&(SI(vs),vs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?Fn===0&&(Fn=3):B0())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return ph(),gI(t,e),t===null&&vm(e.stateNode.containerInfo),wr(e),null;case 10:return b0(e.type._context),wr(e),null;case 17:return li(e.type)&&fw(),wr(e),null;case 19:if(zt(Yt),s=e.memoizedState,s===null)return wr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Kf(s,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_w(t),o!==null){for(e.flags|=128,Kf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vt(Yt,Yt.current&1|2),e.child}t=t.sibling}s.tail!==null&&vn()>gh&&(e.flags|=128,r=!0,Kf(s,!1),e.lanes=4194304)}else{if(!r)if(t=_w(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Gt)return wr(e),null}else 2*vn()-s.renderingStartTime>gh&&n!==1073741824&&(e.flags|=128,r=!0,Kf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vn(),e.sibling=null,n=Yt.current,Vt(Yt,r?n&1|2:n&1),e):(wr(e),null);case 22:case 23:return $0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ti&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function WJ(t,e){switch(T0(e),e.tag){case 1:return li(e.type)&&fw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ph(),zt(ci),zt(Ar),R0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x0(e),null;case 13:if(zt(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));hh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Yt),null;case 4:return ph(),null;case 10:return b0(e.type._context),null;case 22:case 23:return $0(),null;case 24:return null;default:return null}}var jy=!1,Er=!1,KJ=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Id(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ln(t,e,r)}else n.current=null}function yI(t,e,n){try{n()}catch(r){ln(t,e,r)}}var MM=!1;function qJ(t,e){if(eI=lw,t=O4(),w0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=o),h===s&&++u===r&&(c=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tI={focusedElem:t,selectionRange:n},lw=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,_=w.memoizedState,v=e.stateNode,T=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:hs(e.type,y),_);v.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(I){ln(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return w=MM,MM=!1,w}function xp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yI(e,n,s)}i=i.next}while(i!==r)}}function TT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function x$(t){var e=t.alternate;e!==null&&(t.alternate=null,x$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zs],delete e[_m],delete e[iI],delete e[xJ],delete e[RJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R$(t){return t.tag===5||t.tag===3||t.tag===4}function DM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hw));else if(r!==4&&(t=t.child,t!==null))for(wI(t,e,n),t=t.sibling;t!==null;)wI(t,e,n),t=t.sibling}function _I(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_I(t,e,n),t=t.sibling;t!==null;)_I(t,e,n),t=t.sibling}var ir=null,gs=!1;function Va(t,e,n){for(n=n.child;n!==null;)P$(t,e,n),n=n.sibling}function P$(t,e,n){if(lo&&typeof lo.onCommitFiberUnmount=="function")try{lo.onCommitFiberUnmount(fT,n)}catch{}switch(n.tag){case 5:Er||Id(n,e);case 6:var r=ir,i=gs;ir=null,Va(t,e,n),ir=r,gs=i,ir!==null&&(gs?(t=ir,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ir.removeChild(n.stateNode));break;case 18:ir!==null&&(gs?(t=ir,n=n.stateNode,t.nodeType===8?nS(t.parentNode,n):t.nodeType===1&&nS(t,n),mm(t)):nS(ir,n.stateNode));break;case 4:r=ir,i=gs,ir=n.stateNode.containerInfo,gs=!0,Va(t,e,n),ir=r,gs=i;break;case 0:case 11:case 14:case 15:if(!Er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yI(n,e,o),i=i.next}while(i!==r)}Va(t,e,n);break;case 1:if(!Er&&(Id(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ln(n,e,a)}Va(t,e,n);break;case 21:Va(t,e,n);break;case 22:n.mode&1?(Er=(r=Er)||n.memoizedState!==null,Va(t,e,n),Er=r):Va(t,e,n);break;default:Va(t,e,n)}}function LM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KJ),e.forEach(function(r){var i=nZ.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ls(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ir=a.stateNode,gs=!1;break e;case 3:ir=a.stateNode.containerInfo,gs=!0;break e;case 4:ir=a.stateNode.containerInfo,gs=!0;break e}a=a.return}if(ir===null)throw Error(ce(160));P$(s,o,i),ir=null,gs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){ln(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N$(e,t),e=e.sibling}function N$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),zs(t),r&4){try{xp(3,t,t.return),TT(3,t)}catch(y){ln(t,t.return,y)}try{xp(5,t,t.return)}catch(y){ln(t,t.return,y)}}break;case 1:ls(e,t),zs(t),r&512&&n!==null&&Id(n,n.return);break;case 5:if(ls(e,t),zs(t),r&512&&n!==null&&Id(n,n.return),t.flags&32){var i=t.stateNode;try{dm(i,"")}catch(y){ln(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&e4(i,s),zb(a,o);var l=zb(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?s4(i,d):u==="dangerouslySetInnerHTML"?r4(i,d):u==="children"?dm(i,d):o0(i,u,d,l)}switch(a){case"input":jb(i,s);break;case"textarea":t4(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Md(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Md(i,!!s.multiple,s.defaultValue,!0):Md(i,!!s.multiple,s.multiple?[]:"",!1))}i[_m]=s}catch(y){ln(t,t.return,y)}}break;case 6:if(ls(e,t),zs(t),r&4){if(t.stateNode===null)throw Error(ce(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ln(t,t.return,y)}}break;case 3:if(ls(e,t),zs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mm(e.containerInfo)}catch(y){ln(t,t.return,y)}break;case 4:ls(e,t),zs(t);break;case 13:ls(e,t),zs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(j0=vn())),r&4&&LM(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Er=(l=Er)||u,ls(e,t),Er=l):ls(e,t),zs(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(h=Ie,m=h.child,h.tag){case 0:case 11:case 14:case 15:xp(4,h,h.return);break;case 1:Id(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(y){ln(r,n,y)}}break;case 5:Id(h,h.return);break;case 22:if(h.memoizedState!==null){VM(d);continue}}m!==null?(m.return=h,Ie=m):VM(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=i4("display",o))}catch(y){ln(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(y){ln(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ls(e,t),zs(t),r&4&&LM(t);break;case 21:break;default:ls(e,t),zs(t)}}function zs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(R$(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dm(i,""),r.flags&=-33);var s=DM(t);_I(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=DM(t);wI(t,a,o);break;default:throw Error(ce(161))}}catch(c){ln(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GJ(t,e,n){Ie=t,O$(t)}function O$(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jy;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Er;a=jy;var l=Er;if(jy=o,(Er=c)&&!l)for(Ie=i;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?jM(i):c!==null?(c.return=o,Ie=c):jM(i);for(;s!==null;)Ie=s,O$(s),s=s.sibling;Ie=i,jy=a,Er=l}FM(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):FM(t)}}function FM(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Er||TT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&TM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}TM(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&mm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Er||e.flags&512&&vI(e)}catch(h){ln(e,e.return,h)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function VM(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function jM(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{TT(4,e)}catch(c){ln(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ln(e,i,c)}}var s=e.return;try{vI(e)}catch(c){ln(e,s,c)}break;case 5:var o=e.return;try{vI(e)}catch(c){ln(e,o,c)}}}catch(c){ln(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var QJ=Math.ceil,Ew=ba.ReactCurrentDispatcher,F0=ba.ReactCurrentOwner,Yi=ba.ReactCurrentBatchConfig,vt=0,tr=null,In=null,fr=0,Ti=0,Ad=il(0),Fn=0,Im=null,du=0,CT=0,V0=0,Rp=null,ei=null,j0=0,gh=1/0,Uo=null,Sw=!1,TI=null,Tc=null,Uy=!1,uc=null,bw=0,Pp=0,CI=null,Av=-1,kv=0;function jr(){return vt&6?vn():Av!==-1?Av:Av=vn()}function Cc(t){return t.mode&1?vt&2&&fr!==0?fr&-fr:NJ.transition!==null?(kv===0&&(kv=y4()),kv):(t=kt,t!==0||(t=window.event,t=t===void 0?16:S4(t.type)),t):1}function As(t,e,n,r){if(50<Pp)throw Pp=0,CI=null,Error(ce(185));Eg(t,n,r),(!(vt&2)||t!==tr)&&(t===tr&&(!(vt&2)&&(CT|=n),Fn===4&&Xa(t,fr)),ui(t,r),n===1&&vt===0&&!(e.mode&1)&&(gh=vn()+500,vT&&sl()))}function ui(t,e){var n=t.callbackNode;NX(t,e);var r=cw(t,t===tr?fr:0);if(r===0)n!==null&&GO(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&GO(n),e===1)t.tag===0?PJ(UM.bind(null,t)):H4(UM.bind(null,t)),AJ(function(){!(vt&6)&&sl()}),n=null;else{switch(v4(r)){case 1:n=d0;break;case 4:n=m4;break;case 16:n=aw;break;case 536870912:n=g4;break;default:n=aw}n=$$(n,M$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function M$(t,e){if(Av=-1,kv=0,vt&6)throw Error(ce(327));var n=t.callbackNode;if(jd()&&t.callbackNode!==n)return null;var r=cw(t,t===tr?fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Iw(t,r);else{e=r;var i=vt;vt|=2;var s=L$();(tr!==t||fr!==e)&&(Uo=null,gh=vn()+500,Zl(t,e));do try{JJ();break}catch(a){D$(t,a)}while(!0);S0(),Ew.current=s,vt=i,In!==null?e=0:(tr=null,fr=0,e=Fn)}if(e!==0){if(e===2&&(i=Qb(t),i!==0&&(r=i,e=EI(t,i))),e===1)throw n=Im,Zl(t,0),Xa(t,r),ui(t,vn()),n;if(e===6)Xa(t,r);else{if(i=t.current.alternate,!(r&30)&&!YJ(i)&&(e=Iw(t,r),e===2&&(s=Qb(t),s!==0&&(r=s,e=EI(t,s))),e===1))throw n=Im,Zl(t,0),Xa(t,r),ui(t,vn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Cl(t,ei,Uo);break;case 3:if(Xa(t,r),(r&130023424)===r&&(e=j0+500-vn(),10<e)){if(cw(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rI(Cl.bind(null,t,ei,Uo),e);break}Cl(t,ei,Uo);break;case 4:if(Xa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Is(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QJ(r/1960))-r,10<r){t.timeoutHandle=rI(Cl.bind(null,t,ei,Uo),r);break}Cl(t,ei,Uo);break;case 5:Cl(t,ei,Uo);break;default:throw Error(ce(329))}}}return ui(t,vn()),t.callbackNode===n?M$.bind(null,t):null}function EI(t,e){var n=Rp;return t.current.memoizedState.isDehydrated&&(Zl(t,e).flags|=256),t=Iw(t,e),t!==2&&(e=ei,ei=n,e!==null&&SI(e)),t}function SI(t){ei===null?ei=t:ei.push.apply(ei,t)}function YJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xa(t,e){for(e&=~V0,e&=~CT,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Is(e),r=1<<n;t[n]=-1,e&=~r}}function UM(t){if(vt&6)throw Error(ce(327));jd();var e=cw(t,0);if(!(e&1))return ui(t,vn()),null;var n=Iw(t,e);if(t.tag!==0&&n===2){var r=Qb(t);r!==0&&(e=r,n=EI(t,r))}if(n===1)throw n=Im,Zl(t,0),Xa(t,e),ui(t,vn()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cl(t,ei,Uo),ui(t,vn()),null}function U0(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(gh=vn()+500,vT&&sl())}}function hu(t){uc!==null&&uc.tag===0&&!(vt&6)&&jd();var e=vt;vt|=1;var n=Yi.transition,r=kt;try{if(Yi.transition=null,kt=1,t)return t()}finally{kt=r,Yi.transition=n,vt=e,!(vt&6)&&sl()}}function $0(){Ti=Ad.current,zt(Ad)}function Zl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IJ(n)),In!==null)for(n=In.return;n!==null;){var r=n;switch(T0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fw();break;case 3:ph(),zt(ci),zt(Ar),R0();break;case 5:x0(r);break;case 4:ph();break;case 13:zt(Yt);break;case 19:zt(Yt);break;case 10:b0(r.type._context);break;case 22:case 23:$0()}n=n.return}if(tr=t,In=t=Ec(t.current,null),fr=Ti=e,Fn=0,Im=null,V0=CT=du=0,ei=Rp=null,Fl!==null){for(e=0;e<Fl.length;e++)if(n=Fl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fl=null}return t}function D$(t,e){do{var n=In;try{if(S0(),Sv.current=Cw,Tw){for(var r=Zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tw=!1}if(uu=0,Xn=Ln=Zt=null,kp=!1,Em=0,F0.current=null,n===null||n.return===null){Fn=1,Im=e,In=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=fr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=AM(o);if(m!==null){m.flags&=-257,kM(m,o,a,s,e),m.mode&1&&IM(s,l,e),e=m,c=l;var w=e.updateQueue;if(w===null){var y=new Set;y.add(c),e.updateQueue=y}else w.add(c);break e}else{if(!(e&1)){IM(s,l,e),B0();break e}c=Error(ce(426))}}else if(Gt&&a.mode&1){var _=AM(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),kM(_,o,a,s,e),C0(mh(c,a));break e}}s=c=mh(c,a),Fn!==4&&(Fn=2),Rp===null?Rp=[s]:Rp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=v$(s,c,e);_M(s,v);break e;case 1:a=c;var T=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Tc===null||!Tc.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=w$(s,a,e);_M(s,I);break e}}s=s.return}while(s!==null)}V$(n)}catch(x){e=x,In===n&&n!==null&&(In=n=n.return);continue}break}while(!0)}function L$(){var t=Ew.current;return Ew.current=Cw,t===null?Cw:t}function B0(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),tr===null||!(du&268435455)&&!(CT&268435455)||Xa(tr,fr)}function Iw(t,e){var n=vt;vt|=2;var r=L$();(tr!==t||fr!==e)&&(Uo=null,Zl(t,e));do try{XJ();break}catch(i){D$(t,i)}while(!0);if(S0(),vt=n,Ew.current=r,In!==null)throw Error(ce(261));return tr=null,fr=0,Fn}function XJ(){for(;In!==null;)F$(In)}function JJ(){for(;In!==null&&!EX();)F$(In)}function F$(t){var e=U$(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?V$(t):In=e,F0.current=null}function V$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WJ(n,e),n!==null){n.flags&=32767,In=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,In=null;return}}else if(n=zJ(n,e,Ti),n!==null){In=n;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Fn===0&&(Fn=5)}function Cl(t,e,n){var r=kt,i=Yi.transition;try{Yi.transition=null,kt=1,ZJ(t,e,n,r)}finally{Yi.transition=i,kt=r}return null}function ZJ(t,e,n,r){do jd();while(uc!==null);if(vt&6)throw Error(ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(OX(t,s),t===tr&&(In=tr=null,fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uy||(Uy=!0,$$(aw,function(){return jd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Yi.transition,Yi.transition=null;var o=kt;kt=1;var a=vt;vt|=4,F0.current=null,qJ(t,n),N$(n,t),wJ(tI),lw=!!eI,tI=eI=null,t.current=n,GJ(n),SX(),vt=a,kt=o,Yi.transition=s}else t.current=n;if(Uy&&(Uy=!1,uc=t,bw=i),s=t.pendingLanes,s===0&&(Tc=null),AX(n.stateNode),ui(t,vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sw)throw Sw=!1,t=TI,TI=null,t;return bw&1&&t.tag!==0&&jd(),s=t.pendingLanes,s&1?t===CI?Pp++:(Pp=0,CI=t):Pp=0,sl(),null}function jd(){if(uc!==null){var t=v4(bw),e=Yi.transition,n=kt;try{if(Yi.transition=null,kt=16>t?16:t,uc===null)var r=!1;else{if(t=uc,uc=null,bw=0,vt&6)throw Error(ce(331));var i=vt;for(vt|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ie=l;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:xp(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var h=u.sibling,m=u.return;if(x$(u),u===l){Ie=null;break}if(h!==null){h.return=m,Ie=h;break}Ie=m}}}var w=s.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xp(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ie=v;break e}Ie=s.return}}var T=t.current;for(Ie=T;Ie!==null;){o=Ie;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Ie=C;else e:for(o=T;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:TT(9,a)}}catch(x){ln(a,a.return,x)}if(a===o){Ie=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,Ie=I;break e}Ie=a.return}}if(vt=i,sl(),lo&&typeof lo.onPostCommitFiberRoot=="function")try{lo.onPostCommitFiberRoot(fT,t)}catch{}r=!0}return r}finally{kt=n,Yi.transition=e}}return!1}function $M(t,e,n){e=mh(n,e),e=v$(t,e,1),t=_c(t,e,1),e=jr(),t!==null&&(Eg(t,1,e),ui(t,e))}function ln(t,e,n){if(t.tag===3)$M(t,t,n);else for(;e!==null;){if(e.tag===3){$M(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tc===null||!Tc.has(r))){t=mh(n,t),t=w$(e,t,1),e=_c(e,t,1),t=jr(),e!==null&&(Eg(e,1,t),ui(e,t));break}}e=e.return}}function eZ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jr(),t.pingedLanes|=t.suspendedLanes&n,tr===t&&(fr&n)===n&&(Fn===4||Fn===3&&(fr&130023424)===fr&&500>vn()-j0?Zl(t,0):V0|=n),ui(t,e)}function j$(t,e){e===0&&(t.mode&1?(e=Ry,Ry<<=1,!(Ry&130023424)&&(Ry=4194304)):e=1);var n=jr();t=la(t,e),t!==null&&(Eg(t,e,n),ui(t,n))}function tZ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j$(t,n)}function nZ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),j$(t,n)}var U$;U$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ci.current)ri=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ri=!1,HJ(t,e,n);ri=!!(t.flags&131072)}else ri=!1,Gt&&e.flags&1048576&&z4(e,gw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Iv(t,e),t=e.pendingProps;var i=dh(e,Ar.current);Vd(e,n),i=N0(null,e,r,t,i,n);var s=O0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,li(r)?(s=!0,pw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,A0(e),i.updater=_T,e.stateNode=i,i._reactInternals=e,uI(e,r,t,n),e=fI(null,e,r,!0,s,n)):(e.tag=0,Gt&&s&&_0(e),Mr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Iv(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=iZ(r),t=hs(r,t),i){case 0:e=hI(null,e,r,t,n);break e;case 1:e=PM(null,e,r,t,n);break e;case 11:e=xM(null,e,r,t,n);break e;case 14:e=RM(null,e,r,hs(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),hI(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),PM(t,e,r,i,n);case 3:e:{if(E$(e),t===null)throw Error(ce(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Y4(t,e),ww(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mh(Error(ce(423)),e),e=NM(t,e,r,n,i);break e}else if(r!==i){i=mh(Error(ce(424)),e),e=NM(t,e,r,n,i);break e}else for(bi=wc(e.stateNode.containerInfo.firstChild),ki=e,Gt=!0,vs=null,n=G4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hh(),r===i){e=ua(t,e,n);break e}Mr(t,e,r,n)}e=e.child}return e;case 5:return X4(e),t===null&&aI(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,nI(r,i)?o=null:s!==null&&nI(r,s)&&(e.flags|=32),C$(t,e),Mr(t,e,o,n),e.child;case 6:return t===null&&aI(e),null;case 13:return S$(t,e,n);case 4:return k0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fh(e,null,r,n):Mr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),xM(t,e,r,i,n);case 7:return Mr(t,e,e.pendingProps,n),e.child;case 8:return Mr(t,e,e.pendingProps.children,n),e.child;case 12:return Mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Vt(yw,r._currentValue),r._currentValue=o,s!==null)if(Rs(s.value,o)){if(s.children===i.children&&!ci.current){e=ua(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=ra(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),cI(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cI(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vd(e,n),i=es(i),r=r(i),e.flags|=1,Mr(t,e,r,n),e.child;case 14:return r=e.type,i=hs(r,e.pendingProps),i=hs(r.type,i),RM(t,e,r,i,n);case 15:return _$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),Iv(t,e),e.tag=1,li(r)?(t=!0,pw(e)):t=!1,Vd(e,n),y$(e,r,i),uI(e,r,i,n),fI(null,e,r,!0,t,n);case 19:return b$(t,e,n);case 22:return T$(t,e,n)}throw Error(ce(156,e.tag))};function $$(t,e){return p4(t,e)}function rZ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(t,e,n,r){return new rZ(t,e,n,r)}function H0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iZ(t){if(typeof t=="function")return H0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===c0)return 11;if(t===l0)return 14}return 2}function Ec(t,e){var n=t.alternate;return n===null?(n=qi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xv(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")H0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yd:return eu(n.children,i,s,e);case a0:o=8,i|=8;break;case Mb:return t=qi(12,n,e,i|2),t.elementType=Mb,t.lanes=s,t;case Db:return t=qi(13,n,e,i),t.elementType=Db,t.lanes=s,t;case Lb:return t=qi(19,n,e,i),t.elementType=Lb,t.lanes=s,t;case XU:return ET(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QU:o=10;break e;case YU:o=9;break e;case c0:o=11;break e;case l0:o=14;break e;case Ka:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=qi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function eu(t,e,n,r){return t=qi(7,t,r,e),t.lanes=n,t}function ET(t,e,n,r){return t=qi(22,t,r,e),t.elementType=XU,t.lanes=n,t.stateNode={isHidden:!1},t}function uS(t,e,n){return t=qi(6,t,null,e),t.lanes=n,t}function dS(t,e,n){return e=qi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sZ(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=WE(0),this.expirationTimes=WE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=WE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function z0(t,e,n,r,i,s,o,a,c){return t=new sZ(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},A0(s),t}function oZ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function B$(t){if(!t)return Vc;t=t._reactInternals;e:{if(Lu(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(li(n))return B4(t,n,e)}return e}function H$(t,e,n,r,i,s,o,a,c){return t=z0(n,r,!0,t,i,s,o,a,c),t.context=B$(null),n=t.current,r=jr(),i=Cc(n),s=ra(r,i),s.callback=e??null,_c(n,s,i),t.current.lanes=i,Eg(t,i,r),ui(t,r),t}function ST(t,e,n,r){var i=e.current,s=jr(),o=Cc(i);return n=B$(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_c(i,e,o),t!==null&&(As(t,i,o,s),Ev(t,i,o)),o}function Aw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function W0(t,e){BM(t,e),(t=t.alternate)&&BM(t,e)}function aZ(){return null}var z$=typeof reportError=="function"?reportError:function(t){console.error(t)};function K0(t){this._internalRoot=t}bT.prototype.render=K0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));ST(t,e,null,null)};bT.prototype.unmount=K0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hu(function(){ST(null,t,null,null)}),e[ca]=null}};function bT(t){this._internalRoot=t}bT.prototype.unstable_scheduleHydration=function(t){if(t){var e=T4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ya.length&&e!==0&&e<Ya[n].priority;n++);Ya.splice(n,0,t),n===0&&E4(t)}};function q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function IT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function HM(){}function cZ(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Aw(o);s.call(l)}}var o=H$(e,r,t,0,null,!1,!1,"",HM);return t._reactRootContainer=o,t[ca]=o.current,vm(t.nodeType===8?t.parentNode:t),hu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Aw(c);a.call(l)}}var c=z0(t,0,!1,null,null,!1,!1,"",HM);return t._reactRootContainer=c,t[ca]=c.current,vm(t.nodeType===8?t.parentNode:t),hu(function(){ST(e,c,n,r)}),c}function AT(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Aw(o);a.call(c)}}ST(e,o,t,i)}else o=cZ(n,e,t,i,r);return Aw(o)}w4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lp(e.pendingLanes);n!==0&&(h0(e,n|1),ui(e,vn()),!(vt&6)&&(gh=vn()+500,sl()))}break;case 13:hu(function(){var r=la(t,1);if(r!==null){var i=jr();As(r,t,1,i)}}),W0(t,1)}};f0=function(t){if(t.tag===13){var e=la(t,134217728);if(e!==null){var n=jr();As(e,t,134217728,n)}W0(t,134217728)}};_4=function(t){if(t.tag===13){var e=Cc(t),n=la(t,e);if(n!==null){var r=jr();As(n,t,e,r)}W0(t,e)}};T4=function(){return kt};C4=function(t,e){var n=kt;try{return kt=t,e()}finally{kt=n}};Kb=function(t,e,n){switch(e){case"input":if(jb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yT(r);if(!i)throw Error(ce(90));ZU(r),jb(r,i)}}}break;case"textarea":t4(t,n);break;case"select":e=n.value,e!=null&&Md(t,!!n.multiple,e,!1)}};c4=U0;l4=hu;var lZ={usingClientEntryPoint:!1,Events:[bg,Td,yT,o4,a4,U0]},qf={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uZ={bundleType:qf.bundleType,version:qf.version,rendererPackageName:qf.rendererPackageName,rendererConfig:qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h4(t),t===null?null:t.stateNode},findFiberByHostInstance:qf.findFiberByHostInstance||aZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$y.isDisabled&&$y.supportsFiber)try{fT=$y.inject(uZ),lo=$y}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lZ;Di.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q0(e))throw Error(ce(200));return oZ(t,e,null,n)};Di.createRoot=function(t,e){if(!q0(t))throw Error(ce(299));var n=!1,r="",i=z$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=z0(t,1,!1,null,null,n,!1,r,i),t[ca]=e.current,vm(t.nodeType===8?t.parentNode:t),new K0(e)};Di.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=h4(e),t=t===null?null:t.stateNode,t};Di.flushSync=function(t){return hu(t)};Di.hydrate=function(t,e,n){if(!IT(e))throw Error(ce(200));return AT(null,t,e,!0,n)};Di.hydrateRoot=function(t,e,n){if(!q0(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=z$;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H$(e,null,t,1,n??null,i,!1,s,o),t[ca]=e.current,vm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new bT(e)};Di.render=function(t,e,n){if(!IT(e))throw Error(ce(200));return AT(null,t,e,!1,n)};Di.unmountComponentAtNode=function(t){if(!IT(t))throw Error(ce(40));return t._reactRootContainer?(hu(function(){AT(null,null,t,!1,function(){t._reactRootContainer=null,t[ca]=null})}),!0):!1};Di.unstable_batchedUpdates=U0;Di.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!IT(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return AT(t,e,n,!1,r)};Di.version="18.3.1-next-f1338f8080-20240426";function W$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W$)}catch(t){console.error(t)}}W$(),WU.exports=Di;var Ag=WU.exports;const K$=OU(Ag);var G0,zM=Ag;G0=zM.createRoot,zM.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Am.apply(this,arguments)}var dc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dc||(dc={}));const WM="popstate";function dZ(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return bI("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kw(i)}return fZ(e,n,null,t)}function en(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function q$(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hZ(){return Math.random().toString(36).substr(2,8)}function KM(t,e){return{usr:t.state,key:t.key,idx:e}}function bI(t,e,n,r){return n===void 0&&(n=null),Am({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xh(e):e,{state:n,key:e&&e.key||r||hZ()})}function kw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fZ(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=dc.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Am({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=dc.Pop;let _=u(),v=_==null?null:_-l;l=_,c&&c({action:a,location:y.location,delta:v})}function h(_,v){a=dc.Push;let T=bI(y.location,_,v);l=u()+1;let C=KM(T,l),I=y.createHref(T);try{o.pushState(C,"",I)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(I)}s&&c&&c({action:a,location:y.location,delta:1})}function m(_,v){a=dc.Replace;let T=bI(y.location,_,v);l=u();let C=KM(T,l),I=y.createHref(T);o.replaceState(C,"",I),s&&c&&c({action:a,location:y.location,delta:0})}function w(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof _=="string"?_:kw(_);return T=T.replace(/ $/,"%20"),en(v,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,v)}let y={get action(){return a},get location(){return t(i,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(WM,d),c=_,()=>{i.removeEventListener(WM,d),c=null}},createHref(_){return e(i,_)},createURL:w,encodeLocation(_){let v=w(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(_){return o.go(_)}};return y}var qM;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qM||(qM={}));function pZ(t,e,n){return n===void 0&&(n="/"),mZ(t,e,n)}function mZ(t,e,n,r){let i=typeof e=="string"?Xh(e):e,s=yh(i.pathname||"/",n);if(s==null)return null;let o=G$(t);gZ(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=AZ(s);a=bZ(o[c],l)}return a}function G$(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(en(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Sc([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(en(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),G$(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:EZ(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of Q$(s.path))i(s,o,c)}),e}function Q$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Q$(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function gZ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SZ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yZ=/^:[\w-]+$/,vZ=3,wZ=2,_Z=1,TZ=10,CZ=-2,GM=t=>t==="*";function EZ(t,e){let n=t.split("/"),r=n.length;return n.some(GM)&&(r+=CZ),e&&(r+=wZ),n.filter(i=>!GM(i)).reduce((i,s)=>i+(yZ.test(s)?vZ:s===""?_Z:TZ),r)}function SZ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bZ(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=II({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Sc([s,d.pathname]),pathnameBase:PZ(Sc([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Sc([s,d.pathnameBase]))}return o}function II(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=IZ(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const w=a[d];return m&&!w?l[h]=void 0:l[h]=(w||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function IZ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),q$(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return q$(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kZ(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xh(t):t;return{pathname:n?n.startsWith("/")?n:xZ(n,e):e,search:NZ(r),hash:OZ(i)}}function xZ(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RZ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Q0(t,e){let n=RZ(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Y0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xh(t):(i=Am({},t),en(!i.pathname||!i.pathname.includes("?"),hS("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),hS("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),hS("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=kZ(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Sc=t=>t.join("/").replace(/\/\/+/g,"/"),PZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MZ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Y$=["post","put","patch","delete"];new Set(Y$);const DZ=["get",...Y$];new Set(DZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},km.apply(this,arguments)}const kT=g.createContext(null),X$=g.createContext(null),Ia=g.createContext(null),xT=g.createContext(null),ol=g.createContext({outlet:null,matches:[],isDataRoute:!1}),J$=g.createContext(null);function LZ(t,e){let{relative:n}=e===void 0?{}:e;Jh()||en(!1);let{basename:r,navigator:i}=g.useContext(Ia),{hash:s,pathname:o,search:a}=RT(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Sc([r,o])),i.createHref({pathname:c,search:a,hash:s})}function Jh(){return g.useContext(xT)!=null}function xo(){return Jh()||en(!1),g.useContext(xT).location}function Z$(t){g.useContext(Ia).static||g.useLayoutEffect(t)}function Fu(){let{isDataRoute:t}=g.useContext(ol);return t?QZ():FZ()}function FZ(){Jh()||en(!1);let t=g.useContext(kT),{basename:e,future:n,navigator:r}=g.useContext(Ia),{matches:i}=g.useContext(ol),{pathname:s}=xo(),o=JSON.stringify(Q0(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return Z$(()=>{a.current=!0}),g.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=Y0(l,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Sc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function RT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(Ia),{matches:i}=g.useContext(ol),{pathname:s}=xo(),o=JSON.stringify(Q0(i,r.v7_relativeSplatPath));return g.useMemo(()=>Y0(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function VZ(t,e){return jZ(t,e)}function jZ(t,e,n,r){Jh()||en(!1);let{navigator:i}=g.useContext(Ia),{matches:s}=g.useContext(ol),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=xo(),u;if(e){var d;let _=typeof e=="string"?Xh(e):e;c==="/"||(d=_.pathname)!=null&&d.startsWith(c)||en(!1),u=_}else u=l;let h=u.pathname||"/",m=h;if(c!=="/"){let _=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=pZ(t,{pathname:m}),y=zZ(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Sc([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Sc([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&y?g.createElement(xT.Provider,{value:{location:km({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:dc.Pop}},y):y}function UZ(){let t=GZ(),e=MZ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const $Z=g.createElement(UZ,null);class BZ extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(ol.Provider,{value:this.props.routeContext},g.createElement(J$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HZ(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(kT);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ol.Provider,{value:e},r)}function zZ(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||en(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:m}=n,w=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||w){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let m,w=!1,y=null,_=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||$Z,c&&(l<0&&h===0?(YZ("route-fallback"),w=!0,_=null):l===h&&(w=!0,_=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,h+1)),T=()=>{let C;return m?C=y:w?C=_:d.route.Component?C=g.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,g.createElement(HZ,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(BZ,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:T(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):T()},null)}var eB=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eB||{}),tB=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tB||{});function WZ(t){let e=g.useContext(kT);return e||en(!1),e}function KZ(t){let e=g.useContext(X$);return e||en(!1),e}function qZ(t){let e=g.useContext(ol);return e||en(!1),e}function nB(t){let e=qZ(),n=e.matches[e.matches.length-1];return n.route.id||en(!1),n.route.id}function GZ(){var t;let e=g.useContext(J$),n=KZ(),r=nB();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QZ(){let{router:t}=WZ(eB.UseNavigateStable),e=nB(tB.UseNavigateStable),n=g.useRef(!1);return Z$(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,km({fromRouteId:e},s)))},[t,e])}const QM={};function YZ(t,e,n){QM[t]||(QM[t]=!0)}function XZ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function JZ(t){let{to:e,replace:n,state:r,relative:i}=t;Jh()||en(!1);let{future:s,static:o}=g.useContext(Ia),{matches:a}=g.useContext(ol),{pathname:c}=xo(),l=Fu(),u=Y0(e,Q0(a,s.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return g.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:i}),[l,d,i,n,r]),null}function Kn(t){en(!1)}function ZZ(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dc.Pop,navigator:s,static:o=!1,future:a}=t;Jh()&&en(!1);let c=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:c,navigator:s,static:o,future:km({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=Xh(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:w="default"}=r,y=g.useMemo(()=>{let _=yh(u,c);return _==null?null:{location:{pathname:_,search:d,hash:h,state:m,key:w},navigationType:i}},[c,u,d,h,m,w,i]);return y==null?null:g.createElement(Ia.Provider,{value:l},g.createElement(xT.Provider,{children:n,value:y}))}function YM(t){let{children:e,location:n}=t;return VZ(AI(e),n)}new Promise(()=>{});function AI(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let s=[...e,i];if(r.type===g.Fragment){n.push.apply(n,AI(r.props.children,s));return}r.type!==Kn&&en(!1),!r.props.index||!r.props.children||en(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=AI(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xw.apply(this,arguments)}function rB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function eee(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tee(t,e){return t.button===0&&(!e||e==="_self")&&!eee(t)}const nee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ree=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],iee="6";try{window.__reactRouterVersion=iee}catch{}const see=g.createContext({isTransitioning:!1}),oee="startTransition",XM=r0[oee];function aee(t){let{basename:e,children:n,future:r,window:i}=t,s=g.useRef();s.current==null&&(s.current=dZ({window:i,v5Compat:!0}));let o=s.current,[a,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=g.useCallback(d=>{l&&XM?XM(()=>c(d)):c(d)},[c,l]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>XZ(r),[r]),g.createElement(ZZ,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const cee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xm=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d}=e,h=rB(e,nee),{basename:m}=g.useContext(Ia),w,y=!1;if(typeof l=="string"&&lee.test(l)&&(w=l,cee))try{let C=new URL(window.location.href),I=l.startsWith("//")?new URL(C.protocol+l):new URL(l),x=yh(I.pathname,m);I.origin===C.origin&&x!=null?l=x+I.search+I.hash:y=!0}catch{}let _=LZ(l,{relative:i}),v=dee(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function T(C){r&&r(C),C.defaultPrevented||v(C)}return g.createElement("a",xw({},h,{href:w||_,onClick:y||s?r:T,ref:n,target:c}))}),JM=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:c,viewTransition:l,children:u}=e,d=rB(e,ree),h=RT(c,{relative:d.relative}),m=xo(),w=g.useContext(X$),{navigator:y,basename:_}=g.useContext(Ia),v=w!=null&&hee(h)&&l===!0,T=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,C=m.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(C=C.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&_&&(I=yh(I,_)||I);const x=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let D=C===T||!o&&C.startsWith(T)&&C.charAt(x)==="/",A=I!=null&&(I===T||!o&&I.startsWith(T)&&I.charAt(T.length)==="/"),S={isActive:D,isPending:A,isTransitioning:v},k=D?r:void 0,N;typeof s=="function"?N=s(S):N=[s,D?"active":null,A?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(S):a;return g.createElement(xm,xw({},d,{"aria-current":k,className:N,ref:n,style:R,to:c,viewTransition:l}),typeof u=="function"?u(S):u)});var kI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kI||(kI={}));var ZM;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ZM||(ZM={}));function uee(t){let e=g.useContext(kT);return e||en(!1),e}function dee(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=Fu(),l=xo(),u=RT(t,{relative:o});return g.useCallback(d=>{if(tee(d,n)){d.preventDefault();let h=r!==void 0?r:kw(l)===kw(u);c(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[l,c,u,r,i,n,t,s,o,a])}function hee(t,e){e===void 0&&(e={});let n=g.useContext(see);n==null&&en(!1);let{basename:r}=uee(kI.useViewTransitionState),i=RT(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=yh(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=yh(n.nextLocation.pathname,r)||n.nextLocation.pathname;return II(i.pathname,o)!=null||II(i.pathname,s)!=null}/*! @azure/msal-common v15.13.0 2025-09-24 */const te={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},hc={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},jl={GET:"GET",POST:"POST"},Zh=[te.OPENID_SCOPE,te.PROFILE_SCOPE,te.OFFLINE_ACCESS_SCOPE],eD=[...Zh,te.EMAIL_SCOPE],Dr={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},tD={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},bc={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},By={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},cr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},X0={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},PT={QUERY:"query",FRAGMENT:"fragment"},fee={QUERY:"query"},iB={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Hy={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Rm={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},or={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},J0="appmetadata",pee="client_info",Rw="1",Pw={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},wi={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},rr={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},At={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Np={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},nD={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ju={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},fS={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},El={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},mee={Pop:"pop"},sB=300;/*! @azure/msal-common v15.13.0 2025-09-24 */const Nw="unexpected_error",gee="post_request_failed";/*! @azure/msal-common v15.13.0 2025-09-24 */const rD={[Nw]:"Unexpected error in authentication.",[gee]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Pt extends Error{constructor(e,n,r){const i=n?`${e}: ${n}`:e;super(i),Object.setPrototypeOf(this,Pt.prototype),this.errorCode=e||te.EMPTY_STRING,this.errorMessage=n||te.EMPTY_STRING,this.subError=r||te.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function xI(t,e){return new Pt(t,e?`${rD[t]} ${e}`:rD[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */const Z0="client_info_decoding_error",oB="client_info_empty_error",ex="token_parsing_error",aB="null_or_empty_token",$o="endpoints_resolution_error",cB="network_error",lB="openid_config_error",uB="hash_not_deserialized",vh="invalid_state",dB="state_mismatch",RI="state_not_found",hB="nonce_mismatch",tx="auth_time_not_found",fB="max_age_transpired",yee="multiple_matching_tokens",vee="multiple_matching_accounts",pB="multiple_matching_appMetadata",mB="request_cannot_be_made",gB="cannot_remove_empty_scope",yB="cannot_append_scopeset",PI="empty_input_scopeset",wee="device_code_polling_cancelled",_ee="device_code_expired",Tee="device_code_unknown_error",nx="no_account_in_silent_request",vB="invalid_cache_record",rx="invalid_cache_environment",NI="no_account_found",OI="no_crypto_object",Cee="unexpected_credential_type",Eee="invalid_assertion",See="invalid_client_credential",Ic="token_refresh_required",bee="user_timeout_reached",wB="token_claims_cnf_required_for_signedjwt",_B="authorization_code_missing_from_server_response",TB="binding_key_not_removed",CB="end_session_endpoint_not_supported",ix="key_id_missing",Iee="no_network_connectivity",Aee="user_canceled",kee="missing_tenant_id_error",rt="method_not_implemented",xee="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.13.0 2025-09-24 */const iD={[Z0]:"The client info could not be parsed/decoded correctly",[oB]:"The client info was empty",[ex]:"Token cannot be parsed",[aB]:"The token is null or empty",[$o]:"Endpoints cannot be resolved",[cB]:"Network request failed",[lB]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[uB]:"The hash parameters could not be deserialized",[vh]:"State was not the expected format",[dB]:"State mismatch error",[RI]:"State not found",[hB]:"Nonce mismatch error",[tx]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[fB]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[yee]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[vee]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[pB]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[mB]:"Token request cannot be made without authorization code or refresh token.",[gB]:"Cannot remove null or empty scope from ScopeSet",[yB]:"Cannot append ScopeSet",[PI]:"Empty input ScopeSet cannot be processed",[wee]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[_ee]:"Device code is expired.",[Tee]:"Device code stopped polling for unknown reasons.",[nx]:"Please pass an account object, silent flow is not supported without account information",[vB]:"Cache record object was null or undefined.",[rx]:"Invalid environment when attempting to create cache entry",[NI]:"No account found in cache for given key.",[OI]:"No crypto object detected.",[Cee]:"Unexpected credential type.",[Eee]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[See]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ic]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[bee]:"User defined timeout for device code polling reached",[wB]:"Cannot generate a POP jwt if the token_claims are not populated",[_B]:"Server response does not contain an authorization code to proceed",[TB]:"Could not remove the credential's binding key from storage.",[CB]:"The provided authority does not support logout",[ix]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Iee]:"No network connectivity. Check your internet connection.",[Aee]:"User cancelled the flow.",[kee]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[rt]:"This method has not been implemented",[xee]:"The nested app auth bridge is disabled"};class sx extends Pt{constructor(e,n){super(e,n?`${iD[e]}: ${n}`:iD[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,sx.prototype)}}function ae(t,e){return new sx(t,e)}/*! @azure/msal-common v15.13.0 2025-09-24 */const Ow={createNewGuid:()=>{throw ae(rt)},base64Decode:()=>{throw ae(rt)},base64Encode:()=>{throw ae(rt)},base64UrlEncode:()=>{throw ae(rt)},encodeKid:()=>{throw ae(rt)},async getPublicKeyThumbprint(){throw ae(rt)},async removeTokenBindingKey(){throw ae(rt)},async clearKeystore(){throw ae(rt)},async signJwt(){throw ae(rt)},async hashString(){throw ae(rt)}};/*! @azure/msal-common v15.13.0 2025-09-24 */var qt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(qt||(qt={}));let kg=class MI{constructor(e,n,r){this.level=qt.Info;const i=()=>{},s=e||MI.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:qt.Info,this.correlationId=s.correlationId||te.EMPTY_STRING,this.packageName=n||te.EMPTY_STRING,this.packageVersion=r||te.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:qt.Info}}clone(e,n,r){return new MI({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const s=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${qt[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,s,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:qt.Error,containsPii:!1,correlationId:n||te.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:qt.Error,containsPii:!0,correlationId:n||te.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:qt.Warning,containsPii:!1,correlationId:n||te.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:qt.Warning,containsPii:!0,correlationId:n||te.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:qt.Info,containsPii:!1,correlationId:n||te.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:qt.Info,containsPii:!0,correlationId:n||te.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:qt.Verbose,containsPii:!1,correlationId:n||te.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:qt.Verbose,containsPii:!0,correlationId:n||te.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:qt.Trace,containsPii:!1,correlationId:n||te.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:qt.Trace,containsPii:!0,correlationId:n||te.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.13.0 2025-09-24 */const EB="@azure/msal-common",ox="15.13.0";/*! @azure/msal-common v15.13.0 2025-09-24 */const ax={None:"none"};/*! @azure/msal-common v15.13.0 2025-09-24 */const SB="redirect_uri_empty",Ree="claims_request_parsing_error",bB="authority_uri_insecure",dp="url_parse_error",IB="empty_url_error",AB="empty_input_scopes_error",cx="invalid_claims",kB="token_request_empty",xB="logout_request_empty",Pee="invalid_code_challenge_method",lx="pkce_params_missing",ux="invalid_cloud_discovery_metadata",RB="invalid_authority_metadata",PB="untrusted_authority",NT="missing_ssh_jwk",NB="missing_ssh_kid",Nee="missing_nonce_authentication_header",Oee="invalid_authentication_header",OB="cannot_set_OIDCOptions",MB="cannot_allow_platform_broker",DB="authority_mismatch",LB="invalid_request_method_for_EAR",FB="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.0 2025-09-24 */const Mee={[SB]:"A redirect URI is required for all calls, and none has been set.",[Ree]:"Could not parse the given claims request object.",[bB]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[dp]:"URL could not be parsed into appropriate segments.",[IB]:"URL was empty or null.",[AB]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[cx]:"Given claims parameter must be a stringified JSON object.",[kB]:"Token request was empty and not found in cache.",[xB]:"The logout request was null or undefined.",[Pee]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[lx]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[ux]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[RB]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[PB]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[NT]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[NB]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Nee]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Oee]:"Invalid authentication header provided",[OB]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[MB]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[DB]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[FB]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[LB]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class dx extends Pt{constructor(e){super(e,Mee[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,dx.prototype)}}function Ot(t){return new dx(t)}/*! @azure/msal-common v15.13.0 2025-09-24 */class xi{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return r.forEach(s=>{if(s.trim()){const[o,a]=s.split(/=(.+)/g,2);o&&a&&(n[i(o)]=i(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Vn{constructor(e){const n=e?xi.trimArrayEntries([...e]):[],r=n?xi.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw Ot(AB);this.scopes=new Set,r.forEach(i=>this.scopes.add(i))}static fromString(e){const r=(e||te.EMPTY_STRING).split(" ");return new Vn(r)}static createSearchScopes(e){const n=e&&e.length>0?e:[...Zh],r=new Vn(n);return r.containsOnlyOIDCScopes()?r.removeScope(te.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Vn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return eD.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw ae(yB)}}removeScope(e){if(!e)throw ae(gB);this.scopes.delete(e.trim())}removeOIDCScopes(){eD.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ae(PI);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw ae(PI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),i=this.getScopeCount();return n.size<i+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):te.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.0 2025-09-24 */function sD(t,e){return!!t&&!!e&&t===e.split(".")[1]}function hx(t,e,n,r){if(r){const{oid:i,sub:s,tid:o,name:a,tfp:c,acr:l,preferred_username:u,upn:d,login_hint:h}=r,m=o||c||l||"";return{tenantId:m,localAccountId:i||s||"",name:a,username:u||d||"",loginHint:h,isHomeTenant:sD(m,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:sD(n,t)}}function fx(t,e,n,r){let i=t;if(e){const{isHomeTenant:s,...o}=e;i={...t,...o}}if(n){const{isHomeTenant:s,...o}=hx(t.homeAccountId,t.localAccountId,t.tenantId,n);return i={...i,...o,idTokenClaims:n,idToken:r},i}return i}/*! @azure/msal-common v15.13.0 2025-09-24 */function ef(t,e){const n=Dee(t);try{const r=e(n);return JSON.parse(r)}catch{throw ae(ex)}}function Dee(t){if(!t)throw ae(aB);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw ae(ex);return n[2]}function VB(t,e){if(e===0||Date.now()-3e5>t+e)throw ae(fB)}/*! @azure/msal-common v15.13.0 2025-09-24 */function oD(t){if(!t)return t;let e=t.toLowerCase();return xi.endsWith(e,"?")?e=e.slice(0,-1):xi.endsWith(e,"?/")&&(e=e.slice(0,-2)),xi.endsWith(e,"/")||(e+="/"),e}function jB(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Mw(t){if(!t||t.indexOf("=")<0)return null;try{const e=jB(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw ae(uB)}return null}function Pm(t,e=!0,n){const r=new Array;return t.forEach((i,s)=>{!e&&n&&s in n?r.push(`${s}=${i}`):r.push(`${s}=${encodeURIComponent(i)}`)}),r.join("&")}function aD(t){if(!t)return t;const e=t.split("#")[0];try{const n=new URL(e),r=n.origin+n.pathname+n.search;return oD(r)}catch{return oD(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class _t{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Ot(IB);e.includes("#")||(this._urlString=_t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return xi.endsWith(n,"?")?n=n.slice(0,-1):xi.endsWith(n,"?/")&&(n=n.slice(0,-2)),xi.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Ot(dp)}if(!e.HostNameAndPort||!e.PathSegments)throw Ot(dp);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Ot(bB)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return _t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===bc.COMMON||r[0]===bc.ORGANIZATIONS)&&(r[0]=e),_t.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Ot(dp);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let i=r.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),r.PathSegments=i,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Ot(dp);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===te.FORWARD_SLASH){const i=new _t(n).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new _t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Mw(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const UB={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},cD=UB.endpointMetadata,px=UB.instanceDiscoveryMetadata,$B=new Set;px.metadata.forEach(t=>{t.aliases.forEach(e=>{$B.add(e)})});function Lee(t,e){var i;let n;const r=t.canonicalAuthority;if(r){const s=new _t(r).getUrlComponents().HostNameAndPort;n=lD(s,(i=t.cloudDiscoveryMetadata)==null?void 0:i.metadata,wi.CONFIG,e)||lD(s,px.metadata,wi.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function lD(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const i=Dw(e,t);if(i)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),i.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Fee(t){return Dw(px.metadata,t)}function Dw(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.13.0 2025-09-24 */const Lw="cache_quota_exceeded",mx="cache_error_unknown";/*! @azure/msal-common v15.13.0 2025-09-24 */const pS={[Lw]:"Exceeded cache storage capacity.",[mx]:"Unexpected error occurred when using cache storage."};class Ud extends Pt{constructor(e,n){const r=n||(pS[e]?pS[e]:pS[mx]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Ud.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function DI(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Ud(Lw):new Ud(t.name,t.message):new Ud(mx)}/*! @azure/msal-common v15.13.0 2025-09-24 */class LI{constructor(e,n,r,i,s){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(EB,ox),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(s=>s.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,n,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(r,s))return null;const c=this.getIdToken(e,i,n,r.tenantId);return c&&(a=ef(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=fx(e,r,a,c==null?void 0:c.secret),o)}getTenantProfilesFromAccountEntity(e,n,r,i){const s=e.getAccountInfo();let o=s.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=o.get(r);if(l)o=new Map([[r,l]]);else return[]}const c=[];return o.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(s,a,l,n,i);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var i;if(!e)throw ae(vB);try{e.account&&await this.setAccount(e.account,n),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(s){throw(i=this.commonLogger)==null||i.error("CacheManager.saveCacheRecord: failed"),s instanceof Pt?s:DI(s)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=Vn.fromString(e.target);i.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,r,!1))return;const a=this.getAccessTokenCredential(o,n);a&&this.credentialMatchesFilter(a,r)&&Vn.fromString(a.target).intersectingScopeSets(s)&&this.removeAccessToken(o,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),i=[];return r.forEach(s=>{var l;const o=this.getAccount(s,n);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const a={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},c=(l=o.tenantProfiles)==null?void 0:l.filter(u=>this.tenantProfileMatchesFilter(u,a));c&&c.length===0||i.push(o)}),i}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===or.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===At.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(r[i]=s))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;const s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(r=s)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.filter(i).forEach(s=>{this.removeItem(s,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.idToken.filter(i).forEach(s=>{this.removeIdToken(s,n)}),r.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,n)}),r.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==or.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==At.POP)return;const i=r.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{var s;this.commonLogger.error(`Failed to remove token binding key ${i}`,n),(s=this.performanceClient)==null||s.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:or.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!i){const u=new Map;a.forEach((h,m)=>{h.realm===e.tenantId&&u.set(m,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,n)}),s&&n&&s.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const i=r&&r.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(o,n);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,i){const s=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);const o=Vn.createSearchScopes(n.scopes),a=n.authenticationScheme||At.BEARER,c=a.toLowerCase()!==At.BEARER.toLowerCase()?or.ACCESS_TOKEN_WITH_AUTH_SCHEME:or.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,l,!0)){const w=this.getAccessTokenCredential(m,s);w&&this.credentialMatchesFilter(w,l)&&d.push(w)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(m=>{this.removeAccessToken(this.generateCredentialKey(m),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,n,r){const i=e.toLowerCase();if(n.clientId&&i.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&i.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&i.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&i.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const s=n.target.asArray();for(let o=0;o<s.length;o++){if(r&&!i.includes(s[o].toLowerCase()))return!1;if(!r&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),i=[];return r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;const o=this.getAccessTokenCredential(s,n);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=n?Rw:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:or.REFRESH_TOKEN,clientId:this.clientId,familyId:o},c=i&&i.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d,r);h&&this.credentialMatchesFilter(h,a)&&l.push(h)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&s&&r&&s.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),i=Object.keys(r).map(o=>r[o]),s=i.length;if(s<1)return null;if(s>1)throw ae(pB);return i[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Rw)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const i=Lee(this.staticAuthorityOptions,this.commonLogger);if(i.includes(n)&&i.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==or.ACCESS_TOKEN&&e.credentialType!==or.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Vn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(J0)!==-1}isAuthorityMetadata(e){return e.indexOf(Pw.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Pw.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class Vee extends LI{async setAccount(){throw ae(rt)}getAccount(){throw ae(rt)}async setIdTokenCredential(){throw ae(rt)}getIdTokenCredential(){throw ae(rt)}async setAccessTokenCredential(){throw ae(rt)}getAccessTokenCredential(){throw ae(rt)}async setRefreshTokenCredential(){throw ae(rt)}getRefreshTokenCredential(){throw ae(rt)}setAppMetadata(){throw ae(rt)}getAppMetadata(){throw ae(rt)}setServerTelemetry(){throw ae(rt)}getServerTelemetry(){throw ae(rt)}setAuthorityMetadata(){throw ae(rt)}getAuthorityMetadata(){throw ae(rt)}getAuthorityMetadataKeys(){throw ae(rt)}setThrottlingCache(){throw ae(rt)}getThrottlingCache(){throw ae(rt)}removeItem(){throw ae(rt)}getKeys(){throw ae(rt)}getAccountKeys(){throw ae(rt)}getTokenKeys(){throw ae(rt)}generateCredentialKey(){throw ae(rt)}generateAccountKey(){throw ae(rt)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const di={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.0 2025-09-24 */const F={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},jee={InProgress:1};/*! @azure/msal-common v15.13.0 2025-09-24 */class uD{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class BB{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:jee.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new uD}}startPerformanceMeasurement(){return new uD}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.0 2025-09-24 */const HB={tokenRenewalOffsetSeconds:sB,preventCorsPreflight:!1},Uee={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:qt.Info,correlationId:te.EMPTY_STRING},$ee={claimsBasedCachingEnabled:!1},Bee={async sendGetRequestAsync(){throw ae(rt)},async sendPostRequestAsync(){throw ae(rt)}},Hee={sku:te.SKU,version:ox,cpu:te.EMPTY_STRING,os:te.EMPTY_STRING},zee={clientSecret:te.EMPTY_STRING,clientAssertion:void 0},Wee={azureCloudInstance:ax.None,tenant:`${te.DEFAULT_COMMON_TENANT}`},Kee={application:{appName:"",appVersion:""}};function qee({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const m={...Uee,...n};return{authOptions:Gee(t),systemOptions:{...HB,...e},loggerOptions:m,cacheOptions:{...$ee,...r},storageInterface:i||new Vee(t.clientId,Ow,new kg(m),new BB),networkInterface:s||Bee,cryptoInterface:o||Ow,clientCredentials:a||zee,libraryInfo:{...Hee,...c},telemetry:{...Kee,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}function Gee(t){return{clientCapabilities:[],azureCloudOptions:Wee,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function zB(t){return t.authOptions.authority.options.protocolMode===di.OIDC}/*! @azure/msal-common v15.13.0 2025-09-24 */const Cs={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.0 2025-09-24 */function Fw(t,e){if(!t)throw ae(oB);try{const n=e(t);return JSON.parse(n)}catch{throw ae(Z0)}}function $d(t){if(!t)throw ae(Z0);const e=t.split(Rm.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?te.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.0 2025-09-24 */const fu="client_id",WB="redirect_uri",Qee="response_type",Yee="response_mode",Xee="grant_type",Jee="claims",Zee="scope",ete="refresh_token",tte="state",nte="nonce",rte="prompt",ite="code",ste="code_challenge",ote="code_challenge_method",ate="code_verifier",cte="client-request-id",lte="x-client-SKU",ute="x-client-VER",dte="x-client-OS",hte="x-client-CPU",fte="x-client-current-telemetry",pte="x-client-last-telemetry",mte="x-ms-lib-capability",gte="x-app-name",yte="x-app-ver",vte="post_logout_redirect_uri",wte="id_token_hint",_te="client_secret",Tte="client_assertion",Cte="client_assertion_type",KB="token_type",qB="req_cnf",dD="return_spa_code",Ete="nativebroker",Ste="logout_hint",bte="sid",Ite="login_hint",Ate="domain_hint",kte="x-client-xtra-sku",Vw="brk_client_id",jw="brk_redirect_uri",FI="instance_aware",xte="ear_jwk",Rte="ear_jwe_crypto";/*! @azure/msal-common v15.13.0 2025-09-24 */function OT(t,e,n){if(!e)return;const r=t.get(fu);r&&t.has(Vw)&&(n==null||n.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(WB)},e))}function gx(t,e){t.set(Qee,e)}function Pte(t,e){t.set(Yee,e||fee.QUERY)}function Nte(t){t.set(Ete,"1")}function yx(t,e,n=!0,r=Zh){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const i=n?[...e||[],...r]:e||[],s=new Vn(i);t.set(Zee,s.printScopes())}function vx(t,e){t.set(fu,e)}function wx(t,e){t.set(WB,e)}function Ote(t,e){t.set(vte,e)}function Mte(t,e){t.set(wte,e)}function Dte(t,e){t.set(Ate,e)}function zy(t,e){t.set(Ite,e)}function Uw(t,e){t.set(Dr.CCS_HEADER,`UPN:${e}`)}function Op(t,e){t.set(Dr.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function hD(t,e){t.set(bte,e)}function _x(t,e,n){const r=$te(e,n);try{JSON.parse(r)}catch{throw Ot(cx)}t.set(Jee,r)}function Tx(t,e){t.set(cte,e)}function Cx(t,e){t.set(lte,e.sku),t.set(ute,e.version),e.os&&t.set(dte,e.os),e.cpu&&t.set(hte,e.cpu)}function Ex(t,e){e!=null&&e.appName&&t.set(gte,e.appName),e!=null&&e.appVersion&&t.set(yte,e.appVersion)}function Lte(t,e){t.set(rte,e)}function GB(t,e){e&&t.set(tte,e)}function Fte(t,e){t.set(nte,e)}function QB(t,e,n){if(e&&n)t.set(ste,e),t.set(ote,n);else throw Ot(lx)}function Vte(t,e){t.set(ite,e)}function jte(t,e){t.set(ete,e)}function Ute(t,e){t.set(ate,e)}function YB(t,e){t.set(_te,e)}function XB(t,e){e&&t.set(Tte,e)}function JB(t,e){e&&t.set(Cte,e)}function ZB(t,e){t.set(Xee,e)}function Sx(t){t.set(pee,"1")}function e3(t){t.has(FI)||t.set(FI,"true")}function Ac(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function $te(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw Ot(cx)}return e&&e.length>0&&(n.hasOwnProperty(By.ACCESS_TOKEN)||(n[By.ACCESS_TOKEN]={}),n[By.ACCESS_TOKEN][By.XMS_CC]={values:e}),JSON.stringify(n)}function bx(t,e){e&&(t.set(KB,At.POP),t.set(qB,e))}function t3(t,e){e&&(t.set(KB,At.SSH),t.set(qB,e))}function n3(t,e){t.set(fte,e.generateCurrentRequestHeaderValue()),t.set(pte,e.generateLastRequestHeaderValue())}function r3(t){t.set(mte,Np.X_MS_LIB_CAPABILITY_VALUE)}function Bte(t,e){t.set(Ste,e)}function MT(t,e,n){t.has(Vw)||t.set(Vw,e),t.has(jw)||t.set(jw,n)}function Hte(t,e){t.set(xte,encodeURIComponent(e)),t.set(Rte,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function zte(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.13.0 2025-09-24 */const ys={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.0 2025-09-24 */function Wte(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.0 2025-09-24 */function Kte(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.0 2025-09-24 */function qte(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.0 2025-09-24 */const Ri=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}try{const a=t(...s);return o==null||o.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a}},ee=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}return r==null||r.setPreQueueTime(e,i),t(...s).then(a=>(n.trace(`Returning result from ${e}`),o==null||o.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a})};/*! @azure/msal-common v15.13.0 2025-09-24 */class DT{constructor(e,n,r,i){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=i}async detectRegion(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=Ju.ENVIRONMENT_VARIABLE;else{const s=DT.IMDS_OPTIONS;try{const o=await ee(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(te.IMDS_VERSION,s);if(o.status===hc.SUCCESS&&(r=o.body,n.region_source=Ju.IMDS),o.status===hc.BAD_REQUEST){const a=await ee(this.getCurrentVersion.bind(this),F.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!a)return n.region_source=Ju.FAILED_AUTO_DETECTION,null;const c=await ee(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,s);c.status===hc.SUCCESS&&(r=c.body,n.region_source=Ju.IMDS)}}catch{return n.region_source=Ju.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=Ju.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(F.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${te.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,te.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(F.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${te.IMDS_ENDPOINT}?format=json`,e);return r.status===hc.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}DT.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.0 2025-09-24 */function fi(){return Math.round(new Date().getTime()/1e3)}function fD(t){return t.getTime()/1e3}function Bd(t){return t?new Date(Number(t)*1e3):new Date}function $w(t,e){const n=Number(t)||0;return fi()+e>n}function Gte(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function Qte(t){return Number(t)>fi()}/*! @azure/msal-common v15.13.0 2025-09-24 */function LT(t,e,n,r,i){return{credentialType:or.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:i,lastUpdatedAt:Date.now().toString()}}function FT(t,e,n,r,i,s,o,a,c,l,u,d,h,m,w){var _,v;const y={homeAccountId:t,credentialType:or.ACCESS_TOKEN,secret:n,cachedAt:fi().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:i,target:s,tokenType:u||At.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),m&&(y.requestedClaims=m,y.requestedClaimsHash=w),((_=y.tokenType)==null?void 0:_.toLowerCase())!==At.BEARER.toLowerCase())switch(y.credentialType=or.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case At.POP:const T=ef(n,c);if(!((v=T==null?void 0:T.cnf)!=null&&v.kid))throw ae(wB);y.keyId=T.cnf.kid;break;case At.SSH:y.keyId=h}return y}function i3(t,e,n,r,i,s,o){const a={credentialType:or.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function Ix(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function pD(t){return t?Ix(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===or.ACCESS_TOKEN||t.credentialType===or.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Yte(t){return t?Ix(t)&&t.hasOwnProperty("realm")&&t.credentialType===or.ID_TOKEN:!1}function mD(t){return t?Ix(t)&&t.credentialType===or.REFRESH_TOKEN:!1}function Xte(t,e){const n=t.indexOf(rr.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function Jte(t,e){let n=!1;t&&(n=t.indexOf(Np.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function Zte({environment:t,clientId:e}){return[J0,t,e].join(Rm.CACHE_KEY_SEPARATOR).toLowerCase()}function ene(t,e){return e?t.indexOf(J0)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function tne(t,e){return e?t.indexOf(Pw.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function gD(){return fi()+Pw.REFRESH_TIME_SECONDS}function Wy(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function mS(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function yD(t){return t.expiresAt<=fi()}/*! @azure/msal-common v15.13.0 2025-09-24 */class Tr{constructor(e,n,r,i,s,o,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=c||!1,this.regionDiscovery=new DT(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(te.CIAM_AUTH_URL))return ys.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case te.ADFS:return ys.Adfs;case te.DSTS:return ys.Dsts}return ys.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new _t(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ae($o)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ae($o)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ae($o)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ae(CB);return this.replacePath(this.metadata.end_session_endpoint)}else throw ae($o)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ae($o)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ae($o)}canReplaceTenant(e){return e.PathSegments.length===1&&!Tr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ys.Default&&this.protocolMode!==di.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const i=new _t(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=s[c];if(c===0&&this.canReplaceTenant(i)){const u=new _t(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(n=n.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ys.Adfs||this.protocolMode===di.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await ee(this.updateCloudDiscoveryMetadata.bind(this),F.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await ee(this.updateEndpointMetadata.bind(this),F.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(s=this.performanceClient)==null||s.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:gD(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==wi.CACHE&&(r==null?void 0:r.source)!==wi.CACHE&&(e.expiresAt=gD(),e.canonical_authority=this.canonicalAuthority);const i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){var i,s,o;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===wi.HARDCODED_VALUES&&(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&n.metadata){const a=await ee(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);Wy(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await ee(this.getEndpointMetadataFromNetwork.bind(this),F.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(o=this.authorityOptions.azureRegionConfiguration)!=null&&o.azureRegion&&(r=await ee(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Wy(e,r,!0),wi.NETWORK;throw ae(lB,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Wy(e,n,!1),{source:wi.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const i=this.getEndpointMetadataFromHardcodedValues();if(i)return Wy(e,i,!1),{source:wi.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=yD(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:wi.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new _t(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Ot(RB)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const i=await this.networkInterface.sendGetRequestAsync(n,e);return Wte(i.body)?i.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(i){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${i}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in cD?cD[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.azureRegion;if(n){if(n!==te.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=fS.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,Tr.replaceWithRegionalInformation(e,n);const o=await ee(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),F.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((s=this.authorityOptions.azureRegionConfiguration)==null?void 0:s.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=fS.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,Tr.replaceWithRegionalInformation(e,o);this.regionDiscoveryMetadata.region_outcome=fS.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await ee(this.getCloudDiscoveryMetadataFromNetwork.bind(this),F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return mS(e,r,!0),wi.NETWORK;throw Ot(PB)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||te.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||te.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||te.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),mS(e,n,!1),wi.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const i=Fee(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),mS(e,i,!1),wi.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=yD(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),wi.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ys.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Tr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Dw(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ot(ux)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Tr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${te.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(e,n);let o,a;if(Kte(s.body))o=s.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(qte(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),o=s.body,o.error===te.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Dw(a,this.hostnameAndPort)}catch(s){if(s instanceof Pt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const o=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Tr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&_t.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==ax.None){const i=n.tenant?n.tenant:te.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${i}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return te.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ae($o)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return $B.has(e)}static isPublicCloudAuthority(e){return te.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const i=new _t(e);i.validateAsUri();const s=i.getUrlComponents();let o=`${n}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${n}.${te.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=_t.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=Tr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=Tr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=Tr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const i=new _t(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(te.CIAM_AUTH_URL)){const s=i.HostNameAndPort.split(".")[0];n=`${n}${s}${te.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}Tr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",bc.COMMON,bc.CONSUMERS,bc.ORGANIZATIONS]);function nne(t){var i;const r=(i=new _t(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:i.toLowerCase();switch(r){case bc.COMMON:case bc.ORGANIZATIONS:case bc.CONSUMERS:return;default:return r}}function s3(t){return t.endsWith(te.FORWARD_SLASH)?t:`${t}${te.FORWARD_SLASH}`}function rne(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Ot(ux)}return{canonicalAuthority:t.authority?s3(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.13.0 2025-09-24 */async function o3(t,e,n,r,i,s,o){o==null||o.addQueueMeasurement(F.AuthorityFactoryCreateDiscoveredInstance,s);const a=Tr.transformCIAMAuthority(s3(t)),c=new Tr(a,e,n,r,i,s,o);try{return await ee(c.resolveEndpointsAsync.bind(c),F.AuthorityResolveEndpointsAsync,i,o,s)(),c}catch{throw ae($o)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Vu extends Pt{constructor(e,n,r,i,s){super(e,n,r),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,Vu.prototype)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function VT(t,e,n){var r;return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class eo{static generateThrottlingStorageKey(e){return`${Np.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){var o;const i=eo.generateThrottlingStorageKey(n),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,r);return}throw new Vu(((o=s.errorCodes)==null?void 0:o.join(" "))||te.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,n,r,i){if(eo.checkResponseStatus(r)||eo.checkResponseForRetryAfter(r)){const s={throttleTime:eo.calculateThrottleTime(parseInt(r.headers[Dr.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(eo.generateThrottlingStorageKey(n),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Dr.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Np.DEFAULT_THROTTLE_TIME_SECONDS),r+Np.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,i){const s=VT(n,r,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class jT extends Pt{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,jT.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function hp(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new jT(t,e,n)}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ax{constructor(e,n){this.config=qee(e),this.logger=new kg(this.config.loggerOptions,EB,ox),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Dr.CONTENT_TYPE]=te.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Cs.HOME_ACCOUNT_ID:try{const r=$d(e.credential);n[Dr.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Cs.UPN:n[Dr.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,i,s,o){var c;o&&((c=this.performanceClient)==null||c.addQueueMeasurement(o,s));const a=await this.sendPostRequest(i,e,{body:n,headers:r},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,n,r,i){var o,a,c;eo.preProcess(this.cacheManager,e,i);let s;try{s=await ee(this.networkClient.sendPostRequestAsync.bind(this.networkClient),F.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(n,r);const l=s.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((o=s.body.refresh_token)==null?void 0:o.length)||0,httpVerToken:l[Dr.X_MS_HTTP_VERSION]||"",requestId:l[Dr.X_MS_REQUEST_ID]||""},i)}catch(l){if(l instanceof jT){const u=l.responseHeaders;throw u&&((c=this.performanceClient)==null||c.addFields({httpVerToken:u[Dr.X_MS_HTTP_VERSION]||"",requestId:u[Dr.X_MS_REQUEST_ID]||"",contentTypeHeader:u[Dr.CONTENT_TYPE]||void 0,contentLengthHeader:u[Dr.CONTENT_LENGTH]||void 0,httpStatus:l.httpStatus},i)),l.error}throw l instanceof Pt?l:ae(cB)}return eo.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(F.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,i=await o3(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=i}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&MT(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Ac(n,e.tokenQueryParameters),Tx(n,e.correlationId),OT(n,e.correlationId,this.performanceClient),Pm(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function a3(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ps{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){var l,u,d,h,m,w,y;const i=new Ps;n.authorityType===ys.Adfs?i.authorityType=Hy.ADFS_ACCOUNT_TYPE:n.protocolMode===di.OIDC?i.authorityType=Hy.GENERIC_ACCOUNT_TYPE:i.authorityType=Hy.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&r&&(s=Fw(e.clientInfo,r),s.xms_tdbr&&(i.dataBoundary=s.xms_tdbr==="EU"?"EU":"None")),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;const o=e.environment||n&&n.getPreferredCache();if(!o)throw ae(rx);i.environment=o,i.realm=(s==null?void 0:s.utid)||a3(e.idTokenClaims)||"",i.localAccountId=(s==null?void 0:s.uid)||((l=e.idTokenClaims)==null?void 0:l.oid)||((u=e.idTokenClaims)==null?void 0:u.sub)||"";const a=((d=e.idTokenClaims)==null?void 0:d.preferred_username)||((h=e.idTokenClaims)==null?void 0:h.upn),c=(m=e.idTokenClaims)!=null&&m.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||c||"",i.loginHint=(w=e.idTokenClaims)==null?void 0:w.login_hint,i.name=((y=e.idTokenClaims)==null?void 0:y.name)||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{const _=hx(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[_]}return i}static createFromAccountInfo(e,n,r){var s;const i=new Ps;return i.authorityType=e.authorityType||Hy.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=n,i.msGraphHost=r,i.tenantProfiles=Array.from(((s=e.tenantProfiles)==null?void 0:s.values())||[]),i.dataBoundary=e.dataBoundary,i}static generateHomeAccountId(e,n,r,i,s){if(!(n===ys.Adfs||n===ys.Dsts)){if(e)try{const o=Fw(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}r.warning("No client info in response")}return(s==null?void 0:s.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let i=!0;if(r){const s=e.idTokenClaims||{},o=n.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&i}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Bw="no_tokens_found",c3="native_account_unavailable",kx="refresh_token_expired",xx="ux_not_allowed",ine="interaction_required",sne="consent_required",one="login_required",UT="bad_token";/*! @azure/msal-common v15.13.0 2025-09-24 */const vD=[ine,sne,one,UT,xx],ane=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],cne={[Bw]:"No refresh token found in the cache. Please sign-in.",[c3]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[kx]:"Refresh token has expired.",[UT]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[xx]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Ns extends Pt{constructor(e,n,r,i,s,o,a,c){super(e,n,r),Object.setPrototypeOf(this,Ns.prototype),this.timestamp=i||te.EMPTY_STRING,this.traceId=s||te.EMPTY_STRING,this.correlationId=o||te.EMPTY_STRING,this.claims=a||te.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function l3(t,e,n){const r=!!t&&vD.indexOf(t)>-1,i=!!n&&ane.indexOf(n)>-1,s=!!e&&vD.some(o=>e.indexOf(o)>-1);return r||s||i}function Hw(t){return new Ns(t,cne[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class tf{static setRequestState(e,n,r){const i=tf.generateLibraryState(e,r);return n?`${i}${te.RESOURCE_DELIM}${n}`:i}static generateLibraryState(e,n){if(!e)throw ae(OI);const r={id:e.createNewGuid()};n&&(r.meta=n);const i=JSON.stringify(r);return e.base64Encode(i)}static parseRequestState(e,n){if(!e)throw ae(OI);if(!n)throw ae(vh);try{const r=n.split(te.RESOURCE_DELIM),i=r[0],s=r.length>1?r.slice(1).join(te.RESOURCE_DELIM):te.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||te.EMPTY_STRING,libraryState:a}}catch{throw ae(vh)}}}/*! @azure/msal-common v15.13.0 2025-09-24 */const lne={SW:"sw"};class wh{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(F.PopTokenGenerateCnf,e.correlationId);const r=await ee(this.generateKid.bind(this),F.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(F.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:lne.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,i){const{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:c,shrOptions:l}=r,u=o?new _t(o):void 0,d=u==null?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:fi(),m:s==null?void 0:s.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},n,l,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class une{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.0 2025-09-24 */class pu{constructor(e,n,r,i,s,o,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const i=`Error(s): ${e.error_codes||te.NOT_AVAILABLE} - Timestamp: ${e.timestamp||te.NOT_AVAILABLE} - Description: ${e.error_description||te.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||te.NOT_AVAILABLE} - Trace ID: ${e.trace_id||te.NOT_AVAILABLE}`,s=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,o=new Vu(e.error,i,e.suberror,s,e.status);if(n&&e.status&&e.status>=hc.SERVER_ERROR_RANGE_START&&e.status<=hc.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(n&&e.status&&e.status>=hc.CLIENT_ERROR_RANGE_START&&e.status<=hc.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw l3(e.error,e.error_description,e.suberror)?new Ns(e.error,e.error_description,e.suberror,e.timestamp||te.EMPTY_STRING,e.trace_id||te.EMPTY_STRING,e.correlation_id||te.EMPTY_STRING,e.claims||te.EMPTY_STRING,s):o}}async handleServerTokenResponse(e,n,r,i,s,o,a,c,l){var w;(w=this.performanceClient)==null||w.addQueueMeasurement(F.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=ef(e.id_token||te.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&u.nonce!==s.nonce)throw ae(hB);if(i.maxAge||i.maxAge===0){const y=u.auth_time;if(!y)throw ae(tx);VB(y,i.maxAge)}}this.homeAccountIdentifier=Ps.generateHomeAccountId(e.client_info||te.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,u);let d;s&&s.state&&(d=tf.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;const h=this.generateCacheRecord(e,n,r,i,u,o,s);let m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new une(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),a&&!c&&h.account){const y=this.cacheStorage.generateAccountKey(h.account.getAccountInfo());if(!this.cacheStorage.getAccount(y,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await pu.generateAuthenticationResult(this.cryptoObj,n,h,!1,i,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(h,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return pu.generateAuthenticationResult(this.cryptoObj,n,h,!1,i,u,d,e,l)}generateCacheRecord(e,n,r,i,s,o,a){const c=n.getPreferredCache();if(!c)throw ae(rx);const l=a3(s);let u,d;e.id_token&&s&&(u=LT(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=Rx(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,c,l,a,void 0,this.logger));let h=null;if(e.access_token){const y=e.scope?Vn.fromString(e.scope):new Vn(i.scopes||[]),_=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,v=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,T=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=r+_,I=C+v,x=T&&T>0?r+T:void 0;h=FT(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant||"",y.printScopes(),C,I,this.cryptoObj.base64Decode,x,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){const _=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=r+_}m=i3(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,y)}let w=null;return e.foci&&(w={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:m,appMetadata:w}}static async generateAuthenticationResult(e,n,r,i,s,o,a,c,l){var C,I,x,D,A;let u=te.EMPTY_STRING,d=[],h=null,m,w,y=te.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===At.POP&&!s.popKid){const S=new wh(e),{secret:k,keyId:N}=r.accessToken;if(!N)throw ae(ix);u=await S.signPopToken(k,N,s)}else u=r.accessToken.secret;d=Vn.fromString(r.accessToken.target).asArray(),h=Bd(r.accessToken.expiresOn),m=Bd(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(w=Bd(r.accessToken.refreshOn))}r.appMetadata&&(y=r.appMetadata.familyId===Rw?Rw:"");const _=(o==null?void 0:o.oid)||(o==null?void 0:o.sub)||"",v=(o==null?void 0:o.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const T=r.account?fx(r.account.getAccountInfo(),void 0,o,(C=r.idToken)==null?void 0:C.secret):null;return{authority:n.canonicalAuthority,uniqueId:_,tenantId:v,scopes:d,account:T,idToken:((I=r==null?void 0:r.idToken)==null?void 0:I.secret)||"",idTokenClaims:o||{},accessToken:u,fromCache:i,expiresOn:h,extExpiresOn:m,refreshOn:w,correlationId:s.correlationId,requestId:l||te.EMPTY_STRING,familyId:y,tokenType:((x=r.accessToken)==null?void 0:x.tokenType)||te.EMPTY_STRING,state:a?a.userRequestState:te.EMPTY_STRING,cloudGraphHostName:((D=r.account)==null?void 0:D.cloudGraphHostName)||te.EMPTY_STRING,msGraphHost:((A=r.account)==null?void 0:A.msGraphHost)||te.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function Rx(t,e,n,r,i,s,o,a,c,l,u,d){d==null||d.verbose("setCachedAccount called");const m=t.getAccountKeys().find(T=>T.startsWith(n));let w=null;m&&(w=t.getAccount(m,i));const y=w||Ps.createAccount({homeAccountId:n,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:l==null?void 0:l.cloud_graph_host_name,msGraphHost:l==null?void 0:l.msgraph_host,nativeAccountId:u},e,r),_=y.tenantProfiles||[],v=c||y.realm;if(v&&!_.find(T=>T.tenantId===v)){const T=hx(n,y.localAccountId,v,s);_.push(T)}return y.tenantProfiles=_,y}/*! @azure/msal-common v15.13.0 2025-09-24 */async function u3(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.13.0 2025-09-24 */class d3 extends Ax{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(F.AuthClientAcquireToken,e.correlationId),!e.code)throw ae(mB);const r=fi(),i=await ee(this.executeTokenRequest.bind(this),F.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=(c=i.headers)==null?void 0:c[Dr.X_MS_REQUEST_ID],o=new pu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),ee(o.handleServerTokenResponse.bind(o),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,n,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Ot(xB);const n=this.createLogoutUrlQueryString(e);return _t.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(F.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),i=_t.appendQueryString(e.tokenEndpoint,r),s=await ee(this.createTokenRequestBody.bind(this),F.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let o;if(n.clientInfo)try{const u=Fw(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${u.uid}${Rm.CLIENT_INFO_SEPARATOR}${u.utid}`,type:Cs.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}const a=this.createTokenRequestHeaders(o||n.ccsCredential),c=VT(this.config.authOptions.clientId,n);return ee(this.executePostToTokenEndpoint.bind(this),F.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(i,s,a,c,n.correlationId,F.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(vx(n,e.embeddedClientId||((s=e.tokenBodyParameters)==null?void 0:s[fu])||this.config.authOptions.clientId),this.includeRedirectUri)wx(n,e.redirectUri);else if(!e.redirectUri)throw Ot(SB);if(yx(n,e.scopes,!0,this.oidcDefaultScopes),Vte(n,e.code),Cx(n,this.config.libraryInfo),Ex(n,this.config.telemetry.application),r3(n),this.serverTelemetryManager&&!zB(this.config)&&n3(n,this.serverTelemetryManager),e.codeVerifier&&Ute(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&YB(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;XB(n,await u3(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),JB(n,o.assertionType)}if(ZB(n,iB.AUTHORIZATION_CODE_GRANT),Sx(n),e.authenticationScheme===At.POP){const o=new wh(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await ee(o.generateCnf.bind(o),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,bx(n,a)}else if(e.authenticationScheme===At.SSH)if(e.sshJwk)t3(n,e.sshJwk);else throw Ot(NT);(!xi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&_x(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const o=Fw(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${Rm.CLIENT_INFO_SEPARATOR}${o.utid}`,type:Cs.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Cs.HOME_ACCOUNT_ID:try{const o=$d(r.credential);Op(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Cs.UPN:Uw(n,r.credential);break}return e.embeddedClientId&&MT(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Ac(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[dD])&&Ac(n,{[dD]:"1"}),OT(n,e.correlationId,this.performanceClient),Pm(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&Ote(n,e.postLogoutRedirectUri),e.correlationId&&Tx(n,e.correlationId),e.idTokenHint&&Mte(n,e.idTokenHint),e.state&&GB(n,e.state),e.logoutHint&&Bte(n,e.logoutHint),e.extraQueryParameters&&Ac(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&e3(n),Pm(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const dne=300;class hne extends Ax{constructor(e,n){super(e,n)}async acquireToken(e){var o,a;(o=this.performanceClient)==null||o.addQueueMeasurement(F.RefreshTokenClientAcquireToken,e.correlationId);const n=fi(),r=await ee(this.executeTokenRequest.bind(this),F.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=(a=r.headers)==null?void 0:a[Dr.X_MS_REQUEST_ID],s=new pu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(r.body),ee(s.handleServerTokenResponse.bind(s),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Ot(kB);if((r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw ae(nx);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ee(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(i){const s=i instanceof Ns&&i.errorCode===Bw,o=i instanceof Vu&&i.errorCode===nD.INVALID_GRANT_ERROR&&i.subError===nD.CLIENT_MISMATCH_ERROR;if(s||o)return ee(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw i}return ee(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var s,o,a;(s=this.performanceClient)==null||s.addQueueMeasurement(F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Ri(this.cacheManager.getRefreshToken.bind(this.cacheManager),F.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw Hw(Bw);if(r.expiresOn&&$w(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||dne))throw(o=this.performanceClient)==null||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Hw(kx);const i={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||At.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Cs.HOME_ACCOUNT_ID}};try{return await ee(this.acquireToken.bind(this),F.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(c){if(c instanceof Ns&&((a=this.performanceClient)==null||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===UT)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const l=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(l,e.correlationId)}throw c}}async executeTokenRequest(e,n){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(F.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),i=_t.appendQueryString(n.tokenEndpoint,r),s=await ee(this.createTokenRequestBody.bind(this),F.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=VT(this.config.authOptions.clientId,e);return ee(this.executePostToTokenEndpoint.bind(this),F.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,F.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(vx(n,e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[fu])||this.config.authOptions.clientId),e.redirectUri&&wx(n,e.redirectUri),yx(n,e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),ZB(n,iB.REFRESH_TOKEN_GRANT),Sx(n),Cx(n,this.config.libraryInfo),Ex(n,this.config.telemetry.application),r3(n),this.serverTelemetryManager&&!zB(this.config)&&n3(n,this.serverTelemetryManager),jte(n,e.refreshToken),this.config.clientCredentials.clientSecret&&YB(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;XB(n,await u3(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),JB(n,o.assertionType)}if(e.authenticationScheme===At.POP){const o=new wh(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await ee(o.generateCnf.bind(o),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,bx(n,a)}else if(e.authenticationScheme===At.SSH)if(e.sshJwk)t3(n,e.sshJwk);else throw Ot(NT);if((!xi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&_x(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Cs.HOME_ACCOUNT_ID:try{const o=$d(e.ccsCredential.credential);Op(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Cs.UPN:Uw(n,e.ccsCredential.credential);break}return e.embeddedClientId&&MT(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Ac(n,e.tokenBodyParameters),OT(n,e.correlationId,this.performanceClient),Pm(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class fne extends Ax{constructor(e,n){super(e,n)}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(F.SilentFlowClientAcquireCachedToken,e.correlationId);let n=El.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!xi.isEmptyObj(e.claims))throw this.setCacheOutcome(El.FORCE_REFRESH_OR_CLAIMS,e.correlationId),ae(Ic);if(!e.account)throw ae(nx);const r=e.account.tenantId||nne(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,r);if(s){if(Qte(s.cachedAt)||$w(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(El.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),ae(Ic);s.refreshOn&&$w(s.refreshOn,0)&&(n=El.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(El.NO_CACHED_ACCESS_TOKEN,e.correlationId),ae(Ic);const o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ee(this.generateResultFromCacheRecord.bind(this),F.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,i;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(i=this.performanceClient)==null||i.addFields({cacheOutcome:e},n),e!==El.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=ef(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const s=r==null?void 0:r.auth_time;if(!s)throw ae(tx);VB(s,n.maxAge)}return pu.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const pne={sendGetRequestAsync:()=>Promise.reject(ae(rt)),sendPostRequestAsync:()=>Promise.reject(ae(rt))};/*! @azure/msal-common v15.13.0 2025-09-24 */function mne(t,e,n,r){var a,c;const i=e.correlationId,s=new Map;vx(s,e.embeddedClientId||((a=e.extraQueryParameters)==null?void 0:a[fu])||t.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(yx(s,o,!0,(c=t.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),wx(s,e.redirectUri),Tx(s,i),Pte(s,e.responseMode),Sx(s),e.prompt&&(Lte(s,e.prompt),r==null||r.addFields({prompt:e.prompt},i)),e.domainHint&&(Dte(s,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},i)),e.prompt!==cr.SELECT_ACCOUNT)if(e.sid&&e.prompt===cr.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),hD(s,e.sid),r==null||r.addFields({sidFromRequest:!0},i);else if(e.account){const l=vne(e.account);let u=wne(e.account);if(u&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),zy(s,u),r==null||r.addFields({loginHintFromClaim:!0},i);try{const d=$d(e.account.homeAccountId);Op(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&e.prompt===cr.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),hD(s,l),r==null||r.addFields({sidFromClaim:!0},i);try{const d=$d(e.account.homeAccountId);Op(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),zy(s,e.loginHint),Uw(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),zy(s,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},i);try{const d=$d(e.account.homeAccountId);Op(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),zy(s,e.loginHint),Uw(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Fte(s,e.nonce),e.state&&GB(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&_x(s,e.claims,t.clientCapabilities),e.embeddedClientId&&MT(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(FI))&&e3(s),s}function Px(t,e,n,r){const i=Pm(e,n,r);return _t.appendQueryString(t.authorizationEndpoint,i)}function gne(t,e){if(h3(t,e),!t.code)throw ae(_B);return t}function h3(t,e){if(!t.state||!e)throw t.state?ae(RI,"Cached State"):ae(RI,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw ae(vh,t.state)}try{r=decodeURIComponent(e)}catch{throw ae(vh,t.state)}if(n!==r)throw ae(dB);if(t.error||t.error_description||t.suberror){const i=yne(t);throw l3(t.error,t.error_description,t.suberror)?new Ns(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Vu(t.error||"",t.error_description,t.suberror,i)}}function yne(t){var r,i;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(i=t.error_uri)==null?void 0:i.substring(n+e.length):void 0}function vne(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}function wne(t){var e;return t.loginHint||((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.13.0 2025-09-24 */const wD=",",f3="|";function _ne(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[n,r]],[2,[i,s]]]);let a=[];if(e!=null&&e.length){if(a=e.split(wD),a.length<4)return e}else a=Array.from({length:4},()=>f3);return o.forEach((c,l)=>{var u,d;c.length===2&&((u=c[0])!=null&&u.length)&&((d=c[1])!=null&&d.length)&&Tne({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(wD)}function Tne(t){const{skuArr:e,index:n,skuName:r,skuVersion:i}=t;n>=e.length||(e[n]=[r,i].join(f3))}class Nm{constructor(e,n){this.cacheOutcome=El.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||te.EMPTY_STRING,this.wrapperVer=e.wrapperVer||te.EMPTY_STRING,this.telemetryCacheKey=rr.CACHE_KEY+Rm.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${rr.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const i=n.join(rr.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(rr.VALUE_SEPARATOR);return[rr.SCHEMA_VERSION,o,i].join(rr.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Nm.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(rr.VALUE_SEPARATOR),i=e.errors.slice(0,n).join(rr.VALUE_SEPARATOR),s=e.errors.length,o=n<s?rr.OVERFLOW_TRUE:rr.OVERFLOW_FALSE,a=[s,o].join(rr.VALUE_SEPARATOR);return[rr.SCHEMA_VERSION,e.cacheHits,r,i,a].join(rr.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=rr.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Pt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(rr.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Nm.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const i={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,i=0;const s=e.errors.length;for(n=0;n<s;n++){const o=e.failedRequests[2*n]||te.EMPTY_STRING,a=e.failedRequests[2*n+1]||te.EMPTY_STRING,c=e.errors[n]||te.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+c.length+3,i<rr.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||te.EMPTY_STRING),e.push(this.regionSource||te.EMPTY_STRING),e.push(this.regionOutcome||te.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return _ne(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const p3="missing_kid_error",m3="missing_alg_error";/*! @azure/msal-common v15.13.0 2025-09-24 */const Cne={[p3]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[m3]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Nx extends Pt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,Nx.prototype)}}function _D(t){return new Nx(t,Cne[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ox{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw _D(p3);if(!e.alg)throw _D(m3);const n=new Ox({typ:e.typ||mee.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Mx="pkce_not_created",Dx="ear_jwk_empty",g3="ear_jwe_empty",VI="crypto_nonexistent",$T="empty_navigate_uri",y3="hash_empty_error",Lx="no_state_in_hash",v3="hash_does_not_contain_known_properties",w3="unable_to_parse_state",_3="state_interaction_type_mismatch",T3="interaction_in_progress",C3="popup_window_error",E3="empty_window_error",Om="user_cancelled",Ene="monitor_popup_timeout",S3="monitor_window_timeout",b3="redirect_in_iframe",I3="block_iframe_reload",A3="block_nested_popups",Sne="iframe_closed_prematurely",BT="silent_logout_unsupported",k3="no_account_error",bne="silent_prompt_value_error",x3="no_token_request_cache_error",R3="unable_to_parse_token_request_cache_error",Ine="auth_request_not_set_error",Ane="invalid_cache_type",HT="non_browser_environment",od="database_not_open",zw="no_network_connectivity",P3="post_request_failed",N3="get_request_failed",jI="failed_to_parse_response",O3="unable_to_load_token",Fx="crypto_key_not_found",M3="auth_code_required",D3="auth_code_or_nativeAccountId_required",L3="spa_code_and_nativeAccountId_present",Vx="database_unavailable",F3="unable_to_acquire_token_from_native_platform",V3="native_handshake_timeout",j3="native_extension_not_installed",jx="native_connection_not_established",Mp="uninitialized_public_client_application",U3="native_prompt_not_supported",$3="invalid_base64_string",B3="invalid_pop_token_request",H3="failed_to_build_headers",z3="failed_to_parse_headers",Rv="failed_to_decrypt_ear_response",Ww="timed_out";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Do="For more visit: aka.ms/msaljs/browser-errors",kne={[Mx]:"The PKCE code challenge and verifier could not be generated.",[Dx]:"No EAR encryption key provided. This is unexpected.",[g3]:"Server response does not contain ear_jwe property. This is unexpected.",[VI]:"The crypto object or function is not available.",[$T]:"Navigation URI is empty. Please check stack trace for more info.",[y3]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Do}`,[Lx]:"Hash does not contain state. Please verify that the request originated from msal.",[v3]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Do}`,[w3]:"Unable to parse state. Please verify that the request originated from msal.",[_3]:"Hash contains state but the interaction type does not match the caller.",[T3]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Do}`,[C3]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[E3]:"window.open returned null or undefined window object.",[Om]:"User cancelled the flow.",[Ene]:`Token acquisition in popup failed due to timeout.  ${Do}`,[S3]:`Token acquisition in iframe failed due to timeout.  ${Do}`,[b3]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[I3]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Do}`,[A3]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Sne]:"The iframe being monitored was closed prematurely.",[BT]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[k3]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[bne]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[x3]:"No token request found in cache.",[R3]:"The cached token request could not be parsed.",[Ine]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Ane]:"Invalid cache type",[HT]:"Login and token requests are not supported in non-browser environments.",[od]:"Database is not open!",[zw]:"No network connectivity. Check your internet connection.",[P3]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[N3]:"Network request failed. Please check the network trace to determine root cause.",[jI]:"Failed to parse network response. Check network trace.",[O3]:"Error loading token to cache.",[Fx]:"Cryptographic Key or Keypair not found in browser storage.",[M3]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[D3]:"An authorization code or nativeAccountId must be provided to this flow.",[L3]:"Request cannot contain both spa code and native account id.",[Vx]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[F3]:`Unable to acquire token from native platform.  ${Do}`,[V3]:"Timed out while attempting to establish connection to browser extension",[j3]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[jx]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Do}`,[Mp]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Do}`,[U3]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[$3]:"Invalid base64 encoded string.",[B3]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[H3]:"Failed to build request headers object.",[z3]:"Failed to parse response headers",[Rv]:"Failed to decrypt ear response",[Ww]:"The request timed out."};class xg extends Pt{constructor(e,n){super(e,kne[e],n),Object.setPrototypeOf(this,xg.prototype),this.name="BrowserAuthError"}}function _e(t,e){return new xg(t,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const ti={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Wi={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Gf={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},jn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},TD={GET:"GET",POST:"POST"},Ja={SIGNIN:"signin",SIGNOUT:"signout"},Cn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Ky={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Rt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var je;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(je||(je={}));const CD={scopes:Zh},W3="jwk",UI="msal.db",xne=1,Rne=`${UI}.keys`,Or={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},Pne=[Or.Default,Or.Skip,Or.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.25.0 2025-10-09 */function qy(t){return encodeURIComponent(Mm(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function jc(t){return K3(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mm(t){return K3(new TextEncoder().encode(t))}function K3(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */function ks(t){return new TextDecoder().decode(kc(t))}function kc(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw _e($3)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Nne="RSASSA-PKCS1-v1_5",nf="AES-GCM",q3="HKDF",Ux="SHA-256",One=2048,Mne=new Uint8Array([1,0,1]),ED="0123456789abcdef",SD=new Uint32Array(1),$x="raw",G3="encrypt",Bx="decrypt",Dne="deriveKey",Lne="crypto_subtle_undefined",Hx={name:Nne,hash:Ux,modulusLength:One,publicExponent:Mne};function Fne(t){if(!window)throw _e(HT);if(!window.crypto)throw _e(VI);if(!t&&!window.crypto.subtle)throw _e(VI,Lne)}async function Q3(t,e,n){e==null||e.addQueueMeasurement(F.Sha256Digest,n);const i=new TextEncoder().encode(t);return window.crypto.subtle.digest(Ux,i)}function Vne(t){return window.crypto.getRandomValues(t)}function gS(){return window.crypto.getRandomValues(SD),SD[0]}function Os(){const t=Date.now(),e=gS()*1024+(gS()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),i=e&2**30-1,s=gS();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=s>>>24,n[13]=s>>>16,n[14]=s>>>8,n[15]=s;let o="";for(let a=0;a<n.length;a++)o+=ED.charAt(n[a]>>>4),o+=ED.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(o+="-");return o}async function jne(t,e){return window.crypto.subtle.generateKey(Hx,t,e)}async function yS(t){return window.crypto.subtle.exportKey(W3,t)}async function Une(t,e,n){return window.crypto.subtle.importKey(W3,t,Hx,e,n)}async function $ne(t,e){return window.crypto.subtle.sign(Hx,t,e)}async function zx(){const t=await Y3(),n={alg:"dir",kty:"oct",k:jc(new Uint8Array(t))};return Mm(JSON.stringify(n))}async function Bne(t){const e=ks(t),r=JSON.parse(e).k,i=kc(r);return window.crypto.subtle.importKey($x,i,nf,!1,[Bx])}async function Hne(t,e){const n=e.split(".");if(n.length!==5)throw _e(Rv,"jwe_length");const r=await Bne(t).catch(()=>{throw _e(Rv,"import_key")});try{const i=new TextEncoder().encode(n[0]),s=kc(n[2]),o=kc(n[3]),a=kc(n[4]),c=a.byteLength*8,l=new Uint8Array(o.length+a.length);l.set(o),l.set(a,o.length);const u=await window.crypto.subtle.decrypt({name:nf,iv:s,tagLength:c,additionalData:i},r,l);return new TextDecoder().decode(u)}catch{throw _e(Rv,"decrypt")}}async function Y3(){const t=await window.crypto.subtle.generateKey({name:nf,length:256},!0,[G3,Bx]);return window.crypto.subtle.exportKey($x,t)}async function bD(t){return window.crypto.subtle.importKey($x,t,q3,!1,[Dne])}async function X3(t,e,n){return window.crypto.subtle.deriveKey({name:q3,salt:e,hash:Ux,info:new TextEncoder().encode(n)},t,{name:nf,length:256},!1,[G3,Bx])}async function zne(t,e,n){const r=new TextEncoder().encode(e),i=window.crypto.getRandomValues(new Uint8Array(16)),s=await X3(t,i,n),o=await window.crypto.subtle.encrypt({name:nf,iv:new Uint8Array(12)},s,r);return{data:jc(new Uint8Array(o)),nonce:jc(i)}}async function ID(t,e,n,r){const i=kc(r),s=await X3(t,kc(e),n),o=await window.crypto.subtle.decrypt({name:nf,iv:new Uint8Array(12)},s,i);return new TextDecoder().decode(o)}async function J3(t){const e=await Q3(t),n=new Uint8Array(e);return jc(n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const zT="storage_not_supported",Z3="stubbed_public_client_application_called",Wx="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Pv={[zT]:"Given storage configuration option was not supported.",[Z3]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Wx]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Pv[zT],Pv[Z3],Pv[Wx];class Kx extends Pt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Kx.prototype)}}function qx(t){return new Kx(t,Pv[t])}/*! @azure/msal-browser v4.25.0 2025-10-09 */function eH(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function Wne(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Gx(){return window.parent!==window}function Kne(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${ti.POPUP_NAME_PREFIX}.`)===0}function Yo(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function qne(){const e=new _t(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function Gne(){if(_t.hashContainsKnownProperties(window.location.hash)&&Gx())throw _e(I3)}function Qne(t){if(Gx()&&!t)throw _e(b3)}function Yne(){if(Kne())throw _e(A3)}function tH(){if(typeof window>"u")throw _e(HT)}function nH(t){if(!t)throw _e(Mp)}function Qx(t){tH(),Gne(),Yne(),nH(t)}function AD(t,e){if(Qx(t),Qne(e.system.allowRedirectInIframe),e.cache.cacheLocation===jn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw qx(Wx)}function rH(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function Xne(){return Os()}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Kw{navigateInternal(e,n){return Kw.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Kw.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,i)=>{setTimeout(()=>{i(_e(Ww,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Jne{async sendGetRequestAsync(e,n){let r,i={},s=0;const o=kD(n);try{r=await fetch(e,{method:TD.GET,headers:o})}catch(a){throw hp(_e(window.navigator.onLine?N3:zw),void 0,void 0,a)}i=xD(r.headers);try{return s=r.status,{headers:i,body:await r.json(),status:s}}catch(a){throw hp(_e(jI),s,i,a)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",i=kD(n);let s,o=0,a={};try{s=await fetch(e,{method:TD.POST,headers:i,body:r})}catch(c){throw hp(_e(window.navigator.onLine?P3:zw),void 0,void 0,c)}a=xD(s.headers);try{return o=s.status,{headers:a,body:await s.json(),status:o}}catch(c){throw hp(_e(jI),o,a,c)}}}function kD(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,i])=>{e.append(r,i)}),e}catch(e){throw hp(_e(H3),void 0,void 0,e)}}function xD(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw _e(z3)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Zne=6e4,$I=1e4,ere=3e4,iH=2e3;function tre({auth:t,cache:e,system:n,telemetry:r},i){const s={clientId:te.EMPTY_STRING,authority:`${te.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:te.EMPTY_STRING,authorityMetadata:te.EMPTY_STRING,redirectUri:typeof window<"u"?Yo():"",postLogoutRedirectUri:te.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:di.AAD,OIDCOptions:{serverResponseType:PT.FRAGMENT,defaultScopes:[te.OPENID_SCOPE,te.PROFILE_SCOPE,te.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ax.None,tenant:te.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},o={cacheLocation:jn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:jn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===jn.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:qt.Info,piiLoggingEnabled:!1},l={...{...HB,loggerOptions:a,networkClient:i?new Jne:pne,navigationClient:new Kw,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||Zne,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||$I,navigateFrameWait:0,redirectNavigationTimeout:ere,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||iH,pollIntervalMilliseconds:ti.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},u={application:{appName:te.EMPTY_STRING,appVersion:te.EMPTY_STRING},client:new BB};if((t==null?void 0:t.protocolMode)!==di.OIDC&&(t!=null&&t.OIDCOptions)&&new kg(l.loggerOptions).warning(JSON.stringify(Ot(OB))),t!=null&&t.protocolMode&&t.protocolMode===di.OIDC&&(l!=null&&l.allowPlatformBroker))throw Ot(MB);return{auth:{...s,...t,OIDCOptions:{...s.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...o,...e},system:l,telemetry:{...u,...r}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const nre="@azure/msal-browser",mu="4.25.0";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Qn="msal",Yx="browser",vS="-",Ba=1,BI=1,rre=`${Qn}.${Yx}.log.level`,ire=`${Qn}.${Yx}.log.pii`,sre=`${Qn}.${Yx}.platform.auth.dom`,RD=`${Qn}.version`,PD="account.keys",ND="token.keys";function Gs(t=BI){return t<1?`${Qn}.${PD}`:`${Qn}.${t}.${PD}`}function Ul(t,e=Ba){return e<1?`${Qn}.${ND}.${t}`:`${Qn}.${e}.${ND}.${t}`}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Xx{static loggerCallback(e,n){switch(e){case qt.Error:console.error(n);return;case qt.Info:console.info(n);return;case qt.Verbose:console.debug(n);return;case qt.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=tre(e,this.browserEnvironment);let n;try{n=window[jn.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(rre),i=(c=n==null?void 0:n.getItem(ire))==null?void 0:c.toLowerCase(),s=i==="true"?!0:i==="false"?!1:void 0,o={...this.config.system.loggerOptions},a=r&&Object.keys(qt).includes(r)?qt[r]:void 0;a&&(o.loggerCallback=Xx.loggerCallback,o.logLevel=a),s!==void 0&&(o.piiLoggingEnabled=s),this.logger=new kg(o,nre,mu),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class gu extends Xx{getModuleName(){return gu.MODULE_NAME}getId(){return gu.ID}async initialize(){return this.available=typeof window<"u",this.available}}gu.MODULE_NAME="";gu.ID="StandardOperatingContext";/*! @azure/msal-browser v4.25.0 2025-10-09 */class ore{constructor(){this.dbName=UI,this.version=xne,this.tableName=Rne,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",i=>{const s=i;this.db=s.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(_e(Vx)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(od));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,i)=>{if(!this.db)return i(_e(od));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),i(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(od));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(_e(od));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();s.addEventListener("success",o=>{const a=o;this.closeConnection(),e(a.target.result)}),s.addEventListener("error",o=>{this.closeConnection(),n(o)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(od));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(UI),i=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(i),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(i),e(!0))),r.addEventListener("error",()=>(clearTimeout(i),n(!1)))})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */let WT=class{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.25.0 2025-10-09 */class are{constructor(e){this.inMemoryCache=new WT,this.indexedDBCache=new ore,this.logger=e}handleDatabaseAccessError(e){if(e instanceof xg&&e.errorCode===Vx)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class da{constructor(e,n,r){this.logger=e,Fne(r??!1),this.cache=new are(this.logger),this.performanceClient=n}createNewGuid(){return Os()}base64Encode(e){return Mm(e)}base64Decode(e){return ks(e)}base64UrlEncode(e){return qy(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var u;const n=(u=this.performanceClient)==null?void 0:u.startMeasurement(F.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await jne(da.EXTRACTABLE,da.POP_KEY_USAGES),i=await yS(r.publicKey),s={e:i.e,kty:i.kty,n:i.n},o=OD(s),a=await this.hashString(o),c=await yS(r.privateKey),l=await Une(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:l,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw ae(TB)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,i){var C;const s=(C=this.performanceClient)==null?void 0:C.startMeasurement(F.CryptoOptsSignJwt,i),o=await this.cache.getItem(n);if(!o)throw _e(Fx);const a=await yS(o.publicKey),c=OD(a),l=qy(JSON.stringify({kid:n})),u=Ox.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:l}),d=qy(u);e.cnf={jwk:JSON.parse(c)};const h=qy(JSON.stringify(e)),m=`${d}.${h}`,y=new TextEncoder().encode(m),_=await $ne(o.privateKey,y),v=jc(new Uint8Array(_)),T=`${m}.${v}`;return s&&s.end({success:!0}),T}async hashString(e){return J3(e)}}da.POP_KEY_USAGES=["sign","verify"];da.EXTRACTABLE=!0;function OD(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.25.0 2025-10-09 */const cre=24*60*60*1e3,HI={Lax:"Lax",None:"None"};class sH{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let i=0;i<r.length;i++){const s=r[i],[o,...a]=decodeURIComponent(s).trim().split("="),c=a.join("=");if(o===n)return c}return""}getUserData(){throw ae(rt)}setItem(e,n,r,i=!0,s=HI.Lax){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${s};`;if(r){const a=lre(r);o+=`expires=${a};`}(i||s===HI.None)&&(o+="Secure;"),document.cookie=o}async setUserData(){return Promise.reject(ae(rt))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const i=decodeURIComponent(r).trim().split("=");n.push(i[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function lre(t){const e=new Date;return new Date(e.getTime()+t*cre).toUTCString()}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Dp(t,e){const n=t.getItem(Gs(e));return n?JSON.parse(n):[]}function Lp(t,e,n){const r=e.getItem(Ul(t,n));if(r){const i=JSON.parse(r);if(i&&i.hasOwnProperty("idToken")&&i.hasOwnProperty("accessToken")&&i.hasOwnProperty("refreshToken"))return i}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function zI(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.25.0 2025-10-09 */const MD="msal.cache.encryption",ure="msal.broadcast.cache";class dre{constructor(e,n,r){if(!window.localStorage)throw qx(zT);this.memoryStorage=new WT,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(ure)}async initialize(e){const n=new sH,r=n.getItem(MD);let i={key:"",id:""};if(r)try{i=JSON.parse(r)}catch{}if(i.key&&i.id){const s=Ri(kc,F.Base64Decode,this.logger,this.performanceClient,e)(i.key);this.encryptionCookie={id:i.id,key:await ee(bD,F.GenerateHKDF,this.logger,this.performanceClient,e)(s)}}else{const s=Os(),o=await ee(Y3,F.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Ri(jc,F.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(o));this.encryptionCookie={id:s,key:await ee(bD,F.GenerateHKDF,this.logger,this.performanceClient,e)(o)};const c={id:s,key:a};n.setItem(MD,JSON.stringify(c),0,!0,HI.None)}await ee(this.importExistingCache.bind(this),F.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw _e(Mp);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw _e(Mp);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=await ee(ID,F.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!i)return null;try{return JSON.parse(i)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,i){if(!this.initialized||!this.encryptionCookie)throw _e(Mp);const{data:s,nonce:o}=await ee(zne,F.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:o,data:s,lastUpdatedAt:i};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Dp(this).forEach(r=>this.removeItem(r));const n=Lp(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Qn)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Dp(this);n=await this.importArray(n,e),n.length?this.setItem(Gs(),JSON.stringify(n)):this.removeItem(Gs());const r=Lp(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Ul(this.clientId),JSON.stringify(r)):this.removeItem(Ul(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let i;try{i=JSON.parse(r)}catch{return null}return zI(i)?i.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):ee(ID,F.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,i.nonce,this.getContext(e),i.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),i)}async importArray(e,n){const r=[],i=[];return e.forEach(s=>{const o=this.getItemFromEncryptedCache(s,n).then(a=>{a?(this.memoryStorage.setItem(s,a),r.push(s)):this.removeItem(s)});i.push(o)}),await Promise.all(i),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(F.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:i,context:s}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(s&&s!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${s}`),n.end({success:!1,errorCode:"contextMismatch"});return}i?(this.memoryStorage.setItem(r,i),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */let hre=class{constructor(){if(!window.sessionStorage)throw qx(zT)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.25.0 2025-10-09 */const De={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.25.0 2025-10-09 */function DD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class WI extends LI{constructor(e,n,r,i,s,o,a){super(e,r,i,s,a),this.cacheConfig=n,this.logger=i,this.internalStorage=new WT,this.browserStorage=LD(e,n.cacheLocation,i,s),this.temporaryCacheStorage=LD(e,n.temporaryCacheLocation,i,s),this.cookieStorage=new sH,this.eventHandler=o}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=Dp(this.browserStorage,0),r=Lp(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const i=Dp(this.browserStorage,1),s=Lp(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:i.length,currAccessCount:s.accessToken.length,currIdCount:s.idToken.length,currRefreshCount:s.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(BI,n,i,e),this.updateV0ToCurrent(Ba,r.idToken,s.idToken,e),this.updateV0ToCurrent(Ba,r.accessToken,s.accessToken,e),this.updateV0ToCurrent(Ba,r.refreshToken,s.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Gs(0),JSON.stringify(n)):this.browserStorage.removeItem(Gs(0)),i.length>0?this.browserStorage.setItem(Gs(1),JSON.stringify(i)):this.browserStorage.removeItem(Gs(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(s,e,1)}async updateV0ToCurrent(e,n,r,i){const s=[];for(const o of[...n]){const a=this.browserStorage.getItem(o),c=this.validateAndParseJson(a||"");if(!c){DD(n,o);continue}c.lastUpdatedAt||(c.lastUpdatedAt=Date.now().toString(),this.setItem(o,JSON.stringify(c),i));const l=zI(c)?await this.browserStorage.decryptData(o,c,i):c;let u;if(l&&(pD(l)||mD(l))&&(u=l.expiresOn),!l||Gte(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||u&&$w(u,sB)){this.browserStorage.removeItem(o),DD(n,o),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i);continue}if(this.cacheConfig.cacheLocation!==jn.LocalStorage||zI(c)){const d=`${Qn}.${e}${vS}${o}`,h=this.browserStorage.getItem(d);if(h){const m=this.validateAndParseJson(h);if(Number(c.lastUpdatedAt)>Number(m.lastUpdatedAt)){s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},i)}));continue}}else{s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{r.push(d),this.performanceClient.incrementFields({upgradedCacheCount:1},i)}));continue}}}return Promise.all(s)}trackVersionChanges(e){const n=this.browserStorage.getItem(RD);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==mu&&this.setItem(RD,mu,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let i=0,s=[];const o=20;for(let a=0;a<=o;a++)try{this.browserStorage.setItem(e,n),a>0&&(a<=i?this.removeAccessTokenKeys(s.slice(0,a),r,0):(this.removeAccessTokenKeys(s.slice(0,i),r,0),this.removeAccessTokenKeys(s.slice(i,a),r)));break}catch(c){const l=DI(c);if(l.errorCode===Lw&&a<o){if(!s.length){const u=e===Ul(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,d=e===Ul(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;s=[...u,...d],i=u.length}if(s.length<=a)throw l;this.removeAccessToken(s[a],r,!1)}else throw l}}async setUserData(e,n,r,i){let s=0,o=[];const a=20;for(let c=0;c<=a;c++)try{await ee(this.browserStorage.setUserData.bind(this.browserStorage),F.SetUserData,this.logger,this.performanceClient)(e,n,r,i),c>0&&(c<=s?this.removeAccessTokenKeys(o.slice(0,c),r,0):(this.removeAccessTokenKeys(o.slice(0,s),r,0),this.removeAccessTokenKeys(o.slice(s,c),r)));break}catch(l){const u=DI(l);if(u.errorCode===Lw&&c<a){if(!o.length){const d=this.getTokenKeys(0).accessToken,h=this.getTokenKeys().accessToken;o=[...d,...h],s=d.length}if(o.length<=c)throw u;this.removeAccessToken(o[c],r,!1)}else throw u}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const i=this.validateAndParseJson(r);return!i||!Ps.isAccountEntity(i)?null:LI.toObject(new Ps,i)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===jn.LocalStorage&&s&&this.eventHandler.emitEvent(De.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Dp(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Gs(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),i=r.indexOf(e);if(i>-1){if(r.splice(i,1),r.length===0){this.removeItem(Gs());return}else this.setItem(Gs(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(i=>{i.includes(e.homeAccountId)&&i.includes(e.environment)&&this.browserStorage.removeItem(i)}),this.cacheConfig.cacheLocation===jn.LocalStorage&&this.eventHandler.emitEvent(De.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),i=r.idToken.indexOf(e);i>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(i,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=Ba){this.logger.trace("removeAccessTokenKey called");const i=this.getTokenKeys(r);let s=0;if(e.forEach(o=>{const a=i.accessToken.indexOf(o);a>-1&&(i.accessToken.splice(a,1),s++)}),s>0){this.logger.info(`removed ${s} accessToken keys from tokenKeys map`),this.setTokenKeys(i,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),i=r.refreshToken.indexOf(e);i>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(i,1),this.setTokenKeys(r,n))}getTokenKeys(e=Ba){return Lp(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=Ba){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Ul(this.clientId,r));return}else this.setItem(Ul(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!Yte(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(r),this.setTokenKeys(s,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const i=this.validateAndParseJson(r);return!i||!pD(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys(),o=s.accessToken.indexOf(r);o!==-1&&s.accessToken.splice(o,1),this.logger.trace(`access token ${o===-1?"added to":"updated in"} map`),s.accessToken.push(r),this.setTokenKeys(s,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!mD(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(r),this.setTokenKeys(s,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!ene(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=Zte(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Xte(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&tne(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(Ky.WRAPPER_SKU,e),this.internalStorage.setItem(Ky.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Ky.WRAPPER_SKU)||te.EMPTY_STRING,n=this.internalStorage.getItem(Ky.WRAPPER_VER)||te.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(tD.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const i=this.validateAndParseJson(r);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(tD.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:fi().toString()};this.setItem(r,JSON.stringify(i),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(De.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Jte(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const s=this.cookieStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),s}const i=this.temporaryCacheStorage.getItem(r);if(!i){if(this.cacheConfig.cacheLocation===jn.LocalStorage){const s=this.browserStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),s}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),i}setTemporaryCache(e,n,r){const i=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(i,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(i,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(Qn)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(Qn)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(F.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i,e);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(i,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return xi.startsWith(e,Qn)?e:`${Qn}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===or.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==At.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Qn}.${Ba}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(vS).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${Qn}.${BI}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(vS).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Cn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Cn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Cn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Cn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Cn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Mm(JSON.stringify(e));if(this.setTemporaryCache(Cn.REQUEST_PARAMS,r,!0),n){const i=Mm(n);this.setTemporaryCache(Cn.VERIFIER,i,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Cn.REQUEST_PARAMS,!0);if(!e)throw _e(x3);const n=this.getTemporaryCache(Cn.VERIFIER,!0);let r,i="";try{r=JSON.parse(ks(e)),n&&(i=ks(n))}catch(s){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${s}`),_e(R3)}return[r,i]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Cn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const n=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${Qn}.${Cn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),eH(window),null}}setInteractionInProgress(e,n=Ja.SIGNIN){var i;const r=`${Qn}.${Cn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw _e(T3);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&((i=this.getInteractionInProgress())==null?void 0:i.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){var a,c,l;const r=LT((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let i;n.claims&&(i=await this.cryptoImpl.hashString(n.claims));const s=FT((l=e.account)==null?void 0:l.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?fD(e.expiresOn):0,e.extExpiresOn?fD(e.extExpiresOn):0,ks,void 0,e.tokenType,void 0,n.sshKid,n.claims,i),o={idToken:r,accessToken:s};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(i){if(i instanceof Ud&&this.performanceClient&&n)try{const s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},n)}catch{}throw i}}}function LD(t,e,n,r){try{switch(e){case jn.LocalStorage:return new dre(t,n,r);case jn.SessionStorage:return new hre;case jn.MemoryStorage:default:break}}catch(i){n.error(i)}return new WT}const fre=(t,e,n,r)=>{const i={cacheLocation:jn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:jn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new WI(t,i,Ow,e,n,r)};/*! @azure/msal-browser v4.25.0 2025-10-09 */function pre(t,e,n,r,i){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(i||{},r):[]}function mre(t,e,n,r){const i=n.getAccountInfoFilteredBy(t,r);return i?(e.verbose("getAccount: Account matching provided filter found, returning"),i):(e.verbose("getAccount: No matching account found, returning null"),null)}function gre(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const i=n.getAccountInfoFilteredBy({username:t},r);return i?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),i):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function yre(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const i=n.getAccountInfoFilteredBy({homeAccountId:t},r);return i?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),i):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function vre(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const i=n.getAccountInfoFilteredBy({localAccountId:t},r);return i?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),i):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function wre(t,e,n){e.setActiveAccount(t,n)}function _re(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Tre="msal.broadcast.event";class Cre{constructor(e){this.eventCallbacks=new Map,this.logger=e||new kg({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Tre)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const i=r||Xne();return this.eventCallbacks.has(i)?(this.logger.error(`Event callback with id: ${i} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(i,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${i}`),i)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,i){var o;const s={eventType:e,interactionType:n||null,payload:r||null,error:i||null,timestamp:Date.now()};switch(e){case De.ACCOUNT_ADDED:case De.ACCOUNT_REMOVED:case De.ACTIVE_ACCOUNT_CHANGED:(o=this.broadcastChannel)==null||o.postMessage(s);break;default:this.invokeCallbacks(s);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],i)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${i}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class oH{constructor(e,n,r,i,s,o,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=s,this.navigationClient=o,this.platformAuthProvider=c,this.correlationId=l||Os(),this.logger=i.clone(ti.MSAL_SKU,mu,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return _t.getAbsoluteUrl(n,Yo())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Nm(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const i={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||this.config.auth.authority,o=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&o?this.config.auth.authority.replace(_t.getDomainFromUrl(s),n.environment):s,c=Tr.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await ee(o3,F.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,i,this.logger,this.correlationId,this.performanceClient);if(n&&!l.isAlias(n.environment))throw Ot(DB);return l}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function Jx(t,e,n,r){n.addQueueMeasurement(F.InitializeBaseRequest,t.correlationId);const i=t.authority||e.auth.authority,s=[...t&&t.scopes||[]],o={...t,correlationId:t.correlationId,authority:i,scopes:s};if(!o.authenticationScheme)o.authenticationScheme=At.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(o.authenticationScheme===At.SSH){if(!t.sshJwk)throw Ot(NT);if(!t.sshKid)throw Ot(NB)}r.verbose(`Authentication Scheme set to "${o.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!xi.isEmptyObj(t.claims)&&(o.requestedClaimsHash=await J3(t.claims)),o}async function Ere(t,e,n,r,i){r.addQueueMeasurement(F.InitializeSilentRequest,t.correlationId);const s=await ee(Jx,F.InitializeBaseRequest,i,r,t.correlationId)(t,n,r,i);return{...t,...s,account:e,forceRefresh:t.forceRefresh||!1}}function aH(t,e){let n;const r=t.httpMethod;if(e===di.EAR){if(n=r||jl.POST,n!==jl.POST)throw Ot(LB)}else n=r||jl.GET;if(t.authorizePostBodyParameters&&n!==jl.POST)throw Ot(FB);return n}/*! @azure/msal-browser v4.25.0 2025-10-09 */class rf extends oH{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||Os(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=_t.getAbsoluteUrl(e.postLogoutRedirectUri,Yo())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=_t.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Yo())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=_t.getAbsoluteUrl(Yo(),Yo())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await ee(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new d3(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}=e;this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:ti.MSAL_SKU,version:mu,cpu:te.EMPTY_STRING,os:te.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),i={interactionType:n},s=tf.setRequestState(this.browserCrypto,e&&e.state||te.EMPTY_STRING,i),a={...await ee(Jx,F.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:s,nonce:e.nonce||Os(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c={...a,httpMethod:aH(a,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return c;const l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Sre(t,e){if(!e)return null;try{return tf.parseRequestState(t,e).libraryState.meta}catch{throw ae(vh)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Fp(t,e,n){const r=Mw(t);if(!r)throw jB(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),_e(v3)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),_e(y3));return r}function bre(t,e,n){if(!t.state)throw _e(Lx);const r=Sre(e,t.state);if(!r)throw _e(w3);if(r.interactionType!==n)throw _e(_3)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class cH{constructor(e,n,r,i,s){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=i,this.performanceClient=s}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(F.HandleCodeResponse,n.correlationId);let r;try{r=gne(e,n.state)}catch(i){throw i instanceof Vu&&i.subError===Om?_e(Om):i}return ee(this.handleCodeResponseFromServer.bind(this),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(F.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await ee(this.authModule.updateAuthority.bind(this.authModule),F.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const s=this.createCcsCredentials(n);s&&(this.authCodeRequest.ccsCredential=s)}return await ee(this.authModule.acquireToken.bind(this.authModule),F.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Cs.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Cs.UPN}:null}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Ire="ContentError",Are="PageException",lH="user_switch";/*! @azure/msal-browser v4.25.0 2025-10-09 */const kre="USER_INTERACTION_REQUIRED",xre="USER_CANCEL",Rre="NO_NETWORK",Pre="DISABLED",Nre="ACCOUNT_UNAVAILABLE",Ore="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Mre=-2147186943,Dre={[lH]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class to extends Pt{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,to.prototype),this.name="NativeAuthError",this.ext=r}}function ad(t){if(t.ext&&t.ext.status&&t.ext.status===Pre||t.ext&&t.ext.error&&t.ext.error===Mre)return!0;switch(t.errorCode){case Ire:case Are:return!0;default:return!1}}function qw(t,e,n){if(n&&n.status)switch(n.status){case Nre:return Hw(c3);case kre:return new Ns(t,e);case xre:return _e(Om);case Rre:return _e(zw);case Ore:return Hw(xx)}return new to(t,Dre[t]||e,n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class uH extends rf{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(Rt.acquireTokenSilent_silentFlow),r=await ee(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new fne(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const o=(await ee(i.acquireCachedToken.bind(i),F.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),o}catch(s){throw s instanceof xg&&s.errorCode===Fx&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n==null?void 0:n.account)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Nv extends oH{constructor(e,n,r,i,s,o,a,c,l,u,d,h){super(e,n,r,i,s,o,c,l,h),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=d,this.silentCacheClient=new uH(e,this.nativeStorageManager,r,i,s,o,c,l,h);const m=this.platformAuthProvider.getExtensionName();this.skus=Nm.makeExtraSkuString({libraryName:ti.MSAL_SKU,libraryVersion:mu,extensionName:m,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[kte]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(F.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(F.NativeInteractionClientAcquireToken,this.correlationId),i=fi(),s=this.initializeServerTelemetryManager(this.apiId);try{const o=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,o);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(n===Or.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const a=await this.platformAuthProvider.sendMessage(o);return await this.handleNativeResponse(a,o,i).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),s.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(o){throw o instanceof to&&s.setNativeBrokerErrorCode(o.errorCode),r.end({success:!1}),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Vn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ae(NI);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw ae(NI);try{const i=this.createSilentCacheRequest(n,r),s=await this.silentCacheClient.acquireToken(i),o={...r,idTokenClaims:s==null?void 0:s.idTokenClaims,idToken:s==null?void 0:s.idToken};return{...s,account:o}}catch(i){throw i}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const i=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(i)}catch(a){if(a instanceof to&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),ad(a)))throw a}this.browserStorage.setTemporaryCache(Cn.NATIVE_REQUEST,JSON.stringify(i),!0);const s={apiId:Rt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(o,s)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:i,...s}=r;i&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cn.NATIVE_REQUEST));const o=fi();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const a=await this.platformAuthProvider.sendMessage(s),c=await this.handleNativeResponse(a,s,o);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),c}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var u,d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=ef(e.id_token,ks),s=this.createHomeAccountIdentifier(e,i),o=(u=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId))==null?void 0:u.homeAccountId;if((d=n.extraParameters)!=null&&d.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==o&&e.account.id!==n.accountId)throw qw(lH);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=Rx(this.browserStorage,a,s,ks,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const l=await this.generateAuthenticationResult(e,n,i,c,a.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId),await this.cacheNativeTokens(e,n,s,i,e.access_token,l.tenantId,r),l}createHomeAccountIdentifier(e,n){return Ps.generateHomeAccountId(e.client_info||te.EMPTY_STRING,ys.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?Vn.fromString(n):Vn.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===At.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new wh(this.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw ae(ix);return r.signPopToken(e.access_token,n.keyId,i)}else return e.access_token}async generateAuthenticationResult(e,n,r,i,s,o){const a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(n.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||te.EMPTY_STRING,d=l.TenantId||r.tid||te.EMPTY_STRING,h=fx(i.getAccountInfo(),void 0,r,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const m=await this.generatePopAccessToken(e,n),w=n.tokenType===At.POP?At.POP:At.BEARER;return{authority:s,uniqueId:u,tenantId:d,scopes:c.asArray(),account:h,idToken:e.id_token,idTokenClaims:r,accessToken:m,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:Bd(o+e.expires_in),tokenType:w,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,i,s,o,a){const c=LT(r,n.authority,e.id_token||"",n.clientId,i.tid||""),l=n.tokenType===At.POP?te.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,d=this.generateScopes(e.scope,n.scope),h=FT(r,n.authority,s,n.clientId,i.tid||o,d.printScopes(),u,0,ks,void 0,n.tokenType,void 0,n.keyId),m={idToken:c,accessToken:h};return this.nativeStorageManager.saveCacheRecord(m,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===At.POP?te.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...i}=e,s=new Vn(r||[]);s.appendScopes(Zh);const o={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(o.signPopToken&&e.popKid)throw _e(B3);if(this.handleExtraBrokerParams(o),o.extraParameters=o.extraParameters||{},o.extraParameters.telemetry=Wi.MATS_TELEMETRY,e.authenticationScheme===At.POP){const a={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},c=new wh(this.browserCrypto);let l;if(o.keyId)l=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:o.keyId})),o.signPopToken=!1;else{const u=await ee(c.generateCnf.bind(c),F.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(a,this.logger);l=u.reqCnfString,o.keyId=u.kid,o.signPopToken=!0}o.reqCnf=l}return this.addRequestSKUs(o),o}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new _t(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case Rt.ssoSilent:case Rt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),cr.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case cr.NONE:case cr.CONSENT:case cr.LOGIN:case cr.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),_e(U3)}}handleExtraBrokerParams(e){var s;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Vw)&&e.extraParameters.hasOwnProperty(jw)&&e.extraParameters.hasOwnProperty(fu);if(!e.embeddedClientId&&!n)return;let r="";const i=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[jw],r=e.extraParameters[fu]),e.extraParameters={child_client_id:r,child_redirect_uri:i},(s=this.performanceClient)==null||s.addFields({embeddedClientId:r,embeddedRedirectUri:i},this.correlationId)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function Zx(t,e,n,r,i){const s=mne({...t.auth,authority:e},n,r,i);if(Cx(s,{sku:ti.MSAL_SKU,version:mu,os:"",cpu:""}),t.auth.protocolMode!==di.OIDC&&Ex(s,t.telemetry.application),n.platformBroker&&(Nte(s),i.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===At.POP)){const o=new da(r,i),a=new wh(o);let c;n.popKid?c=o.encodeKid(n.popKid):c=(await ee(a.generateCnf.bind(a),F.PopTokenGenerateCnf,r,i,n.correlationId)(n,r)).reqCnfString,bx(s,c)}return OT(s,n.correlationId,i),s}async function eR(t,e,n,r,i){if(!n.codeChallenge)throw Ot(lx);const s=await ee(Zx,F.GetStandardParams,r,i,n.correlationId)(t,e,n,r,i);return gx(s,X0.CODE),QB(s,n.codeChallenge,te.S256_CODE_CHALLENGE_METHOD),Ac(s,n.extraQueryParameters||{}),Px(e,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function tR(t,e,n,r,i,s){if(!r.earJwk)throw _e(Dx);const o=await Zx(e,n,r,i,s);gx(o,X0.IDTOKEN_TOKEN_REFRESHTOKEN),Hte(o,r.earJwk);const a=new Map;Ac(a,r.extraQueryParameters||{});const c=Px(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return dH(t,c,o)}async function nR(t,e,n,r,i,s){const o=await Zx(e,n,r,i,s);gx(o,X0.CODE),QB(o,r.codeChallenge,r.codeChallengeMethod||te.S256_CODE_CHALLENGE_METHOD),zte(o,r.authorizePostBodyParameters||{});const a=new Map;Ac(a,r.extraQueryParameters||{});const c=Px(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return dH(t,c,o)}function dH(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((i,s)=>{const o=t.createElement("input");o.hidden=!0,o.name=s,o.value=i,r.appendChild(o)}),t.body.appendChild(r),r}async function hH(t,e,n,r,i,s,o,a,c,l){if(a.verbose("Account id found, calling WAM for token"),!l)throw _e(jx);const u=new da(a,c),d=new Nv(r,i,u,a,o,r.system.navigationClient,n,c,l,e,s,t.correlationId),{userRequestState:h}=tf.parseRequestState(u,t.state);return ee(d.acquireToken.bind(d),F.NativeInteractionClientAcquireToken,a,c,t.correlationId)({...t,state:h,prompt:void 0})}async function Gw(t,e,n,r,i,s,o,a,c,l,u,d){if(eo.removeThrottle(o,i.auth.clientId,t),e.accountId)return ee(hH,F.HandleResponsePlatformBroker,l,u,t.correlationId)(t,e.accountId,r,i,o,a,c,l,u,d);const h={...t,code:e.code||"",codeVerifier:n},m=new cH(s,o,h,l,u);return await ee(m.handleCodeResponse.bind(m),F.HandleCodeResponse,l,u,t.correlationId)(e,t)}async function rR(t,e,n,r,i,s,o,a,c,l,u){if(eo.removeThrottle(s,r.auth.clientId,t),h3(e,t.state),!e.ear_jwe)throw _e(g3);if(!t.earJwk)throw _e(Dx);const d=JSON.parse(await ee(Hne,F.DecryptEarResponse,c,l,t.correlationId)(t.earJwk,e.ear_jwe));if(d.accountId)return ee(hH,F.HandleResponsePlatformBroker,c,l,t.correlationId)(t,d.accountId,n,r,s,o,a,c,l,u);const h=new pu(r.auth.clientId,s,new da(c,l),c,null,null,l);h.validateTokenResponse(d);const m={code:"",state:t.state,nonce:t.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await ee(h.handleServerTokenResponse.bind(h),F.HandleServerTokenResponse,c,l,t.correlationId)(d,i,fi(),t,m,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Lre=32;async function KT(t,e,n){t.addQueueMeasurement(F.GeneratePkceCodes,n);const r=Ri(Fre,F.GenerateCodeVerifier,e,t,n)(t,e,n),i=await ee(Vre,F.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:i}}function Fre(t,e,n){try{const r=new Uint8Array(Lre);return Ri(Vne,F.GetRandomValues,e,t,n)(r),jc(r)}catch{throw _e(Mx)}}async function Vre(t,e,n,r){e.addQueueMeasurement(F.GenerateCodeChallengeFromVerifier,r);try{const i=await ee(Q3,F.Sha256Digest,n,e,r)(t,e,r);return jc(new Uint8Array(i))}catch{throw _e(Mx)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Qw{constructor(e,n,r,i){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=i,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(F.NativeMessageHandlerHandshake),this.platformAuthType=Wi.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:Gf.GetToken,request:e},r={channel:Wi.CHANNEL_ID,extensionId:this.extensionId,responseId:Os(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const i=await new Promise((o,a)=>{this.resolvers.set(r.responseId,{resolve:o,reject:a})});return this.validatePlatformBrokerResponse(i)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const i=new Qw(e,n,r,Wi.PREFERRED_EXTENSION_ID);return await i.sendHandshakeRequest(),i}catch{const s=new Qw(e,n,r);return await s.sendHandshakeRequest(),s}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Wi.CHANNEL_ID,extensionId:this.extensionId,responseId:Os(),body:{method:Gf.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(_e(V3)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==Wi.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===Gf.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(_e(j3))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),i=this.handshakeResolvers.get(n.responseId);try{const s=n.body.method;if(s===Gf.Response){if(!r)return;const o=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(o)}`),o.status!=="Success")r.reject(qw(o.code,o.description,o.ext));else if(o.result)o.result.code&&o.result.description?r.reject(qw(o.result.code,o.result.description,o.result.ext)):r.resolve(o.result);else throw xI(Nw,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(s===Gf.HandshakeResponse){if(!i){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),i.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(s){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${s}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(s):i&&i.reject(s)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw xI(Nw,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===Wi.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class iR{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=Wi.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){var i;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(i=window.navigator)!=null&&i.platformAuthentication){const s=await window.navigator.platformAuthentication.getSupportedContracts(Wi.MICROSOFT_ENTRA_BROKERID);if(s!=null&&s.includes(Wi.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new iR(e,n,r)}}getExtensionId(){return Wi.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Wi.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:i,scope:s,redirectUri:o,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:d,...h}=e,m=this.getDOMExtraParams(h);return{accountId:n,brokerId:this.getExtensionId(),authority:i,clientId:r,correlationId:a||this.correlationId,extraParameters:{...d,...m},isSecurityTokenService:!1,redirectUri:o,scope:s,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),qw(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw xI(Nw,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((i,[s,o])=>(i[s]=String(o),i),{})}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function jre(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const i=Ure();t.trace("Has client allowed platform auth via DOM API: "+i);let s;try{i&&(s=await iR.createProvider(t,e,n)),s||(t.trace("Platform auth via DOM API not available, checking for extension"),s=await Qw.createProvider(t,r||iH,e))}catch(o){t.trace("Platform auth not available",o)}return s}function Ure(){let t;try{return t=window[jn.SessionStorage],(t==null?void 0:t.getItem(sre))==="true"}catch{return!1}}function Dm(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case At.BEARER:case At.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.25.0 2025-10-09 */class $re extends rf{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=s}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Zh,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const s={...e,httpMethod:aH(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(s,r,n)}}catch(i){return Promise.reject(i)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},i=e&&e.authority,s=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,i,s)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,i,s))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const i=await ee(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,je.Popup);n.popup&&rH(i.authority);const s=Dm(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return i.platformBroker=s,this.config.auth.protocolMode===di.EAR?this.executeEarFlow(i,n):this.executeCodeFlow(i,n,r)}async executeCodeFlow(e,n,r){var c;const i=e.correlationId,s=this.initializeServerTelemetryManager(Rt.acquireTokenPopup),o=r||await ee(KT,F.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),a={...e,codeChallenge:o.challenge};try{const l=await ee(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i)({serverTelemetryManager:s,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===jl.POST)return await this.executeCodeFlowWithPost(a,n,l,o.verifier);{const u=await ee(eR,F.GetAuthCodeUrl,this.logger,this.performanceClient,i)(this.config,l.authority,a,this.logger,this.performanceClient),d=this.initiateAuthRequest(u,n);this.eventHandler.emitEvent(De.POPUP_OPENED,je.Popup,{popupWindow:d},null);const h=await this.monitorPopupForHash(d,n.popupWindowParent),m=Ri(Fp,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await ee(Gw,F.HandleResponseCode,this.logger,this.performanceClient,i)(e,m,o.verifier,Rt.acquireTokenPopup,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(l){throw(c=n.popup)==null||c.close(),l instanceof Pt&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),l}}async executeEarFlow(e,n){const r=e.correlationId,i=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await ee(zx,F.GenerateEarKey,this.logger,this.performanceClient,r)(),o={...e,earJwk:s},a=n.popup||this.openPopup("about:blank",n);(await tR(a.document,this.config,i,o,this.logger,this.performanceClient)).submit();const l=await ee(this.monitorPopupForHash.bind(this),F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,n.popupWindowParent),u=Ri(Fp,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return ee(rR,F.HandleResponseEar,this.logger,this.performanceClient,r)(o,u,Rt.acquireTokenPopup,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,i){const s=e.correlationId,o=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,s)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=n.popup||this.openPopup("about:blank",n);(await nR(a.document,this.config,o,e,this.logger,this.performanceClient)).submit();const l=await ee(this.monitorPopupForHash.bind(this),F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(a,n.popupWindowParent),u=Ri(Fp,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return ee(Gw,F.HandleResponseCode,this.logger,this.performanceClient,s)(e,u,i,Rt.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,i){var o,a,c;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(De.LOGOUT_START,je.Popup,e);const s=this.initializeServerTelemetryManager(Rt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const l=await ee(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0});try{l.authority.endSessionEndpoint}catch{if((o=e.account)!=null&&o.homeAccountId&&e.postLogoutRedirectUri&&l.authority.protocolMode===di.OIDC){if(this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,je.Popup,e),i){const h={apiId:Rt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=_t.getAbsoluteUrl(i,Yo());await this.navigationClient.navigateInternal(m,h)}(a=n.popup)==null||a.close();return}}const u=l.getLogoutUri(e);this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,je.Popup,e);const d=this.openPopup(u,n);if(this.eventHandler.emitEvent(De.POPUP_OPENED,je.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,n.popupWindowParent).catch(()=>{}),i){const h={apiId:Rt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=_t.getAbsoluteUrl(i,Yo());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${m}`),await this.navigationClient.navigateInternal(m,h)}else this.logger.verbose("No main window navigation requested")}catch(l){throw(c=n.popup)==null||c.close(),l instanceof Pt&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),this.eventHandler.emitEvent(De.LOGOUT_FAILURE,je.Popup,null,l),this.eventHandler.emitEvent(De.LOGOUT_END,je.Popup),l}this.eventHandler.emitEvent(De.LOGOUT_END,je.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),_e($T)}monitorPopupForHash(e,n){return new Promise((r,i)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const s=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(s),i(_e(Om));return}let o="";try{o=e.location.href}catch{}if(!o||o==="about:blank")return;clearInterval(s);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===PT.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw _e(E3);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),_e(C3)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:i}){var m,w,y,_;const s=i.screenLeft?i.screenLeft:i.screenX,o=i.screenTop?i.screenTop:i.screenY,a=i.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=i.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=(m=r.popupSize)==null?void 0:m.width,u=(w=r.popupSize)==null?void 0:w.height,d=(y=r.popupPosition)==null?void 0:y.top,h=(_=r.popupPosition)==null?void 0:_.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=ti.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=ti.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-ti.POPUP_HEIGHT/2+o)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-ti.POPUP_WIDTH/2+s)),i.open(e,n,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${ti.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${ti.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Bre(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class Hre extends rf{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.nativeStorage=c}async acquireToken(e){const n=await ee(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,je.Redirect);n.platformBroker=Dm(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=s=>{s.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(De.RESTORE_FROM_BFCACHE,je.Redirect))},i=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${i}`),this.browserStorage.setTemporaryCache(Cn.ORIGIN_URI,i,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===di.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(s){throw s instanceof Pt&&s.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),s}}async executeCodeFlow(e,n){const r=e.correlationId,i=this.initializeServerTelemetryManager(Rt.acquireTokenRedirect),s=await ee(KT,F.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),o={...e,codeChallenge:s.challenge};this.browserStorage.cacheAuthorizeRequest(o,s.verifier);try{if(o.httpMethod===jl.POST)return await this.executeCodeFlowWithPost(o);{const a=await ee(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=await ee(eR,F.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,o,this.logger,this.performanceClient);return await this.initiateAuthRequest(c,n)}}catch(a){throw a instanceof Pt&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}}async executeEarFlow(e){const n=e.correlationId,r=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await ee(zx,F.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i};return this.browserStorage.cacheAuthorizeRequest(s),(await tR(document,this.config,r,s,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(_e(Ww,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await nR(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((s,o)=>{setTimeout(()=>{o(_e(Ww,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,i){const s=this.initializeServerTelemetryManager(Rt.handleRedirectPromise);try{const[o,a]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Bre()!=="back_forward"?i.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(Cn.ORIGIN_URI,!0)||te.EMPTY_STRING,l=aD(c),u=aD(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&Wne(c),await this.handleResponse(o,n,r,s);if(this.config.auth.navigateToLoginRequestUrl){if(!Gx()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Cn.URL_HASH,a,!0);const d={apiId:Rt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let h=!0;if(!c||c==="null"){const m=qne();this.browserStorage.setTemporaryCache(Cn.ORIGIN_URI,m,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),h=await this.navigationClient.navigateInternal(m,d)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),h=await this.navigationClient.navigateInternal(c,d);if(!h)return await this.handleResponse(o,n,r,s)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,n,r,s);return null}catch(o){throw o instanceof Pt&&(o.setCorrelationId(this.correlationId),s.cacheFailedRequest(o)),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===PT.QUERY?n=window.location.search:n=window.location.hash);let r=Mw(n);if(r){try{bre(r,this.browserCrypto,je.Redirect)}catch(s){return s instanceof Pt&&this.logger.error(`Interaction type validation failed due to ${s.errorCode}: ${s.errorMessage}`),[null,""]}return eH(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const i=this.browserStorage.getTemporaryCache(Cn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cn.URL_HASH)),i&&(r=Mw(i),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,i]):[null,""]}async handleResponse(e,n,r,i){if(!e.state)throw _e(Lx);if(e.ear_jwe){const a=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return ee(rR,F.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,Rt.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await ee(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:n.authority});return ee(Gw,F.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,Rt.acquireTokenRedirect,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Rt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=n||this.config.auth.onRedirectNavigate;if(typeof i=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),i(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),_e($T)}async logout(e){var i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Rt.logout);try{this.eventHandler.emitEvent(De.LOGOUT_START,je.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const s={apiId:Rt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await ee(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===di.OIDC)try{o.authority.endSessionEndpoint}catch{if((i=n.account)!=null&&i.homeAccountId){this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,je.Redirect,n);return}}const a=o.getLogoutUri(n);if(this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,je.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(a)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ja.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ja.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}}catch(s){throw s instanceof Pt&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(De.LOGOUT_FAILURE,je.Redirect,null,s),this.eventHandler.emitEvent(De.LOGOUT_END,je.Redirect),s}this.eventHandler.emitEvent(De.LOGOUT_END,je.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return _t.getAbsoluteUrl(n,Yo())}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function zre(t,e,n,r,i){if(e.addQueueMeasurement(F.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),_e($T);return i?ee(qre,F.SilentHandlerLoadFrame,n,e,r)(t,i,e,r):Ri(Gre,F.SilentHandlerLoadFrameSync,n,e,r)(t)}async function Wre(t,e,n,r,i){const s=qT();if(!s.contentDocument)throw"No document associated with iframe!";return(await nR(s.contentDocument,t,e,n,r,i)).submit(),s}async function Kre(t,e,n,r,i){const s=qT();if(!s.contentDocument)throw"No document associated with iframe!";return(await tR(s.contentDocument,t,e,n,r,i)).submit(),s}async function FD(t,e,n,r,i,s,o){return r.addQueueMeasurement(F.SilentHandlerMonitorIframeForHash,s),new Promise((a,c)=>{e<$I&&i.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${$I}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(_e(S3))},e),u=window.setInterval(()=>{let d="";const h=t.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||d==="about:blank")return;let m="";h&&(o===PT.QUERY?m=h.location.search:m=h.location.hash),window.clearTimeout(l),window.clearInterval(u),a(m)},n)}).finally(()=>{Ri(Qre,F.RemoveHiddenIframe,i,r,s)(t)})}function qre(t,e,n,r){return n.addQueueMeasurement(F.SilentHandlerLoadFrame,r),new Promise((i,s)=>{const o=qT();window.setTimeout(()=>{if(!o){s("Unable to load iframe");return}o.src=t,i(o)},e)})}function Gre(t){const e=qT();return e.src=t,e}function qT(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function Qre(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Yre extends rf{constructor(e,n,r,i,s,o,a,c,l,u,d){super(e,n,r,i,s,o,c,u,d),this.apiId=a,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==cr.NONE&&n.prompt!==cr.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${cr.NONE}`),n.prompt=cr.NONE):n.prompt=cr.NONE;const r=await ee(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,je.Silent);return r.platformBroker=Dm(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),rH(r.authority),this.config.auth.protocolMode===di.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await ee(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await ee(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(i){if(i instanceof Pt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),!n||!(i instanceof Pt)||i.errorCode!==ti.INVALID_GRANT_ERROR)throw i;return this.performanceClient.addFields({retryError:i.errorCode},this.correlationId),await ee(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await ee(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await ee(zx,F.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i},o=await ee(Kre,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,s,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=await ee(FD,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,a),l=Ri(Fp,F.DeserializeResponse,this.logger,this.performanceClient,n)(c,a,this.logger);return ee(rR,F.HandleResponseEar,this.logger,this.performanceClient,n)(s,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(_e(BT))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(F.SilentIframeClientTokenHelper,r);const i=await ee(KT,F.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s={...n,codeChallenge:i.challenge};let o;if(n.httpMethod===jl.POST)o=await ee(Wre,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);else{const u=await ee(eR,F.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);o=await ee(zre,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const a=this.config.auth.OIDCOptions.serverResponseType,c=await ee(FD,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=Ri(Fp,F.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return ee(Gw,F.HandleResponseCode,this.logger,this.performanceClient,r)(n,l,i.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Xre extends rf{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentRefreshClientAcquireToken,e.correlationId);const n=await ee(Jx,F.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const i=this.initializeServerTelemetryManager(Rt.acquireTokenSilent_silentFlow),s=await this.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return ee(s.acquireTokenByRefreshToken.bind(s),F.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(o=>{throw o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o),o})}logout(){return Promise.reject(_e(BT))}async createRefreshTokenClient(e){const n=await ee(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new hne(n,this.performanceClient)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Jre{constructor(e,n,r,i){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=i}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw _e(HT);const i=e.correlationId||Os(),s=n.id_token?ef(n.id_token,ks):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Tr(Tr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||Os()):void 0,c=await this.loadAccount(e,r.clientInfo||n.client_info||"",i,s,a),l=await this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,i),u=await this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,i),d=await this.loadRefreshToken(n,c.homeAccountId,c.environment,i);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},s,a)}async loadAccount(e,n,r,i,s){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=Ps.createFromAccountInfo(e.account);return await this.storage.setAccount(l,r),l}else if(!s||!n&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),_e(O3);const o=Ps.generateHomeAccountId(n,s.authorityType,this.logger,this.cryptoObj,i),a=i==null?void 0:i.tid,c=Rx(this.storage,s,o,ks,r,i,n,s.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r),c}async loadIdToken(e,n,r,i,s){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=LT(n,r,e.id_token,this.config.auth.clientId,i);return await this.storage.setIdTokenCredential(o,s),o}async loadAccessToken(e,n,r,i,s,o,a){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?Vn.fromString(n.scope):new Vn(e.scopes),l=o.expiresOn||n.expires_in+fi(),u=o.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+fi(),d=FT(r,i,n.access_token,this.config.auth.clientId,s,c.printScopes(),l,u,ks);return await this.storage.setAccessTokenCredential(d,a),d}async loadRefreshToken(e,n,r,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const s=i3(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(s,i),s}generateAuthenticationResult(e,n,r,i){var u,d,h;let s="",o=[],a=null,c;n!=null&&n.accessToken&&(s=n.accessToken.secret,o=Vn.fromString(n.accessToken.target).asArray(),a=Bd(n.accessToken.expiresOn),c=Bd(n.accessToken.extendedExpiresOn));const l=n.account;return{authority:i?i.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:o,account:l.getAccountInfo(),idToken:((u=n.idToken)==null?void 0:u.secret)||"",idTokenClaims:r||{},accessToken:s,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((d=n.refreshToken)==null?void 0:d.familyId)||"",tokenType:((h=n==null?void 0:n.accessToken)==null?void 0:h.tokenType)||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Zre extends d3{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class eie extends rf{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,c,l,u),this.apiId=a}async acquireToken(e){if(!e.code)throw _e(M3);const n=await ee(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,je.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const i={...n,code:e.code},s=await ee(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),o=new Zre(s);this.logger.verbose("Auth code client created");const a=new cH(o,this.browserStorage,i,this.logger,this.performanceClient);return await ee(a.handleCodeResponseFromServer.bind(a),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(i){throw i instanceof Pt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}}logout(){return Promise.reject(_e(BT))}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function tie(t,e,n){var o;const r=((o=window.msal)==null?void 0:o.clientIds)||[],i=r.length,s=r.filter(a=>a===t).length;s>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:i,sameClientIdInstanceCount:s})}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Gy(t,e,n){try{Qx(t)}catch(r){throw e.end({success:!1},r,n),r}}class GT{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new da(this.logger,this.performanceClient):Ow,this.eventHandler=new Cre(this.logger),this.browserStorage=this.isBrowserEnvironment?new WI(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,rne(this.config.auth)):fre(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:jn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:jn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new WI(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Jre(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new GT(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(De.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),i=this.config.system.allowPlatformBroker,s=this.performanceClient.startMeasurement(F.InitializeClientApplication,r);if(this.eventHandler.emitEvent(De.INITIALIZE_START),!n)try{this.logMultipleInstances(s)}catch{}if(await ee(this.browserStorage.initialize.bind(this.browserStorage),F.InitializeCache,this.logger,this.performanceClient,r)(r),i)try{this.platformAuthProvider=await jre(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ri(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),F.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(De.INITIALIZE_END),s.end({allowPlatformBroker:i,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),nH(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var c;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((c=this.browserStorage.getInteractionInProgress())==null?void 0:c.type)===Ja.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),s=i&&this.platformAuthProvider&&!e;let o;this.eventHandler.emitEvent(De.HANDLE_REDIRECT_START,je.Redirect);let a;try{if(s&&this.platformAuthProvider){o=this.performanceClient.startMeasurement(F.AcquireTokenRedirect,(i==null?void 0:i.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),o.add({isPlatformBrokerRequest:!0});const l=new Nv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,i.accountId,this.nativeInternalStorage,i.correlationId);a=ee(l.handleRedirectPromise.bind(l),F.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(this.performanceClient,o.event.correlationId)}else{const[l,u]=this.browserStorage.getCachedRequest(),d=l.correlationId;o=this.performanceClient.startMeasurement(F.AcquireTokenRedirect,d),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const h=this.createRedirectClient(d);a=ee(h.handleRedirectPromise.bind(h),F.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(e,l,u,o)}}catch(l){throw this.browserStorage.resetRequestCache(),l}return a.then(l=>(l?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(De.LOGIN_SUCCESS,je.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_SUCCESS,je.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),o.end({success:!0},void 0,l.account)):o.event.errorCode?o.end({success:!1},void 0):o.discard(),this.eventHandler.emitEvent(De.HANDLE_REDIRECT_END,je.Redirect),l)).catch(l=>{this.browserStorage.resetRequestCache();const u=l;throw r.length>0?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,je.Redirect,null,u):this.eventHandler.emitEvent(De.LOGIN_FAILURE,je.Redirect,null,u),this.eventHandler.emitEvent(De.HANDLE_REDIRECT_END,je.Redirect),o.end({success:!1},u),l})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(F.AcquireTokenPreRedirect,n);r.add({scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=o=>{const a=typeof i=="function"?i(o):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,a};else{const o=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof o=="function"?o(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,c}}const s=this.getAllAccounts().length>0;try{AD(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ja.SIGNIN),s?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_START,je.Redirect,e):this.eventHandler.emitEvent(De.LOGIN_START,je.Redirect,e);let o;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?o=new Nv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof to&&ad(c))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof Ns)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw c}):o=this.createRedirectClient(n).acquireToken(e),await o}catch(o){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(F.AcquireTokenRedirect,n).end({success:!1},o,e.account):r.end({success:!1},o,e.account),s?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,je.Redirect,null,o):this.eventHandler.emitEvent(De.LOGIN_FAILURE,je.Redirect,null,o),o}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(F.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",n),Gy(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,Ja.SIGNIN)}catch(a){return Promise.reject(a)}const i=this.getAllAccounts();i.length>0?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_START,je.Popup,e):this.eventHandler.emitEvent(De.LOGIN_START,je.Popup,e);let s;const o=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative({...e,correlationId:n},Rt.acquireTokenPopup).then(a=>(r.end({success:!0},void 0,a.account),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof to&&ad(a))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,o);if(a instanceof Ns)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,o);throw a})):s=this.createPopupClient(n).acquireToken(e,o),s.then(a=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent(De.LOGIN_SUCCESS,je.Popup,a):this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_SUCCESS,je.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>(i.length>0?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,je.Popup,null,a):this.eventHandler.emitEvent(De.LOGIN_FAILURE,je.Popup,null,a),r.end({success:!1},a,e.account),Promise.reject(a))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var s,o,a;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(F.SsoSilent,n),(s=this.ssoSilentMeasurement)==null||s.add({scenarioId:e.scenarioId}),Gy(this.initialized,this.ssoSilentMeasurement,e.account),(o=this.ssoSilentMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(De.SSO_SILENT_START,je.Silent,r);let i;return this.canUsePlatformBroker(r)?((a=this.ssoSilentMeasurement)==null||a.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(r,Rt.ssoSilent).catch(c=>{var l;if((l=this.ssoSilentMeasurement)==null||l.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof to&&ad(c))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c})):i=this.createSilentIframeClient(r.correlationId).acquireToken(r),i.then(c=>{var l;return this.eventHandler.emitEvent(De.SSO_SILENT_SUCCESS,je.Silent,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c}).catch(c=>{var l;throw this.eventHandler.emitEvent(De.SSO_SILENT_FAILURE,je.Silent,null,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!1},c,e.account),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(F.AcquireTokenByCode,n);Gy(this.initialized,r),this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_START,je.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw _e(L3);if(e.code){const i=e.code;let s=this.hybridAuthCodeResponses.get(i);return s?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),s=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(o=>(this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_SUCCESS,je.Silent,o),this.hybridAuthCodeResponses.delete(i),r.end({success:!0,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length},void 0,o.account),o)).catch(o=>{throw this.hybridAuthCodeResponses.delete(i),this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_FAILURE,je.Silent,null,o),r.end({success:!1},o),o}),this.hybridAuthCodeResponses.set(i,s)),await s}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const i=await this.acquireTokenNative({...e,correlationId:n},Rt.acquireTokenByCode,e.nativeAccountId).catch(s=>{throw s instanceof to&&ad(s)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s});return r.end({success:!0},void 0,i.account),i}else throw _e(F3);else throw _e(D3)}catch(i){throw this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_FAILURE,je.Silent,null,i),r.end({success:!1},i),i}}async acquireTokenByCodeAsync(e){var i;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(F.AcquireTokenByCodeAsync,e.correlationId),(i=this.acquireTokenByCodeAsyncMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(s=>{var o;return(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!0,fromCache:s.fromCache}),s}).catch(s=>{var o;throw(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenFromCache,e.correlationId),n){case Or.Default:case Or.AccessToken:case Or.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return ee(r.acquireToken.bind(r),F.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ae(Ic)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenByRefreshToken,e.correlationId),n){case Or.Default:case Or.AccessTokenAndRefreshToken:case Or.RefreshToken:case Or.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return ee(r.acquireToken.bind(r),F.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ae(Ic)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(F.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return ee(n.acquireToken.bind(n),F.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return AD(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ja.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return Qx(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ja.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return pre(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return mre(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return gre(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return yre(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return vre(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();wre(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return _re(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=Ps.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,i){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw _e(jx);return new Nv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,i)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Dm(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case cr.NONE:case cr.CONSENT:case cr.LOGIN:case cr.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new $re(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new Hre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new Yre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new uH(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new Xre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new eie(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return tH(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==jn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==jn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Os():te.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||CD})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||CD})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(F.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Gy(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",n);const i=e.account||this.getActiveAccount();if(!i)throw _e(k3);return this.acquireTokenSilentDeduped(e,i,n).then(s=>(r.end({success:!0,fromCache:s.fromCache,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),{...s,state:e.state,correlationId:n})).catch(s=>{throw s instanceof Pt&&s.setCorrelationId(n),r.end({success:!1},s,i),s})}async acquireTokenSilentDeduped(e,n,r){const i=VT(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},n.homeAccountId),s=JSON.stringify(i),o=this.activeSilentTokenRequests.get(s);if(typeof o>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const a=ee(this.acquireTokenSilentAsync.bind(this),F.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(s,a),a.finally(()=>{this.activeSilentTokenRequests.delete(s)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),o}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(F.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_START,je.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const i=await ee(Ere,F.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),s=e.cacheLookupPolicy||Or.Default;return this.acquireTokenSilentNoIframe(i,s).catch(async a=>{if(nie(a,s))if(this.activeIframeRequest)if(s!==Or.Skip){const[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,i.correlationId);const d=this.performanceClient.startMeasurement(F.AwaitConcurrentIframe,i.correlationId);d.add({awaitIframeCorrelationId:u});const h=await l;if(d.end({success:h}),h)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,i.correlationId),this.acquireTokenSilentNoIframe(i,s);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),ee(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),i.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),ee(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_SUCCESS,je.Silent,a),this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,je.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return Dm(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Rt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof to&&ad(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ae(Ic)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===Or.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),ee(this.acquireTokenFromCache.bind(this),F.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Or.AccessToken)throw r;return this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_NETWORK_START,je.Silent,e),ee(this.acquireTokenByRefreshToken.bind(this),F.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await ee(KT,F.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),tie(n,e,this.logger)}}function nie(t,e){const n=!(t instanceof Ns&&t.subError!==UT),r=t.errorCode===ti.INVALID_GRANT_ERROR||t.errorCode===Ic,i=n&&r||t.errorCode===Bw||t.errorCode===kx,s=Pne.includes(e);return i&&s}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function rie(t,e){const n=new gu(t);return await n.initialize(),GT.createController(n,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class sR{static async createPublicClientApplication(e){const n=await rie(e);return new sR(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new GT(new gu(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const iie={auth:{clientId:"34cf9dc4-f837-4136-98c1-f66e913b4f95",authority:"https://login.microsoftonline.com/common",redirectUri:"https://zp1v56uxy8rdx5ypatb0ockcb9tr6a-oci3--8080--96435430.local-credentialless.webcontainer-api.io"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},cd=new sR(iie),wS={scopes:["User.Read","Notes.Read"]},sie=()=>{cd.initialize()},IMe=async()=>{try{const t=cd.getAllAccounts()[0];if(t){const n={...wS,account:t};return(await cd.acquireTokenSilent(n)).accessToken}const e=await cd.loginPopup(wS);return cd.setActiveAccount(e.account),e.accessToken}catch(t){if(console.error("MSAL login or token acquisition failed:",t),t.name==="InteractionRequiredAuthError")return(await cd.acquireTokenPopup(wS)).accessToken;throw t}},oie=1,aie=1e6;let _S=0;function cie(){return _S=(_S+1)%Number.MAX_SAFE_INTEGER,_S.toString()}const TS=new Map,VD=t=>{if(TS.has(t))return;const e=setTimeout(()=>{TS.delete(t),Vp({type:"REMOVE_TOAST",toastId:t})},aie);TS.set(t,e)},lie=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,oie)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?VD(n):t.toasts.forEach(r=>{VD(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ov=[];let Mv={toasts:[]};function Vp(t){Mv=lie(Mv,t),Ov.forEach(e=>{e(Mv)})}function uie({...t}){const e=cie(),n=i=>Vp({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Vp({type:"DISMISS_TOAST",toastId:e});return Vp({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Aa(){const[t,e]=g.useState(Mv);return g.useEffect(()=>(Ov.push(e),()=>{const n=Ov.indexOf(e);n>-1&&Ov.splice(n,1)}),[t]),{...t,toast:uie,dismiss:n=>Vp({type:"DISMISS_TOAST",toastId:n})}}function we(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function jD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function QT(...t){return e=>{let n=!1;const r=t.map(i=>{const s=jD(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():jD(t[i],null)}}}}function Ct(...t){return g.useCallback(QT(...t),t)}function die(t,e){const n=g.createContext(e),r=s=>{const{children:o,...a}=s,c=g.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function qr(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),c=n.length;n=[...n,o];const l=d=>{var v;const{scope:h,children:m,...w}=d,y=((v=h==null?void 0:h[t])==null?void 0:v[c])||a,_=g.useMemo(()=>w,Object.values(w));return p.jsx(y.Provider,{value:_,children:m})};l.displayName=s+"Provider";function u(d,h){var y;const m=((y=h==null?void 0:h[t])==null?void 0:y[c])||a,w=g.useContext(m);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const c=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,hie(i,...e)]}function hie(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(s)[`__scope${l}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function yu(t){const e=fie(t),n=g.forwardRef((r,i)=>{const{children:s,...o}=r,a=g.Children.toArray(s),c=a.find(mie);if(c){const l=c.props.children,u=a.map(d=>d===c?g.Children.count(l)>1?g.Children.only(null):g.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...o,ref:i,children:g.isValidElement(l)?g.cloneElement(l,void 0,u):null})}return p.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var fH=yu("Slot");function fie(t){const e=g.forwardRef((n,r)=>{const{children:i,...s}=n;if(g.isValidElement(i)){const o=yie(i),a=gie(s,i.props);return i.type!==g.Fragment&&(a.ref=r?QT(r,o):o),g.cloneElement(i,a)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pH=Symbol("radix.slottable");function pie(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=pH,e}function mie(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pH}function gie(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function yie(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function oR(t){const e=t+"CollectionProvider",[n,r]=qr(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:_,children:v}=y,T=Q.useRef(null),C=Q.useRef(new Map).current;return p.jsx(i,{scope:_,itemMap:C,collectionRef:T,children:v})};o.displayName=e;const a=t+"CollectionSlot",c=yu(a),l=Q.forwardRef((y,_)=>{const{scope:v,children:T}=y,C=s(a,v),I=Ct(_,C.collectionRef);return p.jsx(c,{ref:I,children:T})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=yu(u),m=Q.forwardRef((y,_)=>{const{scope:v,children:T,...C}=y,I=Q.useRef(null),x=Ct(_,I),D=s(u,v);return Q.useEffect(()=>(D.itemMap.set(I,{ref:I,...C}),()=>void D.itemMap.delete(I))),p.jsx(h,{[d]:"",ref:x,children:T})});m.displayName=u;function w(y){const _=s(t+"CollectionConsumer",y);return Q.useCallback(()=>{const T=_.collectionRef.current;if(!T)return[];const C=Array.from(T.querySelectorAll(`[${d}]`));return Array.from(_.itemMap.values()).sort((D,A)=>C.indexOf(D.ref.current)-C.indexOf(A.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:l,ItemSlot:m},w,r]}var vie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fe=vie.reduce((t,e)=>{const n=yu(`Primitive.${e}`),r=g.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function aR(t,e){t&&Ag.flushSync(()=>t.dispatchEvent(e))}function wn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function wie(t,e=globalThis==null?void 0:globalThis.document){const n=wn(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var _ie="DismissableLayer",KI="dismissableLayer.update",Tie="dismissableLayer.pointerDownOutside",Cie="dismissableLayer.focusOutside",UD,mH=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sf=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,l=g.useContext(mH),[u,d]=g.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),w=Ct(e,A=>d(A)),y=Array.from(l.layers),[_]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(_),T=u?y.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,I=T>=v,x=Sie(A=>{const S=A.target,k=[...l.branches].some(N=>N.contains(S));!I||k||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},h),D=bie(A=>{const S=A.target;[...l.branches].some(N=>N.contains(S))||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},h);return wie(A=>{T===l.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},h),g.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(UD=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),$D(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=UD)}},[u,h,n,l]),g.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),$D())},[u,l]),g.useEffect(()=>{const A=()=>m({});return document.addEventListener(KI,A),()=>document.removeEventListener(KI,A)},[]),p.jsx(Fe.div,{...c,ref:w,style:{pointerEvents:C?I?"auto":"none":void 0,...t.style},onFocusCapture:we(t.onFocusCapture,D.onFocusCapture),onBlurCapture:we(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:we(t.onPointerDownCapture,x.onPointerDownCapture)})});sf.displayName=_ie;var Eie="DismissableLayerBranch",gH=g.forwardRef((t,e)=>{const n=g.useContext(mH),r=g.useRef(null),i=Ct(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Fe.div,{...t,ref:i})});gH.displayName=Eie;function Sie(t,e=globalThis==null?void 0:globalThis.document){const n=wn(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){yH(Tie,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function bie(t,e=globalThis==null?void 0:globalThis.document){const n=wn(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&yH(Cie,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $D(){const t=new CustomEvent(KI);document.dispatchEvent(t)}function yH(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?aR(i,s):i.dispatchEvent(s)}var Iie=sf,Aie=gH,pi=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},kie="Portal",Rg=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=g.useState(!1);pi(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?K$.createPortal(p.jsx(Fe.div,{...r,ref:e}),o):null});Rg.displayName=kie;function xie(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var $n=t=>{const{present:e,children:n}=t,r=Rie(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=Ct(r.ref,Pie(i));return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};$n.displayName="Presence";function Rie(t){const[e,n]=g.useState(),r=g.useRef(null),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,c]=xie(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const l=Qy(r.current);s.current=a==="mounted"?l:"none"},[a]),pi(()=>{const l=r.current,u=i.current;if(u!==t){const h=s.current,m=Qy(l);t?c("MOUNT"):m==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),pi(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,d=m=>{const y=Qy(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},h=m=>{m.target===e&&(s.current=Qy(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function Qy(t){return(t==null?void 0:t.animationName)||"none"}function Pie(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Nie=r0[" useInsertionEffect ".trim().toString()]||pi;function ka({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=Oie({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const u=g.useRef(t!==void 0);g.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const l=g.useCallback(u=>{var d;if(a){const h=Mie(u)?u(t):u;h!==t&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,t,s,o]);return[c,l]}function Oie({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),i=g.useRef(n),s=g.useRef(e);return Nie(()=>{s.current=e},[e]),g.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function Mie(t){return typeof t=="function"}var Die=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Lie="VisuallyHidden",YT=g.forwardRef((t,e)=>p.jsx(Fe.span,{...t,ref:e,style:{...Die,...t.style}}));YT.displayName=Lie;var Fie=YT,cR="ToastProvider",[lR,Vie,jie]=oR("Toast"),[vH]=qr("Toast",[jie]),[Uie,XT]=vH(cR),wH=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,c]=g.useState(null),[l,u]=g.useState(0),d=g.useRef(!1),h=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${cR}\`. Expected non-empty \`string\`.`),p.jsx(lR.Provider,{scope:e,children:p.jsx(Uie,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:a,onViewportChange:c,onToastAdd:g.useCallback(()=>u(m=>m+1),[]),onToastRemove:g.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};wH.displayName=cR;var _H="ToastViewport",$ie=["F8"],qI="toast.viewportPause",GI="toast.viewportResume",TH=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=$ie,label:i="Notifications ({hotkey})",...s}=t,o=XT(_H,n),a=Vie(n),c=g.useRef(null),l=g.useRef(null),u=g.useRef(null),d=g.useRef(null),h=Ct(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;g.useEffect(()=>{const _=v=>{var C;r.length!==0&&r.every(I=>v[I]||v.code===I)&&((C=d.current)==null||C.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),g.useEffect(()=>{const _=c.current,v=d.current;if(w&&_&&v){const T=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(qI);v.dispatchEvent(D),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(GI);v.dispatchEvent(D),o.isClosePausedRef.current=!1}},I=D=>{!_.contains(D.relatedTarget)&&C()},x=()=>{_.contains(document.activeElement)||C()};return _.addEventListener("focusin",T),_.addEventListener("focusout",I),_.addEventListener("pointermove",T),_.addEventListener("pointerleave",x),window.addEventListener("blur",T),window.addEventListener("focus",C),()=>{_.removeEventListener("focusin",T),_.removeEventListener("focusout",I),_.removeEventListener("pointermove",T),_.removeEventListener("pointerleave",x),window.removeEventListener("blur",T),window.removeEventListener("focus",C)}}},[w,o.isClosePausedRef]);const y=g.useCallback(({tabbingDirection:_})=>{const T=a().map(C=>{const I=C.ref.current,x=[I,...ese(I)];return _==="forwards"?x:x.reverse()});return(_==="forwards"?T.reverse():T).flat()},[a]);return g.useEffect(()=>{const _=d.current;if(_){const v=T=>{var x,D,A;const C=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!C){const S=document.activeElement,k=T.shiftKey;if(T.target===_&&k){(x=l.current)==null||x.focus();return}const O=y({tabbingDirection:k?"backwards":"forwards"}),P=O.findIndex($=>$===S);CS(O.slice(P+1))?T.preventDefault():k?(D=l.current)==null||D.focus():(A=u.current)==null||A.focus()}};return _.addEventListener("keydown",v),()=>_.removeEventListener("keydown",v)}},[a,y]),p.jsxs(Aie,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&p.jsx(QI,{ref:l,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"forwards"});CS(_)}}),p.jsx(lR.Slot,{scope:n,children:p.jsx(Fe.ol,{tabIndex:-1,...s,ref:h})}),w&&p.jsx(QI,{ref:u,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"backwards"});CS(_)}})]})});TH.displayName=_H;var CH="ToastFocusProxy",QI=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=XT(CH,n);return p.jsx(YT,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var l;const a=o.relatedTarget;!((l=s.viewport)!=null&&l.contains(a))&&r()}})});QI.displayName=CH;var Pg="Toast",Bie="toast.swipeStart",Hie="toast.swipeMove",zie="toast.swipeCancel",Wie="toast.swipeEnd",EH=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,c]=ka({prop:r,defaultProp:i??!0,onChange:s,caller:Pg});return p.jsx($n,{present:n||a,children:p.jsx(Gie,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:wn(t.onPause),onResume:wn(t.onResume),onSwipeStart:we(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:we(t.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:we(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:we(t.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});EH.displayName=Pg;var[Kie,qie]=vH(Pg,{onClose(){}}),Gie=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...w}=t,y=XT(Pg,n),[_,v]=g.useState(null),T=Ct(e,$=>v($)),C=g.useRef(null),I=g.useRef(null),x=i||y.duration,D=g.useRef(0),A=g.useRef(x),S=g.useRef(0),{onToastAdd:k,onToastRemove:N}=y,R=wn(()=>{var H;(_==null?void 0:_.contains(document.activeElement))&&((H=y.viewport)==null||H.focus()),o()}),O=g.useCallback($=>{!$||$===1/0||(window.clearTimeout(S.current),D.current=new Date().getTime(),S.current=window.setTimeout(R,$))},[R]);g.useEffect(()=>{const $=y.viewport;if($){const H=()=>{O(A.current),l==null||l()},X=()=>{const se=new Date().getTime()-D.current;A.current=A.current-se,window.clearTimeout(S.current),c==null||c()};return $.addEventListener(qI,X),$.addEventListener(GI,H),()=>{$.removeEventListener(qI,X),$.removeEventListener(GI,H)}}},[y.viewport,x,c,l,O]),g.useEffect(()=>{s&&!y.isClosePausedRef.current&&O(x)},[s,x,y.isClosePausedRef,O]),g.useEffect(()=>(k(),()=>N()),[k,N]);const P=g.useMemo(()=>_?RH(_):null,[_]);return y.viewport?p.jsxs(p.Fragment,{children:[P&&p.jsx(Qie,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:P}),p.jsx(Kie,{scope:n,onClose:R,children:Ag.createPortal(p.jsx(lR.ItemSlot,{scope:n,children:p.jsx(Iie,{asChild:!0,onEscapeKeyDown:we(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||R(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Fe.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...w,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:we(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:we(t.onPointerDown,$=>{$.button===0&&(C.current={x:$.clientX,y:$.clientY})}),onPointerMove:we(t.onPointerMove,$=>{if(!C.current)return;const H=$.clientX-C.current.x,X=$.clientY-C.current.y,se=!!I.current,V=["left","right"].includes(y.swipeDirection),j=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,ie=V?j(0,H):0,Te=V?0:j(0,X),ve=$.pointerType==="touch"?10:2,z={x:ie,y:Te},J={originalEvent:$,delta:z};se?(I.current=z,Yy(Hie,d,J,{discrete:!1})):BD(z,y.swipeDirection,ve)?(I.current=z,Yy(Bie,u,J,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(H)>ve||Math.abs(X)>ve)&&(C.current=null)}),onPointerUp:we(t.onPointerUp,$=>{const H=I.current,X=$.target;if(X.hasPointerCapture($.pointerId)&&X.releasePointerCapture($.pointerId),I.current=null,C.current=null,H){const se=$.currentTarget,V={originalEvent:$,delta:H};BD(H,y.swipeDirection,y.swipeThreshold)?Yy(Wie,m,V,{discrete:!0}):Yy(zie,h,V,{discrete:!0}),se.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),Qie=t=>{const{__scopeToast:e,children:n,...r}=t,i=XT(Pg,e),[s,o]=g.useState(!1),[a,c]=g.useState(!1);return Jie(()=>o(!0)),g.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),a?null:p.jsx(Rg,{asChild:!0,children:p.jsx(YT,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},Yie="ToastTitle",SH=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Fe.div,{...r,ref:e})});SH.displayName=Yie;var Xie="ToastDescription",bH=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Fe.div,{...r,ref:e})});bH.displayName=Xie;var IH="ToastAction",AH=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(xH,{altText:n,asChild:!0,children:p.jsx(uR,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${IH}\`. Expected non-empty \`string\`.`),null)});AH.displayName=IH;var kH="ToastClose",uR=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=qie(kH,n);return p.jsx(xH,{asChild:!0,children:p.jsx(Fe.button,{type:"button",...r,ref:e,onClick:we(t.onClick,i.onClose)})})});uR.displayName=kH;var xH=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(Fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function RH(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Zie(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...RH(r))}}),e}function Yy(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?aR(i,s):i.dispatchEvent(s)}var BD=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Jie(t=()=>{}){const e=wn(t);pi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Zie(t){return t.nodeType===t.ELEMENT_NODE}function ese(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function CS(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var tse=wH,PH=TH,NH=EH,OH=SH,MH=bH,DH=AH,LH=uR;function FH(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=FH(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function VH(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=FH(t))&&(r&&(r+=" "),r+=e);return r}const HD=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zD=VH,Ng=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return zD(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],d=s==null?void 0:s[l];if(u===null)return null;const h=HD(u)||HD(d);return i[l][h]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,h]=u;return h===void 0||(l[d]=h),l},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(w=>{let[y,_]=w;return Array.isArray(_)?_.includes({...s,...a}[y]):{...s,...a}[y]===_})?[...l,d,h]:l},[]);return zD(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rse=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),WD=t=>{const e=rse(t);return e.charAt(0).toUpperCase()+e.slice(1)},jH=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),ise=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>g.createElement("svg",{ref:c,...sse,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jH("lucide",i),...!s&&!ise(a)&&{"aria-hidden":"true"},...a},[...o.map(([l,u])=>g.createElement(l,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=g.forwardRef(({className:r,...i},s)=>g.createElement(ose,{ref:s,iconNode:e,className:jH(`lucide-${nse(WD(t))}`,`lucide-${t}`,r),...i}));return n.displayName=WD(t),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cse=ze("arrow-left",ase);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],KD=ze("bell",lse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],UH=ze("calendar",use);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],YI=ze("chart-column",dse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],fse=ze("check-check",hse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dR=ze("check",pse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$H=ze("chevron-right",mse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],BH=ze("chrome",gse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vse=ze("circle-check-big",yse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_se=ze("circle",wse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],HH=ze("clock",Tse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Ese=ze("cloud-off",Cse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],bse=ze("command",Sse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ase=ze("dollar-sign",Ise);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],xse=ze("dot",kse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Pse=ze("file-text",Rse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ose=ze("list",Nse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xc=ze("loader-circle",Mse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Lse=ze("log-out",Dse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fse=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qD=ze("mail",Fse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],jse=ze("maximize",Vse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],zH=ze("menu",Use);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Bse=ze("message-square",$se);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],WH=ze("mic",Hse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],Wse=ze("minimize",zse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],qse=ze("notebook-text",Kse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Yw=ze("pause",Gse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],hR=ze("phone",Qse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"M2 10h6V4",key:"zwrco"}],["path",{d:"m2 4 6 6",key:"ug085t"}],["path",{d:"M21 10V7a2 2 0 0 0-2-2h-7",key:"git5jr"}],["path",{d:"M3 14v2a2 2 0 0 0 2 2h3",key:"1f7fh3"}],["rect",{x:"12",y:"14",width:"10",height:"7",rx:"1",key:"1wjs3o"}]],KH=ze("picture-in-picture",Yse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Xw=ze("play",Xse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zse=ze("plus",Jse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eoe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qH=ze("refresh-cw",eoe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],noe=ze("rotate-ccw",toe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const roe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],GD=ze("search",roe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],soe=ze("settings",ioe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=[["path",{d:"M13 21h6a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6",key:"14qz4y"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],aoe=ze("square-arrow-out-down-left",ooe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vu=ze("square-check-big",coe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],GH=ze("square",loe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],QH=ze("timer",uoe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hoe=ze("trash-2",doe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jp=ze("triangle-alert",foe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fR=ze("user",poe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],YH=ze("users",moe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yoe=ze("wifi-off",goe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],woe=ze("wifi",voe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Toe=ze("wrench",_oe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],of=ze("x",Coe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Soe=ze("zap",Eoe),pR="-",boe=t=>{const e=Aoe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(pR);return a[0]===""&&a.length!==1&&a.shift(),XH(a,e)||Ioe(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},XH=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?XH(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(pR);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},QD=/^\[(.+)\]$/,Ioe=t=>{if(QD.test(t)){const e=QD.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Aoe=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return xoe(Object.entries(t.classGroups),n).forEach(([s,o])=>{XI(o,r,s,e)}),r},XI=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:YD(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(koe(i)){XI(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{XI(o,YD(e,s),n,r)})})},YD=(t,e)=>{let n=t;return e.split(pR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},koe=t=>t.isThemeGetter,xoe=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Roe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},JH="!",Poe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let l=0,u=0,d;for(let _=0;_<a.length;_++){let v=a[_];if(l===0){if(v===i&&(r||a.slice(_,_+s)===e)){c.push(a.slice(u,_)),u=_+s;continue}if(v==="/"){d=_;continue}}v==="["?l++:v==="]"&&l--}const h=c.length===0?a:a.substring(u),m=h.startsWith(JH),w=m?h.substring(1):h,y=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},Noe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Ooe=t=>({cache:Roe(t.cacheSize),parseClassName:Poe(t),...boe(t)}),Moe=/\s+/,Doe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(Moe);let a="";for(let c=o.length-1;c>=0;c-=1){const l=o[c],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(l);let w=!!m,y=r(w?h.substring(0,m):h);if(!y){if(!w){a=l+(a.length>0?" "+a:a);continue}if(y=r(h),!y){a=l+(a.length>0?" "+a:a);continue}w=!1}const _=Noe(u).join(":"),v=d?_+JH:_,T=v+y;if(s.includes(T))continue;s.push(T);const C=i(y,w);for(let I=0;I<C.length;++I){const x=C[I];s.push(v+x)}a=l+(a.length>0?" "+a:a)}return a};function Loe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ZH(e))&&(r&&(r+=" "),r+=n);return r}const ZH=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ZH(t[r]))&&(n&&(n+=" "),n+=e);return n};function Foe(t,...e){let n,r,i,s=o;function o(c){const l=e.reduce((u,d)=>d(u),t());return n=Ooe(l),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=Doe(c,n);return i(c,u),u}return function(){return s(Loe.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},e5=/^\[(?:([a-z-]+):)?(.+)\]$/i,Voe=/^\d+\/\d+$/,joe=new Set(["px","full","screen"]),Uoe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$oe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Boe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hoe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zoe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lo=t=>Hd(t)||joe.has(t)||Voe.test(t),ja=t=>af(t,"length",Joe),Hd=t=>!!t&&!Number.isNaN(Number(t)),ES=t=>af(t,"number",Hd),Qf=t=>!!t&&Number.isInteger(Number(t)),Woe=t=>t.endsWith("%")&&Hd(t.slice(0,-1)),tt=t=>e5.test(t),Ua=t=>Uoe.test(t),Koe=new Set(["length","size","percentage"]),qoe=t=>af(t,Koe,t5),Goe=t=>af(t,"position",t5),Qoe=new Set(["image","url"]),Yoe=t=>af(t,Qoe,eae),Xoe=t=>af(t,"",Zoe),Yf=()=>!0,af=(t,e,n)=>{const r=e5.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Joe=t=>$oe.test(t)&&!Boe.test(t),t5=()=>!1,Zoe=t=>Hoe.test(t),eae=t=>zoe.test(t),tae=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),i=Ut("borderColor"),s=Ut("borderRadius"),o=Ut("borderSpacing"),a=Ut("borderWidth"),c=Ut("contrast"),l=Ut("grayscale"),u=Ut("hueRotate"),d=Ut("invert"),h=Ut("gap"),m=Ut("gradientColorStops"),w=Ut("gradientColorStopPositions"),y=Ut("inset"),_=Ut("margin"),v=Ut("opacity"),T=Ut("padding"),C=Ut("saturate"),I=Ut("scale"),x=Ut("sepia"),D=Ut("skew"),A=Ut("space"),S=Ut("translate"),k=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",tt,e],O=()=>[tt,e],P=()=>["",Lo,ja],$=()=>["auto",Hd,tt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",tt],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Te=()=>[Hd,tt];return{cacheSize:500,separator:":",theme:{colors:[Yf],spacing:[Lo,ja],blur:["none","",Ua,tt],brightness:Te(),borderColor:[t],borderRadius:["none","","full",Ua,tt],borderSpacing:O(),borderWidth:P(),contrast:Te(),grayscale:j(),hueRotate:Te(),invert:j(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[Woe,ja],inset:R(),margin:R(),opacity:Te(),padding:O(),saturate:Te(),scale:Te(),sepia:j(),skew:Te(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[Ua]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),tt]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qf,tt]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",Qf,tt]}],"grid-cols":[{"grid-cols":[Yf]}],"col-start-end":[{col:["auto",{span:["full",Qf,tt]},tt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Yf]}],"row-start-end":[{row:["auto",{span:[Qf,tt]},tt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[Ua]},Ua]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ua,ja]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ES]}],"font-family":[{font:[Yf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",Hd,ES]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lo,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lo,ja]}],"underline-offset":[{"underline-offset":["auto",Lo,tt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),Goe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qoe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Yoe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:X()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Lo,tt]}],"outline-w":[{outline:[Lo,ja]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Lo,ja]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ua,Xoe]}],"shadow-color":[{shadow:[Yf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ua,tt]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[C]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:Te()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:Te()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Qf,tt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Lo,ja,ES]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nae=Foe(tae);function fe(...t){return nae(VH(t))}const JI="/sounds/iphone_ding.mp3",XD="/sounds/ting.mp3";async function JD(t){try{const e=new Audio(t);e.addEventListener("error",n=>{console.warn(`Sound file not found: ${t}. Skipping audio playback.`)}),await e.play()}catch{console.warn(`Could not play sound: ${t}. This is likely due to missing audio files.`)}}const rae=tse,n5=g.forwardRef(({className:t,...e},n)=>p.jsx(PH,{ref:n,className:fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));n5.displayName=PH.displayName;const iae=Ng("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),r5=g.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(NH,{ref:r,className:fe(iae({variant:e}),t),...n}));r5.displayName=NH.displayName;const sae=g.forwardRef(({className:t,...e},n)=>p.jsx(DH,{ref:n,className:fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));sae.displayName=DH.displayName;const i5=g.forwardRef(({className:t,...e},n)=>p.jsx(LH,{ref:n,className:fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(of,{className:"h-4 w-4"})}));i5.displayName=LH.displayName;const s5=g.forwardRef(({className:t,...e},n)=>p.jsx(OH,{ref:n,className:fe("text-sm font-semibold",t),...e}));s5.displayName=OH.displayName;const o5=g.forwardRef(({className:t,...e},n)=>p.jsx(MH,{ref:n,className:fe("text-sm opacity-90",t),...e}));o5.displayName=MH.displayName;function oae(){const{toasts:t}=Aa();return p.jsxs(rae,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return p.jsxs(r5,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(s5,{children:n}),r&&p.jsx(o5,{children:r})]}),i,p.jsx(i5,{})]},e)}),p.jsx(n5,{})]})}var Jw=["light","dark"],mR="(prefers-color-scheme: dark)",aae=typeof window>"u",gR=g.createContext(void 0),cae={setTheme:t=>{},themes:[]},lae=()=>{var t;return(t=g.useContext(gR))!=null?t:cae},uae=t=>g.useContext(gR)?t.children:g.createElement(hae,{...t}),dae=["light","dark"],hae=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=dae,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:c,children:l,nonce:u})=>{let[d,h]=g.useState(()=>ZD(i,o)),[m,w]=g.useState(()=>ZD(i)),y=c?Object.values(c):s,_=g.useCallback(I=>{let x=I;if(!x)return;I==="system"&&n&&(x=eL());let D=c?c[x]:x,A=e?pae():null,S=document.documentElement;if(a==="class"?(S.classList.remove(...y),D&&S.classList.add(D)):D?S.setAttribute(a,D):S.removeAttribute(a),r){let k=Jw.includes(o)?o:null,N=Jw.includes(x)?x:k;S.style.colorScheme=N}A==null||A()},[]),v=g.useCallback(I=>{let x=typeof I=="function"?I(I):I;h(x);try{localStorage.setItem(i,x)}catch{}},[t]),T=g.useCallback(I=>{let x=eL(I);w(x),d==="system"&&n&&!t&&_("system")},[d,t]);g.useEffect(()=>{let I=window.matchMedia(mR);return I.addListener(T),T(I),()=>I.removeListener(T)},[T]),g.useEffect(()=>{let I=x=>{if(x.key!==i)return;let D=x.newValue||o;v(D)};return window.addEventListener("storage",I),()=>window.removeEventListener("storage",I)},[v]),g.useEffect(()=>{_(t??d)},[t,d]);let C=g.useMemo(()=>({theme:d,setTheme:v,forcedTheme:t,resolvedTheme:d==="system"?m:d,themes:n?[...s,"system"]:s,systemTheme:n?m:void 0}),[d,v,t,m,n,s]);return g.createElement(gR.Provider,{value:C},g.createElement(fae,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:c,children:l,attrs:y,nonce:u}),l)},fae=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:c})=>{let l=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?Jw.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(w,y=!1,_=!0)=>{let v=o?o[w]:w,T=y?w+"|| ''":`'${v}'`,C="";return i&&_&&!y&&Jw.includes(w)&&(C+=`d.style.colorScheme = '${w}';`),n==="class"?y||v?C+=`c.add(${T})`:C+="null":v&&(C+=`d[s](n,${T})`),C},m=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${mR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${l?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})}),ZD=(t,e)=>{if(aae)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},pae=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},eL=t=>(t||(t=window.matchMedia(mR)),t.matches?"dark":"light"),mae=t=>{switch(t){case"success":return vae;case"info":return _ae;case"warning":return wae;case"error":return Tae;default:return null}},gae=Array(12).fill(0),yae=({visible:t,className:e})=>Q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Q.createElement("div",{className:"sonner-spinner"},gae.map((n,r)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),vae=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),wae=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_ae=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Tae=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cae=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Eae=()=>{let[t,e]=Q.useState(document.hidden);return Q.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},ZI=1,Sae=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ZI++,o=this.toasts.find(c=>c.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:a,title:r}):c):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async l=>{if(o=["resolve",l],Q.isValidElement(l))s=!1,this.create({id:r,type:"default",message:l});else if(Iae(l)&&!l.ok){s=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,d=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:r,type:"error",message:u,description:d})}else if(n.success!==void 0){s=!1;let u=typeof n.success=="function"?await n.success(l):n.success,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async l=>{if(o=["reject",l],n.error!==void 0){s=!1;let u=typeof n.error=="function"?await n.error(l):n.error,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var l;s&&(this.dismiss(r),r=void 0),(l=n.finally)==null||l.call(n)}),c=()=>new Promise((l,u)=>a.then(()=>o[0]==="reject"?u(o[1]):l(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||ZI++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jr=new Sae,bae=(t,e)=>{let n=(e==null?void 0:e.id)||ZI++;return Jr.addToast({title:t,...e,id:n}),n},Iae=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Aae=bae,kae=()=>Jr.toasts,xae=()=>Jr.getActiveToasts(),Zu=Object.assign(Aae,{success:Jr.success,info:Jr.info,warning:Jr.warning,error:Jr.error,custom:Jr.custom,message:Jr.message,promise:Jr.promise,dismiss:Jr.dismiss,loading:Jr.loading},{getHistory:kae,getToasts:xae});function Rae(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Rae(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xy(t){return t.label!==void 0}var Pae=3,Nae="32px",Oae="16px",tL=4e3,Mae=356,Dae=14,Lae=20,Fae=200;function us(...t){return t.filter(Boolean).join(" ")}function Vae(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var jae=t=>{var e,n,r,i,s,o,a,c,l,u,d;let{invert:h,toast:m,unstyled:w,interacting:y,setHeights:_,visibleToasts:v,heights:T,index:C,toasts:I,expanded:x,removeToast:D,defaultRichColors:A,closeButton:S,style:k,cancelButtonStyle:N,actionButtonStyle:R,className:O="",descriptionClassName:P="",duration:$,position:H,gap:X,loadingIcon:se,expandByDefault:V,classNames:j,icons:ie,closeButtonAriaLabel:Te="Close toast",pauseWhenPageIsHidden:ve}=t,[z,J]=Q.useState(null),[G,q]=Q.useState(null),[ne,Ce]=Q.useState(!1),[Ne,Le]=Q.useState(!1),[Me,Ze]=Q.useState(!1),[yt,Re]=Q.useState(!1),[Pe,ht]=Q.useState(!1),[nn,rn]=Q.useState(0),[Ve,L]=Q.useState(0),U=Q.useRef(m.duration||$||tL),K=Q.useRef(null),de=Q.useRef(null),le=C===0,oe=C+1<=v,me=m.type,We=m.dismissible!==!1,ft=m.className||"",Nn=m.descriptionClassName||"",gi=Q.useMemo(()=>T.findIndex(Ue=>Ue.toastId===m.id)||0,[T,m.id]),Rr=Q.useMemo(()=>{var Ue;return(Ue=m.closeButton)!=null?Ue:S},[m.closeButton,S]),Oo=Q.useMemo(()=>m.duration||$||tL,[m.duration,$]),pn=Q.useRef(0),Hn=Q.useRef(0),Us=Q.useRef(0),nr=Q.useRef(null),[Gu,Mo]=H.split("-"),kf=Q.useMemo(()=>T.reduce((Ue,St,Mt)=>Mt>=gi?Ue:Ue+St.height,0),[T,gi]),Pa=Eae(),py=m.invert||h,On=me==="loading";Hn.current=Q.useMemo(()=>gi*X+kf,[gi,kf]),Q.useEffect(()=>{U.current=Oo},[Oo]),Q.useEffect(()=>{Ce(!0)},[]),Q.useEffect(()=>{let Ue=de.current;if(Ue){let St=Ue.getBoundingClientRect().height;return L(St),_(Mt=>[{toastId:m.id,height:St,position:m.position},...Mt]),()=>_(Mt=>Mt.filter(zn=>zn.toastId!==m.id))}},[_,m.id]),Q.useLayoutEffect(()=>{if(!ne)return;let Ue=de.current,St=Ue.style.height;Ue.style.height="auto";let Mt=Ue.getBoundingClientRect().height;Ue.style.height=St,L(Mt),_(zn=>zn.find(yi=>yi.toastId===m.id)?zn.map(yi=>yi.toastId===m.id?{...yi,height:Mt}:yi):[{toastId:m.id,height:Mt,position:m.position},...zn])},[ne,m.title,m.description,_,m.id]);let as=Q.useCallback(()=>{Le(!0),rn(Hn.current),_(Ue=>Ue.filter(St=>St.toastId!==m.id)),setTimeout(()=>{D(m)},Fae)},[m,D,_,Hn]);Q.useEffect(()=>{if(m.promise&&me==="loading"||m.duration===1/0||m.type==="loading")return;let Ue;return x||y||ve&&Pa?(()=>{if(Us.current<pn.current){let St=new Date().getTime()-pn.current;U.current=U.current-St}Us.current=new Date().getTime()})():U.current!==1/0&&(pn.current=new Date().getTime(),Ue=setTimeout(()=>{var St;(St=m.onAutoClose)==null||St.call(m,m),as()},U.current)),()=>clearTimeout(Ue)},[x,y,m,me,ve,Pa,as]),Q.useEffect(()=>{m.delete&&as()},[as,m.delete]);function ml(){var Ue,St,Mt;return ie!=null&&ie.loading?Q.createElement("div",{className:us(j==null?void 0:j.loader,(Ue=m==null?void 0:m.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":me==="loading"},ie.loading):se?Q.createElement("div",{className:us(j==null?void 0:j.loader,(St=m==null?void 0:m.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":me==="loading"},se):Q.createElement(yae,{className:us(j==null?void 0:j.loader,(Mt=m==null?void 0:m.classNames)==null?void 0:Mt.loader),visible:me==="loading"})}return Q.createElement("li",{tabIndex:0,ref:de,className:us(O,ft,j==null?void 0:j.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[me],(n=m==null?void 0:m.classNames)==null?void 0:n[me]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":ne,"data-promise":!!m.promise,"data-swiped":Pe,"data-removed":Ne,"data-visible":oe,"data-y-position":Gu,"data-x-position":Mo,"data-index":C,"data-front":le,"data-swiping":Me,"data-dismissible":We,"data-type":me,"data-invert":py,"data-swipe-out":yt,"data-swipe-direction":G,"data-expanded":!!(x||V&&ne),style:{"--index":C,"--toasts-before":C,"--z-index":I.length-C,"--offset":`${Ne?nn:Hn.current}px`,"--initial-height":V?"auto":`${Ve}px`,...k,...m.style},onDragEnd:()=>{Ze(!1),J(null),nr.current=null},onPointerDown:Ue=>{On||!We||(K.current=new Date,rn(Hn.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(Ze(!0),nr.current={x:Ue.clientX,y:Ue.clientY}))},onPointerUp:()=>{var Ue,St,Mt,zn;if(yt||!We)return;nr.current=null;let yi=Number(((Ue=de.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$s=Number(((St=de.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Vi=new Date().getTime()-((Mt=K.current)==null?void 0:Mt.getTime()),Yr=z==="x"?yi:$s,cs=Math.abs(Yr)/Vi;if(Math.abs(Yr)>=Lae||cs>.11){rn(Hn.current),(zn=m.onDismiss)==null||zn.call(m,m),q(z==="x"?yi>0?"right":"left":$s>0?"down":"up"),as(),Re(!0),ht(!1);return}Ze(!1),J(null)},onPointerMove:Ue=>{var St,Mt,zn,yi;if(!nr.current||!We||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;let $s=Ue.clientY-nr.current.y,Vi=Ue.clientX-nr.current.x,Yr=(Mt=t.swipeDirections)!=null?Mt:Vae(H);!z&&(Math.abs(Vi)>1||Math.abs($s)>1)&&J(Math.abs(Vi)>Math.abs($s)?"x":"y");let cs={x:0,y:0};z==="y"?(Yr.includes("top")||Yr.includes("bottom"))&&(Yr.includes("top")&&$s<0||Yr.includes("bottom")&&$s>0)&&(cs.y=$s):z==="x"&&(Yr.includes("left")||Yr.includes("right"))&&(Yr.includes("left")&&Vi<0||Yr.includes("right")&&Vi>0)&&(cs.x=Vi),(Math.abs(cs.x)>0||Math.abs(cs.y)>0)&&ht(!0),(zn=de.current)==null||zn.style.setProperty("--swipe-amount-x",`${cs.x}px`),(yi=de.current)==null||yi.style.setProperty("--swipe-amount-y",`${cs.y}px`)}},Rr&&!m.jsx?Q.createElement("button",{"aria-label":Te,"data-disabled":On,"data-close-button":!0,onClick:On||!We?()=>{}:()=>{var Ue;as(),(Ue=m.onDismiss)==null||Ue.call(m,m)},className:us(j==null?void 0:j.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=ie==null?void 0:ie.close)!=null?s:Cae):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Q.createElement(Q.Fragment,null,me||m.icon||m.promise?Q.createElement("div",{"data-icon":"",className:us(j==null?void 0:j.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ml():null,m.type!=="loading"?m.icon||(ie==null?void 0:ie[me])||mae(me):null):null,Q.createElement("div",{"data-content":"",className:us(j==null?void 0:j.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Q.createElement("div",{"data-title":"",className:us(j==null?void 0:j.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Q.createElement("div",{"data-description":"",className:us(P,Nn,j==null?void 0:j.description,(l=m==null?void 0:m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&Xy(m.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:Ue=>{var St,Mt;Xy(m.cancel)&&We&&((Mt=(St=m.cancel).onClick)==null||Mt.call(St,Ue),as())},className:us(j==null?void 0:j.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&Xy(m.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||R,onClick:Ue=>{var St,Mt;Xy(m.action)&&((Mt=(St=m.action).onClick)==null||Mt.call(St,Ue),!Ue.defaultPrevented&&as())},className:us(j==null?void 0:j.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function nL(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Uae(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?Oae:Nae;function c(l){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof l=="number"?`${l}px`:l})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(l=>{r[l]===void 0?n[`${o}-${l}`]=a:n[`${o}-${l}`]=typeof r[l]=="number"?`${r[l]}px`:r[l]}):c(a)}),n}var $ae=g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:c,mobileOffset:l,theme:u="light",richColors:d,duration:h,style:m,visibleToasts:w=Pae,toastOptions:y,dir:_=nL(),gap:v=Dae,loadingIcon:T,icons:C,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:x}=t,[D,A]=Q.useState([]),S=Q.useMemo(()=>Array.from(new Set([r].concat(D.filter(ve=>ve.position).map(ve=>ve.position)))),[D,r]),[k,N]=Q.useState([]),[R,O]=Q.useState(!1),[P,$]=Q.useState(!1),[H,X]=Q.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),se=Q.useRef(null),V=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=Q.useRef(null),ie=Q.useRef(!1),Te=Q.useCallback(ve=>{A(z=>{var J;return(J=z.find(G=>G.id===ve.id))!=null&&J.delete||Jr.dismiss(ve.id),z.filter(({id:G})=>G!==ve.id)})},[]);return Q.useEffect(()=>Jr.subscribe(ve=>{if(ve.dismiss){A(z=>z.map(J=>J.id===ve.id?{...J,delete:!0}:J));return}setTimeout(()=>{K$.flushSync(()=>{A(z=>{let J=z.findIndex(G=>G.id===ve.id);return J!==-1?[...z.slice(0,J),{...z[J],...ve},...z.slice(J+1)]:[ve,...z]})})})}),[]),Q.useEffect(()=>{if(u!=="system"){X(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X("dark"):X("light")),typeof window>"u")return;let ve=window.matchMedia("(prefers-color-scheme: dark)");try{ve.addEventListener("change",({matches:z})=>{X(z?"dark":"light")})}catch{ve.addListener(({matches:J})=>{try{X(J?"dark":"light")}catch(G){console.error(G)}})}},[u]),Q.useEffect(()=>{D.length<=1&&O(!1)},[D]),Q.useEffect(()=>{let ve=z=>{var J,G;i.every(q=>z[q]||z.code===q)&&(O(!0),(J=se.current)==null||J.focus()),z.code==="Escape"&&(document.activeElement===se.current||(G=se.current)!=null&&G.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",ve),()=>document.removeEventListener("keydown",ve)},[i]),Q.useEffect(()=>{if(se.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,ie.current=!1)}},[se.current]),Q.createElement("section",{ref:e,"aria-label":`${I} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((ve,z)=>{var J;let[G,q]=ve.split("-");return D.length?Q.createElement("ol",{key:ve,dir:_==="auto"?nL():_,tabIndex:-1,ref:se,className:a,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":G,"data-lifted":R&&D.length>1&&!s,"data-x-position":q,style:{"--front-toast-height":`${((J=k[0])==null?void 0:J.height)||0}px`,"--width":`${Mae}px`,"--gap":`${v}px`,...m,...Uae(c,l)},onBlur:ne=>{ie.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(ie.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,j.current=ne.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{P||O(!1)},onDragEnd:()=>O(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},D.filter(ne=>!ne.position&&z===0||ne.position===ve).map((ne,Ce)=>{var Ne,Le;return Q.createElement(jae,{key:ne.id,icons:C,index:Ce,toast:ne,defaultRichColors:d,duration:(Ne=y==null?void 0:y.duration)!=null?Ne:h,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:w,closeButton:(Le=y==null?void 0:y.closeButton)!=null?Le:o,interacting:P,position:ve,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:Te,toasts:D.filter(Me=>Me.position==ne.position),heights:k.filter(Me=>Me.position==ne.position),setHeights:N,expandByDefault:s,gap:v,loadingIcon:T,expanded:R,pauseWhenPageIsHidden:x,swipeDirections:t.swipeDirections})})):null}))});const Bae=({...t})=>{const{theme:e="system"}=lae();return p.jsx($ae,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Hae=r0[" useId ".trim().toString()]||(()=>{}),zae=0;function ho(t){const[e,n]=g.useState(Hae());return pi(()=>{n(r=>r??String(zae++))},[t]),e?`radix-${e}`:""}const Wae=["top","right","bottom","left"],Uc=Math.min,Ei=Math.max,Zw=Math.round,Jy=Math.floor,fo=t=>({x:t,y:t}),Kae={left:"right",right:"left",bottom:"top",top:"bottom"},qae={start:"end",end:"start"};function eA(t,e,n){return Ei(t,Uc(e,n))}function ha(t,e){return typeof t=="function"?t(e):t}function fa(t){return t.split("-")[0]}function cf(t){return t.split("-")[1]}function yR(t){return t==="x"?"y":"x"}function vR(t){return t==="y"?"height":"width"}const Gae=new Set(["top","bottom"]);function ro(t){return Gae.has(fa(t))?"y":"x"}function wR(t){return yR(ro(t))}function Qae(t,e,n){n===void 0&&(n=!1);const r=cf(t),i=wR(t),s=vR(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=e_(o)),[o,e_(o)]}function Yae(t){const e=e_(t);return[tA(t),e,tA(e)]}function tA(t){return t.replace(/start|end/g,e=>qae[e])}const rL=["left","right"],iL=["right","left"],Xae=["top","bottom"],Jae=["bottom","top"];function Zae(t,e,n){switch(t){case"top":case"bottom":return n?e?iL:rL:e?rL:iL;case"left":case"right":return e?Xae:Jae;default:return[]}}function ece(t,e,n,r){const i=cf(t);let s=Zae(fa(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(tA)))),s}function e_(t){return t.replace(/left|right|bottom|top/g,e=>Kae[e])}function tce(t){return{top:0,right:0,bottom:0,left:0,...t}}function a5(t){return typeof t!="number"?tce(t):{top:t,right:t,bottom:t,left:t}}function t_(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function sL(t,e,n){let{reference:r,floating:i}=t;const s=ro(e),o=wR(e),a=vR(o),c=fa(e),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(cf(e)){case"start":m[o]-=h*(n&&l?-1:1);break;case"end":m[o]+=h*(n&&l?-1:1);break}return m}const nce=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=sL(l,r,c),h=r,m={},w=0;for(let y=0;y<a.length;y++){const{name:_,fn:v}=a[y],{x:T,y:C,data:I,reset:x}=await v({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:l,platform:o,elements:{reference:t,floating:e}});u=T??u,d=C??d,m={...m,[_]:{...m[_],...I}},x&&w<=50&&(w++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):x.rects),{x:u,y:d}=sL(l,h,c)),y=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:m}};async function Lm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=ha(e,t),w=a5(m),_=a[h?d==="floating"?"reference":"floating":d],v=t_(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(_)))==null||n?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),T=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),I=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},x=t_(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:C,strategy:c}):T);return{top:(v.top-x.top+w.top)/I.y,bottom:(x.bottom-v.bottom+w.bottom)/I.y,left:(v.left-x.left+w.left)/I.x,right:(x.right-v.right+w.right)/I.x}}const rce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=ha(t,e)||{};if(l==null)return{};const d=a5(u),h={x:n,y:r},m=wR(i),w=vR(m),y=await o.getDimensions(l),_=m==="y",v=_?"top":"left",T=_?"bottom":"right",C=_?"clientHeight":"clientWidth",I=s.reference[w]+s.reference[m]-h[m]-s.floating[w],x=h[m]-s.reference[m],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=D?D[C]:0;(!A||!await(o.isElement==null?void 0:o.isElement(D)))&&(A=a.floating[C]||s.floating[w]);const S=I/2-x/2,k=A/2-y[w]/2-1,N=Uc(d[v],k),R=Uc(d[T],k),O=N,P=A-y[w]-R,$=A/2-y[w]/2+S,H=eA(O,$,P),X=!c.arrow&&cf(i)!=null&&$!==H&&s.reference[w]/2-($<O?N:R)-y[w]/2<0,se=X?$<O?$-O:$-P:0;return{[m]:h[m]+se,data:{[m]:H,centerOffset:$-H-se,...X&&{alignmentOffset:se}},reset:X}}}),ice=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,..._}=ha(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=fa(i),T=ro(a),C=fa(a)===a,I=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=h||(C||!y?[e_(a)]:Yae(a)),D=w!=="none";!h&&D&&x.push(...ece(a,y,w,I));const A=[a,...x],S=await Lm(e,_),k=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&k.push(S[v]),d){const $=Qae(i,o,I);k.push(S[$[0]],S[$[1]])}if(N=[...N,{placement:i,overflows:k}],!k.every($=>$<=0)){var R,O;const $=(((R=s.flip)==null?void 0:R.index)||0)+1,H=A[$];if(H&&(!(d==="alignment"?T!==ro(H):!1)||N.every(V=>ro(V.placement)===T?V.overflows[0]>0:!0)))return{data:{index:$,overflows:N},reset:{placement:H}};let X=(O=N.filter(se=>se.overflows[0]<=0).sort((se,V)=>se.overflows[1]-V.overflows[1])[0])==null?void 0:O.placement;if(!X)switch(m){case"bestFit":{var P;const se=(P=N.filter(V=>{if(D){const j=ro(V.placement);return j===T||j==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(j=>j>0).reduce((j,ie)=>j+ie,0)]).sort((V,j)=>V[1]-j[1])[0])==null?void 0:P[0];se&&(X=se);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function oL(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function aL(t){return Wae.some(e=>t[e]>=0)}const sce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ha(t,e);switch(r){case"referenceHidden":{const s=await Lm(e,{...i,elementContext:"reference"}),o=oL(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aL(o)}}}case"escaped":{const s=await Lm(e,{...i,altBoundary:!0}),o=oL(s,n.floating);return{data:{escapedOffsets:o,escaped:aL(o)}}}default:return{}}}}},c5=new Set(["left","top"]);async function oce(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fa(n),a=cf(n),c=ro(n)==="y",l=c5.has(o)?-1:1,u=s&&c?-1:1,d=ha(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:w}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof w=="number"&&(m=a==="end"?w*-1:w),c?{x:m*u,y:h*l}:{x:h*l,y:m*u}}const ace=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await oce(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},cce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:v,y:T}=_;return{x:v,y:T}}},...c}=ha(t,e),l={x:n,y:r},u=await Lm(e,c),d=ro(fa(i)),h=yR(d);let m=l[h],w=l[d];if(s){const _=h==="y"?"top":"left",v=h==="y"?"bottom":"right",T=m+u[_],C=m-u[v];m=eA(T,m,C)}if(o){const _=d==="y"?"top":"left",v=d==="y"?"bottom":"right",T=w+u[_],C=w-u[v];w=eA(T,w,C)}const y=a.fn({...e,[h]:m,[d]:w});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:s,[d]:o}}}}}},lce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=ha(t,e),u={x:n,y:r},d=ro(i),h=yR(d);let m=u[h],w=u[d];const y=ha(a,e),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const C=h==="y"?"height":"width",I=s.reference[h]-s.floating[C]+_.mainAxis,x=s.reference[h]+s.reference[C]-_.mainAxis;m<I?m=I:m>x&&(m=x)}if(l){var v,T;const C=h==="y"?"width":"height",I=c5.has(fa(i)),x=s.reference[d]-s.floating[C]+(I&&((v=o.offset)==null?void 0:v[d])||0)+(I?0:_.crossAxis),D=s.reference[d]+s.reference[C]+(I?0:((T=o.offset)==null?void 0:T[d])||0)-(I?_.crossAxis:0);w<x?w=x:w>D&&(w=D)}return{[h]:m,[d]:w}}}},uce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=ha(t,e),u=await Lm(e,l),d=fa(i),h=cf(i),m=ro(i)==="y",{width:w,height:y}=s.floating;let _,v;d==="top"||d==="bottom"?(_=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,_=h==="end"?"top":"bottom");const T=y-u.top-u.bottom,C=w-u.left-u.right,I=Uc(y-u[_],T),x=Uc(w-u[v],C),D=!e.middlewareData.shift;let A=I,S=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=T),D&&!h){const N=Ei(u.left,0),R=Ei(u.right,0),O=Ei(u.top,0),P=Ei(u.bottom,0);m?S=w-2*(N!==0||R!==0?N+R:Ei(u.left,u.right)):A=y-2*(O!==0||P!==0?O+P:Ei(u.top,u.bottom))}await c({...e,availableWidth:S,availableHeight:A});const k=await o.getDimensions(a.floating);return w!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function JT(){return typeof window<"u"}function lf(t){return l5(t)?(t.nodeName||"").toLowerCase():"#document"}function Pi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ro(t){var e;return(e=(l5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function l5(t){return JT()?t instanceof Node||t instanceof Pi(t).Node:!1}function Ms(t){return JT()?t instanceof Element||t instanceof Pi(t).Element:!1}function Eo(t){return JT()?t instanceof HTMLElement||t instanceof Pi(t).HTMLElement:!1}function cL(t){return!JT()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Pi(t).ShadowRoot}const dce=new Set(["inline","contents"]);function Og(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ds(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!dce.has(i)}const hce=new Set(["table","td","th"]);function fce(t){return hce.has(lf(t))}const pce=[":popover-open",":modal"];function ZT(t){return pce.some(e=>{try{return t.matches(e)}catch{return!1}})}const mce=["transform","translate","scale","rotate","perspective"],gce=["transform","translate","scale","rotate","perspective","filter"],yce=["paint","layout","strict","content"];function _R(t){const e=TR(),n=Ms(t)?Ds(t):t;return mce.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||gce.some(r=>(n.willChange||"").includes(r))||yce.some(r=>(n.contain||"").includes(r))}function vce(t){let e=$c(t);for(;Eo(e)&&!_h(e);){if(_R(e))return e;if(ZT(e))return null;e=$c(e)}return null}function TR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wce=new Set(["html","body","#document"]);function _h(t){return wce.has(lf(t))}function Ds(t){return Pi(t).getComputedStyle(t)}function eC(t){return Ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $c(t){if(lf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||cL(t)&&t.host||Ro(t);return cL(e)?e.host:e}function u5(t){const e=$c(t);return _h(e)?t.ownerDocument?t.ownerDocument.body:t.body:Eo(e)&&Og(e)?e:u5(e)}function Fm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=u5(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Pi(i);if(s){const a=nA(o);return e.concat(o,o.visualViewport||[],Og(i)?i:[],a&&n?Fm(a):[])}return e.concat(i,Fm(i,[],n))}function nA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function d5(t){const e=Ds(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Eo(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Zw(n)!==s||Zw(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function CR(t){return Ms(t)?t:t.contextElement}function zd(t){const e=CR(t);if(!Eo(e))return fo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=d5(e);let o=(s?Zw(n.width):n.width)/r,a=(s?Zw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _ce=fo(0);function h5(t){const e=Pi(t);return!TR()||!e.visualViewport?_ce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Tce(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Pi(t)?!1:e}function wu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=CR(t);let o=fo(1);e&&(r?Ms(r)&&(o=zd(r)):o=zd(t));const a=Tce(s,n,r)?h5(s):fo(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=Pi(s),m=r&&Ms(r)?Pi(r):r;let w=h,y=nA(w);for(;y&&r&&m!==w;){const _=zd(y),v=y.getBoundingClientRect(),T=Ds(y),C=v.left+(y.clientLeft+parseFloat(T.paddingLeft))*_.x,I=v.top+(y.clientTop+parseFloat(T.paddingTop))*_.y;c*=_.x,l*=_.y,u*=_.x,d*=_.y,c+=C,l+=I,w=Pi(y),y=nA(w)}}return t_({width:u,height:d,x:c,y:l})}function tC(t,e){const n=eC(t).scrollLeft;return e?e.left+n:wu(Ro(t)).left+n}function f5(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-tC(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Cce(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Ro(r),a=e?ZT(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=fo(1);const u=fo(0),d=Eo(r);if((d||!d&&!s)&&((lf(r)!=="body"||Og(o))&&(c=eC(r)),Eo(r))){const m=wu(r);l=zd(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const h=o&&!d&&!s?f5(o,c):fo(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}}function Ece(t){return Array.from(t.getClientRects())}function Sce(t){const e=Ro(t),n=eC(t),r=t.ownerDocument.body,i=Ei(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ei(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+tC(t);const a=-n.scrollTop;return Ds(r).direction==="rtl"&&(o+=Ei(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const lL=25;function bce(t,e){const n=Pi(t),r=Ro(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const u=TR();(!u||u&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const l=tC(r);if(l<=0){const u=r.ownerDocument,d=u.body,h=getComputedStyle(d),m=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,w=Math.abs(r.clientWidth-d.clientWidth-m);w<=lL&&(s-=w)}else l<=lL&&(s+=l);return{width:s,height:o,x:a,y:c}}const Ice=new Set(["absolute","fixed"]);function Ace(t,e){const n=wu(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Eo(t)?zd(t):fo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function uL(t,e,n){let r;if(e==="viewport")r=bce(t,n);else if(e==="document")r=Sce(Ro(t));else if(Ms(e))r=Ace(e,n);else{const i=h5(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return t_(r)}function p5(t,e){const n=$c(t);return n===e||!Ms(n)||_h(n)?!1:Ds(n).position==="fixed"||p5(n,e)}function kce(t,e){const n=e.get(t);if(n)return n;let r=Fm(t,[],!1).filter(a=>Ms(a)&&lf(a)!=="body"),i=null;const s=Ds(t).position==="fixed";let o=s?$c(t):t;for(;Ms(o)&&!_h(o);){const a=Ds(o),c=_R(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&Ice.has(i.position)||Og(o)&&!c&&p5(t,o))?r=r.filter(u=>u!==o):i=a,o=$c(o)}return e.set(t,r),r}function xce(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?ZT(e)?[]:kce(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=uL(e,u,i);return l.top=Ei(d.top,l.top),l.right=Uc(d.right,l.right),l.bottom=Uc(d.bottom,l.bottom),l.left=Ei(d.left,l.left),l},uL(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Rce(t){const{width:e,height:n}=d5(t);return{width:e,height:n}}function Pce(t,e,n){const r=Eo(e),i=Ro(e),s=n==="fixed",o=wu(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=fo(0);function l(){c.x=tC(i)}if(r||!r&&!s)if((lf(e)!=="body"||Og(i))&&(a=eC(e)),r){const m=wu(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&l();s&&!r&&i&&l();const u=i&&!r&&!s?f5(i,a):fo(0),d=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function SS(t){return Ds(t).position==="static"}function dL(t,e){if(!Eo(t)||Ds(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ro(t)===n&&(n=n.ownerDocument.body),n}function m5(t,e){const n=Pi(t);if(ZT(t))return n;if(!Eo(t)){let i=$c(t);for(;i&&!_h(i);){if(Ms(i)&&!SS(i))return i;i=$c(i)}return n}let r=dL(t,e);for(;r&&fce(r)&&SS(r);)r=dL(r,e);return r&&_h(r)&&SS(r)&&!_R(r)?n:r||vce(t)||n}const Nce=async function(t){const e=this.getOffsetParent||m5,n=this.getDimensions,r=await n(t.floating);return{reference:Pce(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Oce(t){return Ds(t).direction==="rtl"}const Mce={convertOffsetParentRelativeRectToViewportRelativeRect:Cce,getDocumentElement:Ro,getClippingRect:xce,getOffsetParent:m5,getElementRects:Nce,getClientRects:Ece,getDimensions:Rce,getScale:zd,isElement:Ms,isRTL:Oce};function g5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Dce(t,e){let n=null,r;const i=Ro(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=t.getBoundingClientRect(),{left:u,top:d,width:h,height:m}=l;if(a||e(),!h||!m)return;const w=Jy(d),y=Jy(i.clientWidth-(u+h)),_=Jy(i.clientHeight-(d+m)),v=Jy(u),C={rootMargin:-w+"px "+-y+"px "+-_+"px "+-v+"px",threshold:Ei(0,Uc(1,c))||1};let I=!0;function x(D){const A=D[0].intersectionRatio;if(A!==c){if(!I)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!g5(l,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(x,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,C)}n.observe(t)}return o(!0),s}function Lce(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=CR(t),u=i||s?[...l?Fm(l):[],...Fm(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=l&&a?Dce(l,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(v=>{let[T]=v;T&&T.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),n()}),l&&!c&&m.observe(l),m.observe(e));let w,y=c?wu(t):null;c&&_();function _(){const v=wu(t);y&&!g5(y,v)&&n(),y=v,w=requestAnimationFrame(_)}return n(),()=>{var v;u.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),d==null||d(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(w)}}const Fce=ace,Vce=cce,jce=ice,Uce=uce,$ce=sce,hL=rce,Bce=lce,Hce=(t,e,n)=>{const r=new Map,i={platform:Mce,...n},s={...i.platform,_c:r};return nce(t,e,{...i,platform:s})};var zce=typeof document<"u",Wce=function(){},Dv=zce?g.useLayoutEffect:Wce;function n_(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!n_(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!n_(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function y5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fL(t,e){const n=y5(t);return Math.round(e*n)/n}function bS(t){const e=g.useRef(t);return Dv(()=>{e.current=t}),e}function Kce(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=g.useState(r);n_(h,r)||m(r);const[w,y]=g.useState(null),[_,v]=g.useState(null),T=g.useCallback(V=>{V!==D.current&&(D.current=V,y(V))},[]),C=g.useCallback(V=>{V!==A.current&&(A.current=V,v(V))},[]),I=s||w,x=o||_,D=g.useRef(null),A=g.useRef(null),S=g.useRef(u),k=c!=null,N=bS(c),R=bS(i),O=bS(l),P=g.useCallback(()=>{if(!D.current||!A.current)return;const V={placement:e,strategy:n,middleware:h};R.current&&(V.platform=R.current),Hce(D.current,A.current,V).then(j=>{const ie={...j,isPositioned:O.current!==!1};$.current&&!n_(S.current,ie)&&(S.current=ie,Ag.flushSync(()=>{d(ie)}))})},[h,e,n,R,O]);Dv(()=>{l===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[l]);const $=g.useRef(!1);Dv(()=>($.current=!0,()=>{$.current=!1}),[]),Dv(()=>{if(I&&(D.current=I),x&&(A.current=x),I&&x){if(N.current)return N.current(I,x,P);P()}},[I,x,P,N,k]);const H=g.useMemo(()=>({reference:D,floating:A,setReference:T,setFloating:C}),[T,C]),X=g.useMemo(()=>({reference:I,floating:x}),[I,x]),se=g.useMemo(()=>{const V={position:n,left:0,top:0};if(!X.floating)return V;const j=fL(X.floating,u.x),ie=fL(X.floating,u.y);return a?{...V,transform:"translate("+j+"px, "+ie+"px)",...y5(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:ie}},[n,a,X.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:P,refs:H,elements:X,floatingStyles:se}),[u,P,H,X,se])}const qce=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?hL({element:r.current,padding:i}).fn(n):{}:r?hL({element:r,padding:i}).fn(n):{}}}},Gce=(t,e)=>({...Fce(t),options:[t,e]}),Qce=(t,e)=>({...Vce(t),options:[t,e]}),Yce=(t,e)=>({...Bce(t),options:[t,e]}),Xce=(t,e)=>({...jce(t),options:[t,e]}),Jce=(t,e)=>({...Uce(t),options:[t,e]}),Zce=(t,e)=>({...$ce(t),options:[t,e]}),ele=(t,e)=>({...qce(t),options:[t,e]});var tle="Arrow",v5=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(Fe.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});v5.displayName=tle;var nle=v5;function w5(t){const[e,n]=g.useState(void 0);return pi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var ER="Popper",[_5,uf]=qr(ER),[rle,T5]=_5(ER),C5=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return p.jsx(rle,{scope:e,anchor:r,onAnchorChange:i,children:n})};C5.displayName=ER;var E5="PopperAnchor",S5=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=T5(E5,n),o=g.useRef(null),a=Ct(e,o),c=g.useRef(null);return g.useEffect(()=>{const l=c.current;c.current=(r==null?void 0:r.current)||o.current,l!==c.current&&s.onAnchorChange(c.current)}),r?null:p.jsx(Fe.div,{...i,ref:a})});S5.displayName=E5;var SR="PopperContent",[ile,sle]=_5(SR),b5=g.forwardRef((t,e)=>{var ne,Ce,Ne,Le,Me,Ze;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:w,...y}=t,_=T5(SR,n),[v,T]=g.useState(null),C=Ct(e,yt=>T(yt)),[I,x]=g.useState(null),D=w5(I),A=(D==null?void 0:D.width)??0,S=(D==null?void 0:D.height)??0,k=r+(s!=="center"?"-"+s:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(l)?l:[l],O=R.length>0,P={padding:N,boundary:R.filter(ale),altBoundary:O},{refs:$,floatingStyles:H,placement:X,isPositioned:se,middlewareData:V}=Kce({strategy:"fixed",placement:k,whileElementsMounted:(...yt)=>Lce(...yt,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[Gce({mainAxis:i+S,alignmentAxis:o}),c&&Qce({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Yce():void 0,...P}),c&&Xce({...P}),Jce({...P,apply:({elements:yt,rects:Re,availableWidth:Pe,availableHeight:ht})=>{const{width:nn,height:rn}=Re.reference,Ve=yt.floating.style;Ve.setProperty("--radix-popper-available-width",`${Pe}px`),Ve.setProperty("--radix-popper-available-height",`${ht}px`),Ve.setProperty("--radix-popper-anchor-width",`${nn}px`),Ve.setProperty("--radix-popper-anchor-height",`${rn}px`)}}),I&&ele({element:I,padding:a}),cle({arrowWidth:A,arrowHeight:S}),h&&Zce({strategy:"referenceHidden",...P})]}),[j,ie]=k5(X),Te=wn(w);pi(()=>{se&&(Te==null||Te())},[se,Te]);const ve=(ne=V.arrow)==null?void 0:ne.x,z=(Ce=V.arrow)==null?void 0:Ce.y,J=((Ne=V.arrow)==null?void 0:Ne.centerOffset)!==0,[G,q]=g.useState();return pi(()=>{v&&q(window.getComputedStyle(v).zIndex)},[v]),p.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:se?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(Le=V.transformOrigin)==null?void 0:Le.x,(Me=V.transformOrigin)==null?void 0:Me.y].join(" "),...((Ze=V.hide)==null?void 0:Ze.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(ile,{scope:n,placedSide:j,onArrowChange:x,arrowX:ve,arrowY:z,shouldHideArrow:J,children:p.jsx(Fe.div,{"data-side":j,"data-align":ie,...y,ref:C,style:{...y.style,animation:se?void 0:"none"}})})})});b5.displayName=SR;var I5="PopperArrow",ole={top:"bottom",right:"left",bottom:"top",left:"right"},A5=g.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=sle(I5,r),o=ole[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(nle,{...i,ref:n,style:{...i.style,display:"block"}})})});A5.displayName=I5;function ale(t){return t!==null}var cle=t=>({name:"transformOrigin",options:t,fn(e){var _,v,T;const{placement:n,rects:r,middlewareData:i}=e,o=((_=i.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[l,u]=k5(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,m=(((T=i.arrow)==null?void 0:T.y)??0)+c/2;let w="",y="";return l==="bottom"?(w=o?d:`${h}px`,y=`${-c}px`):l==="top"?(w=o?d:`${h}px`,y=`${r.floating.height+c}px`):l==="right"?(w=`${-c}px`,y=o?d:`${m}px`):l==="left"&&(w=`${r.floating.width+c}px`,y=o?d:`${m}px`),{data:{x:w,y}}}});function k5(t){const[e,n="center"]=t.split("-");return[e,n]}var bR=C5,nC=S5,IR=b5,AR=A5,[rC]=qr("Tooltip",[uf]),iC=uf(),x5="TooltipProvider",lle=700,rA="tooltip.open",[ule,kR]=rC(x5),R5=t=>{const{__scopeTooltip:e,delayDuration:n=lle,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=g.useRef(!0),a=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),p.jsx(ule,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:g.useCallback(l=>{a.current=l},[]),disableHoverableContent:i,children:s})};R5.displayName=x5;var Vm="Tooltip",[dle,sC]=rC(Vm),P5=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=kR(Vm,t.__scopeTooltip),l=iC(e),[u,d]=g.useState(null),h=ho(),m=g.useRef(0),w=o??c.disableHoverableContent,y=a??c.delayDuration,_=g.useRef(!1),[v,T]=ka({prop:r,defaultProp:i??!1,onChange:A=>{A?(c.onOpen(),document.dispatchEvent(new CustomEvent(rA))):c.onClose(),s==null||s(A)},caller:Vm}),C=g.useMemo(()=>v?_.current?"delayed-open":"instant-open":"closed",[v]),I=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,_.current=!1,T(!0)},[T]),x=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,T(!1)},[T]),D=g.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_.current=!0,T(!0),m.current=0},y)},[y,T]);return g.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(bR,{...l,children:p.jsx(dle,{scope:e,contentId:h,open:v,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?D():I()},[c.isOpenDelayedRef,D,I]),onTriggerLeave:g.useCallback(()=>{w?x():(window.clearTimeout(m.current),m.current=0)},[x,w]),onOpen:I,onClose:x,disableHoverableContent:w,children:n})})};P5.displayName=Vm;var iA="TooltipTrigger",N5=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=sC(iA,n),s=kR(iA,n),o=iC(n),a=g.useRef(null),c=Ct(e,a,i.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(nC,{asChild:!0,...o,children:p.jsx(Fe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:we(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:we(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:we(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:we(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:we(t.onBlur,i.onClose),onClick:we(t.onClick,i.onClose)})})});N5.displayName=iA;var hle="TooltipPortal",[kMe,fle]=rC(hle,{forceMount:void 0}),Th="TooltipContent",O5=g.forwardRef((t,e)=>{const n=fle(Th,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=sC(Th,t.__scopeTooltip);return p.jsx($n,{present:r||o.open,children:o.disableHoverableContent?p.jsx(M5,{side:i,...s,ref:e}):p.jsx(ple,{side:i,...s,ref:e})})}),ple=g.forwardRef((t,e)=>{const n=sC(Th,t.__scopeTooltip),r=kR(Th,t.__scopeTooltip),i=g.useRef(null),s=Ct(e,i),[o,a]=g.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:d}=r,h=g.useCallback(()=>{a(null),d(!1)},[d]),m=g.useCallback((w,y)=>{const _=w.currentTarget,v={x:w.clientX,y:w.clientY},T=wle(v,_.getBoundingClientRect()),C=_le(v,T),I=Tle(y.getBoundingClientRect()),x=Ele([...C,...I]);a(x),d(!0)},[d]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(c&&u){const w=_=>m(_,u),y=_=>m(_,c);return c.addEventListener("pointerleave",w),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",y)}}},[c,u,m,h]),g.useEffect(()=>{if(o){const w=y=>{const _=y.target,v={x:y.clientX,y:y.clientY},T=(c==null?void 0:c.contains(_))||(u==null?void 0:u.contains(_)),C=!Cle(v,o);T?h():C&&(h(),l())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,u,o,l,h]),p.jsx(M5,{...t,ref:s})}),[mle,gle]=rC(Vm,{isInside:!1}),yle=pie("TooltipContent"),M5=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=sC(Th,n),l=iC(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(rA,u),()=>document.removeEventListener(rA,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(sf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(IR,{"data-state":c.stateAttribute,...l,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(yle,{children:r}),p.jsx(mle,{scope:n,isInside:!0,children:p.jsx(Fie,{id:c.contentId,role:"tooltip",children:i||r})})]})})});O5.displayName=Th;var D5="TooltipArrow",vle=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=iC(n);return gle(D5,n).isInside?null:p.jsx(AR,{...i,...r,ref:e})});vle.displayName=D5;function wle(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function _le(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Tle(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Cle(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,h=c.y;u>r!=h>r&&n<(d-l)*(r-u)/(h-u)+l&&(i=!i)}return i}function Ele(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Sle(e)}function Sle(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var ble=R5,Ile=P5,Ale=N5,L5=O5;const sA=ble,pL=Ile,mL=Ale,oA=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(L5,{ref:r,sideOffset:e,className:fe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));oA.displayName=L5.displayName;var oC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kle={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},rc,Jk,SU,xle=(SU=class{constructor(){pt(this,rc,kle);pt(this,Jk,!1)}setTimeoutProvider(t){Ke(this,rc,t)}setTimeout(t,e){return Y(this,rc).setTimeout(t,e)}clearTimeout(t){Y(this,rc).clearTimeout(t)}setInterval(t,e){return Y(this,rc).setInterval(t,e)}clearInterval(t){Y(this,rc).clearInterval(t)}},rc=new WeakMap,Jk=new WeakMap,SU),aA=new xle;function Rle(t){setTimeout(t,0)}var aC=typeof window>"u"||"Deno"in globalThis;function fs(){}function Ple(t,e){return typeof t=="function"?t(e):t}function Nle(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ole(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cA(t,e){return typeof t=="function"?t(e):t}function Mle(t,e){return typeof t=="function"?t(e):t}function gL(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==xR(o,e.options))return!1}else if(!Um(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function yL(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(jm(e.options.mutationKey)!==jm(s))return!1}else if(!Um(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xR(t,e){return((e==null?void 0:e.queryKeyHashFn)||jm)(t)}function jm(t){return JSON.stringify(t,(e,n)=>lA(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Um(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Um(t[n],e[n])):!1}var Dle=Object.prototype.hasOwnProperty;function F5(t,e){if(t===e)return t;const n=vL(t)&&vL(e);if(!n&&!(lA(t)&&lA(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let c=0;for(let l=0;l<o;l++){const u=n?l:s[l],d=t[u],h=e[u];if(d===h){a[u]=d,(n?l<i:Dle.call(t,u))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[u]=h;continue}const m=F5(d,h);a[u]=m,m===d&&c++}return i===o&&c===i?t:a}function vL(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lA(t){if(!wL(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!wL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wL(t){return Object.prototype.toString.call(t)==="[object Object]"}function Lle(t){return new Promise(e=>{aA.setTimeout(e,t)})}function Fle(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?F5(t,e):e}function Vle(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function jle(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var RR=Symbol();function V5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===RR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ql,ic,nh,bU,Ule=(bU=class extends oC{constructor(){super();pt(this,ql);pt(this,ic);pt(this,nh);Ke(this,nh,e=>{if(!aC&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,ic)||this.setEventListener(Y(this,nh))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,ic))==null||e.call(this),Ke(this,ic,void 0))}setEventListener(e){var n;Ke(this,nh,e),(n=Y(this,ic))==null||n.call(this),Ke(this,ic,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Y(this,ql)!==e&&(Ke(this,ql,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Y(this,ql)=="boolean"?Y(this,ql):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ql=new WeakMap,ic=new WeakMap,nh=new WeakMap,bU),j5=new Ule;function $le(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Ble=Rle;function Hle(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Ble;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Fr=Hle(),rh,sc,ih,IU,zle=(IU=class extends oC{constructor(){super();pt(this,rh,!0);pt(this,sc);pt(this,ih);Ke(this,ih,e=>{if(!aC&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,sc)||this.setEventListener(Y(this,ih))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,sc))==null||e.call(this),Ke(this,sc,void 0))}setEventListener(e){var n;Ke(this,ih,e),(n=Y(this,sc))==null||n.call(this),Ke(this,sc,e(this.setOnline.bind(this)))}setOnline(e){Y(this,rh)!==e&&(Ke(this,rh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Y(this,rh)}},rh=new WeakMap,sc=new WeakMap,ih=new WeakMap,IU),r_=new zle;function Wle(t){return Math.min(1e3*2**t,3e4)}function U5(t){return(t??"online")==="online"?r_.isOnline():!0}var uA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function $5(t){let e=!1,n=0,r;const i=$le(),s=()=>i.status!=="pending",o=y=>{var _;if(!s()){const v=new uA(y);h(v),(_=t.onCancel)==null||_.call(t,v)}},a=()=>{e=!0},c=()=>{e=!1},l=()=>j5.isFocused()&&(t.networkMode==="always"||r_.isOnline())&&t.canRun(),u=()=>U5(t.networkMode)&&t.canRun(),d=y=>{s()||(r==null||r(),i.resolve(y))},h=y=>{s()||(r==null||r(),i.reject(y))},m=()=>new Promise(y=>{var _;r=v=>{(s()||l())&&y(v)},(_=t.onPause)==null||_.call(t)}).then(()=>{var y;r=void 0,s()||(y=t.onContinue)==null||y.call(t)}),w=()=>{if(s())return;let y;const _=n===0?t.initialPromise:void 0;try{y=_??t.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(d).catch(v=>{var D;if(s())return;const T=t.retry??(aC?0:3),C=t.retryDelay??Wle,I=typeof C=="function"?C(n,v):C,x=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,v);if(e||!x){h(v);return}n++,(D=t.onFail)==null||D.call(t,n,v),Lle(I).then(()=>l()?void 0:m()).then(()=>{e?h(v):w()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?w():m().then(w),i)}}var Gl,AU,B5=(AU=class{constructor(){pt(this,Gl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nle(this.gcTime)&&Ke(this,Gl,aA.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(aC?1/0:5*60*1e3))}clearGcTimeout(){Y(this,Gl)&&(aA.clearTimeout(Y(this,Gl)),Ke(this,Gl,void 0))}},Gl=new WeakMap,AU),Ql,sh,Bi,Yl,qn,wg,Xl,ps,Vo,kU,Kle=(kU=class extends B5{constructor(n){super();pt(this,ps);pt(this,Ql);pt(this,sh);pt(this,Bi);pt(this,Yl);pt(this,qn);pt(this,wg);pt(this,Xl);Ke(this,Xl,!1),Ke(this,wg,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ke(this,Yl,n.client),Ke(this,Bi,Y(this,Yl).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ke(this,Ql,_L(this.options)),this.state=n.state??Y(this,Ql),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Y(this,qn))==null?void 0:n.promise}setOptions(n){if(this.options={...Y(this,wg),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_L(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Ke(this,Ql,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,Bi).remove(this)}setData(n,r){const i=Fle(this.state.data,n,this.options);return yr(this,ps,Vo).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){yr(this,ps,Vo).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=Y(this,qn))==null?void 0:i.promise;return(s=Y(this,qn))==null||s.cancel(n),r?r.then(fs).catch(fs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,Ql))}isActive(){return this.observers.some(n=>Mle(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===RR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>cA(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Ole(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,qn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,qn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Y(this,Bi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Y(this,qn)&&(Y(this,Xl)?Y(this,qn).cancel({revert:!0}):Y(this,qn).cancelRetry()),this.scheduleGc()),Y(this,Bi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yr(this,ps,Vo).call(this,{type:"invalidate"})}async fetch(n,r){var l,u,d,h,m,w,y,_,v,T,C,I;if(this.state.fetchStatus!=="idle"&&((l=Y(this,qn))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Y(this,qn))return Y(this,qn).continueRetry(),Y(this,qn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const x=this.observers.find(D=>D.options.queryFn);x&&this.setOptions(x.options)}const i=new AbortController,s=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(Ke(this,Xl,!0),i.signal)})},o=()=>{const x=V5(this.options,r),A=(()=>{const S={client:Y(this,Yl),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return Ke(this,Xl,!1),this.options.persister?this.options.persister(x,A,this):x(A)},c=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Y(this,Yl),state:this.state,fetchFn:o};return s(x),x})();(u=this.options.behavior)==null||u.onFetch(c,this),Ke(this,sh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&yr(this,ps,Vo).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta}),Ke(this,qn,$5({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:x=>{x instanceof uA&&x.revert&&this.setState({...Y(this,sh),fetchStatus:"idle"}),i.abort()},onFail:(x,D)=>{yr(this,ps,Vo).call(this,{type:"failed",failureCount:x,error:D})},onPause:()=>{yr(this,ps,Vo).call(this,{type:"pause"})},onContinue:()=>{yr(this,ps,Vo).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const x=await Y(this,qn).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(w=(m=Y(this,Bi).config).onSuccess)==null||w.call(m,x,this),(_=(y=Y(this,Bi).config).onSettled)==null||_.call(y,x,this.state.error,this),x}catch(x){if(x instanceof uA){if(x.silent)return Y(this,qn).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw yr(this,ps,Vo).call(this,{type:"error",error:x}),(T=(v=Y(this,Bi).config).onError)==null||T.call(v,x,this),(I=(C=Y(this,Bi).config).onSettled)==null||I.call(C,this.state.data,x,this),x}finally{this.scheduleGc()}}},Ql=new WeakMap,sh=new WeakMap,Bi=new WeakMap,Yl=new WeakMap,qn=new WeakMap,wg=new WeakMap,Xl=new WeakMap,ps=new WeakSet,Vo=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...qle(i.data,this.options),fetchMeta:n.meta??null};case"success":const s={...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ke(this,sh,n.manual?s:void 0),s;case"error":const o=n.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Fr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Y(this,Bi).notify({query:this,type:"updated",action:n})})},kU);function qle(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:U5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function _L(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function TL(t){return{onFetch:(e,n)=>{var u,d,h,m,w;const r=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let y=!1;const _=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},v=V5(e.options,e.fetchOptions),T=async(C,I,x)=>{if(y)return Promise.reject();if(I==null&&C.pages.length)return Promise.resolve(C);const A=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:I,direction:x?"backward":"forward",meta:e.options.meta};return _(R),R})(),S=await v(A),{maxPages:k}=e.options,N=x?jle:Vle;return{pages:N(C.pages,S,k),pageParams:N(C.pageParams,I,k)}};if(i&&s.length){const C=i==="backward",I=C?Gle:CL,x={pages:s,pageParams:o},D=I(r,x);a=await T(x,D,C)}else{const C=t??s.length;do{const I=c===0?o[0]??r.initialPageParam:CL(r,a);if(c>0&&I==null)break;a=await T(a,I),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var y,_;return(_=(y=e.options).persister)==null?void 0:_.call(y,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function CL(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Gle(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var _g,Ys,Nr,Jl,Xs,Ha,xU,Qle=(xU=class extends B5{constructor(n){super();pt(this,Xs);pt(this,_g);pt(this,Ys);pt(this,Nr);pt(this,Jl);Ke(this,_g,n.client),this.mutationId=n.mutationId,Ke(this,Nr,n.mutationCache),Ke(this,Ys,[]),this.state=n.state||Yle(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Y(this,Ys).includes(n)||(Y(this,Ys).push(n),this.clearGcTimeout(),Y(this,Nr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ke(this,Ys,Y(this,Ys).filter(r=>r!==n)),this.scheduleGc(),Y(this,Nr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Y(this,Ys).length||(this.state.status==="pending"?this.scheduleGc():Y(this,Nr).remove(this))}continue(){var n;return((n=Y(this,Jl))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,c,l,u,d,h,m,w,y,_,v,T,C,I,x,D,A,S,k,N;const r=()=>{yr(this,Xs,Ha).call(this,{type:"continue"})},i={client:Y(this,_g),meta:this.options.meta,mutationKey:this.options.mutationKey};Ke(this,Jl,$5({fn:()=>this.options.mutationFn?this.options.mutationFn(n,i):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{yr(this,Xs,Ha).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{yr(this,Xs,Ha).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,Nr).canRun(this)}));const s=this.state.status==="pending",o=!Y(this,Jl).canStart();try{if(s)r();else{yr(this,Xs,Ha).call(this,{type:"pending",variables:n,isPaused:o}),await((c=(a=Y(this,Nr).config).onMutate)==null?void 0:c.call(a,n,this,i));const O=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n,i));O!==this.state.context&&yr(this,Xs,Ha).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const R=await Y(this,Jl).start();return await((h=(d=Y(this,Nr).config).onSuccess)==null?void 0:h.call(d,R,n,this.state.context,this,i)),await((w=(m=this.options).onSuccess)==null?void 0:w.call(m,R,n,this.state.context,i)),await((_=(y=Y(this,Nr).config).onSettled)==null?void 0:_.call(y,R,null,this.state.variables,this.state.context,this,i)),await((T=(v=this.options).onSettled)==null?void 0:T.call(v,R,null,n,this.state.context,i)),yr(this,Xs,Ha).call(this,{type:"success",data:R}),R}catch(R){try{throw await((I=(C=Y(this,Nr).config).onError)==null?void 0:I.call(C,R,n,this.state.context,this,i)),await((D=(x=this.options).onError)==null?void 0:D.call(x,R,n,this.state.context,i)),await((S=(A=Y(this,Nr).config).onSettled)==null?void 0:S.call(A,void 0,R,this.state.variables,this.state.context,this,i)),await((N=(k=this.options).onSettled)==null?void 0:N.call(k,void 0,R,n,this.state.context,i)),R}finally{yr(this,Xs,Ha).call(this,{type:"error",error:R})}}finally{Y(this,Nr).runNext(this)}}},_g=new WeakMap,Ys=new WeakMap,Nr=new WeakMap,Jl=new WeakMap,Xs=new WeakSet,Ha=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fr.batch(()=>{Y(this,Ys).forEach(i=>{i.onMutationUpdate(n)}),Y(this,Nr).notify({mutation:this,type:"updated",action:n})})},xU);function Yle(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wo,ms,Tg,RU,Xle=(RU=class extends oC{constructor(e={}){super();pt(this,Wo);pt(this,ms);pt(this,Tg);this.config=e,Ke(this,Wo,new Set),Ke(this,ms,new Map),Ke(this,Tg,0)}build(e,n,r){const i=new Qle({client:e,mutationCache:this,mutationId:++Sy(this,Tg)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){Y(this,Wo).add(e);const n=Zy(e);if(typeof n=="string"){const r=Y(this,ms).get(n);r?r.push(e):Y(this,ms).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Y(this,Wo).delete(e)){const n=Zy(e);if(typeof n=="string"){const r=Y(this,ms).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Y(this,ms).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Zy(e);if(typeof n=="string"){const r=Y(this,ms).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Zy(e);if(typeof n=="string"){const i=(r=Y(this,ms).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fr.batch(()=>{Y(this,Wo).forEach(e=>{this.notify({type:"removed",mutation:e})}),Y(this,Wo).clear(),Y(this,ms).clear()})}getAll(){return Array.from(Y(this,Wo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yL(n,r))}findAll(e={}){return this.getAll().filter(n=>yL(e,n))}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Fr.batch(()=>Promise.all(e.map(n=>n.continue().catch(fs))))}},Wo=new WeakMap,ms=new WeakMap,Tg=new WeakMap,RU);function Zy(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Js,PU,Jle=(PU=class extends oC{constructor(e={}){super();pt(this,Js);this.config=e,Ke(this,Js,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??xR(i,n);let o=this.get(s);return o||(o=new Kle({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Y(this,Js).has(e.queryHash)||(Y(this,Js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Y(this,Js).get(e.queryHash);n&&(e.destroy(),n===e&&Y(this,Js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Y(this,Js).get(e)}getAll(){return[...Y(this,Js).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gL(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>gL(e,r)):n}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Js=new WeakMap,PU),on,oc,ac,oh,ah,cc,ch,lh,NU,Zle=(NU=class{constructor(t={}){pt(this,on);pt(this,oc);pt(this,ac);pt(this,oh);pt(this,ah);pt(this,cc);pt(this,ch);pt(this,lh);Ke(this,on,t.queryCache||new Jle),Ke(this,oc,t.mutationCache||new Xle),Ke(this,ac,t.defaultOptions||{}),Ke(this,oh,new Map),Ke(this,ah,new Map),Ke(this,cc,0)}mount(){Sy(this,cc)._++,Y(this,cc)===1&&(Ke(this,ch,j5.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,on).onFocus())})),Ke(this,lh,r_.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,on).onOnline())})))}unmount(){var t,e;Sy(this,cc)._--,Y(this,cc)===0&&((t=Y(this,ch))==null||t.call(this),Ke(this,ch,void 0),(e=Y(this,lh))==null||e.call(this),Ke(this,lh,void 0))}isFetching(t){return Y(this,on).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,oc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,on).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Y(this,on).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(cA(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Y(this,on).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=Y(this,on).get(r.queryHash),s=i==null?void 0:i.state.data,o=Ple(e,s);if(o!==void 0)return Y(this,on).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Fr.batch(()=>Y(this,on).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,on).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Y(this,on);Fr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Y(this,on);return Fr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Fr.batch(()=>Y(this,on).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(fs).catch(fs)}invalidateQueries(t,e={}){return Fr.batch(()=>(Y(this,on).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Fr.batch(()=>Y(this,on).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(fs)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(fs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Y(this,on).build(this,e);return n.isStaleByTime(cA(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fs).catch(fs)}fetchInfiniteQuery(t){return t.behavior=TL(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fs).catch(fs)}ensureInfiniteQueryData(t){return t.behavior=TL(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return r_.isOnline()?Y(this,oc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,on)}getMutationCache(){return Y(this,oc)}getDefaultOptions(){return Y(this,ac)}setDefaultOptions(t){Ke(this,ac,t)}setQueryDefaults(t,e){Y(this,oh).set(jm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Y(this,oh).values()],n={};return e.forEach(r=>{Um(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Y(this,ah).set(jm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Y(this,ah).values()],n={};return e.forEach(r=>{Um(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Y(this,ac).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===RR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,ac).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,on).clear(),Y(this,oc).clear()}},on=new WeakMap,oc=new WeakMap,ac=new WeakMap,oh=new WeakMap,ah=new WeakMap,cc=new WeakMap,ch=new WeakMap,lh=new WeakMap,NU),eue=g.createContext(void 0),tue=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(eue.Provider,{value:t,children:e}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var _u;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(_u||(_u={}));class Lv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const nue=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},rue=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:nue(t),s=()=>i()!=="web",o=d=>{const h=l.get(d);return!!(h!=null&&h.platforms.has(i())||a(d))},a=d=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(m=>m.name===d)},c=d=>t.console.error(d),l=new Map,u=(d,h={})=>{const m=l.get(d);if(m)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),m.proxy;const w=i(),y=a(d);let _;const v=async()=>(!_&&w in h?_=typeof h[w]=="function"?_=await h[w]():_=h[w]:e!==null&&!_&&"web"in h&&(_=typeof h.web=="function"?_=await h.web():_=h.web),_),T=(S,k)=>{var N,R;if(y){const O=y==null?void 0:y.methods.find(P=>k===P.name);if(O)return O.rtype==="promise"?P=>n.nativePromise(d,k.toString(),P):(P,$)=>n.nativeCallback(d,k.toString(),P,$);if(S)return(N=S[k])===null||N===void 0?void 0:N.bind(S)}else{if(S)return(R=S[k])===null||R===void 0?void 0:R.bind(S);throw new Lv(`"${d}" plugin is not implemented on ${w}`,_u.Unimplemented)}},C=S=>{let k;const N=(...R)=>{const O=v().then(P=>{const $=T(P,S);if($){const H=$(...R);return k=H==null?void 0:H.remove,H}else throw new Lv(`"${d}.${S}()" is not implemented on ${w}`,_u.Unimplemented)});return S==="addListener"&&(O.remove=async()=>k()),O};return N.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(N,"name",{value:S,writable:!1,configurable:!1}),N},I=C("addListener"),x=C("removeListener"),D=(S,k)=>{const N=I({eventName:S},k),R=async()=>{const P=await N;x({eventName:S,callbackId:P},k)},O=new Promise(P=>N.then(()=>P({remove:R})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},O},A=new Proxy({},{get(S,k){switch(k){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?D:I;case"removeListener":return x;default:return C(k)}}});return r[d]=A,l.set(d,{name:d,proxy:A,platforms:new Set([...Object.keys(h),...y?[w]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=i,n.handleError=c,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=u,n.Exception=Lv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},iue=t=>t.Capacitor=rue(t),Bt=iue(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ju=Bt.registerPlugin;class PR{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Bt.Exception(e,_u.Unimplemented)}unavailable(e="not available"){return new Bt.Exception(e,_u.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const EL=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),SL=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sue extends PR{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=SL(i).trim(),s=SL(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=EL(e.key),r=EL(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ju("CapacitorCookies",{web:()=>new sue});const oue=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),aue=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},cue=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,c;return Array.isArray(o)?(c="",o.forEach(l=>{a=e?encodeURIComponent(l):l,c+=`${s}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${s}=${a}`),`${r}&${c}`},"").substr(1):null,H5=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=aue(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{s.append(c,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class lue extends PR{async request(e){const n=H5(e,e.webFetchExtra),r=cue(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await s.blob(),c=await oue(l);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const u={};return s.headers.forEach((d,h)=>{u[h]=d}),{data:c,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ju("CapacitorHttp",{web:()=>new lue});const PMe=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Bt,CapacitorException:Lv,get ExceptionCode(){return _u},WebPlugin:PR,buildRequestInit:H5,registerPlugin:ju},Symbol.toStringTag,{value:"Module"})),ji=ju("PushNotifications",{});var dA;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(dA||(dA={}));const an=ju("LocalNotifications",{web:()=>Wt(()=>import("./web-CLrBdvRY.js"),[]).then(t=>new t.LocalNotificationsWeb)}),uue=Object.freeze(Object.defineProperty({__proto__:null,LocalNotifications:an,get Weekday(){return dA}},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const due=()=>{};var bL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(t,e){if(!t)throw df(e)},df=function(t){return new Error("Firebase Database ("+z5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hue=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(h=64)),r.push(n[u],n[d],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(W5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hue(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new fue;const h=s<<2|a>>4;if(r.push(h),l!==64){const m=a<<4&240|l>>2;if(r.push(m),d!==64){const w=l<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K5=function(t){const e=W5(t);return NR.encodeByteArray(e,!0)},i_=function(t){return K5(t).replace(/\./g,"")},s_=function(t){try{return NR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pue(t){return q5(void 0,t)}function q5(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!mue(n)||(t[n]=q5(t[n],e[n]));return t}function mue(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yue=()=>gue().__FIREBASE_DEFAULTS__,vue=()=>{if(typeof process>"u"||typeof bL>"u")return;const t=bL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wue=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s_(t[1]);return e&&JSON.parse(e)},cC=()=>{try{return due()||yue()||vue()||wue()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G5=t=>{var e,n;return(n=(e=cC())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},lC=t=>{const e=G5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Q5=()=>{var t;return(t=cC())==null?void 0:t.config},Y5=t=>{var e;return(e=cC())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[i_(JSON.stringify(n)),i_(JSON.stringify(o)),""].join(".")}const Up={};function _ue(){const t={prod:[],emulator:[]};for(const e of Object.keys(Up))Up[e]?t.emulator.push(e):t.prod.push(e);return t}function Tue(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let IL=!1;function Lg(t,e){if(typeof window>"u"||typeof document>"u"||!rs(window.location.host)||Up[t]===e||Up[t]||IL)return;Up[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",s=_ue().prod.length>0;function o(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{IL=!0,o()},h}function u(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=Tue(r),m=n("text"),w=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),_=document.getElementById(y)||document.createElement("a"),v=n("preprendIcon"),T=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const C=h.element;a(C),u(_,y);const I=l();c(T,v),C.append(T,w,_,I),document.body.appendChild(C)}s?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function Cue(){var e;const t=(e=cC())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Eue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sue(){const t=kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bue(){return z5.NODE_ADMIN===!0}function Iue(){return!Cue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DR(){try{return typeof indexedDB=="object"}catch{return!1}}function LR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function Z5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aue="FirebaseError";class Fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Aue,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kue(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fi(i,a,r)}}function kue(t,e){return t.replace(xue,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xue=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){return JSON.parse(t)}function er(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=$m(s_(s[0])||""),n=$m(s_(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Rue=function(t){const e=e6(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Pue=function(t){const e=e6(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ch(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function hA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function o_(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function So(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(AL(s)&&AL(o)){if(!So(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function AL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function pp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nue{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Oue(t,e){const n=new Mue(t,e);return n.subscribe.bind(n)}class Mue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Due(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=IS),i.error===void 0&&(i.error=IS),i.complete===void 0&&(i.complete=IS);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Due(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function IS(){}function uC(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lue=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ue(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dC=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fue=1e3,Vue=2,jue=4*60*60*1e3,Uue=.5;function kL(t,e=Fue,n=Vue){const r=e*Math.pow(n,t),i=Math.round(Uue*r*(Math.random()-.5)*2);return Math.min(jue,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Mg;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hue(e))try{this.getOrInitializeService({instanceIdentifier:Sl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sl){return this.instances.has(e)}getOptions(e=Sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bue(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sl){return this.component?this.component.multipleInstances?e:Sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bue(t){return t===Sl?void 0:t}function Hue(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $ue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const Wue={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},Kue=ct.INFO,que={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},Gue=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=que[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fg{constructor(e){this.name=e,this._logLevel=Kue,this._logHandler=Gue,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wue[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const Que=(t,e)=>e.some(n=>t instanceof n);let xL,RL;function Yue(){return xL||(xL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xue(){return RL||(RL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t6=new WeakMap,fA=new WeakMap,n6=new WeakMap,AS=new WeakMap,FR=new WeakMap;function Jue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ia(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&t6.set(n,t)}).catch(()=>{}),FR.set(e,t),e}function Zue(t){if(fA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fA.set(t,e)}let pA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ia(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ede(t){pA=t(pA)}function tde(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kS(this),e,...n);return n6.set(r,e.sort?e.sort():[e]),ia(r)}:Xue().includes(t)?function(...e){return t.apply(kS(this),e),ia(t6.get(this))}:function(...e){return ia(t.apply(kS(this),e))}}function nde(t){return typeof t=="function"?tde(t):(t instanceof IDBTransaction&&Zue(t),Que(t,Yue())?new Proxy(t,pA):t)}function ia(t){if(t instanceof IDBRequest)return Jue(t);if(AS.has(t))return AS.get(t);const e=nde(t);return e!==t&&(AS.set(t,e),FR.set(e,t)),e}const kS=t=>FR.get(t);function hC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ia(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ia(o.result),c.oldVersion,c.newVersion,ia(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function xS(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ia(n).then(()=>{})}const rde=["get","getKey","getAll","getAllKeys","count"],ide=["put","add","delete","clear"],RS=new Map;function PL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(RS.get(e))return RS.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ide.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rde.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return RS.set(e,s),s}ede(t=>({...t,get:(e,n,r)=>PL(e,n)||t.get(e,n,r),has:(e,n)=>!!PL(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ode(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ode(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mA="@firebase/app",NL="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Fg("@firebase/app"),ade="@firebase/app-compat",cde="@firebase/analytics-compat",lde="@firebase/analytics",ude="@firebase/app-check-compat",dde="@firebase/app-check",hde="@firebase/auth",fde="@firebase/auth-compat",pde="@firebase/database",mde="@firebase/data-connect",gde="@firebase/database-compat",yde="@firebase/functions",vde="@firebase/functions-compat",wde="@firebase/installations",_de="@firebase/installations-compat",Tde="@firebase/messaging",Cde="@firebase/messaging-compat",Ede="@firebase/performance",Sde="@firebase/performance-compat",bde="@firebase/remote-config",Ide="@firebase/remote-config-compat",Ade="@firebase/storage",kde="@firebase/storage-compat",xde="@firebase/firestore",Rde="@firebase/ai",Pde="@firebase/firestore-compat",Nde="firebase",Ode="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="[DEFAULT]",Mde={[mA]:"fire-core",[ade]:"fire-core-compat",[lde]:"fire-analytics",[cde]:"fire-analytics-compat",[dde]:"fire-app-check",[ude]:"fire-app-check-compat",[hde]:"fire-auth",[fde]:"fire-auth-compat",[pde]:"fire-rtdb",[mde]:"fire-data-connect",[gde]:"fire-rtdb-compat",[yde]:"fire-fn",[vde]:"fire-fn-compat",[wde]:"fire-iid",[_de]:"fire-iid-compat",[Tde]:"fire-fcm",[Cde]:"fire-fcm-compat",[Ede]:"fire-perf",[Sde]:"fire-perf-compat",[bde]:"fire-rc",[Ide]:"fire-rc-compat",[Ade]:"fire-gcs",[kde]:"fire-gcs-compat",[xde]:"fire-fst",[Pde]:"fire-fst-compat",[Rde]:"fire-vertex","fire-js":"fire-js",[Nde]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map,Dde=new Map,yA=new Map;function OL(t,e){try{t.container.addComponent(e)}catch(n){pa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zr(t){const e=t.name;if(yA.has(e))return pa.debug(`There were multiple attempts to register component ${e}.`),!1;yA.set(e,t);for(const n of Bm.values())OL(n,t);for(const n of Dde.values())OL(n,t);return!0}function Vs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lde={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rc=new al("app","Firebase",Lde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fde{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=Ode;function r6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:gA,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Rc.create("bad-app-name",{appName:String(i)});if(n||(n=Q5()),!n)throw Rc.create("no-options");const s=Bm.get(i);if(s){if(So(n,s.options)&&So(r,s.config))return s;throw Rc.create("duplicate-app",{appName:i})}const o=new zue(i);for(const c of yA.values())o.addComponent(c);const a=new Fde(n,r,o);return Bm.set(i,a),a}function ll(t=gA){const e=Bm.get(t);if(!e&&t===gA&&Q5())return r6();if(!e)throw Rc.create("no-app",{appName:t});return e}function Vde(){return Array.from(Bm.values())}function xn(t,e,n){let r=Mde[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pa.warn(o.join(" "));return}zr(new xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jde="firebase-heartbeat-database",Ude=1,Hm="firebase-heartbeat-store";let PS=null;function i6(){return PS||(PS=hC(jde,Ude,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hm)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rc.create("idb-open",{originalErrorMessage:t.message})})),PS}async function $de(t){try{const n=(await i6()).transaction(Hm),r=await n.objectStore(Hm).get(s6(t));return await n.done,r}catch(e){if(e instanceof Fi)pa.warn(e.message);else{const n=Rc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pa.warn(n.message)}}}async function ML(t,e){try{const r=(await i6()).transaction(Hm,"readwrite");await r.objectStore(Hm).put(e,s6(t)),await r.done}catch(n){if(n instanceof Fi)pa.warn(n.message);else{const r=Rc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pa.warn(r.message)}}}function s6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bde=1024,Hde=30;class zde{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kde(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=DL();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Hde){const o=qde(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=DL(),{heartbeatsToSend:r,unsentEntries:i}=Wde(this._heartbeatsCache.heartbeats),s=i_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pa.warn(n),""}}}function DL(){return new Date().toISOString().substring(0,10)}function Wde(t,e=Bde){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LL(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),LL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Kde{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DR()?LR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $de(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ML(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ML(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function LL(t){return i_(JSON.stringify({version:2,heartbeats:t})).length}function qde(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gde(t){zr(new xr("platform-logger",e=>new sde(e),"PRIVATE")),zr(new xr("heartbeat",e=>new zde(e),"PRIVATE")),xn(mA,NL,t),xn(mA,NL,"esm2020"),xn("fire-js","")}Gde("");var FL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pc,o6;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function k(){}k.prototype=S.prototype,A.F=S.prototype,A.prototype=new k,A.prototype.constructor=A,A.D=function(N,R,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return S.prototype[R].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,S,k){k||(k=0);const N=Array(16);if(typeof S=="string")for(var R=0;R<16;++R)N[R]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(R=0;R<16;++R)N[R]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=A.g[0],k=A.g[1],R=A.g[2];let O=A.g[3],P;P=S+(O^k&(R^O))+N[0]+3614090360&4294967295,S=k+(P<<7&4294967295|P>>>25),P=O+(R^S&(k^R))+N[1]+3905402710&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(k^O&(S^k))+N[2]+606105819&4294967295,R=O+(P<<17&4294967295|P>>>15),P=k+(S^R&(O^S))+N[3]+3250441966&4294967295,k=R+(P<<22&4294967295|P>>>10),P=S+(O^k&(R^O))+N[4]+4118548399&4294967295,S=k+(P<<7&4294967295|P>>>25),P=O+(R^S&(k^R))+N[5]+1200080426&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(k^O&(S^k))+N[6]+2821735955&4294967295,R=O+(P<<17&4294967295|P>>>15),P=k+(S^R&(O^S))+N[7]+4249261313&4294967295,k=R+(P<<22&4294967295|P>>>10),P=S+(O^k&(R^O))+N[8]+1770035416&4294967295,S=k+(P<<7&4294967295|P>>>25),P=O+(R^S&(k^R))+N[9]+2336552879&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(k^O&(S^k))+N[10]+4294925233&4294967295,R=O+(P<<17&4294967295|P>>>15),P=k+(S^R&(O^S))+N[11]+2304563134&4294967295,k=R+(P<<22&4294967295|P>>>10),P=S+(O^k&(R^O))+N[12]+1804603682&4294967295,S=k+(P<<7&4294967295|P>>>25),P=O+(R^S&(k^R))+N[13]+4254626195&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(k^O&(S^k))+N[14]+2792965006&4294967295,R=O+(P<<17&4294967295|P>>>15),P=k+(S^R&(O^S))+N[15]+1236535329&4294967295,k=R+(P<<22&4294967295|P>>>10),P=S+(R^O&(k^R))+N[1]+4129170786&4294967295,S=k+(P<<5&4294967295|P>>>27),P=O+(k^R&(S^k))+N[6]+3225465664&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^k&(O^S))+N[11]+643717713&4294967295,R=O+(P<<14&4294967295|P>>>18),P=k+(O^S&(R^O))+N[0]+3921069994&4294967295,k=R+(P<<20&4294967295|P>>>12),P=S+(R^O&(k^R))+N[5]+3593408605&4294967295,S=k+(P<<5&4294967295|P>>>27),P=O+(k^R&(S^k))+N[10]+38016083&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^k&(O^S))+N[15]+3634488961&4294967295,R=O+(P<<14&4294967295|P>>>18),P=k+(O^S&(R^O))+N[4]+3889429448&4294967295,k=R+(P<<20&4294967295|P>>>12),P=S+(R^O&(k^R))+N[9]+568446438&4294967295,S=k+(P<<5&4294967295|P>>>27),P=O+(k^R&(S^k))+N[14]+3275163606&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^k&(O^S))+N[3]+4107603335&4294967295,R=O+(P<<14&4294967295|P>>>18),P=k+(O^S&(R^O))+N[8]+1163531501&4294967295,k=R+(P<<20&4294967295|P>>>12),P=S+(R^O&(k^R))+N[13]+2850285829&4294967295,S=k+(P<<5&4294967295|P>>>27),P=O+(k^R&(S^k))+N[2]+4243563512&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^k&(O^S))+N[7]+1735328473&4294967295,R=O+(P<<14&4294967295|P>>>18),P=k+(O^S&(R^O))+N[12]+2368359562&4294967295,k=R+(P<<20&4294967295|P>>>12),P=S+(k^R^O)+N[5]+4294588738&4294967295,S=k+(P<<4&4294967295|P>>>28),P=O+(S^k^R)+N[8]+2272392833&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^k)+N[11]+1839030562&4294967295,R=O+(P<<16&4294967295|P>>>16),P=k+(R^O^S)+N[14]+4259657740&4294967295,k=R+(P<<23&4294967295|P>>>9),P=S+(k^R^O)+N[1]+2763975236&4294967295,S=k+(P<<4&4294967295|P>>>28),P=O+(S^k^R)+N[4]+1272893353&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^k)+N[7]+4139469664&4294967295,R=O+(P<<16&4294967295|P>>>16),P=k+(R^O^S)+N[10]+3200236656&4294967295,k=R+(P<<23&4294967295|P>>>9),P=S+(k^R^O)+N[13]+681279174&4294967295,S=k+(P<<4&4294967295|P>>>28),P=O+(S^k^R)+N[0]+3936430074&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^k)+N[3]+3572445317&4294967295,R=O+(P<<16&4294967295|P>>>16),P=k+(R^O^S)+N[6]+76029189&4294967295,k=R+(P<<23&4294967295|P>>>9),P=S+(k^R^O)+N[9]+3654602809&4294967295,S=k+(P<<4&4294967295|P>>>28),P=O+(S^k^R)+N[12]+3873151461&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^k)+N[15]+530742520&4294967295,R=O+(P<<16&4294967295|P>>>16),P=k+(R^O^S)+N[2]+3299628645&4294967295,k=R+(P<<23&4294967295|P>>>9),P=S+(R^(k|~O))+N[0]+4096336452&4294967295,S=k+(P<<6&4294967295|P>>>26),P=O+(k^(S|~R))+N[7]+1126891415&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~k))+N[14]+2878612391&4294967295,R=O+(P<<15&4294967295|P>>>17),P=k+(O^(R|~S))+N[5]+4237533241&4294967295,k=R+(P<<21&4294967295|P>>>11),P=S+(R^(k|~O))+N[12]+1700485571&4294967295,S=k+(P<<6&4294967295|P>>>26),P=O+(k^(S|~R))+N[3]+2399980690&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~k))+N[10]+4293915773&4294967295,R=O+(P<<15&4294967295|P>>>17),P=k+(O^(R|~S))+N[1]+2240044497&4294967295,k=R+(P<<21&4294967295|P>>>11),P=S+(R^(k|~O))+N[8]+1873313359&4294967295,S=k+(P<<6&4294967295|P>>>26),P=O+(k^(S|~R))+N[15]+4264355552&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~k))+N[6]+2734768916&4294967295,R=O+(P<<15&4294967295|P>>>17),P=k+(O^(R|~S))+N[13]+1309151649&4294967295,k=R+(P<<21&4294967295|P>>>11),P=S+(R^(k|~O))+N[4]+4149444226&4294967295,S=k+(P<<6&4294967295|P>>>26),P=O+(k^(S|~R))+N[11]+3174756917&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~k))+N[2]+718787259&4294967295,R=O+(P<<15&4294967295|P>>>17),P=k+(O^(R|~S))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+O&4294967295}r.prototype.v=function(A,S){S===void 0&&(S=A.length);const k=S-this.blockSize,N=this.C;let R=this.h,O=0;for(;O<S;){if(R==0)for(;O<=k;)i(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<S;)if(N[R++]=A.charCodeAt(O++),R==this.blockSize){i(this,N),R=0;break}}else for(;O<S;)if(N[R++]=A[O++],R==this.blockSize){i(this,N),R=0;break}}this.h=R,this.o+=S},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var k=A.length-8;k<A.length;++k)A[k]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,k=0;k<4;++k)for(let N=0;N<32;N+=8)A[S++]=this.g[k]>>>N&255;return A};function s(A,S){var k=a;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=S(A)}function o(A,S){this.h=S;const k=[];let N=!0;for(let R=A.length-1;R>=0;R--){const O=A[R]|0;N&&O==S||(k[R]=O,N=!1)}this.g=k}var a={};function c(A){return-128<=A&&A<128?s(A,function(S){return new o([S|0],S<0?-1:0)}):new o([A|0],A<0?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return d;if(A<0)return _(l(-A));const S=[];let k=1;for(let N=0;A>=k;N++)S[N]=A/k|0,k*=4294967296;return new o(S,0)}function u(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return _(u(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=l(Math.pow(S,8));let N=d;for(let O=0;O<A.length;O+=8){var R=Math.min(8,A.length-O);const P=parseInt(A.substring(O,O+R),S);R<8?(R=l(Math.pow(S,R)),N=N.j(R).add(l(P))):(N=N.j(k),N=N.add(l(P)))}return N}var d=c(0),h=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-_(this).m();let A=0,S=1;for(let k=0;k<this.g.length;k++){const N=this.i(k);A+=(N>=0?N:4294967296+N)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(y(this))return"-"+_(this).toString(A);const S=l(Math.pow(A,6));var k=this;let N="";for(;;){const R=I(k,S).g;k=v(k,R.j(S));let O=((k.g.length>0?k.g[0]:k.h)>>>0).toString(A);if(k=R,w(k))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function y(A){return A.h==-1}t.l=function(A){return A=v(this,A),y(A)?-1:w(A)?0:1};function _(A){const S=A.g.length,k=[];for(let N=0;N<S;N++)k[N]=~A.g[N];return new o(k,~A.h).add(h)}t.abs=function(){return y(this)?_(this):this},t.add=function(A){const S=Math.max(this.g.length,A.g.length),k=[];let N=0;for(let R=0;R<=S;R++){let O=N+(this.i(R)&65535)+(A.i(R)&65535),P=(O>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);N=P>>>16,O&=65535,P&=65535,k[R]=P<<16|O}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(A,S){return A.add(_(S))}t.j=function(A){if(w(this)||w(A))return d;if(y(this))return y(A)?_(this).j(_(A)):_(_(this).j(A));if(y(A))return _(this.j(_(A)));if(this.l(m)<0&&A.l(m)<0)return l(this.m()*A.m());const S=this.g.length+A.g.length,k=[];for(var N=0;N<2*S;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(let R=0;R<A.g.length;R++){const O=this.i(N)>>>16,P=this.i(N)&65535,$=A.i(R)>>>16,H=A.i(R)&65535;k[2*N+2*R]+=P*H,T(k,2*N+2*R),k[2*N+2*R+1]+=O*H,T(k,2*N+2*R+1),k[2*N+2*R+1]+=P*$,T(k,2*N+2*R+1),k[2*N+2*R+2]+=O*$,T(k,2*N+2*R+2)}for(A=0;A<S;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=S;A<2*S;A++)k[A]=0;return new o(k,0)};function T(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function C(A,S){this.g=A,this.h=S}function I(A,S){if(w(S))throw Error("division by zero");if(w(A))return new C(d,d);if(y(A))return S=I(_(A),S),new C(_(S.g),_(S.h));if(y(S))return S=I(A,_(S)),new C(_(S.g),S.h);if(A.g.length>30){if(y(A)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var k=h,N=S;N.l(A)<=0;)k=x(k),N=x(N);var R=D(k,1),O=D(N,1);for(N=D(N,2),k=D(k,2);!w(N);){var P=O.add(N);P.l(A)<=0&&(R=R.add(k),O=P),N=D(N,1),k=D(k,1)}return S=v(A,R.j(S)),new C(R,S)}for(R=d;A.l(S)>=0;){for(k=Math.max(1,Math.floor(A.m()/S.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=l(k),P=O.j(S);y(P)||P.l(A)>0;)k-=N,O=l(k),P=O.j(S);w(O)&&(O=h),R=R.add(O),A=v(A,P)}return new C(R,A)}t.B=function(A){return I(this,A).h},t.and=function(A){const S=Math.max(this.g.length,A.g.length),k=[];for(let N=0;N<S;N++)k[N]=this.i(N)&A.i(N);return new o(k,this.h&A.h)},t.or=function(A){const S=Math.max(this.g.length,A.g.length),k=[];for(let N=0;N<S;N++)k[N]=this.i(N)|A.i(N);return new o(k,this.h|A.h)},t.xor=function(A){const S=Math.max(this.g.length,A.g.length),k=[];for(let N=0;N<S;N++)k[N]=this.i(N)^A.i(N);return new o(k,this.h^A.h)};function x(A){const S=A.g.length+1,k=[];for(let N=0;N<S;N++)k[N]=A.i(N)<<1|A.i(N-1)>>>31;return new o(k,A.h)}function D(A,S){const k=S>>5;S%=32;const N=A.g.length-k,R=[];for(let O=0;O<N;O++)R[O]=S>0?A.i(O+k)>>>S|A.i(O+k+1)<<32-S:A.i(O+k);return new o(R,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Pc=o}).apply(typeof FL<"u"?FL:typeof self<"u"?self:typeof window<"u"?window:{});var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a6,mp,c6,Fv,vA,l6,u6,d6;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ev=="object"&&ev];for(var E=0;E<f.length;++E){var b=f[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(f,E){if(E)e:{var b=r;f=f.split(".");for(var M=0;M<f.length-1;M++){var B=f[M];if(!(B in b))break e;b=b[B]}f=f[f.length-1],M=b[f],E=E(M),E!=M&&E!=null&&e(b,f,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(E){var b=[],M;for(M in E)Object.prototype.hasOwnProperty.call(E,M)&&b.push([M,E[M]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function c(f,E,b){return f.call.apply(f.bind,arguments)}function l(f,E,b){return l=c,l.apply(null,arguments)}function u(f,E){var b=Array.prototype.slice.call(arguments,1);return function(){var M=b.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function d(f,E){function b(){}b.prototype=E.prototype,f.Z=E.prototype,f.prototype=new b,f.prototype.constructor=f,f.Ob=function(M,B,W){for(var pe=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)pe[nt-2]=arguments[nt];return E.prototype[B].apply(M,pe)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function m(f){const E=f.length;if(E>0){const b=Array(E);for(let M=0;M<E;M++)b[M]=f[M];return b}return[]}function w(f,E){for(let M=1;M<arguments.length;M++){const B=arguments[M];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=f.length||0;const W=B.length||0;f.length=b+W;for(let pe=0;pe<W;pe++)f[b+pe]=B[pe]}else f.push(B)}}class y{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function _(f){o.setTimeout(()=>{throw f},0)}function v(){var f=A;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class T{constructor(){this.h=this.g=null}add(E,b){const M=C.get();M.set(E,b),this.h?this.h.next=M:this.g=M,this.h=M}}var C=new y(()=>new I,f=>f.reset());class I{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let x,D=!1,A=new T,S=()=>{const f=Promise.resolve(void 0);x=()=>{f.then(k)}};function k(){for(var f;f=v();){try{f.h.call(f.g)}catch(b){_(b)}var E=C;E.j(f),E.h<100&&(E.h++,f.next=E.g,E.g=f)}D=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};o.addEventListener("test",b,E),o.removeEventListener("test",b,E)}catch{}return f}();function P(f){return/^[\s\xa0]*$/.test(f)}function $(f,E){R.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,E)}d($,R),$.prototype.init=function(f,E){const b=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget,E||(b=="mouseover"?E=f.fromElement:b=="mouseout"&&(E=f.toElement)),this.relatedTarget=E,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var H="closure_listenable_"+(Math.random()*1e6|0),X=0;function se(f,E,b,M,B){this.listener=f,this.proxy=null,this.src=E,this.type=b,this.capture=!!M,this.ha=B,this.key=++X,this.da=this.fa=!1}function V(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function j(f,E,b){for(const M in f)E.call(b,f[M],M,f)}function ie(f,E){for(const b in f)E.call(void 0,f[b],b,f)}function Te(f){const E={};for(const b in f)E[b]=f[b];return E}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(f,E){let b,M;for(let B=1;B<arguments.length;B++){M=arguments[B];for(b in M)f[b]=M[b];for(let W=0;W<ve.length;W++)b=ve[W],Object.prototype.hasOwnProperty.call(M,b)&&(f[b]=M[b])}}function J(f){this.src=f,this.g={},this.h=0}J.prototype.add=function(f,E,b,M,B){const W=f.toString();f=this.g[W],f||(f=this.g[W]=[],this.h++);const pe=q(f,E,M,B);return pe>-1?(E=f[pe],b||(E.fa=!1)):(E=new se(E,this.src,W,!!M,B),E.fa=b,f.push(E)),E};function G(f,E){const b=E.type;if(b in f.g){var M=f.g[b],B=Array.prototype.indexOf.call(M,E,void 0),W;(W=B>=0)&&Array.prototype.splice.call(M,B,1),W&&(V(E),f.g[b].length==0&&(delete f.g[b],f.h--))}}function q(f,E,b,M){for(let B=0;B<f.length;++B){const W=f[B];if(!W.da&&W.listener==E&&W.capture==!!b&&W.ha==M)return B}return-1}var ne="closure_lm_"+(Math.random()*1e6|0),Ce={};function Ne(f,E,b,M,B){if(Array.isArray(E)){for(let W=0;W<E.length;W++)Ne(f,E[W],b,M,B);return null}return b=rn(b),f&&f[H]?f.J(E,b,a(M)?!!M.capture:!1,B):Le(f,E,b,!1,M,B)}function Le(f,E,b,M,B,W){if(!E)throw Error("Invalid event type");const pe=a(B)?!!B.capture:!!B;let nt=ht(f);if(nt||(f[ne]=nt=new J(f)),b=nt.add(E,b,M,pe,W),b.proxy)return b;if(M=Me(),b.proxy=M,M.src=f,M.listener=b,f.addEventListener)O||(B=pe),B===void 0&&(B=!1),f.addEventListener(E.toString(),M,B);else if(f.attachEvent)f.attachEvent(Re(E.toString()),M);else if(f.addListener&&f.removeListener)f.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Me(){function f(b){return E.call(f.src,f.listener,b)}const E=Pe;return f}function Ze(f,E,b,M,B){if(Array.isArray(E))for(var W=0;W<E.length;W++)Ze(f,E[W],b,M,B);else M=a(M)?!!M.capture:!!M,b=rn(b),f&&f[H]?(f=f.i,W=String(E).toString(),W in f.g&&(E=f.g[W],b=q(E,b,M,B),b>-1&&(V(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete f.g[W],f.h--)))):f&&(f=ht(f))&&(E=f.g[E.toString()],f=-1,E&&(f=q(E,b,M,B)),(b=f>-1?E[f]:null)&&yt(b))}function yt(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[H])G(E.i,f);else{var b=f.type,M=f.proxy;E.removeEventListener?E.removeEventListener(b,M,f.capture):E.detachEvent?E.detachEvent(Re(b),M):E.addListener&&E.removeListener&&E.removeListener(M),(b=ht(E))?(G(b,f),b.h==0&&(b.src=null,E[ne]=null)):V(f)}}}function Re(f){return f in Ce?Ce[f]:Ce[f]="on"+f}function Pe(f,E){if(f.da)f=!0;else{E=new $(E,this);const b=f.listener,M=f.ha||f.src;f.fa&&yt(f),f=b.call(M,E)}return f}function ht(f){return f=f[ne],f instanceof J?f:null}var nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function rn(f){return typeof f=="function"?f:(f[nn]||(f[nn]=function(E){return f.handleEvent(E)}),f[nn])}function Ve(){N.call(this),this.i=new J(this),this.M=this,this.G=null}d(Ve,N),Ve.prototype[H]=!0,Ve.prototype.removeEventListener=function(f,E,b,M){Ze(this,f,E,b,M)};function L(f,E){var b,M=f.G;if(M)for(b=[];M;M=M.G)b.push(M);if(f=f.M,M=E.type||E,typeof E=="string")E=new R(E,f);else if(E instanceof R)E.target=E.target||f;else{var B=E;E=new R(M,f),z(E,B)}B=!0;let W,pe;if(b)for(pe=b.length-1;pe>=0;pe--)W=E.g=b[pe],B=U(W,M,!0,E)&&B;if(W=E.g=f,B=U(W,M,!0,E)&&B,B=U(W,M,!1,E)&&B,b)for(pe=0;pe<b.length;pe++)W=E.g=b[pe],B=U(W,M,!1,E)&&B}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var f=this.i;for(const E in f.g){const b=f.g[E];for(let M=0;M<b.length;M++)V(b[M]);delete f.g[E],f.h--}}this.G=null},Ve.prototype.J=function(f,E,b,M){return this.i.add(String(f),E,!1,b,M)},Ve.prototype.K=function(f,E,b,M){return this.i.add(String(f),E,!0,b,M)};function U(f,E,b,M){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();let B=!0;for(let W=0;W<E.length;++W){const pe=E[W];if(pe&&!pe.da&&pe.capture==b){const nt=pe.listener,Mn=pe.ha||pe.src;pe.fa&&G(f.i,pe),B=nt.call(Mn,M)!==!1&&B}}return B&&!M.defaultPrevented}function K(f,E){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=l(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:o.setTimeout(f,E||0)}function de(f){f.g=K(()=>{f.g=null,f.i&&(f.i=!1,de(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class le extends N{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:de(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(f){N.call(this),this.h=f,this.g={}}d(oe,N);var me=[];function We(f){j(f.g,function(E,b){this.g.hasOwnProperty(b)&&yt(E)},f),f.g={}}oe.prototype.N=function(){oe.Z.N.call(this),We(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=o.JSON.stringify,Nn=o.JSON.parse,gi=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Rr(){}function Oo(){}var pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hn(){R.call(this,"d")}d(Hn,R);function Us(){R.call(this,"c")}d(Us,R);var nr={},Gu=null;function Mo(){return Gu=Gu||new Ve}nr.Ia="serverreachability";function kf(f){R.call(this,nr.Ia,f)}d(kf,R);function Pa(f){const E=Mo();L(E,new kf(E))}nr.STAT_EVENT="statevent";function py(f,E){R.call(this,nr.STAT_EVENT,f),this.stat=E}d(py,R);function On(f){const E=Mo();L(E,new py(E,f))}nr.Ja="timingevent";function as(f,E){R.call(this,nr.Ja,f),this.size=E}d(as,R);function ml(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},E)}function Ue(){this.g=!0}Ue.prototype.ua=function(){this.g=!1};function St(f,E,b,M,B,W){f.info(function(){if(f.g)if(W){var pe="",nt=W.split("&");for(let Nt=0;Nt<nt.length;Nt++){var Mn=nt[Nt].split("=");if(Mn.length>1){const Wn=Mn[0];Mn=Mn[1];const Hs=Wn.split("_");pe=Hs.length>=2&&Hs[1]=="type"?pe+(Wn+"="+Mn+"&"):pe+(Wn+"=redacted&")}}}else pe=null;else pe=W;return"XMLHTTP REQ ("+M+") [attempt "+B+"]: "+E+`
`+b+`
`+pe})}function Mt(f,E,b,M,B,W,pe){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+B+"]: "+E+`
`+b+`
`+W+" "+pe})}function zn(f,E,b,M){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+$s(f,b)+(M?" "+M:"")})}function yi(f,E){f.info(function(){return"TIMEOUT: "+E})}Ue.prototype.info=function(){};function $s(f,E){if(!f.g)return E;if(!E)return null;try{const W=JSON.parse(E);if(W){for(f=0;f<W.length;f++)if(Array.isArray(W[f])){var b=W[f];if(!(b.length<2)){var M=b[1];if(Array.isArray(M)&&!(M.length<1)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(let pe=1;pe<M.length;pe++)M[pe]=""}}}}return ft(W)}catch{return E}}var Vi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cs;function bE(){}d(bE,Rr),bE.prototype.g=function(){return new XMLHttpRequest},cs=new bE;function xf(f){return encodeURIComponent(String(f))}function yY(f){var E=1;f=f.split(":");const b=[];for(;E>0&&f.length;)b.push(f.shift()),E--;return f.length&&b.push(f.join(":")),b}function Na(f,E,b,M){this.j=f,this.i=E,this.l=b,this.S=M||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new X1}function X1(){this.i=null,this.g="",this.h=!1}var J1={},IE={};function AE(f,E,b){f.M=1,f.A=gy(Bs(E)),f.u=b,f.R=!0,Z1(f,null)}function Z1(f,E){f.F=Date.now(),my(f),f.B=Bs(f.A);var b=f.B,M=f.S;Array.isArray(M)||(M=[String(M)]),hO(b.i,"t",M),f.C=0,b=f.j.L,f.h=new X1,f.g=RO(f.j,b?E:null,!f.u),f.P>0&&(f.O=new le(l(f.Y,f,f.g),f.P)),E=f.V,b=f.g,M=f.ba;var B="readystatechange";Array.isArray(B)||(B&&(me[0]=B.toString()),B=me);for(let W=0;W<B.length;W++){const pe=Ne(b,B[W],M||E.handleEvent,!1,E.h||E);if(!pe)break;E.g[pe.key]=pe}E=f.J?Te(f.J):{},f.u?(f.v||(f.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,E)):(f.v="GET",f.g.ea(f.B,f.v,null,E)),Pa(),St(f.i,f.v,f.B,f.l,f.S,f.u)}Na.prototype.ba=function(f){f=f.target;const E=this.O;E&&Da(f)==3?E.j():this.Y(f)},Na.prototype.Y=function(f){try{if(f==this.g)e:{const nt=Da(this.g),Mn=this.g.ya(),Nt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||wO(this.g)))){this.K||nt!=4||Mn==7||(Mn==8||Nt<=0?Pa(3):Pa(2)),kE(this);var E=this.g.ca();this.X=E;var b=vY(this);if(this.o=E==200,Mt(this.i,this.v,this.B,this.l,this.S,nt,E),this.o){if(this.U&&!this.L){t:{if(this.g){var M,B=this.g;if((M=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(M)){var W=M;break t}}W=null}if(f=W)zn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xE(this,f);else{this.o=!1,this.m=3,On(12),gl(this),Rf(this);break e}}if(this.R){f=!0;let Wn;for(;!this.K&&this.C<b.length;)if(Wn=wY(this,b),Wn==IE){nt==4&&(this.m=4,On(14),f=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==J1){this.m=4,On(15),zn(this.i,this.l,b,"[Invalid Chunk]"),f=!1;break}else zn(this.i,this.l,Wn,null),xE(this,Wn);if(eO(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||b.length!=0||this.h.h||(this.m=1,On(16),f=!1),this.o=this.o&&f,!f)zn(this.i,this.l,b,"[Invalid Chunked Response]"),gl(this),Rf(this);else if(b.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),FE(pe),pe.P=!0,On(11))}}else zn(this.i,this.l,b,null),xE(this,b);nt==4&&gl(this),this.o&&!this.K&&(nt==4?IO(this.j,this):(this.o=!1,my(this)))}else OY(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,On(12)):(this.m=0,On(13)),gl(this),Rf(this)}}}catch{}finally{}};function vY(f){if(!eO(f))return f.g.la();const E=wO(f.g);if(E==="")return"";let b="";const M=E.length,B=Da(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return gl(f),Rf(f),"";f.h.i=new o.TextDecoder}for(let W=0;W<M;W++)f.h.h=!0,b+=f.h.i.decode(E[W],{stream:!(B&&W==M-1)});return E.length=0,f.h.g+=b,f.C=0,f.h.g}function eO(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function wY(f,E){var b=f.C,M=E.indexOf(`
`,b);return M==-1?IE:(b=Number(E.substring(b,M)),isNaN(b)?J1:(M+=1,M+b>E.length?IE:(E=E.slice(M,M+b),f.C=M+b,E)))}Na.prototype.cancel=function(){this.K=!0,gl(this)};function my(f){f.T=Date.now()+f.H,tO(f,f.H)}function tO(f,E){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ml(l(f.aa,f),E)}function kE(f){f.D&&(o.clearTimeout(f.D),f.D=null)}Na.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(yi(this.i,this.B),this.M!=2&&(Pa(),On(17)),gl(this),this.m=2,Rf(this)):tO(this,this.T-f)};function Rf(f){f.j.I==0||f.K||IO(f.j,f)}function gl(f){kE(f);var E=f.O;E&&typeof E.dispose=="function"&&E.dispose(),f.O=null,We(f.V),f.g&&(E=f.g,f.g=null,E.abort(),E.dispose())}function xE(f,E){try{var b=f.j;if(b.I!=0&&(b.g==f||RE(b.h,f))){if(!f.L&&RE(b.h,f)&&b.I==3){try{var M=b.Ba.g.parse(E)}catch{M=null}if(Array.isArray(M)&&M.length==3){var B=M;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<f.F)Ty(b),wy(b);else break e;LE(b),On(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ml(l(b.Va,b),6e3));iO(b.h)<=1&&b.ta&&(b.ta=void 0)}else vl(b,11)}else if((f.L||b.g==f)&&Ty(b),!P(E))for(B=b.Ba.g.parse(E),E=0;E<B.length;E++){let Nt=B[E];const Wn=Nt[0];if(!(Wn<=b.K))if(b.K=Wn,Nt=Nt[1],b.I==2)if(Nt[0]=="c"){b.M=Nt[1],b.ba=Nt[2];const Hs=Nt[3];Hs!=null&&(b.ka=Hs,b.j.info("VER="+b.ka));const wl=Nt[4];wl!=null&&(b.za=wl,b.j.info("SVER="+b.za));const La=Nt[5];La!=null&&typeof La=="number"&&La>0&&(M=1.5*La,b.O=M,b.j.info("backChannelRequestTimeoutMs_="+M)),M=b;const Fa=f.g;if(Fa){const Ey=Fa.g?Fa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ey){var W=M.h;W.g||Ey.indexOf("spdy")==-1&&Ey.indexOf("quic")==-1&&Ey.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(PE(W,W.h),W.h=null))}if(M.G){const VE=Fa.g?Fa.g.getResponseHeader("X-HTTP-Session-Id"):null;VE&&(M.wa=VE,jt(M.J,M.G,VE))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-f.F,b.j.info("Handshake RTT: "+b.T+"ms")),M=b;var pe=f;if(M.na=xO(M,M.L?M.ba:null,M.W),pe.L){sO(M.h,pe);var nt=pe,Mn=M.O;Mn&&(nt.H=Mn),nt.D&&(kE(nt),my(nt)),M.g=pe}else SO(M);b.i.length>0&&_y(b)}else Nt[0]!="stop"&&Nt[0]!="close"||vl(b,7);else b.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?vl(b,7):DE(b):Nt[0]!="noop"&&b.l&&b.l.qa(Nt),b.A=0)}}Pa(4)}catch{}}var _Y=class{constructor(f,E){this.g=f,this.map=E}};function nO(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rO(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function iO(f){return f.h?1:f.g?f.g.size:0}function RE(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function PE(f,E){f.g?f.g.add(E):f.h=E}function sO(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}nO.prototype.cancel=function(){if(this.i=oO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function oO(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const b of f.g.values())E=E.concat(b.G);return E}return m(f.i)}var aO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TY(f,E){if(f){f=f.split("&");for(let b=0;b<f.length;b++){const M=f[b].indexOf("=");let B,W=null;M>=0?(B=f[b].substring(0,M),W=f[b].substring(M+1)):B=f[b],E(B,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Oa(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;f instanceof Oa?(this.l=f.l,Pf(this,f.j),this.o=f.o,this.g=f.g,Nf(this,f.u),this.h=f.h,NE(this,fO(f.i)),this.m=f.m):f&&(E=String(f).match(aO))?(this.l=!1,Pf(this,E[1]||"",!0),this.o=Of(E[2]||""),this.g=Of(E[3]||"",!0),Nf(this,E[4]),this.h=Of(E[5]||"",!0),NE(this,E[6]||"",!0),this.m=Of(E[7]||"")):(this.l=!1,this.i=new Df(null,this.l))}Oa.prototype.toString=function(){const f=[];var E=this.j;E&&f.push(Mf(E,cO,!0),":");var b=this.g;return(b||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Mf(E,cO,!0),"@"),f.push(xf(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&f.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Mf(b,b.charAt(0)=="/"?SY:EY,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Mf(b,IY)),f.join("")},Oa.prototype.resolve=function(f){const E=Bs(this);let b=!!f.j;b?Pf(E,f.j):b=!!f.o,b?E.o=f.o:b=!!f.g,b?E.g=f.g:b=f.u!=null;var M=f.h;if(b)Nf(E,f.u);else if(b=!!f.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var B=E.h.lastIndexOf("/");B!=-1&&(M=E.h.slice(0,B+1)+M)}if(B=M,B==".."||B==".")M="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){M=B.lastIndexOf("/",0)==0,B=B.split("/");const W=[];for(let pe=0;pe<B.length;){const nt=B[pe++];nt=="."?M&&pe==B.length&&W.push(""):nt==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),M&&pe==B.length&&W.push("")):(W.push(nt),M=!0)}M=W.join("/")}else M=B}return b?E.h=M:b=f.i.toString()!=="",b?NE(E,fO(f.i)):b=!!f.m,b&&(E.m=f.m),E};function Bs(f){return new Oa(f)}function Pf(f,E,b){f.j=b?Of(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Nf(f,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);f.u=E}else f.u=null}function NE(f,E,b){E instanceof Df?(f.i=E,AY(f.i,f.l)):(b||(E=Mf(E,bY)),f.i=new Df(E,f.l))}function jt(f,E,b){f.i.set(E,b)}function gy(f){return jt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Of(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Mf(f,E,b){return typeof f=="string"?(f=encodeURI(f).replace(E,CY),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function CY(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var cO=/[#\/\?@]/g,EY=/[#\?:]/g,SY=/[#\?]/g,bY=/[#\?@]/g,IY=/#/g;function Df(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function yl(f){f.g||(f.g=new Map,f.h=0,f.i&&TY(f.i,function(E,b){f.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}t=Df.prototype,t.add=function(f,E){yl(this),this.i=null,f=Qu(this,f);let b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(E),this.h+=1,this};function lO(f,E){yl(f),E=Qu(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function uO(f,E){return yl(f),E=Qu(f,E),f.g.has(E)}t.forEach=function(f,E){yl(this),this.g.forEach(function(b,M){b.forEach(function(B){f.call(E,B,M,this)},this)},this)};function dO(f,E){yl(f);let b=[];if(typeof E=="string")uO(f,E)&&(b=b.concat(f.g.get(Qu(f,E))));else for(f=Array.from(f.g.values()),E=0;E<f.length;E++)b=b.concat(f[E]);return b}t.set=function(f,E){return yl(this),this.i=null,f=Qu(this,f),uO(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=dO(this,f),f.length>0?String(f[0]):E):E};function hO(f,E,b){lO(f,E),b.length>0&&(f.i=null,f.g.set(Qu(f,E),m(b)),f.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(let M=0;M<E.length;M++){var b=E[M];const B=xf(b);b=dO(this,b);for(let W=0;W<b.length;W++){let pe=B;b[W]!==""&&(pe+="="+xf(b[W])),f.push(pe)}}return this.i=f.join("&")};function fO(f){const E=new Df;return E.i=f.i,f.g&&(E.g=new Map(f.g),E.h=f.h),E}function Qu(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function AY(f,E){E&&!f.j&&(yl(f),f.i=null,f.g.forEach(function(b,M){const B=M.toLowerCase();M!=B&&(lO(this,M),hO(this,B,b))},f)),f.j=E}function kY(f,E){const b=new Ue;if(o.Image){const M=new Image;M.onload=u(Ma,b,"TestLoadImage: loaded",!0,E,M),M.onerror=u(Ma,b,"TestLoadImage: error",!1,E,M),M.onabort=u(Ma,b,"TestLoadImage: abort",!1,E,M),M.ontimeout=u(Ma,b,"TestLoadImage: timeout",!1,E,M),o.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else E(!1)}function xY(f,E){const b=new Ue,M=new AbortController,B=setTimeout(()=>{M.abort(),Ma(b,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:M.signal}).then(W=>{clearTimeout(B),W.ok?Ma(b,"TestPingServer: ok",!0,E):Ma(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(B),Ma(b,"TestPingServer: error",!1,E)})}function Ma(f,E,b,M,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),M(b)}catch{}}function RY(){this.g=new gi}function OE(f){this.i=f.Sb||null,this.h=f.ab||!1}d(OE,Rr),OE.prototype.g=function(){return new yy(this.i,this.h)};function yy(f,E){Ve.call(this),this.H=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(yy,Ve),t=yy.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=E,this.readyState=1,Ff(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(E.body=f),(this.H||o).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lf(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ff(this)),this.g&&(this.readyState=3,Ff(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pO(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function pO(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?Lf(this):Ff(this),this.readyState==3&&pO(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Lf(this))},t.Na=function(f){this.g&&(this.response=f,Lf(this))},t.ga=function(){this.g&&Lf(this)};function Lf(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Ff(f)}t.setRequestHeader=function(f,E){this.A.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=E.next();return f.join(`\r
`)};function Ff(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(yy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function mO(f){let E="";return j(f,function(b,M){E+=M,E+=":",E+=b,E+=`\r
`}),E}function ME(f,E,b){e:{for(M in b){var M=!1;break e}M=!0}M||(b=mO(b),typeof f=="string"?b!=null&&xf(b):jt(f,E,b))}function sn(f){Ve.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(sn,Ve);var PY=/^https?$/i,NY=["POST","PUT"];t=sn.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,E,b,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cs.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(W){gO(this,W);return}if(f=b||"",b=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var B in M)b.set(B,M[B]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const W of M.keys())b.set(W,M.get(W));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),B=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(NY,E,void 0)>=0)||M||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,pe]of b)this.g.setRequestHeader(W,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(W){gO(this,W)}};function gO(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.o=5,yO(f),vy(f)}function yO(f){f.A||(f.A=!0,L(f,"complete"),L(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,L(this,"complete"),L(this,"abort"),vy(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vy(this,!0)),sn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vO(this):this.Xa())},t.Xa=function(){vO(this)};function vO(f){if(f.h&&typeof s<"u"){if(f.v&&Da(f)==4)setTimeout(f.Ca.bind(f),0);else if(L(f,"readystatechange"),Da(f)==4){f.h=!1;try{const W=f.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var M;if(M=W===0){let pe=String(f.D).match(aO)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),M=!PY.test(pe?pe.toLowerCase():"")}b=M}if(b)L(f,"complete"),L(f,"success");else{f.o=6;try{var B=Da(f)>2?f.g.statusText:""}catch{B=""}f.l=B+" ["+f.ca()+"]",yO(f)}}finally{vy(f)}}}}function vy(f,E){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const b=f.g;f.g=null,E||L(f,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Da(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Da(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),Nn(E)}};function wO(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function OY(f){const E={};f=(f.g&&Da(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<f.length;M++){if(P(f[M]))continue;var b=yY(f[M]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=E[B]||[];E[B]=W,W.push(b)}ie(E,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vf(f,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||E}function _O(f){this.za=0,this.i=[],this.j=new Ue,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vf("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vf("baseRetryDelayMs",5e3,f),this.Za=Vf("retryDelaySeedMs",1e4,f),this.Ta=Vf("forwardChannelMaxRetries",2,f),this.va=Vf("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new nO(f&&f.concurrentRequestLimit),this.Ba=new RY,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_O.prototype,t.ka=8,t.I=1,t.connect=function(f,E,b,M){On(0),this.W=f,this.H=E||{},b&&M!==void 0&&(this.H.OSID=b,this.H.OAID=M),this.F=this.X,this.J=xO(this,null,this.W),_y(this)};function DE(f){if(TO(f),f.I==3){var E=f.V++,b=Bs(f.J);if(jt(b,"SID",f.M),jt(b,"RID",E),jt(b,"TYPE","terminate"),jf(f,b),E=new Na(f,f.j,E),E.M=2,E.A=gy(Bs(b)),b=!1,o.navigator&&o.navigator.sendBeacon)try{b=o.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&o.Image&&(new Image().src=E.A,b=!0),b||(E.g=RO(E.j,null),E.g.ea(E.A)),E.F=Date.now(),my(E)}kO(f)}function wy(f){f.g&&(FE(f),f.g.cancel(),f.g=null)}function TO(f){wy(f),f.v&&(o.clearTimeout(f.v),f.v=null),Ty(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function _y(f){if(!rO(f.h)&&!f.m){f.m=!0;var E=f.Ea;x||S(),D||(x(),D=!0),A.add(E,f),f.D=0}}function MY(f,E){return iO(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=E.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ml(l(f.Ea,f,E),AO(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const B=new Na(this,this.j,f);let W=this.o;if(this.U&&(W?(W=Te(W),z(W,this.U)):W=this.U),this.u!==null||this.R||(B.J=W,W=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var M=this.i[b];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(E+=M,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=EO(this,B,E),b=Bs(this.J),jt(b,"RID",f),jt(b,"CVER",22),this.G&&jt(b,"X-HTTP-Session-Id",this.G),jf(this,b),W&&(this.R?E="headers="+xf(mO(W))+"&"+E:this.u&&ME(b,this.u,W)),PE(this.h,B),this.Ra&&jt(b,"TYPE","init"),this.S?(jt(b,"$req",E),jt(b,"SID","null"),B.U=!0,AE(B,b,null)):AE(B,b,E),this.I=2}}else this.I==3&&(f?CO(this,f):this.i.length==0||rO(this.h)||CO(this))};function CO(f,E){var b;E?b=E.l:b=f.V++;const M=Bs(f.J);jt(M,"SID",f.M),jt(M,"RID",b),jt(M,"AID",f.K),jf(f,M),f.u&&f.o&&ME(M,f.u,f.o),b=new Na(f,f.j,b,f.D+1),f.u===null&&(b.J=f.o),E&&(f.i=E.G.concat(f.i)),E=EO(f,b,1e3),b.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),PE(f.h,b),AE(b,M,E)}function jf(f,E){f.H&&j(f.H,function(b,M){jt(E,M,b)}),f.l&&j({},function(b,M){jt(E,M,b)})}function EO(f,E,b){b=Math.min(f.i.length,b);const M=f.l?l(f.l.Ka,f.l,f):null;e:{var B=f.i;let nt=-1;for(;;){const Mn=["count="+b];nt==-1?b>0?(nt=B[0].g,Mn.push("ofs="+nt)):nt=0:Mn.push("ofs="+nt);let Nt=!0;for(let Wn=0;Wn<b;Wn++){var W=B[Wn].g;const Hs=B[Wn].map;if(W-=nt,W<0)nt=Math.max(0,B[Wn].g-100),Nt=!1;else try{W="req"+W+"_"||"";try{var pe=Hs instanceof Map?Hs:Object.entries(Hs);for(const[wl,La]of pe){let Fa=La;a(La)&&(Fa=ft(La)),Mn.push(W+wl+"="+encodeURIComponent(Fa))}}catch(wl){throw Mn.push(W+"type="+encodeURIComponent("_badmap")),wl}}catch{M&&M(Hs)}}if(Nt){pe=Mn.join("&");break e}}pe=void 0}return f=f.i.splice(0,b),E.G=f,pe}function SO(f){if(!f.g&&!f.v){f.Y=1;var E=f.Da;x||S(),D||(x(),D=!0),A.add(E,f),f.A=0}}function LE(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ml(l(f.Da,f),AO(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,bO(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ml(l(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,On(10),wy(this),bO(this))};function FE(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function bO(f){f.g=new Na(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var E=Bs(f.na);jt(E,"RID","rpc"),jt(E,"SID",f.M),jt(E,"AID",f.K),jt(E,"CI",f.F?"0":"1"),!f.F&&f.ia&&jt(E,"TO",f.ia),jt(E,"TYPE","xmlhttp"),jf(f,E),f.u&&f.o&&ME(E,f.u,f.o),f.O&&(f.g.H=f.O);var b=f.g;f=f.ba,b.M=1,b.A=gy(Bs(E)),b.u=null,b.R=!0,Z1(b,f)}t.Va=function(){this.C!=null&&(this.C=null,wy(this),LE(this),On(19))};function Ty(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function IO(f,E){var b=null;if(f.g==E){Ty(f),FE(f),f.g=null;var M=2}else if(RE(f.h,E))b=E.G,sO(f.h,E),M=1;else return;if(f.I!=0){if(E.o)if(M==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var B=f.D;M=Mo(),L(M,new as(M,b)),_y(f)}else SO(f);else if(B=E.m,B==3||B==0&&E.X>0||!(M==1&&MY(f,E)||M==2&&LE(f)))switch(b&&b.length>0&&(E=f.h,E.i=E.i.concat(b)),B){case 1:vl(f,5);break;case 4:vl(f,10);break;case 3:vl(f,6);break;default:vl(f,2)}}}function AO(f,E){let b=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(b*=2),b*E}function vl(f,E){if(f.j.info("Error code "+E),E==2){var b=l(f.bb,f),M=f.Ua;const B=!M;M=new Oa(M||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pf(M,"https"),gy(M),B?kY(M.toString(),b):xY(M.toString(),b)}else On(2);f.I=0,f.l&&f.l.pa(E),kO(f),TO(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))};function kO(f){if(f.I=0,f.ja=[],f.l){const E=oO(f.h);(E.length!=0||f.i.length!=0)&&(w(f.ja,E),w(f.ja,f.i),f.h.i.length=0,m(f.i),f.i.length=0),f.l.oa()}}function xO(f,E,b){var M=b instanceof Oa?Bs(b):new Oa(b);if(M.g!="")E&&(M.g=E+"."+M.g),Nf(M,M.u);else{var B=o.location;M=B.protocol,E=E?E+"."+B.hostname:B.hostname,B=+B.port;const W=new Oa(null);M&&Pf(W,M),E&&(W.g=E),B&&Nf(W,B),b&&(W.h=b),M=W}return b=f.G,E=f.wa,b&&E&&jt(M,b,E),jt(M,"VER",f.ka),jf(f,M),M}function RO(f,E,b){if(E&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Aa&&!f.ma?new sn(new OE({ab:b})):new sn(f.ma),E.Fa(f.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function PO(){}t=PO.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Cy(){}Cy.prototype.g=function(f,E){return new vi(f,E)};function vi(f,E){Ve.call(this),this.g=new _O(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(f?f["X-WebChannel-Client-Profile"]=E.sa:f={"X-WebChannel-Client-Profile":E.sa}),this.g.U=f,(f=E&&E.Qb)&&!P(f)&&(this.g.u=f),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!P(E)&&(this.g.G=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Yu(this)}d(vi,Ve),vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vi.prototype.close=function(){DE(this.g)},vi.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.v&&(b={},b.__data__=ft(f),f=b);E.i.push(new _Y(E.Ya++,f)),E.I==3&&_y(E)},vi.prototype.N=function(){this.g.l=null,delete this.j,DE(this.g),delete this.g,vi.Z.N.call(this)};function NO(f){Hn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const b in E){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}d(NO,Hn);function OO(){Us.call(this),this.status=1}d(OO,Us);function Yu(f){this.g=f}d(Yu,PO),Yu.prototype.ra=function(){L(this.g,"a")},Yu.prototype.qa=function(f){L(this.g,new NO(f))},Yu.prototype.pa=function(f){L(this.g,new OO)},Yu.prototype.oa=function(){L(this.g,"b")},Cy.prototype.createWebChannel=Cy.prototype.g,vi.prototype.send=vi.prototype.o,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,d6=function(){return new Cy},u6=function(){return Mo()},l6=nr,vA={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,Fv=Vi,Yr.COMPLETE="complete",c6=Yr,Oo.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,mp=Oo,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,a6=sn}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});const VL="@firebase/firestore",jL="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Fg("@firebase/firestore");function ld(){return Tu.logLevel}function be(t,...e){if(Tu.logLevel<=ct.DEBUG){const n=e.map(VR);Tu.debug(`Firestore (${hf}): ${t}`,...n)}}function ma(t,...e){if(Tu.logLevel<=ct.ERROR){const n=e.map(VR);Tu.error(`Firestore (${hf}): ${t}`,...n)}}function Eh(t,...e){if(Tu.logLevel<=ct.WARN){const n=e.map(VR);Tu.warn(`Firestore (${hf}): ${t}`,...n)}}function VR(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,h6(t,r,n)}function h6(t,e,n){let r=`FIRESTORE (${hf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ma(r),new Error(r)}function bt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||h6(e,i,r)}function Je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qde{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cr.UNAUTHENTICATED))}shutdown(){}}class Yde{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Xde{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new f6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Cr(e)}}class Jde{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Zde{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Jde(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ehe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const r=s=>{s.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new UL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new UL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function the(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=the(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ut(t,e){return t<e?-1:t>e?1:0}function wA(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return NS(i)===NS(s)?ut(i,s):NS(i)?1:-1}return ut(t.length,e.length)}const nhe=55296,rhe=57343;function NS(t){const e=t.charCodeAt(0);return e>=nhe&&e<=rhe}function Sh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="__name__";class Qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Qs.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ut(e.length,n.length)}static compareSegments(e,n){const r=Qs.isNumericId(e),i=Qs.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Qs.extractNumericId(e).compare(Qs.extractNumericId(n)):wA(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pc.fromString(e.substring(4,e.length-2))}}class Ft extends Qs{construct(e,n,r){return new Ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ft(n)}static emptyPath(){return new Ft([])}}const ihe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends Qs{construct(e,n,r){return new ur(e,n,r)}static isValidIdentifier(e){return ihe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$L}static keyField(){return new ur([$L])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ye(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ye(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ye(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(n)}static emptyPath(){return new ur([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Ft.fromString(e))}static fromName(e){return new Oe(Ft.fromString(e).popFirst(5))}static empty(){return new Oe(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t,e,n){if(!n)throw new ye(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function she(t,e,n,r){if(e===!0&&r===!0)throw new ye(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BL(t){if(!Oe.isDocumentKey(t))throw new ye(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HL(t){if(Oe.isDocumentKey(t))throw new ye(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function m6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fC(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$e(12329,{type:typeof t})}function Ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fC(t);throw new ye(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vg(t,e){if(!m6(t))throw new ye(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ye(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=-62135596800,WL=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*WL);return new Ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zL)throw new ye(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WL}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vg(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:kn("string",Ht._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Ht(0,0))}static max(){return new Qe(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function ohe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Qe.fromTimestamp(r===1e9?new Ht(n+1,0):new Ht(n,r));return new Bc(i,Oe.empty(),e)}function ahe(t){return new Bc(t.readTime,t.key,zm)}class Bc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bc(Qe.min(),Oe.empty(),zm)}static max(){return new Bc(Qe.max(),Oe.empty(),zm)}}function che(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(t.documentKey,e.documentKey),n!==0?n:ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lhe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uhe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==lhe)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,r)=>{n(e)})}static reject(e){return new re((n,r)=>{r(e)})}static waitFor(e){return new re((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next(i=>i?re.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new re((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new re((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dhe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pC.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=-1;function mC(t){return t==null}function a_(t){return t===0&&1/t==-1/0}function hhe(t){return typeof t=="number"&&Number.isInteger(t)&&!a_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="";function fhe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KL(e)),e=phe(t.get(n),e);return KL(e)}function phe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case g6:n+="";break;default:n+=s}}return n}function KL(t){return t+g6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ul(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=class _A{constructor(e,n){this.comparator=e,this.root=n||Nc.EMPTY}insert(e,n){return new _A(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nc.BLACK,null,null))}remove(e){return new _A(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nc.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tv(this.root,e,this.comparator,!1)}getReverseIterator(){return new tv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tv(this.root,e,this.comparator,!0)}},tv=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nc=class jo{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??jo.RED,this.left=i??jo.EMPTY,this.right=s??jo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new jo(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}};Nc.EMPTY=null,Nc.RED=!0,Nc.BLACK=!1;Nc.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Nc(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new GL(this.data.getIterator())}getIteratorFrom(e){return new GL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class GL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new Ii([])}unionWith(e){let n=new Un(ur.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ii(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new v6("Invalid base64 string: "+s):s}}(e);return new mr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const mhe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hc(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=mhe.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(t.seconds),nanos:gn(t.nanos)}}function gn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zc(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="server_timestamp",_6="__type__",T6="__previous_value__",C6="__local_write_time__";function $R(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_6])==null?void 0:r.stringValue)===w6}function gC(t){const e=t.mapValue.fields[T6];return $R(e)?gC(e):e}function Wm(t){const e=Hc(t.mapValue.fields[C6].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe{constructor(e,n,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}}const c_="(default)";class Km{constructor(e,n){this.projectId=e,this.database=n||c_}static empty(){return new Km("","")}get isDefaultDatabase(){return this.database===c_}isEqual(e){return e instanceof Km&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="__type__",yhe="__max__",nv={mapValue:{}},S6="__vector__",l_="value";function Wc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$R(t)?4:whe(t)?9007199254740991:vhe(t)?10:11:$e(28295,{value:t})}function bo(t,e){if(t===e)return!0;const n=Wc(t);if(n!==Wc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wm(t).isEqual(Wm(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hc(i.timestampValue),a=Hc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zc(i.bytesValue).isEqual(zc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return gn(i.geoPointValue.latitude)===gn(s.geoPointValue.latitude)&&gn(i.geoPointValue.longitude)===gn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gn(i.integerValue)===gn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gn(i.doubleValue),a=gn(s.doubleValue);return o===a?a_(o)===a_(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Sh(t.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qL(o)!==qL(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!bo(o[c],a[c])))return!1;return!0}(t,e);default:return $e(52216,{left:t})}}function qm(t,e){return(t.values||[]).find(n=>bo(n,e))!==void 0}function bh(t,e){if(t===e)return 0;const n=Wc(t),r=Wc(e);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=gn(s.integerValue||s.doubleValue),c=gn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return QL(t.timestampValue,e.timestampValue);case 4:return QL(Wm(t),Wm(e));case 5:return wA(t.stringValue,e.stringValue);case 6:return function(s,o){const a=zc(s),c=zc(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ut(a[l],c[l]);if(u!==0)return u}return ut(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ut(gn(s.latitude),gn(o.latitude));return a!==0?a:ut(gn(s.longitude),gn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return YL(t.arrayValue,e.arrayValue);case 10:return function(s,o){var h,m,w,y;const a=s.fields||{},c=o.fields||{},l=(h=a[l_])==null?void 0:h.arrayValue,u=(m=c[l_])==null?void 0:m.arrayValue,d=ut(((w=l==null?void 0:l.values)==null?void 0:w.length)||0,((y=u==null?void 0:u.values)==null?void 0:y.length)||0);return d!==0?d:YL(l,u)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===nv.mapValue&&o===nv.mapValue)return 0;if(s===nv.mapValue)return 1;if(o===nv.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){const h=wA(c[d],u[d]);if(h!==0)return h;const m=bh(a[c[d]],l[u[d]]);if(m!==0)return m}return ut(c.length,u.length)}(t.mapValue,e.mapValue);default:throw $e(23264,{he:n})}}function QL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ut(t,e);const n=Hc(t),r=Hc(e),i=ut(n.seconds,r.seconds);return i!==0?i:ut(n.nanos,r.nanos)}function YL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=bh(n[i],r[i]);if(s)return s}return ut(n.length,r.length)}function Ih(t){return TA(t)}function TA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=TA(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${TA(n.fields[o])}`;return i+"}"}(t.mapValue):$e(61005,{value:t})}function Vv(t){switch(Wc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gC(t);return e?16+Vv(e):16;case 5:return 2*t.stringValue.length;case 6:return zc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Vv(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ul(r.fields,(s,o)=>{i+=s.length+Vv(o)}),i}(t.mapValue);default:throw $e(13486,{value:t})}}function XL(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function CA(t){return!!t&&"integerValue"in t}function BR(t){return!!t&&"arrayValue"in t}function JL(t){return!!t&&"nullValue"in t}function ZL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jv(t){return!!t&&"mapValue"in t}function vhe(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[E6])==null?void 0:r.stringValue)===S6}function $p(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ul(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$p(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$p(t.arrayValue.values[n]);return e}return{...t}}function whe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yhe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(n)}setAll(e){let n=ur.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=$p(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());jv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ul(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ni($p(this.value))}}function b6(t){const e=[];return ul(t.fields,(n,r)=>{const i=new ur([n]);if(jv(r)){const s=b6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Sr(e,0,Qe.min(),Qe.min(),Qe.min(),ni.empty(),0)}static newFoundDocument(e,n,r,i){return new Sr(e,1,n,Qe.min(),r,i,0)}static newNoDocument(e,n){return new Sr(e,2,n,Qe.min(),Qe.min(),ni.empty(),0)}static newUnknownDocument(e,n){return new Sr(e,3,n,Qe.min(),Qe.min(),ni.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.position=e,this.inclusive=n}}function eF(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Oe.comparator(Oe.fromName(o.referenceValue),n.key):r=bh(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tF(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n="asc"){this.field=e,this.dir=n}}function _he(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{}class An extends I6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Che(e,n,r):n==="array-contains"?new bhe(e,r):n==="in"?new Ihe(e,r):n==="not-in"?new Ahe(e,r):n==="array-contains-any"?new khe(e,r):new An(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ehe(e,r):new She(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bh(n,this.value)):n!==null&&Wc(this.value)===Wc(n)&&this.matchesComparison(bh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ls extends I6{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ls(e,n)}matches(e){return A6(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A6(t){return t.op==="and"}function k6(t){return The(t)&&A6(t)}function The(t){for(const e of t.filters)if(e instanceof Ls)return!1;return!0}function EA(t){if(t instanceof An)return t.field.canonicalString()+t.op.toString()+Ih(t.value);if(k6(t))return t.filters.map(e=>EA(e)).join(",");{const e=t.filters.map(n=>EA(n)).join(",");return`${t.op}(${e})`}}function x6(t,e){return t instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.field.isEqual(i.field)&&bo(r.value,i.value)}(t,e):t instanceof Ls?function(r,i){return i instanceof Ls&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&x6(o,i.filters[a]),!0):!1}(t,e):void $e(19439)}function R6(t){return t instanceof An?function(n){return`${n.field.canonicalString()} ${n.op} ${Ih(n.value)}`}(t):t instanceof Ls?function(n){return n.op.toString()+" {"+n.getFilters().map(R6).join(" ,")+"}"}(t):"Filter"}class Che extends An{constructor(e,n,r){super(e,n,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ehe extends An{constructor(e,n){super(e,"in",n),this.keys=P6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class She extends An{constructor(e,n){super(e,"not-in",n),this.keys=P6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P6(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class bhe extends An{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return BR(n)&&qm(n.arrayValue,this.value)}}class Ihe extends An{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qm(this.value.arrayValue,n)}}class Ahe extends An{constructor(e,n){super(e,"not-in",n)}matches(e){if(qm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qm(this.value.arrayValue,n)}}class khe extends An{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!BR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function nF(t,e=null,n=[],r=[],i=null,s=null,o=null){return new xhe(t,e,n,r,i,s,o)}function HR(t){const e=Je(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>EA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mC(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ih(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ih(r)).join(",")),e.Te=n}return e.Te}function zR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_he(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!x6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tF(t.startAt,e.startAt)&&tF(t.endAt,e.endAt)}function SA(t){return Oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rhe(t,e,n,r,i,s,o,a){return new mf(t,e,n,r,i,s,o,a)}function yC(t){return new mf(t)}function rF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N6(t){return t.collectionGroup!==null}function Bp(t){const e=Je(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Un(ur.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Gm(s,r))}),n.has(ur.keyField().canonicalString())||e.Ie.push(new Gm(ur.keyField(),r))}return e.Ie}function po(t){const e=Je(t);return e.Ee||(e.Ee=Phe(e,Bp(t))),e.Ee}function Phe(t,e){if(t.limitType==="F")return nF(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gm(i.field,s)});const n=t.endAt?new u_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new u_(t.startAt.position,t.startAt.inclusive):null;return nF(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bA(t,e){const n=t.filters.concat([e]);return new mf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function d_(t,e,n){return new mf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vC(t,e){return zR(po(t),po(e))&&t.limitType===e.limitType}function O6(t){return`${HR(po(t))}|lt:${t.limitType}`}function ud(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>R6(i)).join(", ")}]`),mC(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ih(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ih(i)).join(",")),`Target(${r})`}(po(t))}; limitType=${t.limitType})`}function wC(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Bp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const l=eF(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Bp(r),i)||r.endAt&&!function(o,a,c){const l=eF(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Bp(r),i))}(t,e)}function Nhe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function M6(t){return(e,n)=>{let r=!1;for(const i of Bp(t)){const s=Ohe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ohe(t,e,n){const r=t.field.isKeyField()?Oe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?bh(c,l):$e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ul(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return y6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mhe=new Pn(Oe.comparator);function ga(){return Mhe}const D6=new Pn(Oe.comparator);function gp(...t){let e=D6;for(const n of t)e=e.insert(n.key,n);return e}function L6(t){let e=D6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $l(){return Hp()}function F6(){return Hp()}function Hp(){return new $u(t=>t.toString(),(t,e)=>t.isEqual(e))}const Dhe=new Pn(Oe.comparator),Lhe=new Un(Oe.comparator);function dt(...t){let e=Lhe;for(const n of t)e=e.add(n);return e}const Fhe=new Un(ut);function Vhe(){return Fhe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a_(e)?"-0":e}}function V6(t){return{integerValue:""+t}}function jhe(t,e){return hhe(e)?V6(e):WR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this._=void 0}}function Uhe(t,e,n){return t instanceof Qm?function(i,s){const o={fields:{[_6]:{stringValue:w6},[C6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$R(s)&&(s=gC(s)),s&&(o.fields[T6]=s),{mapValue:o}}(n,e):t instanceof Ah?U6(t,e):t instanceof Ym?$6(t,e):function(i,s){const o=j6(i,s),a=iF(o)+iF(i.Ae);return CA(o)&&CA(i.Ae)?V6(a):WR(i.serializer,a)}(t,e)}function $he(t,e,n){return t instanceof Ah?U6(t,e):t instanceof Ym?$6(t,e):n}function j6(t,e){return t instanceof h_?function(r){return CA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Qm extends _C{}class Ah extends _C{constructor(e){super(),this.elements=e}}function U6(t,e){const n=B6(e);for(const r of t.elements)n.some(i=>bo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ym extends _C{constructor(e){super(),this.elements=e}}function $6(t,e){let n=B6(e);for(const r of t.elements)n=n.filter(i=>!bo(i,r));return{arrayValue:{values:n}}}class h_ extends _C{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iF(t){return gn(t.integerValue||t.doubleValue)}function B6(t){return BR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n){this.field=e,this.transform=n}}function Bhe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ah&&i instanceof Ah||r instanceof Ym&&i instanceof Ym?Sh(r.elements,i.elements,bo):r instanceof h_&&i instanceof h_?bo(r.Ae,i.Ae):r instanceof Qm&&i instanceof Qm}(t.transform,e.transform)}class Hhe{constructor(e,n){this.version=e,this.transformResults=n}}class $r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class TC{}function z6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new CC(t.key,$r.none()):new jg(t.key,t.data,$r.none());{const n=t.data,r=ni.empty();let i=new Un(ur.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dl(t.key,r,new Ii(i.toArray()),$r.none())}}function zhe(t,e,n){t instanceof jg?function(i,s,o){const a=i.value.clone(),c=oF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof dl?function(i,s,o){if(!Uv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=oF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(W6(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zp(t,e,n,r){return t instanceof jg?function(s,o,a,c){if(!Uv(s.precondition,o))return a;const l=s.value.clone(),u=aF(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof dl?function(s,o,a,c){if(!Uv(s.precondition,o))return a;const l=aF(s.fieldTransforms,c,o),u=o.data;return u.setAll(W6(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Uv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Whe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=j6(r.transform,i||null);s!=null&&(n===null&&(n=ni.empty()),n.set(r.field,s))}return n||null}function sF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sh(r,i,(s,o)=>Bhe(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jg extends TC{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dl extends TC{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function W6(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function oF(t,e,n){const r=new Map;bt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$he(o,a,n[i]))}return r}function aF(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Uhe(s,o,e))}return r}class CC extends TC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Khe extends TC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qhe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zhe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=F6();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=z6(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&Sh(this.mutations,e.mutations,(n,r)=>sF(n,r))&&Sh(this.baseMutations,e.baseMutations,(n,r)=>sF(n,r))}}class KR{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){bt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Dhe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new KR(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ghe=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qhe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn,mt;function Yhe(t){switch(t){case Z.OK:return $e(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return $e(15467,{code:t})}}function K6(t){if(t===void 0)return ma("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Tn.OK:return Z.OK;case Tn.CANCELLED:return Z.CANCELLED;case Tn.UNKNOWN:return Z.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return Z.INTERNAL;case Tn.UNAVAILABLE:return Z.UNAVAILABLE;case Tn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Tn.NOT_FOUND:return Z.NOT_FOUND;case Tn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Tn.ABORTED:return Z.ABORTED;case Tn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Tn.DATA_LOSS:return Z.DATA_LOSS;default:return $e(39323,{code:t})}}(mt=Tn||(Tn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xhe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jhe=new Pc([4294967295,4294967295],0);function cF(t){const e=Xhe().encode(t),n=new o6;return n.update(e),new Uint8Array(n.digest())}function lF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pc([n,r],0),new Pc([i,s],0)]}class qR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yp(`Invalid padding: ${n}`);if(r<0)throw new yp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Pc.fromNumber(r)));return i.compare(Jhe)===1&&(i=new Pc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cF(e),[r,i]=lF(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new qR(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=cF(e),[r,i]=lF(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ug.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new EC(Qe.min(),i,new Pn(ut),ga(),dt())}}class Ug{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ug(r,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class q6{constructor(e,n){this.targetId=e,this.Ce=n}}class G6{constructor(e,n,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uF{constructor(){this.ve=0,this.Fe=dF(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),n=dt(),r=dt();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$e(38017,{changeType:s})}}),new Ug(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=dF()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Zhe{constructor(e){this.Ge=e,this.ze=new Map,this.je=ga(),this.Je=rv(),this.He=rv(),this.Ye=new Pn(ut)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(SA(s))if(r===0){const o=new Oe(s.path);this.et(n,o,Sr.newNoDocument(o,Qe.min()))}else bt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=zc(r).toUint8Array()}catch(c){if(c instanceof v6)return Eh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new qR(o,i,s)}catch(c){return Eh(c instanceof yp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&SA(a.target)){const c=new Oe(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Sr.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=dt();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new EC(e,n,this.Ye,this.je,r);return this.je=ga(),this.Je=rv(),this.He=rv(),this.Ye=new Pn(ut),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new uF,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Un(ut),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Un(ut),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uF),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rv(){return new Pn(Oe.comparator)}function dF(){return new Pn(Oe.comparator)}const efe={asc:"ASCENDING",desc:"DESCENDING"},tfe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nfe={and:"AND",or:"OR"};class rfe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function IA(t,e){return t.useProto3Json||mC(e)?e:{value:e}}function f_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ife(t,e){return f_(t,e.toTimestamp())}function mo(t){return bt(!!t,49232),Qe.fromTimestamp(function(n){const r=Hc(n);return new Ht(r.seconds,r.nanos)}(t))}function GR(t,e){return AA(t,e).canonicalString()}function AA(t,e){const n=function(i){return new Ft(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Y6(t){const e=Ft.fromString(t);return bt(tz(e),10190,{key:e.toString()}),e}function kA(t,e){return GR(t.databaseId,e.path)}function OS(t,e){const n=Y6(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Oe(J6(n))}function X6(t,e){return GR(t.databaseId,e)}function sfe(t){const e=Y6(t);return e.length===4?Ft.emptyPath():J6(e)}function xA(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J6(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hF(t,e,n){return{name:kA(t,e),fields:n.value.mapValue.fields}}function ofe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$e(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(bt(u===void 0||typeof u=="string",58123),mr.fromBase64String(u||"")):(bt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),mr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?Z.UNKNOWN:K6(l.code);return new ye(u,l.message||"")}(o);n=new G6(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=OS(t,r.document.name),s=mo(r.document.updateTime),o=r.document.createTime?mo(r.document.createTime):Qe.min(),a=new ni({mapValue:{fields:r.document.fields}}),c=Sr.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new $v(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=OS(t,r.document),s=r.readTime?mo(r.readTime):Qe.min(),o=Sr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $v([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=OS(t,r.document),s=r.removedTargetIds||[];n=new $v([],s,i,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Qhe(i,s),a=r.targetId;n=new q6(a,o)}}return n}function afe(t,e){let n;if(e instanceof jg)n={update:hF(t,e.key,e.value)};else if(e instanceof CC)n={delete:kA(t,e.key)};else if(e instanceof dl)n={update:hF(t,e.key,e.data),updateMask:gfe(e.fieldMask)};else{if(!(e instanceof Khe))return $e(16599,{Vt:e.type});n={verify:kA(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Qm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ah)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ym)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof h_)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw $e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ife(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$e(27497)}(t,e.precondition)),n}function cfe(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?mo(i.updateTime):mo(s);return o.isEqual(Qe.min())&&(o=mo(s)),new Hhe(o,i.transformResults||[])}(n,e))):[]}function lfe(t,e){return{documents:[X6(t,e.path)]}}function ufe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X6(t,i);const s=function(l){if(l.length!==0)return ez(Ls.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:dd(h.field),direction:ffe(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=IA(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function dfe(t){let e=sfe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){bt(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const h=Z6(d);return h instanceof Ls&&k6(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(w){return new Gm(hd(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,mC(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){const h=!!d.before,m=d.values||[];return new u_(m,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const h=!d.before,m=d.values||[];return new u_(m,h)}(n.endAt)),Rhe(e,i,o,s,a,"F",c,l)}function hfe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hd(n.unaryFilter.field);return An.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hd(n.unaryFilter.field);return An.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hd(n.unaryFilter.field);return An.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hd(n.unaryFilter.field);return An.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}}(t):t.fieldFilter!==void 0?function(n){return An.create(hd(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ls.create(n.compositeFilter.filters.map(r=>Z6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $e(1026)}}(n.compositeFilter.op))}(t):$e(30097,{filter:t})}function ffe(t){return efe[t]}function pfe(t){return tfe[t]}function mfe(t){return nfe[t]}function dd(t){return{fieldPath:t.canonicalString()}}function hd(t){return ur.fromServerFormat(t.fieldPath)}function ez(t){return t instanceof An?function(n){if(n.op==="=="){if(ZL(n.value))return{unaryFilter:{field:dd(n.field),op:"IS_NAN"}};if(JL(n.value))return{unaryFilter:{field:dd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZL(n.value))return{unaryFilter:{field:dd(n.field),op:"IS_NOT_NAN"}};if(JL(n.value))return{unaryFilter:{field:dd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(n.field),op:pfe(n.op),value:n.value}}}(t):t instanceof Ls?function(n){const r=n.getFilters().map(i=>ez(i));return r.length===1?r[0]:{compositeFilter:{op:mfe(n.op),filters:r}}}(t):$e(54877,{filter:t})}function gfe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tz(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,i,s=Qe.min(),o=Qe.min(),a=mr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yfe{constructor(e){this.yt=e}}function vfe(t){const e=dfe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?d_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wfe{constructor(){this.Cn=new _fe}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Bc.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Bc.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class _fe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Un(Ft.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nz=41943040;class Zr{static withCacheSize(e){return new Zr(e,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr.DEFAULT_COLLECTION_PERCENTILE=10,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zr.DEFAULT=new Zr(nz,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zr.DISABLED=new Zr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new kh(0)}static cr(){return new kh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="LruGarbageCollector",Tfe=1048576;function mF([t,e],[n,r]){const i=ut(t,n);return i===0?ut(e,r):i}class Cfe{constructor(e){this.Ir=e,this.buffer=new Un(mF),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Efe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(pF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pf(n)?be(pF,"Ignoring IndexedDB error during garbage collection: ",n):await ff(n)}await this.Vr(3e5)})}}class Sfe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return re.resolve(pC.ce);const r=new Cfe(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(fF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fF):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),ld()<=ct.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function bfe(t,e){return new Sfe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ife{constructor(){this.changes=new $u(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kfe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zp(r.mutation,i,Ii.empty(),Ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=dt()){const i=$l();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$l();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,dt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ga();const o=Hp(),a=function(){return Hp()}();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof dl)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),zp(u.mutation,l,u.mutation.getFieldMask(),Ht.now())):o.set(l.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>a.set(l,new Afe(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Hp();let i=new Pn((o,a)=>o-a),s=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||Ii.empty();u=a.applyToLocalView(l,u),r.set(c,u);const d=(i.get(a.batchId)||dt()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=F6();u.forEach(h=>{if(!s.has(h)){const m=z6(n.get(h),r.get(h));m!==null&&d.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):N6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):re.resolve($l());let a=zm,c=s;return o.next(l=>re.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?re.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,dt())).next(u=>({batchId:a,changes:L6(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next(r=>{let i=gp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gp();return this.indexManager.getCollectionParents(e,s).next(a=>re.forEach(a,c=>{const l=function(d,h){return new mf(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,Sr.newInvalidDocument(u)))});let a=gp();return o.forEach((c,l)=>{const u=s.get(c);u!==void 0&&zp(u.mutation,l,Ii.empty(),Ht.now()),wC(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xfe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mo(i.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:vfe(i.bundledQuery),readTime:mo(i.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(){this.overlays=new Pn(Oe.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$l();return re.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),re.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const i=$l(),s=n.length+1,o=new Oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return re.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pn((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=$l(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=$l(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return re.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ghe(n,r));let s=this.qr.get(n);s===void 0&&(s=dt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pfe{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.Qr=new Un(Yn.$r),this.Ur=new Un(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Yn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Yn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Oe(new Ft([])),r=new Yn(n,e),i=new Yn(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Oe(new Ft([])),r=new Yn(n,e),i=new Yn(n,e+1);let s=dt();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Yn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Oe.comparator(e.key,n.key)||ut(e.Yr,n.Yr)}static Kr(e,n){return ut(e.Yr,n.Yr)||Oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nfe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Un(Yn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qhe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Yn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?UR:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yn(n,0),i=new Yn(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Un(ut);return n.forEach(i=>{const s=new Yn(i,0),o=new Yn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Oe.isDocumentKey(s)||(s=s.child(""));const o=new Yn(new Oe(s),0);let a=new Un(ut);return this.Zr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),re.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){bt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(n.mutations,i=>{const s=new Yn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Yn(n,0),i=this.Zr.firstAfterOrEqual(r);return re.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ofe{constructor(e){this.ri=e,this.docs=function(){return new Pn(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(n))}getEntries(e,n){let r=ga();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Sr.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ga();const o=n.path,a=new Oe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||che(ahe(u),r)<=0||(i.has(u.key)||wC(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$e(9500)}ii(e,n){return re.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mfe(this)}getSize(e){return re.resolve(this.size)}}class Mfe extends Ife{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dfe{constructor(e){this.persistence=e,this.si=new $u(n=>HR(n),zR),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new QR,this.targetCount=0,this.ai=kh.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new kh(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),re.waitFor(s).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),re.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,n){this.ui={},this.overlays={},this.ci=new pC(0),this.li=!1,this.li=!0,this.hi=new Pfe,this.referenceDelegate=e(this),this.Pi=new Dfe(this),this.indexManager=new wfe,this.remoteDocumentCache=function(i){return new Ofe(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new yfe(n),this.Ii=new xfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rfe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Nfe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const i=new Lfe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return re.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Lfe extends uhe{constructor(e){super(),this.currentSequenceNumber=e}}class YR{constructor(e){this.persistence=e,this.Ri=new QR,this.Vi=null}static mi(e){return new YR(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,r=>{const i=Oe.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Qe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class p_{constructor(e,n){this.persistence=e,this.pi=new $u(r=>fhe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=bfe(this,n)}static mi(e,n){return new p_(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?re.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Qe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vv(e.data.value)),n}br(e,n,r){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=dt(),i=dt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new XR(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ffe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vfe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Iue()?8:dhe(kr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Ffe;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ld()<=ct.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",ud(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(ld()<=ct.DEBUG&&be("QueryEngine","Query:",ud(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ld()<=ct.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",ud(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,po(n))):re.resolve())}ys(e,n){if(rF(n))return re.resolve(null);let r=po(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=d_(n,null,"F"),r=po(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=dt(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,d_(n,null,"F")):this.vs(e,l,n,c)}))})))}ws(e,n,r,i){return rF(n)||i.isEqual(Qe.min())?re.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?re.resolve(null):(ld()<=ct.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ud(n)),this.vs(e,o,n,ohe(i,zm)).next(a=>a))})}Ds(e,n){let r=new Un(M6(e));return n.forEach((i,s)=>{wC(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ld()<=ct.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",ud(n)),this.ps.getDocumentsMatchingQuery(e,n,Bc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="LocalStore",jfe=3e8;class Ufe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Pn(ut),this.xs=new $u(s=>HR(s),zR),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kfe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function $fe(t,e,n,r){return new Ufe(t,e,n,r)}async function iz(t,e){const n=Je(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=dt();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function Bfe(t,e){const n=Je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const d=l.batch,h=d.keys();let m=re.resolve();return h.forEach(w=>{m=m.next(()=>u.getEntry(c,w)).next(y=>{const _=l.docVersions.get(w);bt(_!==null,48541),y.version.compareTo(_)<0&&(d.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),u.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=dt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sz(t){const e=Je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Hfe(t,e){const n=Je(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let m=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(mr.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(y,_,v){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=jfe?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,m,u)&&a.push(n.Pi.updateTargetData(s,m))});let c=ga(),l=dt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(zfe(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!r.isEqual(Qe.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return re.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Ms=i,s))}function zfe(t,e,n){let r=dt(),i=dt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ga();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Qe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):be(JR,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function Wfe(t,e){const n=Je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=UR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kfe(t,e){const n=Je(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,re.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new fc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function RA(t,e,n){const r=Je(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!pf(o))throw o;be(JR,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function gF(t,e,n){const r=Je(t);let i=Qe.min(),s=dt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const d=Je(c),h=d.xs.get(u);return h!==void 0?re.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,u)}(r,o,po(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Qe.min(),n?s:dt())).next(a=>(qfe(r,Nhe(e),a),{documents:a,Qs:s})))}function qfe(t,e,n){let r=t.Os.get(e)||Qe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class yF{constructor(){this.activeTargetIds=Vhe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gfe{constructor(){this.Mo=new yF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yF,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="ConnectivityMonitor";class wF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(vF,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(vF,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iv=null;function PA(){return iv===null?iv=function(){return 268435456+Math.round(2147483648*Math.random())}():iv++,"0x"+iv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="RestConnection",Yfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xfe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===c_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=PA(),a=this.zo(e,n.toUriEncodedString());be(MS,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:l}=new URL(a),u=rs(l);return this.Jo(e,a,c,r,u).then(d=>(be(MS,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Eh(MS,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Yfe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jfe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="WebChannelConnection";class Zfe extends Xfe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=PA();return new Promise((a,c)=>{const l=new a6;l.setWithCredentials(!0),l.listenOnce(c6.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fv.NO_ERROR:const d=l.getResponseJson();be(_r,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Fv.TIMEOUT:be(_r,`RPC '${e}' ${o} timed out`),c(new ye(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Fv.HTTP_ERROR:const h=l.getStatus();if(be(_r,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const y=function(v){const T=v.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(T)>=0?T:Z.UNKNOWN}(w.status);c(new ye(y,w.message))}else c(new ye(Z.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ye(Z.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{be(_r,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);be(_r,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}T_(e,n,r){const i=PA(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=d6(),a=u6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=s.join("");be(_r,`Creating RPC '${e}' stream ${i}: ${u}`,c);const d=o.createWebChannel(u,c);this.I_(d);let h=!1,m=!1;const w=new Jfe({Yo:_=>{m?be(_r,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(be(_r,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),be(_r,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},Zo:()=>d.close()}),y=(_,v,T)=>{_.listen(v,C=>{try{T(C)}catch(I){setTimeout(()=>{throw I},0)}})};return y(d,mp.EventType.OPEN,()=>{m||(be(_r,`RPC '${e}' stream ${i} transport opened.`),w.o_())}),y(d,mp.EventType.CLOSE,()=>{m||(m=!0,be(_r,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(d))}),y(d,mp.EventType.ERROR,_=>{m||(m=!0,Eh(_r,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),w.a_(new ye(Z.UNAVAILABLE,"The operation could not be completed")))}),y(d,mp.EventType.MESSAGE,_=>{var v;if(!m){const T=_.data[0];bt(!!T,16349);const C=T,I=(C==null?void 0:C.error)||((v=C[0])==null?void 0:v.error);if(I){be(_r,`RPC '${e}' stream ${i} received error:`,I);const x=I.status;let D=function(k){const N=Tn[k];if(N!==void 0)return K6(N)}(x),A=I.message;D===void 0&&(D=Z.INTERNAL,A="Unknown error status: "+x+" with message "+I.message),m=!0,w.a_(new ye(D,A)),d.close()}else be(_r,`RPC '${e}' stream ${i} received:`,T),w.u_(T)}}),y(a,l6.STAT_EVENT,_=>{_.stat===vA.PROXY?be(_r,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===vA.NOPROXY&&be(_r,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function DS(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){return new rfe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F="PersistentStream";class az{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oz(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ye(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return be(_F,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(be(_F,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class epe extends az{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ofe(this.serializer,e),r=function(s){if(!("targetChange"in s))return Qe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Qe.min():o.readTime?mo(o.readTime):Qe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xA(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=SA(c)?{documents:lfe(s,c)}:{query:ufe(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Q6(s,o.resumeToken);const l=IA(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Qe.min())>0){a.readTime=f_(s,o.snapshotVersion.toTimestamp());const l=IA(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=hfe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xA(this.serializer),n.removeTarget=e,this.q_(n)}}class tpe extends az{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cfe(e.writeResults,e.commitTime),r=mo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xA(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>afe(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npe{}class rpe extends npe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,AA(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(Z.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,AA(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(Z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ipe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ma(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="RemoteStore";class spe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Bu(this)&&(be(Cu,"Restarting streams for network reachability change."),await async function(c){const l=Je(c);l.Ea.add(4),await $g(l),l.Ra.set("Unknown"),l.Ea.delete(4),await bC(l)}(this))})}),this.Ra=new ipe(r,i)}}async function bC(t){if(Bu(t))for(const e of t.da)await e(!0)}async function $g(t){for(const e of t.da)await e(!1)}function cz(t,e){const n=Je(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nP(n)?tP(n):gf(n).O_()&&eP(n,e))}function ZR(t,e){const n=Je(t),r=gf(n);n.Ia.delete(e),r.O_()&&lz(n,e),n.Ia.size===0&&(r.O_()?r.L_():Bu(n)&&n.Ra.set("Unknown"))}function eP(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gf(t).Y_(e)}function lz(t,e){t.Va.Ue(e),gf(t).Z_(e)}function tP(t){t.Va=new Zhe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gf(t).start(),t.Ra.ua()}function nP(t){return Bu(t)&&!gf(t).x_()&&t.Ia.size>0}function Bu(t){return Je(t).Ea.size===0}function uz(t){t.Va=void 0}async function ope(t){t.Ra.set("Online")}async function ape(t){t.Ia.forEach((e,n)=>{eP(t,e)})}async function cpe(t,e){uz(t),nP(t)?(t.Ra.ha(e),tP(t)):t.Ra.set("Unknown")}async function lpe(t,e,n){if(t.Ra.set("Online"),e instanceof G6&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){be(Cu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await m_(t,r)}else if(e instanceof $v?t.Va.Ze(e):e instanceof q6?t.Va.st(e):t.Va.tt(e),!n.isEqual(Qe.min()))try{const r=await sz(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(mr.EMPTY_BYTE_STRING,u.snapshotVersion)),lz(s,c);const d=new fc(u.target,c,l,u.sequenceNumber);eP(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){be(Cu,"Failed to raise snapshot:",r),await m_(t,r)}}async function m_(t,e,n){if(!pf(e))throw e;t.Ea.add(1),await $g(t),t.Ra.set("Offline"),n||(n=()=>sz(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{be(Cu,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bC(t)})}function dz(t,e){return e().catch(n=>m_(t,n,e))}async function IC(t){const e=Je(t),n=Kc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:UR;for(;upe(e);)try{const i=await Wfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,dpe(e,i)}catch(i){await m_(e,i)}hz(e)&&fz(e)}function upe(t){return Bu(t)&&t.Ta.length<10}function dpe(t,e){t.Ta.push(e);const n=Kc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function hz(t){return Bu(t)&&!Kc(t).x_()&&t.Ta.length>0}function fz(t){Kc(t).start()}async function hpe(t){Kc(t).ra()}async function fpe(t){const e=Kc(t);for(const n of t.Ta)e.ea(n.mutations)}async function ppe(t,e,n){const r=t.Ta.shift(),i=KR.from(r,e,n);await dz(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await IC(t)}async function mpe(t,e){e&&Kc(t).X_&&await async function(r,i){if(function(o){return Yhe(o)&&o!==Z.ABORTED}(i.code)){const s=r.Ta.shift();Kc(r).B_(),await dz(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await IC(r)}}(t,e),hz(t)&&fz(t)}async function TF(t,e){const n=Je(t);n.asyncQueue.verifyOperationInProgress(),be(Cu,"RemoteStore received new credentials");const r=Bu(n);n.Ea.add(3),await $g(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bC(n)}async function gpe(t,e){const n=Je(t);e?(n.Ea.delete(2),await bC(n)):e||(n.Ea.add(2),await $g(n),n.Ra.set("Unknown"))}function gf(t){return t.ma||(t.ma=function(n,r,i){const s=Je(n);return s.sa(),new epe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:ope.bind(null,t),t_:ape.bind(null,t),r_:cpe.bind(null,t),H_:lpe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),nP(t)?tP(t):t.Ra.set("Unknown")):(await t.ma.stop(),uz(t))})),t.ma}function Kc(t){return t.fa||(t.fa=function(n,r,i){const s=Je(n);return s.sa(),new tpe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hpe.bind(null,t),r_:mpe.bind(null,t),ta:fpe.bind(null,t),na:ppe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await IC(t)):(await t.fa.stop(),t.Ta.length>0&&(be(Cu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rP(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iP(t,e){if(ma("AsyncQueue",`${e}: ${t}`),pf(t))return new ye(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{static emptySet(e){return new Wd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Oe.comparator(n.key,r.key):(n,r)=>Oe.comparator(n.key,r.key),this.keyedMap=gp(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.ga=new Pn(Oe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class xh{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new xh(e,n,Wd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ype{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vpe{constructor(){this.queries=EF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Je(n),s=i.queries;i.queries=EF(),s.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new ye(Z.ABORTED,"Firestore shutting down"))}}function EF(){return new $u(t=>O6(t),vC)}async function sP(t,e){const n=Je(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new ype,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=iP(o,`Initialization of query '${ud(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&aP(n)}async function oP(t,e){const n=Je(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wpe(t,e){const n=Je(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&aP(n)}function _pe(t,e,n){const r=Je(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function aP(t){t.Ca.forEach(e=>{e.next()})}var NA,SF;(SF=NA||(NA={})).Ma="default",SF.Cache="cache";class cP{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==NA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.key=e}}class mz{constructor(e){this.key=e}}class Tpe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=M6(e),this.tu=new Wd(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new CF,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),m=wC(this.query,d)?d:null,w=!!h&&this.mutatedKeys.has(h.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;h&&m?h.data.isEqual(m.data)?w!==y&&(r.track({type:3,doc:m}),_=!0):this.su(h,m)||(r.track({type:2,doc:m}),_=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!h&&m?(r.track({type:0,doc:m}),_=!0):h&&!m&&(r.track({type:1,doc:h}),_=!0,(c||l)&&(a=!0)),_&&(m?(o=o.add(m),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(m,w){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:_})}};return y(m)-y(w)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new xh(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new mz(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new pz(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=dt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lP="SyncEngine";class Cpe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Epe{constructor(e){this.key=e,this.hu=!1}}class Spe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new $u(a=>O6(a),vC),this.Iu=new Map,this.Eu=new Set,this.du=new Pn(Oe.comparator),this.Au=new Map,this.Ru=new QR,this.Vu={},this.mu=new Map,this.fu=kh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bpe(t,e,n=!0){const r=Tz(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await gz(r,e,n,!0),i}async function Ipe(t,e){const n=Tz(t);await gz(n,e,!0,!1)}async function gz(t,e,n,r){const i=await Kfe(t.localStore,po(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Ape(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&cz(t.remoteStore,i),a}async function Ape(t,e,n,r,i){t.pu=(d,h,m)=>async function(y,_,v,T){let C=_.view.ru(v);C.Cs&&(C=await gF(y.localStore,_.query,!1).then(({documents:A})=>_.view.ru(A,C)));const I=T&&T.targetChanges.get(_.targetId),x=T&&T.targetMismatches.get(_.targetId)!=null,D=_.view.applyChanges(C,y.isPrimaryClient,I,x);return IF(y,_.targetId,D.au),D.snapshot}(t,d,h,m);const s=await gF(t.localStore,e,!0),o=new Tpe(e,s.Qs),a=o.ru(s.documents),c=Ug.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);IF(t,n,l.au);const u=new Cpe(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function kpe(t,e,n){const r=Je(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!vC(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await RA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ZR(r.remoteStore,i.targetId),OA(r,i.targetId)}).catch(ff)):(OA(r,i.targetId),await RA(r.localStore,i.targetId,!0))}async function xpe(t,e){const n=Je(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ZR(n.remoteStore,r.targetId))}async function Rpe(t,e,n){const r=Fpe(t);try{const i=await function(o,a){const c=Je(o),l=Ht.now(),u=a.reduce((m,w)=>m.add(w.key),dt());let d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=ga(),y=dt();return c.Ns.getEntries(m,u).next(_=>{w=_,w.forEach((v,T)=>{T.isValidDocument()||(y=y.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(_=>{d=_;const v=[];for(const T of a){const C=Whe(T,d.get(T.key).overlayedDocument);C!=null&&v.push(new dl(T.key,C,b6(C.value.mapValue),$r.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,v,a)}).next(_=>{h=_;const v=_.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(m,_.batchId,v)})}).then(()=>({batchId:h.batchId,changes:L6(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new Pn(ut)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l}(r,i.batchId,n),await Bg(r,i.changes),await IC(r.remoteStore)}catch(i){const s=iP(i,"Failed to persist write");n.reject(s)}}async function yz(t,e){const n=Je(t);try{const r=await Hfe(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?bt(o.hu,14607):i.removedDocuments.size>0&&(bt(o.hu,42227),o.hu=!1))}),await Bg(n,r,e)}catch(r){await ff(r)}}function bF(t,e,n){const r=Je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Je(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(const h of d.Sa)h.va(a)&&(l=!0)}),l&&aP(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ppe(t,e,n){const r=Je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Pn(Oe.comparator);o=o.insert(s,Sr.newNoDocument(s,Qe.min()));const a=dt().add(s),c=new EC(Qe.min(),new Map,new Pn(ut),o,a);await yz(r,c),r.du=r.du.remove(s),r.Au.delete(e),uP(r)}else await RA(r.localStore,e,!1).then(()=>OA(r,e,n)).catch(ff)}async function Npe(t,e){const n=Je(t),r=e.batch.batchId;try{const i=await Bfe(n.localStore,e);wz(n,r,null),vz(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bg(n,i)}catch(i){await ff(i)}}async function Ope(t,e,n){const r=Je(t);try{const i=await function(o,a){const c=Je(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(bt(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);wz(r,e,n),vz(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bg(r,i)}catch(i){await ff(i)}}function vz(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function wz(t,e,n){const r=Je(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function OA(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||_z(t,r)})}function _z(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ZR(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uP(t))}function IF(t,e,n){for(const r of n)r instanceof pz?(t.Ru.addReference(r.key,e),Mpe(t,r)):r instanceof mz?(be(lP,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||_z(t,r.key)):$e(19791,{wu:r})}function Mpe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(be(lP,"New document in limbo: "+n),t.Eu.add(r),uP(t))}function uP(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Oe(Ft.fromString(e)),r=t.fu.next();t.Au.set(r,new Epe(n)),t.du=t.du.insert(n,r),cz(t.remoteStore,new fc(po(yC(n.path)),r,"TargetPurposeLimboResolution",pC.ce))}}async function Bg(t,e,n){const r=Je(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(l=>{var u;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(u=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);const d=XR.As(c.targetId,l);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,l){const u=Je(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>re.forEach(l,h=>re.forEach(h.Es,m=>u.persistence.referenceDelegate.addReference(d,h.targetId,m)).next(()=>re.forEach(h.ds,m=>u.persistence.referenceDelegate.removeReference(d,h.targetId,m)))))}catch(d){if(!pf(d))throw d;be(JR,"Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const m=u.Ms.get(h),w=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(w);u.Ms=u.Ms.insert(h,y)}}}(r.localStore,s))}async function Dpe(t,e){const n=Je(t);if(!n.currentUser.isEqual(e)){be(lP,"User change. New user:",e.toKey());const r=await iz(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ye(Z.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bg(n,r.Ls)}}function Lpe(t,e){const n=Je(t),r=n.Au.get(e);if(r&&r.hu)return dt().add(r.key);{let i=dt();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Tz(t){const e=Je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lpe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ppe.bind(null,e),e.Pu.H_=wpe.bind(null,e.eventManager),e.Pu.yu=_pe.bind(null,e.eventManager),e}function Fpe(t){const e=Je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Npe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ope.bind(null,e),e}class g_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=SC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $fe(this.persistence,new Vfe,e.initialUser,this.serializer)}Cu(e){return new rz(YR.mi,this.serializer)}Du(e){return new Gfe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}g_.provider={build:()=>new g_};class Vpe extends g_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bt(this.persistence.referenceDelegate instanceof p_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Efe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new rz(r=>p_.mi(r,n),this.serializer)}}class MA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dpe.bind(null,this.syncEngine),await gpe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vpe}()}createDatastore(e){const n=SC(e.databaseInfo.databaseId),r=function(s){return new Zfe(s)}(e.databaseInfo);return function(s,o,a,c){return new rpe(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new spe(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bF(this.syncEngine,n,0),function(){return wF.v()?new wF:new Qfe}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){const d=new Spe(i,s,o,a,c,l);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Je(i);be(Cu,"RemoteStore shutting down."),s.Ea.add(5),await $g(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}MA.provider={build:()=>new MA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="FirestoreClient";class jpe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cr.UNAUTHENTICATED,this.clientId=jR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{be(qc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(be(qc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=iP(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function LS(t,e){t.asyncQueue.verifyOperationInProgress(),be(qc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await iz(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function AF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Upe(t);be(qc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TF(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>TF(e.remoteStore,i)),t._onlineComponents=e}async function Upe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(qc,"Using user provided OfflineComponentProvider");try{await LS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Eh("Error using user provided cache. Falling back to memory cache: "+n),await LS(t,new g_)}}else be(qc,"Using default OfflineComponentProvider"),await LS(t,new Vpe(void 0));return t._offlineComponents}async function Cz(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(qc,"Using user provided OnlineComponentProvider"),await AF(t,t._uninitializedComponentsProvider._online)):(be(qc,"Using default OnlineComponentProvider"),await AF(t,new MA))),t._onlineComponents}function $pe(t){return Cz(t).then(e=>e.syncEngine)}async function y_(t){const e=await Cz(t),n=e.eventManager;return n.onListen=bpe.bind(null,e.syncEngine),n.onUnlisten=kpe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ipe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xpe.bind(null,e.syncEngine),n}function Bpe(t,e,n={}){const r=new sa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new dP({next:h=>{u.Nu(),o.enqueueAndForget(()=>oP(s,d));const m=h.docs.has(a);!m&&h.fromCache?l.reject(new ye(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?l.reject(new ye(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new cP(yC(a.path),u,{includeMetadataChanges:!0,qa:!0});return sP(s,d)}(await y_(t),t.asyncQueue,e,n,r)),r.promise}function Hpe(t,e,n={}){const r=new sa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new dP({next:h=>{u.Nu(),o.enqueueAndForget(()=>oP(s,d)),h.fromCache&&c.source==="server"?l.reject(new ye(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new cP(a,u,{includeMetadataChanges:!0,qa:!0});return sP(s,d)}(await y_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz="firestore.googleapis.com",xF=!0;class RF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sz,this.ssl=xF}else this.host=e.host,this.ssl=e.ssl??xF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nz;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Tfe)throw new ye(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}she("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ez(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class AC{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qde;switch(r.type){case"firstParty":return new Zde(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kF.get(n);r&&(be("ComponentProvider","Removing Datastore"),kF.delete(n),r.terminate())}(this),Promise.resolve()}}function zpe(t,e,n,r={}){var l;t=Ur(t,AC);const i=rs(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Dg(`https://${a}`),Lg("Firestore",!0)),s.host!==Sz&&s.host!==a&&Eh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!So(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Cr.MOCK_USER;else{u=OR(r.mockUserToken,(l=t._app)==null?void 0:l.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ye(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Cr(h)}t._authCredentials=new Yde(new f6(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xa(this.firestore,e,this._query)}}class dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vg(n,dn._jsonSchema))return new dn(e,r||null,new Oe(Ft.fromString(n.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:kn("string",dn._jsonSchemaVersion),referencePath:kn("string")};class Oc extends xa{constructor(e,n,r){super(e,n,yC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new Oe(e))}withConverter(e){return new Oc(this.firestore,e,this._path)}}function dr(t,e,...n){if(t=qe(t),p6("collection","path",e),t instanceof AC){const r=Ft.fromString(e,...n);return HL(r),new Oc(t,null,r)}{if(!(t instanceof dn||t instanceof Oc))throw new ye(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return HL(r),new Oc(t.firestore,null,r)}}function Ge(t,e,...n){if(t=qe(t),arguments.length===1&&(e=jR.newId()),p6("doc","path",e),t instanceof AC){const r=Ft.fromString(e,...n);return BL(r),new dn(t,null,new Oe(r))}{if(!(t instanceof dn||t instanceof Oc))throw new ye(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return BL(r),new dn(t.firestore,t instanceof Oc?t.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="AsyncQueue";class NF{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oz(this,"async_queue_retry"),this._c=()=>{const r=DS();r&&be(PF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=DS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=DS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new sa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pf(e))throw e;be(PF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ma("INTERNAL UNHANDLED ERROR: ",OF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rP.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&$e(47125,{Pc:OF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function OF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Io extends AC{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new NF,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NF(e),this._firestoreClient=void 0,await e}}}function Wpe(t,e){const n=typeof t=="object"?t:ll(),r=typeof t=="string"?t:c_,i=Vs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=lC("firestore");s&&zpe(i,...s)}return i}function Hg(t){if(t._terminated)throw new ye(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Kpe(t),t._firestoreClient}function Kpe(t){var r,i,s;const e=t._freezeSettings(),n=function(a,c,l,u){return new ghe(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Ez(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jpe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(mr.fromBase64String(e))}catch(n){throw new ye(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vg(e,Ki._jsonSchema))return Ki.fromBase64String(e.bytes)}}Ki._jsonSchemaVersion="firestore/bytes/1.0",Ki._jsonSchema={type:kn("string",Ki._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:go._jsonSchemaVersion}}static fromJSON(e){if(Vg(e,go._jsonSchema))return new go(e.latitude,e.longitude)}}go._jsonSchemaVersion="firestore/geoPoint/1.0",go._jsonSchema={type:kn("string",go._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vg(e,yo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yo(e.vectorValues);throw new ye(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yo._jsonSchemaVersion="firestore/vectorValue/1.0",yo._jsonSchema={type:kn("string",yo._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qpe=/^__.*__$/;class Gpe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dl(e,this.data,this.fieldMask,n,this.fieldTransforms):new jg(e,this.data,n,this.fieldTransforms)}}class bz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Iz(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:t})}}class kC{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kC({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return v_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Iz(this.Ac)&&qpe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Qpe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||SC(e)}Cc(e,n,r,i=!1){return new kC({Ac:e,methodName:n,Dc:r,path:ur.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kg(t){const e=t._freezeSettings(),n=SC(t._databaseId);return new Qpe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hP(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);mP("Data must be an object, but it was:",o,r);const a=xz(r,o);let c,l;if(s.merge)c=new Ii(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=DA(e,d,n);if(!o.contains(h))throw new ye(Z.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Pz(u,h)||u.push(h)}c=new Ii(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new Gpe(new ni(a),c,l)}class qg extends Wg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qg}}function Ype(t,e,n){return new kC({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fP extends Wg{_toFieldTransform(e){return new H6(e.path,new Qm)}isEqual(e){return e instanceof fP}}class pP extends Wg{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Ype(this,e,!0),r=this.vc.map(s=>yf(s,n)),i=new Ah(r);return new H6(e.path,i)}isEqual(e){return e instanceof pP&&So(this.vc,e.vc)}}function Az(t,e,n,r){const i=t.Cc(1,e,n);mP("Data must be an object, but it was:",i,r);const s=[],o=ni.empty();ul(r,(c,l)=>{const u=gP(e,c,n);l=qe(l);const d=i.yc(u);if(l instanceof qg)s.push(u);else{const h=yf(l,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new Ii(s);return new bz(o,a,i.fieldTransforms)}function kz(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[DA(e,r,n)],c=[i];if(s.length%2!=0)throw new ye(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(DA(e,s[h])),c.push(s[h+1]);const l=[],u=ni.empty();for(let h=a.length-1;h>=0;--h)if(!Pz(l,a[h])){const m=a[h];let w=c[h];w=qe(w);const y=o.yc(m);if(w instanceof qg)l.push(m);else{const _=yf(w,y);_!=null&&(l.push(m),u.set(m,_))}}const d=new Ii(l);return new bz(u,d,o.fieldTransforms)}function Xpe(t,e,n,r=!1){return yf(n,t.Cc(r?4:3,e))}function yf(t,e){if(Rz(t=qe(t)))return mP("Unsupported field value:",e,t),xz(t,e);if(t instanceof Wg)return function(r,i){if(!Iz(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=yf(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jhe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ht.fromDate(r);return{timestampValue:f_(i.serializer,s)}}if(r instanceof Ht){const s=new Ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:f_(i.serializer,s)}}if(r instanceof go)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ki)return{bytesValue:Q6(i.serializer,r._byteString)};if(r instanceof dn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:GR(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yo)return function(o,a){return{mapValue:{fields:{[E6]:{stringValue:S6},[l_]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return WR(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${fC(r)}`)}(t,e)}function xz(t,e){const n={};return y6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ul(t,(r,i)=>{const s=yf(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Rz(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ht||t instanceof go||t instanceof Ki||t instanceof dn||t instanceof Wg||t instanceof yo)}function mP(t,e,n){if(!Rz(n)||!m6(n)){const r=fC(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function DA(t,e,n){if((e=qe(e))instanceof zg)return e._internalPath;if(typeof e=="string")return gP(t,e);throw v_("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jpe=new RegExp("[~\\*/\\[\\]]");function gP(t,e,n){if(e.search(Jpe)>=0)throw v_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zg(...e.split("."))._internalPath}catch{throw v_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function v_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ye(Z.INVALID_ARGUMENT,a+t+c)}function Pz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zpe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Zpe extends Nz{data(){return super.data()}}function xC(t,e){return typeof e=="string"?gP(t,e):e instanceof zg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yP{}let vP=class extends yP{};function ya(t,e,...n){let r=[];e instanceof yP&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof wP).length,a=s.filter(c=>c instanceof RC).length;if(o>1||o>0&&a>0)throw new ye(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class RC extends vP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new RC(e,n,r)}_apply(e){const n=this._parse(e);return Mz(e._query,n),new xa(e.firestore,e.converter,bA(e._query,n))}_parse(e){const n=Kg(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ye(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){LF(d,u);const w=[];for(const y of d)w.push(DF(c,s,y));h={arrayValue:{values:w}}}else h=DF(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||LF(d,u),h=Xpe(a,o,d,u==="in"||u==="not-in");return An.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kd(t,e,n){const r=e,i=xC("where",t);return RC._create(i,r,n)}class wP extends yP{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wP(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ls.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)Mz(o,c),o=bA(o,c)}(e._query,n),new xa(e.firestore,e.converter,bA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _P extends vP{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _P(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ye(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ye(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gm(s,o)}(e._query,this._field,this._direction);return new xa(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new mf(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Rh(t,e="asc"){const n=e,r=xC("orderBy",t);return _P._create(r,n)}class TP extends vP{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new TP(e,n,r)}_apply(e){return new xa(e.firestore,e.converter,d_(e._query,this._limit,this._limitType))}}function eme(t){return TP._create("limit",t,"F")}function DF(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new ye(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N6(e)&&n.indexOf("/")!==-1)throw new ye(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ft.fromString(n));if(!Oe.isDocumentKey(r))throw new ye(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return XL(t,new Oe(r))}if(n instanceof dn)return XL(t,n._key);throw new ye(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fC(n)}.`)}function LF(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mz(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ye(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tme{convertValue(e,n="none"){switch(Wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ul(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[l_].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>gn(o.doubleValue));return new yo(n)}convertGeoPoint(e){return new go(gn(e.latitude),gn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gC(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wm(e));default:return null}}convertTimestamp(e){const n=Hc(e);return new Ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ft.fromString(e);bt(tz(r),9688,{name:e});const i=new Km(r.get(1),r.get(3)),s=new Oe(r.popFirst(5));return i.isEqual(n)||ma(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class vp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tu extends Nz{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=tu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}tu._jsonSchemaVersion="firestore/documentSnapshot/1.0",tu._jsonSchema={type:kn("string",tu._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class Bv extends tu{data(e={}){return super.data(e)}}class nu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bv(this._firestore,this._userDataWriter,r.key,r,new vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Bv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Bv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:nme(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nme(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){t=Ur(t,dn);const e=Ur(t.firestore,Io);return Bpe(Hg(e),t._key).then(n=>Dz(e,t,n))}nu._jsonSchemaVersion="firestore/querySnapshot/1.0",nu._jsonSchema={type:kn("string",nu._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class EP extends tme{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function LA(t){t=Ur(t,xa);const e=Ur(t.firestore,Io),n=Hg(e),r=new EP(e);return Oz(t._query),Hpe(n,t._query).then(i=>new nu(e,r,t,i))}function w_(t,e,n){t=Ur(t,dn);const r=Ur(t.firestore,Io),i=CP(t.converter,e,n);return Gg(r,[hP(Kg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$r.none())])}function hr(t,e,n,...r){t=Ur(t,dn);const i=Ur(t.firestore,Io),s=Kg(i);let o;return o=typeof(e=qe(e))=="string"||e instanceof zg?kz(s,"updateDoc",t._key,e,n,r):Az(s,"updateDoc",t._key,e),Gg(i,[o.toMutation(t._key,$r.exists(!0))])}function Ao(t){return Gg(Ur(t.firestore,Io),[new CC(t._key,$r.none())])}function vf(t,e){const n=Ur(t.firestore,Io),r=Ge(t),i=CP(t.converter,e);return Gg(n,[hP(Kg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$r.exists(!1))]).then(()=>r)}function vo(t,...e){var c,l,u;t=qe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||MF(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(MF(e[r])){const d=e[r];e[r]=(c=d.next)==null?void 0:c.bind(d),e[r+1]=(l=d.error)==null?void 0:l.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(t instanceof dn)o=Ur(t.firestore,Io),a=yC(t._key.path),s={next:d=>{e[r]&&e[r](Dz(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Ur(t,xa);o=Ur(d.firestore,Io),a=d._query;const h=new EP(o);s={next:m=>{e[r]&&e[r](new nu(o,h,d,m))},error:e[r+1],complete:e[r+2]},Oz(t._query)}return function(h,m,w,y){const _=new dP(y),v=new cP(m,_,w);return h.asyncQueue.enqueueAndForget(async()=>sP(await y_(h),v)),()=>{_.Nu(),h.asyncQueue.enqueueAndForget(async()=>oP(await y_(h),v))}}(Hg(o),a,i,s)}function Gg(t,e){return function(r,i){const s=new sa;return r.asyncQueue.enqueueAndForget(async()=>Rpe(await $pe(r),i,s)),s.promise}(Hg(t),e)}function Dz(t,e,n){const r=n.docs.get(e._key),i=new EP(t);return new tu(t,i,e._key,r,new vp(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rme{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Kg(e)}set(e,n,r){this._verifyNotCommitted();const i=FS(e,this._firestore),s=CP(i.converter,n,r),o=hP(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,$r.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=FS(e,this._firestore);let o;return o=typeof(n=qe(n))=="string"||n instanceof zg?kz(this._dataReader,"WriteBatch.update",s._key,n,r,i):Az(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=FS(e,this._firestore);return this._mutations=this._mutations.concat(new CC(n._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function FS(t,e){if((t=qe(t)).firestore!==e)throw new ye(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(){return new qg("deleteField")}function FA(){return new fP("serverTimestamp")}function Lz(...t){return new pP("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){return Hg(t=Ur(t,Io)),new rme(t,e=>Gg(t,e))}(function(e,n=!0){(function(i){hf=i})(cl),zr(new xr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Io(new Xde(r.getProvider("auth-internal")),new ehe(o,r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ye(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Km(l.options.projectId,u)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xn(VL,jL,e),xn(VL,jL,"esm2020")})();var ime="firebase",sme="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(ime,sme,"app");function Fz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ome=Fz,Vz=new al("auth","Firebase",Fz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Fg("@firebase/auth");function ame(t,...e){T_.logLevel<=ct.WARN&&T_.warn(`Auth (${cl}): ${t}`,...e)}function Hv(t,...e){T_.logLevel<=ct.ERROR&&T_.error(`Auth (${cl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,...e){throw bP(t,...e)}function hi(t,...e){return bP(t,...e)}function SP(t,e,n){const r={...ome(),[e]:n};return new al("auth","Firebase",r).create(e,{appName:t.name})}function wo(t){return SP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ns(t,"argument-error"),SP(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bP(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Vz.create(t,...e)}function Se(t,e,...n){if(!t)throw bP(e,...n)}function Xo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hv(e),new Error(e)}function va(t,e){t||Xo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Uz(){return FF()==="http:"||FF()==="https:"}function FF(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uz()||X5()||"connection"in navigator)?navigator.onLine:!0}function lme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.shortDelay=e,this.longDelay=n,va(n>e,"Short delay should be less than long delay!"),this.isMobile=MR()||J5()}get(){return cme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e){va(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hme=new Qg(3e4,6e4);function Gr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mi(t,e,n,r,i={}){return Bz(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Uu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:c,...s};return Eue()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&rs(t.emulatorConfig.host)&&(l.credentials="include"),$z.fetch()(await Hz(t,t.config.apiHost,n,a),l)})}async function Bz(t,e,n){t._canInitEmulator=!1;const r={...ume,...e};try{const i=new pme(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw wp(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw SP(t,u,l);ns(t,u)}}catch(i){if(i instanceof Fi)throw i;ns(t,"network-request-failed",{message:String(i)})}}async function hl(t,e,n,r,i={}){const s=await mi(t,e,n,r,i);return"mfaPendingCredential"in s&&ns(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Hz(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?IP(t.config,i):`${t.config.apiScheme}://${i}`;return dme.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function fme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pme{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),hme.get())})}}function wp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hi(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){return t!==void 0&&t.getResponse!==void 0}function jF(t){return t!==void 0&&t.enterprise!==void 0}class zz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fme(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mme(t){return(await mi(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Wz(t,e){return mi(t,"GET","/v2/recaptchaConfig",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gme(t,e){return mi(t,"POST","/v1/accounts:delete",e)}async function C_(t,e){return mi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yme(t,e=!1){const n=qe(t),r=await n.getIdToken(e),i=AP(r);Se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wp(VS(i.auth_time)),issuedAtTime:Wp(VS(i.iat)),expirationTime:Wp(VS(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function VS(t){return Number(t)*1e3}function AP(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hv("JWT malformed, contained fewer than 3 sections"),null;try{const i=s_(n);return i?JSON.parse(i):(Hv("Failed to decode base64 JWT payload"),null)}catch(i){return Hv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function UF(t){const e=AP(t);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fi&&vme(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vme({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wp(this.lastLoginAt),this.creationTime=Wp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Ph(t,C_(e,{idToken:n}));Se(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?Kz(i.providerUserInfo):[],o=Tme(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new jA(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,u)}async function _me(t){const e=qe(t);await E_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tme(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Kz(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cme(t,e){const n=await Bz(t,{},async()=>{const r=Uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Hz(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&rs(t.emulatorConfig.host)&&(c.credentials="include"),$z.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Eme(t,e){return mi(t,"POST","/v2/accounts:revokeToken",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=UF(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Cme(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qd;return r&&(Se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qd,this.toJSON())}_performRefresh(){return Xo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e){Se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Es{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new wme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ph(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yme(this,e)}reload(){return _me(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await E_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await Ph(this,gme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:m,providerData:w,stsTokenManager:y}=n;Se(d&&y,e,"internal-error");const _=qd.fromJSON(this.name,y);Se(typeof d=="string",e,"internal-error"),$a(r,e.name),$a(i,e.name),Se(typeof h=="boolean",e,"internal-error"),Se(typeof m=="boolean",e,"internal-error"),$a(s,e.name),$a(o,e.name),$a(a,e.name),$a(c,e.name),$a(l,e.name),$a(u,e.name);const v=new Es({uid:d,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:_,createdAt:l,lastLoginAt:u});return w&&Array.isArray(w)&&(v.providerData=w.map(T=>({...T}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,n,r=!1){const i=new qd;i.updateFromServerResponse(n);const s=new Es({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await E_(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Kz(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qd;a.updateFromIdToken(r);const c=new Es({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=new Map;function Jo(t){va(t instanceof Function,"Expected a class definition");let e=$F.get(t);return e?(va(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$F.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qz.type="NONE";const BF=qz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e,n){return`firebase:${t}:${e}:${n}`}class Gd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zv(this.userKey,i.apiKey,s),this.fullPersistenceKey=zv("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await C_(this.auth,{idToken:e}).catch(()=>{});return n?Es._fromGetAccountInfoResponse(this.auth,n,e):null}return Es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gd(Jo(BF),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Jo(BF);const o=zv(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){let d;if(typeof u=="string"){const h=await C_(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Es._fromGetAccountInfoResponse(e,h,u)}else d=Es._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Gd(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Gd(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zz(e))return"Blackberry";if(e9(e))return"Webos";if(Qz(e))return"Safari";if((e.includes("chrome/")||Yz(e))&&!e.includes("edge/"))return"Chrome";if(Jz(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gz(t=kr()){return/firefox\//i.test(t)}function Qz(t=kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yz(t=kr()){return/crios\//i.test(t)}function Xz(t=kr()){return/iemobile/i.test(t)}function Jz(t=kr()){return/android/i.test(t)}function Zz(t=kr()){return/blackberry/i.test(t)}function e9(t=kr()){return/webos/i.test(t)}function kP(t=kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Sme(t=kr()){var e;return kP(t)&&!!((e=window.navigator)!=null&&e.standalone)}function bme(){return Sue()&&document.documentMode===10}function t9(t=kr()){return kP(t)||Jz(t)||e9(t)||Zz(t)||/windows phone/i.test(t)||Xz(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t,e=[]){let n;switch(t){case"Browser":n=HF(kr());break;case"Worker":n=`${HF(kr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ime{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame(t,e={}){return mi(t,"GET","/v2/passwordPolicy",Gr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kme=6;class xme{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rme{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zF(this),this.idTokenSubscription=new zF(this),this.beforeStateQueue=new Ime(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jo(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Gd.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await C_(this,{idToken:e}),r=await Es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await E_(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(wo(this));const n=e?qe(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ame(this),n=new xme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Eme(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jo(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await Gd.create(this,[Jo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=n9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ame(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function is(t){return qe(t)}class zF{constructor(e){this.auth=e,this.observer=null,this.addObserver=Oue(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Pme(t){Yg=t}function xP(t){return Yg.loadJS(t)}function Nme(){return Yg.recaptchaV2Script}function Ome(){return Yg.recaptchaEnterpriseScript}function Mme(){return Yg.gapiScript}function r9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dme=500,Lme=6e4,sv=1e12;class Fme{constructor(e){this.auth=e,this.counter=sv,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Ume(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||sv;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||sv;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||sv;return(r=this._widgets.get(n))==null||r.execute(),""}}class Vme{constructor(){this.enterprise=new jme}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jme{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ume{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Se(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=$me(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Lme)},Dme))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function $me(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const Bme="recaptcha-enterprise",Kp="NO_RECAPTCHA";class i9{constructor(e){this.type=Bme,this.auth=is(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Wz(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new zz(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;jF(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Kp)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Vme().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&jF(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Ome();c.length!==0&&(c+=a),xP(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Jf(t,e,n,r=!1,i=!1){const s=new i9(t);let o;if(i)o=Kp;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ru(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Jf(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Jf(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Jf(t,e,n);return r(t,a).catch(async c=>{var l;if(((l=t._getRecaptchaConfig())==null?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Jf(t,e,n,!1,!0);return r(t,u)}return Promise.reject(c)})}else{const a=await Jf(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function Hme(t){const e=is(t),n=await Wz(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new zz(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new i9(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zme(t,e){const n=Vs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(So(s,e??{}))return i;ns(i,"already-initialized")}return n.initialize({options:e})}function Wme(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Kme(t,e,n){const r=is(t);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=s9(e),{host:o,port:a}=qme(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(So(l,r.config.emulator)&&So(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,rs(o)?(Dg(`${s}//${o}${c}`),Lg("Auth",!0)):Gme()}function s9(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qme(t){const e=s9(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:WF(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:WF(o)}}}function WF(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gme(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xo("not implemented")}_getIdTokenResponse(e){return Xo("not implemented")}_linkToIdToken(e,n){return Xo("not implemented")}_getReauthenticationResolver(e){return Xo("not implemented")}}async function Qme(t,e){return mi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yme(t,e){return hl(t,"POST","/v1/accounts:signInWithPassword",Gr(t,e))}async function o9(t,e){return mi(t,"POST","/v1/accounts:sendOobCode",Gr(t,e))}async function Xme(t,e){return o9(t,e)}async function Jme(t,e){return o9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zme(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Gr(t,e))}async function ege(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends PC{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,n,"signInWithPassword",Yme,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Zme(e,{email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,r,"signUpPassword",Qme,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ege(e,{idToken:n,email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qd(t,e){return hl(t,"POST","/v1/accounts:signInWithIdp",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tge="http://localhost";class wa extends PC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new wa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qd(e,n)}buildRequest(){const e={requestUri:tge,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e){return mi(t,"POST","/v1/accounts:sendVerificationCode",Gr(t,e))}async function nge(t,e){return hl(t,"POST","/v1/accounts:signInWithPhoneNumber",Gr(t,e))}async function rge(t,e){const n=await hl(t,"POST","/v1/accounts:signInWithPhoneNumber",Gr(t,e));if(n.temporaryProof)throw wp(t,"account-exists-with-different-credential",n);return n}const ige={USER_NOT_FOUND:"user-not-found"};async function sge(t,e){const n={...e,operation:"REAUTH"};return hl(t,"POST","/v1/accounts:signInWithPhoneNumber",Gr(t,n),ige)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp extends PC{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new qp({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new qp({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return nge(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return rge(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return sge(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new qp({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oge(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function age(t){const e=fp(pp(t)).link,n=e?fp(pp(e)).deep_link_id:null,r=fp(pp(t)).deep_link_id;return(r?fp(pp(r)).link:null)||r||n||e||t}class RP{constructor(e){const n=fp(pp(e)),r=n.apiKey??null,i=n.oobCode??null,s=oge(n.mode??null);Se(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=age(e);try{return new RP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.providerId=wf.PROVIDER_ID}static credential(e,n){return Xm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=RP.parseLink(n);return Se(r,"argument-error"),Xm._fromEmailAndCode(e,r.code,r.tenantId)}}wf.PROVIDER_ID="password";wf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends NC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yd extends _f{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Se("providerId"in n&&"signInMethod"in n,"argument-error"),wa._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Se(e.idToken||e.accessToken,"argument-error"),wa._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Yd.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yd.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Yd(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends _f{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}}Za.FACEBOOK_SIGN_IN_METHOD="facebook.com";Za.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends _f{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wa._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ko.credential(n,r)}catch{return null}}}Ko.GOOGLE_SIGN_IN_METHOD="google.com";Ko.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends _f{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:ec.PROVIDER_ID,signInMethod:ec.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ec.credentialFromTaggedObject(e)}static credentialFromError(e){return ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ec.credential(e.oauthAccessToken)}catch{return null}}}ec.GITHUB_SIGN_IN_METHOD="github.com";ec.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends _f{constructor(){super("twitter.com")}static credential(e,n){return wa._fromParams({providerId:tc.PROVIDER_ID,signInMethod:tc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tc.credentialFromTaggedObject(e)}static credentialFromError(e){return tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return tc.credential(n,r)}catch{return null}}}tc.TWITTER_SIGN_IN_METHOD="twitter.com";tc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cge(t,e){return hl(t,"POST","/v1/accounts:signUp",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Es._fromIdTokenResponse(e,r,i),o=qF(r);return new Eu({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=qF(r);return new Eu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function qF(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends Fi{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,S_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new S_(e,n,r,i)}}function a9(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?S_._fromErrorAndOperation(t,s,e,r):s})}async function lge(t,e,n=!1){const r=await Ph(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uge(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(wo(r));const i="reauthenticate";try{const s=await Ph(t,a9(r,i,e,t),n);Se(s.idToken,r,"internal-error");const o=AP(s.idToken);Se(o,r,"internal-error");const{sub:a}=o;return Se(t.uid===a,r,"user-mismatch"),Eu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ns(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e,n=!1){if(lr(t.app))return Promise.reject(wo(t));const r="signIn",i=await a9(t,r,e),s=await Eu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function l9(t,e){return c9(is(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u9(t){const e=is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dge(t,e,n){const r=is(t);await ru(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Jme,"EMAIL_PASSWORD_PROVIDER")}async function hge(t,e,n){if(lr(t.app))return Promise.reject(wo(t));const r=is(t),o=await ru(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cge,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&u9(t),c}),a=await Eu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function fge(t,e,n){return lr(t.app)?Promise.reject(wo(t)):l9(qe(t),wf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&u9(t),r})}async function GF(t,e){const n=qe(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await Xme(n.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pge(t,e){return mi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mge(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qe(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ph(r,pge(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function gge(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function yge(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function vge(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function wge(t){return qe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t,e){return mi(t,"POST","/v2/accounts/mfaEnrollment:start",Gr(t,e))}const b_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(b_,"1"),this.storage.removeItem(b_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=1e3,Tge=10;class h9 extends d9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t9(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bme()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Tge):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_ge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h9.type="LOCAL";const Cge=h9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9 extends d9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}f9.type="SESSION";const p9=f9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ege(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new OC(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),c=await Ege(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}OC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=PP("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function bge(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function Ige(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Age(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function kge(){return NP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="firebaseLocalStorageDb",xge=1,I_="firebaseLocalStorage",g9="fbase_key";class Xg{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function MC(t,e){return t.transaction([I_],e?"readwrite":"readonly").objectStore(I_)}function Rge(){const t=indexedDB.deleteDatabase(m9);return new Xg(t).toPromise()}function UA(){const t=indexedDB.open(m9,xge);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(I_,{keyPath:g9})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(I_)?e(r):(r.close(),await Rge(),e(await UA()))})})}async function YF(t,e,n){const r=MC(t,!0).put({[g9]:e,value:n});return new Xg(r).toPromise()}async function Pge(t,e){const n=MC(t,!1).get(e),r=await new Xg(n).toPromise();return r===void 0?null:r.value}function XF(t,e){const n=MC(t,!0).delete(e);return new Xg(n).toPromise()}const Nge=800,Oge=3;class y9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Oge)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=OC._getInstance(kge()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Ige(),!this.activeServiceWorker)return;this.sender=new Sge(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Age()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UA();return await YF(e,b_,"1"),await XF(e,b_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>YF(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Pge(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>XF(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=MC(i,!1).getAll();return new Xg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y9.type="LOCAL";const Mge=y9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t,e){return mi(t,"POST","/v2/accounts/mfaSignIn:start",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=r9("rcb"),Dge=new Qg(3e4,6e4);class Lge{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=bn().grecaptcha)!=null&&e.render)}load(e,n=""){return Se(Fge(n),e,"argument-error"),this.shouldResolveImmediately(n)&&VF(bn().grecaptcha)?Promise.resolve(bn().grecaptcha):new Promise((r,i)=>{const s=bn().setTimeout(()=>{i(hi(e,"network-request-failed"))},Dge.get());bn()[jS]=()=>{bn().clearTimeout(s),delete bn()[jS];const a=bn().grecaptcha;if(!a||!VF(a)){i(hi(e,"internal-error"));return}const c=a.render;a.render=(l,u)=>{const d=c(l,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${Nme()}?${Uu({onload:jS,render:"explicit",hl:n})}`;xP(o).catch(()=>{clearTimeout(s),i(hi(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=bn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Fge(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Vge{async load(e){return new Fme(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="recaptcha",jge={theme:"light",type:"image"};class Uge{constructor(e,n,r={...jge}){this.parameters=r,this.type=Gp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=is(e),this.isInvisible=this.parameters.size==="invisible",Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Se(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vge:new Lge,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=bn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Se(Uz()&&!NP(),this.auth,"internal-error"),await $ge(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await mme(this.auth);Se(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function $ge(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bge{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=qp._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Hge(t,e,n){if(lr(t.app))return Promise.reject(wo(t));const r=is(t),i=await zge(r,e,qe(n));return new Bge(i,s=>l9(r,s))}async function zge(t,e,n){var r;if(!t._getRecaptchaConfig())try{await Hme(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){Se(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ru(t,o,"mfaSmsEnrollment",async(u,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Kp){Se((n==null?void 0:n.type)===Gp,u,"argument-error");const h=await US(u,d,n);return QF(u,h)}return QF(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{Se(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Se(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ru(t,a,"mfaSmsSignIn",async(d,h)=>{if(h.phoneSignInInfo.captchaResponse===Kp){Se((n==null?void 0:n.type)===Gp,d,"argument-error");const m=await US(d,h,n);return JF(d,m)}return JF(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ru(t,s,"sendVerificationCode",async(l,u)=>{if(u.captchaResponse===Kp){Se((n==null?void 0:n.type)===Gp,l,"argument-error");const d=await US(l,u,n);return KF(l,d)}return KF(l,u)},"PHONE_PROVIDER").catch(l=>Promise.reject(l))).sessionInfo}}finally{n==null||n._reset()}}async function US(t,e,n){Se(n.type===Gp,t,"argument-error");const r=await n.verify();Se(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e){return e?Jo(e):(Se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP extends PC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Wge(t){return c9(t.auth,new MP(t),t.bypassAuthState)}function Kge(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),uge(n,new MP(t),t.bypassAuthState)}async function qge(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),lge(n,new MP(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wge;case"linkViaPopup":case"linkViaRedirect":return qge;case"reauthViaPopup":case"reauthViaRedirect":return Kge;default:ns(this.auth,"internal-error")}}resolve(e){va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gge=new Qg(2e3,1e4);async function Qge(t,e,n){if(lr(t.app))return Promise.reject(hi(t,"operation-not-supported-in-this-environment"));const r=is(t);jz(t,e,NC);const i=OP(r,n);return new pc(r,"signInViaPopup",e,i).executeNotNull()}async function Yge(t,e,n){const r=qe(t);jz(r.auth,e,NC);const i=OP(r.auth,n);return new pc(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class pc extends v9{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,pc.currentPopupAction&&pc.currentPopupAction.cancel(),pc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){va(this.filter.length===1,"Popup operations only handle one event");const e=PP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gge.get())};e()}}pc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xge="pendingRedirect",Wv=new Map;class Jge extends v9{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wv.get(this.auth._key());if(!e){try{const r=await Zge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wv.set(this.auth._key(),e)}return this.bypassAuthState||Wv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zge(t,e){const n=nye(e),r=tye(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function eye(t,e){Wv.set(t._key(),e)}function tye(t){return Jo(t._redirectPersistence)}function nye(t){return zv(Xge,t.config.apiKey,t.name)}async function rye(t,e,n=!1){if(lr(t.app))return Promise.reject(wo(t));const r=is(t),i=OP(r,e),o=await new Jge(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iye=10*60*1e3;class sye{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oye(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!w9(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iye&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZF(e))}saveEventToCache(e){this.cachedEventUids.add(ZF(e)),this.lastProcessedEventTime=Date.now()}}function ZF(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w9({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oye(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w9(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aye(t,e={}){return mi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cye=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lye=/^https?/;async function uye(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aye(t);for(const n of e)try{if(dye(n))return}catch{}ns(t,"unauthorized-domain")}function dye(t){const e=VA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lye.test(n))return!1;if(cye.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hye=new Qg(3e4,6e4);function e2(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fye(t){return new Promise((e,n)=>{var i,s,o;function r(){e2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e2(),n(hi(t,"network-request-failed"))},timeout:hye.get()})}if((s=(i=bn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=bn().gapi)!=null&&o.load)r();else{const a=r9("iframefcb");return bn()[a]=()=>{gapi.load?r():n(hi(t,"network-request-failed"))},xP(`${Mme()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Kv=null,e})}let Kv=null;function pye(t){return Kv=Kv||fye(t),Kv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mye=new Qg(5e3,15e3),gye="__/auth/iframe",yye="emulator/auth/iframe",vye={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _ye(t){const e=t.config;Se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?IP(e,yye):`https://${t.config.authDomain}/${gye}`,r={apiKey:e.apiKey,appName:t.name,v:cl},i=wye.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Uu(r).slice(1)}`}async function Tye(t){const e=await pye(t),n=bn().gapi;return Se(n,t,"internal-error"),e.open({where:document.body,url:_ye(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vye,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=hi(t,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},mye.get());function c(){bn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cye={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Eye=500,Sye=600,bye="_blank",Iye="http://localhost";class t2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Aye(t,e,n,r=Eye,i=Sye){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...Cye,width:r.toString(),height:i.toString(),top:s,left:o},l=kr().toLowerCase();n&&(a=Yz(l)?bye:n),Gz(l)&&(e=e||Iye,c.scrollbars="yes");const u=Object.entries(c).reduce((h,[m,w])=>`${h}${m}=${w},`,"");if(Sme(l)&&a!=="_self")return kye(e||"",a),new t2(null);const d=window.open(e||"",a,u);Se(d,t,"popup-blocked");try{d.focus()}catch{}return new t2(d)}function kye(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xye="__/auth/handler",Rye="emulator/auth/handler",Pye=encodeURIComponent("fac");async function n2(t,e,n,r,i,s){Se(t.config.authDomain,t,"auth-domain-config-required"),Se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cl,eventId:i};if(e instanceof NC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof _f){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${Pye}=${encodeURIComponent(c)}`:"";return`${Nye(t)}?${Uu(a).slice(1)}${l}`}function Nye({config:t}){return t.emulator?IP(t,Rye):`https://${t.authDomain}/${xye}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="webStorageSupport";class Oye{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p9,this._completeRedirectFn=rye,this._overrideRedirectResult=eye}async _openPopup(e,n,r,i){var o;va((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await n2(e,n,r,VA(),i);return Aye(e,s,PP())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await n2(e,n,r,VA(),i);return bge(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(va(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Tye(e),r=new sye(e);return n.register("authEvent",i=>(Se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($S,{type:$S},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[$S];s!==void 0&&n(!!s),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uye(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return t9()||Qz()||kP()}}const Mye=Oye;var r2="@firebase/auth",i2="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lye(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Fye(t){zr(new xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:n9(t)},l=new Rme(r,i,s,c);return Wme(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zr(new xr("auth-internal",e=>{const n=is(e.getProvider("auth").getImmediate());return(r=>new Dye(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(r2,i2,Lye(t)),xn(r2,i2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vye=5*60,jye=Y5("authIdTokenMaxAge")||Vye;let s2=null;const Uye=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jye)return;const i=n==null?void 0:n.token;s2!==i&&(s2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $ye(t=ll()){const e=Vs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zme(t,{popupRedirectResolver:Mye,persistence:[Mge,Cge,p9]}),r=Y5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Uye(s.toString());yge(n,o,()=>o(n.currentUser)),gge(n,a=>o(a))}}const i=G5("auth");return i&&Kme(n,`http://${i}`),n}function Bye(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Pme({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=hi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Bye().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Fye("Browser");var o2={};const a2="@firebase/database",c2="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _9="";function Hye(t){_9=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zye{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),er(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:$m(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Po(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zye(e)}}catch{}return new Wye},Bl=T9("localStorage"),Kye=T9("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new Fg("@firebase/database"),qye=function(){let t=1;return function(){return t++}}(),C9=function(t){const e=Lue(t),n=new Nue;n.update(e);const r=n.digest();return NR.encodeByteArray(r)},Jg=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jg.apply(null,r):typeof r=="object"?e+=er(r):e+=r,e+=" "}return e};let Qp=null,l2=!0;const Gye=function(t,e){ue(!0,"Can't turn on custom loggers persistently."),Xd.logLevel=ct.VERBOSE,Qp=Xd.log.bind(Xd)},ar=function(...t){if(l2===!0&&(l2=!1,Qp===null&&Kye.get("logging_enabled")===!0&&Gye()),Qp){const e=Jg.apply(null,t);Qp(e)}},Zg=function(t){return function(...e){ar(t,...e)}},$A=function(...t){const e="FIREBASE INTERNAL ERROR: "+Jg(...t);Xd.error(e)},_a=function(...t){const e=`FIREBASE FATAL ERROR: ${Jg(...t)}`;throw Xd.error(e),new Error(e)},Br=function(...t){const e="FIREBASE WARNING: "+Jg(...t);Xd.warn(e)},Qye=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Br("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},DP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Yye=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Su="[MIN_NAME]",Gc="[MAX_NAME]",Hu=function(t,e){if(t===e)return 0;if(t===Su||e===Gc)return-1;if(e===Su||t===Gc)return 1;{const n=u2(t),r=u2(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Xye=function(t,e){return t===e?0:t<e?-1:1},Zf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+er(e))},LP=function(t){if(typeof t!="object"||t===null)return er(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=er(e[r]),n+=":",n+=LP(t[e[r]]);return n+="}",n},E9=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function gr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const S9=function(t){ue(!DP(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Jye=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zye=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function eve(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const tve=new RegExp("^-?(0*)\\d{1,10}$"),nve=-2147483648,rve=2147483647,u2=function(t){if(tve.test(t)){const e=Number(t);if(e>=nve&&e<=rve)return e}return null},Tf=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Br("Exception was thrown by user callback.",n),e},Math.floor(0))}},ive=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yp=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Br(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ove{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ar("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Br(e)}}class qv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}qv.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="5",b9="v",I9="s",A9="r",k9="f",x9=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R9="ls",P9="p",BA="ac",N9="websocket",O9="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function ave(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function D9(t,e,n){ue(typeof e=="string","typeof type must == string"),ue(typeof n=="object","typeof params must == object");let r;if(e===N9)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===O9)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ave(t)&&(n.ns=t.namespace);const i=[];return gr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(){this.counters_={}}incrementCounter(e,n=1){Po(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return pue(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS={},HS={};function VP(t){const e=t.toString();return BS[e]||(BS[e]=new cve),BS[e]}function lve(t,e){const n=t.toString();return HS[n]||(HS[n]=e()),HS[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Tf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="start",dve="close",hve="pLPCommand",fve="pRTLPCB",L9="id",F9="pw",V9="ser",pve="cb",mve="seg",gve="ts",yve="d",vve="dframe",j9=1870,U9=30,wve=j9-U9,_ve=25e3,Tve=3e4;class kd{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zg(e),this.stats_=VP(n),this.urlFn=c=>(this.appCheckToken&&(c[BA]=this.appCheckToken),D9(n,O9,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new uve(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Tve)),Yye(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jP((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===d2)this.id=a,this.password=c;else if(o===dve)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[d2]="t",r[V9]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[pve]=this.scriptTagHolder.uniqueCallbackIdentifier),r[b9]=FP,this.transportSessionId&&(r[I9]=this.transportSessionId),this.lastSessionId&&(r[R9]=this.lastSessionId),this.applicationId&&(r[P9]=this.applicationId),this.appCheckToken&&(r[BA]=this.appCheckToken),typeof location<"u"&&location.hostname&&x9.test(location.hostname)&&(r[A9]=k9);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kd.forceAllow_=!0}static forceDisallow(){kd.forceDisallow_=!0}static isAvailable(){return kd.forceAllow_?!0:!kd.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Jye()&&!Zye()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=er(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=K5(n),i=E9(r,wve);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[vve]="t",r[L9]=e,r[F9]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=er(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class jP{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qye(),window[hve+this.uniqueCallbackIdentifier]=e,window[fve+this.uniqueCallbackIdentifier]=n,this.myIFrame=jP.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ar("frame writing exception"),a.stack&&ar(a.stack),ar(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ar("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[L9]=this.myID,e[F9]=this.myPW,e[V9]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+U9+r.length<=j9;){const o=this.pendingSegs.shift();r=r+"&"+mve+i+"="+o.seg+"&"+gve+i+"="+o.ts+"&"+yve+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(_ve)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ar("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cve=16384,Eve=45e3;let A_=null;typeof MozWebSocket<"u"?A_=MozWebSocket:typeof WebSocket<"u"&&(A_=WebSocket);class ws{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zg(this.connId),this.stats_=VP(n),this.connURL=ws.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[b9]=FP,typeof location<"u"&&location.hostname&&x9.test(location.hostname)&&(o[A9]=k9),n&&(o[I9]=n),r&&(o[R9]=r),i&&(o[BA]=i),s&&(o[P9]=s),D9(e,N9,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bl.set("previous_websocket_failure",!0);try{let r;bue(),this.mySock=new A_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ws.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&A_!==null&&!ws.forceDisallow_}static previouslyFailed(){return Bl.isInMemoryStorage||Bl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=$m(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=er(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=E9(n,Cve);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Eve))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ws.responsesRequiredToBeHealthy=2;ws.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static get ALL_TRANSPORTS(){return[kd,ws]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ws&&ws.isAvailable();let r=n&&!ws.previouslyFailed();if(e.webSocketOnly&&(n||Br("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ws];else{const i=this.transports_=[];for(const s of Jm.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Jm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Jm.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sve=6e4,bve=5e3,Ive=10*1024,Ave=100*1024,zS="t",h2="d",kve="s",f2="r",xve="e",p2="o",m2="a",g2="n",y2="p",Rve="h";class Pve{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zg("c:"+this.id+":"),this.transportManager_=new Jm(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ave?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ive?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zS in e){const n=e[zS];n===m2?this.upgradeIfSecondaryHealthy_():n===f2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===p2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zf("t",e),r=Zf("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:y2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:m2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:g2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zf("t",e),r=Zf("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zf(zS,e);if(h2 in e){const r=e[h2];if(n===Rve){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===g2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kve?this.onConnectionShutdown_(r):n===f2?this.onReset_(r):n===xve?$A("Server Error: "+r):n===p2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$A("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),FP!==r&&Br("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Sve))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(bve))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:y2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends B9{static getInstance(){return new k_}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!MR()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=32,w2=768;class xt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Et(){return new xt("")}function it(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qc(t){return t.pieces_.length-t.pieceNum_}function Lt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new xt(t.pieces_,e)}function UP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Nve(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Zm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function H9(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new xt(e,0)}function un(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof xt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new xt(n,0)}function st(t){return t.pieceNum_>=t.pieces_.length}function ii(t,e){const n=it(t),r=it(e);if(n===null)return e;if(n===r)return ii(Lt(t),Lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ove(t,e){const n=Zm(t,0),r=Zm(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Hu(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function $P(t,e){if(Qc(t)!==Qc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Gi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Qc(t)>Qc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Mve{constructor(e,n){this.errorPrefix_=n,this.parts_=Zm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=dC(this.parts_[r]);z9(this)}}function Dve(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=dC(e),z9(t)}function Lve(t){const e=t.parts_.pop();t.byteLength_-=dC(e),t.parts_.length>0&&(t.byteLength_-=1)}function z9(t){if(t.byteLength_>w2)throw new Error(t.errorPrefix_+"has a key path longer than "+w2+" bytes ("+t.byteLength_+").");if(t.parts_.length>v2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+v2+") or object contains a cycle "+bl(t))}function bl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP extends B9{static getInstance(){return new BP}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=1e3,Fve=60*5*1e3,_2=30*1e3,Vve=1.3,jve=3e4,Uve="server_kill",T2=3;class oa extends $9{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=oa.nextPersistentConnectionId_++,this.log_=Zg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ep,this.maxReconnectDelay_=Fve,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");BP.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&k_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(er(s)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Mg,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;oa.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Po(e,"w")){const r=Ch(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Br(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Pue(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Rue(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+er(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):$A("Unrecognized action received from server: "+er(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ep,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ep,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jve&&(this.reconnectDelay_=ep),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Vve)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+oa.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){ue(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ar("getToken() completed but was canceled"):(ar("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Pve(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Br(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Uve)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Br(d),c())}}}interrupt(e){ar("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ar("Resuming connection for reason: "+e),delete this.interruptReasons_[e],hA(this.interruptReasons_)&&(this.reconnectDelay_=ep,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>LP(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new xt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){ar("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=T2&&(this.reconnectDelay_=_2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ar("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=T2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+_9.replace(/\./g,"-")]=1,MR()?e["framework.cordova"]=1:J5()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=k_.getInstance().currentlyOnline();return hA(this.interruptReasons_)&&e}}oa.nextPersistentConnectionId_=0;oa.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ot(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ot(Su,e),i=new ot(Su,n);return this.compare(r,i)!==0}minPost(){return ot.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov;class W9 extends DC{static get __EMPTY_NODE(){return ov}static set __EMPTY_NODE(e){ov=e}compare(e,n){return Hu(e.name,n.name)}isDefinedOn(e){throw df("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ot.MIN}maxPost(){return new ot(Gc,ov)}makePost(e,n){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new ot(e,ov)}toString(){return".key"}}const iu=new W9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Jn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Jn.RED,this.left=i??si.EMPTY_NODE,this.right=s??si.EMPTY_NODE}copy(e,n,r,i,s){return new Jn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return si.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return si.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Jn.RED=!0;Jn.BLACK=!1;class $ve{copy(e,n,r,i,s){return this}insert(e,n,r){return new Jn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class si{constructor(e,n=si.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new si(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Jn.BLACK,null,null))}remove(e){return new si(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new av(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new av(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new av(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new av(this.root_,null,this.comparator_,!0,e)}}si.EMPTY_NODE=new $ve;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(t,e){return Hu(t.name,e.name)}function HP(t,e){return Hu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HA;function Hve(t){HA=t}const K9=function(t){return typeof t=="number"?"number:"+S9(t):"string:"+t},q9=function(t){if(t.isLeafNode()){const e=t.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Po(e,".sv"),"Priority must be a string or number.")}else ue(t===HA||t.isEmpty(),"priority of unexpected type.");ue(t===HA||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C2;class Gn{static set __childrenNodeConstructor(e){C2=e}static get __childrenNodeConstructor(){return C2}constructor(e,n=Gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),q9(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Gn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Gn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return st(e)?this:it(e)===".priority"?this.priorityNode_:Gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=it(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ue(r!==".priority"||Qc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+K9(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=S9(this.value_):e+=this.value_,this.lazyHash_=C9(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Gn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Gn.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Gn.VALUE_TYPE_ORDER.indexOf(n),s=Gn.VALUE_TYPE_ORDER.indexOf(r);return ue(i>=0,"Unknown leaf type: "+n),ue(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G9,Q9;function zve(t){G9=t}function Wve(t){Q9=t}class Kve extends DC{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Hu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ot.MIN}maxPost(){return new ot(Gc,new Gn("[PRIORITY-POST]",Q9))}makePost(e,n){const r=G9(e);return new ot(n,new Gn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Jt=new Kve;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve=Math.log(2);class Gve{constructor(e){const n=s=>parseInt(Math.log(s)/qve,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const x_=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Jn(h,d.node,Jn.BLACK,null,null);{const m=parseInt(u/2,10)+c,w=i(c,m),y=i(m+1,l);return d=t[m],h=n?n(d):d,new Jn(h,d.node,Jn.BLACK,w,y)}},s=function(c){let l=null,u=null,d=t.length;const h=function(w,y){const _=d-w,v=d;d-=w;const T=i(_+1,v),C=t[_],I=n?n(C):C;m(new Jn(I,C.node,y,null,T))},m=function(w){l?(l.left=w,l=w):(u=w,l=w)};for(let w=0;w<c.count;++w){const y=c.nextBitIsOne(),_=Math.pow(2,c.count-(w+1));y?h(_,Jn.BLACK):(h(_,Jn.BLACK),h(_,Jn.RED))}return u},o=new Gve(t.length),a=s(o);return new si(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WS;const ed={};class Zo{static get Default(){return ue(ed&&Jt,"ChildrenNode.ts has not been loaded"),WS=WS||new Zo({".priority":ed},{".priority":Jt}),WS}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ch(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof si?n:null}hasIndex(e){return Po(this.indexSet_,e.toString())}addIndex(e,n){ue(e!==iu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ot.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=x_(r,e.getCompare()):a=ed;const c=e.toString(),l={...this.indexSet_};l[c]=e;const u={...this.indexes_};return u[c]=a,new Zo(u,l)}addToIndexes(e,n){const r=o_(this.indexes_,(i,s)=>{const o=Ch(this.indexSet_,s);if(ue(o,"Missing index implementation for "+s),i===ed)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ot.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),x_(a,o.getCompare())}else return ed;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new ot(e.name,a))),c.insert(e,e.node)}});return new Zo(r,this.indexSet_)}removeFromIndexes(e,n){const r=o_(this.indexes_,i=>{if(i===ed)return i;{const s=n.get(e.name);return s?i.remove(new ot(e.name,s)):i}});return new Zo(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp;class He{static get EMPTY_NODE(){return tp||(tp=new He(new si(HP),null,Zo.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&q9(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tp}updatePriority(e){return this.children_.isEmpty()?this:new He(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?tp:n}}getChild(e){const n=it(e);return n===null?this:this.getImmediateChild(n).getChild(Lt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ue(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ot(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?tp:this.priorityNode_;return new He(i,o,s)}}updateChild(e,n){const r=it(e);if(r===null)return n;{ue(it(e)!==".priority"||Qc(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Lt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Jt,(o,a)=>{n[o]=a.val(e),r++,s&&He.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+K9(this.getPriority().val())+":"),this.forEachChild(Jt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":C9(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ot(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ot(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ot(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ot.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ot.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ey?-1:0}withIndex(e){if(e===iu||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new He(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===iu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Jt),i=n.getIterator(Jt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===iu?null:this.indexMap_.get(e.toString())}}He.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Qve extends He{constructor(){super(new si(HP),He.EMPTY_NODE,Zo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return He.EMPTY_NODE}isEmpty(){return!1}}const ey=new Qve;Object.defineProperties(ot,{MIN:{value:new ot(Su,He.EMPTY_NODE)},MAX:{value:new ot(Gc,ey)}});W9.__EMPTY_NODE=He.EMPTY_NODE;Gn.__childrenNodeConstructor=He;Hve(ey);Wve(ey);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yve=!0;function Zn(t,e=null){if(t===null)return He.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Gn(n,Zn(e))}if(!(t instanceof Array)&&Yve){const n=[];let r=!1;if(gr(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Zn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ot(o,c)))}}),n.length===0)return He.EMPTY_NODE;const s=x_(n,Bve,o=>o.name,HP);if(r){const o=x_(n,Jt.getCompare());return new He(s,Zn(e),new Zo({".priority":o},{".priority":Jt}))}else return new He(s,Zn(e),Zo.Default)}else{let n=He.EMPTY_NODE;return gr(t,(r,i)=>{if(Po(t,r)&&r.substring(0,1)!=="."){const s=Zn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Zn(e))}}zve(Zn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP extends DC{constructor(e){super(),this.indexPath_=e,ue(!st(e)&&it(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Hu(e.name,n.name):s}makePost(e,n){const r=Zn(e),i=He.EMPTY_NODE.updateChild(this.indexPath_,r);return new ot(n,i)}maxPost(){const e=He.EMPTY_NODE.updateChild(this.indexPath_,ey);return new ot(Gc,e)}toString(){return Zm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve extends DC{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Hu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ot.MIN}maxPost(){return ot.MAX}makePost(e,n){const r=Zn(e);return new ot(n,r)}toString(){return".value"}}const Y9=new Xve;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){return{type:"value",snapshotNode:t}}function Nh(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function eg(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function tg(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Jve(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(eg(n,a)):ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Nh(n,r)):o.trackChildChange(tg(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Jt,(i,s)=>{n.hasChild(i)||r.trackChildChange(eg(i,s))}),n.isLeafNode()||n.forEachChild(Jt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(tg(i,s,o))}else r.trackChildChange(Nh(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?He.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.indexedFilter_=new WP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ng.getStartPost_(e),this.endPost_=ng.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ot(n,r))||(r=He.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=He.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(He.EMPTY_NODE);const s=this;return n.forEachChild(Jt,(o,a)=>{s.matches(new ot(o,a))||(i=i.updateImmediateChild(o,He.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zve{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ng(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ot(n,r))||(r=He.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=He.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=He.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(He.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,He.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,m)=>d(m,h)}else o=this.index_.getCompare();const a=e;ue(a.numChildren()===this.limit_,"");const c=new ot(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const m=h==null?1:o(h,c);if(u&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(tg(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(eg(n,d));const y=a.updateImmediateChild(n,He.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Nh(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(eg(l.name,l.node)),s.trackChildChange(Nh(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,He.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Su}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jt}copy(){const e=new KP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ewe(t){return t.loadsAllData()?new WP(t.getIndex()):t.hasLimit()?new Zve(t):new ng(t)}function twe(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function nwe(t,e){const n=t.copy();return n.index_=e,n}function E2(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Jt?n="$priority":t.index_===Y9?n="$value":t.index_===iu?n="$key":(ue(t.index_ instanceof zP,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=er(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=er(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+er(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=er(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+er(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function S2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends $9{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Zg("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=R_.getListenId_(e,r),a={};this.listens_[o]=a;const c=E2(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Ch(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){const r=R_.getListenId_(e,n);delete this.listens_[r]}get(e){const n=E2(e._queryParams),r=e._path.toString(),i=new Mg;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Uu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=$m(a.responseText)}catch{Br("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Br("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rwe{constructor(){this.rootNode_=He.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return{value:null,children:new Map}}function J9(t,e,n){if(st(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=it(e);t.children.has(r)||t.children.set(r,P_());const i=t.children.get(r);e=Lt(e),J9(i,e,n)}}function zA(t,e,n){t.value!==null?n(e,t.value):iwe(t,(r,i)=>{const s=new xt(e.toString()+"/"+r);zA(i,s,n)})}function iwe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class swe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&gr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=10*1e3,owe=30*1e3,awe=5*60*1e3;class cwe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new swe(e);const r=b2+(owe-b2)*Math.random();Yp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;gr(e,(i,s)=>{s>0&&Po(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Yp(this.reportStats_.bind(this),Math.floor(Math.random()*2*awe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ss;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ss||(Ss={}));function qP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function GP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function QP(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ss.ACK_USER_WRITE,this.source=qP()}operationForChild(e){if(st(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new xt(e));return new N_(Et(),n,this.revert)}}else return ue(it(this.path)===e,"operationForChild called for unrelated child."),new N_(Lt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){this.source=e,this.path=n,this.type=Ss.LISTEN_COMPLETE}operationForChild(e){return st(this.path)?new rg(this.source,Et()):new rg(this.source,Lt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ss.OVERWRITE}operationForChild(e){return st(this.path)?new bu(this.source,Et(),this.snap.getImmediateChild(e)):new bu(this.source,Lt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ss.MERGE}operationForChild(e){if(st(this.path)){const n=this.children.subtree(new xt(e));return n.isEmpty()?null:n.value?new bu(this.source,Et(),n.value):new Oh(this.source,Et(),n)}else return ue(it(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Oh(this.source,Lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(st(e))return this.isFullyInitialized()&&!this.filtered_;const n=it(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lwe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uwe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Jve(o.childName,o.snapshotNode))}),np(t,i,"child_removed",e,r,n),np(t,i,"child_added",e,r,n),np(t,i,"child_moved",s,r,n),np(t,i,"child_changed",e,r,n),np(t,i,"value",e,r,n),i}function np(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>hwe(t,a,c)),o.forEach(a=>{const c=dwe(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function dwe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function hwe(t,e,n){if(e.childName==null||n.childName==null)throw df("Should only compare child_ events.");const r=new ot(e.childName,e.snapshotNode),i=new ot(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e){return{eventCache:t,serverCache:e}}function Xp(t,e,n,r){return LC(new Iu(e,n,r),t.serverCache)}function Z9(t,e,n,r){return LC(t.eventCache,new Iu(e,n,r))}function WA(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Au(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS;const fwe=()=>(KS||(KS=new si(Xye)),KS);class Dt{static fromObject(e){let n=new Dt(null);return gr(e,(r,i)=>{n=n.set(new xt(r),i)}),n}constructor(e,n=fwe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Et(),value:this.value};if(st(e))return null;{const r=it(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Lt(e),n);return s!=null?{path:un(new xt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(st(e))return this;{const n=it(e),r=this.children.get(n);return r!==null?r.subtree(Lt(e)):new Dt(null)}}set(e,n){if(st(e))return new Dt(n,this.children);{const r=it(e),s=(this.children.get(r)||new Dt(null)).set(Lt(e),n),o=this.children.insert(r,s);return new Dt(this.value,o)}}remove(e){if(st(e))return this.children.isEmpty()?new Dt(null):new Dt(null,this.children);{const n=it(e),r=this.children.get(n);if(r){const i=r.remove(Lt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Dt(null):new Dt(this.value,s)}else return this}}get(e){if(st(e))return this.value;{const n=it(e),r=this.children.get(n);return r?r.get(Lt(e)):null}}setTree(e,n){if(st(e))return n;{const r=it(e),s=(this.children.get(r)||new Dt(null)).setTree(Lt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Dt(this.value,o)}}fold(e){return this.fold_(Et(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(un(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Et(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(st(e))return null;{const s=it(e),o=this.children.get(s);return o?o.findOnPath_(Lt(e),un(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Et(),n)}foreachOnPath_(e,n,r){if(st(e))return this;{this.value&&r(n,this.value);const i=it(e),s=this.children.get(i);return s?s.foreachOnPath_(Lt(e),un(n,i),r):new Dt(null)}}foreach(e){this.foreach_(Et(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(un(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.writeTree_=e}static empty(){return new xs(new Dt(null))}}function Jp(t,e,n){if(st(e))return new xs(new Dt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=ii(i,e);return s=s.updateChild(o,n),new xs(t.writeTree_.set(i,s))}else{const i=new Dt(n),s=t.writeTree_.setTree(e,i);return new xs(s)}}}function KA(t,e,n){let r=t;return gr(n,(i,s)=>{r=Jp(r,un(e,i),s)}),r}function I2(t,e){if(st(e))return xs.empty();{const n=t.writeTree_.setTree(e,new Dt(null));return new xs(n)}}function qA(t,e){return zu(t,e)!=null}function zu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ii(n.path,e)):null}function A2(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Jt,(r,i)=>{e.push(new ot(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ot(r,i.value))}),e}function Mc(t,e){if(st(e))return t;{const n=zu(t,e);return n!=null?new xs(new Dt(n)):new xs(t.writeTree_.subtree(e))}}function GA(t){return t.writeTree_.isEmpty()}function Mh(t,e){return eW(Et(),t.writeTree_,e)}function eW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ue(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=eW(un(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(un(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t,e){return iW(e,t)}function pwe(t,e,n,r,i){ue(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Jp(t.visibleWrites,e,n)),t.lastWriteId=r}function mwe(t,e,n,r){ue(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=KA(t.visibleWrites,e,n),t.lastWriteId=r}function gwe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function ywe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ue(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&vwe(a,r.path)?i=!1:Gi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return wwe(t),!0;if(r.snap)t.visibleWrites=I2(t.visibleWrites,r.path);else{const a=r.children;gr(a,c=>{t.visibleWrites=I2(t.visibleWrites,un(r.path,c))})}return!0}else return!1}function vwe(t,e){if(t.snap)return Gi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Gi(un(t.path,n),e))return!0;return!1}function wwe(t){t.visibleWrites=tW(t.allWrites,_we,Et()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _we(t){return t.visible}function tW(t,e,n){let r=xs.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Gi(n,o)?(a=ii(n,o),r=Jp(r,a,s.snap)):Gi(o,n)&&(a=ii(o,n),r=Jp(r,Et(),s.snap.getChild(a)));else if(s.children){if(Gi(n,o))a=ii(n,o),r=KA(r,a,s.children);else if(Gi(o,n))if(a=ii(o,n),st(a))r=KA(r,Et(),s.children);else{const c=Ch(s.children,it(a));if(c){const l=c.getChild(Lt(a));r=Jp(r,Et(),l)}}}else throw df("WriteRecord should have .snap or .children")}}return r}function nW(t,e,n,r,i){if(!r&&!i){const s=zu(t.visibleWrites,e);if(s!=null)return s;{const o=Mc(t.visibleWrites,e);if(GA(o))return n;if(n==null&&!qA(o,Et()))return null;{const a=n||He.EMPTY_NODE;return Mh(o,a)}}}else{const s=Mc(t.visibleWrites,e);if(!i&&GA(s))return n;if(!i&&n==null&&!qA(s,Et()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Gi(l.path,e)||Gi(e,l.path))},a=tW(t.allWrites,o,e),c=n||He.EMPTY_NODE;return Mh(a,c)}}}function Twe(t,e,n){let r=He.EMPTY_NODE;const i=zu(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Mc(t.visibleWrites,e);return n.forEachChild(Jt,(o,a)=>{const c=Mh(Mc(s,new xt(o)),a);r=r.updateImmediateChild(o,c)}),A2(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Mc(t.visibleWrites,e);return A2(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Cwe(t,e,n,r,i){ue(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=un(e,n);if(qA(t.visibleWrites,s))return null;{const o=Mc(t.visibleWrites,s);return GA(o)?i.getChild(n):Mh(o,i.getChild(n))}}function Ewe(t,e,n,r){const i=un(e,n),s=zu(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Mc(t.visibleWrites,i);return Mh(o,r.getNode().getImmediateChild(n))}else return null}function Swe(t,e){return zu(t.visibleWrites,e)}function bwe(t,e,n,r,i,s,o){let a;const c=Mc(t.visibleWrites,e),l=zu(c,Et());if(l!=null)a=l;else if(n!=null)a=Mh(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=h.getNext();for(;m&&u.length<i;)d(m,r)!==0&&u.push(m),m=h.getNext();return u}else return[]}function Iwe(){return{visibleWrites:xs.empty(),allWrites:[],lastWriteId:-1}}function O_(t,e,n,r){return nW(t.writeTree,t.treePath,e,n,r)}function XP(t,e){return Twe(t.writeTree,t.treePath,e)}function k2(t,e,n,r){return Cwe(t.writeTree,t.treePath,e,n,r)}function M_(t,e){return Swe(t.writeTree,un(t.treePath,e))}function Awe(t,e,n,r,i,s){return bwe(t.writeTree,t.treePath,e,n,r,i,s)}function JP(t,e,n){return Ewe(t.writeTree,t.treePath,e,n)}function rW(t,e){return iW(un(t.treePath,e),t.writeTree)}function iW(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kwe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ue(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ue(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,tg(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,eg(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Nh(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,tg(r,e.snapshotNode,i.oldSnap));else throw df("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const sW=new xwe;class ZP{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Iu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return JP(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Au(this.viewCache_),s=Awe(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rwe(t){return{filter:t}}function Pwe(t,e){ue(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Nwe(t,e,n,r,i){const s=new kwe;let o,a;if(n.type===Ss.OVERWRITE){const l=n;l.source.fromUser?o=QA(t,e,l.path,l.snap,r,i,s):(ue(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!st(l.path),o=D_(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Ss.MERGE){const l=n;l.source.fromUser?o=Mwe(t,e,l.path,l.children,r,i,s):(ue(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=YA(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Ss.ACK_USER_WRITE){const l=n;l.revert?o=Fwe(t,e,l.path,r,i,s):o=Dwe(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Ss.LISTEN_COMPLETE)o=Lwe(t,e,n.path,r,s);else throw df("Unknown operation type: "+n.type);const c=s.getChanges();return Owe(e,o,c),{viewCache:o,changes:c}}function Owe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=WA(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(X9(WA(e)))}}function oW(t,e,n,r,i,s){const o=e.eventCache;if(M_(r,n)!=null)return e;{let a,c;if(st(n))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Au(e),u=l instanceof He?l:He.EMPTY_NODE,d=XP(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=O_(r,Au(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=it(n);if(l===".priority"){ue(Qc(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=k2(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Lt(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=k2(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=JP(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Xp(e,a,o.isFullyInitialized()||st(n),t.filter.filtersNodes())}}function D_(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(st(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),m,null)}else{const m=it(n);if(!c.isCompleteForPath(n)&&Qc(n)>1)return e;const w=Lt(n),_=c.getNode().getImmediateChild(m).updateChild(w,r);m===".priority"?l=u.updatePriority(c.getNode(),_):l=u.updateChild(c.getNode(),m,_,w,sW,null)}const d=Z9(e,l,c.isFullyInitialized()||st(n),u.filtersNodes()),h=new ZP(i,d,s);return oW(t,d,n,i,h,a)}function QA(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new ZP(i,e,s);if(st(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Xp(e,l,!0,t.filter.filtersNodes());else{const d=it(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Xp(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Lt(n),m=a.getNode().getImmediateChild(d);let w;if(st(h))w=r;else{const y=u.getCompleteChild(d);y!=null?UP(h)===".priority"&&y.getChild(H9(h)).isEmpty()?w=y:w=y.updateChild(h,r):w=He.EMPTY_NODE}if(m.equals(w))c=e;else{const y=t.filter.updateChild(a.getNode(),d,w,h,u,o);c=Xp(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function x2(t,e){return t.eventCache.isCompleteForChild(e)}function Mwe(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=un(n,c);x2(e,it(u))&&(a=QA(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=un(n,c);x2(e,it(u))||(a=QA(t,a,u,l,i,s,o))}),a}function R2(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function YA(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;st(n)?l=r:l=new Dt(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=R2(t,m,h);c=D_(t,c,new xt(d),w,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{const m=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),y=R2(t,w,h);c=D_(t,c,new xt(d),y,i,s,o,a)}}),c}function Dwe(t,e,n,r,i,s,o){if(M_(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(st(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return D_(t,e,n,c.getNode().getChild(n),i,s,a,o);if(st(n)){let l=new Dt(null);return c.getNode().forEachChild(iu,(u,d)=>{l=l.set(new xt(u),d)}),YA(t,e,n,l,i,s,a,o)}else return e}else{let l=new Dt(null);return r.foreach((u,d)=>{const h=un(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),YA(t,e,n,l,i,s,a,o)}}function Lwe(t,e,n,r,i){const s=e.serverCache,o=Z9(e,s.getNode(),s.isFullyInitialized()||st(n),s.isFiltered());return oW(t,o,n,r,sW,i)}function Fwe(t,e,n,r,i,s){let o;if(M_(r,n)!=null)return e;{const a=new ZP(r,e,i),c=e.eventCache.getNode();let l;if(st(n)||it(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=O_(r,Au(e));else{const d=e.serverCache.getNode();ue(d instanceof He,"serverChildren would be complete if leaf node"),u=XP(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{const u=it(n);let d=JP(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Lt(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,He.EMPTY_NODE,Lt(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=O_(r,Au(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||M_(r,Et())!=null,Xp(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vwe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new WP(r.getIndex()),s=ewe(r);this.processor_=Rwe(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(He.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(He.EMPTY_NODE,a.getNode(),null),u=new Iu(c,o.isFullyInitialized(),i.filtersNodes()),d=new Iu(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=LC(d,u),this.eventGenerator_=new lwe(this.query_)}get query(){return this.query_}}function jwe(t){return t.viewCache_.serverCache.getNode()}function Uwe(t,e){const n=Au(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!st(e)&&!n.getImmediateChild(it(e)).isEmpty())?n.getChild(e):null}function P2(t){return t.eventRegistrations_.length===0}function $we(t,e){t.eventRegistrations_.push(e)}function N2(t,e,n){const r=[];if(n){ue(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function O2(t,e,n,r){e.type===Ss.MERGE&&e.source.queryId!==null&&(ue(Au(t.viewCache_),"We should always have a full cache before handling merges"),ue(WA(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Nwe(t.processor_,i,e,n,r);return Pwe(t.processor_,s.viewCache),ue(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,aW(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Bwe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,(s,o)=>{r.push(Nh(s,o))}),n.isFullyInitialized()&&r.push(X9(n.getNode())),aW(t,r,n.getNode(),e)}function aW(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return uwe(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L_;class Hwe{constructor(){this.views=new Map}}function zwe(t){ue(!L_,"__referenceConstructor has already been defined"),L_=t}function Wwe(){return ue(L_,"Reference.ts has not been loaded"),L_}function Kwe(t){return t.views.size===0}function eN(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ue(s!=null,"SyncTree gave us an op for an invalid query."),O2(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(O2(o,e,n,r));return s}}function qwe(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=O_(n,i?r:null),c=!1;a?c=!0:r instanceof He?(a=XP(n,r),c=!1):(a=He.EMPTY_NODE,c=!1);const l=LC(new Iu(a,c,!1),new Iu(r,i,!1));return new Vwe(e,l)}return o}function Gwe(t,e,n,r,i,s){const o=qwe(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),$we(o,n),Bwe(o,n)}function Qwe(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Yc(t);if(i==="default")for(const[c,l]of t.views.entries())o=o.concat(N2(l,n,r)),P2(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=t.views.get(i);c&&(o=o.concat(N2(c,n,r)),P2(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Yc(t)&&s.push(new(Wwe())(e._repo,e._path)),{removed:s,events:o}}function cW(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Jd(t,e){let n=null;for(const r of t.views.values())n=n||Uwe(r,e);return n}function lW(t,e){if(e._queryParams.loadsAllData())return FC(t);{const r=e._queryIdentifier;return t.views.get(r)}}function uW(t,e){return lW(t,e)!=null}function Yc(t){return FC(t)!=null}function FC(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F_;function Ywe(t){ue(!F_,"__referenceConstructor has already been defined"),F_=t}function Xwe(){return ue(F_,"Reference.ts has not been loaded"),F_}let Jwe=1;class M2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Dt(null),this.pendingWriteTree_=Iwe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dW(t,e,n,r,i){return pwe(t.pendingWriteTree_,e,n,r,i),i?Cf(t,new bu(qP(),e,n)):[]}function Zwe(t,e,n,r){mwe(t.pendingWriteTree_,e,n,r);const i=Dt.fromObject(n);return Cf(t,new Oh(qP(),e,i))}function mc(t,e,n=!1){const r=gwe(t.pendingWriteTree_,e);if(ywe(t.pendingWriteTree_,e)){let s=new Dt(null);return r.snap!=null?s=s.set(Et(),!0):gr(r.children,o=>{s=s.set(new xt(o),!0)}),Cf(t,new N_(r.path,s,n))}else return[]}function VC(t,e,n){return Cf(t,new bu(GP(),e,n))}function e_e(t,e,n){const r=Dt.fromObject(n);return Cf(t,new Oh(GP(),e,r))}function t_e(t,e){return Cf(t,new rg(GP(),e))}function n_e(t,e,n){const r=nN(t,n);if(r){const i=rN(r),s=i.path,o=i.queryId,a=ii(s,e),c=new rg(QP(o),a);return iN(t,s,c)}else return[]}function XA(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||uW(o,e))){const c=Qwe(o,e,n,r);Kwe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,m)=>Yc(m));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const m=s_e(h);for(let w=0;w<m.length;++w){const y=m[w],_=y.query,v=pW(t,y);t.listenProvider_.startListening(Zp(_),V_(t,_),v.hashFn,v.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Zp(e),null):l.forEach(h=>{const m=t.queryToTagMap.get(jC(h));t.listenProvider_.stopListening(Zp(h),m)}))}o_e(t,l)}return a}function r_e(t,e,n,r){const i=nN(t,r);if(i!=null){const s=rN(i),o=s.path,a=s.queryId,c=ii(o,e),l=new bu(QP(a),c,n);return iN(t,o,l)}else return[]}function i_e(t,e,n,r){const i=nN(t,r);if(i){const s=rN(i),o=s.path,a=s.queryId,c=ii(o,e),l=Dt.fromObject(n),u=new Oh(QP(a),c,l);return iN(t,o,u)}else return[]}function D2(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,m)=>{const w=ii(h,i);s=s||Jd(m,w),o=o||Yc(m)});let a=t.syncPointTree_.get(i);a?(o=o||Yc(a),s=s||Jd(a,Et())):(a=new Hwe,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=He.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,w)=>{const y=Jd(w,Et());y&&(s=s.updateImmediateChild(m,y))}));const l=uW(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=jC(e);ue(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const m=a_e();t.queryToTagMap.set(h,m),t.tagToQueryMap.set(m,h)}const u=YP(t.pendingWriteTree_,i);let d=Gwe(a,e,n,u,s,c);if(!l&&!o&&!r){const h=lW(a,e);d=d.concat(c_e(t,e,h))}return d}function tN(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=ii(o,e),l=Jd(a,c);if(l)return l});return nW(i,e,s,n,!0)}function Cf(t,e){return hW(e,t.syncPointTree_,null,YP(t.pendingWriteTree_,Et()))}function hW(t,e,n,r){if(st(t.path))return fW(t,e,n,r);{const i=e.get(Et());n==null&&i!=null&&(n=Jd(i,Et()));let s=[];const o=it(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=rW(r,o);s=s.concat(hW(a,c,l,u))}return i&&(s=s.concat(eN(i,t,r,n))),s}}function fW(t,e,n,r){const i=e.get(Et());n==null&&i!=null&&(n=Jd(i,Et()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=rW(r,o),u=t.operationForChild(o);u&&(s=s.concat(fW(u,a,c,l)))}),i&&(s=s.concat(eN(i,t,r,n))),s}function pW(t,e){const n=e.query,r=V_(t,n);return{hashFn:()=>(jwe(e)||He.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?n_e(t,n._path,r):t_e(t,n._path);{const s=eve(i,n);return XA(t,n,null,s)}}}}function V_(t,e){const n=jC(e);return t.queryToTagMap.get(n)}function jC(t){return t._path.toString()+"$"+t._queryIdentifier}function nN(t,e){return t.tagToQueryMap.get(e)}function rN(t){const e=t.indexOf("$");return ue(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new xt(t.substr(0,e))}}function iN(t,e,n){const r=t.syncPointTree_.get(e);ue(r,"Missing sync point for query tag that we're tracking");const i=YP(t.pendingWriteTree_,e);return eN(r,n,i,null)}function s_e(t){return t.fold((e,n,r)=>{if(n&&Yc(n))return[FC(n)];{let i=[];return n&&(i=cW(n)),gr(r,(s,o)=>{i=i.concat(o)}),i}})}function Zp(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Xwe())(t._repo,t._path):t}function o_e(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=jC(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function a_e(){return Jwe++}function c_e(t,e,n){const r=e._path,i=V_(t,e),s=pW(t,n),o=t.listenProvider_.startListening(Zp(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)ue(!Yc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!st(l)&&u&&Yc(u))return[FC(u).query];{let h=[];return u&&(h=h.concat(cW(u).map(m=>m.query))),gr(d,(m,w)=>{h=h.concat(w)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Zp(u),V_(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new sN(n)}node(){return this.node_}}class oN{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=un(this.path_,e);return new oN(this.syncTree_,n)}node(){return tN(this.syncTree_,this.path_)}}const l_e=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},L2=function(t,e,n){if(!t||typeof t!="object")return t;if(ue(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return u_e(t[".sv"],e,n);if(typeof t[".sv"]=="object")return d_e(t[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},u_e=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ue(!1,"Unexpected server value: "+t)}},d_e=function(t,e,n){t.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ue(!1,"Unexpected increment value: "+r);const i=e.node();if(ue(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},mW=function(t,e,n,r){return aN(e,new oN(n,t),r)},gW=function(t,e,n){return aN(t,new sN(e),n)};function aN(t,e,n){const r=t.getPriority().val(),i=L2(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=L2(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Gn(a,Zn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Gn(i))),o.forEachChild(Jt,(a,c)=>{const l=aN(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function lN(t,e){let n=e instanceof xt?e:new xt(e),r=t,i=it(n);for(;i!==null;){const s=Ch(r.node.children,i)||{children:{},childCount:0};r=new cN(i,r,s),n=Lt(n),i=it(n)}return r}function Ef(t){return t.node.value}function yW(t,e){t.node.value=e,JA(t)}function vW(t){return t.node.childCount>0}function h_e(t){return Ef(t)===void 0&&!vW(t)}function UC(t,e){gr(t.node.children,(n,r)=>{e(new cN(n,t,r))})}function wW(t,e,n,r){n&&e(t),UC(t,i=>{wW(i,e,!0)})}function f_e(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ty(t){return new xt(t.parent===null?t.name:ty(t.parent)+"/"+t.name)}function JA(t){t.parent!==null&&p_e(t.parent,t.name,t)}function p_e(t,e,n){const r=h_e(n),i=Po(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,JA(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,JA(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_e=/[\[\].#$\/\u0000-\u001F\u007F]/,g_e=/[\[\].#$\u0000-\u001F\u007F]/,qS=10*1024*1024,uN=function(t){return typeof t=="string"&&t.length!==0&&!m_e.test(t)},_W=function(t){return typeof t=="string"&&t.length!==0&&!g_e.test(t)},y_e=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_W(t)},ZA=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!DP(t)||t&&typeof t=="object"&&Po(t,".sv")},TW=function(t,e,n,r){r&&e===void 0||$C(uC(t,"value"),e,n)},$C=function(t,e,n){const r=n instanceof xt?new Mve(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+bl(r));if(typeof e=="function")throw new Error(t+"contains a function "+bl(r)+" with contents = "+e.toString());if(DP(e))throw new Error(t+"contains "+e.toString()+" "+bl(r));if(typeof e=="string"&&e.length>qS/3&&dC(e)>qS)throw new Error(t+"contains a string greater than "+qS+" utf8 bytes "+bl(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(gr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!uN(o)))throw new Error(t+" contains an invalid key ("+o+") "+bl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Dve(r,o),$C(t,a,r),Lve(r)}),i&&s)throw new Error(t+' contains ".value" child '+bl(r)+" in addition to actual children.")}},v_e=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Zm(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!uN(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Ove);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Gi(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},w_e=function(t,e,n,r){const i=uC(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];gr(e,(o,a)=>{const c=new xt(o);if($C(i,a,un(n,c)),UP(c)===".priority"&&!ZA(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),v_e(i,s)},dN=function(t,e,n,r){if(!_W(n))throw new Error(uC(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},__e=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dN(t,e,n)},CW=function(t,e){if(it(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},T_e=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!uN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!y_e(n))throw new Error(uC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function BC(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!$P(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function EW(t,e,n){BC(t,n),SW(t,r=>$P(r,e))}function Fs(t,e,n){BC(t,n),SW(t,r=>Gi(r,e)||Gi(e,r))}function SW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(E_e(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function E_e(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Qp&&ar("event: "+n.toString()),Tf(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_e="repo_interrupt",b_e=25;class I_e{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new C_e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=P_(),this.transactionQueueTree_=new cN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A_e(t,e,n){if(t.stats_=VP(t.repoInfo_),t.forceRestClient_||ive())t.server_=new R_(t.repoInfo_,(r,i,s,o)=>{F2(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>V2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{er(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new oa(t.repoInfo_,e,(r,i,s,o)=>{F2(t,r,i,s,o)},r=>{V2(t,r)},r=>{k_e(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=lve(t.repoInfo_,()=>new cwe(t.stats_,t.server_)),t.infoData_=new rwe,t.infoSyncTree_=new M2({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=VC(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),hN(t,"connected",!1),t.serverSyncTree_=new M2({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);Fs(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function bW(t){const n=t.infoData_.getNode(new xt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function HC(t){return l_e({timestamp:bW(t)})}function F2(t,e,n,r,i){t.dataUpdateCount++;const s=new xt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=o_(n,l=>Zn(l));o=i_e(t.serverSyncTree_,s,c,i)}else{const c=Zn(n);o=r_e(t.serverSyncTree_,s,c,i)}else if(r){const c=o_(n,l=>Zn(l));o=e_e(t.serverSyncTree_,s,c)}else{const c=Zn(n);o=VC(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Dh(t,s)),Fs(t.eventQueue_,a,o)}function V2(t,e){hN(t,"connected",e),e===!1&&P_e(t)}function k_e(t,e){gr(e,(n,r)=>{hN(t,n,r)})}function hN(t,e,n){const r=new xt("/.info/"+e),i=Zn(n);t.infoData_.updateSnapshot(r,i);const s=VC(t.infoSyncTree_,r,i);Fs(t.eventQueue_,r,s)}function fN(t){return t.nextWriteId_++}function x_e(t,e,n,r,i){zC(t,"set",{path:e.toString(),value:n,priority:r});const s=HC(t),o=Zn(n,r),a=tN(t.serverSyncTree_,e),c=gW(o,a,s),l=fN(t),u=dW(t.serverSyncTree_,e,c,l,!0);BC(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,m)=>{const w=h==="ok";w||Br("set at "+e+" failed: "+h);const y=mc(t.serverSyncTree_,l,!w);Fs(t.eventQueue_,e,y),tk(t,i,h,m)});const d=mN(t,e);Dh(t,d),Fs(t.eventQueue_,d,[])}function R_e(t,e,n,r){zC(t,"update",{path:e.toString(),value:n});let i=!0;const s=HC(t),o={};if(gr(n,(a,c)=>{i=!1,o[a]=mW(un(e,a),Zn(c),t.serverSyncTree_,s)}),i)ar("update() called with empty data.  Don't do anything."),tk(t,r,"ok",void 0);else{const a=fN(t),c=Zwe(t.serverSyncTree_,e,o,a);BC(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||Br("update at "+e+" failed: "+l);const h=mc(t.serverSyncTree_,a,!d),m=h.length>0?Dh(t,e):e;Fs(t.eventQueue_,m,h),tk(t,r,l,u)}),gr(n,l=>{const u=mN(t,un(e,l));Dh(t,u)}),Fs(t.eventQueue_,e,[])}}function P_e(t){zC(t,"onDisconnectEvents");const e=HC(t),n=P_();zA(t.onDisconnect_,Et(),(i,s)=>{const o=mW(i,s,t.serverSyncTree_,e);J9(n,i,o)});let r=[];zA(n,Et(),(i,s)=>{r=r.concat(VC(t.serverSyncTree_,i,s));const o=mN(t,i);Dh(t,o)}),t.onDisconnect_=P_(),Fs(t.eventQueue_,Et(),r)}function N_e(t,e,n){let r;it(e._path)===".info"?r=D2(t.infoSyncTree_,e,n):r=D2(t.serverSyncTree_,e,n),EW(t.eventQueue_,e._path,r)}function ek(t,e,n){let r;it(e._path)===".info"?r=XA(t.infoSyncTree_,e,n):r=XA(t.serverSyncTree_,e,n),EW(t.eventQueue_,e._path,r)}function O_e(t){t.persistentConnection_&&t.persistentConnection_.interrupt(S_e)}function zC(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ar(n,...e)}function tk(t,e,n,r){e&&Tf(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function IW(t,e,n){return tN(t.serverSyncTree_,e,n)||He.EMPTY_NODE}function pN(t,e=t.transactionQueueTree_){if(e||WC(t,e),Ef(e)){const n=kW(t,e);ue(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&M_e(t,ty(e),n)}else vW(e)&&UC(e,n=>{pN(t,n)})}function M_e(t,e,n){const r=n.map(l=>l.currentWriteId),i=IW(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];ue(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=ii(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{zC(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(mc(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();WC(t,lN(t.transactionQueueTree_,e)),pN(t,t.transactionQueueTree_),Fs(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Tf(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Br("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Dh(t,e)}},o)}function Dh(t,e){const n=AW(t,e),r=ty(n),i=kW(t,n);return D_e(t,i,r),r}function D_e(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=ii(n,c.path);let u=!1,d;if(ue(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(mc(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=b_e)u=!0,d="maxretry",i=i.concat(mc(t.serverSyncTree_,c.currentWriteId,!0));else{const h=IW(t,c.path,o);c.currentInputSnapshot=h;const m=e[a].update(h.val());if(m!==void 0){$C("transaction failed: Data returned ",m,c.path);let w=Zn(m);typeof m=="object"&&m!=null&&Po(m,".priority")||(w=w.updatePriority(h.getPriority()));const _=c.currentWriteId,v=HC(t),T=gW(w,h,v);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=T,c.currentWriteId=fN(t),o.splice(o.indexOf(_),1),i=i.concat(dW(t.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),i=i.concat(mc(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(mc(t.serverSyncTree_,c.currentWriteId,!0))}Fs(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}WC(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Tf(r[a]);pN(t,t.transactionQueueTree_)}function AW(t,e){let n,r=t.transactionQueueTree_;for(n=it(e);n!==null&&Ef(r)===void 0;)r=lN(r,n),e=Lt(e),n=it(e);return r}function kW(t,e){const n=[];return xW(t,e,n),n.sort((r,i)=>r.order-i.order),n}function xW(t,e,n){const r=Ef(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);UC(e,i=>{xW(t,i,n)})}function WC(t,e){const n=Ef(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,yW(e,n.length>0?n:void 0)}UC(e,r=>{WC(t,r)})}function mN(t,e){const n=ty(AW(t,e)),r=lN(t.transactionQueueTree_,e);return f_e(r,i=>{GS(t,i)}),GS(t,r),wW(r,i=>{GS(t,i)}),n}function GS(t,e){const n=Ef(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ue(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ue(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(mc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?yW(e,void 0):n.length=s+1,Fs(t.eventQueue_,ty(e),i);for(let o=0;o<r.length;o++)Tf(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_e(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function F_e(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Br(`Invalid query segment '${n}' in query '${t}'`)}return e}const j2=function(t,e){const n=V_e(t),r=n.namespace;n.domain==="firebase.com"&&_a(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_a("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Qye();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new M9(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new xt(n.pathString)}},V_e=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=L_e(t.substring(u,d)));const h=F_e(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const m=e.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j_e=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=U2.charAt(n%64),n=Math.floor(n/64);ue(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=U2.charAt(e[i]);return ue(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+er(this.snapshot.exportVal())}}class PW{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return st(this._path)?null:UP(this._path)}get ref(){return new Ra(this._repo,this._path)}get _queryIdentifier(){const e=S2(this._queryParams),n=LP(e);return n==="{}"?"default":n}get _queryObject(){return S2(this._queryParams)}isEqual(e){if(e=qe(e),!(e instanceof ny))return!1;const n=this._repo===e._repo,r=$P(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Nve(this._path)}}function U_e(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function $_e(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===iu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Su)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Gc)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Jt){if(e!=null&&!ZA(e)||n!=null&&!ZA(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ue(t.getIndex()instanceof zP||t.getIndex()===Y9,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class Ra extends ny{constructor(e,n){super(e,n,new KP,!1)}get parent(){const e=H9(this._path);return e===null?null:new Ra(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ig{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new xt(e),r=Lh(this.ref,e);return new ig(this._node.getChild(n),r,Jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new ig(i,Lh(this.ref,r),Jt)))}hasChild(e){const n=new xt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kl(t,e){return t=qe(t),t._checkNotDeleted("ref"),e!==void 0?Lh(t._root,e):t._root}function Lh(t,e){return t=qe(t),it(t._path)===null?__e("child","path",e):dN("child","path",e),new Ra(t._repo,un(t._path,e))}function LMe(t,e){t=qe(t),CW("push",t._path),TW("push",e,t._path,!0);const n=bW(t._repo),r=j_e(n),i=Lh(t,r),s=Lh(t,r);let o;return e!=null?o=nk(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function nk(t,e){t=qe(t),CW("set",t._path),TW("set",e,t._path,!1);const n=new Mg;return x_e(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function B_e(t,e){w_e("update",e,t._path);const n=new Mg;return R_e(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class KC{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new RW("value",this,new ig(e.snapshotNode,new Ra(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new PW(this,e,n):null}matches(e){return e instanceof KC?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class qC{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new PW(this,e,n):null}createEvent(e,n){ue(e.childName!=null,"Child events should have a childName.");const r=Lh(new Ra(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new RW(e.type,this,new ig(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof qC?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function OW(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,l=(u,d)=>{ek(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}const o=new NW(n,s||void 0),a=e==="value"?new KC(o):new qC(e,o);return N_e(t._repo,t,a),()=>ek(t._repo,t,a)}function rk(t,e,n,r){return OW(t,"value",e,n,r)}function H_e(t,e,n,r){return OW(t,"child_added",e,n,r)}function MW(t,e,n){let r=null;const i=n?new NW(n):null;e==="value"?r=new KC(i):e&&(r=new qC(e,i)),ek(t._repo,t,r)}class DW{}class z_e extends DW{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ny(e._repo,e._path,twe(e._queryParams,this._limit),e._orderByCalled)}}function W_e(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new z_e(t)}class K_e extends DW{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){U_e(e,"orderByChild");const n=new xt(this._path);if(st(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new zP(n),i=nwe(e._queryParams,r);return $_e(i),new ny(e._repo,e._path,i,!0)}}function q_e(t){return dN("orderByChild","path",t),new K_e(t)}function G_e(t,...e){let n=qe(t);for(const r of e)n=r._apply(n);return n}zwe(Ra);Ywe(Ra);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_e="FIREBASE_DATABASE_EMULATOR_HOST",ik={};let Y_e=!1;function X_e(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=rs(s);t.repoInfo_=new M9(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function J_e(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||_a("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ar("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=j2(s,i),a=o.repoInfo,c;typeof process<"u"&&o2&&(c=o2[Q_e]),c?(s=`http://${c}?ns=${a.namespace}`,o=j2(s,i),a=o.repoInfo):o.repoInfo.secure;const l=new ove(t.name,t.options,e);T_e("Invalid Firebase Database URL",o),st(o.path)||_a("Database URL must point to the root of a Firebase Database (not including a child path).");const u=eTe(a,t,l,new sve(t,n));return new tTe(u,t)}function Z_e(t,e){const n=ik[e];(!n||n[t.key]!==t)&&_a(`Database ${e}(${t.repoInfo_}) has already been deleted.`),O_e(t),delete n[t.key]}function eTe(t,e,n,r){let i=ik[e.name];i||(i={},ik[e.name]=i);let s=i[t.toURLString()];return s&&_a("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new I_e(t,Y_e,n,r),i[t.toURLString()]=s,s}class tTe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(A_e(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ra(this._repo,Et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Z_e(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_a("Cannot call "+e+" on a deleted database.")}}function nTe(t=ll(),e){const n=Vs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=lC("database");r&&rTe(n,...r)}return n}function rTe(t,e,n,r={}){t=qe(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&So(r,s.repoInfo_.emulatorOptions))return;_a("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&_a('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new qv(qv.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:OR(r.mockUserToken,t.app.options.projectId);o=new qv(a)}rs(e)&&(Dg(e),Lg("Database",!0)),X_e(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iTe(t){Hye(cl),zr(new xr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return J_e(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),xn(a2,c2,t),xn(a2,c2,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sTe={".sv":"timestamp"};function FMe(){return sTe}oa.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};oa.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};iTe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW="firebasestorage.googleapis.com",FW="storageBucket",oTe=2*60*1e3,aTe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends Fi{constructor(e,n,r=0){super(QS(e),`Firebase Storage: ${n} (${QS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return QS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hn||(hn={}));function QS(t){return"storage/"+t}function gN(){const t="An unknown error occurred, please check the error payload for server response.";return new fn(hn.UNKNOWN,t)}function cTe(t){return new fn(hn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lTe(t){return new fn(hn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uTe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fn(hn.UNAUTHENTICATED,t)}function dTe(){return new fn(hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hTe(t){return new fn(hn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fTe(){return new fn(hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pTe(){return new fn(hn.CANCELED,"User canceled the upload/download.")}function mTe(t){return new fn(hn.INVALID_URL,"Invalid URL '"+t+"'.")}function gTe(t){return new fn(hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yTe(){return new fn(hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FW+"' property when initializing the app?")}function vTe(){return new fn(hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wTe(){return new fn(hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _Te(t){return new fn(hn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sk(t){return new fn(hn.INVALID_ARGUMENT,t)}function VW(){return new fn(hn.APP_DELETED,"The Firebase app was deleted.")}function TTe(t){return new fn(hn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function em(t,e){return new fn(hn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rp(t){throw new fn(hn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ai.makeFromUrl(e,n)}catch{return new Ai(e,"")}if(r.path==="")return r;throw gTe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),w={bucket:1,path:3},y=n===LW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${y}/${i}/${_}`,"i"),C=[{regex:a,indices:c,postModify:s},{regex:m,indices:w,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let I=0;I<C.length;I++){const x=C[I],D=x.regex.exec(e);if(D){const A=D[x.indices.bucket];let S=D[x.indices.path];S||(S=""),r=new Ai(A,S),x.postModify(r);break}}if(r==null)throw mTe(e);return r}}class CTe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ETe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(..._){l||(l=!0,e.apply(null,_))}function d(_){i=setTimeout(()=>{i=null,t(m,c())},_)}function h(){s&&clearTimeout(s)}function m(_,...v){if(l){h();return}if(_){h(),u.call(null,_,...v);return}if(c()||o){h(),u.call(null,_,...v);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,d(C)}let w=!1;function y(_){w||(w=!0,h(),!l&&(i!==null?(_||(a=2),clearTimeout(i),d(0)):_||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function STe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bTe(t){return t!==void 0}function ITe(t){return typeof t=="object"&&!Array.isArray(t)}function yN(t){return typeof t=="string"||t instanceof String}function $2(t){return vN()&&t instanceof Blob}function vN(){return typeof Blob<"u"}function B2(t,e,n,r){if(r<e)throw sk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sk(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jW(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var su;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(su||(su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ATe(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kTe{constructor(e,n,r,i,s,o,a,c,l,u,d,h=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,y)=>{this.resolve_=w,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new cv(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===su.NO_ERROR,c=s.getStatus();if(!a||ATe(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===su.ABORT;r(!1,new cv(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new cv(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());bTe(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=gN();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?VW():pTe();o(c)}else{const c=fTe();o(c)}};this.canceled_?n(!1,new cv(!1,null,!0)):this.backoffId_=ETe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&STe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cv{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function xTe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function RTe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PTe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NTe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function OTe(t,e,n,r,i,s,o=!0,a=!1){const c=jW(t.urlParams),l=t.url+c,u=Object.assign({},t.headers);return PTe(u,e),xTe(u,n),RTe(u,s),NTe(u,r),new kTe(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MTe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DTe(...t){const e=MTe();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(vN())return new Blob(t);throw new fn(hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LTe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FTe(t){if(typeof atob>"u")throw _Te("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YS{constructor(e,n){this.data=e,this.contentType=n||null}}function VTe(t,e){switch(t){case io.RAW:return new YS(UW(e));case io.BASE64:case io.BASE64URL:return new YS($W(t,e));case io.DATA_URL:return new YS(UTe(e),$Te(e))}throw gN()}function UW(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jTe(t){let e;try{e=decodeURIComponent(t)}catch{throw em(io.DATA_URL,"Malformed data URL.")}return UW(e)}function $W(t,e){switch(t){case io.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw em(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case io.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw em(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FTe(e)}catch(i){throw i.message.includes("polyfill")?i:em(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class BW{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw em(io.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BTe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function UTe(t){const e=new BW(t);return e.base64?$W(io.BASE64,e.rest):jTe(e.rest)}function $Te(t){return new BW(t).contentType}function BTe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){let r=0,i="";$2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if($2(this.data_)){const r=this.data_,i=LTe(r,e,n);return i===null?null:new nc(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new nc(r,!0)}}static getBlob(...e){if(vN()){const n=e.map(r=>r instanceof nc?r.data_:r);return new nc(DTe.apply(null,n))}else{const n=e.map(o=>yN(o)?VTe(io.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new nc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t){let e;try{e=JSON.parse(t)}catch{return null}return ITe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HTe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zTe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zW(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WTe(t,e){return e}class Pr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||WTe}}let lv=null;function KTe(t){return!yN(t)||t.length<2?t:zW(t)}function WW(){if(lv)return lv;const t=[];t.push(new Pr("bucket")),t.push(new Pr("generation")),t.push(new Pr("metageneration")),t.push(new Pr("name","fullPath",!0));function e(s,o){return KTe(o)}const n=new Pr("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Pr("size");return i.xform=r,t.push(i),t.push(new Pr("timeCreated")),t.push(new Pr("updated")),t.push(new Pr("md5Hash",null,!0)),t.push(new Pr("cacheControl",null,!0)),t.push(new Pr("contentDisposition",null,!0)),t.push(new Pr("contentEncoding",null,!0)),t.push(new Pr("contentLanguage",null,!0)),t.push(new Pr("contentType",null,!0)),t.push(new Pr("metadata","customMetadata",!0)),lv=t,lv}function qTe(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ai(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function GTe(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return qTe(r,t),r}function KW(t,e,n){const r=HW(e);return r===null?null:GTe(t,r,n)}function QTe(t,e,n,r){const i=HW(e);if(i===null||!yN(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),m=GC(h,n,r),w=jW({alt:"media",token:l});return m+w})[0]}function YTe(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class wN{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(t){if(!t)throw gN()}function XTe(t,e){function n(r,i){const s=KW(t,i,e);return qW(s!==null),s}return n}function JTe(t,e){function n(r,i){const s=KW(t,i,e);return qW(s!==null),QTe(s,i,t.host,t._protocol)}return n}function GW(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=dTe():i=uTe():n.getStatus()===402?i=lTe(t.bucket):n.getStatus()===403?i=hTe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function QW(t){const e=GW(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=cTe(t.path)),s.serverResponse=i.serverResponse,s}return n}function ZTe(t,e,n){const r=e.fullServerUrl(),i=GC(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wN(i,s,JTe(t,n),o);return a.errorHandler=QW(e),a}function eCe(t,e){const n=e.fullServerUrl(),r=GC(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(c,l){}const a=new wN(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=QW(e),a}function tCe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function nCe(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=tCe(null,e)),r}function rCe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let I=0;I<2;I++)C=C+Math.random().toString().slice(2);return C}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=nCe(e,r,i),u=YTe(l,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=nc.getBlob(d,r,h);if(m===null)throw vTe();const w={name:l.fullPath},y=GC(s,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,T=new wN(y,_,XTe(t,n),v);return T.urlParams=w,T.headers=o,T.body=m.uploadData(),T.errorHandler=GW(e),T}class iCe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=su.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=su.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=su.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw rp("cannot .send() more than once");if(rs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sCe extends iCe{initXhr(){this.xhr_.responseType="text"}}function _N(){return new sCe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this._service=e,n instanceof Ai?this._location=n:this._location=Ai.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ku(e,n)}get root(){const e=new Ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zW(this._location.path)}get storage(){return this._service}get parent(){const e=HTe(this._location.path);if(e===null)return null;const n=new Ai(this._location.bucket,e);return new ku(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TTe(e)}}function oCe(t,e,n){t._throwIfRoot("uploadBytes");const r=rCe(t.storage,t._location,WW(),new nc(e,!0),n);return t.storage.makeRequestWithTokens(r,_N).then(i=>({metadata:i,ref:t}))}function aCe(t){t._throwIfRoot("getDownloadURL");const e=ZTe(t.storage,t._location,WW());return t.storage.makeRequestWithTokens(e,_N).then(n=>{if(n===null)throw wTe();return n})}function cCe(t){t._throwIfRoot("deleteObject");const e=eCe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_N)}function lCe(t,e){const n=zTe(t._location.path,e),r=new Ai(t._location.bucket,n);return new ku(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uCe(t){return/^[A-Za-z]+:\/\//.test(t)}function dCe(t,e){return new ku(t,e)}function YW(t,e){if(t instanceof TN){const n=t;if(n._bucket==null)throw yTe();const r=new ku(n,n._bucket);return e!=null?YW(r,e):r}else return e!==void 0?lCe(t,e):t}function hCe(t,e){if(e&&uCe(e)){if(t instanceof TN)return dCe(t,e);throw sk("To use ref(service, url), the first argument must be a Storage instance.")}else return YW(t,e)}function H2(t,e){const n=e==null?void 0:e[FW];return n==null?null:Ai.makeFromBucketSpec(n,t)}function fCe(t,e,n,r={}){t.host=`${e}:${n}`;const i=rs(e);i&&(Dg(`https://${t.host}/b`),Lg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:OR(s,t.app.options.projectId))}class TN{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=LW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oTe,this._maxUploadRetryTime=aTe,this._requests=new Set,i!=null?this._bucket=Ai.makeFromBucketSpec(i,this._host):this._bucket=H2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ai.makeFromBucketSpec(this._url,e):this._bucket=H2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ku(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new CTe(VW());{const o=OTe(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const z2="@firebase/storage",W2="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW="storage";function pCe(t,e,n){return t=qe(t),oCe(t,e,n)}function mCe(t){return t=qe(t),aCe(t)}function gCe(t){return t=qe(t),cCe(t)}function K2(t,e){return t=qe(t),hCe(t,e)}function yCe(t=ll(),e){t=qe(t);const r=Vs(t,XW).getImmediate({identifier:e}),i=lC("storage");return i&&vCe(r,...i),r}function vCe(t,e,n,r={}){fCe(t,e,n,r)}function wCe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new TN(n,r,i,e,cl)}function _Ce(){zr(new xr(XW,wCe,"PUBLIC").setMultipleInstances(!0)),xn(z2,W2,""),xn(z2,W2,"esm2020")}_Ce();const JW="@firebase/installations",CN="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW=1e4,eK=`w:${CN}`,tK="FIS_v2",TCe="https://firebaseinstallations.googleapis.com/v1",CCe=60*60*1e3,ECe="installations",SCe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bCe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xu=new al(ECe,SCe,bCe);function nK(t){return t instanceof Fi&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK({projectId:t}){return`${TCe}/projects/${t}/installations`}function iK(t){return{token:t.token,requestStatus:2,expiresIn:ACe(t.expiresIn),creationTime:Date.now()}}async function sK(t,e){const r=(await e.json()).error;return xu.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function oK({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ICe(t,{refreshToken:e}){const n=oK(t);return n.append("Authorization",kCe(e)),n}async function aK(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ACe(t){return Number(t.replace("s","000"))}function kCe(t){return`${tK} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xCe({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=rK(t),i=oK(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={fid:n,authVersion:tK,appId:t.appId,sdkVersion:eK},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await aK(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:iK(l.authToken)}}else throw await sK("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RCe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PCe=/^[cdef][\w-]{21}$/,ok="";function NCe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=OCe(t);return PCe.test(n)?n:ok}catch{return ok}}function OCe(t){return RCe(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=new Map;function uK(t,e){const n=QC(t);dK(n,e),MCe(n,e)}function dK(t,e){const n=lK.get(t);if(n)for(const r of n)r(e)}function MCe(t,e){const n=DCe();n&&n.postMessage({key:t,fid:e}),LCe()}let Hl=null;function DCe(){return!Hl&&"BroadcastChannel"in self&&(Hl=new BroadcastChannel("[Firebase] FID Change"),Hl.onmessage=t=>{dK(t.data.key,t.data.fid)}),Hl}function LCe(){lK.size===0&&Hl&&(Hl.close(),Hl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FCe="firebase-installations-database",VCe=1,Ru="firebase-installations-store";let XS=null;function EN(){return XS||(XS=hC(FCe,VCe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ru)}}})),XS}async function j_(t,e){const n=QC(t),i=(await EN()).transaction(Ru,"readwrite"),s=i.objectStore(Ru),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&uK(t,e.fid),e}async function hK(t){const e=QC(t),r=(await EN()).transaction(Ru,"readwrite");await r.objectStore(Ru).delete(e),await r.done}async function YC(t,e){const n=QC(t),i=(await EN()).transaction(Ru,"readwrite"),s=i.objectStore(Ru),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&uK(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t){let e;const n=await YC(t.appConfig,r=>{const i=jCe(r),s=UCe(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ok?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jCe(t){const e=t||{fid:NCe(),registrationStatus:0};return fK(e)}function UCe(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=$Ce(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:BCe(t)}:{installationEntry:e}}async function $Ce(t,e){try{const n=await xCe(t,e);return j_(t.appConfig,n)}catch(n){throw nK(n)&&n.customData.serverCode===409?await hK(t.appConfig):await j_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function BCe(t){let e=await q2(t.appConfig);for(;e.registrationStatus===1;)await cK(100),e=await q2(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await SN(t);return r||n}return e}function q2(t){return YC(t,e=>{if(!e)throw xu.create("installation-not-found");return fK(e)})}function fK(t){return HCe(t)?{fid:t.fid,registrationStatus:0}:t}function HCe(t){return t.registrationStatus===1&&t.registrationTime+ZW<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zCe({appConfig:t,heartbeatServiceProvider:e},n){const r=WCe(t,n),i=ICe(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={installation:{sdkVersion:eK,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await aK(()=>fetch(r,a));if(c.ok){const l=await c.json();return iK(l)}else throw await sK("Generate Auth Token",c)}function WCe(t,{fid:e}){return`${rK(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e=!1){let n;const r=await YC(t.appConfig,s=>{if(!pK(s))throw xu.create("not-registered");const o=s.authToken;if(!e&&GCe(o))return s;if(o.requestStatus===1)return n=KCe(t,e),s;{if(!navigator.onLine)throw xu.create("app-offline");const a=YCe(s);return n=qCe(t,a),a}});return n?await n:r.authToken}async function KCe(t,e){let n=await G2(t.appConfig);for(;n.authToken.requestStatus===1;)await cK(100),n=await G2(t.appConfig);const r=n.authToken;return r.requestStatus===0?bN(t,e):r}function G2(t){return YC(t,e=>{if(!pK(e))throw xu.create("not-registered");const n=e.authToken;return XCe(n)?{...e,authToken:{requestStatus:0}}:e})}async function qCe(t,e){try{const n=await zCe(t,e),r={...e,authToken:n};return await j_(t.appConfig,r),n}catch(n){if(nK(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await hK(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await j_(t.appConfig,r)}throw n}}function pK(t){return t!==void 0&&t.registrationStatus===2}function GCe(t){return t.requestStatus===2&&!QCe(t)}function QCe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+CCe}function YCe(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function XCe(t){return t.requestStatus===1&&t.requestTime+ZW<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JCe(t){const e=t,{installationEntry:n,registrationPromise:r}=await SN(e);return r?r.catch(console.error):bN(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZCe(t,e=!1){const n=t;return await eEe(n),(await bN(n,e)).token}async function eEe(t){const{registrationPromise:e}=await SN(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tEe(t){if(!t||!t.options)throw JS("App Configuration");if(!t.name)throw JS("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw JS(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function JS(t){return xu.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK="installations",nEe="installations-internal",rEe=t=>{const e=t.getProvider("app").getImmediate(),n=tEe(e),r=Vs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},iEe=t=>{const e=t.getProvider("app").getImmediate(),n=Vs(e,mK).getImmediate();return{getId:()=>JCe(n),getToken:i=>ZCe(n,i)}};function sEe(){zr(new xr(mK,rEe,"PUBLIC")),zr(new xr(nEe,iEe,"PRIVATE"))}sEe();xn(JW,CN);xn(JW,CN,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="analytics",oEe="firebase_id",aEe="origin",cEe=60*1e3,lEe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",IN="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Fg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uEe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ni=new al("analytics","Analytics",uEe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dEe(t){if(!t.startsWith(IN)){const e=Ni.create("invalid-gtag-resource",{gtagURL:t});return Hr.warn(e.message),""}return t}function gK(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function hEe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function fEe(t,e){const n=hEe("firebase-js-sdk-policy",{createScriptURL:dEe}),r=document.createElement("script"),i=`${IN}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function pEe(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function mEe(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await gK(n)).find(l=>l.measurementId===i);c&&await e[c.appId]}}catch(a){Hr.error(a)}t("config",i,s)}async function gEe(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await gK(n);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Hr.error(s)}}function yEe(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await gEe(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await mEe(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Hr.error(a)}}return i}function vEe(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=yEe(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function wEe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(IN)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ee=30,TEe=1e3;class CEe{constructor(e={},n=TEe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const yK=new CEe;function EEe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function SEe(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:EEe(n)},i=lEe.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw Ni.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function bEe(t,e=yK,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ni.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ni.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new kEe;return setTimeout(async()=>{a.abort()},cEe),vK({appId:r,apiKey:i,measurementId:s},o,a,e)}async function vK(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=yK){var a;const{appId:s,measurementId:o}=t;try{await IEe(r,e)}catch(c){if(o)return Hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await SEe(t);return i.deleteThrottleMetadata(s),c}catch(c){const l=c;if(!AEe(l)){if(i.deleteThrottleMetadata(s),o)return Hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw c}const u=Number((a=l==null?void 0:l.customData)==null?void 0:a.httpStatus)===503?kL(n,i.intervalMillis,_Ee):kL(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,d),Hr.debug(`Calling attemptFetch again in ${u} millis`),vK(t,d,r,i)}}function IEe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ni.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function AEe(t){if(!(t instanceof Fi)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class kEe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function xEe(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function REe(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PEe(){if(DR())try{await LR()}catch(t){return Hr.warn(Ni.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Hr.warn(Ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NEe(t,e,n,r,i,s,o){const a=bEe(t);a.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Hr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Hr.error(h)),e.push(a);const c=PEe().then(h=>{if(h)return r.getId()}),[l,u]=await Promise.all([a,c]);wEe(s)||fEe(s,l.measurementId),i("js",new Date);const d=(o==null?void 0:o.config)??{};return d[aEe]="firebase",d.update=!0,u!=null&&(d[oEe]=u),i("config",l.measurementId,d),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OEe{constructor(e){this.app=e}_delete(){return delete Zd[this.app.options.appId],Promise.resolve()}}let Zd={},Q2=[];const Y2={};let ZS="dataLayer",MEe="gtag",X2,AN,J2=!1;function DEe(){const t=[];if(X5()&&t.push("This is a browser extension environment."),Z5()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ni.create("invalid-analytics-context",{errorInfo:e});Hr.warn(n.message)}}function LEe(t,e,n){DEe();const r=t.options.appId;if(!r)throw Ni.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ni.create("no-api-key");if(Zd[r]!=null)throw Ni.create("already-exists",{id:r});if(!J2){pEe(ZS);const{wrappedGtag:s,gtagCore:o}=vEe(Zd,Q2,Y2,ZS,MEe);AN=s,X2=o,J2=!0}return Zd[r]=NEe(t,Q2,Y2,e,X2,ZS,n),new OEe(t)}function FEe(t=ll()){t=qe(t);const e=Vs(t,U_);return e.isInitialized()?e.getImmediate():VEe(t)}function VEe(t,e={}){const n=Vs(t,U_);if(n.isInitialized()){const i=n.getImmediate();if(So(e,n.getOptions()))return i;throw Ni.create("already-initialized")}return n.initialize({options:e})}function jEe(t,e,n){t=qe(t),REe(AN,Zd[t.app.options.appId],e,n).catch(r=>Hr.error(r))}function UEe(t,e,n,r){t=qe(t),xEe(AN,Zd[t.app.options.appId],e,n,r).catch(i=>Hr.error(i))}const Z2="@firebase/analytics",eV="0.10.19";function $Ee(){zr(new xr(U_,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return LEe(r,i,n)},"PUBLIC")),zr(new xr("analytics-internal",t,"PRIVATE")),xn(Z2,eV),xn(Z2,eV,"esm2020");function t(e){try{const n=e.getProvider(U_).getImmediate();return{logEvent:(r,i,s)=>UEe(n,r,i,s),setUserProperties:(r,i)=>jEe(n,r,i)}}catch(n){throw Ni.create("interop-component-reg-failed",{reason:n})}}}$Ee();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BEe="/firebase-messaging-sw.js",HEe="/firebase-cloud-messaging-push-scope",wK="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zEe="https://fcmregistrations.googleapis.com/v1",_K="google.c.a.c_id",WEe="google.c.a.c_l",KEe="google.c.a.ts",qEe="google.c.a.e",tV=1e4;var nV;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(nV||(nV={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var sg;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(sg||(sg={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function GEe(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="fcm_token_details_db",QEe=5,rV="fcm_token_object_Store";async function YEe(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(eb))return null;let e=null;return(await hC(eb,QEe,{upgrade:async(r,i,s,o)=>{if(i<2||!r.objectStoreNames.contains(rV))return;const a=o.objectStore(rV),c=await a.index("fcmSenderId").get(t);if(await a.clear(),!!c){if(i===2){const l=c;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:l.createTime??Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Bo(l.vapidKey)}}}else if(i===3){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Bo(l.auth),p256dh:Bo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Bo(l.vapidKey)}}}else if(i===4){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Bo(l.auth),p256dh:Bo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Bo(l.vapidKey)}}}}}})).close(),await xS(eb),await xS("fcm_vapid_details_db"),await xS("undefined"),XEe(e)?e:null}function XEe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JEe="firebase-messaging-database",ZEe=1,og="firebase-messaging-store";let tb=null;function TK(){return tb||(tb=hC(JEe,ZEe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(og)}}})),tb}async function eSe(t){const e=CK(t),r=await(await TK()).transaction(og).objectStore(og).get(e);if(r)return r;{const i=await YEe(t.appConfig.senderId);if(i)return await kN(t,i),i}}async function kN(t,e){const n=CK(t),i=(await TK()).transaction(og,"readwrite");return await i.objectStore(og).put(e,n),await i.done,e}function CK({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tSe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ir=new al("messaging","Messaging",tSe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nSe(t,e){const n=await RN(t),r=EK(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(xN(t.appConfig),i)).json()}catch(o){throw Ir.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Ir.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Ir.create("token-subscribe-no-token");return s.token}async function rSe(t,e){const n=await RN(t),r=EK(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${xN(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Ir.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Ir.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Ir.create("token-update-no-token");return s.token}async function iSe(t,e){const r={method:"DELETE",headers:await RN(t)};try{const s=await(await fetch(`${xN(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Ir.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Ir.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function xN({projectId:t}){return`${zEe}/projects/${t}/registrations`}async function RN({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function EK({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==wK&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sSe=7*24*60*60*1e3;async function oSe(t){const e=await cSe(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Bo(e.getKey("auth")),p256dh:Bo(e.getKey("p256dh"))},r=await eSe(t.firebaseDependencies);if(r){if(lSe(r.subscriptionOptions,n))return Date.now()>=r.createTime+sSe?aSe(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await iSe(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return iV(t.firebaseDependencies,n)}else return iV(t.firebaseDependencies,n)}async function aSe(t,e){try{const n=await rSe(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await kN(t.firebaseDependencies,r),n}catch(n){throw n}}async function iV(t,e){const r={token:await nSe(t,e),createTime:Date.now(),subscriptionOptions:e};return await kN(t,r),r.token}async function cSe(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:GEe(e)})}function lSe(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return uSe(e,t),dSe(e,t),hSe(e,t),e}function uSe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function dSe(t,e){e.data&&(t.data=e.data)}function hSe(t,e){var i,s,o,a;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;t.fcmOptions={};const n=((s=e.fcmOptions)==null?void 0:s.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(t){return typeof t=="object"&&!!t&&_K in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pSe(t){if(!t||!t.options)throw nb("App Configuration Object");if(!t.name)throw nb("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw nb(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function nb(t){return Ir.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mSe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=pSe(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gSe(t){try{t.swRegistration=await navigator.serviceWorker.register(BEe,{scope:HEe}),t.swRegistration.update().catch(()=>{}),await ySe(t.swRegistration)}catch(e){throw Ir.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function ySe(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${tV} ms`)),tV),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var o;((o=s.target)==null?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vSe(t,e){if(!e&&!t.swRegistration&&await gSe(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ir.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wSe(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=wK)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SK(t,e){if(!navigator)throw Ir.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ir.create("permission-blocked");return await wSe(t,e==null?void 0:e.vapidKey),await vSe(t,e==null?void 0:e.serviceWorkerRegistration),oSe(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Se(t,e,n){const r=TSe(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[_K],message_name:n[WEe],message_time:n[KEe],message_device_time:Math.floor(Date.now()/1e3)})}function TSe(t){switch(t){case sg.NOTIFICATION_CLICKED:return"notification_open";case sg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CSe(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===sg.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(sV(n)):t.onMessageHandler.next(sV(n)));const r=n.data;fSe(r)&&r[qEe]==="1"&&await _Se(t,n.messageType,r)}const oV="@firebase/messaging",aV="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ESe=t=>{const e=new mSe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>CSe(e,n)),e},SSe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>SK(e,r)}};function bSe(){zr(new xr("messaging",ESe,"PUBLIC")),zr(new xr("messaging-internal",SSe,"PRIVATE")),xn(oV,aV),xn(oV,aV,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ISe(){try{await LR()}catch{return!1}return typeof window<"u"&&DR()&&Z5()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ASe(t,e){if(!navigator)throw Ir.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kSe(t=ll()){return ISe().then(e=>{if(!e)throw Ir.create("unsupported-browser")},e=>{throw Ir.create("indexed-db-unsupported")}),Vs(qe(t),"messaging").getImmediate()}async function cV(t,e){return t=qe(t),SK(t,e)}function xSe(t,e){return t=qe(t),ASe(t,e)}bSe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RSe="type.googleapis.com/google.protobuf.Int64Value",PSe="type.googleapis.com/google.protobuf.UInt64Value";function bK(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function $_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>$_(e));if(typeof t=="function"||typeof t=="object")return bK(t,e=>$_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Fh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case RSe:case PSe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Fh(e)):typeof t=="function"||typeof t=="object"?bK(t,e=>Fh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oi extends Fi{constructor(e,n,r){super(`${PN}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,oi.prototype)}}function NSe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function B_(t,e){let n=NSe(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!lV[o])return new oi("internal","internal");n=lV[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=Fh(i))}}catch{}return n==="ok"?null:new oi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OSe{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="us-central1",MSe=/^data: (.*?)(?:\n|$)/;function DSe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new oi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class LSe{constructor(e,n,r,i,s=ak,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new OSe(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=ak}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function FSe(t,e,n){const r=rs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Dg(t.emulatorOrigin+"/backends"),Lg("Functions",!0))}function VSe(t,e,n){const r=i=>USe(t,e,i,{});return r.stream=(i,s)=>BSe(t,e,i,s),r}function IK(t){return t.emulatorOrigin&&rs(t.emulatorOrigin)?"include":void 0}async function jSe(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:IK(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function AK(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function USe(t,e,n,r){const i=t._url(e);return $Se(t,i,n,r)}async function $Se(t,e,n,r){n=$_(n);const i={data:n},s=await AK(t,r),o=r.timeout||7e4,a=DSe(o),c=await Promise.race([jSe(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!c)throw new oi("cancelled","Firebase Functions instance was deleted.");const l=B_(c.status,c.json);if(l)throw l;if(!c.json)throw new oi("internal","Response is not valid JSON object.");let u=c.json.data;if(typeof u>"u"&&(u=c.json.result),typeof u>"u")throw new oi("internal","Response is missing data field.");return{data:Fh(u)}}function BSe(t,e,n,r){const i=t._url(e);return HSe(t,i,n,r||{})}async function HSe(t,e,n,r){var h;n=$_(n);const i={data:n},s=await AK(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:IK(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const y=new oi("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const w=B_(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,c;const l=new Promise((m,w)=>{a=m,c=w});(h=r==null?void 0:r.signal)==null||h.addEventListener("abort",()=>{const m=new oi("cancelled","Request was cancelled.");c(m)});const u=o.body.getReader(),d=zSe(u,a,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=d.getReader();return{async next(){const{value:w,done:y}=await m.read();return{value:w,done:y}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:l}}function zSe(t,e,n,r){const i=(o,a)=>{const c=o.match(MSe);if(!c)return;const l=c[1];try{const u=JSON.parse(l);if("result"in u){e(Fh(u.result));return}if("message"in u){a.enqueue(Fh(u.message));return}if("error"in u){const d=B_(0,u);a.error(d),n(d);return}}catch(u){if(u instanceof oi){a.error(u),n(u);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return c();async function c(){if(r!=null&&r.aborted){const l=new oi("cancelled","Request was cancelled");return o.error(l),n(l),Promise.resolve()}try{const{value:l,done:u}=await t.read();if(u){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const h=new oi("cancelled","Request was cancelled");o.error(h),n(h),await t.cancel();return}a+=s.decode(l,{stream:!0});const d=a.split(`
`);a=d.pop()||"";for(const h of d)h.trim()&&i(h.trim(),o);return c()}catch(l){const u=l instanceof oi?l:B_(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const uV="@firebase/functions",dV="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WSe="auth-internal",KSe="app-check-internal",qSe="messaging-internal";function GSe(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(WSe),o=n.getProvider(qSe),a=n.getProvider(KSe);return new LSe(i,s,o,a,r)};zr(new xr(PN,e,"PUBLIC").setMultipleInstances(!0)),xn(uV,dV,t),xn(uV,dV,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QSe(t=ll(),e=ak){const r=Vs(qe(t),PN).getImmediate({identifier:e}),i=lC("functions");return i&&YSe(r,...i),r}function YSe(t,e,n){FSe(qe(t),e,n)}function VMe(t,e,n){return VSe(qe(t),e)}GSe();const XSe={apiKey:"AIzaSyCmioywtCMDFJjDvq8bF0_NBZJC5nyVPYo",authDomain:"huddlely.firebaseapp.com",projectId:"huddlely",storageBucket:"huddlely.firebasestorage.app",messagingSenderId:"788189911710",appId:"1:788189911710:web:3fd75fade0c56164d5b98f",measurementId:"G-8ZE8GCXPRX"},Wu=Vde().length===0?r6(XSe):ll(),qs=$ye(Wu),Ae=Wpe(Wu),xl=nTe(Wu),hV=yCe(Wu);FEe(Wu);const XC=new Ko,jMe=QSe(Wu,"us-central1");let kK=null;if(typeof window<"u")try{kK=kSe(Wu)}catch(t){console.log("Messaging not available:",t)}XC.addScope("https://www.googleapis.com/auth/calendar");XC.addScope("https://www.googleapis.com/auth/userinfo.profile");XC.addScope("https://www.googleapis.com/auth/userinfo.email");const fV=t=>new Uge(qs,t,{size:"normal",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),JSe=async(t,e)=>{try{return await Hge(qs,t,e)}catch(n){throw console.error("Error sending OTP:",n),n}},ZSe=async(t,e)=>{try{return await t.confirm(e)}catch(n){throw console.error("Error verifying OTP:",n),n}},rb=768;function Sf(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${rb-1}px)`),r=()=>{e(window.innerWidth<rb)};return n.addEventListener("change",r),e(window.innerWidth<rb),()=>n.removeEventListener("change",r)},[]),!!t}const xK=g.createContext(void 0),ebe=({children:t})=>{const e=Sf(),[n,r]=g.useState(e?"collapsed":"expanded"),[i,s]=g.useState(!1);g.useEffect(()=>{r(e?"collapsed":"expanded")},[e]);const o=()=>{r(a=>a==="expanded"?"collapsed":"expanded")};return p.jsx(xK.Provider,{value:{state:n,setState:r,toggleSidebar:o,isChatOpenMobile:i,setChatOpenMobile:s},children:t})},JC=()=>{const t=g.useContext(xK);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},RK=g.forwardRef(({className:t,...e},n)=>p.jsx("aside",{ref:n,className:fe("flex flex-col",t),...e}));RK.displayName="Sidebar";const PK=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("flex flex-col overflow-y-auto",t),...e}));PK.displayName="SidebarContent";const NK=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("flex flex-col",t),...e}));NK.displayName="SidebarGroup";const OK=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:fe("px-4 py-2 text-xs font-semibold text-muted-foreground",t),...e}));OK.displayName="SidebarGroupLabel";const MK=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("flex flex-col",t),...e}));MK.displayName="SidebarGroupContent";const DK=g.forwardRef(({className:t,...e},n)=>p.jsx("ul",{ref:n,className:fe("space-y-1",t),...e}));DK.displayName="SidebarMenu";const ck=g.forwardRef(({className:t,...e},n)=>p.jsx("li",{ref:n,className:fe("",t),...e}));ck.displayName="SidebarMenuItem";const Gv=g.forwardRef(({className:t,...e},n)=>p.jsx("button",{ref:n,className:fe("flex w-full items-center gap-3 px-3 py-2 text-sm",t),...e}));Gv.displayName="SidebarMenuButton";const tbe=g.forwardRef(({className:t,...e},n)=>p.jsx("hr",{ref:n,className:fe("my-2 border-border/50",t),...e}));tbe.displayName="SidebarSeparator";const LK=g.forwardRef((t,e)=>{const{toggleSidebar:n}=JC();return p.jsx("button",{ref:e,onClick:n,...t})});LK.displayName="SidebarTrigger";const nbe=Ng("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xi({className:t,variant:e,...n}){return p.jsx("div",{className:fe(nbe({variant:e}),t),...n})}var ZC="Collapsible",[rbe]=qr(ZC),[ibe,NN]=rbe(ZC),FK=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[c,l]=ka({prop:r,defaultProp:i??!1,onChange:o,caller:ZC});return p.jsx(ibe,{scope:n,disabled:s,contentId:ho(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:p.jsx(Fe.div,{"data-state":MN(c),"data-disabled":s?"":void 0,...a,ref:e})})});FK.displayName=ZC;var VK="CollapsibleTrigger",jK=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=NN(VK,n);return p.jsx(Fe.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":MN(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:we(t.onClick,i.onOpenToggle)})});jK.displayName=VK;var ON="CollapsibleContent",UK=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=NN(ON,t.__scopeCollapsible);return p.jsx($n,{present:n||i.open,children:({present:s})=>p.jsx(sbe,{...r,ref:e,present:s})})});UK.displayName=ON;var sbe=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=NN(ON,n),[a,c]=g.useState(r),l=g.useRef(null),u=Ct(e,l),d=g.useRef(0),h=d.current,m=g.useRef(0),w=m.current,y=o.open||a,_=g.useRef(y),v=g.useRef(void 0);return g.useEffect(()=>{const T=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(T)},[]),pi(()=>{const T=l.current;if(T){v.current=v.current||{transitionDuration:T.style.transitionDuration,animationName:T.style.animationName},T.style.transitionDuration="0s",T.style.animationName="none";const C=T.getBoundingClientRect();d.current=C.height,m.current=C.width,_.current||(T.style.transitionDuration=v.current.transitionDuration,T.style.animationName=v.current.animationName),c(r)}},[o.open,r]),p.jsx(Fe.div,{"data-state":MN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...s,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:y&&i})});function MN(t){return t?"open":"closed"}var obe=FK;const abe=obe,cbe=jK,lbe=UK,$K=g.createContext(void 0);function ube({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(null),[s,o]=g.useState(!0),{toast:a}=Aa();g.useEffect(()=>{const R=vge(qs,async O=>{n(O),O?await l(O):i(null),o(!1)});return()=>R()},[]);const c=async R=>{const O=Ge(Ae,"users",R),P=await fd(O);P.exists()&&i(P.data())},l=async R=>{const O=Ge(Ae,"users",R.uid),P=await fd(O);if(P.exists()){const $=P.data();i($),await hr(O,{lastLoginAt:new Date().toISOString()})}else{const $={uid:R.uid,email:R.email||"",displayName:R.displayName||"",photoURL:R.photoURL||"",phoneNumber:R.phoneNumber||"",emailVerified:R.emailVerified,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),preferences:{notifications:!0,theme:"system",language:"en"},teamId:null,role:"user"};await w_(O,$),i($)}},N={user:e,userProfile:r,loading:s,signIn:async(R,O)=>{await fge(qs,R,O)},signUp:async(R,O,P)=>{const $=await hge(qs,R,O);$.user&&P&&await mge($.user,{displayName:P}),$.user&&await GF($.user)},signInWithGoogle:async()=>{try{const{UniversalGoogleAuth:R}=await Wt(async()=>{const{UniversalGoogleAuth:O}=await import("./universalAuth-DAYamXVt.js");return{UniversalGoogleAuth:O}},[]);await R.signIn()}catch(R){console.error("Google Sign-In failed:",R),await Qge(qs,XC)}},signInWithMicrosoft:async()=>{const R=new Yd("microsoft.com");try{if(!qs.currentUser)throw new Error("You must be logged in with Google/Email before linking Microsoft.");const O=await Yge(qs.currentUser,R);a({title:"Microsoft Linked ✅",description:`Connected as ${O.user.displayName||O.user.email}`});const P=Yd.credentialFromResult(O),$=P==null?void 0:P.accessToken;console.log("Microsoft Access Token:",$)}catch(O){O.code==="auth/credential-already-in-use"?a({title:"Already Linked",description:"This Microsoft account is already linked with another user.",variant:"destructive"}):(console.error("Microsoft linking error:",O),a({title:"Microsoft Link Failed",description:O.message,variant:"destructive"}))}},signInWithPhone:async R=>{const O=fV("recaptcha-container");return await JSe(R,O)},verifyPhoneOTP:async(R,O)=>{await ZSe(R,O)},signOutUser:async()=>{await wge(qs)},updateUserProfile:async R=>{if(!e||!r)return;const O=Ge(Ae,"users",e.uid);await hr(O,R),i({...r,...R}),a({title:"Profile Updated! ✨"})},sendVerificationEmail:async()=>{e&&await GF(e)},resetPassword:async R=>{await dge(qs,R),a({title:"Password reset email sent!",description:"Check your inbox for reset instructions."})},setupPhoneAuth:R=>fV(R),sendTeamRequest:async R=>{if(!e||!r)throw new Error("Authentication required.");if(e.email===R)throw new Error("You cannot send a request to yourself.");const O=dr(Ae,"users"),P=ya(O,Kd("email","==",R)),$=await LA(P);if($.empty)throw new Error("No user found with this email address.");const H=$.docs[0];await vf(dr(Ae,"teamRequests"),{senderId:e.uid,senderName:r.displayName||e.email,senderEmail:e.email,receiverId:H.id,receiverEmail:H.data().email,status:"pending",createdAt:FA()}),a({title:"Team request sent! 🚀"})},fetchReceivedTeamRequests:async()=>{if(!e)return[];const R=dr(Ae,"teamRequests"),O=ya(R,Kd("receiverId","==",e.uid),Kd("status","==","pending"));return(await LA(O)).docs.map($=>({id:$.id,...$.data()}))},acceptTeamRequest:async(R,O)=>{if(!e)throw new Error("You must be logged in to accept a request.");o(!0);const P=__(Ae);try{const $=Ge(Ae,"users",O),H=await fd($);if(!H.exists())throw new Error("The user who sent the invite no longer exists.");const se=H.data().teamId,V=Ge(Ae,"users",e.uid),j=Ge(Ae,"teamRequests",R);if(se){const ie=Ge(Ae,"teams",se);P.update(ie,{memberIds:Lz(e.uid)}),P.update(V,{teamId:se})}else{const ie=Ge(dr(Ae,"teams"));P.set(ie,{memberIds:[O,e.uid],createdAt:FA(),createdBy:O}),P.update($,{teamId:ie.id}),P.update(V,{teamId:ie.id})}P.delete(j),await P.commit(),await c(e.uid),a({title:"Team request accepted! 🎉",description:"You are now part of the team."})}catch($){throw console.error("Error accepting team request:",$),a({title:"Failed to accept request",description:$.message,variant:"destructive"}),$}finally{o(!1)}},declineTeamRequest:async R=>{const O=Ge(Ae,"teamRequests",R);await Ao(O),a({title:"Team request declined"})},fetchTeamMembers:async()=>{if(!(r!=null&&r.teamId))return[];const R=Ge(Ae,"teams",r.teamId),O=await fd(R);if(!O.exists())return await hr(Ge(Ae,"users",r.uid),{teamId:null}),i(H=>H?{...H,teamId:null}:null),[];const P=O.data(),$=[];for(const H of P.memberIds){const X=Ge(Ae,"users",H),se=await fd(X);se.exists()&&$.push(se.data())}return $}};return p.jsx($K.Provider,{value:N,children:!s&&t})}function Bn(){const t=g.useContext($K);if(t===void 0)throw new Error("useAuth must be used within an AuthContextProvider");return t}let lk=null;const pV=t=>{lk=t},Rl=class Rl{constructor(){Kt(this,"permission","default");Kt(this,"scheduledNotifications",new Map);Kt(this,"pendingAssignments",new Map);this.checkPermission(),this.setupServiceWorker()}static getInstance(){return Rl.instance||(Rl.instance=new Rl),Rl.instance}async addInAppNotification(e,n,r,i,s){if(lk)try{await lk({title:n,body:r,type:i,read:!1,data:s||{}},e),console.log("In-app notification added:",{title:n,body:r,type:i})}catch(o){console.error("Failed to add in-app notification:",o)}else console.warn("Global addNotification function not available")}checkPermission(){"Notification"in window&&(this.permission=Notification.permission)}async setupServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}catch(e){console.warn("Service Worker registration failed:",e)}}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.permission==="granted")return!0;const e=await Notification.requestPermission();return this.permission=e,e==="granted"}async showNotification(e,n){if(this.permission!=="granted")return console.warn("Notification permission not granted"),null;const r={icon:"/favicon.ico",badge:"/favicon.ico",tag:"mindmeld-notification",requireInteraction:!1,silent:!1,...n};try{if("serviceWorker"in navigator&&"actions"in Notification.prototype&&r.actions&&r.actions.length>0)if("serviceWorker"in navigator)try{return await(await navigator.serviceWorker.ready).showNotification(e,r),null}catch(s){console.warn("Service Worker notification failed, falling back to basic notification:",s);const{actions:o,...a}=r,c=new Notification(e,a);return a.requireInteraction||setTimeout(()=>{c.close()},5e3),c}else{const{actions:s,...o}=r,a=new Notification(e,o);return o.requireInteraction||setTimeout(()=>{a.close()},5e3),a}else{const s=new Notification(e,r);return r.requireInteraction||setTimeout(()=>{s.close()},5e3),s}}catch(i){return console.error("Failed to show notification:",i),null}}scheduleTaskReminder(e,n=15){if(!e.dueDate)return;const r=new Date(e.dueDate),i=new Date(r.getTime()-n*60*1e3),s=new Date;if(i<=s)return;const o=i.getTime()-s.getTime(),a=`task-reminder-${e.id}`;this.clearScheduledNotification(a);const c=setTimeout(()=>{this.showNotification(`📋 Task Reminder: ${e.title}`,{body:`Due in ${n} minutes: ${e.description||"No description"}`,icon:"/favicon.ico",tag:a,data:{taskId:e.id,type:"reminder"},..."serviceWorker"in navigator&&{actions:[{action:"start",title:"▶️ Start Now"},{action:"snooze",title:"⏰ Snooze 5min"}]}}),this.scheduledNotifications.delete(a),Wt(async()=>{const{alexaNotifications:l}=await Promise.resolve().then(()=>Nb);return{alexaNotifications:l}},void 0).then(({alexaNotifications:l})=>{l.send({title:"Task Reminder",body:`${e.title} is due in ${n} minutes`,type:"reminder",data:{taskId:e.id}})})},o);this.scheduledNotifications.set(a,c)}scheduleTaskDueNotification(e){if(!e.dueDate)return;const n=new Date(e.dueDate),r=new Date;if(n<=r)return;const i=n.getTime()-r.getTime(),s=`task-due-${e.id}`;this.clearScheduledNotification(s);const o=setTimeout(()=>{this.showNotification(`🚨 Task Due Now: ${e.title}`,{body:`This task is now due: ${e.description||"No description"}`,icon:"/favicon.ico",tag:s,data:{taskId:e.id,type:"due"},requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"complete",title:"✅ Mark Complete"},{action:"extend",title:"⏰ Extend Deadline"}]}}),this.scheduledNotifications.delete(s),Wt(async()=>{const{alexaNotifications:a}=await Promise.resolve().then(()=>Nb);return{alexaNotifications:a}},void 0).then(({alexaNotifications:a})=>{a.send({title:"Task Due Now",body:`${e.title} is due now`,type:"reminder",data:{taskId:e.id}})})},i);this.scheduledNotifications.set(s,o)}showPomodoroNotification(e,n){const i={"focus-complete":{title:"🎉 Focus Session Complete!",body:`Great work! Time for a well-deserved break. Sessions completed: ${n||0}`,actions:[{action:"start-break",title:"☕ Start Break"},{action:"continue",title:"🔄 Continue Working"}]},"break-complete":{title:"⚡ Break Time Over!",body:"Ready to focus again? Let's get back to work!",actions:[{action:"start-focus",title:"🎯 Start Focus"},{action:"extend-break",title:"⏰ Extend Break"}]}}[e];this.showNotification(i.title,{body:i.body,tag:`pomodoro-${e}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:i.actions}})}showTaskCompleteNotification(e){this.showNotification("🎯 Task Completed!",{body:`Great job completing "${e}"!`,tag:"task-complete",..."serviceWorker"in navigator&&{actions:[{action:"view-stats",title:"📊 View Stats"},{action:"next-task",title:"➡️ Next Task"}]}})}showTaskAssignmentNotification(e,n,r){if(!e.assignedTo||!e.assignedTo.includes(r))return;this.addInAppNotification(r,"New Task Assignment",`${n} assigned "${e.title}" to you`,"task-assignment",{taskId:e.id,taskTitle:e.title,assignerName:n,priority:e.priority});const i=e.priority==="high"?"🔥":e.priority==="medium"?"⚡":"📝",s=e.dueDate?` (Due: ${new Date(e.dueDate).toLocaleDateString()})`:"";this.showNotification(`${i} New Task Assignment`,{body:`${n} assigned "${e.title}" to you${s}`,tag:`task-assignment-${e.id}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"start-task",title:"▶️ Start Now"},{action:"view-task",title:"👁️ View Details"},{action:"mark-progress",title:"🔄 Mark In Progress"}]},data:{taskId:e.id,type:"assignment",priority:e.priority,assignerName:n}}),Wt(async()=>{const{alexaNotifications:o}=await Promise.resolve().then(()=>Nb);return{alexaNotifications:o}},void 0).then(({alexaNotifications:o})=>{o.send({title:"New Task Assignment",body:`${n} assigned ${e.title} to you${s?", due "+new Date(e.dueDate).toLocaleString():""}`,type:"assignment",data:{taskId:e.id,priority:e.priority}})})}showBulkAssignmentNotification(e,n){this.showNotification("📋 Multiple Task Assignments",{body:`${n} assigned ${e} tasks to you`,tag:"bulk-assignment",requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"view-all-tasks",title:"📋 View All Tasks"},{action:"prioritize",title:"🎯 Help Me Prioritize"}]},data:{type:"bulk-assignment",taskCount:e,assignerName:n}})}showSmartTaskSuggestion(e,n){this.showNotification("🤖 AI Task Suggestion",{body:`Based on your schedule, I suggest working on "${e.title}" now. ${n}`,tag:`ai-suggestion-${e.id}`,..."serviceWorker"in navigator&&{actions:[{action:"start-suggested",title:"🚀 Start Now"},{action:"schedule-later",title:"⏰ Schedule Later"},{action:"dismiss-suggestion",title:"❌ Not Now"}]},data:{taskId:e.id,type:"ai-suggestion",reason:n}})}showTeamCollaborationUpdate(e,n,r){const i={started:"▶️",completed:"✅",commented:"💬",updated:"📝"};this.showNotification(`${i[n]||"📋"} Team Update`,{body:`${e} ${n} "${r}"`,tag:`team-update-${Date.now()}`,..."serviceWorker"in navigator&&{actions:[{action:"view-task",title:"👁️ View Task"},{action:"send-message",title:"💬 Send Message"}]},data:{type:"team-collaboration",action:n,teamMemberName:e}})}showWorkloadBalanceAlert(e,n){this.showNotification("⚖️ Workload Balance Alert",{body:`You have ${e} active tasks. ${n}`,tag:"workload-balance",..."serviceWorker"in navigator&&{actions:[{action:"auto-prioritize",title:"🤖 Auto-Prioritize"},{action:"delegate-tasks",title:"👥 Delegate Tasks"},{action:"schedule-break",title:"☕ Schedule Break"}]},data:{type:"workload-balance",currentTasks:e}})}handleTaskAssignment(e,n,r){if(console.log("=== ASSIGNMENT NOTIFICATION DEBUG ==="),console.log("Task assignedTo:",e.assignedTo),console.log("Current user ID:",r),console.log("Assigner name:",n),!e.assignedTo||!e.assignedTo.includes(r))return console.log("Current user not assigned to this task"),"none";console.log("Current user IS assigned to this task");const i=`${n}-${r}`;if(this.pendingAssignments.has(i)){const s=this.pendingAssignments.get(i);clearTimeout(s.timeout);const o=s.count+1;if(o>=3)return console.log("Showing bulk assignment notification for",o,"tasks"),this.showBulkAssignmentNotification(o,n),this.pendingAssignments.delete(i),"bulk";const a=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:o,timeout:a})}else{const s=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:1,timeout:s})}return console.log("Showing single assignment notification"),this.showTaskAssignmentNotification(e,n,r),"single"}showDailyMotivation(){const e=["Ready to crush your goals today? 💪","Every small step counts towards your success! 🌟","Focus on progress, not perfection! 🎯","You've got this! Let's make today productive! 🚀","Time to turn your dreams into achievements! ✨"],n=e[Math.floor(Math.random()*e.length)];this.showNotification("🌅 Good Morning!",{body:n,tag:"daily-motivation"})}scheduleRecurringReminders(e){this.clearAllScheduledNotifications(),e.forEach(n=>{n.dueDate&&n.status!=="completed"&&(this.scheduleTaskReminder(n,15),this.scheduleTaskReminder(n,60),this.scheduleTaskDueNotification(n))})}clearScheduledNotification(e){const n=this.scheduledNotifications.get(e);n&&(clearTimeout(n),this.scheduledNotifications.delete(e))}clearAllScheduledNotifications(){this.scheduledNotifications.forEach(e=>{clearTimeout(e)}),this.scheduledNotifications.clear()}getScheduledNotificationsCount(){return this.scheduledNotifications.size}isPermissionGranted(){return this.permission==="granted"}showDailySummary(e){const{tasksCompleted:n,focusTime:r,sessionsCompleted:i}=e;this.showNotification("📊 Daily Summary",{body:`Today: ${n} tasks completed, ${r}min focused, ${i} sessions`,tag:"daily-summary",requireInteraction:!1})}showWeeklyGoalReminder(){this.showNotification("🎯 Weekly Goals Check-in",{body:"How are you progressing with your weekly goals? Take a moment to review!",tag:"weekly-goals",..."serviceWorker"in navigator&&{actions:[{action:"review-goals",title:"📋 Review Goals"},{action:"update-goals",title:"✏️ Update Goals"}]}})}};Kt(Rl,"instance");let uk=Rl;const Ho=uk.getInstance();"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{const{action:e,data:n}=t.data;switch(e){case"notification-click":console.log("Notification clicked:",n);break;case"notification-action":console.log("Notification action:",n);break}});function dbe(){const t=g.useRef({}),e=g.useCallback(i=>{if(!t.current[i]){const s=new Audio(i);s.preload="auto",s.addEventListener("error",()=>{console.warn(`Sound file not found: ${i}. Skipping audio playback.`)}),t.current[i]=s}return t.current[i]},[]),n=g.useCallback(async i=>{try{const s=e(i);s.currentTime=0;const o=s.play();o!==void 0&&await o}catch{console.warn(`Could not play sound: ${i}. This is likely due to missing audio files or browser restrictions.`)}},[e]),r=g.useCallback(()=>{e("/sounds/iphone_ding.mp3"),e("/sounds/ting.mp3")},[e]);return{playSound:n,preloadSound:e,preloadCommonSounds:r}}const BK=g.createContext(void 0);function hbe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),{user:s}=Bn(),{toast:o}=Aa();g.useEffect(()=>{s?a():n([])},[s]);const a=()=>{if(!s)return;console.log("Setting up notifications real-time listener for user:",s.uid),i(!0);const y=ya(dr(Ae,"users",s.uid,"notifications"),Rh("timestamp","desc")),_=vo(y,v=>{console.log("Notifications snapshot received, size:",v.size);const T=[];v.forEach(C=>{T.push({id:C.id,...C.data()})}),n(T),i(!1)},v=>{console.error("Error in notifications listener:",v),o({title:"Connection error",description:"Lost connection to notifications. Retrying...",variant:"destructive"}),i(!1)});return()=>{console.log("Cleaning up notifications listener"),_()}},c=async(y,_)=>{const v=_||(s==null?void 0:s.uid);if(!v){console.warn("Cannot add notification: no target user specified and current user not authenticated");return}try{const T=dr(Ae,"users",v,"notifications"),C={...y,userId:v,timestamp:new Date().toISOString()};console.log("Adding notification for user:",v,C),await vf(T,C),console.log("Notification added successfully")}catch(T){console.error("Error adding notification:",T),o({title:"Failed to save notification",description:"Could not save the notification.",variant:"destructive"})}},l=async y=>{if(s)try{const _=Ge(Ae,"users",s.uid,"notifications",y);await hr(_,{read:!0}),console.log("Notification marked as read:",y)}catch(_){console.error("Error marking notification as read:",_)}},u=async()=>{if(s)try{const y=__(Ae);e.filter(v=>!v.read).forEach(v=>{const T=Ge(Ae,"users",s.uid,"notifications",v.id);y.update(T,{read:!0})}),await y.commit(),console.log("All notifications marked as read"),o({title:"All notifications marked as read",description:"Your notification list has been cleared."})}catch(y){console.error("Error marking all notifications as read:",y),o({title:"Failed to mark notifications as read",description:"Could not update notifications.",variant:"destructive"})}},d=async y=>{if(s)try{const _=Ge(Ae,"users",s.uid,"notifications",y);await Ao(_),console.log("Notification deleted:",y)}catch(_){console.error("Error deleting notification:",_),o({title:"Failed to delete notification",description:"Could not delete the notification.",variant:"destructive"})}},h=async()=>{if(s)try{const y=__(Ae);e.forEach(_=>{const v=Ge(Ae,"users",s.uid,"notifications",_.id);y.delete(v)}),await y.commit(),console.log("All notifications cleared"),o({title:"All notifications cleared",description:"Your notification history has been cleared."})}catch(y){console.error("Error clearing all notifications:",y),o({title:"Failed to clear notifications",description:"Could not clear notifications.",variant:"destructive"})}},m=e.filter(y=>!y.read).length,w={notifications:e,unreadCount:m,loading:r,addNotification:c,markAsRead:l,markAllAsRead:u,deleteNotification:d,clearAllNotifications:h};return p.jsx(BK.Provider,{value:w,children:t})}function DN(){const t=g.useContext(BK);if(t===void 0)throw new Error("useNotifications must be used within a NotificationsContextProvider");return t}const HK="taskly_viewed_timestamps";function zK(){try{const t=localStorage.getItem(HK);return t?JSON.parse(t):{}}catch(t){return console.error("Error reading viewed timestamps from localStorage:",t),{}}}function fbe(t){try{localStorage.setItem(HK,JSON.stringify(t))}catch(e){console.error("Error saving viewed timestamps to localStorage:",e)}}function UMe(t,e){if(!t||!e)return;const n=zK();n[t]=e,fbe(n)}function pbe(t){return zK()[t]||null}function mV(t){if(!t.lastCommentedAt)return!1;const e=pbe(t.id);return e?new Date(t.lastCommentedAt)>new Date(e):!0}var Qv={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*(((i*=1.525)+1)*t-i))+e:s/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,s;return s=Qv.easeOutBounce(r-t,0,i,r),i-s+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,s;return t<r/2?(s=Qv.easeInBounce(t*2,0,i,r),s*.5+e):(s=Qv.easeOutBounce(t*2-r,0,i,r),s*.5+i*.5+e)}},mbe=Qv;function gbe(t){return t*Math.PI/180}function _i(t,e){return t+Math.random()*(e-t)}function ybe(t,e){return Math.floor(t+Math.random()*(e-t+1))}var tm;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(tm||(tm={}));var Ga;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Ga||(Ga={}));const vbe=1e3/60;class wbe{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=_i(5,20),this.h=_i(5,20),this.radius=_i(5,10),this.vx=typeof o=="number"?_i(-o,o):_i(o.min,o.max),this.vy=typeof a=="number"?_i(-a,0):_i(a.min,a.max),this.shape=ybe(0,2),this.angle=gbe(_i(0,360)),this.angularSpin=_i(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=_i(0,1),this.rotationDirection=_i(0,1)?Ga.Positive:Ga.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/vbe;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===Ga.Positive?this.rotationDirection=Ga.Negative:this.rotateY<=-1&&this.rotationDirection===Ga.Negative&&(this.rotationDirection=Ga.Positive);const c=.1*this.rotationDirection*a;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case tm.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case tm.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case tm.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class _be{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=_i(this.x,this.w+this.x),s=_i(this.y,this.h+this.y);return new wbe(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:c}=this,{run:l,recycle:u,numberOfPieces:d,debug:h,tweenFunction:m,tweenDuration:w}=this.getOptions();if(!l)return!1;const y=this.particles.length,_=u?y:a;if(_<d){c!==d&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(w,Math.max(0,this.tweenProgress+i));const v=m(this.tweenProgress,this.tweenFrom,d,w),T=Math.round(v-_);for(let C=0;C<T;C++)this.particles.push(this.getParticle());this.particlesGenerated+=T}h&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${y}`,s.width-10,s.height-20));for(let v=this.particles.length-1;v>=0;v--){const T=this.particles[v];T.update(i),(T.y>s.height||T.y<-100||T.x>s.width+100||T.x<-100)&&(u&&_<=d?this.particles[v]=this.getParticle():this.removeParticleAt(v))}return y>0||_<d},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const LN={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:mbe.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Tbe{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...LN,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:c,context:l}=this,u=Math.min(i-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?u%a:0),s&&(l.fillStyle="white",l.clearRect(0,0,c.width,c.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new _be(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Cbe=Q.createRef();class FN extends Q.Component{constructor(e){super(e),this.canvas=Q.createRef(),this.canvas=e.canvasRef||Cbe}componentDidMount(){if(this.canvas.current){const e=ib(this.props)[0];this.confetti=new Tbe(this.canvas.current,e)}}componentDidUpdate(){const e=ib(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=ib(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return p.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}FN.defaultProps={...LN};FN.displayName="ReactConfetti";function ib(t){const e={},n={},r={},i=[...Object.keys(LN),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in t){const a=t[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,n]}const Ebe=Q.forwardRef((t,e)=>p.jsx(FN,{canvasRef:e,...t}));function Sbe(){const[t,e]=g.useState({width:void 0,height:void 0});return g.useEffect(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}const WK=g.createContext(void 0);function bbe({children:t}){const[e,n]=g.useState(!1),{width:r,height:i}=Sbe(),s=g.useCallback(()=>{n(!0)},[]),o=()=>{n(!1)};return p.jsxs(WK.Provider,{value:{showConfetti:s},children:[t,e&&r&&i&&p.jsx(Ebe,{width:r,height:i,recycle:!1,numberOfPieces:500,gravity:.25,wind:.03,tweenDuration:6e3,colors:["#3b82f6","#f97316","#22c55e","#facc15"],onConfettiComplete:o})]})}function Ibe(){const t=g.useContext(WK);if(t===void 0)throw new Error("useConfetti must be used within a ConfettiProvider");return t}function KK(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function nm(t){const e=KK(t);return e.setHours(0,0,0,0),e}function Abe(t,e){const n=nm(t),r=nm(e);return+n==+r}function kbe(t){const e=KK(t);return e.setHours(23,59,59,999),e}const qK=g.createContext(void 0);function xbe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState([]),[s,o]=g.useState(!0),[a,c]=g.useState(!1),{user:l,userProfile:u}=Bn(),{addNotification:d}=DN(),{toast:h}=Aa(),{playSound:m,preloadCommonSounds:w}=dbe(),{showConfetti:y}=Ibe(),_=z=>{const J=G=>{if(!G.dueDate)return 4;const q=nm(new Date(G.dueDate)),ne=nm(new Date);return q<ne?1:Abe(q,ne)?2:3};return z.sort((G,q)=>{const ne=J(G),Ce=J(q);if(ne!==Ce)return ne-Ce;if(ne===3&&G.dueDate&&q.dueDate){const Ze=new Date(G.dueDate).getTime(),yt=new Date(q.dueDate).getTime();if(Ze!==yt)return Ze-yt}const Ne=mV(G),Le=mV(q);if(Ne!==Le)return Ne?-1:1;const Me={high:3,medium:2,low:1};return Me[G.priority]!==Me[q.priority]?Me[q.priority]-Me[G.priority]:new Date(q.createdAt).getTime()-new Date(G.createdAt).getTime()})};g.useEffect(()=>{let z;return l&&u?(z=v(),w()):(n([]),i([]),o(!1)),()=>{z&&(console.log("Cleaning up all real-time listeners."),z())}},[l,u,w]);const v=g.useCallback(()=>{if(!l||!u)return;o(!0);const z=[],J=ya(dr(Ae,"users",l.uid,"tasks"),Rh("createdAt","desc")),G=vo(J,q=>{const ne=q.docs.map(Ce=>({id:Ce.id,...Ce.data()}));n(Ce=>{const Ne=Ce.filter(Me=>Me.teamId),Le=[...ne,...Ne];return _(Le)}),o(!1)},q=>{console.error("Error in personal tasks listener:",q),h({title:"Connection error",description:"Lost connection to personal tasks.",variant:"destructive"}),o(!1)});if(z.push(G),u.teamId){const q=ya(dr(Ae,"teams",u.teamId,"tasks"),Kd("assignedTo","array-contains",l.uid),Rh("createdAt","desc")),ne=vo(q,Le=>{const Me=Le.docs.map(Ze=>({id:Ze.id,...Ze.data()}));n(Ze=>{const Re=[...Ze.filter(Pe=>!Pe.teamId),...Me];return _(Re)})},Le=>{console.error("Error in team tasks listener:",Le),h({title:"Team connection error",description:"Lost connection to team tasks.",variant:"destructive"})});z.push(ne);const Ce=Ge(Ae,"teams",u.teamId),Ne=vo(Ce,async Le=>{if(Le.exists()){const Ze=Le.data().memberIds||[];if(Ze.length>0){const yt=Ze.map(ht=>fd(Ge(Ae,"users",ht))),Pe=(await Promise.all(yt)).filter(ht=>ht.exists()).map(ht=>ht.data());i(Pe)}else i([])}else i([])},Le=>{console.error("Error in team members listener:",Le),i([])});z.push(Ne)}else i([]);return()=>{z.forEach(q=>q())}},[l,u,h]),T=g.useCallback(async z=>{if(!l||!u)return;const J=`temp-${Date.now()}`,G=!!(u.teamId&&z.assignedTo&&z.assignedTo.length>0),q={...z,id:J,assignedTo:z.assignedTo||[],teamId:G?u.teamId:void 0,createdBy:l.uid,createdAt:new Date().toISOString(),status:"todo",priority:z.priority||"medium",subtasks:z.subtasks||[]};n(ne=>_([q,...ne])),h({title:"Task created",description:"Your task is being saved..."});try{const{id:ne,...Ce}=q;Ce.teamId||delete Ce.teamId;const Ne=G?`teams/${u.teamId}/tasks`:`users/${l.uid}/tasks`,Le=await vf(dr(Ae,Ne),Ce),Me={...q,id:Le.id};if(n(Ze=>_(Ze.map(yt=>yt.id===J?Me:yt))),Me.dueDate&&(Ho.scheduleTaskReminder(Me,15),Ho.scheduleTaskDueNotification(Me)),Me.assignedTo&&Me.assignedTo.length>0){const Ze=u.displayName||l.email||"Someone";for(const yt of Me.assignedTo)yt!==l.uid&&Ho.handleTaskAssignment(Me,Ze,yt)}}catch(ne){n(Ce=>_(Ce.filter(Ne=>Ne.id!==J))),console.error("Error adding task:",ne),h({title:"Failed to create task",variant:"destructive"})}},[l,u,h]),C=g.useCallback(async(z,J)=>{if(!l||!u){h({title:"Authentication required",variant:"destructive"});return}let G,q;if(n(ne=>{if(G=ne.find(Me=>Me.id===z),!G)return ne;const Ce=J.assignedTo||G.assignedTo||[],Le=!!(u.teamId&&Ce.length>0)?u.teamId:null;return q={...G,...J,teamId:Le||void 0},q.teamId||delete q.teamId,_(ne.map(Me=>Me.id===z?q:Me))}),!(!G||!q))try{const ne=G.assignedTo||[],Ne=(q.assignedTo||[]).filter(Ze=>!ne.includes(Ze));if(Ne.length>0){const Ze=u.displayName||l.email||"Someone";for(const yt of Ne)yt!==l.uid&&Ho.handleTaskAssignment(q,Ze,yt)}const Le=(G.teamId||null)!==(q.teamId||null),Me={...J};if("estimatedTime"in Me){const Ze=Number(Me.estimatedTime);isNaN(Ze)||Ze<=0?Me.estimatedTime=Xf():Me.estimatedTime=Ze}if(Me.dueDate===""&&(Me.dueDate=Xf()),"completedAt"in J&&J.completedAt===void 0&&J.status!=="completed"&&(Me.completedAt=Xf()),Me.teamId=q.teamId||Xf(),Le){const Ze=Ge(Ae,G.teamId?`teams/${G.teamId}/tasks`:`users/${l.uid}/tasks`,z);await Ao(Ze);const yt=Ge(Ae,q.teamId?`teams/${q.teamId}/tasks`:`users/${l.uid}/tasks`,z),{id:Re,...Pe}=q;Object.keys(Pe).forEach(ht=>{Pe[ht]===void 0&&delete Pe[ht]}),await w_(yt,Pe)}else{const Ze=Ge(Ae,G.teamId?`teams/${G.teamId}/tasks`:`users/${l.uid}/tasks`,z);await hr(Ze,Me)}h({title:"Task updated",description:"Your changes have been saved."})}catch(ne){n(Ce=>_(Ce.map(Ne=>Ne.id===z?G:Ne))),console.error("Error updating task:",ne),h({title:"Failed to update task",variant:"destructive"})}},[l,u,h]),I=g.useCallback(async z=>{if(!l)return;let J;if(n(G=>(J=G.find(q=>q.id===z),_(G.filter(q=>q.id!==z)))),!!J)try{const G=J.teamId?`teams/${J.teamId}/tasks/${z}`:`users/${l.uid}/tasks/${z}`;await Ao(Ge(Ae,G)),Ho.clearScheduledNotification(`task-reminder-${z}`),Ho.clearScheduledNotification(`task-due-${z}`),h({title:"Task deleted",variant:"destructive"})}catch(G){n(q=>_([...q,J])),console.error("Error deleting task:",G),h({title:"Failed to delete task",variant:"destructive"})}},[l,h]),x=g.useCallback(async(z,J)=>{if(!l)return;let G,q;if(n(ne=>{if(G=ne.find(Ne=>Ne.id===z),!G)return ne;const Ce=G.status==="completed"?"todo":"completed";return q={...G,status:Ce},Ce==="completed"?q.completedAt=new Date().toISOString():delete q.completedAt,_(ne.map(Ne=>Ne.id===z?q:Ne))}),!(!G||!q))try{q.status==="completed"&&((J==null?void 0:J.playSound)!==!1&&m(JI),y(),Ho.showTaskCompleteNotification(G.title),await d({title:"Task completed! 🎯",body:`Great job completing "${G.title}"!`,type:"task-complete",read:!1,data:{taskId:z,taskTitle:G.title}},l.uid));const ne=G.teamId?`teams/${G.teamId}/tasks/${z}`:`users/${l.uid}/tasks/${z}`,Ce={status:q.status,completedAt:q.status==="completed"?q.completedAt:Xf()};await hr(Ge(Ae,ne),Ce)}catch(ne){n(Ce=>_(Ce.map(Ne=>Ne.id===z?G:Ne))),console.error("Error toggling task status:",ne),h({title:"Failed to update task",variant:"destructive"})}},[l,m,y,d,h]),D=g.useCallback(async z=>{if(!l)return;let J;if(n(G=>{if(J=G.find(ne=>ne.id===z),!J)return G;const q=J.priority==="high"?"medium":"high";return _(G.map(ne=>ne.id===z?{...ne,priority:q}:ne))}),!!J)try{const G=J.teamId?`teams/${J.teamId}/tasks/${z}`:`users/${l.uid}/tasks/${z}`;await hr(Ge(Ae,G),{priority:J.priority==="high"?"medium":"high"})}catch(G){n(q=>_(q.map(ne=>ne.id===z?J:ne))),console.error("Error toggling task priority:",G),h({title:"Failed to update priority",variant:"destructive"})}},[l,h]),A=g.useCallback(async(z,J)=>{if(!l)return;let G;if(n(q=>{if(G=q.find(Ce=>Ce.id===z),!G)return q;const ne=(G.timeSpent||0)+J;return _(q.map(Ce=>Ce.id===z?{...Ce,timeSpent:ne}:Ce))}),!!G)try{const q=G.teamId?`teams/${G.teamId}/tasks/${z}`:`users/${l.uid}/tasks/${z}`;await hr(Ge(Ae,q),{timeSpent:(G.timeSpent||0)+J})}catch(q){throw n(ne=>_(ne.map(Ce=>Ce.id===z?G:Ce))),console.error("Error updating task time:",q),q}},[l]),S=g.useCallback(async(z,J)=>{var q;const G={id:`sub-${Date.now()}`,title:J,isCompleted:!1,createdAt:new Date().toISOString()};await C(z,{subtasks:[...((q=e.find(ne=>ne.id===z))==null?void 0:q.subtasks)||[],G]}),h({title:"Subtask added!"})},[C,e,h]),k=g.useCallback(async(z,J,G)=>{const q=e.find(Le=>Le.id===z);if(!q||!q.subtasks)return;let ne=0;if(G){const Le=q.subtasks.find(Me=>Me.id===J);Le&&!Le.isCompleted&&(ne=G.currentSeconds,await G.stopTracking())}const Ce=q.subtasks.map(Le=>{if(Le.id===J){const Me=!Le.isCompleted;return Me&&m(JI),{...Le,isCompleted:Me,completedAt:Me?new Date().toISOString():void 0,timeSpent:(Le.timeSpent||0)+ne}}return Le}),Ne=Ce.every(Le=>Le.isCompleted);Ne&&q.status!=="completed"?(await C(z,{subtasks:Ce}),await x(z),h({title:"Subtask updated!",description:"All subtasks completed! Parent task marked as complete."})):!Ne&&q.status==="completed"?(await C(z,{subtasks:Ce}),await x(z),h({title:"Subtask updated!",description:"Parent task status reverted to 'todo'."})):(await C(z,{subtasks:Ce}),h({title:"Subtask updated!"}))},[e,C,x,m,h]),N=g.useCallback(async(z,J)=>{const G=e.find(ne=>ne.id===z);if(!G||!G.subtasks)return;const q=G.subtasks.filter(ne=>ne.id!==J);await C(z,{subtasks:q}),h({title:"Subtask deleted!",variant:"destructive"})},[e,C,h]),R=g.useCallback(async(z,J,G)=>{const q=e.find(Ce=>Ce.id===z);if(!q||!q.subtasks)return;const ne=q.subtasks.map(Ce=>Ce.id===J?{...Ce,timeSpent:(Ce.timeSpent||0)+G}:Ce);await C(z,{subtasks:ne})},[e,C]),O=g.useCallback(async(z,J)=>{const G=e.find(Ce=>Ce.id===z);if(!G)return;const q=G.lastCommentedAt?new Date(G.lastCommentedAt).getTime():0;new Date(J).getTime()>q&&await C(z,{lastCommentedAt:J})},[e,C]),P=(z,J)=>e.filter(G=>{const q=new Date(G.createdAt);return q>=z&&q<=J}),$=z=>e.filter(J=>J.status===z),H=z=>e.filter(J=>J.priority===z),X=z=>{const J=nm(z),G=kbe(z);return e.filter(q=>{if(q.status!=="completed"||typeof q.completedAt!="string")return!1;const ne=new Date(q.completedAt);return ne>=J&&ne<=G})},ve={tasks:e,teamMembers:r,loading:s,isTaskFormActive:a,setTaskFormActive:c,addTask:T,updateTask:C,deleteTask:I,toggleTaskStatus:x,toggleTaskPriority:D,updateTaskTimeSpent:A,addSubtask:S,toggleSubtaskStatus:k,deleteSubtask:N,updateSubtaskTimeSpent:R,updateTaskLastCommentedAt:O,getTasksByDateRange:P,getTasksByStatus:$,getTasksByPriority:H,getTasksCompletedOnDate:X,getTotalTasksCount:()=>e.length,getCompletedTasksCount:()=>e.filter(z=>z.status==="completed").length,getActiveTasksCount:()=>e.filter(z=>z.status!=="completed").length,getCurrentStreak:()=>{if(e.length===0)return 0;let z=0,J=new Date;for(;X(J).length>0;)z++,J.setDate(J.getDate()-1);return z},getLongestStreak:()=>{if(e.length===0)return 0;const z=[...new Set(e.filter(q=>q.status==="completed"&&typeof q.completedAt=="string").map(q=>new Date(q.completedAt).setHours(0,0,0,0)))].sort((q,ne)=>q-ne);if(z.length===0)return 0;let J=0,G=1;for(let q=1;q<z.length;q++)z[q]-z[q-1]===864e5?G++:(J=Math.max(J,G),G=1);return Math.max(J,G)}};return p.jsx(qK.Provider,{value:ve,children:t})}function ry(){const t=g.useContext(qK);if(t===void 0)throw new Error("useTasks must be used within a TasksContextProvider");return t}const GK=g.createContext(void 0);function QK({children:t}){const{user:e}=Bn(),{teamMembers:n}=ry(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),l=async y=>{if(e)try{const _=kl(xl,`presence/${e.uid}`);await nk(_,{online:y,lastSeen:Date.now()})}catch(_){console.error("Error updating online status:",_)}};g.useEffect(()=>{if(!e)return;l(!0);const y=()=>{l(!1)};window.addEventListener("beforeunload",y);const _=()=>{l(!document.hidden)};return document.addEventListener("visibilitychange",_),()=>{l(!1),window.removeEventListener("beforeunload",y),document.removeEventListener("visibilitychange",_)}},[e]),g.useEffect(()=>{if(!n.length)return;const y=[];return n.forEach(_=>{const v=kl(xl,`presence/${_.uid}`);rk(v,T=>{const C=T.val();C&&i(I=>({...I,[_.uid]:{online:C.online||!1,lastSeen:C.lastSeen||Date.now()}}))}),y.push(()=>MW(v))}),()=>{y.forEach(_=>_())}},[n]);const u=Object.values(s).reduce((y,_)=>y+_,0),d=async(y,_)=>{if(e)try{const v=kl(xl,`messageStatus/${y}/${_}/${e.uid}`);await nk(v,{read:!0,readAt:Date.now()})}catch(v){console.error("Error marking message as read:",v)}},h=async(y,_)=>{if(!(!e||_.length===0))try{const v={},T={read:!0,readAt:Date.now()};_.forEach(C=>{v[`messageStatus/${y}/${C}/${e.uid}`]=T}),await B_e(kl(xl),v)}catch(v){console.error("Error marking messages as read:",v)}},w={onlineStatus:r,unreadCounts:s,messageStatus:a,totalUnreadCount:u,markMessageAsRead:d,markChatAsRead:async y=>{if(e)try{o(v=>({...v,[y]:0}));const _=kl(xl,`chats/${y}/messages`);rk(_,async v=>{const T=v.val();if(T){const C=Object.keys(T);await h(y,C)}},{onlyOnce:!0})}catch(_){console.error("Error marking chat as read:",_)}},markMessagesAsReadBatch:h,updateOnlineStatus:l};return p.jsx(GK.Provider,{value:w,children:t})}function Rbe(){const t=g.useContext(GK);if(t===void 0)throw new Error("useTeamChat must be used within a TeamChatProvider");return t}const Pbe=[{title:"Dashboard",url:"/",icon:YI},{title:"Tasks",url:"/tasks",icon:vu},{title:"Team Chat",url:"/team-chat",icon:YH},{title:"Meetly",url:"/meetly",icon:WH},{title:"Sales",icon:Ase,adminOnly:!0,subItems:[{title:"Call Tracker",url:"/sales-tracker",icon:hR},{title:"Opportunities",url:"/sales-opportunity",icon:Soe},{title:"Sales Tools",url:"/sales-tools",icon:Toe}]},{title:"Focus Timer",url:"/timer",icon:QH},{title:"AI Assistant",url:"/chat",icon:Bse},{title:"Calendar",url:"/calendar",icon:UH},{title:"Notes",url:"/notes",icon:Pse},{title:"Analytics",url:"/analytics",icon:YI}],YK=({onLinkClick:t,collapsed:e})=>{const{totalUnreadCount:n}=Rbe(),i=xo().pathname,{userProfile:s}=Bn(),o=Pbe.filter(u=>!u.adminOnly||(s==null?void 0:s.role)==="admin"),a=u=>!!(u==="/"&&i==="/"||u!=="/"&&i.startsWith(u)),c=u=>a(u)?"bg-primary/10 text-primary font-semibold":"hover:bg-accent/50 text-muted-foreground hover:text-foreground",l=u=>u.some(h=>a(h.url))?"bg-primary/10 text-primary font-semibold":"hover:bg-accent/50 text-muted-foreground hover:text-foreground";return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("div",{className:"flex items-center justify-center p-4 border-b border-border/50",children:e?p.jsx("div",{className:"gradient-primary h-9 w-9 rounded-lg flex items-center justify-center shadow-md",children:p.jsx(vu,{className:"h-5 w-5 text-white"})}):p.jsxs("div",{className:"flex items-center gap-3 w-full px-2",children:[p.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 h-10 w-10 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:p.jsx(vu,{className:"h-5 w-5 text-white"})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:"text-lg font-bold text-foreground tracking-tight truncate",children:"Taskly"})})]})}),p.jsx(PK,{className:"px-3 flex-1 py-4",children:p.jsxs(NK,{children:[p.jsx(OK,{className:e?"sr-only":"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Navigation"}),p.jsx(MK,{children:p.jsx(DK,{children:o.map(u=>u.subItems?p.jsxs(abe,{defaultOpen:u.subItems.some(d=>a(d.url)),children:[p.jsx(cbe,{asChild:!0,children:p.jsxs(Gv,{className:fe("w-full rounded-lg transition-all duration-200 group h-10",l(u.subItems)),children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx(u.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate flex-1 text-left",children:u.title})]}),!e&&p.jsx($H,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-90"})]})}),p.jsx(lbe,{children:p.jsx("div",{className:fe("space-y-1 mt-1",e&&"hidden"),children:u.subItems.map(d=>p.jsx(ck,{children:p.jsx(JM,{to:d.url,className:"block",onClick:t,children:p.jsxs(Gv,{className:fe("w-full rounded-lg transition-all duration-200 pl-11 h-9",c(d.url)),children:[p.jsx(d.icon,{className:"h-4 w-4 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate ml-3 flex-1 text-left",children:d.title})]})})},d.title))})})]},u.title):p.jsx(ck,{children:p.jsx(JM,{to:u.url,className:"block",onClick:t,children:p.jsxs(Gv,{className:fe("w-full rounded-lg transition-all duration-200 group relative h-10",c(u.url)),children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx(u.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate flex-1 text-left",children:u.title})]}),u.url==="/team-chat"&&n>0&&!e&&p.jsx(Xi,{variant:"destructive",className:"h-5 min-w-[20px] flex items-center justify-center px-1.5 text-xs font-semibold flex-shrink-0",children:n>99?"99+":n})]})})},u.title))})})]})})]})};function Nbe({className:t}){const{state:e,setState:n}=JC(),r=xo(),i=Sf(),s=g.useRef(null),o=g.useRef(null),a=e==="collapsed",c=()=>{i||(s.current&&(clearTimeout(s.current),s.current=null),o.current=setTimeout(()=>{n("expanded")},5e3))},l=()=>{i||(o.current&&(clearTimeout(o.current),o.current=null),s.current=setTimeout(()=>{n("collapsed")},2e3))};return g.useEffect(()=>{if(r.pathname==="/sales-tracker"){const u=setTimeout(()=>{i||n("collapsed")},1e3);return()=>clearTimeout(u)}},[r.pathname,n,i]),i?null:p.jsx(RK,{className:fe("border-r border-border bg-background transition-all duration-300 ease-in-out h-full",a?"w-16":"w-64",t),onMouseEnter:c,onMouseLeave:l,children:p.jsx(YK,{collapsed:a})})}const Obe=Ng("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-elegant transition-smooth",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",focus:"gradient-primary text-focus-foreground hover:shadow-glow transition-smooth",break:"gradient-secondary text-break-foreground hover:shadow-elegant transition-smooth",success:"bg-success text-success-foreground hover:bg-success/90 transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),et=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?fH:"button";return p.jsx(o,{className:fe(Obe({variant:e,size:n,className:t})),ref:s,...i})});et.displayName="Button";const bs=g.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));bs.displayName="Input";var XK={exports:{}},JK={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=g;function Mbe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dbe=typeof Object.is=="function"?Object.is:Mbe,Lbe=Vh.useState,Fbe=Vh.useEffect,Vbe=Vh.useLayoutEffect,jbe=Vh.useDebugValue;function Ube(t,e){var n=e(),r=Lbe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Vbe(function(){i.value=n,i.getSnapshot=e,sb(i)&&s({inst:i})},[t,n,e]),Fbe(function(){return sb(i)&&s({inst:i}),t(function(){sb(i)&&s({inst:i})})},[t]),jbe(n),n}function sb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dbe(t,n)}catch{return!0}}function $be(t,e){return e()}var Bbe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$be:Ube;JK.useSyncExternalStore=Vh.useSyncExternalStore!==void 0?Vh.useSyncExternalStore:Bbe;XK.exports=JK;var Hbe=XK.exports;function zbe(){return Hbe.useSyncExternalStore(Wbe,()=>!0,()=>!1)}function Wbe(){return()=>{}}var VN="Avatar",[Kbe]=qr(VN),[qbe,ZK]=Kbe(VN),eq=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=g.useState("idle");return p.jsx(qbe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:p.jsx(Fe.span,{...r,ref:e})})});eq.displayName=VN;var tq="AvatarImage",nq=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=ZK(tq,n),a=Gbe(r,s),c=wn(l=>{i(l),o.onImageLoadingStatusChange(l)});return pi(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?p.jsx(Fe.img,{...s,ref:e,src:r}):null});nq.displayName=tq;var rq="AvatarFallback",iq=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=ZK(rq,n),[o,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?p.jsx(Fe.span,{...i,ref:e}):null});iq.displayName=rq;function gV(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Gbe(t,{referrerPolicy:e,crossOrigin:n}){const r=zbe(),i=g.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=g.useState(()=>gV(s,t));return pi(()=>{a(gV(s,t))},[s,t]),pi(()=>{const c=d=>()=>{a(d)};if(!s)return;const l=c("loaded"),u=c("error");return s.addEventListener("load",l),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",l),s.removeEventListener("error",u)}},[s,n,e]),o}var sq=eq,oq=nq,aq=iq;const cq=g.forwardRef(({className:t,...e},n)=>p.jsx(sq,{ref:n,className:fe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));cq.displayName=sq.displayName;const lq=g.forwardRef(({className:t,...e},n)=>p.jsx(oq,{ref:n,className:fe("aspect-square h-full w-full",t),...e}));lq.displayName=oq.displayName;const uq=g.forwardRef(({className:t,...e},n)=>p.jsx(aq,{ref:n,className:fe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));uq.displayName=aq.displayName;var Qbe=g.createContext(void 0);function eE(t){const e=g.useContext(Qbe);return t||e||"ltr"}var ob=0;function jN(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??yV()),document.body.insertAdjacentElement("beforeend",t[1]??yV()),ob++,()=>{ob===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ob--}},[])}function yV(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ab="focusScope.autoFocusOnMount",cb="focusScope.autoFocusOnUnmount",vV={bubbles:!1,cancelable:!0},Ybe="FocusScope",tE=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=g.useState(null),l=wn(i),u=wn(s),d=g.useRef(null),h=Ct(e,y=>c(y)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(C){if(m.paused||!a)return;const I=C.target;a.contains(I)?d.current=I:za(d.current,{select:!0})},_=function(C){if(m.paused||!a)return;const I=C.relatedTarget;I!==null&&(a.contains(I)||za(d.current,{select:!0}))},v=function(C){if(document.activeElement===document.body)for(const x of C)x.removedNodes.length>0&&za(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const T=new MutationObserver(v);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),T.disconnect()}}},[r,a,m.paused]),g.useEffect(()=>{if(a){_V.add(m);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(ab,vV);a.addEventListener(ab,l),a.dispatchEvent(v),v.defaultPrevented||(Xbe(nIe(dq(a)),{select:!0}),document.activeElement===y&&za(a))}return()=>{a.removeEventListener(ab,l),setTimeout(()=>{const v=new CustomEvent(cb,vV);a.addEventListener(cb,u),a.dispatchEvent(v),v.defaultPrevented||za(y??document.body,{select:!0}),a.removeEventListener(cb,u),_V.remove(m)},0)}}},[a,l,u,m]);const w=g.useCallback(y=>{if(!n&&!r||m.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(_&&v){const T=y.currentTarget,[C,I]=Jbe(T);C&&I?!y.shiftKey&&v===I?(y.preventDefault(),n&&za(C,{select:!0})):y.shiftKey&&v===C&&(y.preventDefault(),n&&za(I,{select:!0})):v===T&&y.preventDefault()}},[n,r,m.paused]);return p.jsx(Fe.div,{tabIndex:-1,...o,ref:h,onKeyDown:w})});tE.displayName=Ybe;function Xbe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(za(r,{select:e}),document.activeElement!==n)return}function Jbe(t){const e=dq(t),n=wV(e,t),r=wV(e.reverse(),t);return[n,r]}function dq(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wV(t,e){for(const n of t)if(!Zbe(n,{upTo:e}))return n}function Zbe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function eIe(t){return t instanceof HTMLInputElement&&"select"in t}function za(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&eIe(t)&&e&&t.select()}}var _V=tIe();function tIe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=TV(t,e),t.unshift(e)},remove(e){var n;t=TV(t,e),(n=t[0])==null||n.resume()}}}function TV(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function nIe(t){return t.filter(e=>e.tagName!=="A")}var lb="rovingFocusGroup.onEntryFocus",rIe={bubbles:!1,cancelable:!0},iy="RovingFocusGroup",[dk,hq,iIe]=oR(iy),[sIe,nE]=qr(iy,[iIe]),[oIe,aIe]=sIe(iy),fq=g.forwardRef((t,e)=>p.jsx(dk.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(dk.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(cIe,{...t,ref:e})})}));fq.displayName=iy;var cIe=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=t,h=g.useRef(null),m=Ct(e,h),w=eE(s),[y,_]=ka({prop:o,defaultProp:a??null,onChange:c,caller:iy}),[v,T]=g.useState(!1),C=wn(l),I=hq(n),x=g.useRef(!1),[D,A]=g.useState(0);return g.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(lb,C),()=>S.removeEventListener(lb,C)},[C]),p.jsx(oIe,{scope:n,orientation:r,dir:w,loop:i,currentTabStopId:y,onItemFocus:g.useCallback(S=>_(S),[_]),onItemShiftTab:g.useCallback(()=>T(!0),[]),onFocusableItemAdd:g.useCallback(()=>A(S=>S+1),[]),onFocusableItemRemove:g.useCallback(()=>A(S=>S-1),[]),children:p.jsx(Fe.div,{tabIndex:v||D===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:we(t.onMouseDown,()=>{x.current=!0}),onFocus:we(t.onFocus,S=>{const k=!x.current;if(S.target===S.currentTarget&&k&&!v){const N=new CustomEvent(lb,rIe);if(S.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=I().filter(X=>X.focusable),O=R.find(X=>X.active),P=R.find(X=>X.id===y),H=[O,P,...R].filter(Boolean).map(X=>X.ref.current);gq(H,u)}}x.current=!1}),onBlur:we(t.onBlur,()=>T(!1))})})}),pq="RovingFocusGroupItem",mq=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=ho(),l=s||c,u=aIe(pq,n),d=u.currentTabStopId===l,h=hq(n),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:y}=u;return g.useEffect(()=>{if(r)return m(),()=>w()},[r,m,w]),p.jsx(dk.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:p.jsx(Fe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:we(t.onMouseDown,_=>{r?u.onItemFocus(l):_.preventDefault()}),onFocus:we(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:we(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){u.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const v=dIe(_,u.orientation,u.dir);if(v!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let C=h().filter(I=>I.focusable).map(I=>I.ref.current);if(v==="last")C.reverse();else if(v==="prev"||v==="next"){v==="prev"&&C.reverse();const I=C.indexOf(_.currentTarget);C=u.loop?hIe(C,I+1):C.slice(I+1)}setTimeout(()=>gq(C))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:y!=null}):o})})});mq.displayName=pq;var lIe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uIe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function dIe(t,e,n){const r=uIe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return lIe[r]}function gq(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function hIe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yq=fq,vq=mq,fIe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},td=new WeakMap,uv=new WeakMap,dv={},ub=0,wq=function(t){return t&&(t.host||wq(t.parentNode))},pIe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=wq(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},mIe=function(t,e,n,r){var i=pIe(e,Array.isArray(t)?t:[t]);dv[n]||(dv[n]=new WeakMap);var s=dv[n],o=[],a=new Set,c=new Set(i),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var m=h.getAttribute(r),w=m!==null&&m!=="false",y=(td.get(h)||0)+1,_=(s.get(h)||0)+1;td.set(h,y),s.set(h,_),o.push(h),y===1&&w&&uv.set(h,!0),_===1&&h.setAttribute(n,"true"),w||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),ub++,function(){o.forEach(function(d){var h=td.get(d)-1,m=s.get(d)-1;td.set(d,h),s.set(d,m),h||(uv.has(d)||d.removeAttribute(r),uv.delete(d)),m||d.removeAttribute(n)}),ub--,ub||(td=new WeakMap,td=new WeakMap,uv=new WeakMap,dv={})}},UN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=fIe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),mIe(r,i,n,"aria-hidden")):function(){return null}},no=function(){return no=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},no.apply(this,arguments)};function _q(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gIe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Yv="right-scroll-bar-position",Xv="width-before-scroll-bar",yIe="with-scroll-bars-hidden",vIe="--removed-body-scroll-bar-size";function db(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function wIe(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var _Ie=typeof window<"u"?g.useLayoutEffect:g.useEffect,CV=new WeakMap;function TIe(t,e){var n=wIe(null,function(r){return t.forEach(function(i){return db(i,r)})});return _Ie(function(){var r=CV.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||db(a,null)}),s.forEach(function(a){i.has(a)||db(a,o)})}CV.set(n,t)},[t]),n}function CIe(t){return t}function EIe(t,e){e===void 0&&(e=CIe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function SIe(t){t===void 0&&(t={});var e=EIe(null);return e.options=no({async:!0,ssr:!1},t),e}var Tq=function(t){var e=t.sideCar,n=_q(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,no({},n))};Tq.isSideCarExport=!0;function bIe(t,e){return t.useMedium(e),Tq}var Cq=SIe(),hb=function(){},rE=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:hb,onWheelCapture:hb,onTouchMoveCapture:hb}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noRelative,w=t.noIsolation,y=t.inert,_=t.allowPinchZoom,v=t.as,T=v===void 0?"div":v,C=t.gapMode,I=_q(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=h,D=TIe([n,e]),A=no(no({},I),i);return g.createElement(g.Fragment,null,u&&g.createElement(x,{sideCar:Cq,removeScrollBar:l,shards:d,noRelative:m,noIsolation:w,inert:y,setCallbacks:s,allowPinchZoom:!!_,lockRef:n,gapMode:C}),o?g.cloneElement(g.Children.only(a),no(no({},A),{ref:D})):g.createElement(T,no({},A,{className:c,ref:D}),a))});rE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rE.classNames={fullWidth:Xv,zeroRight:Yv};var IIe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AIe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=IIe();return e&&t.setAttribute("nonce",e),t}function kIe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function xIe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var RIe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=AIe())&&(kIe(e,n),xIe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},PIe=function(){var t=RIe();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Eq=function(){var t=PIe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},NIe={left:0,top:0,right:0,gap:0},fb=function(t){return parseInt(t||"",10)||0},OIe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[fb(n),fb(r),fb(i)]},MIe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return NIe;var e=OIe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},DIe=Eq(),eh="data-scroll-locked",LIe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(yIe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(eh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Yv," .").concat(Yv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xv," .").concat(Xv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(eh,`] {
    `).concat(vIe,": ").concat(a,`px;
  }
`)},EV=function(){var t=parseInt(document.body.getAttribute(eh)||"0",10);return isFinite(t)?t:0},FIe=function(){g.useEffect(function(){return document.body.setAttribute(eh,(EV()+1).toString()),function(){var t=EV()-1;t<=0?document.body.removeAttribute(eh):document.body.setAttribute(eh,t.toString())}},[])},VIe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;FIe();var s=g.useMemo(function(){return MIe(i)},[i]);return g.createElement(DIe,{styles:LIe(s,!e,i,n?"":"!important")})},hk=!1;if(typeof window<"u")try{var hv=Object.defineProperty({},"passive",{get:function(){return hk=!0,!0}});window.addEventListener("test",hv,hv),window.removeEventListener("test",hv,hv)}catch{hk=!1}var nd=hk?{passive:!1}:!1,jIe=function(t){return t.tagName==="TEXTAREA"},Sq=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!jIe(t)&&n[e]==="visible")},UIe=function(t){return Sq(t,"overflowY")},$Ie=function(t){return Sq(t,"overflowX")},SV=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=bq(t,r);if(i){var s=Iq(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},BIe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},HIe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bq=function(t,e){return t==="v"?UIe(e):$Ie(e)},Iq=function(t,e){return t==="v"?BIe(e):HIe(e)},zIe=function(t,e){return t==="h"&&e==="rtl"?-1:1},WIe=function(t,e,n,r,i){var s=zIe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),l=!1,u=o>0,d=0,h=0;do{if(!a)break;var m=Iq(t,a),w=m[0],y=m[1],_=m[2],v=y-_-s*w;(w||v)&&bq(t,a)&&(d+=v,h+=w);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(l=!0),l},fv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bV=function(t){return[t.deltaX,t.deltaY]},IV=function(t){return t&&"current"in t?t.current:t},KIe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qIe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GIe=0,rd=[];function QIe(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(GIe++)[0],s=g.useState(Eq)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=gIe([t.lockRef.current],(t.shards||[]).map(IV),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var v=fv(y),T=n.current,C="deltaX"in y?y.deltaX:T[0]-v[0],I="deltaY"in y?y.deltaY:T[1]-v[1],x,D=y.target,A=Math.abs(C)>Math.abs(I)?"h":"v";if("touches"in y&&A==="h"&&D.type==="range")return!1;var S=SV(A,D);if(!S)return!0;if(S?x=A:(x=A==="v"?"h":"v",S=SV(A,D)),!S)return!1;if(!r.current&&"changedTouches"in y&&(C||I)&&(r.current=x),!x)return!0;var k=r.current||x;return WIe(k,_,y,k==="h"?C:I)},[]),c=g.useCallback(function(y){var _=y;if(!(!rd.length||rd[rd.length-1]!==s)){var v="deltaY"in _?bV(_):fv(_),T=e.current.filter(function(x){return x.name===_.type&&(x.target===_.target||_.target===x.shadowParent)&&KIe(x.delta,v)})[0];if(T&&T.should){_.cancelable&&_.preventDefault();return}if(!T){var C=(o.current.shards||[]).map(IV).filter(Boolean).filter(function(x){return x.contains(_.target)}),I=C.length>0?a(_,C[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),l=g.useCallback(function(y,_,v,T){var C={name:y,delta:_,target:v,should:T,shadowParent:YIe(v)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(I){return I!==C})},1)},[]),u=g.useCallback(function(y){n.current=fv(y),r.current=void 0},[]),d=g.useCallback(function(y){l(y.type,bV(y),y.target,a(y,t.lockRef.current))},[]),h=g.useCallback(function(y){l(y.type,fv(y),y.target,a(y,t.lockRef.current))},[]);g.useEffect(function(){return rd.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,nd),document.addEventListener("touchmove",c,nd),document.addEventListener("touchstart",u,nd),function(){rd=rd.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,nd),document.removeEventListener("touchmove",c,nd),document.removeEventListener("touchstart",u,nd)}},[]);var m=t.removeScrollBar,w=t.inert;return g.createElement(g.Fragment,null,w?g.createElement(s,{styles:qIe(i)}):null,m?g.createElement(VIe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function YIe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const XIe=bIe(Cq,QIe);var iE=g.forwardRef(function(t,e){return g.createElement(rE,no({},t,{ref:e,sideCar:XIe}))});iE.classNames=rE.classNames;var fk=["Enter"," "],JIe=["ArrowDown","PageUp","Home"],Aq=["ArrowUp","PageDown","End"],ZIe=[...JIe,...Aq],eAe={ltr:[...fk,"ArrowRight"],rtl:[...fk,"ArrowLeft"]},tAe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sy="Menu",[ag,nAe,rAe]=oR(sy),[Ku,kq]=qr(sy,[rAe,uf,nE]),sE=uf(),xq=nE(),[iAe,qu]=Ku(sy),[sAe,oy]=Ku(sy),Rq=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=sE(e),[c,l]=g.useState(null),u=g.useRef(!1),d=wn(s),h=eE(i);return g.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),p.jsx(bR,{...a,children:p.jsx(iAe,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:l,children:p.jsx(sAe,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};Rq.displayName=sy;var oAe="MenuAnchor",$N=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=sE(n);return p.jsx(nC,{...i,...r,ref:e})});$N.displayName=oAe;var BN="MenuPortal",[aAe,Pq]=Ku(BN,{forceMount:void 0}),Nq=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=qu(BN,e);return p.jsx(aAe,{scope:e,forceMount:n,children:p.jsx($n,{present:n||s.open,children:p.jsx(Rg,{asChild:!0,container:i,children:r})})})};Nq.displayName=BN;var Ji="MenuContent",[cAe,HN]=Ku(Ji),Oq=g.forwardRef((t,e)=>{const n=Pq(Ji,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=qu(Ji,t.__scopeMenu),o=oy(Ji,t.__scopeMenu);return p.jsx(ag.Provider,{scope:t.__scopeMenu,children:p.jsx($n,{present:r||s.open,children:p.jsx(ag.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(lAe,{...i,ref:e}):p.jsx(uAe,{...i,ref:e})})})})}),lAe=g.forwardRef((t,e)=>{const n=qu(Ji,t.__scopeMenu),r=g.useRef(null),i=Ct(e,r);return g.useEffect(()=>{const s=r.current;if(s)return UN(s)},[]),p.jsx(zN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:we(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),uAe=g.forwardRef((t,e)=>{const n=qu(Ji,t.__scopeMenu);return p.jsx(zN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),dAe=yu("MenuContent.ScrollLock"),zN=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:w,...y}=t,_=qu(Ji,n),v=oy(Ji,n),T=sE(n),C=xq(n),I=nAe(n),[x,D]=g.useState(null),A=g.useRef(null),S=Ct(e,A,_.onContentChange),k=g.useRef(0),N=g.useRef(""),R=g.useRef(0),O=g.useRef(null),P=g.useRef("right"),$=g.useRef(0),H=w?iE:g.Fragment,X=w?{as:dAe,allowPinchZoom:!0}:void 0,se=j=>{var ne,Ce;const ie=N.current+j,Te=I().filter(Ne=>!Ne.disabled),ve=document.activeElement,z=(ne=Te.find(Ne=>Ne.ref.current===ve))==null?void 0:ne.textValue,J=Te.map(Ne=>Ne.textValue),G=EAe(J,ie,z),q=(Ce=Te.find(Ne=>Ne.textValue===G))==null?void 0:Ce.ref.current;(function Ne(Le){N.current=Le,window.clearTimeout(k.current),Le!==""&&(k.current=window.setTimeout(()=>Ne(""),1e3))})(ie),q&&setTimeout(()=>q.focus())};g.useEffect(()=>()=>window.clearTimeout(k.current),[]),jN();const V=g.useCallback(j=>{var Te,ve;return P.current===((Te=O.current)==null?void 0:Te.side)&&bAe(j,(ve=O.current)==null?void 0:ve.area)},[]);return p.jsx(cAe,{scope:n,searchRef:N,onItemEnter:g.useCallback(j=>{V(j)&&j.preventDefault()},[V]),onItemLeave:g.useCallback(j=>{var ie;V(j)||((ie=A.current)==null||ie.focus(),D(null))},[V]),onTriggerLeave:g.useCallback(j=>{V(j)&&j.preventDefault()},[V]),pointerGraceTimerRef:R,onPointerGraceIntentChange:g.useCallback(j=>{O.current=j},[]),children:p.jsx(H,{...X,children:p.jsx(tE,{asChild:!0,trapped:i,onMountAutoFocus:we(s,j=>{var ie;j.preventDefault(),(ie=A.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(sf,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:p.jsx(yq,{asChild:!0,...C,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:x,onCurrentTabStopIdChange:D,onEntryFocus:we(c,j=>{v.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(IR,{role:"menu","aria-orientation":"vertical","data-state":Qq(_.open),"data-radix-menu-content":"",dir:v.dir,...T,...y,ref:S,style:{outline:"none",...y.style},onKeyDown:we(y.onKeyDown,j=>{const Te=j.target.closest("[data-radix-menu-content]")===j.currentTarget,ve=j.ctrlKey||j.altKey||j.metaKey,z=j.key.length===1;Te&&(j.key==="Tab"&&j.preventDefault(),!ve&&z&&se(j.key));const J=A.current;if(j.target!==J||!ZIe.includes(j.key))return;j.preventDefault();const q=I().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);Aq.includes(j.key)&&q.reverse(),TAe(q)}),onBlur:we(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(k.current),N.current="")}),onPointerMove:we(t.onPointerMove,cg(j=>{const ie=j.target,Te=$.current!==j.clientX;if(j.currentTarget.contains(ie)&&Te){const ve=j.clientX>$.current?"right":"left";P.current=ve,$.current=j.clientX}}))})})})})})})});Oq.displayName=Ji;var hAe="MenuGroup",WN=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Fe.div,{role:"group",...r,ref:e})});WN.displayName=hAe;var fAe="MenuLabel",Mq=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Fe.div,{...r,ref:e})});Mq.displayName=fAe;var H_="MenuItem",AV="menu.itemSelect",oE=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=oy(H_,t.__scopeMenu),a=HN(H_,t.__scopeMenu),c=Ct(e,s),l=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(AV,{bubbles:!0,cancelable:!0});d.addEventListener(AV,m=>r==null?void 0:r(m),{once:!0}),aR(d,h),h.defaultPrevented?l.current=!1:o.onClose()}};return p.jsx(Dq,{...i,ref:c,disabled:n,onClick:we(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),l.current=!0},onPointerUp:we(t.onPointerUp,d=>{var h;l.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:we(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||fk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});oE.displayName=H_;var Dq=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=HN(H_,n),a=xq(n),c=g.useRef(null),l=Ct(e,c),[u,d]=g.useState(!1),[h,m]=g.useState("");return g.useEffect(()=>{const w=c.current;w&&m((w.textContent??"").trim())},[s.children]),p.jsx(ag.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:p.jsx(vq,{asChild:!0,...a,focusable:!r,children:p.jsx(Fe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:l,onPointerMove:we(t.onPointerMove,cg(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:we(t.onPointerLeave,cg(w=>o.onItemLeave(w))),onFocus:we(t.onFocus,()=>d(!0)),onBlur:we(t.onBlur,()=>d(!1))})})})}),pAe="MenuCheckboxItem",Lq=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx($q,{scope:t.__scopeMenu,checked:n,children:p.jsx(oE,{role:"menuitemcheckbox","aria-checked":z_(n)?"mixed":n,...i,ref:e,"data-state":qN(n),onSelect:we(i.onSelect,()=>r==null?void 0:r(z_(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Lq.displayName=pAe;var Fq="MenuRadioGroup",[mAe,gAe]=Ku(Fq,{value:void 0,onValueChange:()=>{}}),Vq=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=wn(r);return p.jsx(mAe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(WN,{...i,ref:e})})});Vq.displayName=Fq;var jq="MenuRadioItem",Uq=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=gAe(jq,t.__scopeMenu),s=n===i.value;return p.jsx($q,{scope:t.__scopeMenu,checked:s,children:p.jsx(oE,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":qN(s),onSelect:we(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});Uq.displayName=jq;var KN="MenuItemIndicator",[$q,yAe]=Ku(KN,{checked:!1}),Bq=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=yAe(KN,n);return p.jsx($n,{present:r||z_(s.checked)||s.checked===!0,children:p.jsx(Fe.span,{...i,ref:e,"data-state":qN(s.checked)})})});Bq.displayName=KN;var vAe="MenuSeparator",Hq=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Hq.displayName=vAe;var wAe="MenuArrow",zq=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=sE(n);return p.jsx(AR,{...i,...r,ref:e})});zq.displayName=wAe;var _Ae="MenuSub",[$Me,Wq]=Ku(_Ae),_p="MenuSubTrigger",Kq=g.forwardRef((t,e)=>{const n=qu(_p,t.__scopeMenu),r=oy(_p,t.__scopeMenu),i=Wq(_p,t.__scopeMenu),s=HN(_p,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,l={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),p.jsx($N,{asChild:!0,...l,children:p.jsx(Dq,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Qq(n.open),...t,ref:QT(e,i.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:we(t.onPointerMove,cg(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:we(t.onPointerLeave,cg(d=>{var m,w;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const y=(w=n.content)==null?void 0:w.dataset.side,_=y==="right",v=_?-5:5,T=h[_?"left":"right"],C=h[_?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:T,y:h.top},{x:C,y:h.top},{x:C,y:h.bottom},{x:T,y:h.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:we(t.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||eAe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});Kq.displayName=_p;var qq="MenuSubContent",Gq=g.forwardRef((t,e)=>{const n=Pq(Ji,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=qu(Ji,t.__scopeMenu),o=oy(Ji,t.__scopeMenu),a=Wq(qq,t.__scopeMenu),c=g.useRef(null),l=Ct(e,c);return p.jsx(ag.Provider,{scope:t.__scopeMenu,children:p.jsx($n,{present:r||s.open,children:p.jsx(ag.Slot,{scope:t.__scopeMenu,children:p.jsx(zN,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:we(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:we(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:we(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=tAe[o.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});Gq.displayName=qq;function Qq(t){return t?"open":"closed"}function z_(t){return t==="indeterminate"}function qN(t){return z_(t)?"indeterminate":t?"checked":"unchecked"}function TAe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function CAe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function EAe(t,e,n){const i=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=CAe(t,Math.max(s,0));i.length===1&&(o=o.filter(l=>l!==n));const c=o.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function SAe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,h=c.y;u>r!=h>r&&n<(d-l)*(r-u)/(h-u)+l&&(i=!i)}return i}function bAe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return SAe(n,e)}function cg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var IAe=Rq,AAe=$N,kAe=Nq,xAe=Oq,RAe=WN,PAe=Mq,NAe=oE,OAe=Lq,MAe=Vq,DAe=Uq,LAe=Bq,FAe=Hq,VAe=zq,jAe=Kq,UAe=Gq,aE="DropdownMenu",[$Ae]=qr(aE,[kq]),Qr=kq(),[BAe,Yq]=$Ae(aE),Xq=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Qr(e),l=g.useRef(null),[u,d]=ka({prop:i,defaultProp:s??!1,onChange:o,caller:aE});return p.jsx(BAe,{scope:e,triggerId:ho(),triggerRef:l,contentId:ho(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(h=>!h),[d]),modal:a,children:p.jsx(IAe,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};Xq.displayName=aE;var Jq="DropdownMenuTrigger",Zq=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=Yq(Jq,n),o=Qr(n);return p.jsx(AAe,{asChild:!0,...o,children:p.jsx(Fe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:QT(e,s.triggerRef),onPointerDown:we(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:we(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Zq.displayName=Jq;var HAe="DropdownMenuPortal",eG=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Qr(e);return p.jsx(kAe,{...r,...n})};eG.displayName=HAe;var tG="DropdownMenuContent",nG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yq(tG,n),s=Qr(n),o=g.useRef(!1);return p.jsx(xAe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:we(t.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:we(t.onInteractOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nG.displayName=tG;var zAe="DropdownMenuGroup",WAe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(RAe,{...i,...r,ref:e})});WAe.displayName=zAe;var KAe="DropdownMenuLabel",rG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(PAe,{...i,...r,ref:e})});rG.displayName=KAe;var qAe="DropdownMenuItem",iG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(NAe,{...i,...r,ref:e})});iG.displayName=qAe;var GAe="DropdownMenuCheckboxItem",sG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(OAe,{...i,...r,ref:e})});sG.displayName=GAe;var QAe="DropdownMenuRadioGroup",YAe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(MAe,{...i,...r,ref:e})});YAe.displayName=QAe;var XAe="DropdownMenuRadioItem",oG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(DAe,{...i,...r,ref:e})});oG.displayName=XAe;var JAe="DropdownMenuItemIndicator",aG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(LAe,{...i,...r,ref:e})});aG.displayName=JAe;var ZAe="DropdownMenuSeparator",cG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(FAe,{...i,...r,ref:e})});cG.displayName=ZAe;var eke="DropdownMenuArrow",tke=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(VAe,{...i,...r,ref:e})});tke.displayName=eke;var nke="DropdownMenuSubTrigger",lG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(jAe,{...i,...r,ref:e})});lG.displayName=nke;var rke="DropdownMenuSubContent",uG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return p.jsx(UAe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uG.displayName=rke;var ike=Xq,ske=Zq,oke=eG,dG=nG,hG=rG,fG=iG,pG=sG,mG=oG,gG=aG,yG=cG,vG=lG,wG=uG;const ake=ike,cke=ske,lke=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(vG,{ref:i,className:fe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,p.jsx($H,{className:"ml-auto h-4 w-4"})]}));lke.displayName=vG.displayName;const uke=g.forwardRef(({className:t,...e},n)=>p.jsx(wG,{ref:n,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));uke.displayName=wG.displayName;const _G=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(oke,{children:p.jsx(dG,{ref:r,sideOffset:e,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));_G.displayName=dG.displayName;const Jv=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(fG,{ref:r,className:fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Jv.displayName=fG.displayName;const dke=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(pG,{ref:i,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(gG,{children:p.jsx(dR,{className:"h-4 w-4"})})}),e]}));dke.displayName=pG.displayName;const hke=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(mG,{ref:r,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(gG,{children:p.jsx(_se,{className:"h-2 w-2 fill-current"})})}),e]}));hke.displayName=mG.displayName;const fke=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(hG,{ref:r,className:fe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));fke.displayName=hG.displayName;const pk=g.forwardRef(({className:t,...e},n)=>p.jsx(yG,{ref:n,className:fe("-mx-1 my-1 h-px bg-muted",t),...e}));pk.displayName=yG.displayName;var cE="Popover",[TG]=qr(cE,[uf]),ay=uf(),[pke,fl]=TG(cE),CG=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=ay(e),c=g.useRef(null),[l,u]=g.useState(!1),[d,h]=ka({prop:r,defaultProp:i??!1,onChange:s,caller:cE});return p.jsx(bR,{...a,children:p.jsx(pke,{scope:e,contentId:ho(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:n})})};CG.displayName=cE;var EG="PopoverAnchor",mke=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=fl(EG,n),s=ay(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return g.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(nC,{...s,...r,ref:e})});mke.displayName=EG;var SG="PopoverTrigger",bG=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=fl(SG,n),s=ay(n),o=Ct(e,i.triggerRef),a=p.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":RG(i.open),...r,ref:o,onClick:we(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(nC,{asChild:!0,...s,children:a})});bG.displayName=SG;var GN="PopoverPortal",[gke,yke]=TG(GN,{forceMount:void 0}),IG=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=fl(GN,e);return p.jsx(gke,{scope:e,forceMount:n,children:p.jsx($n,{present:n||s.open,children:p.jsx(Rg,{asChild:!0,container:i,children:r})})})};IG.displayName=GN;var jh="PopoverContent",AG=g.forwardRef((t,e)=>{const n=yke(jh,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=fl(jh,t.__scopePopover);return p.jsx($n,{present:r||s.open,children:s.modal?p.jsx(wke,{...i,ref:e}):p.jsx(_ke,{...i,ref:e})})});AG.displayName=jh;var vke=yu("PopoverContent.RemoveScroll"),wke=g.forwardRef((t,e)=>{const n=fl(jh,t.__scopePopover),r=g.useRef(null),i=Ct(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return UN(o)},[]),p.jsx(iE,{as:vke,allowPinchZoom:!0,children:p.jsx(kG,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,l=a.button===2||c;s.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:we(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),_ke=g.forwardRef((t,e)=>{const n=fl(jh,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(kG,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),kG=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=t,h=fl(jh,n),m=ay(n);return jN(),p.jsx(tE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(sf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(IR,{"data-state":RG(h.open),role:"dialog",id:h.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xG="PopoverClose",Tke=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=fl(xG,n);return p.jsx(Fe.button,{type:"button",...r,ref:e,onClick:we(t.onClick,()=>i.onOpenChange(!1))})});Tke.displayName=xG;var Cke="PopoverArrow",Eke=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=ay(n);return p.jsx(AR,{...i,...r,ref:e})});Eke.displayName=Cke;function RG(t){return t?"open":"closed"}var Ske=CG,bke=bG,Ike=IG,PG=AG;const NG=Ske,OG=bke,QN=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(Ike,{children:p.jsx(PG,{ref:i,align:e,sideOffset:n,className:fe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));QN.displayName=PG.displayName;function Ake(t,[e,n]){return Math.min(n,Math.max(e,t))}function kke(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var YN="ScrollArea",[MG]=qr(YN),[xke,ss]=MG(YN),DG=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,c]=g.useState(null),[l,u]=g.useState(null),[d,h]=g.useState(null),[m,w]=g.useState(null),[y,_]=g.useState(null),[v,T]=g.useState(0),[C,I]=g.useState(0),[x,D]=g.useState(!1),[A,S]=g.useState(!1),k=Ct(e,R=>c(R)),N=eE(i);return p.jsx(xke,{scope:n,type:r,dir:N,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:u,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:w,scrollbarXEnabled:x,onScrollbarXEnabledChange:D,scrollbarY:y,onScrollbarYChange:_,scrollbarYEnabled:A,onScrollbarYEnabledChange:S,onCornerWidthChange:T,onCornerHeightChange:I,children:p.jsx(Fe.div,{dir:N,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});DG.displayName=YN;var LG="ScrollAreaViewport",FG=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=ss(LG,n),a=g.useRef(null),c=Ct(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(Fe.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});FG.displayName=LG;var No="ScrollAreaScrollbar",XN=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ss(No,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return g.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?p.jsx(Rke,{...r,ref:e,forceMount:n}):i.type==="scroll"?p.jsx(Pke,{...r,ref:e,forceMount:n}):i.type==="auto"?p.jsx(VG,{...r,ref:e,forceMount:n}):i.type==="always"?p.jsx(JN,{...r,ref:e}):null});XN.displayName=No;var Rke=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ss(No,t.__scopeScrollArea),[s,o]=g.useState(!1);return g.useEffect(()=>{const a=i.scrollArea;let c=0;if(a){const l=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx($n,{present:n||s,children:p.jsx(VG,{"data-state":s?"visible":"hidden",...r,ref:e})})}),Pke=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ss(No,t.__scopeScrollArea),s=t.orientation==="horizontal",o=uE(()=>c("SCROLL_END"),100),[a,c]=kke("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,c]),g.useEffect(()=>{const l=i.viewport,u=s?"scrollLeft":"scrollTop";if(l){let d=l[u];const h=()=>{const m=l[u];d!==m&&(c("SCROLL"),o()),d=m};return l.addEventListener("scroll",h),()=>l.removeEventListener("scroll",h)}},[i.viewport,s,c,o]),p.jsx($n,{present:n||a!=="hidden",children:p.jsx(JN,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:we(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:we(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),VG=g.forwardRef((t,e)=>{const n=ss(No,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=g.useState(!1),a=t.orientation==="horizontal",c=uE(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:u)}},10);return Uh(n.viewport,c),Uh(n.content,c),p.jsx($n,{present:r||s,children:p.jsx(JN,{"data-state":s?"visible":"hidden",...i,ref:e})})}),JN=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ss(No,t.__scopeScrollArea),s=g.useRef(null),o=g.useRef(0),[a,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=HG(a.viewport,a.content),u={...r,sizes:a,onSizesChange:c,hasThumb:l>0&&l<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,m){return Fke(h,o.current,a,m)}return n==="horizontal"?p.jsx(Nke,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,m=kV(h,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}}):n==="vertical"?p.jsx(Oke,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,m=kV(h,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}}):null}),Nke=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ss(No,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=Ct(e,c,s.onScrollbarXChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(UG,{"data-orientation":"horizontal",...i,ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":lE(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),WG(h,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:K_(o.paddingLeft),paddingEnd:K_(o.paddingRight)}})}})}),Oke=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ss(No,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=Ct(e,c,s.onScrollbarYChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(UG,{"data-orientation":"vertical",...i,ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":lE(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),WG(h,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:K_(o.paddingTop),paddingEnd:K_(o.paddingBottom)}})}})}),[Mke,jG]=MG(No),UG=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:l,onWheelScroll:u,onResize:d,...h}=t,m=ss(No,n),[w,y]=g.useState(null),_=Ct(e,k=>y(k)),v=g.useRef(null),T=g.useRef(""),C=m.viewport,I=r.content-r.viewport,x=wn(u),D=wn(c),A=uE(d,10);function S(k){if(v.current){const N=k.clientX-v.current.left,R=k.clientY-v.current.top;l({x:N,y:R})}}return g.useEffect(()=>{const k=N=>{const R=N.target;(w==null?void 0:w.contains(R))&&x(N,I)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,w,I,x]),g.useEffect(D,[r,D]),Uh(w,A),Uh(m.content,A),p.jsx(Mke,{scope:n,scrollbar:w,hasThumb:i,onThumbChange:wn(s),onThumbPointerUp:wn(o),onThumbPositionChange:D,onThumbPointerDown:wn(a),children:p.jsx(Fe.div,{...h,ref:_,style:{position:"absolute",...h.style},onPointerDown:we(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),v.current=w.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),S(k))}),onPointerMove:we(t.onPointerMove,S),onPointerUp:we(t.onPointerUp,k=>{const N=k.target;N.hasPointerCapture(k.pointerId)&&N.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=T.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),W_="ScrollAreaThumb",$G=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=jG(W_,t.__scopeScrollArea);return p.jsx($n,{present:n||i.hasThumb,children:p.jsx(Dke,{ref:e,...r})})}),Dke=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=ss(W_,n),o=jG(W_,n),{onThumbPositionChange:a}=o,c=Ct(e,d=>o.onThumbChange(d)),l=g.useRef(void 0),u=uE(()=>{l.current&&(l.current(),l.current=void 0)},100);return g.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!l.current){const m=Vke(d,a);l.current=m,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,a]),p.jsx(Fe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:we(t.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),w=d.clientX-m.left,y=d.clientY-m.top;o.onThumbPointerDown({x:w,y})}),onPointerUp:we(t.onPointerUp,o.onThumbPointerUp)})});$G.displayName=W_;var ZN="ScrollAreaCorner",BG=g.forwardRef((t,e)=>{const n=ss(ZN,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Lke,{...t,ref:e}):null});BG.displayName=ZN;var Lke=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ss(ZN,n),[s,o]=g.useState(0),[a,c]=g.useState(0),l=!!(s&&a);return Uh(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Uh(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),l?p.jsx(Fe.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function K_(t){return t?parseInt(t,10):0}function HG(t,e){const n=t/e;return isNaN(n)?0:n}function lE(t){const e=HG(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Fke(t,e,n,r="ltr"){const i=lE(n),s=i/2,o=e||s,a=i-o,c=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return zG([c,l],d)(t)}function kV(t,e,n="ltr"){const r=lE(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,c=n==="ltr"?[0,o]:[o*-1,0],l=Ake(t,c);return zG([0,o],[0,a])(l)}function zG(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function WG(t,e){return t>0&&t<e}var Vke=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function uE(t,e){const n=wn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Uh(t,e){const n=wn(e);pi(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var KG=DG,jke=FG,Uke=BG;const qG=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(KG,{ref:r,className:fe("relative overflow-hidden",t),...n,children:[p.jsx(jke,{className:"h-full w-full rounded-[inherit] touch-pan-y scrollbar-hide",children:e}),p.jsx(GG,{}),p.jsx(Uke,{})]}));qG.displayName=KG.displayName;const GG=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(XN,{ref:r,orientation:e,className:fe("flex touch-none select-none transition-colors hidden md:flex",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:p.jsx($G,{className:"relative flex-1 rounded-full bg-border"})}));GG.displayName=XN.displayName;function $ke(){const{notifications:t,unreadCount:e,markAsRead:n,markAllAsRead:r,deleteNotification:i,clearAllNotifications:s}=DN(),[o,a]=g.useState(!1),c=m=>{const w=new Date(m),_=Math.floor((new Date().getTime()-w.getTime())/(1e3*60));return _<1?"Just now":_<60?`${_}m ago`:_<1440?`${Math.floor(_/60)}h ago`:w.toLocaleDateString()},l=m=>{switch(m){case"task-assignment":return"📋";case"task-complete":return"✅";case"pomodoro-complete":return"🍅";case"team-request":return"👥";default:return"🔔"}},u=async m=>{m.read||await n(m.id)},d=async()=>{await r()},h=async()=>{await s(),a(!1)};return p.jsxs(NG,{open:o,onOpenChange:a,children:[p.jsx(OG,{asChild:!0,children:p.jsxs(et,{variant:"ghost",size:"icon",className:fe("relative hover-scale transition-smooth h-9 w-9",e>0&&"text-primary"),children:[p.jsx(KD,{className:"h-4 w-4"}),e>0&&p.jsx(Xi,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs font-bold animate-pulse",children:e>99?"99+":e})]})}),p.jsxs(QN,{className:"w-80 p-0 shadow-elegant",align:"end",children:[p.jsxs("div",{className:"p-4 border-b",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"font-semibold",children:"Notifications"}),p.jsxs("div",{className:"flex items-center gap-2",children:[e>0&&p.jsxs(et,{variant:"ghost",size:"sm",onClick:d,className:"text-xs hover-scale",children:[p.jsx(fse,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.length>0&&p.jsx(et,{variant:"ghost",size:"sm",onClick:h,className:"text-xs hover-scale text-destructive hover:bg-destructive/10",children:p.jsx(hoe,{className:"h-3 w-3"})})]})]}),e>0&&p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e," unread notification",e!==1?"s":""]})]}),p.jsx(qG,{className:"h-[400px]",children:t.length===0?p.jsxs("div",{className:"text-center py-8 px-4",children:[p.jsx(KD,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll see updates about tasks and activities here"})]}):p.jsx("div",{className:"divide-y",children:t.map(m=>p.jsx("div",{className:fe("p-4 hover:bg-muted/30 transition-smooth cursor-pointer group",!m.read&&"bg-primary/5 border-l-2 border-l-primary"),onClick:()=>u(m),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"text-lg shrink-0 mt-0.5",children:l(m.type)}),p.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h4",{className:fe("text-sm font-medium leading-tight",!m.read&&"font-semibold"),children:m.title}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!m.read&&p.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"}),p.jsx(et,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:w=>{w.stopPropagation(),i(m.id)},children:p.jsx(of,{className:"h-3 w-3"})})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed line-clamp-2",children:m.body}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:c(m.timestamp)}),!m.read&&p.jsxs(et,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),n(m.id)},className:"text-xs hover-scale opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(dR,{className:"h-3 w-3 mr-1"}),"Mark read"]})]})]})]})},m.id))})})]})]})}function Bke(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var dE="Checkbox",[Hke]=qr(dE),[zke,e1]=Hke(dE);function Wke(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:c,required:l,value:u="on",internal_do_not_use_render:d}=t,[h,m]=ka({prop:n,defaultProp:i??!1,onChange:c,caller:dE}),[w,y]=g.useState(null),[_,v]=g.useState(null),T=g.useRef(!1),C=w?!!o||!!w.closest("form"):!0,I={checked:h,disabled:s,setChecked:m,control:w,setControl:y,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:T,required:l,defaultChecked:Dc(i)?!1:i,isFormControl:C,bubbleInput:_,setBubbleInput:v};return p.jsx(zke,{scope:e,...I,children:Kke(d)?d(I):r})}var QG="CheckboxTrigger",YG=g.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:s,value:o,disabled:a,checked:c,required:l,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:w}=e1(QG,t),y=Ct(i,u),_=g.useRef(c);return g.useEffect(()=>{const v=s==null?void 0:s.form;if(v){const T=()=>d(_.current);return v.addEventListener("reset",T),()=>v.removeEventListener("reset",T)}},[s,d]),p.jsx(Fe.button,{type:"button",role:"checkbox","aria-checked":Dc(c)?"mixed":c,"aria-required":l,"data-state":t8(c),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:y,onKeyDown:we(e,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:we(n,v=>{d(T=>Dc(T)?!0:!T),w&&m&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});YG.displayName=QG;var t1=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c,onCheckedChange:l,form:u,...d}=t;return p.jsx(Wke,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:l,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>p.jsxs(p.Fragment,{children:[p.jsx(YG,{...d,ref:e,__scopeCheckbox:n}),h&&p.jsx(e8,{__scopeCheckbox:n})]})})});t1.displayName=dE;var XG="CheckboxIndicator",JG=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=e1(XG,n);return p.jsx($n,{present:r||Dc(s.checked)||s.checked===!0,children:p.jsx(Fe.span,{"data-state":t8(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});JG.displayName=XG;var ZG="CheckboxBubbleInput",e8=g.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:c,name:l,value:u,form:d,bubbleInput:h,setBubbleInput:m}=e1(ZG,t),w=Ct(n,m),y=Bke(s),_=w5(r);g.useEffect(()=>{const T=h;if(!T)return;const C=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(C,"checked").set,D=!i.current;if(y!==s&&x){const A=new Event("click",{bubbles:D});T.indeterminate=Dc(s),x.call(T,Dc(s)?!1:s),T.dispatchEvent(A)}},[h,y,s,i]);const v=g.useRef(Dc(s)?!1:s);return p.jsx(Fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:a,disabled:c,name:l,value:u,form:d,...e,tabIndex:-1,ref:w,style:{...e.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});e8.displayName=ZG;function Kke(t){return typeof t=="function"}function Dc(t){return t==="indeterminate"}function t8(t){return Dc(t)?"indeterminate":t?"checked":"unchecked"}const n8=g.forwardRef(({className:t,...e},n)=>p.jsx(t1,{ref:n,className:fe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:p.jsx(JG,{className:fe("flex items-center justify-center text-current"),children:p.jsx(dR,{className:"h-4 w-4"})})}));n8.displayName=t1.displayName;const n1=g.createContext({});function r1(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const i1=typeof window<"u",r8=i1?g.useLayoutEffect:g.useEffect,hE=g.createContext(null);function s1(t,e){t.indexOf(e)===-1&&t.push(e)}function o1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ta=(t,e,n)=>n>e?e:n<t?t:n;let a1=()=>{};const Ca={},i8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function s8(t){return typeof t=="object"&&t!==null}const o8=t=>/^0[^.\s]+$/u.test(t);function c1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zi=t=>t,qke=(t,e)=>n=>e(t(n)),cy=(...t)=>t.reduce(qke),lg=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class l1{constructor(){this.subscriptions=[]}add(e){return s1(this.subscriptions,e),()=>o1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _o=t=>t*1e3,Qi=t=>t/1e3;function a8(t,e){return e?t*(1e3/e):0}const c8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Gke=1e-7,Qke=12;function Yke(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=c8(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Gke&&++a<Qke);return o}function ly(t,e,n,r){if(t===e&&n===r)return Zi;const i=s=>Yke(s,0,1,t,n);return s=>s===0||s===1?s:c8(i(s),e,r)}const l8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,u8=t=>e=>1-t(1-e),d8=ly(.33,1.53,.69,.99),u1=u8(d8),h8=l8(u1),f8=t=>(t*=2)<1?.5*u1(t):.5*(2-Math.pow(2,-10*(t-1))),d1=t=>1-Math.sin(Math.acos(t)),p8=u8(d1),m8=l8(d1),Xke=ly(.42,0,1,1),Jke=ly(0,0,.58,1),g8=ly(.42,0,.58,1),Zke=t=>Array.isArray(t)&&typeof t[0]!="number",y8=t=>Array.isArray(t)&&typeof t[0]=="number",e0e={linear:Zi,easeIn:Xke,easeInOut:g8,easeOut:Jke,circIn:d1,circInOut:m8,circOut:p8,backIn:u1,backInOut:h8,backOut:d8,anticipate:f8},t0e=t=>typeof t=="string",xV=t=>{if(y8(t)){a1(t.length===4);const[e,n,r,i]=t;return ly(e,n,r,i)}else if(t0e(t))return e0e[t];return t},pv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function n0e(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,d=!1,h=!1)=>{const w=h&&i?n:r;return d&&o.add(u),w.has(u)||w.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,l.process(u))}};return l}const r0e=40;function v8(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=pv.reduce((C,I)=>(C[I]=n0e(s),C),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:h,render:m,postRender:w}=o,y=()=>{const C=Ca.useManualTiming?i.timestamp:performance.now();n=!1,Ca.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,r0e),1)),i.timestamp=C,i.isProcessing=!0,a.process(i),c.process(i),l.process(i),u.process(i),d.process(i),h.process(i),m.process(i),w.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(y))},_=()=>{n=!0,r=!0,i.isProcessing||t(y)};return{schedule:pv.reduce((C,I)=>{const x=o[I];return C[I]=(D,A=!1,S=!1)=>(n||_(),x.schedule(D,A,S)),C},{}),cancel:C=>{for(let I=0;I<pv.length;I++)o[pv[I]].cancel(C)},state:i,steps:o}}const{schedule:Qt,cancel:Xc,state:sr,steps:pb}=v8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zi,!0);let Zv;function i0e(){Zv=void 0}const ai={now:()=>(Zv===void 0&&ai.set(sr.isProcessing||Ca.useManualTiming?sr.timestamp:performance.now()),Zv),set:t=>{Zv=t,queueMicrotask(i0e)}},w8=t=>e=>typeof e=="string"&&e.startsWith(t),h1=w8("--"),s0e=w8("var(--"),f1=t=>s0e(t)?o0e.test(t.split("/*")[0].trim()):!1,o0e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ug={...bf,transform:t=>Ta(0,1,t)},mv={...bf,default:1},rm=t=>Math.round(t*1e5)/1e5,p1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function a0e(t){return t==null}const c0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,m1=(t,e)=>n=>!!(typeof n=="string"&&c0e.test(n)&&n.startsWith(t)||e&&!a0e(n)&&Object.prototype.hasOwnProperty.call(n,e)),_8=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(p1);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},l0e=t=>Ta(0,255,t),mb={...bf,transform:t=>Math.round(l0e(t))},zl={test:m1("rgb","red"),parse:_8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+mb.transform(t)+", "+mb.transform(e)+", "+mb.transform(n)+", "+rm(ug.transform(r))+")"};function u0e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mk={test:m1("#"),parse:u0e,transform:zl.transform},uy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Wa=uy("deg"),To=uy("%"),Be=uy("px"),d0e=uy("vh"),h0e=uy("vw"),RV={...To,parse:t=>To.parse(t)/100,transform:t=>To.transform(t*100)},xd={test:m1("hsl","hue"),parse:_8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+To.transform(rm(e))+", "+To.transform(rm(n))+", "+rm(ug.transform(r))+")"},En={test:t=>zl.test(t)||mk.test(t)||xd.test(t),parse:t=>zl.test(t)?zl.parse(t):xd.test(t)?xd.parse(t):mk.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?zl.transform(t):xd.transform(t),getAnimatableNone:t=>{const e=En.parse(t);return e.alpha=0,En.transform(e)}},f0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function p0e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(p1))==null?void 0:e.length)||0)+(((n=t.match(f0e))==null?void 0:n.length)||0)>0}const T8="number",C8="color",m0e="var",g0e="var(",PV="${}",y0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function dg(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(y0e,c=>(En.test(c)?(r.color.push(s),i.push(C8),n.push(En.parse(c))):c.startsWith(g0e)?(r.var.push(s),i.push(m0e),n.push(c)):(r.number.push(s),i.push(T8),n.push(parseFloat(c))),++s,PV)).split(PV);return{values:n,split:a,indexes:r,types:i}}function E8(t){return dg(t).values}function S8(t){const{split:e,types:n}=dg(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===T8?s+=rm(i[o]):a===C8?s+=En.transform(i[o]):s+=i[o]}return s}}const v0e=t=>typeof t=="number"?0:En.test(t)?En.getAnimatableNone(t):t;function w0e(t){const e=E8(t);return S8(t)(e.map(v0e))}const Jc={test:p0e,parse:E8,createTransformer:S8,getAnimatableNone:w0e};function gb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _0e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=gb(c,a,t+1/3),s=gb(c,a,t),o=gb(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function q_(t,e){return n=>n>0?e:t}const Xt=(t,e,n)=>t+(e-t)*n,yb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},T0e=[mk,zl,xd],C0e=t=>T0e.find(e=>e.test(t));function NV(t){const e=C0e(t);if(!e)return!1;let n=e.parse(t);return e===xd&&(n=_0e(n)),n}const OV=(t,e)=>{const n=NV(t),r=NV(e);if(!n||!r)return q_(t,e);const i={...n};return s=>(i.red=yb(n.red,r.red,s),i.green=yb(n.green,r.green,s),i.blue=yb(n.blue,r.blue,s),i.alpha=Xt(n.alpha,r.alpha,s),zl.transform(i))},gk=new Set(["none","hidden"]);function E0e(t,e){return gk.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function S0e(t,e){return n=>Xt(t,e,n)}function g1(t){return typeof t=="number"?S0e:typeof t=="string"?f1(t)?q_:En.test(t)?OV:A0e:Array.isArray(t)?b8:typeof t=="object"?En.test(t)?OV:b0e:q_}function b8(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>g1(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function b0e(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=g1(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function I0e(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const A0e=(t,e)=>{const n=Jc.createTransformer(e),r=dg(t),i=dg(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?gk.has(t)&&!i.values.length||gk.has(e)&&!r.values.length?E0e(t,e):cy(b8(I0e(r,i),i.values),n):q_(t,e)};function I8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xt(t,e,n):g1(t)(t,e)}const k0e=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Qt.update(e,n),stop:()=>Xc(e),now:()=>sr.isProcessing?sr.timestamp:ai.now()}},A8=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},G_=2e4;function y1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<G_;)e+=n,r=t.next(e);return e>=G_?1/0:e}function x0e(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(y1(r),G_);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Qi(i)}}const R0e=5;function k8(t,e,n){const r=Math.max(e-R0e,0);return a8(n-t(r),e-r)}const cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vb=.001;function P0e({duration:t=cn.duration,bounce:e=cn.bounce,velocity:n=cn.velocity,mass:r=cn.mass}){let i,s,o=1-e;o=Ta(cn.minDamping,cn.maxDamping,o),t=Ta(cn.minDuration,cn.maxDuration,Qi(t)),o<1?(i=l=>{const u=l*o,d=u*t,h=u-n,m=yk(l,o),w=Math.exp(-d);return vb-h/m*w},s=l=>{const d=l*o*t,h=d*n+n,m=Math.pow(o,2)*Math.pow(l,2)*t,w=Math.exp(-d),y=yk(Math.pow(l,2),o);return(-i(l)+vb>0?-1:1)*((h-m)*w)/y}):(i=l=>{const u=Math.exp(-l*t),d=(l-n)*t+1;return-vb+u*d},s=l=>{const u=Math.exp(-l*t),d=(n-l)*(t*t);return u*d});const a=5/t,c=O0e(i,s,a);if(t=_o(t),isNaN(c))return{stiffness:cn.stiffness,damping:cn.damping,duration:t};{const l=Math.pow(c,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:t}}}const N0e=12;function O0e(t,e,n){let r=n;for(let i=1;i<N0e;i++)r=r-t(r)/e(r);return r}function yk(t,e){return t*Math.sqrt(1-e*e)}const M0e=["duration","bounce"],D0e=["stiffness","damping","mass"];function MV(t,e){return e.some(n=>t[n]!==void 0)}function L0e(t){let e={velocity:cn.velocity,stiffness:cn.stiffness,damping:cn.damping,mass:cn.mass,isResolvedFromDuration:!1,...t};if(!MV(t,D0e)&&MV(t,M0e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ta(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:cn.mass,stiffness:i,damping:s}}else{const n=P0e(t);e={...e,...n,mass:cn.mass},e.isResolvedFromDuration=!0}return e}function Q_(t=cn.visualDuration,e=cn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=L0e({...n,velocity:-Qi(n.velocity||0)}),w=h||0,y=l/(2*Math.sqrt(c*u)),_=o-s,v=Qi(Math.sqrt(c/u)),T=Math.abs(_)<5;r||(r=T?cn.restSpeed.granular:cn.restSpeed.default),i||(i=T?cn.restDelta.granular:cn.restDelta.default);let C;if(y<1){const x=yk(v,y);C=D=>{const A=Math.exp(-y*v*D);return o-A*((w+y*v*_)/x*Math.sin(x*D)+_*Math.cos(x*D))}}else if(y===1)C=x=>o-Math.exp(-v*x)*(_+(w+v*_)*x);else{const x=v*Math.sqrt(y*y-1);C=D=>{const A=Math.exp(-y*v*D),S=Math.min(x*D,300);return o-A*((w+y*v*_)*Math.sinh(S)+x*_*Math.cosh(S))/x}}const I={calculatedDuration:m&&d||null,next:x=>{const D=C(x);if(m)a.done=x>=d;else{let A=x===0?w:0;y<1&&(A=x===0?_o(w):k8(C,x,D));const S=Math.abs(A)<=r,k=Math.abs(o-D)<=i;a.done=S&&k}return a.value=a.done?o:D,a},toString:()=>{const x=Math.min(y1(I),G_),D=A8(A=>I.next(x*A).value,x,30);return x+"ms "+D},toTransition:()=>{}};return I}Q_.applyToOptions=t=>{const e=x0e(t,100,Q_);return t.ease=e.ease,t.duration=_o(e.duration),t.type="keyframes",t};function vk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},m=S=>a!==void 0&&S<a||c!==void 0&&S>c,w=S=>a===void 0?c:c===void 0||Math.abs(a-S)<Math.abs(c-S)?a:c;let y=n*e;const _=d+y,v=o===void 0?_:o(_);v!==_&&(y=v-d);const T=S=>-y*Math.exp(-S/r),C=S=>v+T(S),I=S=>{const k=T(S),N=C(S);h.done=Math.abs(k)<=l,h.value=h.done?v:N};let x,D;const A=S=>{m(h.value)&&(x=S,D=Q_({keyframes:[h.value,w(h.value)],velocity:k8(C,S,h.value),damping:i,stiffness:s,restDelta:l,restSpeed:u}))};return A(0),{calculatedDuration:null,next:S=>{let k=!1;return!D&&x===void 0&&(k=!0,I(S),A(S)),x!==void 0&&S>=x?D.next(S-x):(!k&&I(S),h)}}}function F0e(t,e,n){const r=[],i=n||Ca.mix||I8,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Zi:e;a=cy(c,a)}r.push(a)}return r}function V0e(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(a1(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=F0e(e,r,i),c=a.length,l=u=>{if(o&&u<t[0])return e[0];let d=0;if(c>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=lg(t[d],t[d+1],u);return a[d](h)};return n?u=>l(Ta(t[0],t[s-1],u)):l}function j0e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=lg(0,e,r);t.push(Xt(n,1,i))}}function U0e(t){const e=[0];return j0e(e,t.length-1),e}function $0e(t,e){return t.map(n=>n*e)}function B0e(t,e){return t.map(()=>e||g8).splice(0,t.length-1)}function im({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Zke(r)?r.map(xV):xV(r),s={done:!1,value:e[0]},o=$0e(n&&n.length===e.length?n:U0e(e),t),a=V0e(o,e,{ease:Array.isArray(i)?i:B0e(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}const H0e=t=>t!==null;function v1(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(H0e),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const z0e={decay:vk,inertia:vk,tween:im,keyframes:im,spring:Q_};function x8(t){typeof t.type=="string"&&(t.type=z0e[t.type])}class w1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const W0e=t=>t/100;class _1 extends w1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==ai.now()&&this.tick(ai.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;x8(e);const{type:n=im,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const c=n||im;c!==im&&typeof a[0]!="number"&&(this.mixKeyframes=cy(W0e,I8(a[0],a[1])),a=[0,100]);const l=c({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=y1(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:w,onUpdate:y,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-l*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,I=r;if(d){const S=Math.min(this.currentTime,i)/a;let k=Math.floor(S),N=S%1;!N&&S>=1&&(N=1),N===1&&k--,k=Math.min(k,d+1),!!(k%2)&&(h==="reverse"?(N=1-N,m&&(N-=m/a)):h==="mirror"&&(I=o)),C=Ta(0,1,N)*a}const x=T?{done:!1,value:u[0]}:I.next(C);s&&(x.value=s(x.value));let{done:D}=x;!T&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return A&&w!==vk&&(x.value=v1(u,this.options,_,this.speed)),y&&y(x.value),A&&this.finish(),x}then(e,n){return this.finished.then(e,n)}get duration(){return Qi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qi(e)}get time(){return Qi(this.currentTime)}set time(e){var n;e=_o(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ai.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qi(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=k0e,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ai.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function K0e(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Wl=t=>t*180/Math.PI,wk=t=>{const e=Wl(Math.atan2(t[1],t[0]));return _k(e)},q0e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:wk,rotateZ:wk,skewX:t=>Wl(Math.atan(t[1])),skewY:t=>Wl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_k=t=>(t=t%360,t<0&&(t+=360),t),DV=wk,LV=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),FV=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),G0e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LV,scaleY:FV,scale:t=>(LV(t)+FV(t))/2,rotateX:t=>_k(Wl(Math.atan2(t[6],t[5]))),rotateY:t=>_k(Wl(Math.atan2(-t[2],t[0]))),rotateZ:DV,rotate:DV,skewX:t=>Wl(Math.atan(t[4])),skewY:t=>Wl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Tk(t){return t.includes("scale")?1:0}function Ck(t,e){if(!t||t==="none")return Tk(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=G0e,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=q0e,i=a}if(!i)return Tk(e);const s=r[e],o=i[1].split(",").map(Y0e);return typeof s=="function"?s(o):o[s]}const Q0e=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ck(n,e)};function Y0e(t){return parseFloat(t.trim())}const If=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Af=new Set(If),VV=t=>t===bf||t===Be,X0e=new Set(["x","y","z"]),J0e=If.filter(t=>!X0e.has(t));function Z0e(t){const e=[];return J0e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ou={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ck(e,"x"),y:(t,{transform:e})=>Ck(e,"y")};ou.translateX=ou.x;ou.translateY=ou.y;const au=new Set;let Ek=!1,Sk=!1,bk=!1;function R8(){if(Sk){const t=Array.from(au).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Z0e(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Sk=!1,Ek=!1,au.forEach(t=>t.complete(bk)),au.clear()}function P8(){au.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Sk=!0)})}function exe(){bk=!0,P8(),R8(),bk=!1}class T1{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(au.add(this),Ek||(Ek=!0,Qt.read(P8),Qt.resolveKeyframes(R8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}K0e(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),au.delete(this)}cancel(){this.state==="scheduled"&&(au.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const txe=t=>t.startsWith("--");function nxe(t,e,n){txe(e)?t.style.setProperty(e,n):t.style[e]=n}const rxe=c1(()=>window.ScrollTimeline!==void 0),ixe={};function sxe(t,e){const n=c1(t);return()=>ixe[e]??n()}const N8=sxe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Tp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,jV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tp([0,.65,.55,1]),circOut:Tp([.55,0,1,.45]),backIn:Tp([.31,.01,.66,-.59]),backOut:Tp([.33,1.53,.69,.99])};function O8(t,e){if(t)return typeof t=="function"?N8()?A8(t,e):"ease-out":y8(t)?Tp(t):Array.isArray(t)?t.map(n=>O8(n,e)||jV.easeOut):jV[t]}function oxe(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:c}={},l=void 0){const u={[e]:n};c&&(u.offset=c);const d=O8(a,i);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return l&&(h.pseudoElement=l),t.animate(u,h)}function M8(t){return typeof t=="function"&&"applyToOptions"in t}function axe({type:t,...e}){return M8(t)&&N8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class cxe extends w1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,a1(typeof e.type!="string");const l=axe(e);this.animation=oxe(n,r,i,l,s),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=v1(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):nxe(n,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Qi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qi(e)}get time(){return Qi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_o(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&rxe()?(this.animation.timeline=e,Zi):n(this)}}const D8={anticipate:f8,backInOut:h8,circInOut:m8};function lxe(t){return t in D8}function uxe(t){typeof t.ease=="string"&&lxe(t.ease)&&(t.ease=D8[t.ease])}const UV=10;class dxe extends cxe{constructor(e){uxe(e),x8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new _1({...o,autoplay:!1}),c=_o(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-UV).value,a.sample(c).value,UV),a.stop()}}const $V=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jc.test(t)||t==="0")&&!t.startsWith("url("));function hxe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function fxe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=$V(i,e),a=$V(s,e);return!o||!a?!1:hxe(t)||(n==="spring"||M8(n))&&r}function Ik(t){t.duration=0,t.type="keyframes"}const pxe=new Set(["opacity","clipPath","filter","transform"]),mxe=c1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gxe(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=e.owner.getProps();return mxe()&&n&&pxe.has(n)&&(n!=="transform"||!l)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const yxe=40;class vxe extends w1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:c,motionValue:l,element:u,...d}){var w;super(),this.stop=()=>{var y,_;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=ai.now();const h={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:l,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||T1;this.keyframeResolver=new m(a,(y,_,v)=>this.onKeyframesResolved(y,_,h,!v),c,l,u),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:c,isHandoff:l,onUpdate:u}=r;this.resolvedAt=ai.now(),fxe(e,s,o,a)||((Ca.instantAnimations||!c)&&(u==null||u(v1(e,r,n))),e[0]=e[e.length-1],Ik(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>yxe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!l&&gxe(h)?new dxe({...h,element:h.motionValue.owner.current}):new _1(h);m.finished.then(()=>this.notifyFinished()).catch(Zi),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),exe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const wxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _xe(t){const e=wxe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function L8(t,e,n=1){const[r,i]=_xe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return i8(o)?parseFloat(o):o}return f1(i)?L8(i,e,n+1):i}function C1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const F8=new Set(["width","height","top","left","right","bottom",...If]),Txe={test:t=>t==="auto",parse:t=>t},V8=t=>e=>e.test(t),j8=[bf,Be,To,Wa,h0e,d0e,Txe],BV=t=>j8.find(V8(t));function Cxe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||o8(t):!0}const Exe=new Set(["brightness","contrast","saturate","opacity"]);function Sxe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(p1)||[];if(!r)return t;const i=n.replace(r,"");let s=Exe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const bxe=/\b([a-z-]*)\(.*?\)/gu,Ak={...Jc,getAnimatableNone:t=>{const e=t.match(bxe);return e?e.map(Sxe).join(" "):t}},HV={...bf,transform:Math.round},Ixe={rotate:Wa,rotateX:Wa,rotateY:Wa,rotateZ:Wa,scale:mv,scaleX:mv,scaleY:mv,scaleZ:mv,skew:Wa,skewX:Wa,skewY:Wa,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:ug,originX:RV,originY:RV,originZ:Be},E1={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...Ixe,zIndex:HV,fillOpacity:ug,strokeOpacity:ug,numOctaves:HV},Axe={...E1,color:En,backgroundColor:En,outlineColor:En,fill:En,stroke:En,borderColor:En,borderTopColor:En,borderRightColor:En,borderBottomColor:En,borderLeftColor:En,filter:Ak,WebkitFilter:Ak},U8=t=>Axe[t];function $8(t,e){let n=U8(t);return n!==Ak&&(n=Jc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kxe=new Set(["auto","none","0"]);function xxe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!kxe.has(s)&&dg(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=$8(n,i)}class Rxe extends T1{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="string"&&(l=l.trim(),f1(l))){const u=L8(l,n.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!F8.has(r)||e.length!==2)return;const[i,s]=e,o=BV(i),a=BV(s);if(o!==a)if(VV(o)&&VV(a))for(let c=0;c<e.length;c++){const l=e[c];typeof l=="string"&&(e[c]=parseFloat(l))}else ou[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Cxe(e[i]))&&r.push(i);r.length&&xxe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ou[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=ou[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,l])=>{e.getValue(c).set(l)}),this.resolveNoneKeyframes()}}function Pxe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const B8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function H8(t){return s8(t)&&"offsetHeight"in t}const zV=30,Nxe=t=>!isNaN(parseFloat(t));class Oxe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=ai.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ai.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Nxe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new l1);const r=this.events[e].add(n);return e==="change"?()=>{r(),Qt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ai.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,zV);return a8(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $h(t,e){return new Oxe(t,e)}const{schedule:S1}=v8(queueMicrotask,!1),ds={x:!1,y:!1};function z8(){return ds.x||ds.y}function Mxe(t){return t==="x"||t==="y"?ds[t]?null:(ds[t]=!0,()=>{ds[t]=!1}):ds.x||ds.y?null:(ds.x=ds.y=!0,()=>{ds.x=ds.y=!1})}function W8(t,e){const n=Pxe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function WV(t){return!(t.pointerType==="touch"||z8())}function Dxe(t,e,n={}){const[r,i,s]=W8(t,n),o=a=>{if(!WV(a))return;const{target:c}=a,l=e(c,a);if(typeof l!="function"||!c)return;const u=d=>{WV(d)&&(l(d),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const K8=(t,e)=>e?t===e?!0:K8(t,e.parentElement):!1,b1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Lxe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Fxe(t){return Lxe.has(t.tagName)||t.tabIndex!==-1}const ew=new WeakSet;function KV(t){return e=>{e.key==="Enter"&&t(e)}}function wb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Vxe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=KV(()=>{if(ew.has(n))return;wb(n,"down");const i=KV(()=>{wb(n,"up")}),s=()=>wb(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function qV(t){return b1(t)&&!z8()}function jxe(t,e,n={}){const[r,i,s]=W8(t,n),o=a=>{const c=a.currentTarget;if(!qV(a))return;ew.add(c);const l=e(c,a),u=(m,w)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),ew.has(c)&&ew.delete(c),qV(m)&&typeof l=="function"&&l(m,{success:w})},d=m=>{u(m,c===window||c===document||n.useGlobalTarget||K8(c,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),H8(a)&&(a.addEventListener("focus",l=>Vxe(l,i)),!Fxe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function q8(t){return s8(t)&&"ownerSVGElement"in t}function Uxe(t){return q8(t)&&t.tagName==="svg"}const br=t=>!!(t&&t.getVelocity),$xe=[...j8,En,Jc],Bxe=t=>$xe.find(V8(t)),I1=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function GV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Hxe(...t){return e=>{let n=!1;const r=t.map(i=>{const s=GV(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():GV(t[i],null)}}}}function zxe(...t){return g.useCallback(Hxe(...t),t)}class Wxe extends g.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=H8(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Kxe({children:t,isPresent:e,anchorX:n,root:r}){const i=g.useId(),s=g.useRef(null),o=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=g.useContext(I1),c=zxe(s,t==null?void 0:t.ref);return g.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:h,right:m}=o.current;if(e||!s.current||!l||!u)return;const w=n==="left"?`left: ${h}`:`right: ${m}`;s.current.dataset.motionPopId=i;const y=document.createElement("style");a&&(y.nonce=a);const _=r??document.head;return _.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${w}px !important;
            top: ${d}px !important;
          }
        `),()=>{_.contains(y)&&_.removeChild(y)}},[e]),p.jsx(Wxe,{isPresent:e,childRef:s,sizeRef:o,children:g.cloneElement(t,{ref:c})})}const qxe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:c})=>{const l=r1(Gxe),u=g.useId();let d=!0,h=g.useMemo(()=>(d=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:m=>{l.set(m,!0);for(const w of l.values())if(!w)return;r&&r()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[n,l,r]);return s&&d&&(h={...h}),g.useMemo(()=>{l.forEach((m,w)=>l.set(w,!1))},[n]),g.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(Kxe,{isPresent:n,anchorX:a,root:c,children:t})),p.jsx(hE.Provider,{value:h,children:t})};function Gxe(){return new Map}function G8(t=!0){const e=g.useContext(hE);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=g.useId();g.useEffect(()=>{if(t)return i(s)},[t]);const o=g.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const gv=t=>t.key||"";function QV(t){const e=[];return g.Children.forEach(t,n=>{g.isValidElement(n)&&e.push(n)}),e}const Qxe=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[l,u]=G8(o),d=g.useMemo(()=>QV(t),[t]),h=o&&!l?[]:d.map(gv),m=g.useRef(!0),w=g.useRef(d),y=r1(()=>new Map),[_,v]=g.useState(d),[T,C]=g.useState(d);r8(()=>{m.current=!1,w.current=d;for(let D=0;D<T.length;D++){const A=gv(T[D]);h.includes(A)?y.delete(A):y.get(A)!==!0&&y.set(A,!1)}},[T,h.length,h.join("-")]);const I=[];if(d!==_){let D=[...d];for(let A=0;A<T.length;A++){const S=T[A],k=gv(S);h.includes(k)||(D.splice(A,0,S),I.push(S))}return s==="wait"&&I.length&&(D=I),C(QV(D)),v(d),null}const{forceRender:x}=g.useContext(n1);return p.jsx(p.Fragment,{children:T.map(D=>{const A=gv(D),S=o&&!l?!1:d===T||h.includes(A),k=()=>{if(y.has(A))y.set(A,!0);else return;let N=!0;y.forEach(R=>{R||(N=!1)}),N&&(x==null||x(),C(w.current),o&&(u==null||u()),r&&r())};return p.jsx(qxe,{isPresent:S,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:S?void 0:k,anchorX:a,children:D},A)})})},Q8=g.createContext({strict:!1}),YV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bh={};for(const t in YV)Bh[t]={isEnabled:e=>YV[t].some(n=>!!e[n])};function Yxe(t){for(const e in t)Bh[e]={...Bh[e],...t[e]}}const Xxe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Y_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Xxe.has(t)}let Y8=t=>!Y_(t);function Jxe(t){typeof t=="function"&&(Y8=e=>e.startsWith("on")?!Y_(e):t(e))}try{Jxe(require("@emotion/is-prop-valid").default)}catch{}function Zxe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Y8(i)||n===!0&&Y_(i)||!e&&!Y_(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const fE=g.createContext({});function pE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function hg(t){return typeof t=="string"||Array.isArray(t)}const A1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],k1=["initial",...A1];function mE(t){return pE(t.animate)||k1.some(e=>hg(t[e]))}function X8(t){return!!(mE(t)||t.variants)}function eRe(t,e){if(mE(t)){const{initial:n,animate:r}=t;return{initial:n===!1||hg(n)?n:void 0,animate:hg(r)?r:void 0}}return t.inherit!==!1?e:{}}function tRe(t){const{initial:e,animate:n}=eRe(t,g.useContext(fE));return g.useMemo(()=>({initial:e,animate:n}),[XV(e),XV(n)])}function XV(t){return Array.isArray(t)?t.join(" "):t}const fg={};function nRe(t){for(const e in t)fg[e]=t[e],h1(e)&&(fg[e].isCSSVariable=!0)}function J8(t,{layout:e,layoutId:n}){return Af.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!fg[t]||t==="opacity")}const rRe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iRe=If.length;function sRe(t,e,n){let r="",i=!0;for(let s=0;s<iRe;s++){const o=If[s],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const l=B8(a,E1[o]);if(!c){i=!1;const u=rRe[o]||o;r+=`${u}(${l}) `}n&&(e[o]=l)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function x1(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const l=e[c];if(Af.has(c)){o=!0;continue}else if(h1(c)){i[c]=l;continue}else{const u=B8(l,E1[c]);c.startsWith("origin")?(a=!0,s[c]=u):r[c]=u}}if(e.transform||(o||n?r.transform=sRe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:l="50%",originZ:u=0}=s;r.transformOrigin=`${c} ${l} ${u}`}}const R1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Z8(t,e,n){for(const r in e)!br(e[r])&&!J8(r,n)&&(t[r]=e[r])}function oRe({transformTemplate:t},e){return g.useMemo(()=>{const n=R1();return x1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function aRe(t,e){const n=t.style||{},r={};return Z8(r,n,t),Object.assign(r,oRe(t,e)),r}function cRe(t,e){const n={},r=aRe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const lRe={offset:"stroke-dashoffset",array:"stroke-dasharray"},uRe={offset:"strokeDashoffset",array:"strokeDasharray"};function dRe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?lRe:uRe;t[s.offset]=Be.transform(-r);const o=Be.transform(e),a=Be.transform(n);t[s.array]=`${o} ${a}`}function e7(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},c,l,u){if(x1(t,a,l),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&dRe(d,i,s,o,!1)}const t7=()=>({...R1(),attrs:{}}),n7=t=>typeof t=="string"&&t.toLowerCase()==="svg";function hRe(t,e,n,r){const i=g.useMemo(()=>{const s=t7();return e7(s,e,n7(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Z8(s,t.style,t),i.style={...s,...i.style}}return i}const fRe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P1(t){return typeof t!="string"||t.includes("-")?!1:!!(fRe.indexOf(t)>-1||/[A-Z]/u.test(t))}function pRe(t,e,n,{latestValues:r},i,s=!1){const a=(P1(t)?hRe:cRe)(e,r,i,t),c=Zxe(e,typeof t=="string",s),l=t!==g.Fragment?{...c,...a,ref:n}:{},{children:u}=e,d=g.useMemo(()=>br(u)?u.get():u,[u]);return g.createElement(t,{...l,children:d})}function JV(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function N1(t,e,n,r){if(typeof e=="function"){const[i,s]=JV(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=JV(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function tw(t){return br(t)?t.get():t}function mRe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:gRe(n,r,i,t),renderState:e()}}function gRe(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=tw(s[h]);let{initial:o,animate:a}=t;const c=mE(t),l=X8(t);e&&l&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!pE(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const w=N1(t,h[m]);if(w){const{transitionEnd:y,transition:_,...v}=w;for(const T in v){let C=v[T];if(Array.isArray(C)){const I=u?C.length-1:0;C=C[I]}C!==null&&(i[T]=C)}for(const T in y)i[T]=y[T]}}}return i}const r7=t=>(e,n)=>{const r=g.useContext(fE),i=g.useContext(hE),s=()=>mRe(t,e,r,i);return n?s():r1(s)};function O1(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(br(r[o])||e.style&&br(e.style[o])||J8(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const yRe=r7({scrapeMotionValuesFromProps:O1,createRenderState:R1});function i7(t,e,n){const r=O1(t,e,n);for(const i in t)if(br(t[i])||br(e[i])){const s=If.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const vRe=r7({scrapeMotionValuesFromProps:i7,createRenderState:t7}),wRe=Symbol.for("motionComponentSymbol");function Rd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _Re(t,e,n){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Rd(n)&&(n.current=r))},[e])}const M1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TRe="framerAppearId",s7="data-"+M1(TRe),o7=g.createContext({});function CRe(t,e,n,r,i){var y,_;const{visualElement:s}=g.useContext(fE),o=g.useContext(Q8),a=g.useContext(hE),c=g.useContext(I1).reducedMotion,l=g.useRef(null);r=r||o.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const u=l.current,d=g.useContext(o7);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&ERe(l.current,n,i,d);const h=g.useRef(!1);g.useInsertionEffect(()=>{u&&h.current&&u.update(n,a)});const m=n[s7],w=g.useRef(!!m&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,m))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,m)));return r8(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),w.current&&u.animationState&&u.animationState.animateChanges())}),g.useEffect(()=>{u&&(!w.current&&u.animationState&&u.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,m)}),w.current=!1),u.enteringChildren=void 0)}),u}function ERe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:a7(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Rd(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function a7(t){if(t)return t.options.allowProjection!==!1?t.projection:a7(t.parent)}function _b(t,{forwardMotionProps:e=!1}={},n,r){n&&Yxe(n);const i=P1(t)?vRe:yRe;function s(a,c){let l;const u={...g.useContext(I1),...a,layoutId:SRe(a)},{isStatic:d}=u,h=tRe(a),m=i(a,d);if(!d&&i1){bRe();const w=IRe(u);l=w.MeasureLayout,h.visualElement=CRe(t,m,u,r,w.ProjectionNode)}return p.jsxs(fE.Provider,{value:h,children:[l&&h.visualElement?p.jsx(l,{visualElement:h.visualElement,...u}):null,pRe(t,a,_Re(m,h.visualElement,c),m,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=g.forwardRef(s);return o[wRe]=t,o}function SRe({layoutId:t}){const e=g.useContext(n1).id;return e&&t!==void 0?e+"-"+t:t}function bRe(t,e){g.useContext(Q8).strict}function IRe(t){const{drag:e,layout:n}=Bh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function ARe(t,e){if(typeof Proxy>"u")return _b;const n=new Map,r=(s,o)=>_b(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,_b(o,void 0,t,e)),n.get(o))})}function c7({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function kRe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xRe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Tb(t){return t===void 0||t===1}function kk({scale:t,scaleX:e,scaleY:n}){return!Tb(t)||!Tb(e)||!Tb(n)}function Il(t){return kk(t)||l7(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function l7(t){return ZV(t.x)||ZV(t.y)}function ZV(t){return t&&t!=="0%"}function X_(t,e,n){const r=t-n,i=e*r;return n+i}function ej(t,e,n,r,i){return i!==void 0&&(t=X_(t,i,r)),X_(t,n,r)+e}function xk(t,e=0,n=1,r,i){t.min=ej(t.min,e,n,r,i),t.max=ej(t.max,e,n,r,i)}function u7(t,{x:e,y:n}){xk(t.x,e.translate,e.scale,e.originPoint),xk(t.y,n.translate,n.scale,n.originPoint)}const tj=.999999999999,nj=1.0000000000001;function RRe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Nd(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,u7(t,o)),r&&Il(s.latestValues)&&Nd(t,s.latestValues))}e.x<nj&&e.x>tj&&(e.x=1),e.y<nj&&e.y>tj&&(e.y=1)}function Pd(t,e){t.min=t.min+e,t.max=t.max+e}function rj(t,e,n,r,i=.5){const s=Xt(t.min,t.max,i);xk(t,e,n,s,r)}function Nd(t,e){rj(t.x,e.x,e.scaleX,e.scale,e.originX),rj(t.y,e.y,e.scaleY,e.scale,e.originY)}function d7(t,e){return c7(xRe(t.getBoundingClientRect(),e))}function PRe(t,e,n){const r=d7(t,n),{scroll:i}=e;return i&&(Pd(r.x,i.offset.x),Pd(r.y,i.offset.y)),r}const ij=()=>({translate:0,scale:1,origin:0,originPoint:0}),Od=()=>({x:ij(),y:ij()}),sj=()=>({min:0,max:0}),mn=()=>({x:sj(),y:sj()}),Rk={current:null},h7={current:!1};function NRe(){if(h7.current=!0,!!i1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rk.current=t.matches;t.addEventListener("change",e),e()}else Rk.current=!1}const ORe=new WeakMap;function MRe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(br(i))t.addValue(r,i);else if(br(s))t.addValue(r,$h(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,$h(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const oj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DRe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=T1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ai.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Qt.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=mE(n),this.isVariantNode=X8(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];c[h]!==void 0&&br(m)&&m.set(c[h])}}mount(e){var n;this.current=e,ORe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),h7.current||NRe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rk.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Xc(this.notifyUpdate),Xc(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Af.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Qt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bh){const n=Bh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<oj.length;r++){const i=oj[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=MRe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=$h(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(i8(r)||o8(r))?r=parseFloat(r):!Bxe(r)&&Jc.test(n)&&(r=$8(e,n)),this.setBaseTarget(e,br(r)?r.get():r)),br(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=N1(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!br(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new l1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){S1.render(this.render)}}class f7 extends DRe{constructor(){super(...arguments),this.KeyframeResolver=Rxe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;br(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function p7(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function LRe(t){return window.getComputedStyle(t)}class FRe extends f7{constructor(){super(...arguments),this.type="html",this.renderInstance=p7}readValueFromInstance(e,n){var r;if(Af.has(n))return(r=this.projection)!=null&&r.isProjecting?Tk(n):Q0e(e,n);{const i=LRe(e),s=(h1(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return d7(e,n)}build(e,n,r){x1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return O1(e,n,r)}}const m7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VRe(t,e,n,r){p7(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(m7.has(i)?i:M1(i),e.attrs[i])}class jRe extends f7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Af.has(n)){const r=U8(n);return r&&r.default||0}return n=m7.has(n)?n:M1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return i7(e,n,r)}build(e,n,r){e7(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){VRe(e,n,r,i)}mount(e){this.isSVGTag=n7(e.tagName),super.mount(e)}}const URe=(t,e)=>P1(t)?new jRe(e):new FRe(e,{allowProjection:t!==g.Fragment});function th(t,e,n){const r=t.getProps();return N1(r,e,n!==void 0?n:r.custom,t)}const Pk=t=>Array.isArray(t);function $Re(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$h(n))}function BRe(t){return Pk(t)?t[t.length-1]||0:t}function HRe(t,e){const n=th(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=BRe(s[o]);$Re(t,o,a)}}function zRe(t){return!!(br(t)&&t.add)}function Nk(t,e){const n=t.getValue("willChange");if(zRe(n))return n.add(e);if(!n&&Ca.WillChange){const r=new Ca.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function g7(t){return t.props[s7]}const WRe=t=>t!==null;function KRe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(WRe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const qRe={type:"spring",stiffness:500,damping:25,restSpeed:10},GRe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),QRe={type:"keyframes",duration:.8},YRe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XRe=(t,{keyframes:e})=>e.length>2?QRe:Af.has(t)?t.startsWith("scale")?GRe(e[1]):qRe:YRe;function JRe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const D1=(t,e,n,r={},i,s)=>o=>{const a=C1(r,t)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l=l-_o(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};JRe(a)||Object.assign(u,XRe(t,u)),u.duration&&(u.duration=_o(u.duration)),u.repeatDelay&&(u.repeatDelay=_o(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Ik(u),u.delay===0&&(d=!0)),(Ca.instantAnimations||Ca.skipAnimations)&&(d=!0,Ik(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const h=KRe(u.keyframes,a);if(h!==void 0){Qt.update(()=>{u.onUpdate(h),u.onComplete()});return}}return a.isSync?new _1(u):new vxe(u)};function ZRe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function y7(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const c=[],l=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const d=t.getValue(u,t.latestValues[u]??null),h=a[u];if(h===void 0||l&&ZRe(l,u))continue;const m={delay:n,...C1(s||{},u)},w=d.get();if(w!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===w&&!m.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=g7(t);if(v){const T=window.MotionHandoffAnimation(v,u,Qt);T!==null&&(m.startTime=T,y=!0)}}Nk(t,u),d.start(D1(u,d,h,t.shouldReduceMotion&&F8.has(u)?{type:!1}:m,t,y));const _=d.animation;_&&c.push(_)}return o&&Promise.all(c).then(()=>{Qt.update(()=>{o&&HRe(t,o)})}),c}function v7(t,e,n,r=0,i=1){const s=Array.from(t).sort((l,u)=>l.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function Ok(t,e,n={}){var c;const r=th(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(y7(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return ePe(t,e,l,u,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function ePe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Ok(c,e,{...o,delay:n+(typeof r=="function"?0:r)+v7(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function tPe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Ok(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Ok(t,e,n);else{const i=typeof e=="function"?th(t,e,n.custom):e;r=Promise.all(y7(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function w7(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const nPe=k1.length;function _7(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?_7(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<nPe;n++){const r=k1[n],i=t.props[r];(hg(i)||i===!1)&&(e[r]=i)}return e}const rPe=[...A1].reverse(),iPe=A1.length;function sPe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>tPe(t,n,r)))}function oPe(t){let e=sPe(t),n=aj(),r=!0;const i=c=>(l,u)=>{var h;const d=th(t,u,c==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:w,...y}=d;l={...l,...y,...w}}return l};function s(c){e=c(t)}function o(c){const{props:l}=t,u=_7(t.parent)||{},d=[],h=new Set;let m={},w=1/0;for(let _=0;_<iPe;_++){const v=rPe[_],T=n[v],C=l[v]!==void 0?l[v]:u[v],I=hg(C),x=v===c?T.isActive:null;x===!1&&(w=_);let D=C===u[v]&&C!==l[v]&&I;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),T.protectedKeys={...m},!T.isActive&&x===null||!C&&!T.prevProp||pE(C)||typeof C=="boolean")continue;const A=aPe(T.prevProp,C);let S=A||v===c&&T.isActive&&!D&&I||_>w&&I,k=!1;const N=Array.isArray(C)?C:[C];let R=N.reduce(i(v),{});x===!1&&(R={});const{prevResolvedValues:O={}}=T,P={...O,...R},$=se=>{S=!0,h.has(se)&&(k=!0,h.delete(se)),T.needsAnimating[se]=!0;const V=t.getValue(se);V&&(V.liveStyle=!1)};for(const se in P){const V=R[se],j=O[se];if(m.hasOwnProperty(se))continue;let ie=!1;Pk(V)&&Pk(j)?ie=!w7(V,j):ie=V!==j,ie?V!=null?$(se):h.add(se):V!==void 0&&h.has(se)?$(se):T.protectedKeys[se]=!0}T.prevProp=C,T.prevResolvedValues=R,T.isActive&&(m={...m,...R}),r&&t.blockInitialAnimation&&(S=!1);const H=D&&A;S&&(!H||k)&&d.push(...N.map(se=>{const V={type:v};if(typeof se=="string"&&r&&!H&&t.manuallyAnimateOnMount&&t.parent){const{parent:j}=t,ie=th(j,se);if(j.enteringChildren&&ie){const{delayChildren:Te}=ie.transition||{};V.delay=v7(j.enteringChildren,t,Te)}}return{animation:se,options:V}}))}if(h.size){const _={};if(typeof l.initial!="boolean"){const v=th(t,Array.isArray(l.initial)?l.initial[0]:l.initial);v&&v.transition&&(_.transition=v.transition)}h.forEach(v=>{const T=t.getBaseTarget(v),C=t.getValue(v);C&&(C.liveStyle=!0),_[v]=T??null}),d.push({animation:_})}let y=!!d.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(c,l){var d;if(n[c].isActive===l)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(c,l)}),n[c].isActive=l;const u=o(c);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=aj()}}}function aPe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!w7(e,t):!1}function _l(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aj(){return{animate:_l(!0),whileInView:_l(),whileHover:_l(),whileTap:_l(),whileDrag:_l(),whileFocus:_l(),exit:_l()}}class pl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class cPe extends pl{constructor(e){super(e),e.animationState||(e.animationState=oPe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let lPe=0;class uPe extends pl{constructor(){super(...arguments),this.id=lPe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dPe={animation:{Feature:cPe},exit:{Feature:uPe}};function pg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function dy(t){return{point:{x:t.pageX,y:t.pageY}}}const hPe=t=>e=>b1(e)&&t(e,dy(e));function sm(t,e,n,r){return pg(t,e,hPe(n),r)}const T7=1e-4,fPe=1-T7,pPe=1+T7,C7=.01,mPe=0-C7,gPe=0+C7;function Vr(t){return t.max-t.min}function yPe(t,e,n){return Math.abs(t-e)<=n}function cj(t,e,n,r=.5){t.origin=r,t.originPoint=Xt(e.min,e.max,t.origin),t.scale=Vr(n)/Vr(e),t.translate=Xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=fPe&&t.scale<=pPe||isNaN(t.scale))&&(t.scale=1),(t.translate>=mPe&&t.translate<=gPe||isNaN(t.translate))&&(t.translate=0)}function om(t,e,n,r){cj(t.x,e.x,n.x,r?r.originX:void 0),cj(t.y,e.y,n.y,r?r.originY:void 0)}function lj(t,e,n){t.min=n.min+e.min,t.max=t.min+Vr(e)}function vPe(t,e,n){lj(t.x,e.x,n.x),lj(t.y,e.y,n.y)}function uj(t,e,n){t.min=e.min-n.min,t.max=t.min+Vr(e)}function am(t,e,n){uj(t.x,e.x,n.x),uj(t.y,e.y,n.y)}function $i(t){return[t("x"),t("y")]}const E7=({current:t})=>t?t.ownerDocument.defaultView:null,dj=(t,e)=>Math.abs(t-e);function wPe(t,e){const n=dj(t.x,e.x),r=dj(t.y,e.y);return Math.sqrt(n**2+r**2)}class S7{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Eb(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,w=wPe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!w)return;const{point:y}=h,{timestamp:_}=sr;this.history.push({...y,timestamp:_});const{onStart:v,onMove:T}=this.handlers;m||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Cb(m,this.transformPagePoint),Qt.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:w,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Eb(h.type==="pointercancel"?this.lastMoveEventInfo:Cb(m,this.transformPagePoint),this.history);this.startEvent&&w&&w(h,v),y&&y(h,v)},!b1(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=dy(e),c=Cb(a,this.transformPagePoint),{point:l}=c,{timestamp:u}=sr;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Eb(c,this.history)),this.removeListeners=cy(sm(this.contextWindow,"pointermove",this.handlePointerMove),sm(this.contextWindow,"pointerup",this.handlePointerUp),sm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xc(this.updatePoint)}}function Cb(t,e){return e?{point:e(t.point)}:t}function hj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Eb({point:t},e){return{point:t,delta:hj(t,b7(e)),offset:hj(t,_Pe(e)),velocity:TPe(e,.1)}}function _Pe(t){return t[0]}function b7(t){return t[t.length-1]}function TPe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=b7(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>_o(e)));)n--;if(!r)return{x:0,y:0};const s=Qi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function CPe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xt(n,t,r.max):Math.min(t,n)),t}function fj(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function EPe(t,{top:e,left:n,bottom:r,right:i}){return{x:fj(t.x,n,i),y:fj(t.y,e,r)}}function pj(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function SPe(t,e){return{x:pj(t.x,e.x),y:pj(t.y,e.y)}}function bPe(t,e){let n=.5;const r=Vr(t),i=Vr(e);return i>r?n=lg(e.min,e.max-r,t.min):r>i&&(n=lg(t.min,t.max-i,e.min)),Ta(0,1,n)}function IPe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mk=.35;function APe(t=Mk){return t===!1?t=0:t===!0&&(t=Mk),{x:mj(t,"left","right"),y:mj(t,"top","bottom")}}function mj(t,e,n){return{min:gj(t,e),max:gj(t,n)}}function gj(t,e){return typeof t=="number"?t:t[e]||0}const kPe=new WeakMap;class xPe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dy(d).point)},o=(d,h)=>{const{drag:m,dragPropagation:w,onDragStart:y}=this.getProps();if(m&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Mxe(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$i(v=>{let T=this.getAxisMotionValue(v).get()||0;if(To.test(T)){const{projection:C}=this.visualElement;if(C&&C.layout){const I=C.layout.layoutBox[v];I&&(T=Vr(I)*(parseFloat(T)/100))}}this.originPoint[v]=T}),y&&Qt.postRender(()=>y(d,h)),Nk(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},a=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:w,onDirectionLock:y,onDrag:_}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=h;if(w&&this.currentDirection===null){this.currentDirection=RPe(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),_&&_(d,h)},c=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>$i(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new S7(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:E7(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Qt.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!yv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=CPe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Rd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=EPe(r.layoutBox,e):this.constraints=!1,this.elastic=APe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$i(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=IPe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Rd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=PRe(r,i.root,this.visualElement.getTransformPagePoint());let o=SPe(i.layout.layoutBox,s);if(n){const a=n(kRe(o));this.hasMutatedConstraints=!!a,a&&(o=c7(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=$i(u=>{if(!yv(u,n,this.currentDirection))return;let d=c&&c[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,w={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,w)});return Promise.all(l).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Nk(this.visualElement,e),r.start(D1(e,r,0,n,this.visualElement,!1))}stopAnimation(){$i(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$i(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$i(n=>{const{drag:r}=this.getProps();if(!yv(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Xt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Rd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$i(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=bPe({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$i(o=>{if(!yv(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(Xt(c,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;kPe.set(this.visualElement,this);const e=this.visualElement.current,n=sm(e,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Rd(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Qt.read(r);const o=pg(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&($i(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=c[u].translate,d.set(d.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Mk,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yv(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function RPe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class PPe extends pl{constructor(e){super(e),this.removeGroupControls=Zi,this.removeListeners=Zi,this.controls=new xPe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const yj=t=>(e,n)=>{t&&Qt.postRender(()=>t(e,n))};class NPe extends pl{constructor(){super(...arguments),this.removePointerDownListener=Zi}onPointerDown(e){this.session=new S7(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:E7(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:yj(e),onStart:yj(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Qt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=sm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ip={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Be.test(t))t=parseFloat(t);else return t;const n=vj(t,e.target.x),r=vj(t,e.target.y);return`${n}% ${r}%`}},OPe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Jc.parse(t);if(i.length>5)return r;const s=Jc.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const l=Xt(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),s(i)}};let Sb=!1;class MPe extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;nRe(DPe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Sb&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),nw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Sb=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Qt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),S1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Sb=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function I7(t){const[e,n]=G8(),r=g.useContext(n1);return p.jsx(MPe,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(o7),isPresent:e,safeToRemove:n})}const DPe={borderRadius:{...ip,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ip,borderTopRightRadius:ip,borderBottomLeftRadius:ip,borderBottomRightRadius:ip,boxShadow:OPe};function LPe(t,e,n){const r=br(t)?t:$h(t);return r.start(D1("",r,e,n)),r.animation}const FPe=(t,e)=>t.depth-e.depth;class VPe{constructor(){this.children=[],this.isDirty=!1}add(e){s1(this.children,e),this.isDirty=!0}remove(e){o1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(FPe),this.isDirty=!1,this.children.forEach(e)}}function jPe(t,e){const n=ai.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Xc(r),t(s-e))};return Qt.setup(r,!0),()=>Xc(r)}const A7=["TopLeft","TopRight","BottomLeft","BottomRight"],UPe=A7.length,wj=t=>typeof t=="string"?parseFloat(t):t,_j=t=>typeof t=="number"||Be.test(t);function $Pe(t,e,n,r,i,s){i?(t.opacity=Xt(0,n.opacity??1,BPe(r)),t.opacityExit=Xt(e.opacity??1,0,HPe(r))):s&&(t.opacity=Xt(e.opacity??1,n.opacity??1,r));for(let o=0;o<UPe;o++){const a=`border${A7[o]}Radius`;let c=Tj(e,a),l=Tj(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||_j(c)===_j(l)?(t[a]=Math.max(Xt(wj(c),wj(l),r),0),(To.test(l)||To.test(c))&&(t[a]+="%")):t[a]=l}(e.rotate||n.rotate)&&(t.rotate=Xt(e.rotate||0,n.rotate||0,r))}function Tj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BPe=k7(0,.5,p8),HPe=k7(.5,.95,Zi);function k7(t,e,n){return r=>r<t?0:r>e?1:n(lg(t,e,r))}function Cj(t,e){t.min=e.min,t.max=e.max}function Ui(t,e){Cj(t.x,e.x),Cj(t.y,e.y)}function Ej(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Sj(t,e,n,r,i){return t-=e,t=X_(t,1/n,r),i!==void 0&&(t=X_(t,1/i,r)),t}function zPe(t,e=0,n=1,r=.5,i,s=t,o=t){if(To.test(e)&&(e=parseFloat(e),e=Xt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Xt(s.min,s.max,r);t===s&&(a-=e),t.min=Sj(t.min,e,n,a,i),t.max=Sj(t.max,e,n,a,i)}function bj(t,e,[n,r,i],s,o){zPe(t,e[n],e[r],e[i],e.scale,s,o)}const WPe=["x","scaleX","originX"],KPe=["y","scaleY","originY"];function Ij(t,e,n,r){bj(t.x,e,WPe,n?n.x:void 0,r?r.x:void 0),bj(t.y,e,KPe,n?n.y:void 0,r?r.y:void 0)}function Aj(t){return t.translate===0&&t.scale===1}function x7(t){return Aj(t.x)&&Aj(t.y)}function kj(t,e){return t.min===e.min&&t.max===e.max}function qPe(t,e){return kj(t.x,e.x)&&kj(t.y,e.y)}function xj(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function R7(t,e){return xj(t.x,e.x)&&xj(t.y,e.y)}function Rj(t){return Vr(t.x)/Vr(t.y)}function Pj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class GPe{constructor(){this.members=[]}add(e){s1(this.members,e),e.scheduleRender()}remove(e){if(o1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QPe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:w}=n;l&&(r=`perspective(${l}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const bb=["","X","Y","Z"],YPe=1e3;let XPe=0;function Ib(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function P7(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=g7(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Qt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&P7(r)}function N7({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=XPe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eNe),this.nodes.forEach(iNe),this.nodes.forEach(sNe),this.nodes.forEach(tNe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new VPe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new l1),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=q8(o)&&!Uxe(o),this.instance=o;const{layoutId:a,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;Qt.read(()=>{d=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,u&&u(),u=jPe(h,250),nw.hasAnimatedSinceResize&&(nw.hasAnimatedSinceResize=!1,this.nodes.forEach(Mj)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||l.getDefaultTransition()||uNe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:_}=l.getProps(),v=!this.targetLayout||!R7(this.targetLayout,m),T=!d&&h;if(this.options.layoutRoot||this.resumeFrom||T||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...C1(w,"layout"),onPlay:y,onComplete:_};(l.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(u,T)}else d||Mj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oNe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&P7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Oj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rNe),this.nodes.forEach(JPe),this.nodes.forEach(ZPe)):this.nodes.forEach(Oj),this.clearAllSnapshots();const a=ai.now();sr.delta=Ta(0,1e3/60,a-sr.timestamp),sr.timestamp=a,sr.isProcessing=!0,pb.update.process(sr),pb.preRender.process(sr),pb.render.process(sr),sr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,S1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nNe),this.sharedNodes.forEach(aNe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vr(this.snapshot.measuredBox.x)&&!Vr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!x7(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&this.instance&&(a||Il(this.latestValues)||u)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),dNe(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return mn();const a=o.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(hNe))){const{scroll:u}=this.root;u&&(Pd(a.x,u.offset.x),Pd(a.y,u.offset.y))}return a}removeElementScroll(o){var c;const a=mn();if(Ui(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Ui(a,o),Pd(a.x,d.offset.x),Pd(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const c=mn();Ui(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Nd(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Il(u.latestValues)&&Nd(c,u.latestValues)}return Il(this.latestValues)&&Nd(c,this.latestValues),c}removeTransform(o){const a=mn();Ui(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!Il(l.latestValues))continue;kk(l.latestValues)&&l.updateSnapshot();const u=mn(),d=l.measurePageBox();Ui(u,d),Ij(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Il(this.latestValues)&&Ij(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=sr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),am(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mn(),this.targetWithTransforms=mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vPe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ui(this.target,this.layout.layoutBox),u7(this.target,this.targetDelta)):Ui(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),am(this.relativeTargetOrigin,this.target,m.target),Ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kk(this.parent.latestValues)||l7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===sr.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;Ui(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;RRe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ej(this.prevProjectionDelta.x,this.projectionDelta.x),Ej(this.prevProjectionDelta.y,this.projectionDelta.y)),om(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!Pj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Od(),this.projectionDelta=Od(),this.projectionDeltaWithTransform=Od()}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},d=Od();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=mn(),m=c?c.source:void 0,w=this.layout?this.layout.source:void 0,y=m!==w,_=this.getStack(),v=!_||_.members.length<=1,T=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(lNe));this.animationProgress=0;let C;this.mixTargetDelta=I=>{const x=I/1e3;Dj(d.x,o.x,x),Dj(d.y,o.y,x),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(am(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cNe(this.relativeTarget,this.relativeTargetOrigin,h,x),C&&qPe(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=mn()),Ui(C,this.relativeTarget)),y&&(this.animationValues=u,$Pe(u,l,this.latestValues,x,T,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,l;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(l=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||l.stop(),this.pendingAnimation&&(Xc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qt.update(()=>{nw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$h(0)),this.currentAnimation=LPe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YPe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:u}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&O7(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||mn();const d=Vr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const h=Vr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Ui(a,c),Nd(a,u),om(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GPe),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const l={};c.z&&Ib("z",o,l,this.animationValues);for(let u=0;u<bb.length;u++)Ib(`rotate${bb[u]}`,o,l,this.animationValues),Ib(`skew${bb[u]}`,o,l,this.animationValues);o.render();for(const u in l)o.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=tw(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=tw(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Il(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let d=QPe(this.projectionDeltaWithTransform,this.treeScale,u);c&&(d=c(u,d)),o.transform=d;const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,l.animationValues?o.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const w in fg){if(u[w]===void 0)continue;const{correct:y,applyTo:_,isCSSVariable:v}=fg[w],T=d==="none"?u[w]:y(u[w],l);if(_){const C=_.length;for(let I=0;I<C;I++)o[_[I]]=T}else v?this.options.visualElement.renderState.vars[w]=T:o[w]=T}this.options.layoutId&&(o.pointerEvents=l===this?tw(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Nj),this.root.sharedNodes.clear()}}}function JPe(t){t.updateLayout()}function ZPe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?$i(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],m=Vr(h);h.min=r[d].min,h.max=h.min+m}):O7(s,e.layoutBox,r)&&$i(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],m=Vr(r[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=Od();om(a,r,e.layoutBox);const c=Od();o?om(c,t.applyTransform(i,!0),e.measuredBox):om(c,r,e.layoutBox);const l=!x7(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const w=mn();am(w,e.layoutBox,h.layoutBox);const y=mn();am(y,r,m.layoutBox),R7(w,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=w,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function eNe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tNe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nNe(t){t.clearSnapshot()}function Nj(t){t.clearMeasurements()}function Oj(t){t.isLayoutDirty=!1}function rNe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Mj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iNe(t){t.resolveTargetDelta()}function sNe(t){t.calcProjection()}function oNe(t){t.resetSkewAndRotation()}function aNe(t){t.removeLeadSnapshot()}function Dj(t,e,n){t.translate=Xt(e.translate,0,n),t.scale=Xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Lj(t,e,n,r){t.min=Xt(e.min,n.min,r),t.max=Xt(e.max,n.max,r)}function cNe(t,e,n,r){Lj(t.x,e.x,n.x,r),Lj(t.y,e.y,n.y,r)}function lNe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uNe={duration:.45,ease:[.4,0,.1,1]},Fj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Vj=Fj("applewebkit/")&&!Fj("chrome/")?Math.round:Zi;function jj(t){t.min=Vj(t.min),t.max=Vj(t.max)}function dNe(t){jj(t.x),jj(t.y)}function O7(t,e,n){return t==="position"||t==="preserve-aspect"&&!yPe(Rj(e),Rj(n),.2)}function hNe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const fNe=N7({attachResizeListener:(t,e)=>pg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ab={current:void 0},M7=N7({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ab.current){const t=new fNe({});t.mount(window),t.setOptions({layoutScroll:!0}),Ab.current=t}return Ab.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pNe={pan:{Feature:NPe},drag:{Feature:PPe,ProjectionNode:M7,MeasureLayout:I7}};function Uj(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Qt.postRender(()=>s(e,dy(e)))}class mNe extends pl{mount(){const{current:e}=this.node;e&&(this.unmount=Dxe(e,(n,r)=>(Uj(this.node,r,"Start"),i=>Uj(this.node,i,"End"))))}unmount(){}}class gNe extends pl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cy(pg(this.node.current,"focus",()=>this.onFocus()),pg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $j(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Qt.postRender(()=>s(e,dy(e)))}class yNe extends pl{mount(){const{current:e}=this.node;e&&(this.unmount=jxe(e,(n,r)=>($j(this.node,r,"Start"),(i,{success:s})=>$j(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dk=new WeakMap,kb=new WeakMap,vNe=t=>{const e=Dk.get(t.target);e&&e(t)},wNe=t=>{t.forEach(vNe)};function _Ne({root:t,...e}){const n=t||document;kb.has(n)||kb.set(n,{});const r=kb.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wNe,{root:t,...e})),r[i]}function TNe(t,e,n){const r=_Ne(e);return Dk.set(t,n),r.observe(t),()=>{Dk.delete(t),r.unobserve(t)}}const CNe={some:0,all:1};class ENe extends pl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:CNe[i]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=l?u:d;h&&h(c)};return TNe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(SNe(e,n))&&this.startObserver()}unmount(){}}function SNe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bNe={inView:{Feature:ENe},tap:{Feature:yNe},focus:{Feature:gNe},hover:{Feature:mNe}},INe={layout:{ProjectionNode:M7,MeasureLayout:I7}},ANe={...dPe,...bNe,...pNe,...INe},J_=ARe(ANe,URe),Bj=({tasks:t,onToggleStatus:e,onClose:n,onAddTask:r,trackingTask:i,isTracking:s,currentSessionElapsedSeconds:o,onPlayPause:a,onStop:c,getFormattedTime:l,onStartTracking:u})=>{const[d,h]=g.useState(!0),[m,w]=g.useState(""),y=t.filter(C=>C.status!=="completed"),_=g.useCallback(C=>{try{new window.Audio(C).play().catch(x=>console.error("PiP audio play failed:",x))}catch(I){console.error("PiP sound playback failed:",I)}},[]),v=C=>{const I=t.find(D=>D.id===C),x=(I==null?void 0:I.status)!=="completed";e(C,{playSound:!1}),x&&_(JI)},T=()=>{m.trim()&&(r({title:m.trim()}),w(""))};return p.jsxs("div",{className:"h-full w-full bg-gray-900 text-gray-100 font-sans flex flex-col p-3 overflow-hidden",children:[p.jsxs("header",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[p.jsxs("h1",{className:"text-sm font-bold flex items-center gap-2",children:[p.jsx(vu,{className:"h-4 w-4 text-primary"}),"Taskly Widget"]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(et,{variant:"ghost",size:"icon",onClick:()=>h(C=>!C),className:"h-7 w-7 text-gray-400 hover:bg-gray-700",children:p.jsx(Ose,{className:"h-4 w-4"})}),p.jsx(et,{variant:"ghost",size:"icon",onClick:n,className:"h-7 w-7 text-gray-400 hover:bg-gray-700",title:"Return to App",children:p.jsx(aoe,{className:"h-4 w-4"})})]})]}),p.jsxs("div",{className:fe("flex-1 flex flex-col overflow-hidden transition-all duration-300",!d&&"justify-center"),children:[i&&p.jsx(J_.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},className:"mb-3 p-3 rounded-lg bg-gray-800 border border-gray-700 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(et,{variant:"default",size:"icon",onClick:a,className:"h-9 w-9 rounded-full flex-shrink-0 gradient-primary text-primary-foreground shadow-lg",children:s?p.jsx(Yw,{className:"h-4 w-4"}):p.jsx(Xw,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Timing Task:"}),p.jsx("p",{className:"text-sm font-medium truncate",title:i.title,children:i.title})]}),p.jsx("p",{className:"text-lg font-mono text-primary font-semibold",children:l(o)}),p.jsx(et,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8 rounded-full text-gray-400 hover:bg-destructive/20 hover:text-destructive",children:p.jsx(GH,{className:"h-4 w-4"})})]})}),p.jsx(Qxe,{children:d&&p.jsxs(J_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"flex-1 flex flex-col overflow-hidden",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-400 mb-2 px-1 flex-shrink-0",children:"Today's Tasks"}),p.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:p.jsx("ul",{className:"space-y-1",children:y.length>0?y.map(C=>p.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-gray-800 transition-colors group",children:[p.jsx(n8,{id:`pip-task-${C.id}`,checked:C.status==="completed",onCheckedChange:()=>v(C.id),className:"border-gray-500 data-[state=checked]:bg-primary data-[state=checked]:border-primary"}),p.jsx("label",{htmlFor:`pip-task-${C.id}`,className:"text-sm flex-1 truncate cursor-pointer",children:C.title}),(i==null?void 0:i.id)!==C.id&&p.jsx(et,{variant:"ghost",size:"icon",onClick:()=>u(C),className:"h-7 w-7 text-gray-400 hover:bg-gray-700 opacity-0 group-hover:opacity-100 transition-opacity",title:`Start tracking "${C.title}"`,children:p.jsx(QH,{className:"h-4 w-4"})})]},C.id)):p.jsx("div",{className:"text-center py-8 text-gray-500",children:p.jsx("p",{className:"text-sm",children:"No active tasks."})})})}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-gray-700 flex-shrink-0",children:[p.jsx(bs,{placeholder:"Add a new task...",value:m,onChange:C=>w(C.target.value),onKeyPress:C=>C.key==="Enter"&&T(),className:"h-8 text-xs bg-gray-800 border-gray-600 text-white placeholder-gray-500 focus:ring-primary"}),p.jsx(et,{size:"icon",onClick:T,disabled:!m.trim(),className:"h-8 w-8 flex-shrink-0 gradient-primary text-primary-foreground",children:p.jsx(Zse,{className:"h-4 w-4"})})]})]},"task-list")})]})]})},D7=g.createContext(void 0);function kNe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(0),[s,o]=g.useState(!1),[a,c]=g.useState(null),[l,u]=g.useState(null),[d,h]=g.useState(0),[m,w]=g.useState(!1),[y,_]=g.useState(null),{user:v}=Bn(),{updateTaskTimeSpent:T,updateSubtaskTimeSpent:C}=ry(),{toast:I}=Aa();g.useEffect(()=>{if(!v)return;const H=Ge(Ae,"users",v.uid,"activeTracking","currentSession"),X=vo(H,se=>{if(se.exists()){const V=se.data();if((!e||e.id!==V.taskId)&&n({id:V.taskId,title:V.taskTitle}),o(!V.isPaused),V.isPaused&&V.pausedAt)i(V.accumulatedSeconds),c(null);else{c(V.startTime);const j=Math.floor((Date.now()-V.startTime)/1e3);i(V.accumulatedSeconds+j)}}});return()=>X()},[v]),g.useEffect(()=>{if(!v)return;const H=Ge(Ae,"users",v.uid,"activeTracking","currentSubtaskSession"),X=vo(H,se=>{if(se.exists()){const V=se.data();if((!l||l.subtaskId!==V.subtaskId)&&u({taskId:V.taskId,subtaskId:V.subtaskId,subtaskTitle:V.subtaskTitle}),w(!V.isPaused),V.isPaused&&V.pausedAt)h(V.accumulatedSeconds),_(null);else{_(V.startTime);const j=Math.floor((Date.now()-V.startTime)/1e3);h(V.accumulatedSeconds+j)}}});return()=>X()},[v]),g.useEffect(()=>{let H;return s&&e&&(H=setInterval(()=>{i(X=>X+1)},1e3)),()=>{H&&clearInterval(H)}},[s,e]),g.useEffect(()=>{let H;return m&&l&&(H=setInterval(()=>{h(X=>X+1)},1e3)),()=>{H&&clearInterval(H)}},[m,l]);const x=async H=>{if(!v)return;e&&e.id!==H.id&&await S();const X=Date.now(),se={taskId:H.id,taskTitle:H.title,startTime:X,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const V=Ge(Ae,"users",v.uid,"activeTracking","currentSession");await w_(V,se),n(H),i(0),o(!0),c(X),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_TIME_TRACKING",session:se}),I({title:"Time tracking started",description:`Now tracking time for "${H.title}"`})}catch(V){console.error("Error starting tracking:",V),I({title:"Failed to start tracking",variant:"destructive"})}},D=async()=>{if(!(!e||!v||!s))try{const H=Date.now(),X=Ge(Ae,"users",v.uid,"activeTracking","currentSession");await hr(X,{pausedAt:H,isPaused:!0,accumulatedSeconds:r}),o(!1),c(null),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_TIME_TRACKING"}),I({title:"Time tracking paused",description:`Paused tracking for "${e.title}"`})}catch(H){console.error("Error pausing tracking:",H),I({title:"Failed to pause tracking",variant:"destructive"})}},A=async()=>{if(!(!e||!v||s))try{const H=Date.now(),X=Ge(Ae,"users",v.uid,"activeTracking","currentSession");await hr(X,{startTime:H,pausedAt:null,isPaused:!1}),o(!0),c(H),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_TIME_TRACKING"}),I({title:"Time tracking resumed",description:`Resumed tracking for "${e.title}"`})}catch(H){console.error("Error resuming tracking:",H),I({title:"Failed to resume tracking",variant:"destructive"})}},S=async()=>{if(!e||!v){n(null),i(0),o(!1),c(null);return}try{const H=Ge(Ae,"users",v.uid,"activeTracking","currentSession"),X=r;if(X>0){await T(e.id,X);const se=k(X);I({title:"Time tracking stopped",description:`Saved ${se} for "${e.title}"`})}await Ao(H),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_TIME_TRACKING"})}catch(H){console.error("Error stopping tracking:",H),I({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{n(null),i(0),o(!1),c(null)}},k=H=>{if(typeof H!="number"||isNaN(H)||H<0)return"0s";const X=Math.floor(H/3600),se=Math.floor(H%3600/60),V=Math.floor(H%60);return X>0?`${X}h ${se.toString().padStart(2,"0")}m`:se>0?`${se}m ${V.toString().padStart(2,"0")}s`:`${V}s`},N=async(H,X,se)=>{if(!v)return;l&&(l.taskId!==H||l.subtaskId!==X)&&await P();const V=Date.now(),j={taskId:H,subtaskId:X,subtaskTitle:se,startTime:V,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const ie=Ge(Ae,"users",v.uid,"activeTracking","currentSubtaskSession");await w_(ie,j),u({taskId:H,subtaskId:X,subtaskTitle:se}),h(0),w(!0),_(V),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_SUBTASK_TIME_TRACKING",session:j}),I({title:"Time tracking started",description:`Now tracking time for subtask "${se}"`})}catch(ie){console.error("Error starting subtask tracking:",ie),I({title:"Failed to start tracking",variant:"destructive"})}},R=async()=>{if(!(!l||!v||!m))try{const H=Date.now(),X=Ge(Ae,"users",v.uid,"activeTracking","currentSubtaskSession");await hr(X,{pausedAt:H,isPaused:!0,accumulatedSeconds:d}),w(!1),_(null),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_SUBTASK_TIME_TRACKING"}),I({title:"Time tracking paused",description:`Paused tracking for "${l.subtaskTitle}"`})}catch(H){console.error("Error pausing subtask tracking:",H),I({title:"Failed to pause tracking",variant:"destructive"})}},O=async()=>{if(!(!l||!v||m))try{const H=Date.now(),X=Ge(Ae,"users",v.uid,"activeTracking","currentSubtaskSession");await hr(X,{startTime:H,pausedAt:null,isPaused:!1}),w(!0),_(H),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_SUBTASK_TIME_TRACKING"}),I({title:"Time tracking resumed",description:`Resumed tracking for "${l.subtaskTitle}"`})}catch(H){console.error("Error resuming subtask tracking:",H),I({title:"Failed to resume tracking",variant:"destructive"})}},P=async()=>{if(!l||!v){u(null),h(0),w(!1),_(null);return}try{const H=Ge(Ae,"users",v.uid,"activeTracking","currentSubtaskSession"),X=d;if(X>0){await C(l.taskId,l.subtaskId,X);const se=k(X);I({title:"Time tracking stopped",description:`Saved ${se} for subtask "${l.subtaskTitle}"`})}await Ao(H),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_SUBTASK_TIME_TRACKING"})}catch(H){console.error("Error stopping subtask tracking:",H),I({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{u(null),h(0),w(!1),_(null)}},$={trackingTask:e,currentSessionElapsedSeconds:r,isTracking:s,startTracking:x,pauseTracking:D,resumeTracking:A,stopTracking:S,getFormattedTime:k,trackingSubtask:l,currentSubtaskElapsedSeconds:d,isTrackingSubtask:m,startSubtaskTracking:N,pauseSubtaskTracking:R,resumeSubtaskTracking:O,stopSubtaskTracking:P};return p.jsx(D7.Provider,{value:$,children:t})}function L7(){const t=g.useContext(D7);if(t===void 0)throw new Error("useTaskTimeTracker must be used within a TaskTimeTrackerProvider");return t}function F7(){const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[i,s]=g.useState(null),o=ry(),a=L7();g.useEffect(()=>{e("documentPictureInPicture"in window)},[]);const c=g.useCallback(()=>{var u;i&&((u=i.reactRoot)==null||u.unmount(),i.close(),s(null),r(!1))},[i]),l=g.useCallback(async()=>{if(!(!t||n))try{const u=await window.documentPictureInPicture.requestWindow({width:320,height:480});document.head.querySelectorAll('style, link[rel="stylesheet"]').forEach(_=>{u.document.head.appendChild(_.cloneNode(!0))}),document.documentElement.classList.contains("dark")&&u.document.documentElement.classList.add("dark");const h=u.document.createElement("style");h.textContent=`
        body { margin: 0; overflow: hidden; }
        #root { height: 100vh; width: 100vw; }
      `,u.document.head.appendChild(h);const m=u.document.createElement("div");m.id="root",u.document.body.appendChild(m);const w=G0(m),y=p.jsx(Bj,{tasks:o.tasks,onToggleStatus:o.toggleTaskStatus,onClose:c,onAddTask:o.addTask,trackingTask:a.trackingTask,isTracking:a.isTracking,currentSessionElapsedSeconds:a.currentSessionElapsedSeconds,onPlayPause:()=>{a.isTracking?a.pauseTracking():a.resumeTracking()},onStop:a.stopTracking,getFormattedTime:a.getFormattedTime,onStartTracking:a.startTracking});w.render(y),u.reactRoot=w,s(u),r(!0),u.addEventListener("pagehide",()=>{u.reactRoot&&u.reactRoot.unmount(),s(null),r(!1)})}catch(u){console.error("Error opening Picture-in-Picture window:",u)}},[t,n,o,a,c]);return g.useEffect(()=>{if(n&&(i!=null&&i.reactRoot)){const u=p.jsx(Bj,{tasks:o.tasks,onToggleStatus:o.toggleTaskStatus,onClose:c,onAddTask:o.addTask,trackingTask:a.trackingTask,isTracking:a.isTracking,currentSessionElapsedSeconds:a.currentSessionElapsedSeconds,onPlayPause:()=>{a.isTracking?a.pauseTracking():a.resumeTracking()},onStop:a.stopTracking,getFormattedTime:a.getFormattedTime,onStartTracking:a.startTracking});i.reactRoot.render(u)}},[n,i,o,a,c]),{isPipSupported:t,isPipOpen:n,openPip:l,closePip:c}}const xNe=[{href:"/tasks",label:"Tasks",icon:p.jsx(vu,{className:"h-5 w-5"})},{href:"/team-chat",label:"Team Chat",icon:p.jsx(YH,{className:"h-5 w-5"})},{href:"/meetly",label:"Meetly",icon:p.jsx(WH,{className:"h-5 w-5"})},{href:"/calendar",label:"Calendar",icon:p.jsx(UH,{className:"h-5 w-5"})},{href:"/notes",label:"Notes",icon:p.jsx(qse,{className:"h-5 w-5"})},{href:"/analytics",label:"Analytics",icon:p.jsx(YI,{className:"h-5 w-5"})}];function Hj({mobileTrigger:t}){const{user:e,userProfile:n,signOutUser:r}=Bn(),{state:i}=JC(),s=xo(),o=Fu(),[a,c]=g.useState(!1),[l,u]=g.useState(""),d=Sf(),{isPipSupported:h,isPipOpen:m,openPip:w}=F7(),y=()=>{const T=s.pathname;return{"/":"Dashboard","/tasks":"Tasks","/timer":"Timer","/chat":"AI Coach","/team-chat":"Team Chat","/meetly":"Meetly","/calendar":"Calendar","/notes":"Notes","/analytics":"Analytics","/profile":"Profile"}[T]||"Dashboard"},_=T=>{T.preventDefault(),l.trim()&&console.log("Searching for:",l)},v=(T,C)=>T&&T.trim()?T.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2):C?C.split("@")[0].slice(0,2).toUpperCase():"U";return p.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 pt-safe",children:p.jsxs("div",{className:"flex h-14 items-center px-4",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[d&&t?t:p.jsx(LK,{className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:i==="expanded"?p.jsx(of,{className:"h-4 w-4"}):p.jsx(zH,{className:"h-4 w-4"})}),p.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[p.jsx(xm,{to:"/",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Workspace"}),p.jsx("span",{className:"text-muted-foreground",children:"/"}),p.jsx("span",{className:"font-medium",children:y()})]})]}),p.jsx(sA,{delayDuration:0,children:p.jsx("nav",{className:"hidden md:flex items-center gap-1 ml-6",children:xNe.map(T=>p.jsxs(pL,{children:[p.jsx(mL,{asChild:!0,children:p.jsx(xm,{to:T.href,"aria-label":T.label,className:fe("flex h-9 w-9 items-center justify-center rounded-lg transition-colors hover:bg-accent",s.pathname.startsWith(T.href)?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:T.icon})}),p.jsx(oA,{children:p.jsx("p",{children:T.label})})]},T.href))})}),p.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[p.jsx("div",{className:"w-full max-w-xs",children:p.jsxs(NG,{open:a,onOpenChange:c,children:[p.jsx(OG,{asChild:!0,children:p.jsxs(et,{variant:"outline",className:"w-full justify-start text-sm text-muted-foreground hover:bg-muted",children:[p.jsx(GD,{className:"mr-2 h-4 w-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Search everything..."}),p.jsx("span",{className:"sm:hidden",children:"Search..."}),p.jsx("div",{className:"ml-auto hidden sm:flex items-center gap-1",children:p.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground opacity-100",children:[p.jsx(bse,{className:"h-3 w-3"}),"K"]})})]})}),p.jsx(QN,{className:"w-96 p-0",align:"center",children:p.jsx("form",{onSubmit:_,className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(GD,{className:"h-4 w-4 text-muted-foreground"}),p.jsx(bs,{value:l,onChange:T=>u(T.target.value),placeholder:"Search tasks, notes, messages...",className:"border-0 shadow-none focus-visible:ring-0",autoFocus:!0})]})})})]})}),p.jsxs("div",{className:"flex items-center gap-2",children:[h&&p.jsx(sA,{delayDuration:0,children:p.jsxs(pL,{children:[p.jsx(mL,{asChild:!0,children:p.jsx(et,{variant:"ghost",size:"icon",onClick:w,className:fe("relative hover-scale transition-smooth h-9 w-9",m&&"text-primary bg-primary/10"),children:p.jsx(KH,{className:"h-4 w-4"})})}),p.jsx(oA,{children:p.jsx("p",{children:m?"Close Widget":"Open Task Widget"})})]})}),p.jsx($ke,{}),p.jsxs(ake,{children:[p.jsx(cke,{asChild:!0,children:p.jsx(et,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:p.jsxs(cq,{className:"h-8 w-8",children:[p.jsx(lq,{src:(n==null?void 0:n.photoURL)||(e==null?void 0:e.photoURL)||""}),p.jsx(uq,{className:"text-xs bg-primary/10 text-primary",children:v(n==null?void 0:n.displayName,e==null?void 0:e.email)})]})})}),p.jsxs(_G,{className:"w-56",align:"end",forceMount:!0,children:[p.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:p.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[(n==null?void 0:n.displayName)&&p.jsx("p",{className:"font-medium",children:n.displayName}),(e==null?void 0:e.email)&&p.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e.email})]})}),p.jsx(pk,{}),p.jsxs(Jv,{onClick:()=>o("/profile"),children:[p.jsx(fR,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Profile"})]}),p.jsxs(Jv,{onClick:()=>o("/profile"),children:[p.jsx(soe,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsx(pk,{}),p.jsxs(Jv,{onClick:r,className:"text-destructive focus:text-destructive",children:[p.jsx(Lse,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Log out"})]})]})]})]})]})]})})}const V7=g.createContext(void 0);function RNe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(!1),[s,o]=g.useState(!0),a=u=>{n(u),i(!0),o(!0)},c=()=>{n(null),i(!1),o(!1)},l=()=>{o(!s)};return p.jsx(V7.Provider,{value:{activeTask:e,isTimerRunning:r,isTimerExpanded:s,startTaskTimer:a,stopTimer:c,toggleTimerSize:l},children:t})}function j7(){const t=g.useContext(V7);if(t===void 0)throw new Error("useTimer must be used within a TimerProvider");return t}const ko=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ko.displayName="Card";const Zc=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("flex flex-col space-y-1.5 p-6",t),...e}));Zc.displayName="CardHeader";const el=g.forwardRef(({className:t,...e},n)=>p.jsx("h3",{ref:n,className:fe("text-2xl font-semibold leading-none tracking-tight",t),...e}));el.displayName="CardTitle";const L1=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:fe("text-sm text-muted-foreground",t),...e}));L1.displayName="CardDescription";const Ea=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("p-6 pt-0",t),...e}));Ea.displayName="CardContent";const PNe=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("flex items-center p-6 pt-0",t),...e}));PNe.displayName="CardFooter";var F1="Progress",V1=100,[NNe]=qr(F1),[ONe,MNe]=NNe(F1),U7=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=DNe,...o}=t;(i||i===0)&&!zj(i)&&console.error(LNe(`${i}`,"Progress"));const a=zj(i)?i:V1;r!==null&&!Wj(r,a)&&console.error(FNe(`${r}`,"Progress"));const c=Wj(r,a)?r:null,l=Z_(c)?s(c,a):void 0;return p.jsx(ONe,{scope:n,value:c,max:a,children:p.jsx(Fe.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Z_(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":H7(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});U7.displayName=F1;var $7="ProgressIndicator",B7=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=MNe($7,n);return p.jsx(Fe.div,{"data-state":H7(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});B7.displayName=$7;function DNe(t,e){return`${Math.round(t/e*100)}%`}function H7(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Z_(t){return typeof t=="number"}function zj(t){return Z_(t)&&!isNaN(t)&&t>0}function Wj(t,e){return Z_(t)&&!isNaN(t)&&t<=e&&t>=0}function LNe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${V1}\`.`}function FNe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${V1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var z7=U7,VNe=B7;const W7=g.forwardRef(({className:t,value:e,...n},r)=>p.jsx(z7,{ref:r,className:fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:p.jsx(VNe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));W7.displayName=z7.displayName;function jNe(){const{activeTask:t,isTimerExpanded:e,toggleTimerSize:n,stopTimer:r}=j7(),[i,s]=g.useState("focus"),[o,a]=g.useState(0),[c,l]=g.useState(!1),[u,d]=g.useState(0),{toast:h}=Aa(),m=g.useRef(),w={shortBreak:5,longBreak:15,sessionsUntilLongBreak:4};g.useEffect(()=>{if(t&&i==="focus"){const x=t.estimatedTime||25;a(x*60)}else if(i==="break"){const x=u%w.sessionsUntilLongBreak===0&&u>0;a(x?w.longBreak*60:w.shortBreak*60)}},[t,i,u]);const y=i==="focus"?((t==null?void 0:t.estimatedTime)||25)*60:u%w.sessionsUntilLongBreak===0&&u>0?w.longBreak*60:w.shortBreak*60,_=(y-o)/y*100;g.useEffect(()=>(c&&o>0?m.current=setInterval(()=>{a(x=>x-1)},1e3):(clearInterval(m.current),o===0&&c&&(l(!1),i==="focus"?(d(x=>x+1),s("break"),JD(XD),Ho.showPomodoroNotification("focus-complete",u+1),h({title:"Focus session completed! 🎉",description:"Time for a break. Great work!"})):(s("focus"),JD(XD),Ho.showPomodoroNotification("break-complete"),h({title:"Break time over! ⚡",description:"Ready to focus again?"})))),()=>clearInterval(m.current)),[c,o,i,u,h]);const v=x=>{const D=Math.floor(x/60),A=x%60;return`${D.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},T=()=>{l(!c)},C=()=>{l(!1);const x=(t==null?void 0:t.estimatedTime)||25;a(i==="focus"?x*60:w.shortBreak*60)},I=()=>{h({title:"Task completed! 🎯",description:`"${t==null?void 0:t.title}" has been marked as complete.`}),r()};return t?p.jsx("div",{className:fe("fixed bottom-6 right-6 z-50 transition-all duration-300 ease-in-out",e?"w-96 h-auto":"w-72 h-20"),children:p.jsx(ko,{className:fe("shadow-elegant border-2 backdrop-blur-sm transition-all duration-300",i==="focus"?"border-focus/30 bg-card/95":"border-break/30 bg-card/95",e&&"shadow-glow"),children:p.jsx(Ea,{className:"p-4",children:e?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(HH,{className:"h-4 w-4 text-focus"}),p.jsx(Xi,{variant:i==="focus"?"default":"secondary",children:i==="focus"?"Focus":"Break"})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(et,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(Wse,{className:"h-3 w-3"})}),p.jsx(et,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",onClick:r,children:p.jsx(of,{className:"h-3 w-3"})})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"font-semibold text-sm mb-1",children:t.title}),p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:fe("text-4xl font-mono font-bold transition-colors",i==="focus"?"text-focus":"text-break"),children:v(o)}),p.jsx(W7,{value:_,className:fe("h-2 transition-colors",i==="focus"?"[&>div]:bg-focus":"[&>div]:bg-break")})]}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsxs(et,{variant:i==="focus"?"focus":"break",size:"sm",onClick:T,className:"hover-scale flex-1",children:[c?p.jsx(Yw,{className:"h-4 w-4 mr-2"}):p.jsx(Xw,{className:"h-4 w-4 mr-2"}),c?"Pause":"Start"]}),p.jsx(et,{variant:"outline",size:"sm",onClick:C,className:"hover-scale",children:p.jsx(noe,{className:"h-4 w-4"})}),i==="focus"&&p.jsx(et,{variant:"outline",size:"sm",onClick:I,className:"hover-scale text-success hover:text-success",children:p.jsx(vse,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center text-xs",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-focus",children:"Sessions"}),p.jsx("div",{className:"text-lg font-bold",children:u})]}),p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-break",children:"Next Break"}),p.jsx("div",{className:"text-lg font-bold",children:w.sessionsUntilLongBreak-u%w.sessionsUntilLongBreak})]})]})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:fe("text-lg font-mono font-bold",i==="focus"?"text-focus":"text-break"),children:v(o)}),p.jsxs(Xi,{variant:"secondary",className:"text-xs",children:[t.title.slice(0,12),"..."]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(et,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:T,children:c?p.jsx(Yw,{className:"h-3 w-3"}):p.jsx(Xw,{className:"h-3 w-3"})}),p.jsx(et,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(jse,{className:"h-3 w-3"})})]})]})})})}):null}function UNe(){const{trackingTask:t,currentSessionElapsedSeconds:e,isTracking:n,pauseTracking:r,resumeTracking:i,stopTracking:s,getFormattedTime:o}=L7(),{isPipSupported:a,isPipOpen:c,openPip:l}=F7(),u=()=>{if(!t)return 0;const h=(t.estimatedTime||0)*60,m=(t.timeSpent||0)+e;return h>0?Math.min(m/h*100,100):0},d=()=>{l()};return c||!t?null:p.jsx(J_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:260,damping:20},className:"fixed bottom-6 left-6 z-50",children:p.jsx(ko,{className:fe("w-72 shadow-elegant border backdrop-blur-sm bg-card/80 transition-all duration-300",n?"border-primary/30":"border-border"),children:p.jsxs("div",{className:"p-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(et,{variant:n?"focus":"outline",size:"icon",onClick:n?r:i,className:"h-9 w-9 rounded-full",children:n?p.jsx(Yw,{className:"h-4 w-4"}):p.jsx(Xw,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("p",{className:"text-sm font-mono text-primary font-semibold",children:o(e)}),t.timeSpent&&t.timeSpent>0&&p.jsxs("p",{className:"text-xs text-muted-foreground",children:["(Total: ",o((t.timeSpent||0)+e),")"]})]})]}),p.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[a&&p.jsx(et,{variant:"ghost",size:"icon",onClick:d,className:"h-9 w-9 rounded-full text-muted-foreground",children:p.jsx(KH,{className:"h-4 w-4"})}),p.jsx(et,{variant:"ghost",size:"icon",onClick:s,className:"h-9 w-9 rounded-full text-muted-foreground hover:bg-destructive/10 hover:text-destructive",children:p.jsx(GH,{className:"h-4 w-4"})})]})]}),t.estimatedTime&&p.jsx("div",{className:"mt-2 relative h-1 w-full bg-muted rounded-full overflow-hidden",children:p.jsx(J_.div,{className:"absolute top-0 left-0 h-full bg-primary",initial:{width:0},animate:{width:`${u()}%`},transition:{duration:.5,ease:"easeInOut"}})})]})})})}const Pl=class Pl{constructor(){Kt(this,"db",null);Kt(this,"dbName","TasklyOfflineDB");Kt(this,"version",1)}static getInstance(){return Pl.instance||(Pl.instance=new Pl),Pl.instance}async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(!s.objectStoreNames.contains("tasks")){const o=s.createObjectStore("tasks",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("priority","priority",{unique:!1}),o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("notes")){const o=s.createObjectStore("notes",{keyPath:"id"});o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("offlineActions")){const o=s.createObjectStore("offlineActions",{keyPath:"id"});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("type","type",{unique:!1})}if(s.objectStoreNames.contains("userData")||s.createObjectStore("userData",{keyPath:"key"}),!s.objectStoreNames.contains("scheduledNotifications")){const o=s.createObjectStore("scheduledNotifications",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("scheduledTime","scheduledTime",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1})}}})}async getStore(e,n="readonly"){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize IndexedDB");if(!this.db.objectStoreNames.contains(e))throw new Error(`Object store '${e}' does not exist`);return this.db.transaction([e],n).objectStore(e)}async saveTasks(e){const n=await this.getStore("tasks","readwrite"),r=e.map(i=>new Promise((s,o)=>{const a=n.put({...i,lastModified:Date.now()});a.onsuccess=()=>s(),a.onerror=()=>o(a.error)}));await Promise.all(r)}async saveTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getTasks(){const e=await this.getStore("tasks");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async getTask(e){const n=await this.getStore("tasks");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}async deleteTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async saveNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getNotes(){const e=await this.getStore("notes");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async deleteNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async queueAction(e){const n=await this.getStore("offlineActions","readwrite"),r={...e,id:crypto.randomUUID(),retryCount:0};return new Promise((i,s)=>{const o=n.put(r);o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getQueuedActions(){const e=await this.getStore("offlineActions");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>{const s=i.result.sort((o,a)=>o.timestamp-a.timestamp);n(s)},i.onerror=()=>r(i.error)})}async removeAction(e){const n=await this.getStore("offlineActions","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async updateActionRetryCount(e,n){const r=await this.getStore("offlineActions","readwrite");return new Promise((i,s)=>{const o=r.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.retryCount=n;const c=r.put(a);c.onsuccess=()=>i(),c.onerror=()=>s(c.error)}else i()},o.onerror=()=>s(o.error)})}async clearAllActions(){const e=await this.getStore("offlineActions","readwrite");return new Promise((n,r)=>{const i=e.clear();i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})}async setUserData(e,n){const r=await this.getStore("userData","readwrite");return new Promise((i,s)=>{const o=r.put({key:e,value:n,timestamp:Date.now()});o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getUserData(e){const n=await this.getStore("userData");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>{var o;return r((o=s.result)==null?void 0:o.value)},s.onerror=()=>i(s.error)})}async getTasksByStatus(e){const r=(await this.getStore("tasks")).index("status");return new Promise((i,s)=>{const o=r.getAll(e);o.onsuccess=()=>i(o.result),o.onerror=()=>s(o.error)})}async getUnsyncedItems(){const[e,n,r]=await Promise.all([this.getTasks(),this.getNotes(),this.getQueuedActions()]);return{tasks:e.filter(i=>i.syncStatus!=="synced"),notes:n.filter(i=>i.syncStatus!=="synced"),actions:r}}async clearDatabase(){const n=["tasks","notes","offlineActions","userData"].map(async r=>{const i=await this.getStore(r,"readwrite");return new Promise((s,o)=>{const a=i.clear();a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})});await Promise.all(n)}};Kt(Pl,"instance");let Lk=Pl;const gt=Lk.getInstance(),Kj="taskly_sync_status",$Ne=3,Nl=class Nl{constructor(){Kt(this,"syncInProgress",!1);Kt(this,"syncCallbacks",[])}static getInstance(){return Nl.instance||(Nl.instance=new Nl),Nl.instance}async initialize(){await gt.init()}async queueAction(e){await gt.queueAction({...e,timestamp:Date.now()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{"sync"in n&&n.sync.register("background-sync").catch(r=>{console.log("Background sync registration failed:",r)})})}async storeTaskLocally(e,n="pending"){const r={...e,lastModified:Date.now(),syncStatus:n};await gt.saveTask(r)}async getLocalTasks(){return gt.getTasks()}async deleteTaskLocally(e){await gt.deleteTask(e)}async getQueuedActions(){return gt.getQueuedActions()}async clearQueuedActions(){await gt.clearAllActions()}async getSyncStatus(){const e=localStorage.getItem(Kj),n=e?JSON.parse(e):{lastSync:0,pending:0},r=await this.getQueuedActions(),i=await gt.getUnsyncedItems();return{...n,pending:r.length+i.tasks.length+i.notes.length,conflicted:i.tasks.filter(s=>s.syncStatus==="conflict").length+i.notes.filter(s=>s.syncStatus==="conflict").length}}async updateSyncStatus(e){const n=await this.getQueuedActions(),r={lastSync:e,pending:n.length};localStorage.setItem(Kj,JSON.stringify(r))}isOnline(){return navigator.onLine}async syncWhenOnline(){if(!this.isOnline()||this.syncInProgress)return{success:!1,syncedCount:0,failedCount:0};this.syncInProgress=!0;let e=0,n=0;try{const r=await this.getQueuedActions(),i=await gt.getUnsyncedItems();if(r.length===0&&i.tasks.length===0&&i.notes.length===0)return this.syncInProgress=!1,{success:!0,syncedCount:0,failedCount:0};for(const s of r)try{await this.processAction(s),await gt.removeAction(s.id),e++}catch(o){console.error("Failed to process action:",s,o);const a=s.retryCount+1;a>=$Ne?(await gt.removeAction(s.id),n++):await gt.updateActionRetryCount(s.id,a)}for(const s of i.tasks)try{await this.syncTask(s),e++}catch(o){console.error("Failed to sync task:",s,o),await gt.saveTask({...s,syncStatus:"conflict"}),n++}for(const s of i.notes)try{await this.syncNote(s),e++}catch(o){console.error("Failed to sync note:",s,o),await gt.saveNote({...s,syncStatus:"conflict"}),n++}return await this.updateSyncStatus(Date.now()),this.syncCallbacks.forEach(s=>s(n===0)),(e>0||n>0)&&this.showSyncNotification(n===0?"success":"warning",`Synced ${e} items${n>0?`, ${n} failed`:""}`),{success:n===0,syncedCount:e,failedCount:n}}catch(r){return console.error("Sync failed:",r),this.showSyncNotification("error","Sync failed - will retry later"),{success:!1,syncedCount:e,failedCount:n+1}}finally{this.syncInProgress=!1}}async processAction(e){switch(console.log("Processing offline action:",e),e.type){case"CREATE_TASK":break;case"UPDATE_TASK":break;case"DELETE_TASK":break;case"CREATE_NOTE":break;case"UPDATE_NOTE":break;case"DELETE_NOTE":break;default:throw new Error(`Unknown action type: ${e.type}`)}}async syncTask(e){console.log("Syncing task:",e),await gt.saveTask({...e,syncStatus:"synced"})}async syncNote(e){console.log("Syncing note:",e),await gt.saveNote({...e,syncStatus:"synced"})}showSyncNotification(e,n){"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly Sync",{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png"})}onSyncComplete(e){this.syncCallbacks.push(e)}async getConflicts(){const e=await gt.getUnsyncedItems();return{tasks:e.tasks.filter(n=>n.syncStatus==="conflict"),notes:e.notes.filter(n=>n.syncStatus==="conflict")}}async resolveTaskConflict(e,n){const r=await gt.getTask(e);r&&(n?await gt.saveTask({...r,syncStatus:"pending"}):await gt.saveTask({...r,syncStatus:"synced"}))}async init(){await this.initialize(),window.addEventListener("online",()=>{console.log("Back online - starting sync..."),this.syncWhenOnline()}),window.addEventListener("offline",()=>{console.log("Gone offline - actions will be queued")}),this.isOnline()&&this.syncWhenOnline()}};Kt(Nl,"instance");let eT=Nl;const Ws=eT.getInstance(),BNe=Object.freeze(Object.defineProperty({__proto__:null,OfflineSync:eT,offlineSync:Ws},Symbol.toStringTag,{value:"Module"}));function K7(){const[t,e]=g.useState({isOnline:navigator.onLine,isSyncing:!1,lastSync:0,pending:0,conflicted:0}),n=g.useCallback(async()=>{const d=await Ws.getSyncStatus();e(h=>({...h,...d}))},[]);g.useEffect(()=>{let d=!0;const h=async()=>{d&&(e(y=>({...y,isOnline:!0})),await n())},m=()=>{d&&e(y=>({...y,isOnline:!1}))};n(),window.addEventListener("online",h),window.addEventListener("offline",m);const w=setInterval(n,5e3);return()=>{d=!1,window.removeEventListener("online",h),window.removeEventListener("offline",m),clearInterval(w)}},[n]);const r=g.useCallback(async()=>{if(!(!t.isOnline||t.isSyncing)){e(d=>({...d,isSyncing:!0}));try{const d=await Ws.syncWhenOnline();return await n(),d}finally{e(d=>({...d,isSyncing:!1}))}}},[t.isOnline,t.isSyncing,n]),i=g.useCallback(async(d,h)=>{const m={...d,id:crypto.randomUUID(),createdAt:new Date().toISOString(),subtasks:d.subtasks||[]};return await Ws.storeTaskLocally(m,"pending"),t.isOnline||await Ws.queueAction({type:"CREATE_TASK",data:m,userId:h}),await n(),m},[t.isOnline,n]),s=g.useCallback(async(d,h,m)=>{const w=await gt.getTask(d);if(!w)return null;const y={...w,...h,lastModified:Date.now(),syncStatus:"pending"};return await gt.saveTask(y),t.isOnline||await Ws.queueAction({type:"UPDATE_TASK",data:{id:d,updates:h},userId:m}),await n(),y},[t.isOnline,n]),o=g.useCallback(async(d,h)=>{await gt.deleteTask(d),t.isOnline||await Ws.queueAction({type:"DELETE_TASK",data:{id:d},userId:h}),await n()},[t.isOnline,n]),a=g.useCallback(async(d,h)=>{const m=await gt.getTask(d);if(!m)return null;const w=m.status==="completed"?"todo":"completed",y={...m,status:w,completedAt:w==="completed"?new Date().toISOString():void 0,lastModified:Date.now(),syncStatus:"pending"};return await gt.saveTask(y),t.isOnline||await Ws.queueAction({type:"TOGGLE_STATUS",data:{id:d,status:w},userId:h}),await n(),y},[t.isOnline,n]),c=g.useCallback(async()=>gt.getTasks(),[]),l=g.useCallback(async()=>Ws.getConflicts(),[]),u=g.useCallback(async(d,h)=>{await Ws.resolveTaskConflict(d,h),await n()},[n]);return{syncStatus:t,manualSync:r,createTaskOffline:i,updateTaskOffline:s,deleteTaskOffline:o,toggleTaskStatusOffline:a,getLocalTasks:c,getConflicts:l,resolveConflict:u,updateSyncStatus:n}}var gE="Dialog",[q7,HMe]=qr(gE),[HNe,js]=q7(gE),G7=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=g.useRef(null),c=g.useRef(null),[l,u]=ka({prop:r,defaultProp:i??!1,onChange:s,caller:gE});return p.jsx(HNe,{scope:e,triggerRef:a,contentRef:c,contentId:ho(),titleId:ho(),descriptionId:ho(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};G7.displayName=gE;var Q7="DialogTrigger",Y7=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=js(Q7,n),s=Ct(e,i.triggerRef);return p.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":$1(i.open),...r,ref:s,onClick:we(t.onClick,i.onOpenToggle)})});Y7.displayName=Q7;var j1="DialogPortal",[zNe,X7]=q7(j1,{forceMount:void 0}),J7=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=js(j1,e);return p.jsx(zNe,{scope:e,forceMount:n,children:g.Children.map(r,o=>p.jsx($n,{present:n||s.open,children:p.jsx(Rg,{asChild:!0,container:i,children:o})}))})};J7.displayName=j1;var tT="DialogOverlay",Z7=g.forwardRef((t,e)=>{const n=X7(tT,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=js(tT,t.__scopeDialog);return s.modal?p.jsx($n,{present:r||s.open,children:p.jsx(KNe,{...i,ref:e})}):null});Z7.displayName=tT;var WNe=yu("DialogOverlay.RemoveScroll"),KNe=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=js(tT,n);return p.jsx(iE,{as:WNe,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(Fe.div,{"data-state":$1(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Pu="DialogContent",eQ=g.forwardRef((t,e)=>{const n=X7(Pu,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=js(Pu,t.__scopeDialog);return p.jsx($n,{present:r||s.open,children:s.modal?p.jsx(qNe,{...i,ref:e}):p.jsx(GNe,{...i,ref:e})})});eQ.displayName=Pu;var qNe=g.forwardRef((t,e)=>{const n=js(Pu,t.__scopeDialog),r=g.useRef(null),i=Ct(e,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return UN(s)},[]),p.jsx(tQ,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:we(t.onFocusOutside,s=>s.preventDefault())})}),GNe=g.forwardRef((t,e)=>{const n=js(Pu,t.__scopeDialog),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(tQ,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),tQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=js(Pu,n),c=g.useRef(null),l=Ct(e,c);return jN(),p.jsxs(p.Fragment,{children:[p.jsx(tE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(sf,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":$1(a.open),...o,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(QNe,{titleId:a.titleId}),p.jsx(XNe,{contentRef:c,descriptionId:a.descriptionId})]})]})}),U1="DialogTitle",nQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=js(U1,n);return p.jsx(Fe.h2,{id:i.titleId,...r,ref:e})});nQ.displayName=U1;var rQ="DialogDescription",iQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=js(rQ,n);return p.jsx(Fe.p,{id:i.descriptionId,...r,ref:e})});iQ.displayName=rQ;var sQ="DialogClose",oQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=js(sQ,n);return p.jsx(Fe.button,{type:"button",...r,ref:e,onClick:we(t.onClick,()=>i.onOpenChange(!1))})});oQ.displayName=sQ;function $1(t){return t?"open":"closed"}var aQ="DialogTitleWarning",[zMe,cQ]=die(aQ,{contentName:Pu,titleName:U1,docsSlug:"dialog"}),QNe=({titleId:t})=>{const e=cQ(aQ),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},YNe="DialogDescriptionWarning",XNe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cQ(YNe).contentName}}.`;return g.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},lQ=G7,uQ=Y7,dQ=J7,yE=Z7,vE=eQ,wE=nQ,_E=iQ,hQ=oQ;const JNe=lQ,WMe=uQ,ZNe=dQ,fQ=g.forwardRef(({className:t,...e},n)=>p.jsx(yE,{ref:n,className:fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));fQ.displayName=yE.displayName;const pQ=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(ZNe,{children:[p.jsx(fQ,{}),p.jsxs(vE,{ref:r,className:fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,p.jsxs(hQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(of,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pQ.displayName=vE.displayName;const mQ=({className:t,...e})=>p.jsx("div",{className:fe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});mQ.displayName="DialogHeader";const e1e=({className:t,...e})=>p.jsx("div",{className:fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});e1e.displayName="DialogFooter";const gQ=g.forwardRef(({className:t,...e},n)=>p.jsx(wE,{ref:n,className:fe("text-lg font-semibold leading-none tracking-tight",t),...e}));gQ.displayName=wE.displayName;const yQ=g.forwardRef(({className:t,...e},n)=>p.jsx(_E,{ref:n,className:fe("text-sm text-muted-foreground",t),...e}));yQ.displayName=_E.displayName;function t1e({open:t,onOpenChange:e,conflicts:n}){const{resolveConflict:r}=K7(),[i,s]=g.useState(null),o=async(c,l)=>{s(c);try{await r(c,l),n.tasks=n.tasks.filter(u=>u.id!==c),n.tasks.length===0&&n.notes.length===0&&e(!1)}finally{s(null)}},a=c=>new Date(c).toLocaleString();return p.jsx(JNe,{open:t,onOpenChange:e,children:p.jsxs(pQ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[p.jsxs(mQ,{children:[p.jsxs(gQ,{className:"flex items-center gap-2",children:[p.jsx(jp,{className:"h-5 w-5 text-warning"}),"Sync Conflicts Detected"]}),p.jsx(yQ,{children:"The following items have conflicts between your local changes and server data. Choose which version to keep."})]}),p.jsxs("div",{className:"space-y-4",children:[n.tasks.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Task Conflicts"}),p.jsx("div",{className:"space-y-3",children:n.tasks.map(c=>p.jsxs(ko,{className:"border-warning/20",children:[p.jsxs(Zc,{className:"pb-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(el,{className:"text-base",children:c.title}),p.jsx(Xi,{variant:"outline",className:"text-warning border-warning",children:"Conflict"})]}),c.description&&p.jsx(L1,{children:c.description})]}),p.jsx(Ea,{className:"space-y-4",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(fR,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Your Changes"})]}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Status:"}),p.jsx(Xi,{variant:c.status==="completed"?"default":"secondary",children:c.status})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Priority:"}),p.jsx(Xi,{variant:c.priority==="high"?"destructive":"outline",children:c.priority})]}),p.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[p.jsx(HH,{className:"h-3 w-3"}),p.jsxs("span",{children:["Modified: ",a(new Date(c.lastModified).toISOString())]})]})]}),p.jsx(et,{onClick:()=>o(c.id,!0),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Keep My Changes"})]}),p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(jp,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Server Version"})]}),p.jsx("div",{className:"space-y-2 text-sm",children:p.jsx("div",{className:"text-muted-foreground",children:"Server data would be displayed here in a real implementation"})}),p.jsx(et,{onClick:()=>o(c.id,!1),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Use Server Version"})]})]})})]},c.id))})]}),n.notes.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Note Conflicts"}),p.jsx("div",{className:"text-muted-foreground",children:"Note conflict resolution would be implemented here"})]}),n.tasks.length===0&&n.notes.length===0&&p.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[p.jsx(jp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),p.jsx("p",{children:"No conflicts to resolve"})]})]}),p.jsx("div",{className:"flex justify-end gap-2 mt-6",children:p.jsx(et,{variant:"outline",onClick:()=>e(!1),children:"Close"})})]})})}function n1e(){const{syncStatus:t,manualSync:e,getConflicts:n}=K7(),[r,i]=g.useState(!1),[s,o]=g.useState({tasks:[],notes:[]}),a=async()=>{!t.isOnline||t.isSyncing||await e()},c=async()=>{const l=await n();o(l),i(!0)};return t.isOnline&&t.pending===0&&t.conflicted===0?null:p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2",children:[p.jsx(Xi,{variant:t.isOnline?"default":"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:t.isOnline?p.jsxs(p.Fragment,{children:[t.isSyncing?p.jsx(qH,{className:"h-3 w-3 animate-spin"}):p.jsx(woe,{className:"h-3 w-3"}),t.pending>0&&p.jsxs("span",{children:["Syncing ",t.pending," items"]})]}):p.jsxs(p.Fragment,{children:[p.jsx(yoe,{className:"h-3 w-3"}),p.jsx("span",{children:"Offline"}),t.pending>0&&p.jsxs(p.Fragment,{children:[p.jsx(Ese,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.pending," pending"]})]})]})}),t.conflicted>0&&p.jsxs(Xi,{variant:"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:c,children:[p.jsx(jp,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.conflicted," conflicts"]})]})]}),p.jsx(t1e,{open:r,onOpenChange:i,conflicts:s})]})}function KMe(t,e){const[n,r]=g.useState(t);return g.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function r1e(){const t=g.useRef(Date.now()),e=g.useRef(0);g.useEffect(()=>{e.current+=1});const n=g.useCallback(i=>{const s=Date.now(),o=s-t.current;o>16&&console.warn(`${i} render time: ${o}ms (render #${e.current})`),t.current=s},[]),r=g.useCallback((i,s)=>{const o=performance.now();i();const a=performance.now();console.log(`${s} took ${a-o} milliseconds`)},[]);return{logRenderTime:n,measurePerformance:r,renderCount:e.current}}function i1e(){const[t,e]=g.useState({fps:0,memoryUsage:0,loadTime:0,renderTime:0}),[n,r]=g.useState(!1);if(r1e(),g.useEffect(()=>{let o=0,a=performance.now(),c;const l=()=>{o++;const u=performance.now();if(u>=a+1e3){const d=Math.round(o*1e3/(u-a));e(h=>{var m;return{...h,fps:d,loadTime:Math.round(performance.now()),memoryUsage:((m=performance.memory)==null?void 0:m.usedJSHeapSize)||0}}),o=0,a=u}c=requestAnimationFrame(l)};return n&&(c=requestAnimationFrame(l)),()=>{c&&cancelAnimationFrame(c)}},[n]),!n)return null;const i=o=>{if(o===0)return"0 Bytes";const a=1024,c=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(a));return parseFloat((o/Math.pow(a,l)).toFixed(2))+" "+c[l]},s=o=>o>=55?"bg-green-500":o>=45?"bg-yellow-500":"bg-red-500";return p.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:p.jsxs(ko,{className:"w-64 bg-background/90 backdrop-blur-sm border shadow-lg",children:[p.jsx(Zc,{className:"pb-2",children:p.jsx(el,{className:"text-sm font-medium",children:"Performance"})}),p.jsxs(Ea,{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS:"}),p.jsx(Xi,{variant:"outline",className:`${s(t.fps)} text-white border-none`,children:t.fps})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Memory:"}),p.jsx(Xi,{variant:"outline",children:i(t.memoryUsage)})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Load:"}),p.jsxs(Xi,{variant:"outline",children:[t.loadTime,"ms"]})]})]})]})})}const s1e=lQ,o1e=uQ,a1e=dQ,vQ=g.forwardRef(({className:t,...e},n)=>p.jsx(yE,{className:fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));vQ.displayName=yE.displayName;const c1e=Ng("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),wQ=g.forwardRef(({side:t="right",className:e,children:n,...r},i)=>p.jsxs(a1e,{children:[p.jsx(vQ,{}),p.jsxs(vE,{ref:i,className:fe(c1e({side:t}),e),...r,children:[n,p.jsxs(hQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(of,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wQ.displayName=vE.displayName;const _Q=({className:t,...e})=>p.jsx("div",{className:fe("flex flex-col space-y-2 text-center sm:text-left",t),...e});_Q.displayName="SheetHeader";const TQ=g.forwardRef(({className:t,...e},n)=>p.jsx(wE,{ref:n,className:fe("text-lg font-semibold text-foreground",t),...e}));TQ.displayName=wE.displayName;const CQ=g.forwardRef(({className:t,...e},n)=>p.jsx(_E,{ref:n,className:fe("text-sm text-muted-foreground",t),...e}));CQ.displayName=_E.displayName;function l1e({children:t}){const{isTimerRunning:e}=j7(),{isChatOpenMobile:n,state:r,setState:i}=JC(),s=xo(),o=Sf();return o?p.jsxs(s1e,{open:r==="expanded",onOpenChange:a=>i(a?"expanded":"collapsed"),children:[p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(Hj,{mobileTrigger:p.jsx(o1e,{asChild:!0,children:p.jsx(et,{variant:"ghost",size:"icon",className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:p.jsx(zH,{className:"h-4 w-4"})})})}),p.jsx("main",{className:fe("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0 h-full","pt-0",s.pathname==="/"&&"scrollbar-hide"),children:t})]}),p.jsxs(wQ,{side:"left",className:"w-64 p-0 border-r-0 flex flex-col",children:[p.jsxs(_Q,{className:"sr-only",children:[p.jsx(TQ,{children:"Main Navigation"}),p.jsx(CQ,{children:"Navigate through the main sections of the Taskly application."})]}),p.jsx(YK,{onLinkClick:()=>i("collapsed"),collapsed:!1})]})]}):p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(Hj,{}),p.jsx(n1e,{}),p.jsxs("div",{className:"flex flex-1 overflow-hidden items-start",children:[p.jsx(Nbe,{className:fe("hidden md:flex","transition-all duration-300",!o&&n&&"hidden lg:flex")}),p.jsx("main",{className:fe("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0 h-full","pt-0"),children:t})]}),p.jsx(jNe,{}),p.jsx(UNe,{}),p.jsx(i1e,{})]})}function u1e({children:t}){return p.jsx(RNe,{children:p.jsx(QK,{children:p.jsx(ebe,{children:p.jsx(l1e,{children:t})})})})}class EQ extends g.Component{constructor(){super(...arguments);Kt(this,"state",{hasError:!1});Kt(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:p.jsxs(ko,{className:"w-full max-w-md",children:[p.jsxs(Zc,{className:"text-center",children:[p.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center",children:p.jsx(jp,{className:"w-6 h-6 text-destructive"})}),p.jsx(el,{children:"Something went wrong"}),p.jsx(L1,{children:"We're sorry, but something unexpected happened. Please try again."})]}),p.jsxs(Ea,{className:"text-center space-y-4",children:[this.state.error&&p.jsxs("details",{className:"text-sm text-muted-foreground",children:[p.jsx("summary",{className:"cursor-pointer",children:"Error details"}),p.jsx("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-auto",children:this.state.error.message})]}),p.jsxs("div",{className:"flex gap-2 justify-center",children:[p.jsxs(et,{onClick:this.handleRetry,className:"gap-2",children:[p.jsx(qH,{className:"w-4 h-4"}),"Try Again"]}),p.jsx(et,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})]})}):this.props.children}}function d1e({size:t="default",className:e}){const n={sm:"w-4 h-4",default:"w-6 h-6",lg:"w-8 h-8"};return p.jsx("div",{className:fe("animate-spin rounded-full border-2 border-primary border-t-transparent",n[t],e)})}function SQ(){return p.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx(d1e,{size:"lg"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}var hy=t=>t.type==="checkbox",Kl=t=>t instanceof Date,Lr=t=>t==null;const bQ=t=>typeof t=="object";var Rn=t=>!Lr(t)&&!Array.isArray(t)&&bQ(t)&&!Kl(t),IQ=t=>Rn(t)&&t.target?hy(t.target)?t.target.checked:t.target.value:t,h1e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,AQ=(t,e)=>t.has(h1e(e)),f1e=t=>{const e=t.constructor&&t.constructor.prototype;return Rn(e)&&e.hasOwnProperty("isPrototypeOf")},B1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(B1&&(t instanceof Blob||r))&&(n||Rn(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!f1e(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Dn(t[i]));else return t;return e}var TE=t=>/^\w*$/.test(t),yn=t=>t===void 0,H1=t=>Array.isArray(t)?t.filter(Boolean):[],z1=t=>H1(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ge=(t,e,n)=>{if(!e||!Rn(t))return n;const r=(TE(e)?[e]:z1(e)).reduce((i,s)=>Lr(i)?i:i[s],t);return yn(r)||r===t?yn(t[e])?n:t[e]:r},Ci=t=>typeof t=="boolean",It=(t,e,n)=>{let r=-1;const i=TE(e)?[e]:z1(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=n;if(r!==o){const l=t[a];c=Rn(l)||Array.isArray(l)?l:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const nT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},_s={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},W1=Q.createContext(null);W1.displayName="HookFormContext";const CE=()=>Q.useContext(W1),p1e=t=>{const{children:e,...n}=t;return Q.createElement(W1.Provider,{value:n},e)};var kQ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==_s.all&&(e._proxyFormState[o]=!r||_s.all),n&&(n[o]=!0),t[o]}});return i};const K1=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function m1e(t){const e=CE(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Q.useState(n._formState),c=Q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return K1(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:l=>{!r&&a({...n._formState,...l})}}),[i,r,s]),Q.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Q.useMemo(()=>kQ(o,n,c.current,!1),[o,n])}var Si=t=>typeof t=="string",xQ=(t,e,n,r,i)=>Si(t)?(r&&e.watch.add(t),ge(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),ge(n,s))):(r&&(e.watchAll=!0),n),Fk=t=>Lr(t)||!bQ(t);function qo(t,e,n=new WeakSet){if(Fk(t)||Fk(e))return t===e;if(Kl(t)&&Kl(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Kl(o)&&Kl(a)||Rn(o)&&Rn(a)||Array.isArray(o)&&Array.isArray(a)?!qo(o,a,n):o!==a)return!1}}return!0}function g1e(t){const e=CE(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},c=Q.useRef(i),l=Q.useRef(a),u=Q.useRef(void 0);l.current=a;const d=Q.useMemo(()=>n._getWatch(r,c.current),[n,r]),[h,m]=Q.useState(l.current?l.current(d):d);return K1(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:w=>{if(!s){const y=xQ(r,n._names,w.values||n._formValues,!1,c.current);if(l.current){const _=l.current(y);qo(_,u.current)||(m(_),u.current=_)}else m(y)}}}),[n,s,r,o]),Q.useEffect(()=>n._removeUnmounted()),h}function y1e(t){const e=CE(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,a=AQ(i._names.array,n),c=Q.useMemo(()=>ge(i._formValues,n,ge(i._defaultValues,n,o)),[i,n,o]),l=g1e({control:i,name:n,defaultValue:c,exact:!0}),u=m1e({control:i,name:n,exact:!0}),d=Q.useRef(t),h=Q.useRef(void 0),m=Q.useRef(i.register(n,{...t.rules,value:l,...Ci(t.disabled)?{disabled:t.disabled}:{}}));d.current=t;const w=Q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ge(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!ge(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ge(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ge(u.validatingFields,n)},error:{enumerable:!0,get:()=>ge(u.errors,n)}}),[u,n]),y=Q.useCallback(C=>m.current.onChange({target:{value:IQ(C),name:n},type:nT.CHANGE}),[n]),_=Q.useCallback(()=>m.current.onBlur({target:{value:ge(i._formValues,n),name:n},type:nT.BLUR}),[n,i._formValues]),v=Q.useCallback(C=>{const I=ge(i._fields,n);I&&C&&(I._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:x=>C.setCustomValidity(x),reportValidity:()=>C.reportValidity()})},[i._fields,n]),T=Q.useMemo(()=>({name:n,value:l,...Ci(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:y,onBlur:_,ref:v}),[n,r,u.disabled,y,_,v,l]);return Q.useEffect(()=>{const C=i._options.shouldUnregister||s,I=h.current;I&&I!==n&&!a&&i.unregister(I),i.register(n,{...d.current.rules,...Ci(d.current.disabled)?{disabled:d.current.disabled}:{}});const x=(D,A)=>{const S=ge(i._fields,D);S&&S._f&&(S._f.mount=A)};if(x(n,!0),C){const D=Dn(ge(i._options.defaultValues,n,d.current.defaultValue));It(i._defaultValues,n,D),yn(ge(i._formValues,n))&&It(i._formValues,n,D)}return!a&&i.register(n),h.current=n,()=>{(a?C&&!i._state.action:C)?i.unregister(n):x(n,!1)}},[n,i,a,s]),Q.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Q.useMemo(()=>({field:T,formState:u,fieldState:w}),[T,u,w])}const v1e=t=>t.render(y1e(t));var RQ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},cm=t=>Array.isArray(t)?t:[t],qj=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function PQ(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Rn(i)&&s){const o=PQ(i,s);Rn(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Xr=t=>Rn(t)&&!Object.keys(t).length,q1=t=>t.type==="file",Ts=t=>typeof t=="function",rT=t=>{if(!B1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},NQ=t=>t.type==="select-multiple",G1=t=>t.type==="radio",w1e=t=>G1(t)||hy(t),xb=t=>rT(t)&&t.isConnected;function _1e(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yn(t)?r++:t[e[r++]];return t}function T1e(t){for(const e in t)if(t.hasOwnProperty(e)&&!yn(t[e]))return!1;return!0}function _n(t,e){const n=Array.isArray(e)?e:TE(e)?[e]:z1(e),r=n.length===1?t:_1e(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Rn(r)&&Xr(r)||Array.isArray(r)&&T1e(r))&&_n(t,n.slice(0,-1)),t}var C1e=t=>{for(const e in t)if(Ts(t[e]))return!0;return!1};function OQ(t){return Array.isArray(t)||Rn(t)&&!C1e(t)}function Vk(t,e={}){for(const n in t)OQ(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Vk(t[n],e[n])):Lr(t[n])||(e[n]=!0);return e}function pd(t,e,n){n||(n=Vk(e));for(const r in t)OQ(t[r])?yn(e)||Fk(n[r])?n[r]=Vk(t[r],Array.isArray(t[r])?[]:{}):pd(t[r],Lr(e)?{}:e[r],n[r]):n[r]=!qo(t[r],e[r]);return n}const Gj={value:!1,isValid:!1},Qj={value:!0,isValid:!0};var MQ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yn(t[0].attributes.value)?yn(t[0].value)||t[0].value===""?Qj:{value:t[0].value,isValid:!0}:Qj:Gj}return Gj},DQ=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yn(t)?t:e?t===""?NaN:t&&+t:n&&Si(t)?new Date(t):r?r(t):t;const Yj={isValid:!1,value:null};var LQ=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Yj):Yj;function Xj(t){const e=t.ref;return q1(e)?e.files:G1(e)?LQ(t.refs).value:NQ(e)?[...e.selectedOptions].map(({value:n})=>n):hy(e)?MQ(t.refs).value:DQ(yn(e.value)?t.ref.value:e.value,t)}var E1e=(t,e,n,r)=>{const i={};for(const s of t){const o=ge(e,s);o&&It(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},iT=t=>t instanceof RegExp,sp=t=>yn(t)?t:iT(t)?t.source:Rn(t)?iT(t.value)?t.value.source:t.value:t,Jj=t=>({isOnSubmit:!t||t===_s.onSubmit,isOnBlur:t===_s.onBlur,isOnChange:t===_s.onChange,isOnAll:t===_s.all,isOnTouch:t===_s.onTouched});const Zj="AsyncFunction";var S1e=t=>!!t&&!!t.validate&&!!(Ts(t.validate)&&t.validate.constructor.name===Zj||Rn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Zj)),b1e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),eU=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const lm=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=ge(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(lm(a,e))break}else if(Rn(a)&&lm(a,e))break}}};function tU(t,e,n){const r=ge(t,n);if(r||TE(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=ge(e,s),a=ge(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var I1e=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Xr(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||_s.all))},A1e=(t,e,n)=>!t||!e||t===e||cm(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),k1e=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,x1e=(t,e)=>!H1(ge(t,e)).length&&_n(t,e),R1e=(t,e,n)=>{const r=cm(ge(t,n));return It(r,"root",e[n]),It(t,n,r),t};function nU(t,e,n="validate"){if(Si(t)||Array.isArray(t)&&t.every(Si)||Ci(t)&&!t)return{type:n,message:Si(t)?t:"",ref:e}}var id=t=>Rn(t)&&!iT(t)?t:{value:t,message:""},rU=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:l,minLength:u,min:d,max:h,pattern:m,validate:w,name:y,valueAsNumber:_,mount:v}=t._f,T=ge(n,y);if(!v||e.has(y))return{};const C=a?a[0]:o,I=O=>{i&&C.reportValidity&&(C.setCustomValidity(Ci(O)?"":O||""),C.reportValidity())},x={},D=G1(o),A=hy(o),S=D||A,k=(_||q1(o))&&yn(o.value)&&yn(T)||rT(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,N=RQ.bind(null,y,r,x),R=(O,P,$,H=Fo.maxLength,X=Fo.minLength)=>{const se=O?P:$;x[y]={type:O?H:X,message:se,ref:o,...N(O?H:X,se)}};if(s?!Array.isArray(T)||!T.length:c&&(!S&&(k||Lr(T))||Ci(T)&&!T||A&&!MQ(a).isValid||D&&!LQ(a).isValid)){const{value:O,message:P}=Si(c)?{value:!!c,message:c}:id(c);if(O&&(x[y]={type:Fo.required,message:P,ref:C,...N(Fo.required,P)},!r))return I(P),x}if(!k&&(!Lr(d)||!Lr(h))){let O,P;const $=id(h),H=id(d);if(!Lr(T)&&!isNaN(T)){const X=o.valueAsNumber||T&&+T;Lr($.value)||(O=X>$.value),Lr(H.value)||(P=X<H.value)}else{const X=o.valueAsDate||new Date(T),se=ie=>new Date(new Date().toDateString()+" "+ie),V=o.type=="time",j=o.type=="week";Si($.value)&&T&&(O=V?se(T)>se($.value):j?T>$.value:X>new Date($.value)),Si(H.value)&&T&&(P=V?se(T)<se(H.value):j?T<H.value:X<new Date(H.value))}if((O||P)&&(R(!!O,$.message,H.message,Fo.max,Fo.min),!r))return I(x[y].message),x}if((l||u)&&!k&&(Si(T)||s&&Array.isArray(T))){const O=id(l),P=id(u),$=!Lr(O.value)&&T.length>+O.value,H=!Lr(P.value)&&T.length<+P.value;if(($||H)&&(R($,O.message,P.message),!r))return I(x[y].message),x}if(m&&!k&&Si(T)){const{value:O,message:P}=id(m);if(iT(O)&&!T.match(O)&&(x[y]={type:Fo.pattern,message:P,ref:o,...N(Fo.pattern,P)},!r))return I(P),x}if(w){if(Ts(w)){const O=await w(T,n),P=nU(O,C);if(P&&(x[y]={...P,...N(Fo.validate,P.message)},!r))return I(P.message),x}else if(Rn(w)){let O={};for(const P in w){if(!Xr(O)&&!r)break;const $=nU(await w[P](T,n),C,P);$&&(O={...$,...N(P,$.message)},I($.message),r&&(x[y]=O))}if(!Xr(O)&&(x[y]={ref:C,...O},!r))return x}}return I(!0),x};const P1e={mode:_s.onSubmit,reValidateMode:_s.onChange,shouldFocusError:!0};function N1e(t={}){let e={...P1e,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ts(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Rn(e.defaultValues)||Rn(e.values)?Dn(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Dn(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const h={array:qj(),state:qj()},m=e.criteriaMode===_s.all,w=L=>U=>{clearTimeout(l),l=setTimeout(L,U)},y=async L=>{if(!e.disabled&&(u.isValid||d.isValid||L)){const U=e.resolver?Xr((await A()).errors):await k(r,!0);U!==n.isValid&&h.state.next({isValid:U})}},_=(L,U)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((L||Array.from(a.mount)).forEach(K=>{K&&(U?It(n.validatingFields,K,U):_n(n.validatingFields,K))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Xr(n.validatingFields)}))},v=(L,U=[],K,de,le=!0,oe=!0)=>{if(de&&K&&!e.disabled){if(o.action=!0,oe&&Array.isArray(ge(r,L))){const me=K(ge(r,L),de.argA,de.argB);le&&It(r,L,me)}if(oe&&Array.isArray(ge(n.errors,L))){const me=K(ge(n.errors,L),de.argA,de.argB);le&&It(n.errors,L,me),x1e(n.errors,L)}if((u.touchedFields||d.touchedFields)&&oe&&Array.isArray(ge(n.touchedFields,L))){const me=K(ge(n.touchedFields,L),de.argA,de.argB);le&&It(n.touchedFields,L,me)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=pd(i,s)),h.state.next({name:L,isDirty:R(L,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else It(s,L,U)},T=(L,U)=>{It(n.errors,L,U),h.state.next({errors:n.errors})},C=L=>{n.errors=L,h.state.next({errors:n.errors,isValid:!1})},I=(L,U,K,de)=>{const le=ge(r,L);if(le){const oe=ge(s,L,yn(K)?ge(i,L):K);yn(oe)||de&&de.defaultChecked||U?It(s,L,U?oe:Xj(le._f)):$(L,oe),o.mount&&y()}},x=(L,U,K,de,le)=>{let oe=!1,me=!1;const We={name:L};if(!e.disabled){if(!K||de){(u.isDirty||d.isDirty)&&(me=n.isDirty,n.isDirty=We.isDirty=R(),oe=me!==We.isDirty);const ft=qo(ge(i,L),U);me=!!ge(n.dirtyFields,L),ft?_n(n.dirtyFields,L):It(n.dirtyFields,L,!0),We.dirtyFields=n.dirtyFields,oe=oe||(u.dirtyFields||d.dirtyFields)&&me!==!ft}if(K){const ft=ge(n.touchedFields,L);ft||(It(n.touchedFields,L,K),We.touchedFields=n.touchedFields,oe=oe||(u.touchedFields||d.touchedFields)&&ft!==K)}oe&&le&&h.state.next(We)}return oe?We:{}},D=(L,U,K,de)=>{const le=ge(n.errors,L),oe=(u.isValid||d.isValid)&&Ci(U)&&n.isValid!==U;if(e.delayError&&K?(c=w(()=>T(L,K)),c(e.delayError)):(clearTimeout(l),c=null,K?It(n.errors,L,K):_n(n.errors,L)),(K?!qo(le,K):le)||!Xr(de)||oe){const me={...de,...oe&&Ci(U)?{isValid:U}:{},errors:n.errors,name:L};n={...n,...me},h.state.next(me)}},A=async L=>{_(L,!0);const U=await e.resolver(s,e.context,E1e(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(L),U},S=async L=>{const{errors:U}=await A(L);if(L)for(const K of L){const de=ge(U,K);de?It(n.errors,K,de):_n(n.errors,K)}else n.errors=U;return U},k=async(L,U,K={valid:!0})=>{for(const de in L){const le=L[de];if(le){const{_f:oe,...me}=le;if(oe){const We=a.array.has(oe.name),ft=le._f&&S1e(le._f);ft&&u.validatingFields&&_([oe.name],!0);const Nn=await rU(le,a.disabled,s,m,e.shouldUseNativeValidation&&!U,We);if(ft&&u.validatingFields&&_([oe.name]),Nn[oe.name]&&(K.valid=!1,U))break;!U&&(ge(Nn,oe.name)?We?R1e(n.errors,Nn,oe.name):It(n.errors,oe.name,Nn[oe.name]):_n(n.errors,oe.name))}!Xr(me)&&await k(me,U,K)}}return K.valid},N=()=>{for(const L of a.unMount){const U=ge(r,L);U&&(U._f.refs?U._f.refs.every(K=>!xb(K)):!xb(U._f.ref))&&ne(L)}a.unMount=new Set},R=(L,U)=>!e.disabled&&(L&&U&&It(s,L,U),!qo(ie(),i)),O=(L,U,K)=>xQ(L,a,{...o.mount?s:yn(U)?i:Si(L)?{[L]:U}:U},K,U),P=L=>H1(ge(o.mount?s:i,L,e.shouldUnregister?ge(i,L,[]):[])),$=(L,U,K={})=>{const de=ge(r,L);let le=U;if(de){const oe=de._f;oe&&(!oe.disabled&&It(s,L,DQ(U,oe)),le=rT(oe.ref)&&Lr(U)?"":U,NQ(oe.ref)?[...oe.ref.options].forEach(me=>me.selected=le.includes(me.value)):oe.refs?hy(oe.ref)?oe.refs.forEach(me=>{(!me.defaultChecked||!me.disabled)&&(Array.isArray(le)?me.checked=!!le.find(We=>We===me.value):me.checked=le===me.value||!!le)}):oe.refs.forEach(me=>me.checked=me.value===le):q1(oe.ref)?oe.ref.value="":(oe.ref.value=le,oe.ref.type||h.state.next({name:L,values:Dn(s)})))}(K.shouldDirty||K.shouldTouch)&&x(L,le,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&j(L)},H=(L,U,K)=>{for(const de in U){if(!U.hasOwnProperty(de))return;const le=U[de],oe=L+"."+de,me=ge(r,oe);(a.array.has(L)||Rn(le)||me&&!me._f)&&!Kl(le)?H(oe,le,K):$(oe,le,K)}},X=(L,U,K={})=>{const de=ge(r,L),le=a.array.has(L),oe=Dn(U);It(s,L,oe),le?(h.array.next({name:L,values:Dn(s)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&K.shouldDirty&&h.state.next({name:L,dirtyFields:pd(i,s),isDirty:R(L,oe)})):de&&!de._f&&!Lr(oe)?H(L,oe,K):$(L,oe,K),eU(L,a)&&h.state.next({...n,name:L}),h.state.next({name:o.mount?L:void 0,values:Dn(s)})},se=async L=>{o.mount=!0;const U=L.target;let K=U.name,de=!0;const le=ge(r,K),oe=ft=>{de=Number.isNaN(ft)||Kl(ft)&&isNaN(ft.getTime())||qo(ft,ge(s,K,ft))},me=Jj(e.mode),We=Jj(e.reValidateMode);if(le){let ft,Nn;const gi=U.type?Xj(le._f):IQ(L),Rr=L.type===nT.BLUR||L.type===nT.FOCUS_OUT,Oo=!b1e(le._f)&&!e.resolver&&!ge(n.errors,K)&&!le._f.deps||k1e(Rr,ge(n.touchedFields,K),n.isSubmitted,We,me),pn=eU(K,a,Rr);It(s,K,gi),Rr?(!U||!U.readOnly)&&(le._f.onBlur&&le._f.onBlur(L),c&&c(0)):le._f.onChange&&le._f.onChange(L);const Hn=x(K,gi,Rr),Us=!Xr(Hn)||pn;if(!Rr&&h.state.next({name:K,type:L.type,values:Dn(s)}),Oo)return(u.isValid||d.isValid)&&(e.mode==="onBlur"?Rr&&y():Rr||y()),Us&&h.state.next({name:K,...pn?{}:Hn});if(!Rr&&pn&&h.state.next({...n}),e.resolver){const{errors:nr}=await A([K]);if(oe(gi),de){const Gu=tU(n.errors,r,K),Mo=tU(nr,r,Gu.name||K);ft=Mo.error,K=Mo.name,Nn=Xr(nr)}}else _([K],!0),ft=(await rU(le,a.disabled,s,m,e.shouldUseNativeValidation))[K],_([K]),oe(gi),de&&(ft?Nn=!1:(u.isValid||d.isValid)&&(Nn=await k(r,!0)));de&&(le._f.deps&&(!Array.isArray(le._f.deps)||le._f.deps.length>0)&&j(le._f.deps),D(K,Nn,ft,Hn))}},V=(L,U)=>{if(ge(n.errors,U)&&L.focus)return L.focus(),1},j=async(L,U={})=>{let K,de;const le=cm(L);if(e.resolver){const oe=await S(yn(L)?L:le);K=Xr(oe),de=L?!le.some(me=>ge(oe,me)):K}else L?(de=(await Promise.all(le.map(async oe=>{const me=ge(r,oe);return await k(me&&me._f?{[oe]:me}:me)}))).every(Boolean),!(!de&&!n.isValid)&&y()):de=K=await k(r);return h.state.next({...!Si(L)||(u.isValid||d.isValid)&&K!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:K}:{},errors:n.errors}),U.shouldFocus&&!de&&lm(r,V,L?le:a.mount),de},ie=(L,U)=>{let K={...o.mount?s:i};return U&&(K=PQ(U.dirtyFields?n.dirtyFields:n.touchedFields,K)),yn(L)?K:Si(L)?ge(K,L):L.map(de=>ge(K,de))},Te=(L,U)=>({invalid:!!ge((U||n).errors,L),isDirty:!!ge((U||n).dirtyFields,L),error:ge((U||n).errors,L),isValidating:!!ge(n.validatingFields,L),isTouched:!!ge((U||n).touchedFields,L)}),ve=L=>{L&&cm(L).forEach(U=>_n(n.errors,U)),h.state.next({errors:L?n.errors:{}})},z=(L,U,K)=>{const de=(ge(r,L,{_f:{}})._f||{}).ref,le=ge(n.errors,L)||{},{ref:oe,message:me,type:We,...ft}=le;It(n.errors,L,{...ft,...U,ref:de}),h.state.next({name:L,errors:n.errors,isValid:!1}),K&&K.shouldFocus&&de&&de.focus&&de.focus()},J=(L,U)=>Ts(L)?h.state.subscribe({next:K=>"values"in K&&L(O(void 0,U),K)}):O(L,U,!0),G=L=>h.state.subscribe({next:U=>{A1e(L.name,U.name,L.exact)&&I1e(U,L.formState||u,nn,L.reRenderRoot)&&L.callback({values:{...s},...n,...U,defaultValues:i})}}).unsubscribe,q=L=>(o.mount=!0,d={...d,...L.formState},G({...L,formState:d})),ne=(L,U={})=>{for(const K of L?cm(L):a.mount)a.mount.delete(K),a.array.delete(K),U.keepValue||(_n(r,K),_n(s,K)),!U.keepError&&_n(n.errors,K),!U.keepDirty&&_n(n.dirtyFields,K),!U.keepTouched&&_n(n.touchedFields,K),!U.keepIsValidating&&_n(n.validatingFields,K),!e.shouldUnregister&&!U.keepDefaultValue&&_n(i,K);h.state.next({values:Dn(s)}),h.state.next({...n,...U.keepDirty?{isDirty:R()}:{}}),!U.keepIsValid&&y()},Ce=({disabled:L,name:U})=>{(Ci(L)&&o.mount||L||a.disabled.has(U))&&(L?a.disabled.add(U):a.disabled.delete(U))},Ne=(L,U={})=>{let K=ge(r,L);const de=Ci(U.disabled)||Ci(e.disabled);return It(r,L,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:L}},name:L,mount:!0,...U}}),a.mount.add(L),K?Ce({disabled:Ci(U.disabled)?U.disabled:e.disabled,name:L}):I(L,!0,U.value),{...de?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:sp(U.min),max:sp(U.max),minLength:sp(U.minLength),maxLength:sp(U.maxLength),pattern:sp(U.pattern)}:{},name:L,onChange:se,onBlur:se,ref:le=>{if(le){Ne(L,U),K=ge(r,L);const oe=yn(le.value)&&le.querySelectorAll&&le.querySelectorAll("input,select,textarea")[0]||le,me=w1e(oe),We=K._f.refs||[];if(me?We.find(ft=>ft===oe):oe===K._f.ref)return;It(r,L,{_f:{...K._f,...me?{refs:[...We.filter(xb),oe,...Array.isArray(ge(i,L))?[{}]:[]],ref:{type:oe.type,name:L}}:{ref:oe}}}),I(L,!1,void 0,oe)}else K=ge(r,L,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(AQ(a.array,L)&&o.action)&&a.unMount.add(L)}}},Le=()=>e.shouldFocusError&&lm(r,V,a.mount),Me=L=>{Ci(L)&&(h.state.next({disabled:L}),lm(r,(U,K)=>{const de=ge(r,K);de&&(U.disabled=de._f.disabled||L,Array.isArray(de._f.refs)&&de._f.refs.forEach(le=>{le.disabled=de._f.disabled||L}))},0,!1))},Ze=(L,U)=>async K=>{let de;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let le=Dn(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:oe,values:me}=await A();n.errors=oe,le=Dn(me)}else await k(r);if(a.disabled.size)for(const oe of a.disabled)_n(le,oe);if(_n(n.errors,"root"),Xr(n.errors)){h.state.next({errors:{}});try{await L(le,K)}catch(oe){de=oe}}else U&&await U({...n.errors},K),Le(),setTimeout(Le);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xr(n.errors)&&!de,submitCount:n.submitCount+1,errors:n.errors}),de)throw de},yt=(L,U={})=>{ge(r,L)&&(yn(U.defaultValue)?X(L,Dn(ge(i,L))):(X(L,U.defaultValue),It(i,L,Dn(U.defaultValue))),U.keepTouched||_n(n.touchedFields,L),U.keepDirty||(_n(n.dirtyFields,L),n.isDirty=U.defaultValue?R(L,Dn(ge(i,L))):R()),U.keepError||(_n(n.errors,L),u.isValid&&y()),h.state.next({...n}))},Re=(L,U={})=>{const K=L?Dn(L):i,de=Dn(K),le=Xr(L),oe=le?i:de;if(U.keepDefaultValues||(i=K),!U.keepValues){if(U.keepDirtyValues){const me=new Set([...a.mount,...Object.keys(pd(i,s))]);for(const We of Array.from(me))ge(n.dirtyFields,We)?It(oe,We,ge(s,We)):X(We,ge(oe,We))}else{if(B1&&yn(L))for(const me of a.mount){const We=ge(r,me);if(We&&We._f){const ft=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(rT(ft)){const Nn=ft.closest("form");if(Nn){Nn.reset();break}}}}if(U.keepFieldsRef)for(const me of a.mount)X(me,ge(oe,me));else r={}}s=e.shouldUnregister?U.keepDefaultValues?Dn(i):{}:Dn(oe),h.array.next({values:{...oe}}),h.state.next({values:{...oe}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:le?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!qo(L,i)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:le?{}:U.keepDirtyValues?U.keepDefaultValues&&s?pd(i,s):n.dirtyFields:U.keepDefaultValues&&L?pd(i,L):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Pe=(L,U)=>Re(Ts(L)?L(s):L,U),ht=(L,U={})=>{const K=ge(r,L),de=K&&K._f;if(de){const le=de.refs?de.refs[0]:de.ref;le.focus&&(le.focus(),U.shouldSelect&&Ts(le.select)&&le.select())}},nn=L=>{n={...n,...L}},Ve={control:{register:Ne,unregister:ne,getFieldState:Te,handleSubmit:Ze,setError:z,_subscribe:G,_runSchema:A,_focusError:Le,_getWatch:O,_getDirty:R,_setValid:y,_setFieldArray:v,_setDisabledField:Ce,_setErrors:C,_getFieldArray:P,_reset:Re,_resetDefaultValues:()=>Ts(e.defaultValues)&&e.defaultValues().then(L=>{Pe(L,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:N,_disableForm:Me,_subjects:h,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return a},set _names(L){a=L},get _formState(){return n},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:q,trigger:j,register:Ne,handleSubmit:Ze,watch:J,setValue:X,getValues:ie,reset:Pe,resetField:yt,clearErrors:ve,unregister:ne,setError:z,setFocus:ht,getFieldState:Te};return{...Ve,formControl:Ve}}function mg(t={}){const e=Q.useRef(void 0),n=Q.useRef(void 0),[r,i]=Q.useState({isDirty:!1,isValidating:!1,isLoading:Ts(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ts(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ts(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=N1e(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,K1(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Q.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Q.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Q.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Q.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Q.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Q.useEffect(()=>{t.values&&!qo(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Q.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=kQ(r,s),e.current}const iU=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ge(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},FQ=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?iU(r.ref,n,t):r.refs&&r.refs.forEach(i=>iU(i,n,t))}},O1e=(t,e)=>{e.shouldUseNativeValidation&&FQ(t,e);const n={};for(const r in t){const i=ge(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(M1e(e.names||Object.keys(t),r)){const o=Object.assign({},ge(n,r));It(o,"root",s),It(n,r,o)}else It(n,r,s)}return n},M1e=(t,e)=>t.some(n=>n.startsWith(e+"."));var D1e=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var c=n[o].types,l=c&&c[r.code];n[o]=RQ(o,e,n,i,l?[].concat(l,r.message):r.message)}t.shift()}return n},gg=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(l){return s.shouldUseNativeValidation&&FQ({},s),{errors:{},values:n.raw?r:l}})}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:O1e(D1e(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},Tt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Tt||(Tt={}));var sU;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(sU||(sU={}));const ke=Tt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qa=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return Number.isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},he=Tt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Sa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}static assert(e){if(!(e instanceof Sa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Tt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Sa.create=t=>new Sa(t);const jk=(t,e)=>{let n;switch(t.code){case he.invalid_type:t.received===ke.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case he.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Tt.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:n=`Unrecognized key(s) in object: ${Tt.joinValues(t.keys,", ")}`;break;case he.invalid_union:n="Invalid input";break;case he.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Tt.joinValues(t.options)}`;break;case he.invalid_enum_value:n=`Invalid enum value. Expected ${Tt.joinValues(t.options)}, received '${t.received}'`;break;case he.invalid_arguments:n="Invalid function arguments";break;case he.invalid_return_type:n="Invalid function return type";break;case he.invalid_date:n="Invalid date";break;case he.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Tt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case he.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case he.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case he.custom:n="Invalid input";break;case he.invalid_intersection_types:n="Intersection results could not be merged";break;case he.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case he.not_finite:n="Number must be finite";break;default:n=e.defaultError,Tt.assertNever(t)}return{message:n}};let L1e=jk;function F1e(){return L1e}const V1e=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function Ee(t,e){const n=F1e(),r=V1e({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===jk?void 0:jk].filter(i=>!!i)});t.common.issues.push(r)}class Mi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Ye;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Mi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Ye;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Ye=Object.freeze({status:"aborted"}),Cp=t=>({status:"dirty",value:t}),os=t=>({status:"valid",value:t}),oU=t=>t.status==="aborted",aU=t=>t.status==="dirty",Hh=t=>t.status==="valid",sT=t=>typeof Promise<"u"&&t instanceof Promise;var xe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(xe||(xe={}));class tl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cU=(t,e)=>{if(Hh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Sa(t.common.issues);return this._error=n,this._error}}};function at(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}class wt{get description(){return this._def.description}_getType(e){return Qa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Qa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mi,ctx:{common:e.parent.common,data:e.data,parsedType:Qa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(sT(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qa(e)},i=this._parseSync({data:e,path:r.path,parent:r});return cU(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Hh(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Hh(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(sT(i)?i:Promise.resolve(i));return cU(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:he.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Kh({schema:this,typeName:Xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Lc.create(this,this._def)}nullable(){return qh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Co.create(this)}promise(){return lT.create(this,this._def)}or(e){return aT.create([this,e],this._def)}and(e){return cT.create(this,e,this._def)}transform(e){return new Kh({...at(this._def),schema:this,typeName:Xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new $k({...at(this._def),innerType:this,defaultValue:n,typeName:Xe.ZodDefault})}brand(){return new aOe({typeName:Xe.ZodBranded,type:this,...at(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Bk({...at(this._def),innerType:this,catchValue:n,typeName:Xe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Q1.create(this,e)}readonly(){return Hk.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const j1e=/^c[^\s-]{8,}$/i,U1e=/^[0-9a-z]+$/,$1e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,B1e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H1e=/^[a-z0-9_-]{21}$/i,z1e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,W1e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K1e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,q1e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Rb;const G1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Q1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Y1e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,X1e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,J1e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Z1e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,VQ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eOe=new RegExp(`^${VQ}$`);function jQ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function tOe(t){return new RegExp(`^${jQ(t)}$`)}function nOe(t){let e=`${VQ}T${jQ(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function rOe(t,e){return!!((e==="v4"||!e)&&G1e.test(t)||(e==="v6"||!e)&&Y1e.test(t))}function iOe(t,e){if(!z1e.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function sOe(t,e){return!!((e==="v4"||!e)&&Q1e.test(t)||(e==="v6"||!e)&&X1e.test(t))}class ea extends wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const s=this._getOrReturnCtx(e);return Ee(s,{code:he.invalid_type,expected:ke.string,received:s.parsedType}),Ye}const r=new Mi;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Ee(i,{code:he.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ee(i,{code:he.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")K1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"email",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Rb||(Rb=new RegExp(q1e,"u")),Rb.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"emoji",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")B1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"uuid",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")H1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"nanoid",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")j1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"cuid",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")U1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"cuid2",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")$1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"ulid",code:he.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ee(i,{validation:"url",code:he.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"regex",code:he.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?nOe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?eOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?tOe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?W1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"duration",code:he.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?rOe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"ip",code:he.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?iOe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"jwt",code:he.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?sOe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"cidr",code:he.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?J1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"base64",code:he.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?Z1e.test(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{validation:"base64url",code:he.invalid_string,message:s.message}),r.dirty()):Tt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:he.invalid_string,...xe.errToObj(r)})}_addCheck(e){return new ea({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...xe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...xe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...xe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...xe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...xe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...xe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...xe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...xe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...xe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...xe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...xe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...xe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...xe.errToObj(n)})}nonempty(e){return this.min(1,xe.errToObj(e))}trim(){return new ea({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ea({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ea({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ea.create=t=>new ea({checks:[],typeName:Xe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...at(t)});function oOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class Nu extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const s=this._getOrReturnCtx(e);return Ee(s,{code:he.invalid_type,expected:ke.number,received:s.parsedType}),Ye}let r;const i=new Mi;for(const s of this._def.checks)s.kind==="int"?Tt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?oOe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.not_finite,message:s.message}),i.dirty()):Tt.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,xe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,xe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,xe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,xe.toString(n))}setLimit(e,n,r,i){return new Nu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:xe.toString(i)}]})}_addCheck(e){return new Nu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:xe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:xe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Tt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Nu.create=t=>new Nu({checks:[],typeName:Xe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...at(t)});class Ou extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ke.bigint)return this._getInvalidInput(e);let r;const i=new Mi;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:he.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Tt.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:he.invalid_type,expected:ke.bigint,received:n.parsedType}),Ye}gte(e,n){return this.setLimit("min",e,!0,xe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,xe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,xe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,xe.toString(n))}setLimit(e,n,r,i){return new Ou({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:xe.toString(i)}]})}_addCheck(e){return new Ou({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:xe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ou.create=t=>new Ou({checks:[],typeName:Xe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...at(t)});class oT extends wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:ke.boolean,received:r.parsedType}),Ye}return os(e.data)}}oT.create=t=>new oT({typeName:Xe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...at(t)});class zh extends wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const s=this._getOrReturnCtx(e);return Ee(s,{code:he.invalid_type,expected:ke.date,received:s.parsedType}),Ye}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ee(s,{code:he.invalid_date}),Ye}const r=new Mi;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:he.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Tt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:xe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:xe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zh.create=t=>new zh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Xe.ZodDate,...at(t)});class lU extends wt{_parse(e){if(this._getType(e)!==ke.symbol){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:ke.symbol,received:r.parsedType}),Ye}return os(e.data)}}lU.create=t=>new lU({typeName:Xe.ZodSymbol,...at(t)});class uU extends wt{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:ke.undefined,received:r.parsedType}),Ye}return os(e.data)}}uU.create=t=>new uU({typeName:Xe.ZodUndefined,...at(t)});class dU extends wt{_parse(e){if(this._getType(e)!==ke.null){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:ke.null,received:r.parsedType}),Ye}return os(e.data)}}dU.create=t=>new dU({typeName:Xe.ZodNull,...at(t)});class hU extends wt{constructor(){super(...arguments),this._any=!0}_parse(e){return os(e.data)}}hU.create=t=>new hU({typeName:Xe.ZodAny,...at(t)});class fU extends wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return os(e.data)}}fU.create=t=>new fU({typeName:Xe.ZodUnknown,...at(t)});class nl extends wt{_parse(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:he.invalid_type,expected:ke.never,received:n.parsedType}),Ye}}nl.create=t=>new nl({typeName:Xe.ZodNever,...at(t)});class pU extends wt{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:ke.void,received:r.parsedType}),Ye}return os(e.data)}}pU.create=t=>new pU({typeName:Xe.ZodVoid,...at(t)});class Co extends wt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ke.array)return Ee(n,{code:he.invalid_type,expected:ke.array,received:n.parsedType}),Ye;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Ee(n,{code:o?he.too_big:he.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ee(n,{code:he.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ee(n,{code:he.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new tl(n,o,n.path,a)))).then(o=>Mi.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new tl(n,o,n.path,a)));return Mi.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Co({...this._def,minLength:{value:e,message:xe.toString(n)}})}max(e,n){return new Co({...this._def,maxLength:{value:e,message:xe.toString(n)}})}length(e,n){return new Co({...this._def,exactLength:{value:e,message:xe.toString(n)}})}nonempty(e){return this.min(1,e)}}Co.create=(t,e)=>new Co({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Xe.ZodArray,...at(e)});function md(t){if(t instanceof Sn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Lc.create(md(r))}return new Sn({...t._def,shape:()=>e})}else return t instanceof Co?new Co({...t._def,type:md(t.element)}):t instanceof Lc?Lc.create(md(t.unwrap())):t instanceof qh?qh.create(md(t.unwrap())):t instanceof Mu?Mu.create(t.items.map(e=>md(e))):t}class Sn extends wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Tt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ke.object){const l=this._getOrReturnCtx(e);return Ee(l,{code:he.invalid_type,expected:ke.object,received:l.parsedType}),Ye}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof nl&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],d=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new tl(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof nl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Ee(i,{code:he.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new tl(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,h=await u.value;l.push({key:d,value:h,alwaysSet:u.alwaysSet})}return l}).then(l=>Mi.mergeObjectSync(r,l)):Mi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return xe.errToObj,new Sn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:xe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Sn({...this._def,unknownKeys:"strip"})}passthrough(){return new Sn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Sn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Sn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Xe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Sn({...this._def,catchall:e})}pick(e){const n={};for(const r of Tt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Sn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Tt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Sn({...this._def,shape:()=>n})}deepPartial(){return md(this)}partial(e){const n={};for(const r of Tt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Sn({...this._def,shape:()=>n})}required(e){const n={};for(const r of Tt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Lc;)s=s._def.innerType;n[r]=s}return new Sn({...this._def,shape:()=>n})}keyof(){return UQ(Tt.objectKeys(this.shape))}}Sn.create=(t,e)=>new Sn({shape:()=>t,unknownKeys:"strip",catchall:nl.create(),typeName:Xe.ZodObject,...at(e)});Sn.strictCreate=(t,e)=>new Sn({shape:()=>t,unknownKeys:"strict",catchall:nl.create(),typeName:Xe.ZodObject,...at(e)});Sn.lazycreate=(t,e)=>new Sn({shape:t,unknownKeys:"strip",catchall:nl.create(),typeName:Xe.ZodObject,...at(e)});class aT extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Sa(a.ctx.common.issues));return Ee(n,{code:he.invalid_union,unionErrors:o}),Ye}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Sa(c));return Ee(n,{code:he.invalid_union,unionErrors:a}),Ye}}get options(){return this._def.options}}aT.create=(t,e)=>new aT({options:t,typeName:Xe.ZodUnion,...at(e)});function Uk(t,e){const n=Qa(t),r=Qa(e);if(t===e)return{valid:!0,data:t};if(n===ke.object&&r===ke.object){const i=Tt.objectKeys(e),s=Tt.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=Uk(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ke.array&&r===ke.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=Uk(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===ke.date&&r===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class cT extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(oU(s)||oU(o))return Ye;const a=Uk(s.value,o.value);return a.valid?((aU(s)||aU(o))&&n.dirty(),{status:n.value,value:a.data}):(Ee(r,{code:he.invalid_intersection_types}),Ye)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}cT.create=(t,e,n)=>new cT({left:t,right:e,typeName:Xe.ZodIntersection,...at(n)});class Mu extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.array)return Ee(r,{code:he.invalid_type,expected:ke.array,received:r.parsedType}),Ye;if(r.data.length<this._def.items.length)return Ee(r,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ye;!this._def.rest&&r.data.length>this._def.items.length&&(Ee(r,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new tl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Mi.mergeArray(n,o)):Mi.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Mu({...this._def,rest:e})}}Mu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Mu({items:t,typeName:Xe.ZodTuple,rest:null,...at(e)})};class mU extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.map)return Ee(r,{code:he.invalid_type,expected:ke.map,received:r.parsedType}),Ye;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new tl(r,a,r.path,[l,"key"])),value:s._parse(new tl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Ye;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Ye;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}mU.create=(t,e,n)=>new mU({valueType:e,keyType:t,typeName:Xe.ZodMap,...at(n)});class yg extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.set)return Ee(r,{code:he.invalid_type,expected:ke.set,received:r.parsedType}),Ye;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ee(r,{code:he.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ee(r,{code:he.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Ye;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new tl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new yg({...this._def,minSize:{value:e,message:xe.toString(n)}})}max(e,n){return new yg({...this._def,maxSize:{value:e,message:xe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yg.create=(t,e)=>new yg({valueType:t,minSize:null,maxSize:null,typeName:Xe.ZodSet,...at(e)});class gU extends wt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}gU.create=(t,e)=>new gU({getter:t,typeName:Xe.ZodLazy,...at(e)});class yU extends wt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ee(n,{received:n.data,code:he.invalid_literal,expected:this._def.value}),Ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}yU.create=(t,e)=>new yU({value:t,typeName:Xe.ZodLiteral,...at(e)});function UQ(t,e){return new Wh({values:t,typeName:Xe.ZodEnum,...at(e)})}class Wh extends wt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{expected:Tt.joinValues(r),received:n.parsedType,code:he.invalid_type}),Ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{received:n.data,code:he.invalid_enum_value,options:r}),Ye}return os(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Wh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Wh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Wh.create=UQ;class vU extends wt{_parse(e){const n=Tt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ke.string&&r.parsedType!==ke.number){const i=Tt.objectValues(n);return Ee(r,{expected:Tt.joinValues(i),received:r.parsedType,code:he.invalid_type}),Ye}if(this._cache||(this._cache=new Set(Tt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Tt.objectValues(n);return Ee(r,{received:r.data,code:he.invalid_enum_value,options:i}),Ye}return os(e.data)}get enum(){return this._def.values}}vU.create=(t,e)=>new vU({values:t,typeName:Xe.ZodNativeEnum,...at(e)});class lT extends wt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.promise&&n.common.async===!1)return Ee(n,{code:he.invalid_type,expected:ke.promise,received:n.parsedType}),Ye;const r=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return os(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}lT.create=(t,e)=>new lT({type:t,typeName:Xe.ZodPromise,...at(e)});class Kh extends wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Ee(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ye;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Ye:c.status==="dirty"||n.value==="dirty"?Cp(c.value):c});{if(n.value==="aborted")return Ye;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ye:a.status==="dirty"||n.value==="dirty"?Cp(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hh(o))return Ye;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Hh(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ye);Tt.assertNever(i)}}Kh.create=(t,e,n)=>new Kh({schema:t,typeName:Xe.ZodEffects,effect:e,...at(n)});Kh.createWithPreprocess=(t,e,n)=>new Kh({schema:e,effect:{type:"preprocess",transform:t},typeName:Xe.ZodEffects,...at(n)});class Lc extends wt{_parse(e){return this._getType(e)===ke.undefined?os(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lc.create=(t,e)=>new Lc({innerType:t,typeName:Xe.ZodOptional,...at(e)});class qh extends wt{_parse(e){return this._getType(e)===ke.null?os(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qh.create=(t,e)=>new qh({innerType:t,typeName:Xe.ZodNullable,...at(e)});class $k extends wt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}$k.create=(t,e)=>new $k({innerType:t,typeName:Xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...at(e)});class Bk extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return sT(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Sa(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Sa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Bk.create=(t,e)=>new Bk({innerType:t,typeName:Xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...at(e)});class wU extends wt{_parse(e){if(this._getType(e)!==ke.nan){const r=this._getOrReturnCtx(e);return Ee(r,{code:he.invalid_type,expected:ke.nan,received:r.parsedType}),Ye}return{status:"valid",value:e.data}}}wU.create=t=>new wU({typeName:Xe.ZodNaN,...at(t)});class aOe extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Q1 extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ye:s.status==="dirty"?(n.dirty(),Cp(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ye:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Q1({in:e,out:n,typeName:Xe.ZodPipeline})}}class Hk extends wt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Hh(i)&&(i.value=Object.freeze(i.value)),i);return sT(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Hk.create=(t,e)=>new Hk({innerType:t,typeName:Xe.ZodReadonly,...at(e)});var Xe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Xe||(Xe={}));const ta=ea.create;Nu.create;Ou.create;const qMe=oT.create,GMe=zh.create;nl.create;Co.create;const fy=Sn.create;aT.create;cT.create;Mu.create;const QMe=Wh.create;lT.create;Lc.create;qh.create;const YMe={string:t=>ea.create({...t,coerce:!0}),number:t=>Nu.create({...t,coerce:!0}),boolean:t=>oT.create({...t,coerce:!0}),bigint:t=>Ou.create({...t,coerce:!0}),date:t=>zh.create({...t,coerce:!0})};var cOe=Object.defineProperty,lOe=Object.defineProperties,uOe=Object.getOwnPropertyDescriptors,uT=Object.getOwnPropertySymbols,$Q=Object.prototype.hasOwnProperty,BQ=Object.prototype.propertyIsEnumerable,_U=(t,e,n)=>e in t?cOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dOe=(t,e)=>{for(var n in e||(e={}))$Q.call(e,n)&&_U(t,n,e[n]);if(uT)for(var n of uT(e))BQ.call(e,n)&&_U(t,n,e[n]);return t},hOe=(t,e)=>lOe(t,uOe(e)),fOe=(t,e)=>{var n={};for(var r in t)$Q.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&uT)for(var r of uT(t))e.indexOf(r)<0&&BQ.call(t,r)&&(n[r]=t[r]);return n};function pOe(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function mOe(t){let e=g.useRef();return g.useEffect(()=>{e.current=t}),e.current}var gOe=18,HQ=40,yOe=`${HQ}px`,vOe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function wOe({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[i,s]=g.useState(!1),[o,a]=g.useState(!1),[c,l]=g.useState(!1),u=g.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&i&&o,[i,o,n]),d=g.useCallback(()=>{let h=t.current,m=e.current;if(!h||!m||c||n==="none")return;let w=h,y=w.getBoundingClientRect().left+w.offsetWidth,_=w.getBoundingClientRect().top+w.offsetHeight/2,v=y-gOe,T=_;document.querySelectorAll(vOe).length===0&&document.elementFromPoint(v,T)===h||(s(!0),l(!0))},[t,e,c,n]);return g.useEffect(()=>{let h=t.current;if(!h||n==="none")return;function m(){let y=window.innerWidth-h.getBoundingClientRect().right;a(y>=HQ)}m();let w=setInterval(m,1e3);return()=>{clearInterval(w)}},[t,n]),g.useEffect(()=>{let h=r||document.activeElement===e.current;if(n==="none"||!h)return;let m=setTimeout(d,0),w=setTimeout(d,2e3),y=setTimeout(d,5e3),_=setTimeout(()=>{l(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(w),clearTimeout(y),clearTimeout(_)}},[e,r,n,d]),{hasPWMBadge:i,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:yOe}}var zQ=g.createContext({}),WQ=g.forwardRef((t,e)=>{var n=t,{value:r,onChange:i,maxLength:s,textAlign:o="left",pattern:a,placeholder:c,inputMode:l="numeric",onComplete:u,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:w=_Oe,render:y,children:_}=n,v=fOe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),T,C,I,x,D;let[A,S]=g.useState(typeof v.defaultValue=="string"?v.defaultValue:""),k=r??A,N=mOe(k),R=g.useCallback(Re=>{i==null||i(Re),S(Re)},[i]),O=g.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),P=g.useRef(null),$=g.useRef(null),H=g.useRef({value:k,onChange:R,isIOS:typeof window<"u"&&((C=(T=window==null?void 0:window.CSS)==null?void 0:T.supports)==null?void 0:C.call(T,"-webkit-touch-callout","none"))}),X=g.useRef({prev:[(I=P.current)==null?void 0:I.selectionStart,(x=P.current)==null?void 0:x.selectionEnd,(D=P.current)==null?void 0:D.selectionDirection]});g.useImperativeHandle(e,()=>P.current,[]),g.useEffect(()=>{let Re=P.current,Pe=$.current;if(!Re||!Pe)return;H.current.value!==Re.value&&H.current.onChange(Re.value),X.current.prev=[Re.selectionStart,Re.selectionEnd,Re.selectionDirection];function ht(){if(document.activeElement!==Re){ve(null),J(null);return}let Ve=Re.selectionStart,L=Re.selectionEnd,U=Re.selectionDirection,K=Re.maxLength,de=Re.value,le=X.current.prev,oe=-1,me=-1,We;if(de.length!==0&&Ve!==null&&L!==null){let Rr=Ve===L,Oo=Ve===de.length&&de.length<K;if(Rr&&!Oo){let pn=Ve;if(pn===0)oe=0,me=1,We="forward";else if(pn===K)oe=pn-1,me=pn,We="backward";else if(K>1&&de.length>1){let Hn=0;if(le[0]!==null&&le[1]!==null){We=pn<le[1]?"backward":"forward";let Us=le[0]===le[1]&&le[0]<K;We==="backward"&&!Us&&(Hn=-1)}oe=Hn+pn,me=Hn+pn+1}}oe!==-1&&me!==-1&&oe!==me&&P.current.setSelectionRange(oe,me,We)}let ft=oe!==-1?oe:Ve,Nn=me!==-1?me:L,gi=We??U;ve(ft),J(Nn),X.current.prev=[ft,Nn,gi]}if(document.addEventListener("selectionchange",ht,{capture:!0}),ht(),document.activeElement===Re&&ie(!0),!document.getElementById("input-otp-style")){let Ve=document.createElement("style");if(Ve.id="input-otp-style",document.head.appendChild(Ve),Ve.sheet){let L="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";op(Ve.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),op(Ve.sheet,`[data-input-otp]:autofill { ${L} }`),op(Ve.sheet,`[data-input-otp]:-webkit-autofill { ${L} }`),op(Ve.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),op(Ve.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let nn=()=>{Pe&&Pe.style.setProperty("--root-height",`${Re.clientHeight}px`)};nn();let rn=new ResizeObserver(nn);return rn.observe(Re),()=>{document.removeEventListener("selectionchange",ht,{capture:!0}),rn.disconnect()}},[]);let[se,V]=g.useState(!1),[j,ie]=g.useState(!1),[Te,ve]=g.useState(null),[z,J]=g.useState(null);g.useEffect(()=>{pOe(()=>{var Re,Pe,ht,nn;(Re=P.current)==null||Re.dispatchEvent(new Event("input"));let rn=(Pe=P.current)==null?void 0:Pe.selectionStart,Ve=(ht=P.current)==null?void 0:ht.selectionEnd,L=(nn=P.current)==null?void 0:nn.selectionDirection;rn!==null&&Ve!==null&&(ve(rn),J(Ve),X.current.prev=[rn,Ve,L])})},[k,j]),g.useEffect(()=>{N!==void 0&&k!==N&&N.length<s&&k.length===s&&(u==null||u(k))},[s,u,N,k]);let G=wOe({containerRef:$,inputRef:P,pushPasswordManagerStrategy:d,isFocused:j}),q=g.useCallback(Re=>{let Pe=Re.currentTarget.value.slice(0,s);if(Pe.length>0&&O&&!O.test(Pe)){Re.preventDefault();return}typeof N=="string"&&Pe.length<N.length&&document.dispatchEvent(new Event("selectionchange")),R(Pe)},[s,R,N,O]),ne=g.useCallback(()=>{var Re;if(P.current){let Pe=Math.min(P.current.value.length,s-1),ht=P.current.value.length;(Re=P.current)==null||Re.setSelectionRange(Pe,ht),ve(Pe),J(ht)}ie(!0)},[s]),Ce=g.useCallback(Re=>{var Pe,ht;let nn=P.current;if(!h&&(!H.current.isIOS||!Re.clipboardData||!nn))return;let rn=Re.clipboardData.getData("text/plain"),Ve=h?h(rn):rn;Re.preventDefault();let L=(Pe=P.current)==null?void 0:Pe.selectionStart,U=(ht=P.current)==null?void 0:ht.selectionEnd,K=(L!==U?k.slice(0,L)+Ve+k.slice(U):k.slice(0,L)+Ve+k.slice(L)).slice(0,s);if(K.length>0&&O&&!O.test(K))return;nn.value=K,R(K);let de=Math.min(K.length,s-1),le=K.length;nn.setSelectionRange(de,le),ve(de),J(le)},[s,R,O,k]),Ne=g.useMemo(()=>({position:"relative",cursor:v.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[v.disabled]),Le=g.useMemo(()=>({position:"absolute",inset:0,width:G.willPushPWMBadge?`calc(100% + ${G.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:G.willPushPWMBadge?`inset(0 ${G.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[G.PWM_BADGE_SPACE_WIDTH,G.willPushPWMBadge,o]),Me=g.useMemo(()=>g.createElement("input",hOe(dOe({autoComplete:v.autoComplete||"one-time-code"},v),{"data-input-otp":!0,"data-input-otp-placeholder-shown":k.length===0||void 0,"data-input-otp-mss":Te,"data-input-otp-mse":z,inputMode:l,pattern:O==null?void 0:O.source,"aria-placeholder":c,style:Le,maxLength:s,value:k,ref:P,onPaste:Re=>{var Pe;Ce(Re),(Pe=v.onPaste)==null||Pe.call(v,Re)},onChange:q,onMouseOver:Re=>{var Pe;V(!0),(Pe=v.onMouseOver)==null||Pe.call(v,Re)},onMouseLeave:Re=>{var Pe;V(!1),(Pe=v.onMouseLeave)==null||Pe.call(v,Re)},onFocus:Re=>{var Pe;ne(),(Pe=v.onFocus)==null||Pe.call(v,Re)},onBlur:Re=>{var Pe;ie(!1),(Pe=v.onBlur)==null||Pe.call(v,Re)}})),[q,ne,Ce,l,Le,s,z,Te,v,O==null?void 0:O.source,k]),Ze=g.useMemo(()=>({slots:Array.from({length:s}).map((Re,Pe)=>{var ht;let nn=j&&Te!==null&&z!==null&&(Te===z&&Pe===Te||Pe>=Te&&Pe<z),rn=k[Pe]!==void 0?k[Pe]:null,Ve=k[0]!==void 0?null:(ht=c==null?void 0:c[Pe])!=null?ht:null;return{char:rn,placeholderChar:Ve,isActive:nn,hasFakeCaret:nn&&rn===null}}),isFocused:j,isHovering:!v.disabled&&se}),[j,se,s,z,Te,v.disabled,k]),yt=g.useMemo(()=>y?y(Ze):g.createElement(zQ.Provider,{value:Ze},_),[_,Ze,y]);return g.createElement(g.Fragment,null,w!==null&&g.createElement("noscript",null,g.createElement("style",null,w)),g.createElement("div",{ref:$,"data-input-otp-container":!0,style:Ne,className:m},yt,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Me)))});WQ.displayName="Input";function op(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var _Oe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const KQ=g.forwardRef(({className:t,containerClassName:e,...n},r)=>p.jsx(WQ,{ref:r,containerClassName:fe("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:fe("disabled:cursor-not-allowed",t),...n}));KQ.displayName="InputOTP";const qQ=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:fe("flex items-center",t),...e}));qQ.displayName="InputOTPGroup";const Al=g.forwardRef(({index:t,className:e,...n},r)=>{const i=g.useContext(zQ),{char:s,hasFakeCaret:o,isActive:a}=i.slots[t];return p.jsxs("div",{ref:r,className:fe("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",a&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[s,o&&p.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:p.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Al.displayName="InputOTPSlot";const TOe=g.forwardRef(({...t},e)=>p.jsx("div",{ref:e,role:"separator",...t,children:p.jsx(xse,{})}));TOe.displayName="InputOTPSeparator";var COe="Label",GQ=g.forwardRef((t,e)=>p.jsx(Fe.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));GQ.displayName=COe;var QQ=GQ;const EOe=Ng("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),YQ=g.forwardRef(({className:t,...e},n)=>p.jsx(QQ,{ref:n,className:fe(EOe(),t),...e}));YQ.displayName=QQ.displayName;const vg=p1e,XQ=g.createContext({}),na=({...t})=>p.jsx(XQ.Provider,{value:{name:t.name},children:p.jsx(v1e,{...t})}),EE=()=>{const t=g.useContext(XQ),e=g.useContext(JQ),{getFieldState:n,formState:r}=CE(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},JQ=g.createContext({}),so=g.forwardRef(({className:t,...e},n)=>{const r=g.useId();return p.jsx(JQ.Provider,{value:{id:r},children:p.jsx("div",{ref:n,className:fe("space-y-2",t),...e})})});so.displayName="FormItem";const oo=g.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=EE();return p.jsx(YQ,{ref:n,className:fe(r&&"text-destructive",t),htmlFor:i,...e})});oo.displayName="FormLabel";const ao=g.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=EE();return p.jsx(fH,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});ao.displayName="FormControl";const SOe=g.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=EE();return p.jsx("p",{ref:n,id:r,className:fe("text-sm text-muted-foreground",t),...e})});SOe.displayName="FormDescription";const co=g.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=EE(),o=i?String(i==null?void 0:i.message):e;return o?p.jsx("p",{ref:r,id:s,className:fe("text-sm font-medium text-destructive",t),...n,children:o}):null});co.displayName="FormMessage";const bOe=fy({phoneNumber:ta().min(10,"Phone number must be at least 10 digits").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number with country code")}),IOe=fy({otp:ta().min(6,"OTP must be 6 digits").max(6,"OTP must be 6 digits")});function AOe({onBack:t,className:e}){const{signInWithPhone:n,verifyPhoneOTP:r,loading:i}=Bn(),[s,o]=g.useState("phone"),[a,c]=g.useState(null),[l,u]=g.useState(""),d=mg({resolver:gg(bOe),defaultValues:{phoneNumber:""}}),h=mg({resolver:gg(IOe),defaultValues:{otp:""}}),m=async v=>{try{const T=v.phoneNumber.startsWith("+")?v.phoneNumber:`+${v.phoneNumber}`,C=await n(T);c(C),u(T),o("otp")}catch(T){console.error("Error sending OTP:",T)}},w=async v=>{if(a)try{await r(a,v.otp)}catch(T){console.error("Error verifying OTP:",T),h.setError("otp",{message:"Invalid OTP. Please try again."})}},y=async()=>{if(l)try{const v=await n(l);c(v)}catch(v){console.error("Error resending OTP:",v)}},_=()=>{o("phone"),c(null),h.reset()};return p.jsxs(ko,{className:fe("w-full max-w-md animate-fade-in",e),children:[p.jsx(Zc,{children:p.jsxs("div",{className:"flex items-center gap-3",children:[(s==="otp"||t)&&p.jsx(et,{variant:"ghost",size:"icon",onClick:s==="otp"?_:t,className:"h-8 w-8",children:p.jsx(cse,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(hR,{className:"h-5 w-5 text-primary"}),p.jsx(el,{className:"text-xl",children:s==="phone"?"Sign in with Phone":"Enter Verification Code"})]})]})}),p.jsx(Ea,{className:"space-y-6",children:s==="phone"?p.jsxs(p.Fragment,{children:[p.jsx("div",{id:"recaptcha-container",className:"flex justify-center"}),p.jsx(vg,{...d,children:p.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-4",children:[p.jsx(na,{control:d.control,name:"phoneNumber",render:({field:v})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Phone Number"}),p.jsx(ao,{children:p.jsx(bs,{placeholder:"+1234567890",...v,className:"text-center font-mono"})}),p.jsx(co,{}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +1 for US, +91 for India)"})]})}),p.jsx(et,{type:"submit",className:"w-full",disabled:i,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})})]}):p.jsx(vg,{...h,children:p.jsxs("form",{onSubmit:h.handleSubmit(w),className:"space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"We've sent a 6-digit code to"}),p.jsx("p",{className:"font-medium",children:l})]}),p.jsx(na,{control:h.control,name:"otp",render:({field:v})=>p.jsxs(so,{children:[p.jsx(oo,{className:"sr-only",children:"Verification Code"}),p.jsx(ao,{children:p.jsx("div",{className:"flex justify-center",children:p.jsx(KQ,{maxLength:6,value:v.value,onChange:v.onChange,children:p.jsxs(qQ,{children:[p.jsx(Al,{index:0}),p.jsx(Al,{index:1}),p.jsx(Al,{index:2}),p.jsx(Al,{index:3}),p.jsx(Al,{index:4}),p.jsx(Al,{index:5})]})})})}),p.jsx(co,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(et,{type:"submit",className:"w-full",disabled:i||h.watch("otp").length!==6,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Sign In"}),p.jsx(et,{type:"button",variant:"ghost",className:"w-full",onClick:y,disabled:i,children:"Resend OTP"})]})]})})})]})}var SE="Tabs",[kOe]=qr(SE,[nE]),ZQ=nE(),[xOe,Y1]=kOe(SE),eY=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...l}=t,u=eE(a),[d,h]=ka({prop:r,onChange:i,defaultProp:s??"",caller:SE});return p.jsx(xOe,{scope:n,baseId:ho(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:c,children:p.jsx(Fe.div,{dir:u,"data-orientation":o,...l,ref:e})})});eY.displayName=SE;var tY="TabsList",nY=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Y1(tY,n),o=ZQ(n);return p.jsx(yq,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(Fe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});nY.displayName=tY;var rY="TabsTrigger",iY=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=Y1(rY,n),a=ZQ(n),c=aY(o.baseId,r),l=cY(o.baseId,r),u=r===o.value;return p.jsx(vq,{asChild:!0,...a,focusable:!i,active:u,children:p.jsx(Fe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:we(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:we(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:we(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});iY.displayName=rY;var sY="TabsContent",oY=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=Y1(sY,n),c=aY(a.baseId,r),l=cY(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx($n,{present:i||u,children:({present:h})=>p.jsx(Fe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:l,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});oY.displayName=sY;function aY(t,e){return`${t}-trigger-${e}`}function cY(t,e){return`${t}-content-${e}`}var ROe=eY,lY=nY,uY=iY,dY=oY;const POe=ROe,hY=g.forwardRef(({className:t,...e},n)=>p.jsx(lY,{ref:n,className:fe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));hY.displayName=lY.displayName;const zk=g.forwardRef(({className:t,...e},n)=>p.jsx(uY,{ref:n,className:fe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));zk.displayName=uY.displayName;const Wk=g.forwardRef(({className:t,...e},n)=>p.jsx(dY,{ref:n,className:fe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Wk.displayName=dY.displayName;const NOe=fy({email:ta().email({message:"Invalid email address."}),password:ta().min(6,{message:"Password must be at least 6 characters."})}),OOe=fy({email:ta().email({message:"Invalid email address."})});function MOe(){const{signIn:t,signInWithGoogle:e,resetPassword:n,loading:r}=Bn(),i=Fu(),[s,o]=g.useState(!1),a=Sf(),c=mg({resolver:gg(NOe),defaultValues:{email:"",password:""}}),l=mg({resolver:gg(OOe),defaultValues:{email:""}});async function u(m){try{await t(m.email,m.password),i("/")}catch{}}async function d(){try{await e(),i("/")}catch{}}async function h(m){try{await n(m.email),o(!1),l.reset()}catch{}}return s?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs(ko,{className:"w-full max-w-md shadow-elegant animate-scale-in",children:[p.jsx(Zc,{children:p.jsxs(el,{className:"text-center text-2xl flex items-center justify-center gap-2",children:[p.jsx(qD,{className:"h-6 w-6 text-primary"}),"Reset Password"]})}),p.jsx(Ea,{children:p.jsx(vg,{...l,children:p.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-4",children:[p.jsx(na,{control:l.control,name:"email",render:({field:m})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Email Address"}),p.jsx(ao,{children:p.jsx(bs,{placeholder:"m@example.com",...m})}),p.jsx(co,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(et,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}):"Send Reset Email"}),p.jsx(et,{type:"button",variant:"ghost",className:"w-full",onClick:()=>o(!1),children:"Back to Sign In"})]})]})})})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(vu,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Smart Task Management"})]}),p.jsxs(ko,{className:"shadow-elegant animate-scale-in",children:[p.jsx(Zc,{children:p.jsx(el,{className:"text-center text-xl",children:"Welcome Back"})}),p.jsxs(Ea,{children:[p.jsxs(POe,{defaultValue:"email",className:"w-full",children:[a?p.jsx("div",{className:"mb-6"}):p.jsxs(hY,{className:"grid w-full grid-cols-2 mb-6",children:[p.jsxs(zk,{value:"email",className:"flex items-center gap-2",children:[p.jsx(qD,{className:"h-4 w-4"}),"Email"]}),p.jsxs(zk,{value:"phone",className:"flex items-center gap-2",children:[p.jsx(hR,{className:"h-4 w-4"}),"Phone"]})]}),p.jsx(Wk,{value:"email",className:"space-y-4",children:p.jsx(vg,{...c,children:p.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[p.jsx(na,{control:c.control,name:"email",render:({field:m})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Email"}),p.jsx(ao,{children:p.jsx(bs,{placeholder:"m@example.com",...m})}),p.jsx(co,{})]})}),p.jsx(na,{control:c.control,name:"password",render:({field:m})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Password"}),p.jsx(ao,{children:p.jsx(bs,{type:"password",placeholder:"••••••••",...m})}),p.jsx(co,{})]})}),p.jsx("div",{className:"flex justify-end",children:p.jsx(et,{type:"button",variant:"link",className:"px-0 text-sm",onClick:()=>o(!0),children:"Forgot password?"})}),p.jsx(et,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}):"Sign In"})]})})}),!a&&p.jsx(Wk,{value:"phone",children:p.jsx(AOe,{})})]}),!a&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(et,{variant:"outline",className:"w-full hover-scale",onClick:d,disabled:r,children:[r?p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(BH,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",p.jsx(xm,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign Up"})]})]})]})]})})}const DOe=fy({displayName:ta().min(2,{message:"Name must be at least 2 characters."}),email:ta().email({message:"Invalid email address."}),password:ta().min(8,{message:"Password must be at least 8 characters."}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,{message:"Password must contain at least one uppercase letter, one lowercase letter, and one number."}),confirmPassword:ta()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function LOe(){const{signUp:t,signInWithGoogle:e,loading:n}=Bn(),r=Fu(),i=Sf(),s=mg({resolver:gg(DOe),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""}});async function o(c){try{await t(c.email,c.password,c.displayName),r("/")}catch{}}async function a(){try{await e(),r("/")}catch{}}return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(vu,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Start your Taskly journey"})]}),p.jsxs(ko,{className:"shadow-elegant animate-scale-in",children:[p.jsx(Zc,{children:p.jsxs(el,{className:"text-center text-xl flex items-center justify-center gap-2",children:[p.jsx(fR,{className:"h-5 w-5 text-primary"}),"Create Your Account"]})}),p.jsxs(Ea,{children:[p.jsx(vg,{...s,children:p.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[p.jsx(na,{control:s.control,name:"displayName",render:({field:c})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Full Name"}),p.jsx(ao,{children:p.jsx(bs,{placeholder:"John Doe",...c})}),p.jsx(co,{})]})}),p.jsx(na,{control:s.control,name:"email",render:({field:c})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Email"}),p.jsx(ao,{children:p.jsx(bs,{placeholder:"m@example.com",...c})}),p.jsx(co,{})]})}),p.jsx(na,{control:s.control,name:"password",render:({field:c})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Password"}),p.jsx(ao,{children:p.jsx(bs,{type:"password",placeholder:"••••••••",...c})}),p.jsx(co,{})]})}),p.jsx(na,{control:s.control,name:"confirmPassword",render:({field:c})=>p.jsxs(so,{children:[p.jsx(oo,{children:"Confirm Password"}),p.jsx(ao,{children:p.jsx(bs,{type:"password",placeholder:"••••••••",...c})}),p.jsx(co,{})]})}),p.jsx(et,{type:"submit",className:"w-full",disabled:n,variant:"focus",children:n?p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}):"Create Account"})]})}),!i&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(et,{variant:"outline",className:"w-full hover-scale",onClick:a,disabled:n,children:[n?p.jsx(xc,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(BH,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",p.jsx(xm,{to:"/signin",className:"text-primary hover:underline font-medium",children:"Sign In"})]}),p.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})]})]})})}const FOe=({children:t})=>{const{user:e,loading:n}=Bn(),r=Fu();return g.useEffect(()=>{!n&&!e&&r("/signin")},[e,n,r]),n?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(xc,{className:"h-10 w-10 animate-spin text-primary"})}):e?p.jsx(p.Fragment,{children:t}):null},Pb=({children:t})=>{const{userProfile:e,loading:n}=Bn();return n?p.jsx(SQ,{}):!e||e.role!=="admin"?p.jsx(JZ,{to:"/",replace:!0}):p.jsx(p.Fragment,{children:t})};function VOe(){const{tasks:t}=ry(),{user:e}=Bn(),[n,r]=g.useState(new Set);return g.useEffect(()=>{(async()=>{if(!e)return;if(Bt.isNativePlatform()&&(await an.checkPermissions()).display!=="granted"){console.log("Native notification permission not granted, skipping native assignment check.");return}const s=t.filter(o=>{var u;const a=(u=o.assignedTo)==null?void 0:u.includes(e.uid),c=o.createdAt&&Date.now()-new Date(o.createdAt).getTime()<3e5,l=!n.has(o.id);return a&&c&&l});if(s.length!==0){if(console.log(`Found ${s.length} new task(s) to notify about.`),Bt.isNativePlatform()){const o=s.map(a=>({id:Math.floor(Math.random()*1e6),title:"New Task Assigned",body:`You have been assigned: "${a.title}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{taskId:a.id,type:"task_assignment"}}));try{await an.schedule({notifications:o}),console.log("Native task assignment notifications scheduled successfully")}catch(a){console.error("Failed to schedule native notifications:",a)}}else for(const o of s)try{"Notification"in window&&Notification.permission==="granted"&&new Notification("New Task Assigned",{body:`You have been assigned: "${o.title}"`,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`task-assignment-${o.id}`,data:{taskId:o.id,type:"task_assignment"},requireInteraction:!0,vibrate:[200,100,200]})}catch(a){console.error("Failed to show web notification:",a)}r(o=>{const a=new Set(o);return s.forEach(c=>a.add(c.id)),a})}})()},[t,e,n]),null}class jOe{constructor(){Kt(this,"messaging",null);Kt(this,"vapidKey")}async init(){try{if(!("serviceWorker"in navigator)||!("Notification"in window)){console.warn("FCM not supported in this browser");return}this.messaging=kK,await this.requestPermission(),this.setupMessageListener()}catch(e){console.error("Failed to initialize FCM:",e)}}async requestPermission(){try{if(await Notification.requestPermission()==="granted"){const n=await navigator.serviceWorker.ready,r=await cV(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:n});return r?(console.log("FCM token received:",r),r):(console.warn("No FCM token available"),null)}else return console.warn("Notification permission denied"),null}catch(e){throw console.error("Failed to get FCM token:",e),e}}setupMessageListener(){this.messaging&&xSe(this.messaging,e=>{if(console.log("Message received:",e),e.notification){const{title:n,body:r,icon:i}=e.notification;"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(s=>{s.showNotification(n||"New Message",{body:r||"",icon:i||"/icon-192x192.png",badge:"/icon-192x192.png",tag:"fcm-message",requireInteraction:!1,silent:!1})})}})}async getToken(){this.messaging||await this.init();try{const e=await navigator.serviceWorker.ready;return await cV(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}catch(e){return console.error("Failed to get FCM token:",e),null}}}const UOe=new jOe,$Oe=ju("App",{web:()=>Wt(()=>import("./web-De3Wd7Ee.js"),[]).then(t=>new t.AppWeb)}),Ol=class Ol{constructor(){Kt(this,"isInitialized",!1)}static getInstance(){return Ol.instance||(Ol.instance=new Ol),Ol.instance}async init(){if(!Bt.isNativePlatform()){console.log("Not running on native platform, skipping Capacitor notifications");return}try{if((await an.requestPermissions()).display!=="granted"){console.warn("Notification permissions not granted");return}Bt.getPlatform()==="android"&&(await an.createChannel({id:"task-reminders",name:"Task Reminders",description:"Notifications for task reminders",importance:4,visibility:1,sound:"beep.wav",vibration:!0,lights:!0,lightColor:"#488AFF"}),await an.createChannel({id:"pomodoro",name:"Pomodoro Timer",description:"Notifications for pomodoro sessions",importance:4,visibility:1,sound:"ding.wav",vibration:!0,lights:!0,lightColor:"#FF6B6B"})),await an.addListener("localNotificationActionPerformed",n=>{this.handleNotificationAction(n)}),await an.addListener("localNotificationReceived",n=>{console.log("Notification received:",n)}),$Oe.addListener("appStateChange",({isActive:n})=>{n&&this.handleAppResumed()}),this.isInitialized=!0,console.log("Capacitor notifications initialized")}catch(e){console.error("Failed to initialize Capacitor notifications:",e)}}handleNotificationAction(e){const{actionId:n,notification:r}=e;console.log("Notification action:",n,r),window.dispatchEvent(new CustomEvent("capacitor-notification-action",{detail:{actionId:n,notificationId:r.id,data:r.extra}}))}async handleAppResumed(){try{const e=await an.getPending();console.log("Pending notifications:",e.notifications.length);const n=await an.getDeliveredNotifications();console.log("Delivered notifications:",n.notifications.length)}catch(e){console.error("Error checking notifications on resume:",e)}}async scheduleNotification(e){if(!this.isInitialized||!Bt.isNativePlatform()){console.warn("Capacitor notifications not available, falling back to web notifications");return}try{await an.schedule({notifications:[e]}),console.log("Notification scheduled:",e.id)}catch(n){console.error("Failed to schedule notification:",n)}}async cancelNotification(e){if(!(!this.isInitialized||!Bt.isNativePlatform()))try{await an.cancel({notifications:[{id:e}]}),console.log("Notification cancelled:",e)}catch(n){console.error("Failed to cancel notification:",n)}}async cancelAllNotifications(){if(!(!this.isInitialized||!Bt.isNativePlatform()))try{const e=await an.getPending();e.notifications.length>0&&await an.cancel({notifications:e.notifications.map(n=>({id:n.id}))}),console.log("All notifications cancelled")}catch(e){console.error("Failed to cancel all notifications:",e)}}async getPendingNotifications(){if(!this.isInitialized||!Bt.isNativePlatform())return[];try{return(await an.getPending()).notifications}catch(e){return console.error("Failed to get pending notifications:",e),[]}}async scheduleTaskReminder(e,n,r,i){const s=this.generateNotificationId(e);await this.scheduleNotification({id:s,title:n,body:r,schedule:{at:i,allowWhileIdle:!0},channelId:"task-reminders",iconColor:"#488AFF",extra:{taskId:e,type:"task-reminder"}})}async schedulePomodoroComplete(e){const n=Date.now();await this.scheduleNotification({id:n,title:`${e==="work"?"Work":"Break"} Session Complete`,body:`Great job! Time for your ${e==="work"?"break":"next work session"}.`,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"pomodoro",iconColor:"#FF6B6B",extra:{type:"pomodoro-complete",sessionType:e}})}async cancelTaskReminder(e){const n=this.generateNotificationId(e);await this.cancelNotification(n)}generateNotificationId(e){let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n)}isNativeNotificationsAvailable(){return this.isInitialized&&Bt.isNativePlatform()}};Kt(Ol,"instance");let Kk=Ol;const TU=Kk.getInstance(),Ml=class Ml{constructor(){Kt(this,"checkInterval",null)}static getInstance(){return Ml.instance||(Ml.instance=new Ml),Ml.instance}async init(){await gt.init(),this.startScheduleChecker(),await this.checkMissedNotifications()}async scheduleNotification(e){const n={...e,id:crypto.randomUUID(),createdAt:Date.now(),status:"pending"};await this.saveScheduledNotification(n);const r=e.scheduledTime-Date.now();return r<=5*60*1e3&&r>0&&setTimeout(()=>this.deliverNotification(n.id),r),n.id}async cancelNotification(e){const n=await this.getScheduledNotification(e);n&&(n.status="expired",await this.saveScheduledNotification(n))}async saveScheduledNotification(e){const n=await gt.getStore("scheduledNotifications","readwrite");return new Promise((r,i)=>{const s=n.put(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getScheduledNotification(e){const n=await gt.getStore("scheduledNotifications");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result||null),s.onerror=()=>i(s.error)})}async getAllPendingNotifications(){const n=(await gt.getStore("scheduledNotifications")).index("status");return new Promise((r,i)=>{const s=n.getAll("pending");s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}startScheduleChecker(){this.checkInterval=window.setInterval(()=>this.checkDueNotifications(),3e4)}async checkDueNotifications(){if(!this.isDatabaseReady())return;const e=await this.getAllPendingNotifications(),n=Date.now();for(const r of e)r.scheduledTime<=n&&await this.deliverNotification(r.id)}isDatabaseReady(){try{return gt&&typeof gt.getStore=="function"}catch{return!1}}async checkMissedNotifications(){const e=await this.getAllPendingNotifications(),n=Date.now();let r=0;for(const i of e)i.scheduledTime<=n&&(await this.deliverNotification(i.id),r++);r>0&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly - Missed Notifications",{body:`You had ${r} missed notification${r>1?"s":""} while the app was closed.`,icon:"/icon-192x192.png",tag:"missed-notifications"})}async deliverNotification(e){const n=await this.getScheduledNotification(e);if(!n||n.status!=="pending")return;if(Date.now()-n.scheduledTime>60*60*1e3){n.status="expired",await this.saveScheduledNotification(n);return}"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",options:{title:n.title,body:n.body,icon:n.icon||"/icon-192x192.png",badge:n.badge||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent,vibrate:n.vibrate||[200,100,200],actions:n.actions}}):"Notification"in window&&Notification.permission==="granted"&&new Notification(n.title,{body:n.body,icon:n.icon||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent}),n.status="delivered",await this.saveScheduledNotification(n)}async getNotificationHistory(){const e=await gt.getStore("scheduledNotifications");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result.sort((s,o)=>o.createdAt-s.createdAt)),i.onerror=()=>r(i.error)})}async clearExpiredNotifications(){const n=(await this.getNotificationHistory()).filter(i=>i.status==="expired"||i.status==="delivered"),r=await gt.getStore("scheduledNotifications","readwrite");for(const i of n)Date.now()-i.createdAt>7*24*60*60*1e3&&r.delete(i.id)}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}};Kt(Ml,"instance");let qk=Ml;const Gk=qk.getInstance(),BOe=Object.freeze(Object.defineProperty({__proto__:null,unifiedNotifications:Gk},Symbol.toStringTag,{value:"Module"})),sd={};class HOe{constructor(){Kt(this,"enabled");Kt(this,"webhookUrl");this.enabled=typeof import.meta<"u"&&(sd==null?void 0:sd.VITE_ALEXA_ENABLED)==="true",this.webhookUrl=typeof import.meta<"u"&&(sd==null?void 0:sd.VITE_ALEXA_WEBHOOK)||null}isEnabled(){return!!this.enabled&&!!this.webhookUrl}async init(){}async send(e){if(!this.isEnabled()){this.speakFallback(e);return}try{await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.warn("Alexa webhook failed, using speech fallback:",n),this.speakFallback(e)}}async schedule(e){if(!e.scheduledTime||e.scheduledTime<=Date.now())return this.send(e);if(this.isEnabled())try{await fetch(this.webhookUrl+"/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return}catch(r){console.warn("Alexa schedule webhook failed, falling back to local timeout:",r)}const n=e.scheduledTime-Date.now();setTimeout(()=>this.speakFallback(e),Math.max(0,n))}speakFallback(e){var n;try{const r=`${e.title}. ${e.body}`,i=new SpeechSynthesisUtterance(r);i.lang="en-US",(n=window.speechSynthesis)==null||n.speak(i)}catch{}}}const rw=new HOe,Nb=Object.freeze(Object.defineProperty({__proto__:null,alexaNotifications:rw},Symbol.toStringTag,{value:"Module"})),Dl=class Dl{constructor(){Kt(this,"initialized",!1)}static getInstance(){return Dl.instance||(Dl.instance=new Dl),Dl.instance}async init(){if(!this.initialized)try{Bt.isNativePlatform()?(await TU.init(),console.log("Capacitor notifications initialized for native platform")):(await Promise.all([UOe.init(),Gk.init(),rw.init()]),console.log("Web notifications initialized for PWA")),this.initialized=!0,console.log("Unified notification service initialized for platform:",Bt.getPlatform())}catch(e){console.error("Failed to initialize unified notification service:",e)}}async sendNotification(e){this.initialized||await this.init();try{Bt.isNativePlatform()?(await this.sendCapacitorNotification(e),console.log("Sent native notification:",e.title)):(await this.sendWebNotification(e),console.log("Sent web notification:",e.title)),rw.send({title:e.title,body:e.body,type:e.type,userId:e.userId,data:e.data}),!Bt.isNativePlatform()&&(e.type==="chat"||e.type==="task")&&await this.sendBackgroundNotification(e)}catch(n){console.error("Failed to send notification:",n)}}async scheduleNotification(e,n){const r=await Gk.scheduleNotification({...e,scheduledTime:n});return rw.schedule({title:e.title,body:e.body,type:e.type==="task"?"reminder":e.type,userId:e.userId,data:e.data,scheduledTime:n}),r}async sendCapacitorNotification(e){try{await TU.scheduleNotification({id:Date.now(),title:e.title,body:e.body,sound:"default",channelId:"app_main_channel",extra:{...e.data,type:e.type},schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0}})}catch(n){throw console.error("Failed to send Capacitor notification:",n),n}}async sendWebNotification(e){try{if("Notification"in window){if(Notification.permission==="default"&&await Notification.requestPermission()!=="granted"){console.warn("Web notification permission denied");return}Notification.permission==="granted"&&new Notification(e.title,{body:e.body,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`${e.type}-${Date.now()}`,data:{...e.data,type:e.type},requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,vibrate:[200,100,200]})}}catch(n){throw console.error("Failed to send web notification:",n),n}}async sendBackgroundNotification(e){e.scheduledTime&&await this.scheduleNotification(e,e.scheduledTime)}async sendChatNotification(e,n,r,i){return this.sendNotification({title:`New message from ${n}`,body:r.length>100?`${r.substring(0,100)}...`:r,type:"chat",data:{senderId:e,chatId:i,messagePreview:r.substring(0,50)},requireInteraction:!1})}async sendTaskAssignmentNotification(e,n,r){return this.sendNotification({title:"New Task Assignment",body:`${n} assigned you "${e}"`,type:"assignment",data:{taskId:r,assignerName:n,taskTitle:e},requireInteraction:!0})}async sendCommentNotification(e,n,r,i){return this.sendNotification({title:`New comment on "${e}"`,body:`${n}: ${r.length>80?`${r.substring(0,80)}...`:r}`,type:"comment",data:{taskId:i,commenterName:n,commentPreview:r.substring(0,50)}})}async sendPomodoroNotification(e,n){const r=e==="work_complete";return this.sendNotification({title:r?"Work Session Complete!":"Break Time Over!",body:r?`Great focus! Time for a break. Session ${n||1} completed.`:"Ready to get back to work? Your break is over.",type:"pomodoro",data:{pomodoroType:e,sessionCount:n},requireInteraction:!0})}};Kt(Dl,"instance");let Qk=Dl;const dT=Qk.getInstance();function Yk(t){const e=t??Date.now();return Math.floor(e%2e9)}function zOe(){const{user:t}=Bn(),e=g.useRef(new Map),n=g.useRef(new Map),r=g.useRef(null);g.useEffect(()=>{if(!t){i(),e.current.clear();return}dT.init();const s=dr(Ae,"chatRooms"),o=ya(s,Kd("participants","array-contains",t.uid));return r.current=vo(o,a=>{const c=new Set;a.forEach(l=>{c.add(l.id)}),n.current.forEach((l,u)=>{c.has(u)||(l(),n.current.delete(u),e.current.delete(u))}),c.forEach(l=>{if(!n.current.has(l)){const u=G_e(kl(xl,`chats/${l}/messages`),q_e("timestamp"),W_e(10)),d=H_e(u,h=>{const m=h.val(),w=h.key;if(!w||!m)return;const y={id:w,...m};if(y.senderId===t.uid){e.current.set(l,y.timestamp);return}const _=e.current.get(l)||0;if(y.timestamp<=_)return;e.current.set(l,y.timestamp);const v=`New message from ${y.senderName}`,T=y.content.length>100?`${y.content.substring(0,100)}...`:y.content,C=Yk(y.timestamp);Bt.isNativePlatform()?Wt(async()=>{const{LocalNotifications:I}=await Promise.resolve().then(()=>uue);return{LocalNotifications:I}},void 0).then(({LocalNotifications:I})=>{I.schedule({notifications:[{id:C,title:v,body:T,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"chat_message",senderId:y.senderId,chatRoomId:l}}]}).catch(x=>{console.error("Failed to schedule native chat notification:",x)})}):"Notification"in window&&Notification.permission==="granted"&&new Notification(v,{body:T,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`chat-message-${y.id}`,data:{type:"chat_message",senderId:y.senderId,chatRoomId:l},requireInteraction:!1,vibrate:[100,50,100]})});n.current.set(l,()=>MW(u,"child_added",d))}})}),()=>{i()}},[t]);const i=()=>{r.current&&(r.current(),r.current=null),n.current.forEach(s=>s()),n.current.clear()};return null}function WOe(){const{user:t}=Bn(),[e,n]=g.useState(new Set),[r,i]=g.useState([]);return g.useEffect(()=>{(async()=>{if(!Bt.isNativePlatform()||!t)return;if((await an.checkPermissions()).display!=="granted"){console.log("Notification permission not granted, skipping team invite check.");return}const a=r.filter(l=>{const u=l.inviteeId===t.uid,d=l.status==="pending",h=l.createdAt&&Date.now()-new Date(l.createdAt).getTime()<3e5,m=!e.has(l.id);return u&&d&&h&&m});if(a.length===0)return;console.log(`Found ${a.length} new team invite(s) to notify about.`);const c=a.map(l=>({id:Math.floor(Math.random()*1e6),title:"New Team Invitation",body:`${l.inviterName} invited you to join "${l.teamName}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"team_invite",inviteId:l.id,teamName:l.teamName,inviterId:l.inviterId}}));try{await an.schedule({notifications:c}),n(l=>{const u=new Set(l);return a.forEach(d=>u.add(d.id)),u})}catch(l){console.error("Failed to schedule team invite notifications:",l)}})()},[r,t,e]),g.useEffect(()=>{},[t]),null}const fY=g.createContext(null);function KOe({children:t}){const{user:e}=Bn(),n=ry(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),[l,u]=g.useState({}),d=async(_,v,T)=>{if(!e||!v.trim())return;const C=new Date().toISOString();try{const I=dr(Ae,"taskComments",_,"comments");await vf(I,{taskId:_,userId:e.uid,userDisplayName:e.displayName||e.email,userPhotoURL:e.photoURL,content:v.trim(),createdAt:C,isEdited:!1}),await n.updateTaskLastCommentedAt(_,C),T&&await dT.sendCommentNotification(T,e.displayName||e.email||"Anonymous",v.trim(),_),Zu.success("Comment added successfully")}catch(I){console.error("Error adding comment:",I),Zu.error("Failed to add comment")}},h=async(_,v,T)=>{if(!(!e||!T.trim()))try{const C=Ge(Ae,"taskComments",v,"comments",_);await hr(C,{content:T.trim(),updatedAt:new Date().toISOString(),isEdited:!0}),await n.updateTaskLastCommentedAt(v,new Date().toISOString()),Zu.success("Comment updated successfully")}catch(C){console.error("Error updating comment:",C),Zu.error("Failed to update comment")}},m=async(_,v)=>{if(e)try{const T=Ge(Ae,"taskComments",v,"comments",_);await Ao(T),await n.updateTaskLastCommentedAt(v,new Date().toISOString()),Zu.success("Comment deleted successfully")}catch(T){console.error("Error deleting comment:",T),Zu.error("Failed to delete comment")}},w=_=>{if(!_||l[_])return null;c(I=>({...I,[_]:!0}));const v=dr(Ae,"taskComments",_,"comments"),T=ya(v,Rh("createdAt","desc"),eme(50)),C=vo(T,I=>{const x=I.docs.map(D=>({id:D.id,...D.data()}));i(D=>({...D,[_]:x})),o(D=>({...D,[_]:x.length})),c(D=>({...D,[_]:!1})),I.docChanges().forEach(D=>{if(D.type==="added"||D.type==="modified"){const A=D.doc.data();A.userId!==(e==null?void 0:e.uid)&&n.updateTaskLastCommentedAt(_,A.createdAt)}})},I=>{console.error("Error fetching comments:",I),c(x=>({...x,[_]:!1}))});return u(I=>({...I,[_]:C})),C},y=_=>{l[_]&&(l[_](),u(v=>{const T={...v};return delete T[_],T}))};return p.jsx(fY.Provider,{value:{comments:r,commentCounts:s,loading:a,addComment:d,updateComment:h,deleteComment:m,subscribeToTaskComments:w,unsubscribeFromTaskComments:y},children:t})}function XMe(){const t=g.useContext(fY);if(!t)throw new Error("useComments must be used within a CommentsContextProvider");return t}function qOe(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return new Proxy({},{get(r,i){return(s,o,a)=>{const c=t.Capacitor.Plugins[n];if(c===void 0){a(new Error(`Capacitor plugin ${n} not found`));return}if(typeof c[i]!="function"){a(new Error(`Method ${i} not found in Capacitor plugin ${n}`));return}(async()=>{try{const l=await c[i](s);o(l)}catch(l){a(l)}})()}}})}})}function GOe(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return t.cordova.plugins[n]}})}function QOe(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?qOe(window):window.cordova!==void 0&&GOe(window))}var Xk;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(Xk||(Xk={}));var CU;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(CU||(CU={}));const YOe=ju("Filesystem",{web:()=>Wt(()=>import("./web-ObVforXQ.js"),[]).then(t=>new t.FilesystemWeb)});QOe();const pY=g.createContext(void 0);function XOe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),[s,o]=g.useState(!1),[a,c]=g.useState(0),[l,u]=g.useState(null),[d,h]=g.useState(0),[m,w]=g.useState(null),{user:y}=Bn(),{toast:_}=Aa(),v=Q.useRef(null);g.useEffect(()=>{if(!y){n([]);return}i(!0);const S=ya(dr(Ae,"meetingRecordings"),Kd("createdBy","==",y.uid),Rh("createdAt","desc")),k=vo(S,N=>{const R=[];N.forEach(O=>{R.push({id:O.id,...O.data()})}),n(R),i(!1)},N=>{console.error("Error fetching recordings:",N),_({title:"Connection error",description:"Failed to load recordings. Please try again.",variant:"destructive"}),i(!1)});return()=>k()},[y,_]),g.useEffect(()=>{let S;return s&&(S=setInterval(()=>{c(Math.floor((Date.now()-d)/1e3))},1e3)),()=>{S&&clearInterval(S)}},[s,d]);const T=async()=>{if(!y){_({title:"Authentication required",description:"Please sign in to start recording.",variant:"destructive"});return}if(m&&w(null),Bt.isNativePlatform())try{const S=`meetly_${Date.now()}.wav`;v.current=new Media(S,()=>console.log("Native recording success."),k=>{console.error("Native recording error:",k),_({title:"Recording Error",description:`Code: ${k.code}`,variant:"destructive"})}),v.current.startRecord(),o(!0),h(Date.now()),c(0),_({title:"Recording started 🎙️"})}catch(S){console.error("Native recording failed to start:",S),_({title:"Recording Failed",description:"Could not start native recorder.",variant:"destructive"})}else try{const S=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),k=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",N=new MediaRecorder(S,{mimeType:k}),R=[];N.ondataavailable=O=>{O.data.size>0&&R.push(O.data)},N.onstop=()=>{const O=new Blob(R,{type:k});w(O),S.getTracks().forEach(P=>P.stop())},N.start(1e3),u(N),o(!0),h(Date.now()),c(0),_({title:"Recording started 🎙️",description:"Your meeting is being recorded."})}catch(S){console.error("Error starting recording:",S),_({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},C=async()=>{if(s){if(Bt.isNativePlatform()){if(v.current){v.current.stopRecord();const S=v.current.src;v.current.release(),v.current=null;try{const k=await YOe.readFile({path:S,directory:Xk.Data}),R=await(await fetch(`data:audio/wav;base64,${k.data}`)).blob();w(R)}catch(k){console.error("Error reading recorded file",k),_({title:"Error saving recording",variant:"destructive"})}}}else l&&(l.stop(),u(null));o(!1),_({title:"Recording stopped ⏹️",description:"Ready to save your recording"})}},I=g.useCallback(()=>{w(null)},[]),A={recordings:e,loading:r,isRecording:s,recordingDuration:a,recordedAudio:m,startRecording:T,stopRecording:C,deleteRecording:async S=>{if(y)try{const k=e.find(N=>N.id===S);if(!k)return;await Ao(Ge(Ae,"meetingRecordings",S));try{const N=K2(hV,k.audioUrl);await gCe(N)}catch(N){N.code!=="storage/object-not-found"&&console.warn("Could not delete audio file from storage:",N)}_({title:"Recording deleted",description:"The recording has been permanently removed.",variant:"destructive"})}catch(k){console.error("Error deleting recording:",k),_({title:"Delete failed",description:"Could not delete recording. Please try again.",variant:"destructive"})}},uploadRecording:async(S,k,N)=>{if(!y)return;const R=new Date().toISOString(),O=await vf(dr(Ae,"meetingRecordings"),{title:k,audioUrl:"",duration:N,status:"uploading",createdAt:R,createdBy:y.uid,fileSize:S.size}),P=O.id;try{const $=`meetly-audio/${y.uid}/${R}-${k.replace(/[^a-zA-Z0-9]/g,"_")}.webm`,H=K2(hV,$),se=await pCe(H,S,{customMetadata:{firestoreId:P}}),V=await mCe(se.ref);await hr(O,{audioUrl:V,status:"processing"}),I(),_({title:"Recording uploaded! 📤",description:"Your recording is being processed for transcription."})}catch($){console.error("Error uploading recording:",$),await Ao(Ge(Ae,"meetingRecordings",P)),_({title:"Upload failed",description:"Could not upload recording. Please try again.",variant:"destructive"})}},clearRecordedAudio:I};return p.jsx(pY.Provider,{value:A,children:t})}function JMe(){const t=g.useContext(pY);if(t===void 0)throw new Error("useMeetly must be used within a MeetlyContextProvider");return t}const mY=g.createContext(void 0);function JOe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!0),{user:s,userProfile:o}=Bn(),{toast:a}=Aa();g.useEffect(()=>{if(!s||!(o!=null&&o.teamId)){n([]),i(!1);return}i(!0);const w=ya(dr(Ae,"teams",o.teamId,"opportunities"),Rh("createdAt","desc")),y=vo(w,_=>{const v=_.docs.map(T=>({id:T.id,...T.data()}));n(v),i(!1)},_=>{console.error("Error fetching opportunities:",_),a({title:"Error",description:"Could not load sales opportunities.",variant:"destructive"}),i(!1)});return()=>y()},[s,o==null?void 0:o.teamId,a]);const m={opportunities:e,loading:r,addOpportunity:async w=>{if(!(!s||!(o!=null&&o.teamId)))try{const y={...w,teamId:o.teamId,createdBy:s.uid,createdAt:new Date().toISOString(),notes:[]};await vf(dr(Ae,"teams",o.teamId,"opportunities"),y),a({title:"Opportunity created!"})}catch(y){console.error("Error adding opportunity:",y),a({title:"Error",description:"Could not create opportunity.",variant:"destructive"})}},updateOpportunity:async(w,y)=>{if(!s||!(o!=null&&o.teamId))return;const _=e,v=_.find(I=>I.id===w);if(!v)return;const T={...v,...y},C=_.map(I=>I.id===w?T:I);n(C);try{const I=Ge(Ae,"teams",o.teamId,"opportunities",w);await hr(I,y)}catch(I){console.error("Error updating opportunity:",I),a({title:"Update Failed",description:"Could not save changes. Reverting.",variant:"destructive"}),n(_)}},deleteOpportunity:async w=>{if(!(!s||!(o!=null&&o.teamId)))try{const y=Ge(Ae,"teams",o.teamId,"opportunities",w);await Ao(y),a({title:"Opportunity deleted",variant:"destructive"})}catch(y){console.error("Error deleting opportunity:",y),a({title:"Error",description:"Could not delete opportunity.",variant:"destructive"})}},addNoteToOpportunity:async(w,y)=>{if(!s||!(o!=null&&o.teamId)||!y.trim())return;const _={id:`note-${Date.now()}`,content:y.trim(),authorId:s.uid,authorName:o.displayName||s.email||"Unknown User",createdAt:new Date().toISOString()};try{const v=Ge(Ae,"teams",o.teamId,"opportunities",w);await hr(v,{notes:Lz(_)})}catch(v){console.error("Error adding note:",v),a({title:"Error",description:"Could not add note.",variant:"destructive"})}},addOpportunitiesFromContacts:async w=>{if(!(!s||!(o!=null&&o.teamId)||w.length===0))try{const y=dr(Ae,"teams",o.teamId,"opportunities"),T=(await LA(y)).docs.map(D=>D.data()).filter(D=>D.stage!=="Closed Won"&&D.stage!=="Closed Lost"),C=new Set(T.map(D=>D.contact)),I=w.filter(D=>!C.has(D.name));if(I.length===0){console.log("No new interested contacts to add as opportunities.");return}const x=__(Ae);I.forEach(D=>{const A=Ge(y),S=[...D.callHistory].sort((R,O)=>new Date(O.timestamp).getTime()-new Date(R.timestamp).getTime()).find(R=>R.spokenToName&&R.spokenToName.trim()!==""),k=(S==null?void 0:S.spokenToName)||D.name,N={title:D.name,contact:k,phone:D.phone,value:0,closeDate:new Date().toISOString(),stage:"Interested Lead",teamId:o.teamId,createdBy:s.uid,createdAt:new Date().toISOString(),notes:[]};x.set(A,N)}),await x.commit(),a({title:"Leads Synced",description:`${I.length} new 'Interested' contact(s) were added to your pipeline.`})}catch(y){console.error("Error adding opportunities from contacts:",y),a({title:"Error",description:"Could not auto-import new leads.",variant:"destructive"})}}};return p.jsx(mY.Provider,{value:m,children:t})}function ZMe(){const t=g.useContext(mY);if(t===void 0)throw new Error("useSalesOpportunity must be used within a SalesOpportunityProvider");return t}const gY=g.createContext(void 0);function ZOe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!0),{user:s}=Bn(),{toast:o}=Aa();g.useEffect(()=>{if(!s){n([]),i(!1);return}i(!0);const c=kl(xl,"contacts"),l=rk(c,u=>{try{const d=u.val();if(d){const h=Object.entries(d).map(([m,w])=>{const y=w.callHistory?Object.entries(w.callHistory).map(([I,x])=>({...x,originalIndex:I})).filter(I=>I.timestamp&&typeof I.timestamp=="string"&&!isNaN(new Date(I.timestamp).getTime())):[];if(y.length===0)return{id:m,name:w.name||"N/A",phone:w.phoneNumber||m,status:"No History",lastContacted:new Date().toISOString(),callCount:w.callCount||0,callHistory:[]};const _=y.sort((I,x)=>new Date(x.timestamp).getTime()-new Date(I.timestamp).getTime()),v=_.length-1,T=_.map((I,x)=>({...I,type:x===v?"New Call":"Follow-up"})),C=T[0];return{id:m,name:w.name||"N/A",phone:w.phoneNumber||m,status:(C==null?void 0:C.feedback)||"No History",lastContacted:(C==null?void 0:C.timestamp)||new Date().toISOString(),callCount:w.callCount||0,callHistory:T}});h.sort((m,w)=>new Date(w.lastContacted).getTime()-new Date(m.lastContacted).getTime()),n(h)}else n([])}catch(d){console.error("Error transforming contact data:",d),o({title:"Error",description:"Failed to process contact data.",variant:"destructive"})}finally{i(!1)}},u=>{console.error("Firebase read error:",u),o({title:"Error",description:"Failed to fetch contacts from Firebase.",variant:"destructive"})});return()=>l()},[s,o]);const a={contacts:e,loading:r};return p.jsx(gY.Provider,{value:a,children:t})}function eDe(){const t=g.useContext(gY);if(t===void 0)throw new Error("useContacts must be used within a ContactsProvider");return t}const EU=async()=>{Bt.getPlatform()==="android"&&(await an.createChannel({id:"app_main_channel",name:"Primary Notifications",description:"General app notifications and reminders",importance:4,vibration:!0,visibility:1}),console.log('Android notification channel "app_main_channel" created or already exists.'))},eMe=g.lazy(()=>Wt(()=>import("./SalesTrackerPage-z1C9dn8z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),tMe=g.lazy(()=>Wt(()=>import("./SalesOpportunityPage-DV_88Y2Z.js"),__vite__mapDeps([17,12,8,9,2,14,18,6,4,19,5]))),nMe=g.lazy(()=>Wt(()=>import("./SalesToolsPage-1_RPuH8L.js"),__vite__mapDeps([20,1,13]))),rMe=g.lazy(()=>Wt(()=>import("./TasksPage-B-_sNHyU.js"),__vite__mapDeps([21,15,22,18,2,9,6,4,5,23,19,12,14]))),iMe=g.lazy(()=>Wt(()=>import("./DashboardPage-Q_FSB1lb.js"),__vite__mapDeps([24,23,8,9,2,11,22,18,6,4,5,25,26,14,3,19,27]))),sMe=g.lazy(()=>Wt(()=>import("./TeamChatPage-CrC2C7li.js"),__vite__mapDeps([28,25,5,29]))),oMe=g.lazy(()=>Wt(()=>import("./MeetlyPage-A-Bpc60w.js"),__vite__mapDeps([30,16,31,13,32,2,29,14]))),aMe=g.lazy(()=>Wt(()=>import("./TimerPage-BBXzQVb1.js"),__vite__mapDeps([33,27,3]))),cMe=g.lazy(()=>Wt(()=>import("./CalendarPage-Ctvj-Xvh.js"),__vite__mapDeps([34,8,9,2,4,23,32,35]))),lMe=g.lazy(()=>Wt(()=>import("./NotesPage-emw0VTkH.js"),__vite__mapDeps([36,4,37,15,13,7,35]))),uMe=g.lazy(()=>Wt(()=>import("./AnalyticsPage-Bjurj-jc.js").then(t=>t.A),__vite__mapDeps([38,8,9,2,10,26,14,13,27,19,3]))),dMe=g.lazy(()=>Wt(()=>import("./ChatPage-DtXDHn6e.js"),__vite__mapDeps([39,8,9,2,16,31,32]))),hMe=g.lazy(()=>Wt(()=>import("./ProfilePage-Cfwi3fNZ.js"),__vite__mapDeps([40,10,23,32]))),fMe=g.lazy(()=>Wt(()=>import("./NotFound-BjZEMyvj.js"),[])),pMe=new Zle({defaultOptions:{queries:{retry:3,staleTime:5*60*1e3}}});function mMe(){const{addNotification:t}=DN();return g.useEffect(()=>(pV(t),()=>pV(null)),[t]),null}const gMe=async(t,e)=>{if(!t||!e){console.error("updateUserFCMToken failed: userId or token is missing.");return}try{console.log(`Attempting to save FCM token for user ${t}...`);const n=Ge(Ae,"users",t);await hr(n,{fcmToken:e,lastUpdated:FA()}),console.log("SUCCESSFULLY saved FCM token to Firestore.")}catch(n){console.error("CRITICAL ERROR saving FCM token to Firestore:",n)}};function yMe(){const{user:t}=Bn(),e=Fu(),[n,r]=g.useState(null);g.useEffect(()=>{t&&n&&(console.log("User and FCM token are both available. Saving to Firestore."),gMe(t.uid,n.value))},[t,n]),g.useEffect(()=>{(async()=>{Bt.isNativePlatform()?await i():await s()})()},[e]);const i=async()=>{try{EU();const o=[];return await ji.requestPermissions(),await ji.register(),o.push(await ji.addListener("registration",a=>{console.log("Push registration success. Received token."),r(a)})),o.push(await ji.addListener("registrationError",a=>{console.error("Push registration FAILED:",a)})),o.push(await ji.addListener("pushNotificationReceived",a=>{var u,d,h,m,w,y;console.log("SILENT/DATA-ONLY Push received:",a),((u=a.data)==null?void 0:u.type)==="chat_message"&&console.log("Chat message push data:",a.data);let c=((d=a.data)==null?void 0:d.title)||"New Notification",l=((h=a.data)==null?void 0:h.body)||"Check the app for details.";if(((m=a.data)==null?void 0:m.type)==="chat_message"){const _=((w=a.data)==null?void 0:w.senderName)||"Someone",v=((y=a.data)==null?void 0:y.message)||"New chat message.";c=`New message from ${_}`,l=v,console.log(`Constructed local notification: Title='${c}', Body='${l}'`)}an.schedule({notifications:[{id:Yk(),title:c,body:l,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:a.data}]})})),o.push(await ji.addListener("pushNotificationActionPerformed",a=>{var l;console.log("Push notification action performed:",a);const c=(l=a.notification.data)==null?void 0:l.taskId;c&&e(`/tasks?taskId=${c}`)})),o.push(await an.addListener("localNotificationActionPerformed",a=>{console.log("Local notification action performed:",a);const c=a.notification.extra;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"?e("/team-chat"):(c==null?void 0:c.type)==="team_invite"&&e("/dashboard")})),()=>{console.log("Removing all push notification listeners..."),o.forEach(a=>{try{a.remove()}catch(c){console.warn("Failed to remove listener handle:",c)}})}}catch(o){console.error("Failed to setup native notifications:",o)}},s=async()=>{try{if(await dT.init(),"Notification"in window&&Notification.permission==="default"){const o=await Notification.requestPermission();console.log("Web notification permission:",o)}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o=>{if(o.data.type==="NOTIFICATION_ACTION"){const{action:a,notificationData:c}=o.data;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"&&e("/team-chat")}})}catch(o){console.error("Failed to setup web notifications:",o)}};return g.useEffect(()=>{if(!Bt.isNativePlatform())return;EU();const o=[];return(async()=>{try{await ji.requestPermissions(),await ji.register(),o.push(await ji.addListener("registration",c=>{console.log("Push registration success. Received token."),r(c)})),o.push(await ji.addListener("registrationError",c=>{console.error("Push registration FAILED:",c)})),o.push(await ji.addListener("pushNotificationReceived",c=>{var d,h;console.log("SILENT/DATA-ONLY Push received:",c);const l=((d=c.data)==null?void 0:d.title)||"New Notification",u=((h=c.data)==null?void 0:h.body)||"Check the app for details.";an.schedule({notifications:[{id:Yk(),title:l,body:u,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:c.data}]})})),o.push(await ji.addListener("pushNotificationActionPerformed",c=>{var u;console.log("Push notification action performed:",c);const l=(u=c.notification.data)==null?void 0:u.taskId;l&&e(`/tasks?taskId=${l}`)})),o.push(await an.addListener("localNotificationActionPerformed",c=>{console.log("Local notification action performed:",c);const l=c.notification.extra;l!=null&&l.taskId?e("/tasks"):(l==null?void 0:l.type)==="chat_message"?e("/chat"):(l==null?void 0:l.type)==="team_invite"&&e("/dashboard")}))}catch(c){console.error("Failed to setup push notifications:",c)}})(),dT.init(),()=>{console.log("Removing all push notification listeners..."),o.forEach(c=>{try{c.remove()}catch(l){console.warn("Failed to remove listener handle:",l)}})}},[e]),p.jsxs(p.Fragment,{children:[p.jsx(mMe,{}),p.jsx(VOe,{}),p.jsx(zOe,{}),p.jsx(WOe,{}),p.jsxs(YM,{children:[p.jsx(Kn,{path:"/signin",element:p.jsx(MOe,{})}),p.jsx(Kn,{path:"/signup",element:p.jsx(LOe,{})}),p.jsx(Kn,{path:"/*",element:p.jsx(FOe,{children:p.jsx(EQ,{children:p.jsx(u1e,{children:p.jsx(g.Suspense,{fallback:p.jsx(SQ,{}),children:p.jsxs(YM,{children:[p.jsx(Kn,{path:"/",element:p.jsx(iMe,{})}),p.jsx(Kn,{path:"/tasks",element:p.jsx(rMe,{})}),p.jsx(Kn,{path:"/team-chat",element:p.jsx(sMe,{})}),p.jsx(Kn,{path:"/meetly",element:p.jsx(oMe,{})}),p.jsx(Kn,{path:"/sales-tracker",element:p.jsx(Pb,{children:p.jsx(eMe,{})})}),p.jsx(Kn,{path:"/sales-opportunity",element:p.jsx(Pb,{children:p.jsx(tMe,{})})}),p.jsx(Kn,{path:"/sales-tools",element:p.jsx(Pb,{children:p.jsx(nMe,{})})}),p.jsx(Kn,{path:"/timer",element:p.jsx(aMe,{})}),p.jsx(Kn,{path:"/calendar",element:p.jsx(cMe,{})}),p.jsx(Kn,{path:"/notes",element:p.jsx(lMe,{})}),p.jsx(Kn,{path:"/analytics",element:p.jsx(uMe,{})}),p.jsx(Kn,{path:"/chat",element:p.jsx(dMe,{})}),p.jsx(Kn,{path:"/profile",element:p.jsx(hMe,{})}),p.jsx(Kn,{path:"*",element:p.jsx(fMe,{})})]})})})})})})]})]})}function vMe(){return g.useEffect(()=>{sie()},[]),p.jsx(EQ,{children:p.jsx(tue,{client:pMe,children:p.jsx(uae,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:p.jsxs(sA,{children:[p.jsx(oae,{}),p.jsx(Bae,{}),p.jsx(ube,{children:p.jsx(bbe,{children:p.jsx(hbe,{children:p.jsx(xbe,{children:p.jsx(QK,{children:p.jsx(KOe,{children:p.jsx(kNe,{children:p.jsx(XOe,{children:p.jsx(JOe,{children:p.jsx(ZOe,{children:p.jsx(aee,{children:p.jsx(yMe,{})})})})})})})})})})})})]})})})})}const wMe=Bt.isNativePlatform();G0(document.getElementById("root")).render(p.jsx(vMe,{}));const _Me=t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available, please refresh."),confirm("A new version of the app is available. Reload?")&&e.postMessage({type:"SKIP_WAITING"}))})}},TMe=async()=>{wMe?console.log("Running in native Capacitor environment"):"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t),_Me(t),navigator.serviceWorker.oncontrollerchange=()=>{console.log("Controller changed. Reloading page for new content."),window.location.reload()};const[e,n,r]=await Promise.all([Wt(()=>Promise.resolve().then(()=>BNe),void 0),Wt(()=>import("./notificationScheduler-Abo_ylYj.js"),[]),Wt(()=>Promise.resolve().then(()=>BOe),void 0)]);await e.offlineSync.init(),navigator.serviceWorker.addEventListener("message",i=>{i.data.type==="NOTIFICATION_ACTION"&&window.dispatchEvent(new CustomEvent("notification-action",{detail:{action:i.data.action,data:i.data.notificationData}}))})}catch(t){console.log("SW registration failed: ",t)}}),["click","keydown","scroll","touchstart"].forEach(t=>{document.addEventListener(t,()=>{},{passive:!0})}))};TMe();export{eDe as $,cq as A,et as B,HH as C,JNe as D,mQ as E,gQ as F,yQ as G,ZMe as H,bs as I,GG as J,Zse as K,xc as L,Bse as M,vse as N,fR as O,hR as P,e1e as Q,PNe as R,qG as S,POe as T,YH as U,Bn as V,Aa as W,of as X,B_e as Y,kl as Z,xl as _,hY as a,Fe as a$,KMe as a0,rk as a1,kbe as a2,qH as a3,YI as a4,nk as a5,GD as a6,Q as a7,$H as a8,mg as a9,j7 as aA,K7 as aB,Ose as aC,vu as aD,Ag as aE,XMe as aF,L7 as aG,mV as aH,_se as aI,UMe as aJ,Yw as aK,abe as aL,cbe as aM,lbe as aN,Fu as aO,uQ as aP,hQ as aQ,dQ as aR,wE as aS,lQ as aT,yE as aU,vE as aV,_E as aW,W7 as aX,GH as aY,QH as aZ,ho as a_,vg as aa,na as ab,so as ac,oo as ad,ao as ae,co as af,gg as ag,fy as ah,QMe as ai,GMe as aj,YMe as ak,ta as al,WMe as am,ake as an,cke as ao,_G as ap,Jv as aq,Toe as ar,Zu as as,VMe as at,QSe as au,Abe as av,ry as aw,Ibe as ax,lq as ay,Xw as az,zk as b,eE as b$,QT as b0,dR as b1,KK as b2,HMe as b3,Ct as b4,zMe as b5,qr as b6,we as b7,pie as b8,Obe as b9,Rh as bA,Kd as bB,dr as bC,vo as bD,vf as bE,Ae as bF,K2 as bG,hV as bH,pCe as bI,mCe as bJ,hr as bK,Ao as bL,Ge as bM,gCe as bN,YOe as bO,Xk as bP,EMe as bQ,OU as bR,jMe as bS,ka as bT,Bke as bU,w5 as bV,lae as bW,KD as bX,uie as bY,qMe as bZ,uf as b_,Rbe as ba,JC as bb,MW as bc,G_e as bd,W_e as be,q_e as bf,cse as bg,LMe as bh,FMe as bi,Ho as bj,fse as bk,JMe as bl,WH as bm,Bt as bn,Pse as bo,bse as bp,JD as bq,soe as br,noe as bs,XD as bt,qD as bu,Soe as bv,IMe as bw,r0 as bx,Wt as by,ya as bz,ze as c,bR as c0,oR as c1,pi as c2,Die as c3,nC as c4,Rg as c5,wn as c6,UN as c7,jN as c8,iE as c9,yu as ca,tE as cb,sf as cc,IR as cd,Ake as ce,AR as cf,xo as cg,PR as ch,Ko as ci,l9 as cj,qs as ck,Qge as cl,XC as cm,H5 as cn,CU as co,PMe as cp,Wk as d,ko as e,Zc as f,el as g,Ea as h,gt as i,p as j,hoe as k,uq as l,J_ as m,UH as n,Qxe as o,Xi as p,YQ as q,g as r,nm as s,NG as t,OG as u,fe as v,QN as w,n8 as x,Sf as y,pQ as z};
