import{g as j,ai as g,r as l,j as e,t as v,v as y,w as N,bv as b,x as w,E as U,F as C,G as L,ag as d,I as u,B as x,bw as P,bx as R,by as S}from"./index-C3PoaKhJ.js";function T(){const{theme:a,setTheme:n}=P(),[t,i]=l.useState(!1);return l.useEffect(()=>i(!0),[]),t?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>n(a==="light"?"dark":"light"),"aria-label":"Toggle theme",children:e.jsx("span",{className:"relative h-6 w-11 rounded-full bg-muted-foreground/30 transition-colors",children:e.jsx("span",{className:`absolute top-1/2 left-1 block h-5 w-5 rounded-full bg-background transition-transform duration-300 ease-in-out ${a==="dark"?"translate-x-5":"translate-x-0"} -translate-y-1/2`,style:{boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})}),e.jsx(S,{className:"h-5 w-5"})]}):e.jsx("div",{className:"h-6 w-11"})}function k(){const{user:a,updateUserProfile:n,loading:t}=j(),{toast:i}=g(),[r,h]=l.useState((a==null?void 0:a.displayName)||""),[o,p]=l.useState((a==null?void 0:a.photoURL)||"");l.useEffect(()=>{a&&(h(a.displayName||""),p(a.photoURL||""))},[a]);const m=s=>s?s.split(" ").map(c=>c[0]).join("").toUpperCase():"U",f=async s=>{if(s.preventDefault(),!!a)try{await n({displayName:r,photoURL:o}),i({title:"Profile Updated",description:"Your profile information has been successfully updated."})}catch(c){console.error("Error updating profile:",c),i({title:"Update Failed",description:"There was an error updating your profile. Please try again.",variant:"destructive"})}};return t&&!a?e.jsx("div",{children:"Loading user profile..."}):a?e.jsx("div",{className:"container mx-auto max-w-2xl py-8",children:e.jsxs(v,{children:[e.jsxs(y,{children:[e.jsx(N,{children:"Profile Settings"}),e.jsx(b,{children:"Manage your account and appearance settings."})]}),e.jsxs(w,{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(U,{className:"h-20 w-20",children:[e.jsx(C,{src:o,alt:r}),e.jsx(L,{children:m(r)})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h2",{className:"text-2xl font-bold",children:r||"Anonymous User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.email})]})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"displayName",children:"Display Name"}),e.jsx(u,{id:"displayName",value:r,onChange:s=>h(s.target.value),placeholder:"Your display name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"photoURL",children:"Avatar URL"}),e.jsx(u,{id:"photoURL",value:o,onChange:s=>p(s.target.value),placeholder:"URL to your profile picture"})]}),e.jsx(x,{type:"submit",disabled:t,children:t?"Saving...":"Save Changes"})]}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsx("h3",{className:"font-semibold",children:"Appearance"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{children:"Theme"}),e.jsx(T,{})]})]})]})]})}):e.jsx("div",{children:"Please log in to view your profile."})}export{k as ProfilePage};
