import{c as W,aJ as H,e as Ee,aK as Y,r as v,j as e,B as T,X as le,S as Me,a7 as de,A as me,aL as he,q as ue,aB as se,aC as te,aD as ae,aE as $,p as G,D as O,f as Z,k as re,o as ze,L as Ze,aM as xe,aN as pe,aO as es,F as ss,aP as ts,aQ as as,Q as ce,a2 as V,aR as Ae,aS as Fe,w as P,aT as Ie,aU as Le,aV as fe,u as ge,C as Q,U as Oe,W as $e,H as rs,O as is,J as ns,aW as os,Z as Re,_ as Ke,$ as _e,aX as ls,s as Ue,ah as cs,aY as ds,aZ as ms,V as hs,am as us,v as ne,a_ as oe,Y as xs}from"./index-CIyudF9t.js";import{R as ps,a as Te,b as fs}from"./resizable-CGjVgm2S.js";import{E as je,D as Be}from"./DeleteConfirmationDialog-1nFiE2UZ.js";import{T as Qe}from"./textarea-D92HBPlJ.js";import{S as ie,j as gs,C as js,n as ys,k as Ns,v as vs,u as ws,h as bs,P as Ts,D as Cs,i as Ds}from"./alert-dialog-X9brdY__.js";import{c as ye,f as Ss,C as Ne}from"./formatDistanceToNow-Bu9e27Lo.js";import{A as ee}from"./index-FV4twmxk.js";import{C as ks,e as Ps}from"./select-cJBpq2ym.js";import{S as qe,c as Es,T as Ms}from"./scoring-kuiBAh_1.js";import{u as zs,a as ve}from"./useTouchGestures-Ch9nyX4t.js";import{A as As}from"./award-CfTIYRrs.js";import{T as Fs}from"./skeletons-_JGSiiy5.js";import{C as Is}from"./chevron-left-D9T-5X23.js";import{s as He}from"./subDays-gmpfwhzv.js";import{f as X}from"./format-CrtYonqb.js";import"./en-US-PHonLEz-.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Os=W("ellipsis",Ls);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Rs=W("layout-grid",$s);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],_s=W("list",Ks);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],we=W("message-circle",Us);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Ve=W("star-off",Bs);function Ce(s){return H(s,ye(s))}function Qs(s){return H(s,Ee(ye(s),1))}function qs(s){return H(s,He(ye(s),1))}function We({task:s,initialContent:t="",isEditing:i=!1,commentId:g,onCommentAdded:o,onCancel:f}){const{addComment:p,updateComment:y}=Y(),[m,j]=v.useState(t),[a,x]=v.useState(!1),h=1e3,c=h-m.length,n=async d=>{if(d.preventDefault(),!(!m.trim()||a)){x(!0);try{i&&g?await y(g,s.id,m):await p(s,m),j(""),o==null||o()}catch(C){console.error("Error submitting comment:",C)}finally{x(!1)}}},u=d=>{d.key==="Enter"&&(d.ctrlKey||d.metaKey)&&(d.preventDefault(),n(d)),d.key==="Escape"&&(f==null||f())};return e.jsxs("form",{onSubmit:n,className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{value:m,onChange:d=>j(d.target.value),onKeyDown:u,placeholder:"Add a comment... (Ctrl+Enter to submit)",className:"min-h-[80px] resize-none pr-16",maxLength:h,autoFocus:!0}),e.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:c})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-muted-foreground"}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&e.jsxs(T,{type:"button",variant:"ghost",size:"sm",onClick:f,disabled:a,children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs(T,{type:"submit",size:"sm",disabled:!m.trim()||a||c<0,children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),a?"Posting...":i?"Update":"Comment"]})]})]})]})}function Hs({comment:s}){const{deleteComment:t}=Y(),{user:i}=de(),[g,o]=v.useState(!1),f=(i==null?void 0:i.uid)===s.userId,p=h=>{if(!h)return"";const c=h.toDate?h.toDate():new Date(h),n=Ss(c,{addSuffix:!0});return n.includes("less than a minute")?"Just now":n.includes("about a minute")?"1 minute ago":n},y=h=>h.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2),m=()=>{o(!0)},j=async()=>{confirm("Are you sure you want to delete this comment?")&&await t(s.id,s.taskId)},a=()=>{o(!1)},x=()=>{o(!1)};return g?e.jsx("div",{className:"border rounded-lg p-3 bg-muted/20",children:e.jsx(We,{taskId:s.taskId,initialContent:s.content,isEditing:!0,commentId:s.id,onCommentAdded:a,onCancel:x})}):e.jsxs("div",{className:"flex gap-3 group",children:[e.jsxs(me,{className:"h-8 w-8 flex-shrink-0",children:[e.jsx(he,{src:s.userPhotoURL,alt:s.userDisplayName}),e.jsx(ue,{className:"text-xs",children:y(s.userDisplayName)})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.userDisplayName}),e.jsx("span",{className:"text-xs text-muted-foreground",children:p(s.createdAt)}),s.isEdited&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(edited)"}),f&&e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Os,{className:"h-3 w-3"})})}),e.jsxs(ae,{align:"end",children:[e.jsxs($,{onClick:m,children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs($,{onClick:j,className:"text-destructive",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),e.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:s.content})]})]})}function Ye({task:s,className:t,isExpanded:i,onToggleExpanded:g}){const{comments:o,commentCounts:f,loading:p,subscribeToTaskComments:y,unsubscribeFromTaskComments:m}=Y(),[j,a]=v.useState(!1),x=v.useRef(null),h=o[s.id]||[];f[s.id];const c=p[s.id]===!0&&h.length===0;v.useEffect(()=>{x.current&&clearTimeout(x.current);const u=y(s.id);return()=>{u&&m(s.id)}},[s.id,y,m]),v.useEffect(()=>{i?x.current&&(clearTimeout(x.current),x.current=null):x.current=setTimeout(()=>{m(s.id)},3e4)},[i,s.id,m]);const n=()=>{a(!1)};return e.jsx("div",{className:O("w-full pt-0",t),children:e.jsx(ee,{initial:!1,children:i&&e.jsx(Z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",duration:.4,bounce:0},className:"overflow-hidden",children:e.jsx(re,{className:"mt-1 border-none shadow-none bg-transparent",children:e.jsxs(ze,{className:"py-1 px-2 space-y-3",children:[" ",j?e.jsx(We,{task:s,onCommentAdded:n,onCancel:()=>a(!1)}):e.jsxs(T,{variant:"outline",onClick:()=>a(!0),className:"w-full justify-start text-muted-foreground h-9 rounded-md border-dashed hover:border-primary/50 hover:text-primary transition-colors",size:"sm",children:[e.jsx(we,{className:"h-3 w-3 mr-2"}),"Write a comment..."]}),c?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground py-4",children:[e.jsx(Ze,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading comments..."})]}):h.length>0&&e.jsxs("div",{className:"space-y-3 border-t border-border/50 pt-2",children:[" ",h.map(u=>e.jsx(Hs,{comment:u},u.id))]})]})})})})})}const Vs=s=>{if(!s||s.length===0)return 0;const t=s.filter(i=>i.isCompleted).length;return Math.round(t/s.length*100)};function Ge({task:s}){var I;const{addSubtask:t,toggleSubtaskStatus:i,deleteSubtask:g}=xe(),[o,f]=v.useState(""),[p,y]=v.useState(!1),m=Vs(s.subtasks),j=((I=s.subtasks)==null?void 0:I.length)||0,{trackingSubtask:a,isTrackingSubtask:x,startSubtaskTracking:h,stopSubtaskTracking:c,getFormattedTime:n,currentSubtaskElapsedSeconds:u}=pe(),d=async l=>{l.stopPropagation(),o.trim()&&(await t(s.id,o.trim()),f(""))},C=async(l,D)=>{var K;const L=(K=s.subtasks)==null?void 0:K.find(N=>N.id===D),E=(a==null?void 0:a.subtaskId)===D&&(a==null?void 0:a.taskId)===s.id;L&&!L.isCompleted&&E&&x?await i(s.id,D,{currentSeconds:u,stopTracking:c}):await i(s.id,D)},A=async(l,D)=>{l.stopPropagation(),confirm("Are you sure you want to delete this subtask?")&&await g(s.id,D)},k=l=>{l.stopPropagation(),l.key==="Enter"&&(l.preventDefault(),d(l))},b=()=>{y(!p)};return e.jsxs("div",{className:"pt-0 pb-3 space-y-3",children:[" ",e.jsxs(T,{variant:"ghost",onClick:b,className:"w-full justify-between py-1 px-2 h-auto hover:bg-muted/30 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Subtasks ",j>0&&`(${j})`]})]}),p?e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ps,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ee,{initial:!1,children:p&&e.jsx(Z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",duration:.4,bounce:0},className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-3 pt-0",children:[s.subtasks&&s.subtasks.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{value:m,className:"flex-1 h-2"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[m,"%"]})]}),e.jsx("div",{className:"space-y-2",children:s.subtasks.map(l=>{const D=(a==null?void 0:a.subtaskId)===l.id&&(a==null?void 0:a.taskId)===s.id,L=D?u:l.timeSpent||0;return e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(ss,{id:`subtask-${l.id}`,checked:l.isCompleted,onCheckedChange:E=>C({},l.id),onClick:E=>E.stopPropagation(),className:"h-4 w-4"}),e.jsxs("label",{htmlFor:`subtask-${l.id}`,className:O("flex-1 text-sm cursor-pointer",l.isCompleted?"line-through text-muted-foreground":"text-foreground"),onClick:E=>E.stopPropagation(),children:[l.title,L>0&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:n(L)})]}),e.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-primary",onClick:E=>{E.stopPropagation(),D&&x?c():h(s.id,l.id,l.title)},title:D&&x?"Stop tracking":"Start tracking",children:D&&x?e.jsx(ts,{className:"h-3 w-3 fill-current"}):e.jsx(as,{className:"h-3 w-3"})}),e.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:E=>A(E,l.id),children:e.jsx(G,{className:"h-3 w-3"})})]},l.id)})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx(ce,{placeholder:"Add a new subtask...",value:o,onChange:l=>f(l.target.value),onKeyPress:k,onClick:l=>l.stopPropagation(),className:"flex-1 h-9 focus-visible:ring-0 focus-visible:ring-offset-0"}),e.jsx(T,{size:"icon",onClick:d,disabled:!o.trim(),className:"h-9 w-9",children:e.jsx(V,{className:"h-4 w-4"})})]})]})})})]})}function De({task:s,onEdit:t,onDelete:i,onToggleStatus:g,onTogglePriority:o,onStartTimer:f,assignedProfiles:p}){const[y,m]=v.useState(!1),[j,a]=v.useState(!1),{commentCounts:x}=Y(),{trackingTask:h,isTracking:c,startTracking:n,stopTracking:u,trackingSubtask:d}=pe(),C=(h==null?void 0:h.id)===s.id,A=(d==null?void 0:d.taskId)===s.id,k=s.status==="completed",b=s.dueDate&&new Date(s.dueDate)<new Date&&!k,I=Ae(s),l=()=>{i(s.id),m(!1)},D=N=>{const M=new Date(N),_=new Date,w=M.getTime()-_.getTime(),S=Math.ceil(w/(1e3*60*60*24));return S===0?"Today":S===1?"Tomorrow":S===-1?"Yesterday":S<0?`${Math.abs(S)} days ago`:`${S} days`},L=N=>{const M=Math.floor(N/3600),_=Math.floor(N%3600/60);return M>0?`${M}h ${_}m`:`${_}m`},E=x[s.id]||0,K={high:"border-l-destructive",medium:"border-l-primary",low:"border-l-muted-foreground"};return e.jsxs(e.Fragment,{children:[e.jsxs(re,{className:O("relative transition-all duration-200 group cursor-pointer border-l-4","shadow-sm hover:shadow-md dark:shadow-none","bg-card",b?"border-l-destructive":K[s.priority],k&&"opacity-60 bg-muted/50",C&&"ring-2 ring-primary/50",A&&"ring-2 ring-primary/50",I&&"bg-blue-500/5",b&&"bg-destructive/5"),onClick:N=>{const M=N.target;(N.target===N.currentTarget||!M.closest("button, a, [role='menuitem'], [data-no-edit-on-click]"))&&t(s)},children:[e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{onClick:N=>{N.stopPropagation(),g(s.id)},variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-primary/10 transition-all shrink-0",children:k?e.jsx(Ne,{className:"h-5 w-5 text-green-600"}):e.jsx(Fe,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:O("font-medium text-base leading-snug",k&&"line-through text-muted-foreground"),children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(T,{onClick:N=>{N.stopPropagation(),a(!j),s.lastCommentedAt&&Ie(s.id,s.lastCommentedAt)},variant:"ghost",size:"icon",className:"h-7 w-7 relative",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),E>0&&e.jsx(P,{variant:"secondary",className:"absolute -top-1 -right-2 h-4 min-w-[16px] justify-center p-0.5 text-[10px]",children:E}),I&&!j&&e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-primary rounded-full"})]}),e.jsx(T,{onClick:N=>{N.stopPropagation(),o(s.id)},variant:"ghost",size:"icon",className:"h-7 w-7",children:s.priority==="high"?e.jsx(qe,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:N=>N.stopPropagation(),children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(ae,{align:"end",className:"w-48",onClick:N=>N.stopPropagation(),children:[e.jsxs($,{onClick:()=>t(s),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx($,{onClick:()=>C?u():n(s),children:C?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Stop Timer"]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Start Timer"]})}),e.jsxs($,{onClick:()=>m(!0),className:"text-destructive",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[s.dueDate&&e.jsxs(P,{variant:b?"destructive":"outline",children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),D(s.dueDate)]}),typeof s.estimatedTime=="number"&&s.estimatedTime>0&&e.jsxs(P,{variant:"secondary",children:[e.jsx(Q,{className:"h-3 w-3 mr-1"}),s.estimatedTime,"m"]}),typeof s.timeSpent=="number"&&e.jsxs(P,{variant:"outline",children:[e.jsx(Q,{className:"h-3 w-3 mr-1"}),L(s.timeSpent)]}),p.length>0&&e.jsxs(P,{variant:"outline",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),p.length]})]})]})]})}),e.jsxs("div",{className:"px-4 pb-2 border-t border-border/50","data-no-edit-on-click":!0,children:[(!k||s.subtasks&&s.subtasks.length>0)&&e.jsx(Ge,{task:s}),e.jsx(Ye,{task:s,isExpanded:j,onToggleExpanded:()=>a(!j)})]})]}),e.jsx(Be,{open:y,onOpenChange:m,onConfirm:l,itemName:s.title})]})}const Se=v.memo(function({task:t,onEdit:i,onDelete:g,onToggleStatus:o,onTogglePriority:f,onStartTimer:p,assignedProfiles:y=[]}){const[m,j]=v.useState(!1),[a,x]=v.useState(!1),{commentCounts:h}=Y(),{impact:c,notification:n}=ve(),{trackingTask:u,startTracking:d,stopTracking:C,trackingSubtask:A}=pe(),k=(u==null?void 0:u.id)===t.id,b=(A==null?void 0:A.taskId)===t.id,I=zs({onSwipeLeft:()=>{c("medium"),j(!0)},onSwipeRight:()=>{c("light"),o(t.id)}},{threshold:60,velocityThreshold:.15,ignoreTapFromInteractive:!0}),l=t.dueDate&&new Date(t.dueDate)<new Date&&t.status!=="completed",D=t.status==="completed",L=Ae(t),E=()=>{g(t.id),n("error"),j(!1)},K=w=>{const S=new Date(w),R=new Date,q=S.getTime()-R.getTime(),U=Math.ceil(q/(1e3*60*60*24));return U===0?"Today":U===1?"Tomorrow":U===-1?"Yesterday":U<0?`${Math.abs(U)} days ago`:`${U} days`},N=w=>{const S=Math.floor(w/3600),R=Math.floor(w%3600/60);return S>0?`${S}h ${R}m`:`${R}m`},M=h[t.id]||0,_={high:"border-l-destructive",medium:"border-l-primary",low:"border-l-muted-foreground"};return e.jsxs(e.Fragment,{children:[e.jsxs(re,{ref:I,className:O("relative transition-all duration-200 touch-manipulation touch-pan-y z-10","shadow-md hover:shadow-lg border-l-4",l?"border-l-destructive":_[t.priority],D&&"opacity-75 bg-muted/50",l&&!D&&"bg-destructive/5",k&&"ring-2 ring-primary/50",b&&"ring-2 ring-primary/50",L&&"bg-blue-500/5","border border-border/50 rounded-xl"),children:[e.jsx("div",{className:"p-3",onClick:w=>{const S=w.target;(w.target===w.currentTarget||!S.closest('button, a, [role="menuitem"], [data-no-edit-on-click]'))&&i(t)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{onClick:w=>{w.stopPropagation(),o(t.id),c("light")},variant:"ghost",size:"sm",className:"p-0 h-9 w-9 min-w-[36px] shrink-0 rounded-full hover:bg-primary/10 transition-all",children:D?e.jsx(Ne,{className:"h-5 w-5 text-green-600"}):e.jsx(Fe,{className:"h-5 w-5 text-muted-foreground hover:text-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:O("font-semibold text-sm leading-snug line-clamp-2",D&&"line-through text-muted-foreground"),children:t.title}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsxs(T,{onClick:w=>{w.stopPropagation(),x(!a),t.lastCommentedAt&&Ie(t.id,t.lastCommentedAt),c("light")},variant:"ghost",size:"sm",className:"p-0 h-8 w-8 rounded-full relative",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),M>0&&e.jsx(P,{variant:"secondary",className:"absolute -top-1 -right-1 h-4 min-w-[16px] justify-center p-0.5 text-[10px]",children:M}),L&&!a&&e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-primary rounded-full"})]}),e.jsx(T,{onClick:w=>{w.stopPropagation(),f(t.id),c("light")},variant:"ghost",size:"sm",className:"p-0 h-8 w-8 rounded-full hover:bg-yellow-500/10 transition-all",children:t.priority==="high"?e.jsx(qe,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",className:"p-0 h-8 w-8 rounded-full hover:bg-muted/50 transition-all",onClick:w=>{w.stopPropagation(),c("light")},children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(ae,{align:"end",className:"w-52 shadow-lg",children:[e.jsxs($,{onClick:w=>{w.stopPropagation(),i(t)},children:[e.jsx(ie,{className:"h-4 w-4 mr-3"}),"Edit Task"]}),e.jsx($,{onClick:w=>{w.stopPropagation(),k?C():d(t)},children:k?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-4 w-4 mr-3"}),"Stop Timer"]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-3"}),"Start Timer"]})}),e.jsxs($,{onClick:w=>{w.stopPropagation(),j(!0)},className:"text-destructive",children:[e.jsx(G,{className:"h-4 w-4 mr-3"}),"Delete Task"]})]})]})]})]}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 text-xs mt-2",children:[t.dueDate&&e.jsxs(P,{variant:l?"destructive":"outline",className:"h-5 text-[10px] px-1.5 py-0.5",children:[e.jsx(ge,{className:"h-2.5 w-2.5 mr-1"}),K(t.dueDate)]}),typeof t.estimatedTime=="number"&&t.estimatedTime>0&&e.jsxs(P,{variant:"secondary",className:"h-5 text-[10px] px-1.5 py-0.5",children:[e.jsx(Q,{className:"h-2.5 w-2.5 mr-1"}),t.estimatedTime,"m"]}),typeof t.timeSpent=="number"&&e.jsxs(P,{variant:"outline",className:"h-5 text-[10px] px-1.5 py-0.5",children:[e.jsx(Q,{className:"h-2.5 w-2.5 mr-1"}),N(t.timeSpent)]}),y.length>0&&e.jsxs(P,{variant:"outline",className:"h-5 text-[10px] px-1.5 py-0.5",children:[e.jsx(Oe,{className:"h-2.5 w-2.5 mr-1"}),y.length]})]})]})]})}),e.jsxs("div",{className:"px-3 pb-2 border-t border-border/30","data-no-edit-on-click":!0,children:[(!D||t.subtasks&&t.subtasks.length>0)&&e.jsx(Ge,{task:t}),e.jsx(Ye,{task:t,isExpanded:a,onToggleExpanded:()=>x(!a)})]}),k&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-pulse shadow-glow"})})]}),e.jsx(Be,{open:m,onOpenChange:j,onConfirm:E,itemName:t.title})]})});function Ws({open:s,onOpenChange:t,onCreateTask:i}){const[g,o]=v.useState(""),{notification:f}=ve(),p=()=>{g.trim()&&(i==null||i({title:g.trim()}),t(!1),o(""),f("success"))},y=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),p())};return e.jsx($e,{open:s,onOpenChange:t,children:e.jsxs(rs,{children:[e.jsx(is,{className:`
            fixed inset-0 z-50 bg-black/50
            data-[state=open]:animate-in data-[state=closed]:animate-out
            data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0
          `}),e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center p-4",children:e.jsxs(ns,{className:`
              w-full max-w-md outline-none
              rounded-2xl border border-primary/20 bg-background shadow-2xl
              p-4 sm:p-6
              max-h-[calc(100svh-2rem)] overflow-y-auto
              data-[state=open]:animate-in data-[state=closed]:animate-out
              data-[state=open]:zoom-in-95 data-[state=closed]:zoom-out-95
              data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0
            `,children:[e.jsx(os,{className:`
                absolute right-3 top-3 inline-flex h-8 w-8 items-center justify-center
                rounded-full hover:bg-muted/60 transition
              `,"aria-label":"Close",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsxs(Re,{children:[e.jsxs(Ke,{className:"flex items-center gap-3 text-lg sm:text-xl font-bold",children:[e.jsx("div",{className:"h-9 w-9 sm:h-10 sm:w-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"h-5 w-5 text-primary"})}),"Add Quick Task"]}),e.jsx(_e,{className:"text-sm sm:text-base",children:"What would you like to accomplish?"})]}),e.jsxs("div",{className:"space-y-5 pt-4",children:[e.jsx(Qe,{placeholder:"Describe your task...",value:g,onChange:m=>o(m.target.value),onKeyPress:y,className:`
                  min-h-[100px] sm:min-h-[120px]
                  text-sm sm:text-base leading-relaxed
                  border-2 border-muted focus:border-primary/50
                  rounded-xl resize-none
                `,autoFocus:!0}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(T,{onClick:()=>t(!1),variant:"outline",className:"flex-1 h-11 sm:h-12 rounded-xl border-2 hover:bg-muted/60 transition",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(T,{onClick:p,disabled:!g.trim(),variant:"focus",className:"flex-1 h-11 sm:h-12 rounded-xl shadow-lg hover:shadow-xl transition",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground text-center",children:"Press Enter to create â€¢ Swipe to dismiss"})]})]})})]})})}function Ys({onCreateTask:s,className:t}){const[i,g]=v.useState(!1),{impact:o}=ve(),f=()=>{g(!0),o("medium")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O("fixed bottom-6 right-6 z-50",t),children:e.jsx(T,{onClick:f,className:O("h-16 w-16 rounded-full shadow-2xl bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary","transition-all duration-300 hover:scale-110 active:scale-95 border-2 border-white/20","shadow-glow hover:shadow-xl"),children:e.jsx(V,{className:"h-7 w-7 text-white drop-shadow-sm"})})}),e.jsx(Ws,{open:i,onOpenChange:g,onCreateTask:s})]})}const Gs=s=>{if(s<60)return"~1m";const t=Math.floor(s/60),i=Math.floor(t/60);return i>0?`${i}h ${t%60}m`:`${t}m`};function Js(){const{tasks:s,teamMembers:t}=xe(),{user:i}=de(),{showConfetti:g}=ls(),o=v.useMemo(()=>{if(t.length<=1)return null;const f=new Date,p=Ue(f),y=cs(f),j=t.map(a=>{const x=s.filter(u=>u.createdBy===a.uid),h=Es(x,p,y),n=x.filter(u=>{if(u.status!=="completed"||!u.completedAt)return!1;const d=new Date(u.completedAt);return d>=p&&d<=y}).reduce((u,d)=>u+(d.timeSpent||0),0);return{userId:a.uid,name:a.displayName||a.email,avatarUrl:a.photoURL,score:h,totalTimeSpent:n}}).sort((a,x)=>x.score-a.score);return j[0].score>0?j[0]:null},[s,t]);return v.useEffect(()=>{if(o&&i&&o.userId===i.uid){const f=new Date().toISOString().split("T")[0],p=`confetti_shown_${i.uid}_${f}`;sessionStorage.getItem(p)||(g(),sessionStorage.setItem(p,"true"))}},[o,i,g]),o?e.jsxs("div",{className:"flex items-center gap-3 p-2 pr-3 bg-gradient-to-r from-amber-50/50 via-background to-background border border-amber-200/60 dark:from-amber-950/30 dark:border-amber-800/50 rounded-full text-sm shadow-sm transition-all hover:shadow-md hover:border-amber-300/80",children:[e.jsx("div",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-amber-100 dark:bg-amber-900/50",children:e.jsx(As,{className:"h-5 w-5 text-amber-500 dark:text-amber-400"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-amber-700 dark:text-amber-300 -mb-1",children:"Top Performer"}),e.jsx("span",{className:"font-bold text-foreground truncate",children:o.name})]}),o.totalTimeSpent>0&&e.jsxs(P,{variant:"secondary",className:"text-xs font-mono flex items-center gap-1 bg-amber-100/50 dark:bg-amber-900/30 border-amber-200/50 dark:border-amber-800/50 text-amber-800 dark:text-amber-200",children:[e.jsx(Q,{className:"h-3 w-3"}),Gs(o.totalTimeSpent)]}),e.jsxs(me,{className:"h-8 w-8 border-2 border-background",children:[e.jsx(he,{src:o.avatarUrl}),e.jsx(ue,{className:"text-xs bg-muted",children:o.name.split(" ").map(f=>f[0]).join("").toUpperCase()})]})]}):null}function Je({task:s,assignedProfiles:t,onEdit:i,onDelete:g,onStartTimer:o}){const{attributes:f,listeners:p,setNodeRef:y,transform:m,transition:j,isDragging:a}=gs({id:s.id,data:{type:"Task",task:s}}),x={transition:j,transform:js.Transform.toString(m)},h=s.status==="completed",c=n=>n?n.split(" ").map(u=>u[0]).join("").toUpperCase():"";return e.jsx("div",{ref:y,style:x,...f,...p,children:e.jsx(re,{className:O("mb-4 shadow-sm hover:shadow-md transition-shadow cursor-grab active:cursor-grabbing",a&&"opacity-50 ring-2 ring-primary",h&&"bg-muted/50 opacity-70"),children:e.jsxs(ze,{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:O("font-semibold text-sm leading-snug pr-2",h&&"line-through text-muted-foreground"),children:s.title}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:n=>n.stopPropagation(),children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(ae,{align:"end",onClick:n=>n.stopPropagation(),children:[e.jsxs($,{onClick:()=>i(s),children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs($,{onClick:()=>o(s.id),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Start Timer"]}),e.jsxs($,{onClick:()=>g(s.id),className:"text-destructive",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[s.priority==="high"&&e.jsx(P,{variant:"destructive",children:"High"}),s.priority==="medium"&&e.jsx(P,{variant:"secondary",children:"Medium"}),s.dueDate&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:"h-3 w-3"})," ",new Date(s.dueDate).toLocaleDateString()]}),s.estimatedTime&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"})," ",s.estimatedTime,"m"]})]}),t.length>0&&e.jsx("div",{className:"flex items-center justify-end pt-2",children:e.jsx("div",{className:"flex -space-x-2 overflow-hidden",children:t.map(n=>e.jsxs(me,{className:"h-6 w-6 border-2 border-background",children:[e.jsx(he,{src:n.photoURL}),e.jsx(ue,{className:"text-[10px]",children:c(n.displayName)})]},n.uid))})})]})})})}const ke=15;function Xs({id:s,title:t,tasks:i,assignedProfilesMap:g,onEdit:o,onDelete:f,onStartTimer:p}){const{setNodeRef:y}=ys({id:s}),[m,j]=v.useState(ke),a=()=>{j(h=>h+ke)},x=i.slice(0,m);return e.jsxs("div",{ref:y,className:"w-72 flex-shrink-0 bg-muted/50 rounded-xl flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-border/50",children:e.jsxs("h3",{className:"font-semibold text-sm flex items-center justify-between",children:[e.jsx("span",{children:t}),e.jsx(P,{variant:"secondary",children:i.length})]})}),e.jsx("div",{className:"p-2 flex-1 overflow-y-auto",children:e.jsx(Ns,{items:i.map(h=>h.id),strategy:vs,children:i.length>0?e.jsxs(e.Fragment,{children:[x.map(h=>e.jsx(Je,{task:h,assignedProfiles:g.get(h.id)||[],onEdit:o,onDelete:f,onStartTimer:p},h.id)),i.length>m&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(T,{variant:"ghost",size:"sm",onClick:a,children:["Load More (",i.length-m," more)"]})})]}):e.jsx("div",{className:"text-center text-sm text-muted-foreground py-16 px-4 border-2 border-dashed rounded-lg m-2",children:"No tasks here."})})})]})}const Pe=[{id:"todo",title:"To Do"},{id:"in-progress",title:"In Progress"},{id:"completed",title:"Completed"}];function Zs({tasks:s,teamMembers:t,onEdit:i,onDelete:g,onStartTimer:o,onTaskStatusChange:f}){const[p,y]=v.useState(null),m=v.useMemo(()=>{const c={todo:[],"in-progress":[],completed:[]};return s.forEach(n=>{c[n.status]&&c[n.status].push(n)}),c},[s]),j=v.useMemo(()=>{const c=new Map;return s.forEach(n=>{if(n.assignedTo&&n.assignedTo.length>0){const u=n.assignedTo.map(d=>t.find(C=>C.uid===d)).filter(d=>!!d);c.set(n.id,u)}}),c},[s,t]),a=ws(bs(Ts,{activationConstraint:{distance:10}})),x=c=>{var n;((n=c.active.data.current)==null?void 0:n.type)==="Task"&&y(c.active.data.current.task)},h=c=>{var I;y(null);const{active:n,over:u}=c;if(!u)return;const d=n.id,C=u.id,A=s.find(l=>l.id===d);if(!A)return;const k=A.status,b=Pe.find(l=>l.id===C)?C:(I=s.find(l=>l.id===C))==null?void 0:I.status;!b||k===b||f(d,b)};return e.jsxs(Cs,{sensors:a,onDragStart:x,onDragEnd:h,children:[e.jsx("div",{className:"flex-1 flex gap-6 overflow-x-auto pb-4",children:Pe.map(c=>e.jsx(Xs,{id:c.id,title:c.title,tasks:m[c.id],assignedProfilesMap:j,onEdit:i,onDelete:g,onStartTimer:o},c.id))}),e.jsx(Ds,{children:p?e.jsx(Je,{task:p,assignedProfiles:j.get(p.id)||[],onEdit:()=>{},onDelete:()=>{},onStartTimer:()=>{}}):null})]})}function gt(){const{tasks:s,teamMembers:t,addTask:i,updateTask:g,deleteTask:o,toggleTaskStatus:f,toggleTaskPriority:p,setTaskFormActive:y,loading:m}=xe(),{startTaskTimer:j}=ds(),{user:a}=de(),{createTaskOffline:x,updateTaskOffline:h,deleteTaskOffline:c,toggleTaskStatusOffline:n}=ms(),u=hs(),[d,C]=v.useState(null),[A,k]=v.useState(""),[b,I]=v.useState(new Date),[l,D]=v.useState("list");v.useEffect(()=>(y(!!d),()=>y(!1)),[d,y]);const L=()=>I(r=>He(r,1)),E=()=>I(r=>Ee(r,1)),K=()=>Ce(b)?"My Day":qs(b)?"Yesterday":Qs(b)?"Tomorrow":X(b,"EEEE"),{todoTasks:N,completedTasks:M}=v.useMemo(()=>{const r=s.filter(z=>z.completedAt&&H(new Date(z.completedAt),b)?!0:Ce(b)?z.status==="completed"?!1:!!(z.dueDate&&H(new Date(z.dueDate),b)||z.dueDate&&new Date(z.dueDate)<Ue(new Date)||!z.dueDate):z.dueDate&&H(new Date(z.dueDate),b)&&z.status!=="completed"),F=r.filter(z=>z.status!=="completed"),B=r.filter(z=>z.status==="completed");return{todoTasks:F,completedTasks:B}},[s,b]),_=async r=>{!d||!(a!=null&&a.uid)||(navigator.onLine?g(d.id,r):await h(d.id,r,a.uid),C(null))},w=async()=>{if(!A.trim()||!(a!=null&&a.uid))return;const r={title:A.trim(),priority:"medium",status:"todo",createdBy:a.uid,dueDate:X(b,"yyyy-MM-dd")};navigator.onLine?i(r):await x(r,a.uid),k("")},S=r=>{const F=s.find(B=>B.id===r);F&&j(F)},R=async r=>{a!=null&&a.uid&&(navigator.onLine?o(r):await c(r,a.uid))},q=async r=>{a!=null&&a.uid&&(navigator.onLine?f(r):await n(r,a.uid))},U=(r,F)=>{const B=s.find(z=>z.id===r);B&&B.status!==F&&g(r,{status:F,completedAt:F==="completed"?new Date().toISOString():void 0})},be=r=>{r.key==="Enter"&&w()},J=r=>!r||r.length===0?[]:r.map(F=>t.find(B=>B.uid===F)).filter(F=>F!==void 0),Xe=v.useCallback(async r=>{if(!(a!=null&&a.uid))return;const F={...r,status:"todo",createdBy:a.uid,dueDate:X(b,"yyyy-MM-dd")};navigator.onLine?i({...F,createdAt:new Date().toISOString()}):await x(F,a.uid)},[a==null?void 0:a.uid,i,x,b]);return m?e.jsx(Fs,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:O("flex items-center gap-2",u?"flex-1":"w-48 justify-start"),children:!u&&e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:[e.jsx(T,{size:"sm",variant:l==="list"?"default":"ghost",onClick:()=>D("list"),className:"h-7 px-2",children:e.jsx(_s,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:l==="board"?"default":"ghost",onClick:()=>D("board"),className:"h-7 px-2",children:e.jsx(Rs,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:L,className:"rounded-full h-10 w-10",children:e.jsx(Is,{className:"h-6 w-6",strokeWidth:2.5})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:K()}),e.jsx("p",{className:"text-muted-foreground",children:X(b,"EEEE, MMMM d")})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:E,className:"rounded-full h-10 w-10",children:e.jsx(us,{className:"h-6 w-6",strokeWidth:2.5})})]}),e.jsx("div",{className:O("flex justify-end items-center gap-2",u?"flex-1":"w-48"),children:!u&&e.jsx(Js,{})})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:u?e.jsx(ne,{className:"flex-1 -mx-4",children:e.jsxs("div",{className:"px-4 space-y-6 pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full bg-muted/50 rounded-lg px-3",children:[e.jsx(V,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ce,{value:A,onChange:r=>k(r.target.value),onKeyPress:be,placeholder:"Add a new task...",className:"border-0 shadow-none focus-visible:ring-0 bg-transparent h-10"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Active Tasks"}),e.jsx(P,{variant:"secondary",children:N.length})]}),e.jsx(ee,{children:N.length>0?N.map(r=>e.jsx(Z.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,transition:{duration:.2}},children:e.jsx(Se,{task:r,onEdit:C,onDelete:R,onToggleStatus:q,onTogglePriority:p,onStartTimer:S,assignedProfiles:J(r.assignedTo)},r.id)},r.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No active tasks for this day."})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-success"}),e.jsx("h2",{className:"text-lg font-semibold text-success",children:"Completed"}),e.jsx(P,{variant:"secondary",className:"bg-success/10 text-success",children:M.length})]}),e.jsx(ee,{children:M.length>0?M.map(r=>e.jsx(Z.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,transition:{duration:.2}},children:e.jsx(Se,{task:r,onEdit:C,onDelete:R,onToggleStatus:q,onTogglePriority:p,onStartTimer:S,assignedProfiles:J(r.assignedTo)},r.id)},r.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No completed tasks for this day."})})})]})]})}):l==="list"?e.jsxs(ps,{direction:"horizontal",className:"h-full rounded-lg border shadow-sm",children:[e.jsx(Te,{defaultSize:60,minSize:40,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Active Tasks"}),e.jsx(P,{variant:"secondary",children:N.length})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full max-w-xs bg-muted/50 rounded-lg px-3",children:[e.jsx(V,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ce,{value:A,onChange:r=>k(r.target.value),onKeyPress:be,placeholder:"Add a new task...",className:"border-0 shadow-none focus-visible:ring-0 bg-transparent h-8"})]})]})}),e.jsx(ne,{className:"flex-1",children:e.jsx("div",{className:"p-4 space-y-2",children:N.length>0||M.length>0?N.map(r=>e.jsx(De,{task:r,onEdit:C,onDelete:R,onToggleStatus:q,onTogglePriority:p,onStartTimer:S,assignedProfiles:J(r.assignedTo)},r.id)):e.jsx("div",{className:"text-center py-16 text-muted-foreground",children:e.jsx("p",{children:"No tasks for this day."})})})})]})}),e.jsx(fs,{withHandle:!0}),e.jsx(Te,{defaultSize:40,minSize:30,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-success"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Completed"})]}),e.jsx(P,{variant:"secondary",children:M.length})]}),e.jsx(ne,{className:"flex-1",children:e.jsx("div",{className:"p-4 space-y-2",children:M.length>0?M.map(r=>e.jsx(De,{task:r,onEdit:C,onDelete:R,onToggleStatus:q,onTogglePriority:p,onStartTimer:S,assignedProfiles:J(r.assignedTo)},r.id)):e.jsx("div",{className:"text-center py-16 text-muted-foreground",children:e.jsx("p",{children:"No completed tasks for this day."})})})})]})})]}):e.jsx(Zs,{tasks:s,teamMembers:t,onEdit:C,onDelete:R,onStartTimer:S,onTaskStatusChange:U})})]}),u&&e.jsx(Ys,{onCreateTask:Xe}),e.jsx($e,{open:!!d,onOpenChange:()=>C(null),children:e.jsxs(xs,{className:"sm:max-w-[500px] shadow-elegant max-h-[90vh] flex flex-col p-0",children:[e.jsxs(Re,{className:"p-6 pb-4 border-b",children:[e.jsxs(Ke,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),"Edit Task"]}),e.jsx(_e,{children:"Make changes to your task here. Click save when you're done."})]}),d&&e.jsx(Ms,{task:d,onSubmit:_,onCancel:()=>C(null),teamMembers:t})]})})]})}export{gt as default};
