const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SalesTrackerPage-Bq_L6DPu.js","assets/xlsx-D4hK8F-4.js","assets/format-BmZa2Fkx.js","assets/en-US-DSSwd-Ay.js","assets/skeletons-OrUvxu0E.js","assets/trending-up-D0DttzfC.js","assets/textarea-iMbD7bqt.js","assets/index-DvSqf5q0.js","assets/resizable-C-O4PE_Y.js","assets/calendar-D4ZJ7g6y.js","assets/endOfMonth-BNqLjwTF.js","assets/checkbox-pEVMzDLQ.js","assets/index-CqAVEad7.js","assets/separator-CMjyzDEp.js","assets/drawer-CtMx6SxT.js","assets/sortable.esm-ClIdRzMj.js","assets/download-C7V0izbZ.js","assets/chevron-down-QVhbesXr.js","assets/file-down-CwB7biTZ.js","assets/SalesOpportunityPage-yHT-hehR.js","assets/DeleteConfirmationDialog-ZXLq3vwY.js","assets/award-BbtgAuia.js","assets/plus-jVcLPC9x.js","assets/send-5-KT-IdZ.js","assets/SalesToolsPage-BYPanSP8.js","assets/TasksPage-BWtgi6uA.js","assets/TaskForm-DsTePK1p.js","assets/useTouchGestures-BNpwY5ui.js","assets/select-QNqOlXgW.js","assets/DashboardPage-Daf8G9KI.js","assets/ContributionGraph-DBtThH0U.js","assets/target-1Bj3qq1r.js","assets/user-plus-MUTCKdY9.js","assets/TeamChatPage-zos32DyD.js","assets/copy-BedkSnvK.js","assets/MeetlyPage-DfrNqASs.js","assets/circle-alert-qborrgbw.js","assets/upload-DfswCkLp.js","assets/brain-BrWqHPKo.js","assets/shield-mt4kqRrh.js","assets/TimerPage-BRwagCVb.js","assets/CalendarPage-e36eYcqT.js","assets/external-link-CoQyMujz.js","assets/NotesPage-DRqap-yC.js","assets/purify.es-BFmuJLeH.js","assets/AnalyticsPage-5Nlgl86h.js","assets/ChatPage-CbV2VOJb.js","assets/ProfilePage-67aKDDiI.js"])))=>i.map(i=>d[i]);
var jK=Object.defineProperty;var BP=t=>{throw TypeError(t)};var VK=(t,e,n)=>e in t?jK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zt=(t,e,n)=>VK(t,typeof e!="symbol"?e+"":e,n),pE=(t,e,n)=>e.has(t)||BP("Cannot "+n);var Z=(t,e,n)=>(pE(t,e,"read from private field"),n?n.call(t):e.get(t)),vt=(t,e,n)=>e.has(t)?BP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(pE(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ar=(t,e,n)=>(pE(t,e,"access private method"),n);var wg=(t,e,n,r)=>({set _(i){Qe(t,e,i,n)},get _(){return Z(t,e,r)}});function $K(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const BK="modulepreload",HK=function(t){return"/"+t},HP={},qt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=HK(c),c in HP)return;HP[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":BK,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var SIe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C2={exports:{}},Q_={},S2={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m=Symbol.for("react.element"),zK=Symbol.for("react.portal"),WK=Symbol.for("react.fragment"),KK=Symbol.for("react.strict_mode"),qK=Symbol.for("react.profiler"),GK=Symbol.for("react.provider"),QK=Symbol.for("react.context"),YK=Symbol.for("react.forward_ref"),JK=Symbol.for("react.suspense"),XK=Symbol.for("react.memo"),ZK=Symbol.for("react.lazy"),zP=Symbol.iterator;function eq(t){return t===null||typeof t!="object"?null:(t=zP&&t[zP]||t["@@iterator"],typeof t=="function"?t:null)}var I2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b2=Object.assign,A2={};function ah(t,e,n){this.props=t,this.context=e,this.refs=A2,this.updater=n||I2}ah.prototype.isReactComponent={};ah.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ah.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k2(){}k2.prototype=ah.prototype;function Bb(t,e,n){this.props=t,this.context=e,this.refs=A2,this.updater=n||I2}var Hb=Bb.prototype=new k2;Hb.constructor=Bb;b2(Hb,ah.prototype);Hb.isPureReactComponent=!0;var WP=Array.isArray,x2=Object.prototype.hasOwnProperty,zb={current:null},R2={key:!0,ref:!0,__self:!0,__source:!0};function P2(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x2.call(e,r)&&!R2.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_m,type:t,key:s,ref:o,props:i,_owner:zb.current}}function tq(t,e){return{$$typeof:_m,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wb(t){return typeof t=="object"&&t!==null&&t.$$typeof===_m}function nq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var KP=/\/+/g;function mE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nq(""+t.key):e.toString(36)}function uy(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _m:case zK:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mE(o,0):r,WP(i)?(n="",t!=null&&(n=t.replace(KP,"$&/")+"/"),uy(i,e,n,"",function(l){return l})):i!=null&&(Wb(i)&&(i=tq(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(KP,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",WP(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+mE(s,a);o+=uy(s,e,n,c,i)}else if(c=eq(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+mE(s,a++),o+=uy(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tg(t,e,n){if(t==null)return t;var r=[],i=0;return uy(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mr={current:null},dy={transition:null},iq={ReactCurrentDispatcher:Mr,ReactCurrentBatchConfig:dy,ReactCurrentOwner:zb};function N2(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Tg,forEach:function(t,e,n){Tg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tg(t,function(){e++}),e},toArray:function(t){return Tg(t,function(e){return e})||[]},only:function(t){if(!Wb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=ah;ot.Fragment=WK;ot.Profiler=qK;ot.PureComponent=Bb;ot.StrictMode=KK;ot.Suspense=JK;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iq;ot.act=N2;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=b2({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)x2.call(e,c)&&!R2.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:_m,type:t.type,key:i,ref:s,props:r,_owner:o}};ot.createContext=function(t){return t={$$typeof:QK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GK,_context:t},t.Consumer=t};ot.createElement=P2;ot.createFactory=function(t){var e=P2.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:YK,render:t}};ot.isValidElement=Wb;ot.lazy=function(t){return{$$typeof:ZK,_payload:{_status:-1,_result:t},_init:rq}};ot.memo=function(t,e){return{$$typeof:XK,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=dy.transition;dy.transition={};try{t()}finally{dy.transition=e}};ot.unstable_act=N2;ot.useCallback=function(t,e){return Mr.current.useCallback(t,e)};ot.useContext=function(t){return Mr.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return Mr.current.useDeferredValue(t)};ot.useEffect=function(t,e){return Mr.current.useEffect(t,e)};ot.useId=function(){return Mr.current.useId()};ot.useImperativeHandle=function(t,e,n){return Mr.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return Mr.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return Mr.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return Mr.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return Mr.current.useReducer(t,e,n)};ot.useRef=function(t){return Mr.current.useRef(t)};ot.useState=function(t){return Mr.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return Mr.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return Mr.current.useTransition()};ot.version="18.3.1";S2.exports=ot;var g=S2.exports;const G=E2(g),Kb=$K({__proto__:null,default:G},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sq=g,oq=Symbol.for("react.element"),aq=Symbol.for("react.fragment"),cq=Object.prototype.hasOwnProperty,lq=sq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uq={key:!0,ref:!0,__self:!0,__source:!0};function O2(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cq.call(e,r)&&!uq.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oq,type:t,key:s,ref:o,props:i,_owner:lq.current}}Q_.Fragment=aq;Q_.jsx=O2;Q_.jsxs=O2;C2.exports=Q_;var p=C2.exports,M2={exports:{}},bi={},D2={exports:{}},L2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,j){var se=U.length;U.push(j);e:for(;0<se;){var Ce=se-1>>>1,V=U[Ce];if(0<i(V,j))U[Ce]=j,U[se]=V,se=Ce;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var j=U[0],se=U.pop();if(se!==j){U[0]=se;e:for(var Ce=0,V=U.length,W=V>>>1;Ce<W;){var Y=2*(Ce+1)-1,re=U[Y],ge=Y+1,ne=U[ge];if(0>i(re,se))ge<V&&0>i(ne,re)?(U[Ce]=ne,U[ge]=se,Ce=ge):(U[Ce]=re,U[Y]=se,Ce=Y);else if(ge<V&&0>i(ne,se))U[Ce]=ne,U[ge]=se,Ce=ge;else break e}}return j}function i(U,j){var se=U.sortIndex-j.sortIndex;return se!==0?se:U.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,m=!1,w=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var j=n(l);j!==null;){if(j.callback===null)r(l);else if(j.startTime<=U)r(l),j.sortIndex=j.expirationTime,e(c,j);else break;j=n(l)}}function b(U){if(y=!1,C(U),!w)if(n(c)!==null)w=!0,Q(M);else{var j=n(l);j!==null&&te(b,j.startTime-U)}}function M(U,j){w=!1,y&&(y=!1,E(I),I=-1),m=!0;var se=f;try{for(C(j),d=n(c);d!==null&&(!(d.expirationTime>j)||U&&!N());){var Ce=d.callback;if(typeof Ce=="function"){d.callback=null,f=d.priorityLevel;var V=Ce(d.expirationTime<=j);j=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(c)&&r(c),C(j)}else r(c);d=n(c)}if(d!==null)var W=!0;else{var Y=n(l);Y!==null&&te(b,Y.startTime-j),W=!1}return W}finally{d=null,f=se,m=!1}}var L=!1,k=null,I=-1,A=5,R=-1;function N(){return!(t.unstable_now()-R<A)}function P(){if(k!==null){var U=t.unstable_now();R=U;var j=!0;try{j=k(!0,U)}finally{j?x():(L=!1,k=null)}}else L=!1}var x;if(typeof T=="function")x=function(){T(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,z=H.port2;H.port1.onmessage=P,x=function(){z.postMessage(null)}}else x=function(){v(P,0)};function Q(U){k=U,L||(L=!0,x())}function te(U,j){I=v(function(){U(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,Q(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var se=f;f=j;try{return U()}finally{f=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,j){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var se=f;f=U;try{return j()}finally{f=se}},t.unstable_scheduleCallback=function(U,j,se){var Ce=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ce+se:Ce):se=Ce,U){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=se+V,U={id:u++,callback:j,priorityLevel:U,startTime:se,expirationTime:V,sortIndex:-1},se>Ce?(U.sortIndex=se,e(l,U),n(c)===null&&U===n(l)&&(y?(E(I),I=-1):y=!0,te(b,se-Ce))):(U.sortIndex=V,e(c,U),w||m||(w=!0,Q(M))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var j=f;return function(){var se=f;f=j;try{return U.apply(this,arguments)}finally{f=se}}}})(L2);D2.exports=L2;var dq=D2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hq=g,Si=dq;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F2=new Set,fp={};function iu(t,e){Sd(t,e),Sd(t+"Capture",e)}function Sd(t,e){for(fp[t]=e,t=0;t<e.length;t++)F2.add(e[t])}var Go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QC=Object.prototype.hasOwnProperty,fq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qP={},GP={};function pq(t){return QC.call(GP,t)?!0:QC.call(qP,t)?!1:fq.test(t)?GP[t]=!0:(qP[t]=!0,!1)}function mq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gq(t,e,n,r){if(e===null||typeof e>"u"||mq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nr[t]=new Dr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nr[e]=new Dr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nr[t]=new Dr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nr[t]=new Dr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nr[t]=new Dr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nr[t]=new Dr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nr[t]=new Dr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nr[t]=new Dr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nr[t]=new Dr(t,5,!1,t.toLowerCase(),null,!1,!1)});var qb=/[\-:]([a-z])/g;function Gb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qb,Gb);nr[e]=new Dr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qb,Gb);nr[e]=new Dr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qb,Gb);nr[e]=new Dr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nr[t]=new Dr(t,1,!1,t.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nr[t]=new Dr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qb(t,e,n,r){var i=nr.hasOwnProperty(e)?nr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gq(e,n,i,r)&&(n=null),r||i===null?pq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var da=hq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eg=Symbol.for("react.element"),Fu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),Yb=Symbol.for("react.strict_mode"),YC=Symbol.for("react.profiler"),U2=Symbol.for("react.provider"),j2=Symbol.for("react.context"),Jb=Symbol.for("react.forward_ref"),JC=Symbol.for("react.suspense"),XC=Symbol.for("react.suspense_list"),Xb=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),V2=Symbol.for("react.offscreen"),QP=Symbol.iterator;function Qh(t){return t===null||typeof t!="object"?null:(t=QP&&t[QP]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,gE;function gf(t){if(gE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gE=e&&e[1]||""}return`
`+gE+t}var yE=!1;function vE(t,e){if(!t||yE)return"";yE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{yE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gf(t):""}function yq(t){switch(t.tag){case 5:return gf(t.type);case 16:return gf("Lazy");case 13:return gf("Suspense");case 19:return gf("SuspenseList");case 0:case 2:case 15:return t=vE(t.type,!1),t;case 11:return t=vE(t.type.render,!1),t;case 1:return t=vE(t.type,!0),t;default:return""}}function ZC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uu:return"Fragment";case Fu:return"Portal";case YC:return"Profiler";case Yb:return"StrictMode";case JC:return"Suspense";case XC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j2:return(t.displayName||"Context")+".Consumer";case U2:return(t._context.displayName||"Context")+".Provider";case Jb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xb:return e=t.displayName||null,e!==null?e:ZC(t.type)||"Memo";case Aa:e=t._payload,t=t._init;try{return ZC(t(e))}catch{}}return null}function vq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ZC(e);case 8:return e===Yb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _q(t){var e=$2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cg(t){t._valueTracker||(t._valueTracker=_q(t))}function B2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eS(t,e){var n=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H2(t,e){e=e.checked,e!=null&&Qb(t,"checked",e,!1)}function tS(t,e){H2(t,e);var n=yc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nS(t,e.type,n):e.hasOwnProperty("defaultValue")&&nS(t,e.type,yc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function JP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nS(t,e,n){(e!=="number"||qy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yf=Array.isArray;function Yu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function XP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(yf(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yc(n)}}function z2(t,e){var n=yc(e.value),r=yc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sg,K2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sg=Sg||document.createElement("div"),Sg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wq=["Webkit","ms","Moz","O"];Object.keys(Pf).forEach(function(t){wq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pf[e]=Pf[t]})});function q2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pf.hasOwnProperty(t)&&Pf[t]?(""+e).trim():e+"px"}function G2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Tq=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sS(t,e){if(e){if(Tq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function oS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aS=null;function Zb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cS=null,Ju=null,Xu=null;function eN(t){if(t=Em(t)){if(typeof cS!="function")throw Error(le(280));var e=t.stateNode;e&&(e=ew(e),cS(t.stateNode,t.type,e))}}function Q2(t){Ju?Xu?Xu.push(t):Xu=[t]:Ju=t}function Y2(){if(Ju){var t=Ju,e=Xu;if(Xu=Ju=null,eN(t),e)for(t=0;t<e.length;t++)eN(e[t])}}function J2(t,e){return t(e)}function X2(){}var _E=!1;function Z2(t,e,n){if(_E)return t(e,n);_E=!0;try{return J2(t,e,n)}finally{_E=!1,(Ju!==null||Xu!==null)&&(X2(),Y2())}}function mp(t,e){var n=t.stateNode;if(n===null)return null;var r=ew(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var lS=!1;if(Go)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){lS=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{lS=!1}function Eq(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Nf=!1,Gy=null,Qy=!1,uS=null,Cq={onError:function(t){Nf=!0,Gy=t}};function Sq(t,e,n,r,i,s,o,a,c){Nf=!1,Gy=null,Eq.apply(Cq,arguments)}function Iq(t,e,n,r,i,s,o,a,c){if(Sq.apply(this,arguments),Nf){if(Nf){var l=Gy;Nf=!1,Gy=null}else throw Error(le(198));Qy||(Qy=!0,uS=l)}}function su(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tN(t){if(su(t)!==t)throw Error(le(188))}function bq(t){var e=t.alternate;if(!e){if(e=su(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tN(i),t;if(s===r)return tN(i),e;s=s.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function tF(t){return t=bq(t),t!==null?nF(t):null}function nF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nF(t);if(e!==null)return e;t=t.sibling}return null}var rF=Si.unstable_scheduleCallback,nN=Si.unstable_cancelCallback,Aq=Si.unstable_shouldYield,kq=Si.unstable_requestPaint,pn=Si.unstable_now,xq=Si.unstable_getCurrentPriorityLevel,eA=Si.unstable_ImmediatePriority,iF=Si.unstable_UserBlockingPriority,Yy=Si.unstable_NormalPriority,Rq=Si.unstable_LowPriority,sF=Si.unstable_IdlePriority,Y_=null,Js=null;function Pq(t){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(Y_,t,void 0,(t.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:Mq,Nq=Math.log,Oq=Math.LN2;function Mq(t){return t>>>=0,t===0?32:31-(Nq(t)/Oq|0)|0}var Ig=64,bg=4194304;function vf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=vf(a):(s&=o,s!==0&&(r=vf(s)))}else o=n&~i,o!==0?r=vf(o):s!==0&&(r=vf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ds(e),i=1<<n,r|=t[n],e&=~i;return r}function Dq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ds(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=Dq(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function dS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oF(){var t=Ig;return Ig<<=1,!(Ig&4194240)&&(Ig=64),t}function wE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ds(e),t[e]=n}function Fq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ds(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function tA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ds(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var bt=0;function aF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cF,nA,lF,uF,dF,hS=!1,Ag=[],Ja=null,Xa=null,Za=null,gp=new Map,yp=new Map,Na=[],Uq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rN(t,e){switch(t){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":gp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(e.pointerId)}}function Jh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Em(e),e!==null&&nA(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jq(t,e,n,r,i){switch(e){case"focusin":return Ja=Jh(Ja,t,e,n,r,i),!0;case"dragenter":return Xa=Jh(Xa,t,e,n,r,i),!0;case"mouseover":return Za=Jh(Za,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return gp.set(s,Jh(gp.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yp.set(s,Jh(yp.get(s)||null,t,e,n,r,i)),!0}return!1}function hF(t){var e=ul(t.target);if(e!==null){var n=su(e);if(n!==null){if(e=n.tag,e===13){if(e=eF(n),e!==null){t.blockedOn=e,dF(t.priority,function(){lF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);aS=r,n.target.dispatchEvent(r),aS=null}else return e=Em(n),e!==null&&nA(e),t.blockedOn=n,!1;e.shift()}return!0}function iN(t,e,n){hy(t)&&n.delete(e)}function Vq(){hS=!1,Ja!==null&&hy(Ja)&&(Ja=null),Xa!==null&&hy(Xa)&&(Xa=null),Za!==null&&hy(Za)&&(Za=null),gp.forEach(iN),yp.forEach(iN)}function Xh(t,e){t.blockedOn===e&&(t.blockedOn=null,hS||(hS=!0,Si.unstable_scheduleCallback(Si.unstable_NormalPriority,Vq)))}function vp(t){function e(i){return Xh(i,t)}if(0<Ag.length){Xh(Ag[0],t);for(var n=1;n<Ag.length;n++){var r=Ag[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ja!==null&&Xh(Ja,t),Xa!==null&&Xh(Xa,t),Za!==null&&Xh(Za,t),gp.forEach(e),yp.forEach(e),n=0;n<Na.length;n++)r=Na[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Na.length&&(n=Na[0],n.blockedOn===null);)hF(n),n.blockedOn===null&&Na.shift()}var Zu=da.ReactCurrentBatchConfig,Xy=!0;function $q(t,e,n,r){var i=bt,s=Zu.transition;Zu.transition=null;try{bt=1,rA(t,e,n,r)}finally{bt=i,Zu.transition=s}}function Bq(t,e,n,r){var i=bt,s=Zu.transition;Zu.transition=null;try{bt=4,rA(t,e,n,r)}finally{bt=i,Zu.transition=s}}function rA(t,e,n,r){if(Xy){var i=fS(t,e,n,r);if(i===null)RE(t,e,r,Zy,n),rN(t,r);else if(jq(i,t,e,n,r))r.stopPropagation();else if(rN(t,r),e&4&&-1<Uq.indexOf(t)){for(;i!==null;){var s=Em(i);if(s!==null&&cF(s),s=fS(t,e,n,r),s===null&&RE(t,e,r,Zy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else RE(t,e,r,null,n)}}var Zy=null;function fS(t,e,n,r){if(Zy=null,t=Zb(r),t=ul(t),t!==null)if(e=su(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eF(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zy=t,null}function fF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xq()){case eA:return 1;case iF:return 4;case Yy:case Rq:return 16;case sF:return 536870912;default:return 16}default:return 16}}var za=null,iA=null,fy=null;function pF(){if(fy)return fy;var t,e=iA,n=e.length,r,i="value"in za?za.value:za.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return fy=i.slice(t,1<r?1-r:void 0)}function py(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kg(){return!0}function sN(){return!1}function Ai(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kg:sN,this.isPropagationStopped=sN,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kg)},persist:function(){},isPersistent:kg}),e}var ch={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sA=Ai(ch),Tm=tn({},ch,{view:0,detail:0}),Hq=Ai(Tm),TE,EE,Zh,J_=tn({},Tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zh&&(Zh&&t.type==="mousemove"?(TE=t.screenX-Zh.screenX,EE=t.screenY-Zh.screenY):EE=TE=0,Zh=t),TE)},movementY:function(t){return"movementY"in t?t.movementY:EE}}),oN=Ai(J_),zq=tn({},J_,{dataTransfer:0}),Wq=Ai(zq),Kq=tn({},Tm,{relatedTarget:0}),CE=Ai(Kq),qq=tn({},ch,{animationName:0,elapsedTime:0,pseudoElement:0}),Gq=Ai(qq),Qq=tn({},ch,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yq=Ai(Qq),Jq=tn({},ch,{data:0}),aN=Ai(Jq),Xq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eG[t])?!!e[t]:!1}function oA(){return tG}var nG=tn({},Tm,{key:function(t){if(t.key){var e=Xq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=py(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oA,charCode:function(t){return t.type==="keypress"?py(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?py(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rG=Ai(nG),iG=tn({},J_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cN=Ai(iG),sG=tn({},Tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oA}),oG=Ai(sG),aG=tn({},ch,{propertyName:0,elapsedTime:0,pseudoElement:0}),cG=Ai(aG),lG=tn({},J_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uG=Ai(lG),dG=[9,13,27,32],aA=Go&&"CompositionEvent"in window,Of=null;Go&&"documentMode"in document&&(Of=document.documentMode);var hG=Go&&"TextEvent"in window&&!Of,mF=Go&&(!aA||Of&&8<Of&&11>=Of),lN=" ",uN=!1;function gF(t,e){switch(t){case"keyup":return dG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ju=!1;function fG(t,e){switch(t){case"compositionend":return yF(e);case"keypress":return e.which!==32?null:(uN=!0,lN);case"textInput":return t=e.data,t===lN&&uN?null:t;default:return null}}function pG(t,e){if(ju)return t==="compositionend"||!aA&&gF(t,e)?(t=pF(),fy=iA=za=null,ju=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mF&&e.locale!=="ko"?null:e.data;default:return null}}var mG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mG[t.type]:e==="textarea"}function vF(t,e,n,r){Q2(r),e=ev(e,"onChange"),0<e.length&&(n=new sA("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mf=null,_p=null;function gG(t){xF(t,0)}function X_(t){var e=Bu(t);if(B2(e))return t}function yG(t,e){if(t==="change")return e}var _F=!1;if(Go){var SE;if(Go){var IE="oninput"in document;if(!IE){var hN=document.createElement("div");hN.setAttribute("oninput","return;"),IE=typeof hN.oninput=="function"}SE=IE}else SE=!1;_F=SE&&(!document.documentMode||9<document.documentMode)}function fN(){Mf&&(Mf.detachEvent("onpropertychange",wF),_p=Mf=null)}function wF(t){if(t.propertyName==="value"&&X_(_p)){var e=[];vF(e,_p,t,Zb(t)),Z2(gG,e)}}function vG(t,e,n){t==="focusin"?(fN(),Mf=e,_p=n,Mf.attachEvent("onpropertychange",wF)):t==="focusout"&&fN()}function _G(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return X_(_p)}function wG(t,e){if(t==="click")return X_(e)}function TG(t,e){if(t==="input"||t==="change")return X_(e)}function EG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ms=typeof Object.is=="function"?Object.is:EG;function wp(t,e){if(ms(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!QC.call(e,i)||!ms(t[i],e[i]))return!1}return!0}function pN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mN(t,e){var n=pN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pN(n)}}function TF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function EF(){for(var t=window,e=qy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qy(t.document)}return e}function cA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CG(t){var e=EF(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TF(n.ownerDocument.documentElement,n)){if(r!==null&&cA(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mN(n,s);var o=mN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SG=Go&&"documentMode"in document&&11>=document.documentMode,Vu=null,pS=null,Df=null,mS=!1;function gN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mS||Vu==null||Vu!==qy(r)||(r=Vu,"selectionStart"in r&&cA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Df&&wp(Df,r)||(Df=r,r=ev(pS,"onSelect"),0<r.length&&(e=new sA("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vu)))}function xg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $u={animationend:xg("Animation","AnimationEnd"),animationiteration:xg("Animation","AnimationIteration"),animationstart:xg("Animation","AnimationStart"),transitionend:xg("Transition","TransitionEnd")},bE={},CF={};Go&&(CF=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function Z_(t){if(bE[t])return bE[t];if(!$u[t])return t;var e=$u[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CF)return bE[t]=e[n];return t}var SF=Z_("animationend"),IF=Z_("animationiteration"),bF=Z_("animationstart"),AF=Z_("transitionend"),kF=new Map,yN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oc(t,e){kF.set(t,e),iu(e,[t])}for(var AE=0;AE<yN.length;AE++){var kE=yN[AE],IG=kE.toLowerCase(),bG=kE[0].toUpperCase()+kE.slice(1);Oc(IG,"on"+bG)}Oc(SF,"onAnimationEnd");Oc(IF,"onAnimationIteration");Oc(bF,"onAnimationStart");Oc("dblclick","onDoubleClick");Oc("focusin","onFocus");Oc("focusout","onBlur");Oc(AF,"onTransitionEnd");Sd("onMouseEnter",["mouseout","mouseover"]);Sd("onMouseLeave",["mouseout","mouseover"]);Sd("onPointerEnter",["pointerout","pointerover"]);Sd("onPointerLeave",["pointerout","pointerover"]);iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AG=new Set("cancel close invalid load scroll toggle".split(" ").concat(_f));function vN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Iq(r,e,void 0,t),t.currentTarget=null}function xF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;vN(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;vN(i,a,l),s=c}}}if(Qy)throw t=uS,Qy=!1,uS=null,t}function Vt(t,e){var n=e[wS];n===void 0&&(n=e[wS]=new Set);var r=t+"__bubble";n.has(r)||(RF(e,t,2,!1),n.add(r))}function xE(t,e,n){var r=0;e&&(r|=4),RF(n,t,r,e)}var Rg="_reactListening"+Math.random().toString(36).slice(2);function Tp(t){if(!t[Rg]){t[Rg]=!0,F2.forEach(function(n){n!=="selectionchange"&&(AG.has(n)||xE(n,!1,t),xE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rg]||(e[Rg]=!0,xE("selectionchange",!1,e))}}function RF(t,e,n,r){switch(fF(e)){case 1:var i=$q;break;case 4:i=Bq;break;default:i=rA}n=i.bind(null,e,n,t),i=void 0,!lS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function RE(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ul(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Z2(function(){var l=s,u=Zb(n),d=[];e:{var f=kF.get(t);if(f!==void 0){var m=sA,w=t;switch(t){case"keypress":if(py(n)===0)break e;case"keydown":case"keyup":m=rG;break;case"focusin":w="focus",m=CE;break;case"focusout":w="blur",m=CE;break;case"beforeblur":case"afterblur":m=CE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=oN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Wq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oG;break;case SF:case IF:case bF:m=Gq;break;case AF:m=cG;break;case"scroll":m=Hq;break;case"wheel":m=uG;break;case"copy":case"cut":case"paste":m=Yq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cN}var y=(e&4)!==0,v=!y&&t==="scroll",E=y?f!==null?f+"Capture":null:f;y=[];for(var T=l,C;T!==null;){C=T;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,E!==null&&(b=mp(T,E),b!=null&&y.push(Ep(T,b,C)))),v)break;T=T.return}0<y.length&&(f=new m(f,w,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==aS&&(w=n.relatedTarget||n.fromElement)&&(ul(w)||w[Qo]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=l,w=w?ul(w):null,w!==null&&(v=su(w),w!==v||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=l),m!==w)){if(y=oN,b="onMouseLeave",E="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(y=cN,b="onPointerLeave",E="onPointerEnter",T="pointer"),v=m==null?f:Bu(m),C=w==null?f:Bu(w),f=new y(b,T+"leave",m,n,u),f.target=v,f.relatedTarget=C,b=null,ul(u)===l&&(y=new y(E,T+"enter",w,n,u),y.target=C,y.relatedTarget=v,b=y),v=b,m&&w)t:{for(y=m,E=w,T=0,C=y;C;C=wu(C))T++;for(C=0,b=E;b;b=wu(b))C++;for(;0<T-C;)y=wu(y),T--;for(;0<C-T;)E=wu(E),C--;for(;T--;){if(y===E||E!==null&&y===E.alternate)break t;y=wu(y),E=wu(E)}y=null}else y=null;m!==null&&_N(d,f,m,y,!1),w!==null&&v!==null&&_N(d,v,w,y,!0)}}e:{if(f=l?Bu(l):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=yG;else if(dN(f))if(_F)M=TG;else{M=_G;var L=vG}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=wG);if(M&&(M=M(t,l))){vF(d,M,n,u);break e}L&&L(t,f,l),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&nS(f,"number",f.value)}switch(L=l?Bu(l):window,t){case"focusin":(dN(L)||L.contentEditable==="true")&&(Vu=L,pS=l,Df=null);break;case"focusout":Df=pS=Vu=null;break;case"mousedown":mS=!0;break;case"contextmenu":case"mouseup":case"dragend":mS=!1,gN(d,n,u);break;case"selectionchange":if(SG)break;case"keydown":case"keyup":gN(d,n,u)}var k;if(aA)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ju?gF(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(mF&&n.locale!=="ko"&&(ju||I!=="onCompositionStart"?I==="onCompositionEnd"&&ju&&(k=pF()):(za=u,iA="value"in za?za.value:za.textContent,ju=!0)),L=ev(l,I),0<L.length&&(I=new aN(I,t,null,n,u),d.push({event:I,listeners:L}),k?I.data=k:(k=yF(n),k!==null&&(I.data=k)))),(k=hG?fG(t,n):pG(t,n))&&(l=ev(l,"onBeforeInput"),0<l.length&&(u=new aN("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=k))}xF(d,e)})}function Ep(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ev(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mp(t,n),s!=null&&r.unshift(Ep(t,s,i)),s=mp(t,e),s!=null&&r.push(Ep(t,s,i))),t=t.return}return r}function wu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _N(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=mp(n,s),c!=null&&o.unshift(Ep(n,c,a))):i||(c=mp(n,s),c!=null&&o.push(Ep(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kG=/\r\n?/g,xG=/\u0000|\uFFFD/g;function wN(t){return(typeof t=="string"?t:""+t).replace(kG,`
`).replace(xG,"")}function Pg(t,e,n){if(e=wN(e),wN(t)!==e&&n)throw Error(le(425))}function tv(){}var gS=null,yS=null;function vS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _S=typeof setTimeout=="function"?setTimeout:void 0,RG=typeof clearTimeout=="function"?clearTimeout:void 0,TN=typeof Promise=="function"?Promise:void 0,PG=typeof queueMicrotask=="function"?queueMicrotask:typeof TN<"u"?function(t){return TN.resolve(null).then(t).catch(NG)}:_S;function NG(t){setTimeout(function(){throw t})}function PE(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vp(e)}function ec(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lh=Math.random().toString(36).slice(2),js="__reactFiber$"+lh,Cp="__reactProps$"+lh,Qo="__reactContainer$"+lh,wS="__reactEvents$"+lh,OG="__reactListeners$"+lh,MG="__reactHandles$"+lh;function ul(t){var e=t[js];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qo]||n[js]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EN(t);t!==null;){if(n=t[js])return n;t=EN(t)}return e}t=n,n=t.parentNode}return null}function Em(t){return t=t[js]||t[Qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function ew(t){return t[Cp]||null}var TS=[],Hu=-1;function Mc(t){return{current:t}}function Bt(t){0>Hu||(t.current=TS[Hu],TS[Hu]=null,Hu--)}function Ft(t,e){Hu++,TS[Hu]=t.current,t.current=e}var vc={},vr=Mc(vc),Zr=Mc(!1),Nl=vc;function Id(t,e){var n=t.type.contextTypes;if(!n)return vc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ei(t){return t=t.childContextTypes,t!=null}function nv(){Bt(Zr),Bt(vr)}function CN(t,e,n){if(vr.current!==vc)throw Error(le(168));Ft(vr,e),Ft(Zr,n)}function PF(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(le(108,vq(t)||"Unknown",i));return tn({},n,r)}function rv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vc,Nl=vr.current,Ft(vr,t),Ft(Zr,Zr.current),!0}function SN(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=PF(t,e,Nl),r.__reactInternalMemoizedMergedChildContext=t,Bt(Zr),Bt(vr),Ft(vr,t)):Bt(Zr),Ft(Zr,n)}var Po=null,tw=!1,NE=!1;function NF(t){Po===null?Po=[t]:Po.push(t)}function DG(t){tw=!0,NF(t)}function Dc(){if(!NE&&Po!==null){NE=!0;var t=0,e=bt;try{var n=Po;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Po=null,tw=!1}catch(i){throw Po!==null&&(Po=Po.slice(t+1)),rF(eA,Dc),i}finally{bt=e,NE=!1}}return null}var zu=[],Wu=0,iv=null,sv=0,Oi=[],Mi=0,Ol=null,Do=1,Lo="";function Yc(t,e){zu[Wu++]=sv,zu[Wu++]=iv,iv=t,sv=e}function OF(t,e,n){Oi[Mi++]=Do,Oi[Mi++]=Lo,Oi[Mi++]=Ol,Ol=t;var r=Do;t=Lo;var i=32-ds(r)-1;r&=~(1<<i),n+=1;var s=32-ds(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Do=1<<32-ds(e)+i|n<<i|r,Lo=s+t}else Do=1<<s|n<<i|r,Lo=t}function lA(t){t.return!==null&&(Yc(t,1),OF(t,1,0))}function uA(t){for(;t===iv;)iv=zu[--Wu],zu[Wu]=null,sv=zu[--Wu],zu[Wu]=null;for(;t===Ol;)Ol=Oi[--Mi],Oi[Mi]=null,Lo=Oi[--Mi],Oi[Mi]=null,Do=Oi[--Mi],Oi[Mi]=null}var vi=null,mi=null,Kt=!1,is=null;function MF(t,e){var n=Ui(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function IN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vi=t,mi=ec(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vi=t,mi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ol!==null?{id:Do,overflow:Lo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ui(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vi=t,mi=null,!0):!1;default:return!1}}function ES(t){return(t.mode&1)!==0&&(t.flags&128)===0}function CS(t){if(Kt){var e=mi;if(e){var n=e;if(!IN(t,e)){if(ES(t))throw Error(le(418));e=ec(n.nextSibling);var r=vi;e&&IN(t,e)?MF(r,n):(t.flags=t.flags&-4097|2,Kt=!1,vi=t)}}else{if(ES(t))throw Error(le(418));t.flags=t.flags&-4097|2,Kt=!1,vi=t}}}function bN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vi=t}function Ng(t){if(t!==vi)return!1;if(!Kt)return bN(t),Kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vS(t.type,t.memoizedProps)),e&&(e=mi)){if(ES(t))throw DF(),Error(le(418));for(;e;)MF(t,e),e=ec(e.nextSibling)}if(bN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mi=ec(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mi=null}}else mi=vi?ec(t.stateNode.nextSibling):null;return!0}function DF(){for(var t=mi;t;)t=ec(t.nextSibling)}function bd(){mi=vi=null,Kt=!1}function dA(t){is===null?is=[t]:is.push(t)}var LG=da.ReactCurrentBatchConfig;function ef(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Og(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AN(t){var e=t._init;return e(t._payload)}function LF(t){function e(E,T){if(t){var C=E.deletions;C===null?(E.deletions=[T],E.flags|=16):C.push(T)}}function n(E,T){if(!t)return null;for(;T!==null;)e(E,T),T=T.sibling;return null}function r(E,T){for(E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function i(E,T){return E=ic(E,T),E.index=0,E.sibling=null,E}function s(E,T,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<T?(E.flags|=2,T):C):(E.flags|=2,T)):(E.flags|=1048576,T)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,T,C,b){return T===null||T.tag!==6?(T=jE(C,E.mode,b),T.return=E,T):(T=i(T,C),T.return=E,T)}function c(E,T,C,b){var M=C.type;return M===Uu?u(E,T,C.props.children,b,C.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Aa&&AN(M)===T.type)?(b=i(T,C.props),b.ref=ef(E,T,C),b.return=E,b):(b=Ty(C.type,C.key,C.props,null,E.mode,b),b.ref=ef(E,T,C),b.return=E,b)}function l(E,T,C,b){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=VE(C,E.mode,b),T.return=E,T):(T=i(T,C.children||[]),T.return=E,T)}function u(E,T,C,b,M){return T===null||T.tag!==7?(T=bl(C,E.mode,b,M),T.return=E,T):(T=i(T,C),T.return=E,T)}function d(E,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=jE(""+T,E.mode,C),T.return=E,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Eg:return C=Ty(T.type,T.key,T.props,null,E.mode,C),C.ref=ef(E,null,T),C.return=E,C;case Fu:return T=VE(T,E.mode,C),T.return=E,T;case Aa:var b=T._init;return d(E,b(T._payload),C)}if(yf(T)||Qh(T))return T=bl(T,E.mode,C,null),T.return=E,T;Og(E,T)}return null}function f(E,T,C,b){var M=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return M!==null?null:a(E,T,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Eg:return C.key===M?c(E,T,C,b):null;case Fu:return C.key===M?l(E,T,C,b):null;case Aa:return M=C._init,f(E,T,M(C._payload),b)}if(yf(C)||Qh(C))return M!==null?null:u(E,T,C,b,null);Og(E,C)}return null}function m(E,T,C,b,M){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(C)||null,a(T,E,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Eg:return E=E.get(b.key===null?C:b.key)||null,c(T,E,b,M);case Fu:return E=E.get(b.key===null?C:b.key)||null,l(T,E,b,M);case Aa:var L=b._init;return m(E,T,C,L(b._payload),M)}if(yf(b)||Qh(b))return E=E.get(C)||null,u(T,E,b,M,null);Og(T,b)}return null}function w(E,T,C,b){for(var M=null,L=null,k=T,I=T=0,A=null;k!==null&&I<C.length;I++){k.index>I?(A=k,k=null):A=k.sibling;var R=f(E,k,C[I],b);if(R===null){k===null&&(k=A);break}t&&k&&R.alternate===null&&e(E,k),T=s(R,T,I),L===null?M=R:L.sibling=R,L=R,k=A}if(I===C.length)return n(E,k),Kt&&Yc(E,I),M;if(k===null){for(;I<C.length;I++)k=d(E,C[I],b),k!==null&&(T=s(k,T,I),L===null?M=k:L.sibling=k,L=k);return Kt&&Yc(E,I),M}for(k=r(E,k);I<C.length;I++)A=m(k,E,I,C[I],b),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?I:A.key),T=s(A,T,I),L===null?M=A:L.sibling=A,L=A);return t&&k.forEach(function(N){return e(E,N)}),Kt&&Yc(E,I),M}function y(E,T,C,b){var M=Qh(C);if(typeof M!="function")throw Error(le(150));if(C=M.call(C),C==null)throw Error(le(151));for(var L=M=null,k=T,I=T=0,A=null,R=C.next();k!==null&&!R.done;I++,R=C.next()){k.index>I?(A=k,k=null):A=k.sibling;var N=f(E,k,R.value,b);if(N===null){k===null&&(k=A);break}t&&k&&N.alternate===null&&e(E,k),T=s(N,T,I),L===null?M=N:L.sibling=N,L=N,k=A}if(R.done)return n(E,k),Kt&&Yc(E,I),M;if(k===null){for(;!R.done;I++,R=C.next())R=d(E,R.value,b),R!==null&&(T=s(R,T,I),L===null?M=R:L.sibling=R,L=R);return Kt&&Yc(E,I),M}for(k=r(E,k);!R.done;I++,R=C.next())R=m(k,E,I,R.value,b),R!==null&&(t&&R.alternate!==null&&k.delete(R.key===null?I:R.key),T=s(R,T,I),L===null?M=R:L.sibling=R,L=R);return t&&k.forEach(function(P){return e(E,P)}),Kt&&Yc(E,I),M}function v(E,T,C,b){if(typeof C=="object"&&C!==null&&C.type===Uu&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Eg:e:{for(var M=C.key,L=T;L!==null;){if(L.key===M){if(M=C.type,M===Uu){if(L.tag===7){n(E,L.sibling),T=i(L,C.props.children),T.return=E,E=T;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Aa&&AN(M)===L.type){n(E,L.sibling),T=i(L,C.props),T.ref=ef(E,L,C),T.return=E,E=T;break e}n(E,L);break}else e(E,L);L=L.sibling}C.type===Uu?(T=bl(C.props.children,E.mode,b,C.key),T.return=E,E=T):(b=Ty(C.type,C.key,C.props,null,E.mode,b),b.ref=ef(E,T,C),b.return=E,E=b)}return o(E);case Fu:e:{for(L=C.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(E,T.sibling),T=i(T,C.children||[]),T.return=E,E=T;break e}else{n(E,T);break}else e(E,T);T=T.sibling}T=VE(C,E.mode,b),T.return=E,E=T}return o(E);case Aa:return L=C._init,v(E,T,L(C._payload),b)}if(yf(C))return w(E,T,C,b);if(Qh(C))return y(E,T,C,b);Og(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(E,T.sibling),T=i(T,C),T.return=E,E=T):(n(E,T),T=jE(C,E.mode,b),T.return=E,E=T),o(E)):n(E,T)}return v}var Ad=LF(!0),FF=LF(!1),ov=Mc(null),av=null,Ku=null,hA=null;function fA(){hA=Ku=av=null}function pA(t){var e=ov.current;Bt(ov),t._currentValue=e}function SS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ed(t,e){av=t,hA=Ku=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qr=!0),t.firstContext=null)}function Bi(t){var e=t._currentValue;if(hA!==t)if(t={context:t,memoizedValue:e,next:null},Ku===null){if(av===null)throw Error(le(308));Ku=t,av.dependencies={lanes:0,firstContext:t}}else Ku=Ku.next=t;return e}var dl=null;function mA(t){dl===null?dl=[t]:dl.push(t)}function UF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mA(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yo(t,r)}function Yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ka=!1;function gA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yo(t,n)}return i=r.interleaved,i===null?(e.next=e,mA(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yo(t,n)}function my(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tA(t,n)}}function kN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cv(t,e,n,r){var i=t.updateQueue;ka=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,y=a;switch(f=e,m=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){d=w.call(m,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,f=typeof w=="function"?w.call(m,d,f):w,f==null)break e;d=tn({},d,f);break e;case 2:ka=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Dl|=o,t.lanes=o,t.memoizedState=d}}function xN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var Cm={},Xs=Mc(Cm),Sp=Mc(Cm),Ip=Mc(Cm);function hl(t){if(t===Cm)throw Error(le(174));return t}function yA(t,e){switch(Ft(Ip,e),Ft(Sp,t),Ft(Xs,Cm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iS(e,t)}Bt(Xs),Ft(Xs,e)}function kd(){Bt(Xs),Bt(Sp),Bt(Ip)}function VF(t){hl(Ip.current);var e=hl(Xs.current),n=iS(e,t.type);e!==n&&(Ft(Sp,t),Ft(Xs,n))}function vA(t){Sp.current===t&&(Bt(Xs),Bt(Sp))}var Yt=Mc(0);function lv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var OE=[];function _A(){for(var t=0;t<OE.length;t++)OE[t]._workInProgressVersionPrimary=null;OE.length=0}var gy=da.ReactCurrentDispatcher,ME=da.ReactCurrentBatchConfig,Ml=0,Zt=null,kn=null,jn=null,uv=!1,Lf=!1,bp=0,FG=0;function cr(){throw Error(le(321))}function wA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ms(t[n],e[n]))return!1;return!0}function TA(t,e,n,r,i,s){if(Ml=s,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gy.current=t===null||t.memoizedState===null?$G:BG,t=n(r,i),Lf){s=0;do{if(Lf=!1,bp=0,25<=s)throw Error(le(301));s+=1,jn=kn=null,e.updateQueue=null,gy.current=HG,t=n(r,i)}while(Lf)}if(gy.current=dv,e=kn!==null&&kn.next!==null,Ml=0,jn=kn=Zt=null,uv=!1,e)throw Error(le(300));return t}function EA(){var t=bp!==0;return bp=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?Zt.memoizedState=jn=t:jn=jn.next=t,jn}function Hi(){if(kn===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var e=jn===null?Zt.memoizedState:jn.next;if(e!==null)jn=e,kn=t;else{if(t===null)throw Error(le(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},jn===null?Zt.memoizedState=jn=t:jn=jn.next=t}return jn}function Ap(t,e){return typeof e=="function"?e(t):e}function DE(t){var e=Hi(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=kn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((Ml&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Zt.lanes|=u,Dl|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,ms(r,e.memoizedState)||(Qr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zt.lanes|=s,Dl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function LE(t){var e=Hi(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ms(s,e.memoizedState)||(Qr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function $F(){}function BF(t,e){var n=Zt,r=Hi(),i=e(),s=!ms(r.memoizedState,i);if(s&&(r.memoizedState=i,Qr=!0),r=r.queue,CA(WF.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||jn!==null&&jn.memoizedState.tag&1){if(n.flags|=2048,kp(9,zF.bind(null,n,r,i,e),void 0,null),Hn===null)throw Error(le(349));Ml&30||HF(n,e,i)}return i}function HF(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zF(t,e,n,r){e.value=n,e.getSnapshot=r,KF(e)&&qF(t)}function WF(t,e,n){return n(function(){KF(e)&&qF(t)})}function KF(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ms(t,n)}catch{return!0}}function qF(t){var e=Yo(t,1);e!==null&&hs(e,t,1,-1)}function RN(t){var e=Ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:t},e.queue=t,t=t.dispatch=VG.bind(null,Zt,t),[e.memoizedState,t]}function kp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GF(){return Hi().memoizedState}function yy(t,e,n,r){var i=Ps();Zt.flags|=t,i.memoizedState=kp(1|e,n,void 0,r===void 0?null:r)}function nw(t,e,n,r){var i=Hi();r=r===void 0?null:r;var s=void 0;if(kn!==null){var o=kn.memoizedState;if(s=o.destroy,r!==null&&wA(r,o.deps)){i.memoizedState=kp(e,n,s,r);return}}Zt.flags|=t,i.memoizedState=kp(1|e,n,s,r)}function PN(t,e){return yy(8390656,8,t,e)}function CA(t,e){return nw(2048,8,t,e)}function QF(t,e){return nw(4,2,t,e)}function YF(t,e){return nw(4,4,t,e)}function JF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XF(t,e,n){return n=n!=null?n.concat([t]):null,nw(4,4,JF.bind(null,e,t),n)}function SA(){}function ZF(t,e){var n=Hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eU(t,e){var n=Hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tU(t,e,n){return Ml&21?(ms(n,e)||(n=oF(),Zt.lanes|=n,Dl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qr=!0),t.memoizedState=n)}function UG(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=ME.transition;ME.transition={};try{t(!1),e()}finally{bt=n,ME.transition=r}}function nU(){return Hi().memoizedState}function jG(t,e,n){var r=rc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rU(t))iU(e,n);else if(n=UF(t,e,n,r),n!==null){var i=xr();hs(n,t,r,i),sU(n,e,r)}}function VG(t,e,n){var r=rc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rU(t))iU(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ms(a,o)){var c=e.interleaved;c===null?(i.next=i,mA(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=UF(t,e,i,r),n!==null&&(i=xr(),hs(n,t,r,i),sU(n,e,r))}}function rU(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function iU(t,e){Lf=uv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sU(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tA(t,n)}}var dv={readContext:Bi,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},$G={readContext:Bi,useCallback:function(t,e){return Ps().memoizedState=[t,e===void 0?null:e],t},useContext:Bi,useEffect:PN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yy(4194308,4,JF.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yy(4194308,4,t,e)},useInsertionEffect:function(t,e){return yy(4,2,t,e)},useMemo:function(t,e){var n=Ps();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ps();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jG.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Ps();return t={current:t},e.memoizedState=t},useState:RN,useDebugValue:SA,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=RN(!1),e=t[0];return t=UG.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,i=Ps();if(Kt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Hn===null)throw Error(le(349));Ml&30||HF(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,PN(WF.bind(null,r,s,t),[t]),r.flags|=2048,kp(9,zF.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ps(),e=Hn.identifierPrefix;if(Kt){var n=Lo,r=Do;n=(r&~(1<<32-ds(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BG={readContext:Bi,useCallback:ZF,useContext:Bi,useEffect:CA,useImperativeHandle:XF,useInsertionEffect:QF,useLayoutEffect:YF,useMemo:eU,useReducer:DE,useRef:GF,useState:function(){return DE(Ap)},useDebugValue:SA,useDeferredValue:function(t){var e=Hi();return tU(e,kn.memoizedState,t)},useTransition:function(){var t=DE(Ap)[0],e=Hi().memoizedState;return[t,e]},useMutableSource:$F,useSyncExternalStore:BF,useId:nU,unstable_isNewReconciler:!1},HG={readContext:Bi,useCallback:ZF,useContext:Bi,useEffect:CA,useImperativeHandle:XF,useInsertionEffect:QF,useLayoutEffect:YF,useMemo:eU,useReducer:LE,useRef:GF,useState:function(){return LE(Ap)},useDebugValue:SA,useDeferredValue:function(t){var e=Hi();return kn===null?e.memoizedState=t:tU(e,kn.memoizedState,t)},useTransition:function(){var t=LE(Ap)[0],e=Hi().memoizedState;return[t,e]},useMutableSource:$F,useSyncExternalStore:BF,useId:nU,unstable_isNewReconciler:!1};function Xi(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function IS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rw={isMounted:function(t){return(t=t._reactInternals)?su(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xr(),i=rc(t),s=zo(r,i);s.payload=e,n!=null&&(s.callback=n),e=tc(t,s,i),e!==null&&(hs(e,t,i,r),my(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xr(),i=rc(t),s=zo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=tc(t,s,i),e!==null&&(hs(e,t,i,r),my(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xr(),r=rc(t),i=zo(n,r);i.tag=2,e!=null&&(i.callback=e),e=tc(t,i,r),e!==null&&(hs(e,t,r,n),my(e,t,r))}};function NN(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wp(n,r)||!wp(i,s):!0}function oU(t,e,n){var r=!1,i=vc,s=e.contextType;return typeof s=="object"&&s!==null?s=Bi(s):(i=ei(e)?Nl:vr.current,r=e.contextTypes,s=(r=r!=null)?Id(t,i):vc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rw,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ON(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rw.enqueueReplaceState(e,e.state,null)}function bS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gA(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bi(s):(s=ei(e)?Nl:vr.current,i.context=Id(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(IS(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rw.enqueueReplaceState(i,i.state,null),cv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xd(t,e){try{var n="",r=e;do n+=yq(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function FE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function AS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zG=typeof WeakMap=="function"?WeakMap:Map;function aU(t,e,n){n=zo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fv||(fv=!0,FS=r),AS(t,e)},n}function cU(t,e,n){n=zo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){AS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){AS(t,e),typeof r!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i8.bind(null,t,e,n),e.then(t,t))}function DN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zo(-1,1),e.tag=2,tc(n,e,1))),n.lanes|=1),t)}var WG=da.ReactCurrentOwner,Qr=!1;function Sr(t,e,n,r){e.child=t===null?FF(e,null,n,r):Ad(e,t.child,n,r)}function FN(t,e,n,r,i){n=n.render;var s=e.ref;return ed(e,i),r=TA(t,e,n,r,s,i),n=EA(),t!==null&&!Qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jo(t,e,i)):(Kt&&n&&lA(e),e.flags|=1,Sr(t,e,r,i),e.child)}function UN(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!NA(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,lU(t,e,s,r,i)):(t=Ty(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wp,n(o,r)&&t.ref===e.ref)return Jo(t,e,i)}return e.flags|=1,t=ic(s,r),t.ref=e.ref,t.return=e,e.child=t}function lU(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wp(s,r)&&t.ref===e.ref)if(Qr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Qr=!0);else return e.lanes=t.lanes,Jo(t,e,i)}return kS(t,e,n,r,i)}function uU(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Gu,hi),hi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(Gu,hi),hi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ft(Gu,hi),hi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ft(Gu,hi),hi|=r;return Sr(t,e,i,n),e.child}function dU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kS(t,e,n,r,i){var s=ei(n)?Nl:vr.current;return s=Id(e,s),ed(e,i),n=TA(t,e,n,r,s,i),r=EA(),t!==null&&!Qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jo(t,e,i)):(Kt&&r&&lA(e),e.flags|=1,Sr(t,e,n,i),e.child)}function jN(t,e,n,r,i){if(ei(n)){var s=!0;rv(e)}else s=!1;if(ed(e,i),e.stateNode===null)vy(t,e),oU(e,n,r),bS(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Bi(l):(l=ei(n)?Nl:vr.current,l=Id(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&ON(e,o,r,l),ka=!1;var f=e.memoizedState;o.state=f,cv(e,r,o,i),c=e.memoizedState,a!==r||f!==c||Zr.current||ka?(typeof u=="function"&&(IS(e,n,u,r),c=e.memoizedState),(a=ka||NN(e,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jF(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Xi(e.type,a),o.props=l,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bi(c):(c=ei(n)?Nl:vr.current,c=Id(e,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&ON(e,o,r,c),ka=!1,f=e.memoizedState,o.state=f,cv(e,r,o,i);var w=e.memoizedState;a!==d||f!==w||Zr.current||ka?(typeof m=="function"&&(IS(e,n,m,r),w=e.memoizedState),(l=ka||NN(e,n,l,r,f,w,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return xS(t,e,n,r,s,i)}function xS(t,e,n,r,i,s){dU(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&SN(e,n,!1),Jo(t,e,s);r=e.stateNode,WG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ad(e,t.child,null,s),e.child=Ad(e,null,a,s)):Sr(t,e,a,s),e.memoizedState=r.state,i&&SN(e,n,!0),e.child}function hU(t){var e=t.stateNode;e.pendingContext?CN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CN(t,e.context,!1),yA(t,e.containerInfo)}function VN(t,e,n,r,i){return bd(),dA(i),e.flags|=256,Sr(t,e,n,r),e.child}var RS={dehydrated:null,treeContext:null,retryLane:0};function PS(t){return{baseLanes:t,cachePool:null,transitions:null}}function fU(t,e,n){var r=e.pendingProps,i=Yt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ft(Yt,i&1),t===null)return CS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ow(o,r,0,null),t=bl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=PS(n),e.memoizedState=RS,t):IA(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KG(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ic(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ic(a,s):(s=bl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?PS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=RS,r}return s=t.child,t=s.sibling,r=ic(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function IA(t,e){return e=ow({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mg(t,e,n,r){return r!==null&&dA(r),Ad(e,t.child,null,n),t=IA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KG(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=FE(Error(le(422))),Mg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ow({mode:"visible",children:r.children},i,0,null),s=bl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ad(e,t.child,null,o),e.child.memoizedState=PS(o),e.memoizedState=RS,s);if(!(e.mode&1))return Mg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(le(419)),r=FE(s,r,void 0),Mg(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qr||a){if(r=Hn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yo(t,i),hs(r,t,i,-1))}return PA(),r=FE(Error(le(421))),Mg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mi=ec(i.nextSibling),vi=e,Kt=!0,is=null,t!==null&&(Oi[Mi++]=Do,Oi[Mi++]=Lo,Oi[Mi++]=Ol,Do=t.id,Lo=t.overflow,Ol=e),e=IA(e,r.children),e.flags|=4096,e)}function $N(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),SS(t.return,e,n)}function UE(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pU(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Sr(t,e,r.children,n),r=Yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$N(t,n,e);else if(t.tag===19)$N(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ft(Yt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),UE(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}UE(e,!0,n,null,s);break;case"together":UE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=ic(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ic(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qG(t,e,n){switch(e.tag){case 3:hU(e),bd();break;case 5:VF(e);break;case 1:ei(e.type)&&rv(e);break;case 4:yA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ft(ov,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ft(Yt,Yt.current&1),e.flags|=128,null):n&e.child.childLanes?fU(t,e,n):(Ft(Yt,Yt.current&1),t=Jo(t,e,n),t!==null?t.sibling:null);Ft(Yt,Yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pU(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ft(Yt,Yt.current),r)break;return null;case 22:case 23:return e.lanes=0,uU(t,e,n)}return Jo(t,e,n)}var mU,NS,gU,yU;mU=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};NS=function(){};gU=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hl(Xs.current);var s=null;switch(n){case"input":i=eS(t,i),r=eS(t,r),s=[];break;case"select":i=tn({},i,{value:void 0}),r=tn({},r,{value:void 0}),s=[];break;case"textarea":i=rS(t,i),r=rS(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tv)}sS(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fp.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(fp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Vt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};yU=function(t,e,n,r){n!==r&&(e.flags|=4)};function tf(t,e){if(!Kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GG(t,e,n){var r=e.pendingProps;switch(uA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(e),null;case 1:return ei(e.type)&&nv(),lr(e),null;case 3:return r=e.stateNode,kd(),Bt(Zr),Bt(vr),_A(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ng(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,is!==null&&(VS(is),is=null))),NS(t,e),lr(e),null;case 5:vA(e);var i=hl(Ip.current);if(n=e.type,t!==null&&e.stateNode!=null)gU(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return lr(e),null}if(t=hl(Xs.current),Ng(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[js]=e,r[Cp]=s,t=(e.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(i=0;i<_f.length;i++)Vt(_f[i],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":YP(r,s),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vt("invalid",r);break;case"textarea":XP(r,s),Vt("invalid",r)}sS(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Pg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Pg(r.textContent,a,t),i=["children",""+a]):fp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Vt("scroll",r)}switch(n){case"input":Cg(r),JP(r,s,!0);break;case"textarea":Cg(r),ZP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[js]=e,t[Cp]=r,mU(t,e,!1,!1),e.stateNode=t;e:{switch(o=oS(n,r),n){case"dialog":Vt("cancel",t),Vt("close",t),i=r;break;case"iframe":case"object":case"embed":Vt("load",t),i=r;break;case"video":case"audio":for(i=0;i<_f.length;i++)Vt(_f[i],t);i=r;break;case"source":Vt("error",t),i=r;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),i=r;break;case"details":Vt("toggle",t),i=r;break;case"input":YP(t,r),i=eS(t,r),Vt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tn({},r,{value:void 0}),Vt("invalid",t);break;case"textarea":XP(t,r),i=rS(t,r),Vt("invalid",t);break;default:i=r}sS(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?G2(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&K2(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&pp(t,c):typeof c=="number"&&pp(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fp.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Vt("scroll",t):c!=null&&Qb(t,s,c,o))}switch(n){case"input":Cg(t),JP(t,r,!1);break;case"textarea":Cg(t),ZP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lr(e),null;case 6:if(t&&e.stateNode!=null)yU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=hl(Ip.current),hl(Xs.current),Ng(e)){if(r=e.stateNode,n=e.memoizedProps,r[js]=e,(s=r.nodeValue!==n)&&(t=vi,t!==null))switch(t.tag){case 3:Pg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[js]=e,e.stateNode=r}return lr(e),null;case 13:if(Bt(Yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kt&&mi!==null&&e.mode&1&&!(e.flags&128))DF(),bd(),e.flags|=98560,s=!1;else if(s=Ng(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[js]=e}else bd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lr(e),s=!1}else is!==null&&(VS(is),is=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?xn===0&&(xn=3):PA())),e.updateQueue!==null&&(e.flags|=4),lr(e),null);case 4:return kd(),NS(t,e),t===null&&Tp(e.stateNode.containerInfo),lr(e),null;case 10:return pA(e.type._context),lr(e),null;case 17:return ei(e.type)&&nv(),lr(e),null;case 19:if(Bt(Yt),s=e.memoizedState,s===null)return lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)tf(s,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lv(t),o!==null){for(e.flags|=128,tf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ft(Yt,Yt.current&1|2),e.child}t=t.sibling}s.tail!==null&&pn()>Rd&&(e.flags|=128,r=!0,tf(s,!1),e.lanes=4194304)}else{if(!r)if(t=lv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Kt)return lr(e),null}else 2*pn()-s.renderingStartTime>Rd&&n!==1073741824&&(e.flags|=128,r=!0,tf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pn(),e.sibling=null,n=Yt.current,Ft(Yt,r?n&1|2:n&1),e):(lr(e),null);case 22:case 23:return RA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hi&1073741824&&(lr(e),e.subtreeFlags&6&&(e.flags|=8192)):lr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function QG(t,e){switch(uA(e),e.tag){case 1:return ei(e.type)&&nv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kd(),Bt(Zr),Bt(vr),_A(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vA(e),null;case 13:if(Bt(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));bd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(Yt),null;case 4:return kd(),null;case 10:return pA(e.type._context),null;case 22:case 23:return RA(),null;case 24:return null;default:return null}}var Dg=!1,pr=!1,YG=typeof WeakSet=="function"?WeakSet:Set,be=null;function qu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(t,e,r)}else n.current=null}function OS(t,e,n){try{n()}catch(r){an(t,e,r)}}var BN=!1;function JG(t,e){if(gS=Xy,t=EF(),cA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yS={focusedElem:t,selectionRange:n},Xy=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,v=w.memoizedState,E=e.stateNode,T=E.getSnapshotBeforeUpdate(e.elementType===e.type?y:Xi(e.type,y),v);E.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(b){an(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return w=BN,BN=!1,w}function Ff(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&OS(e,n,s)}i=i.next}while(i!==r)}}function iw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function MS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vU(t){var e=t.alternate;e!==null&&(t.alternate=null,vU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[js],delete e[Cp],delete e[wS],delete e[OG],delete e[MG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _U(t){return t.tag===5||t.tag===3||t.tag===4}function HN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_U(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function DS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tv));else if(r!==4&&(t=t.child,t!==null))for(DS(t,e,n),t=t.sibling;t!==null;)DS(t,e,n),t=t.sibling}function LS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(LS(t,e,n),t=t.sibling;t!==null;)LS(t,e,n),t=t.sibling}var Yn=null,ns=!1;function wa(t,e,n){for(n=n.child;n!==null;)wU(t,e,n),n=n.sibling}function wU(t,e,n){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(Y_,n)}catch{}switch(n.tag){case 5:pr||qu(n,e);case 6:var r=Yn,i=ns;Yn=null,wa(t,e,n),Yn=r,ns=i,Yn!==null&&(ns?(t=Yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(ns?(t=Yn,n=n.stateNode,t.nodeType===8?PE(t.parentNode,n):t.nodeType===1&&PE(t,n),vp(t)):PE(Yn,n.stateNode));break;case 4:r=Yn,i=ns,Yn=n.stateNode.containerInfo,ns=!0,wa(t,e,n),Yn=r,ns=i;break;case 0:case 11:case 14:case 15:if(!pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&OS(n,e,o),i=i.next}while(i!==r)}wa(t,e,n);break;case 1:if(!pr&&(qu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){an(n,e,a)}wa(t,e,n);break;case 21:wa(t,e,n);break;case 22:n.mode&1?(pr=(r=pr)||n.memoizedState!==null,wa(t,e,n),pr=r):wa(t,e,n);break;default:wa(t,e,n)}}function zN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YG),e.forEach(function(r){var i=o8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yn=a.stateNode,ns=!1;break e;case 3:Yn=a.stateNode.containerInfo,ns=!0;break e;case 4:Yn=a.stateNode.containerInfo,ns=!0;break e}a=a.return}if(Yn===null)throw Error(le(160));wU(s,o,i),Yn=null,ns=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){an(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TU(e,t),e=e.sibling}function TU(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yi(e,t),ks(t),r&4){try{Ff(3,t,t.return),iw(3,t)}catch(y){an(t,t.return,y)}try{Ff(5,t,t.return)}catch(y){an(t,t.return,y)}}break;case 1:Yi(e,t),ks(t),r&512&&n!==null&&qu(n,n.return);break;case 5:if(Yi(e,t),ks(t),r&512&&n!==null&&qu(n,n.return),t.flags&32){var i=t.stateNode;try{pp(i,"")}catch(y){an(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H2(i,s),oS(a,o);var l=oS(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?G2(i,d):u==="dangerouslySetInnerHTML"?K2(i,d):u==="children"?pp(i,d):Qb(i,u,d,l)}switch(a){case"input":tS(i,s);break;case"textarea":z2(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Yu(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Yu(i,!!s.multiple,s.defaultValue,!0):Yu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cp]=s}catch(y){an(t,t.return,y)}}break;case 6:if(Yi(e,t),ks(t),r&4){if(t.stateNode===null)throw Error(le(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){an(t,t.return,y)}}break;case 3:if(Yi(e,t),ks(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vp(e.containerInfo)}catch(y){an(t,t.return,y)}break;case 4:Yi(e,t),ks(t);break;case 13:Yi(e,t),ks(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kA=pn())),r&4&&zN(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(pr=(l=pr)||u,Yi(e,t),pr=l):Yi(e,t),ks(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(be=t,u=t.child;u!==null;){for(d=be=u;be!==null;){switch(f=be,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ff(4,f,f.return);break;case 1:qu(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(y){an(r,n,y)}}break;case 5:qu(f,f.return);break;case 22:if(f.memoizedState!==null){KN(d);continue}}m!==null?(m.return=f,be=m):KN(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=q2("display",o))}catch(y){an(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(y){an(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Yi(e,t),ks(t),r&4&&zN(t);break;case 21:break;default:Yi(e,t),ks(t)}}function ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_U(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pp(i,""),r.flags&=-33);var s=HN(t);LS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=HN(t);DS(t,a,o);break;default:throw Error(le(161))}}catch(c){an(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XG(t,e,n){be=t,EU(t)}function EU(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Dg;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||pr;a=Dg;var l=pr;if(Dg=o,(pr=c)&&!l)for(be=i;be!==null;)o=be,c=o.child,o.tag===22&&o.memoizedState!==null?qN(i):c!==null?(c.return=o,be=c):qN(i);for(;s!==null;)be=s,EU(s),s=s.sibling;be=i,Dg=a,pr=l}WN(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):WN(t)}}function WN(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||iw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xN(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&vp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}pr||e.flags&512&&MS(e)}catch(f){an(e,e.return,f)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function KN(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function qN(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iw(4,e)}catch(c){an(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){an(e,i,c)}}var s=e.return;try{MS(e)}catch(c){an(e,s,c)}break;case 5:var o=e.return;try{MS(e)}catch(c){an(e,o,c)}}}catch(c){an(e,e.return,c)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var ZG=Math.ceil,hv=da.ReactCurrentDispatcher,bA=da.ReactCurrentOwner,Vi=da.ReactCurrentBatchConfig,pt=0,Hn=null,En=null,tr=0,hi=0,Gu=Mc(0),xn=0,xp=null,Dl=0,sw=0,AA=0,Uf=null,Wr=null,kA=0,Rd=1/0,ko=null,fv=!1,FS=null,nc=null,Lg=!1,Wa=null,pv=0,jf=0,US=null,_y=-1,wy=0;function xr(){return pt&6?pn():_y!==-1?_y:_y=pn()}function rc(t){return t.mode&1?pt&2&&tr!==0?tr&-tr:LG.transition!==null?(wy===0&&(wy=oF()),wy):(t=bt,t!==0||(t=window.event,t=t===void 0?16:fF(t.type)),t):1}function hs(t,e,n,r){if(50<jf)throw jf=0,US=null,Error(le(185));wm(t,n,r),(!(pt&2)||t!==Hn)&&(t===Hn&&(!(pt&2)&&(sw|=n),xn===4&&Oa(t,tr)),ti(t,r),n===1&&pt===0&&!(e.mode&1)&&(Rd=pn()+500,tw&&Dc()))}function ti(t,e){var n=t.callbackNode;Lq(t,e);var r=Jy(t,t===Hn?tr:0);if(r===0)n!==null&&nN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nN(n),e===1)t.tag===0?DG(GN.bind(null,t)):NF(GN.bind(null,t)),PG(function(){!(pt&6)&&Dc()}),n=null;else{switch(aF(r)){case 1:n=eA;break;case 4:n=iF;break;case 16:n=Yy;break;case 536870912:n=sF;break;default:n=Yy}n=RU(n,CU.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CU(t,e){if(_y=-1,wy=0,pt&6)throw Error(le(327));var n=t.callbackNode;if(td()&&t.callbackNode!==n)return null;var r=Jy(t,t===Hn?tr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mv(t,r);else{e=r;var i=pt;pt|=2;var s=IU();(Hn!==t||tr!==e)&&(ko=null,Rd=pn()+500,Il(t,e));do try{n8();break}catch(a){SU(t,a)}while(!0);fA(),hv.current=s,pt=i,En!==null?e=0:(Hn=null,tr=0,e=xn)}if(e!==0){if(e===2&&(i=dS(t),i!==0&&(r=i,e=jS(t,i))),e===1)throw n=xp,Il(t,0),Oa(t,r),ti(t,pn()),n;if(e===6)Oa(t,r);else{if(i=t.current.alternate,!(r&30)&&!e8(i)&&(e=mv(t,r),e===2&&(s=dS(t),s!==0&&(r=s,e=jS(t,s))),e===1))throw n=xp,Il(t,0),Oa(t,r),ti(t,pn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Jc(t,Wr,ko);break;case 3:if(Oa(t,r),(r&130023424)===r&&(e=kA+500-pn(),10<e)){if(Jy(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_S(Jc.bind(null,t,Wr,ko),e);break}Jc(t,Wr,ko);break;case 4:if(Oa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ds(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZG(r/1960))-r,10<r){t.timeoutHandle=_S(Jc.bind(null,t,Wr,ko),r);break}Jc(t,Wr,ko);break;case 5:Jc(t,Wr,ko);break;default:throw Error(le(329))}}}return ti(t,pn()),t.callbackNode===n?CU.bind(null,t):null}function jS(t,e){var n=Uf;return t.current.memoizedState.isDehydrated&&(Il(t,e).flags|=256),t=mv(t,e),t!==2&&(e=Wr,Wr=n,e!==null&&VS(e)),t}function VS(t){Wr===null?Wr=t:Wr.push.apply(Wr,t)}function e8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ms(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oa(t,e){for(e&=~AA,e&=~sw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ds(e),r=1<<n;t[n]=-1,e&=~r}}function GN(t){if(pt&6)throw Error(le(327));td();var e=Jy(t,0);if(!(e&1))return ti(t,pn()),null;var n=mv(t,e);if(t.tag!==0&&n===2){var r=dS(t);r!==0&&(e=r,n=jS(t,r))}if(n===1)throw n=xp,Il(t,0),Oa(t,e),ti(t,pn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jc(t,Wr,ko),ti(t,pn()),null}function xA(t,e){var n=pt;pt|=1;try{return t(e)}finally{pt=n,pt===0&&(Rd=pn()+500,tw&&Dc())}}function Ll(t){Wa!==null&&Wa.tag===0&&!(pt&6)&&td();var e=pt;pt|=1;var n=Vi.transition,r=bt;try{if(Vi.transition=null,bt=1,t)return t()}finally{bt=r,Vi.transition=n,pt=e,!(pt&6)&&Dc()}}function RA(){hi=Gu.current,Bt(Gu)}function Il(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RG(n)),En!==null)for(n=En.return;n!==null;){var r=n;switch(uA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nv();break;case 3:kd(),Bt(Zr),Bt(vr),_A();break;case 5:vA(r);break;case 4:kd();break;case 13:Bt(Yt);break;case 19:Bt(Yt);break;case 10:pA(r.type._context);break;case 22:case 23:RA()}n=n.return}if(Hn=t,En=t=ic(t.current,null),tr=hi=e,xn=0,xp=null,AA=sw=Dl=0,Wr=Uf=null,dl!==null){for(e=0;e<dl.length;e++)if(n=dl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}dl=null}return t}function SU(t,e){do{var n=En;try{if(fA(),gy.current=dv,uv){for(var r=Zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uv=!1}if(Ml=0,jn=kn=Zt=null,Lf=!1,bp=0,bA.current=null,n===null||n.return===null){xn=1,xp=e,En=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=tr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=DN(o);if(m!==null){m.flags&=-257,LN(m,o,a,s,e),m.mode&1&&MN(s,l,e),e=m,c=l;var w=e.updateQueue;if(w===null){var y=new Set;y.add(c),e.updateQueue=y}else w.add(c);break e}else{if(!(e&1)){MN(s,l,e),PA();break e}c=Error(le(426))}}else if(Kt&&a.mode&1){var v=DN(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),LN(v,o,a,s,e),dA(xd(c,a));break e}}s=c=xd(c,a),xn!==4&&(xn=2),Uf===null?Uf=[s]:Uf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=aU(s,c,e);kN(s,E);break e;case 1:a=c;var T=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(nc===null||!nc.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=cU(s,a,e);kN(s,b);break e}}s=s.return}while(s!==null)}AU(n)}catch(M){e=M,En===n&&n!==null&&(En=n=n.return);continue}break}while(!0)}function IU(){var t=hv.current;return hv.current=dv,t===null?dv:t}function PA(){(xn===0||xn===3||xn===2)&&(xn=4),Hn===null||!(Dl&268435455)&&!(sw&268435455)||Oa(Hn,tr)}function mv(t,e){var n=pt;pt|=2;var r=IU();(Hn!==t||tr!==e)&&(ko=null,Il(t,e));do try{t8();break}catch(i){SU(t,i)}while(!0);if(fA(),pt=n,hv.current=r,En!==null)throw Error(le(261));return Hn=null,tr=0,xn}function t8(){for(;En!==null;)bU(En)}function n8(){for(;En!==null&&!Aq();)bU(En)}function bU(t){var e=xU(t.alternate,t,hi);t.memoizedProps=t.pendingProps,e===null?AU(t):En=e,bA.current=null}function AU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QG(n,e),n!==null){n.flags&=32767,En=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,En=null;return}}else if(n=GG(n,e,hi),n!==null){En=n;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);xn===0&&(xn=5)}function Jc(t,e,n){var r=bt,i=Vi.transition;try{Vi.transition=null,bt=1,r8(t,e,n,r)}finally{Vi.transition=i,bt=r}return null}function r8(t,e,n,r){do td();while(Wa!==null);if(pt&6)throw Error(le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fq(t,s),t===Hn&&(En=Hn=null,tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lg||(Lg=!0,RU(Yy,function(){return td(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vi.transition,Vi.transition=null;var o=bt;bt=1;var a=pt;pt|=4,bA.current=null,JG(t,n),TU(n,t),CG(yS),Xy=!!gS,yS=gS=null,t.current=n,XG(n),kq(),pt=a,bt=o,Vi.transition=s}else t.current=n;if(Lg&&(Lg=!1,Wa=t,pv=i),s=t.pendingLanes,s===0&&(nc=null),Pq(n.stateNode),ti(t,pn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fv)throw fv=!1,t=FS,FS=null,t;return pv&1&&t.tag!==0&&td(),s=t.pendingLanes,s&1?t===US?jf++:(jf=0,US=t):jf=0,Dc(),null}function td(){if(Wa!==null){var t=aF(pv),e=Vi.transition,n=bt;try{if(Vi.transition=null,bt=16>t?16:t,Wa===null)var r=!1;else{if(t=Wa,Wa=null,pv=0,pt&6)throw Error(le(331));var i=pt;for(pt|=4,be=t.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(be=l;be!==null;){var u=be;switch(u.tag){case 0:case 11:case 15:Ff(8,u,s)}var d=u.child;if(d!==null)d.return=u,be=d;else for(;be!==null;){u=be;var f=u.sibling,m=u.return;if(vU(u),u===l){be=null;break}if(f!==null){f.return=m,be=f;break}be=m}}}var w=s.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ff(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,be=E;break e}be=s.return}}var T=t.current;for(be=T;be!==null;){o=be;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,be=C;else e:for(o=T;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:iw(9,a)}}catch(M){an(a,a.return,M)}if(a===o){be=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,be=b;break e}be=a.return}}if(pt=i,Dc(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(Y_,t)}catch{}r=!0}return r}finally{bt=n,Vi.transition=e}}return!1}function QN(t,e,n){e=xd(n,e),e=aU(t,e,1),t=tc(t,e,1),e=xr(),t!==null&&(wm(t,1,e),ti(t,e))}function an(t,e,n){if(t.tag===3)QN(t,t,n);else for(;e!==null;){if(e.tag===3){QN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nc===null||!nc.has(r))){t=xd(n,t),t=cU(e,t,1),e=tc(e,t,1),t=xr(),e!==null&&(wm(e,1,t),ti(e,t));break}}e=e.return}}function i8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&n,Hn===t&&(tr&n)===n&&(xn===4||xn===3&&(tr&130023424)===tr&&500>pn()-kA?Il(t,0):AA|=n),ti(t,e)}function kU(t,e){e===0&&(t.mode&1?(e=bg,bg<<=1,!(bg&130023424)&&(bg=4194304)):e=1);var n=xr();t=Yo(t,e),t!==null&&(wm(t,e,n),ti(t,n))}function s8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kU(t,n)}function o8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),kU(t,n)}var xU;xU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zr.current)Qr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qr=!1,qG(t,e,n);Qr=!!(t.flags&131072)}else Qr=!1,Kt&&e.flags&1048576&&OF(e,sv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vy(t,e),t=e.pendingProps;var i=Id(e,vr.current);ed(e,n),i=TA(null,e,r,t,i,n);var s=EA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ei(r)?(s=!0,rv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gA(e),i.updater=rw,e.stateNode=i,i._reactInternals=e,bS(e,r,t,n),e=xS(null,e,r,!0,s,n)):(e.tag=0,Kt&&s&&lA(e),Sr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=c8(r),t=Xi(r,t),i){case 0:e=kS(null,e,r,t,n);break e;case 1:e=jN(null,e,r,t,n);break e;case 11:e=FN(null,e,r,t,n);break e;case 14:e=UN(null,e,r,Xi(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),kS(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),jN(t,e,r,i,n);case 3:e:{if(hU(e),t===null)throw Error(le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,jF(t,e),cv(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xd(Error(le(423)),e),e=VN(t,e,r,n,i);break e}else if(r!==i){i=xd(Error(le(424)),e),e=VN(t,e,r,n,i);break e}else for(mi=ec(e.stateNode.containerInfo.firstChild),vi=e,Kt=!0,is=null,n=FF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bd(),r===i){e=Jo(t,e,n);break e}Sr(t,e,r,n)}e=e.child}return e;case 5:return VF(e),t===null&&CS(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vS(r,i)?o=null:s!==null&&vS(r,s)&&(e.flags|=32),dU(t,e),Sr(t,e,o,n),e.child;case 6:return t===null&&CS(e),null;case 13:return fU(t,e,n);case 4:return yA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ad(e,null,r,n):Sr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),FN(t,e,r,i,n);case 7:return Sr(t,e,e.pendingProps,n),e.child;case 8:return Sr(t,e,e.pendingProps.children,n),e.child;case 12:return Sr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ft(ov,r._currentValue),r._currentValue=o,s!==null)if(ms(s.value,o)){if(s.children===i.children&&!Zr.current){e=Jo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=zo(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),SS(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),SS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Sr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ed(e,n),i=Bi(i),r=r(i),e.flags|=1,Sr(t,e,r,n),e.child;case 14:return r=e.type,i=Xi(r,e.pendingProps),i=Xi(r.type,i),UN(t,e,r,i,n);case 15:return lU(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),vy(t,e),e.tag=1,ei(r)?(t=!0,rv(e)):t=!1,ed(e,n),oU(e,r,i),bS(e,r,i,n),xS(null,e,r,!0,t,n);case 19:return pU(t,e,n);case 22:return uU(t,e,n)}throw Error(le(156,e.tag))};function RU(t,e){return rF(t,e)}function a8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(t,e,n,r){return new a8(t,e,n,r)}function NA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function c8(t){if(typeof t=="function")return NA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jb)return 11;if(t===Xb)return 14}return 2}function ic(t,e){var n=t.alternate;return n===null?(n=Ui(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ty(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")NA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uu:return bl(n.children,i,s,e);case Yb:o=8,i|=8;break;case YC:return t=Ui(12,n,e,i|2),t.elementType=YC,t.lanes=s,t;case JC:return t=Ui(13,n,e,i),t.elementType=JC,t.lanes=s,t;case XC:return t=Ui(19,n,e,i),t.elementType=XC,t.lanes=s,t;case V2:return ow(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U2:o=10;break e;case j2:o=9;break e;case Jb:o=11;break e;case Xb:o=14;break e;case Aa:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Ui(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bl(t,e,n,r){return t=Ui(7,t,r,e),t.lanes=n,t}function ow(t,e,n,r){return t=Ui(22,t,r,e),t.elementType=V2,t.lanes=n,t.stateNode={isHidden:!1},t}function jE(t,e,n){return t=Ui(6,t,null,e),t.lanes=n,t}function VE(t,e,n){return e=Ui(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wE(0),this.expirationTimes=wE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function OA(t,e,n,r,i,s,o,a,c){return t=new l8(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ui(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gA(s),t}function u8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PU(t){if(!t)return vc;t=t._reactInternals;e:{if(su(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ei(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(ei(n))return PF(t,n,e)}return e}function NU(t,e,n,r,i,s,o,a,c){return t=OA(n,r,!0,t,i,s,o,a,c),t.context=PU(null),n=t.current,r=xr(),i=rc(n),s=zo(r,i),s.callback=e??null,tc(n,s,i),t.current.lanes=i,wm(t,i,r),ti(t,r),t}function aw(t,e,n,r){var i=e.current,s=xr(),o=rc(i);return n=PU(n),e.context===null?e.context=n:e.pendingContext=n,e=zo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tc(i,e,o),t!==null&&(hs(t,i,o,s),my(t,i,o)),o}function gv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function MA(t,e){YN(t,e),(t=t.alternate)&&YN(t,e)}function d8(){return null}var OU=typeof reportError=="function"?reportError:function(t){console.error(t)};function DA(t){this._internalRoot=t}cw.prototype.render=DA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));aw(t,e,null,null)};cw.prototype.unmount=DA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ll(function(){aw(null,t,null,null)}),e[Qo]=null}};function cw(t){this._internalRoot=t}cw.prototype.unstable_scheduleHydration=function(t){if(t){var e=uF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Na.length&&e!==0&&e<Na[n].priority;n++);Na.splice(n,0,t),n===0&&hF(t)}};function LA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JN(){}function h8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=gv(o);s.call(l)}}var o=NU(e,r,t,0,null,!1,!1,"",JN);return t._reactRootContainer=o,t[Qo]=o.current,Tp(t.nodeType===8?t.parentNode:t),Ll(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=gv(c);a.call(l)}}var c=OA(t,0,!1,null,null,!1,!1,"",JN);return t._reactRootContainer=c,t[Qo]=c.current,Tp(t.nodeType===8?t.parentNode:t),Ll(function(){aw(e,c,n,r)}),c}function uw(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=gv(o);a.call(c)}}aw(e,o,t,i)}else o=h8(n,e,t,i,r);return gv(o)}cF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vf(e.pendingLanes);n!==0&&(tA(e,n|1),ti(e,pn()),!(pt&6)&&(Rd=pn()+500,Dc()))}break;case 13:Ll(function(){var r=Yo(t,1);if(r!==null){var i=xr();hs(r,t,1,i)}}),MA(t,1)}};nA=function(t){if(t.tag===13){var e=Yo(t,134217728);if(e!==null){var n=xr();hs(e,t,134217728,n)}MA(t,134217728)}};lF=function(t){if(t.tag===13){var e=rc(t),n=Yo(t,e);if(n!==null){var r=xr();hs(n,t,e,r)}MA(t,e)}};uF=function(){return bt};dF=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};cS=function(t,e,n){switch(e){case"input":if(tS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ew(r);if(!i)throw Error(le(90));B2(r),tS(r,i)}}}break;case"textarea":z2(t,n);break;case"select":e=n.value,e!=null&&Yu(t,!!n.multiple,e,!1)}};J2=xA;X2=Ll;var f8={usingClientEntryPoint:!1,Events:[Em,Bu,ew,Q2,Y2,xA]},nf={findFiberByHostInstance:ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p8={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tF(t),t===null?null:t.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||d8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fg.isDisabled&&Fg.supportsFiber)try{Y_=Fg.inject(p8),Js=Fg}catch{}}bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f8;bi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!LA(e))throw Error(le(200));return u8(t,e,null,n)};bi.createRoot=function(t,e){if(!LA(t))throw Error(le(299));var n=!1,r="",i=OU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=OA(t,1,!1,null,null,n,!1,r,i),t[Qo]=e.current,Tp(t.nodeType===8?t.parentNode:t),new DA(e)};bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=tF(e),t=t===null?null:t.stateNode,t};bi.flushSync=function(t){return Ll(t)};bi.hydrate=function(t,e,n){if(!lw(e))throw Error(le(200));return uw(null,t,e,!0,n)};bi.hydrateRoot=function(t,e,n){if(!LA(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=OU;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=NU(e,null,t,1,n??null,i,!1,s,o),t[Qo]=e.current,Tp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cw(e)};bi.render=function(t,e,n){if(!lw(e))throw Error(le(200));return uw(null,t,e,!1,n)};bi.unmountComponentAtNode=function(t){if(!lw(t))throw Error(le(40));return t._reactRootContainer?(Ll(function(){uw(null,null,t,!1,function(){t._reactRootContainer=null,t[Qo]=null})}),!0):!1};bi.unstable_batchedUpdates=xA;bi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lw(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return uw(t,e,n,!1,r)};bi.version="18.3.1-next-f1338f8080-20240426";function MU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MU)}catch(t){console.error(t)}}MU(),M2.exports=bi;var Sm=M2.exports;const DU=E2(Sm);var LU,XN=Sm;LU=XN.createRoot,XN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rp(){return Rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rp.apply(this,arguments)}var Ka;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ka||(Ka={}));const ZN="popstate";function m8(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return $S("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:yv(i)}return y8(e,n,null,t)}function en(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FU(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g8(){return Math.random().toString(36).substr(2,8)}function e1(t,e){return{usr:t.state,key:t.key,idx:e}}function $S(t,e,n,r){return n===void 0&&(n=null),Rp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uh(e):e,{state:n,key:e&&e.key||r||g8()})}function yv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function y8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ka.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Rp({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ka.Pop;let v=u(),E=v==null?null:v-l;l=v,c&&c({action:a,location:y.location,delta:E})}function f(v,E){a=Ka.Push;let T=$S(y.location,v,E);l=u()+1;let C=e1(T,l),b=y.createHref(T);try{o.pushState(C,"",b)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(b)}s&&c&&c({action:a,location:y.location,delta:1})}function m(v,E){a=Ka.Replace;let T=$S(y.location,v,E);l=u();let C=e1(T,l),b=y.createHref(T);o.replaceState(C,"",b),s&&c&&c({action:a,location:y.location,delta:0})}function w(v){let E=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof v=="string"?v:yv(v);return T=T.replace(/ $/,"%20"),en(E,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,E)}let y={get action(){return a},get location(){return t(i,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ZN,d),c=v,()=>{i.removeEventListener(ZN,d),c=null}},createHref(v){return e(i,v)},createURL:w,encodeLocation(v){let E=w(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(v){return o.go(v)}};return y}var t1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(t1||(t1={}));function v8(t,e,n){return n===void 0&&(n="/"),_8(t,e,n,!1)}function _8(t,e,n,r){let i=typeof e=="string"?uh(e):e,s=Pd(i.pathname||"/",n);if(s==null)return null;let o=UU(t);w8(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=P8(s);a=x8(o[c],l,r)}return a}function UU(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(en(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=sc([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(en(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),UU(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:A8(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of jU(s.path))i(s,o,c)}),e}function jU(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=jU(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function w8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:k8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const T8=/^:[\w-]+$/,E8=3,C8=2,S8=1,I8=10,b8=-2,n1=t=>t==="*";function A8(t,e){let n=t.split("/"),r=n.length;return n.some(n1)&&(r+=b8),e&&(r+=C8),n.filter(i=>!n1(i)).reduce((i,s)=>i+(T8.test(s)?E8:s===""?S8:I8),r)}function k8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function x8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:sc([s,d.pathname]),pathnameBase:D8(sc([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=sc([s,d.pathnameBase]))}return o}function vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=R8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const w=a[d];return m&&!w?l[f]=void 0:l[f]=(w||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function R8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),FU(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function P8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FU(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uh(t):t;return{pathname:n?n.startsWith("/")?n:O8(n,e):e,search:L8(r),hash:F8(i)}}function O8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $E(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FA(t,e){let n=M8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function UA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uh(t):(i=Rp({},t),en(!i.pathname||!i.pathname.includes("?"),$E("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),$E("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),$E("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=N8(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const sc=t=>t.join("/").replace(/\/\/+/g,"/"),D8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VU=["post","put","patch","delete"];new Set(VU);const j8=["get",...VU];new Set(j8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pp.apply(this,arguments)}const dw=g.createContext(null),$U=g.createContext(null),ha=g.createContext(null),hw=g.createContext(null),Lc=g.createContext({outlet:null,matches:[],isDataRoute:!1}),BU=g.createContext(null);function V8(t,e){let{relative:n}=e===void 0?{}:e;dh()||en(!1);let{basename:r,navigator:i}=g.useContext(ha),{hash:s,pathname:o,search:a}=fw(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:sc([r,o])),i.createHref({pathname:c,search:a,hash:s})}function dh(){return g.useContext(hw)!=null}function go(){return dh()||en(!1),g.useContext(hw).location}function HU(t){g.useContext(ha).static||g.useLayoutEffect(t)}function ou(){let{isDataRoute:t}=g.useContext(Lc);return t?Z8():$8()}function $8(){dh()||en(!1);let t=g.useContext(dw),{basename:e,future:n,navigator:r}=g.useContext(ha),{matches:i}=g.useContext(Lc),{pathname:s}=go(),o=JSON.stringify(FA(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return HU(()=>{a.current=!0}),g.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=UA(l,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:sc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function fw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(ha),{matches:i}=g.useContext(Lc),{pathname:s}=go(),o=JSON.stringify(FA(i,r.v7_relativeSplatPath));return g.useMemo(()=>UA(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function B8(t,e){return H8(t,e)}function H8(t,e,n,r){dh()||en(!1);let{navigator:i}=g.useContext(ha),{matches:s}=g.useContext(Lc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=go(),u;if(e){var d;let v=typeof e=="string"?uh(e):e;c==="/"||(d=v.pathname)!=null&&d.startsWith(c)||en(!1),u=v}else u=l;let f=u.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=v8(t,{pathname:m}),y=G8(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:sc([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:sc([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&y?g.createElement(hw.Provider,{value:{location:Pp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ka.Pop}},y):y}function z8(){let t=X8(),e=U8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const W8=g.createElement(z8,null);class K8 extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(Lc.Provider,{value:this.props.routeContext},g.createElement(BU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q8(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(dw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Lc.Provider,{value:e},r)}function G8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||en(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:m}=n,w=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||w){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let m,w=!1,y=null,v=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||W8,c&&(l<0&&f===0?(w=!0,v=null):l===f&&(w=!0,v=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),T=()=>{let C;return m?C=y:w?C=v:d.route.Component?C=g.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,g.createElement(q8,{match:d,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?g.createElement(K8,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):T()},null)}var zU=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zU||{}),_v=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_v||{});function Q8(t){let e=g.useContext(dw);return e||en(!1),e}function Y8(t){let e=g.useContext($U);return e||en(!1),e}function J8(t){let e=g.useContext(Lc);return e||en(!1),e}function WU(t){let e=J8(),n=e.matches[e.matches.length-1];return n.route.id||en(!1),n.route.id}function X8(){var t;let e=g.useContext(BU),n=Y8(_v.UseRouteError),r=WU(_v.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Z8(){let{router:t}=Q8(zU.UseNavigateStable),e=WU(_v.UseNavigateStable),n=g.useRef(!1);return HU(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Pp({fromRouteId:e},s)))},[t,e])}function e7(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function t7(t){let{to:e,replace:n,state:r,relative:i}=t;dh()||en(!1);let{future:s,static:o}=g.useContext(ha),{matches:a}=g.useContext(Lc),{pathname:c}=go(),l=ou(),u=UA(e,FA(a,s.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return g.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:i}),[l,d,i,n,r]),null}function Dn(t){en(!1)}function n7(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ka.Pop,navigator:s,static:o=!1,future:a}=t;dh()&&en(!1);let c=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:c,navigator:s,static:o,future:Pp({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=uh(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:w="default"}=r,y=g.useMemo(()=>{let v=Pd(u,c);return v==null?null:{location:{pathname:v,search:d,hash:f,state:m,key:w},navigationType:i}},[c,u,d,f,m,w,i]);return y==null?null:g.createElement(ha.Provider,{value:l},g.createElement(hw.Provider,{children:n,value:y}))}function r1(t){let{children:e,location:n}=t;return B8(BS(e),n)}new Promise(()=>{});function BS(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let s=[...e,i];if(r.type===g.Fragment){n.push.apply(n,BS(r.props.children,s));return}r.type!==Dn&&en(!1),!r.props.index||!r.props.children||en(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=BS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wv(){return wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wv.apply(this,arguments)}function KU(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function r7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i7(t,e){return t.button===0&&(!e||e==="_self")&&!r7(t)}const s7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],o7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],a7="6";try{window.__reactRouterVersion=a7}catch{}const c7=g.createContext({isTransitioning:!1}),l7="startTransition",i1=Kb[l7];function u7(t){let{basename:e,children:n,future:r,window:i}=t,s=g.useRef();s.current==null&&(s.current=m8({window:i,v5Compat:!0}));let o=s.current,[a,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=g.useCallback(d=>{l&&i1?i1(()=>c(d)):c(d)},[c,l]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>e7(r),[r]),g.createElement(n7,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const d7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",h7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Np=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d}=e,f=KU(e,s7),{basename:m}=g.useContext(ha),w,y=!1;if(typeof l=="string"&&h7.test(l)&&(w=l,d7))try{let C=new URL(window.location.href),b=l.startsWith("//")?new URL(C.protocol+l):new URL(l),M=Pd(b.pathname,m);b.origin===C.origin&&M!=null?l=M+b.search+b.hash:y=!0}catch{}let v=V8(l,{relative:i}),E=p7(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function T(C){r&&r(C),C.defaultPrevented||E(C)}return g.createElement("a",wv({},f,{href:w||v,onClick:y||s?r:T,ref:n,target:c}))}),s1=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:c,viewTransition:l,children:u}=e,d=KU(e,o7),f=fw(c,{relative:d.relative}),m=go(),w=g.useContext($U),{navigator:y,basename:v}=g.useContext(ha),E=w!=null&&m7(f)&&l===!0,T=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,C=m.pathname,b=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(C=C.toLowerCase(),b=b?b.toLowerCase():null,T=T.toLowerCase()),b&&v&&(b=Pd(b,v)||b);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=C===T||!o&&C.startsWith(T)&&C.charAt(M)==="/",k=b!=null&&(b===T||!o&&b.startsWith(T)&&b.charAt(T.length)==="/"),I={isActive:L,isPending:k,isTransitioning:E},A=L?r:void 0,R;typeof s=="function"?R=s(I):R=[s,L?"active":null,k?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(I):a;return g.createElement(Np,wv({},d,{"aria-current":A,className:R,ref:n,style:N,to:c,viewTransition:l}),typeof u=="function"?u(I):u)});var HS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(HS||(HS={}));var o1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(o1||(o1={}));function f7(t){let e=g.useContext(dw);return e||en(!1),e}function p7(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=ou(),l=go(),u=fw(t,{relative:o});return g.useCallback(d=>{if(i7(d,n)){d.preventDefault();let f=r!==void 0?r:yv(l)===yv(u);c(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[l,c,u,r,i,n,t,s,o,a])}function m7(t,e){e===void 0&&(e={});let n=g.useContext(c7);n==null&&en(!1);let{basename:r}=f7(HS.useViewTransitionState),i=fw(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Pd(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Pd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vv(i.pathname,o)!=null||vv(i.pathname,s)!=null}/*! @azure/msal-common v15.12.0 2025-08-19 */const ee={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},qa={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},fl={GET:"GET",POST:"POST"},hh=[ee.OPENID_SCOPE,ee.PROFILE_SCOPE,ee.OFFLINE_ACCESS_SCOPE],a1=[...hh,ee.EMAIL_SCOPE],Ir={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},c1={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},oc={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ug={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},kr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},jA={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},pw={QUERY:"query",FRAGMENT:"fragment"},g7={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},qU={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},jg={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Op={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Jn={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},VA="appmetadata",y7="client_info",Tv="1",Ev={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ui={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Qn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},It={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Vf={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},l1={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Tu={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},BE={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Xc={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},v7={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},GU=300;/*! @azure/msal-common v15.12.0 2025-08-19 */const Cv="unexpected_error",_7="post_request_failed";/*! @azure/msal-common v15.12.0 2025-08-19 */const u1={[Cv]:"Unexpected error in authentication.",[_7]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class xt extends Error{constructor(e,n,r){const i=n?`${e}: ${n}`:e;super(i),Object.setPrototypeOf(this,xt.prototype),this.errorCode=e||ee.EMPTY_STRING,this.errorMessage=n||ee.EMPTY_STRING,this.subError=r||ee.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function zS(t,e){return new xt(t,e?`${u1[t]} ${e}`:u1[t])}/*! @azure/msal-common v15.12.0 2025-08-19 */const $A="client_info_decoding_error",QU="client_info_empty_error",BA="token_parsing_error",YU="null_or_empty_token",xo="endpoints_resolution_error",JU="network_error",XU="openid_config_error",ZU="hash_not_deserialized",Nd="invalid_state",ej="state_mismatch",WS="state_not_found",tj="nonce_mismatch",HA="auth_time_not_found",nj="max_age_transpired",w7="multiple_matching_tokens",T7="multiple_matching_accounts",rj="multiple_matching_appMetadata",ij="request_cannot_be_made",sj="cannot_remove_empty_scope",oj="cannot_append_scopeset",KS="empty_input_scopeset",E7="device_code_polling_cancelled",C7="device_code_expired",S7="device_code_unknown_error",zA="no_account_in_silent_request",aj="invalid_cache_record",WA="invalid_cache_environment",qS="no_account_found",GS="no_crypto_object",I7="unexpected_credential_type",b7="invalid_assertion",A7="invalid_client_credential",ac="token_refresh_required",k7="user_timeout_reached",cj="token_claims_cnf_required_for_signedjwt",lj="authorization_code_missing_from_server_response",uj="binding_key_not_removed",dj="end_session_endpoint_not_supported",KA="key_id_missing",x7="no_network_connectivity",R7="user_canceled",P7="missing_tenant_id_error",Xe="method_not_implemented",N7="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.12.0 2025-08-19 */const d1={[$A]:"The client info could not be parsed/decoded correctly",[QU]:"The client info was empty",[BA]:"Token cannot be parsed",[YU]:"The token is null or empty",[xo]:"Endpoints cannot be resolved",[JU]:"Network request failed",[XU]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ZU]:"The hash parameters could not be deserialized",[Nd]:"State was not the expected format",[ej]:"State mismatch error",[WS]:"State not found",[tj]:"Nonce mismatch error",[HA]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[nj]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[w7]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[T7]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[rj]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ij]:"Token request cannot be made without authorization code or refresh token.",[sj]:"Cannot remove null or empty scope from ScopeSet",[oj]:"Cannot append ScopeSet",[KS]:"Empty input ScopeSet cannot be processed",[E7]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[C7]:"Device code is expired.",[S7]:"Device code stopped polling for unknown reasons.",[zA]:"Please pass an account object, silent flow is not supported without account information",[aj]:"Cache record object was null or undefined.",[WA]:"Invalid environment when attempting to create cache entry",[qS]:"No account found in cache for given key.",[GS]:"No crypto object detected.",[I7]:"Unexpected credential type.",[b7]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[A7]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ac]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[k7]:"User defined timeout for device code polling reached",[cj]:"Cannot generate a POP jwt if the token_claims are not populated",[lj]:"Server response does not contain an authorization code to proceed",[uj]:"Could not remove the credential's binding key from storage.",[dj]:"The provided authority does not support logout",[KA]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[x7]:"No network connectivity. Check your internet connection.",[R7]:"User cancelled the flow.",[P7]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Xe]:"This method has not been implemented",[N7]:"The nested app auth bridge is disabled"};class qA extends xt{constructor(e,n){super(e,n?`${d1[e]}: ${n}`:d1[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,qA.prototype)}}function ae(t,e){return new qA(t,e)}/*! @azure/msal-common v15.12.0 2025-08-19 */const Sv={createNewGuid:()=>{throw ae(Xe)},base64Decode:()=>{throw ae(Xe)},base64Encode:()=>{throw ae(Xe)},base64UrlEncode:()=>{throw ae(Xe)},encodeKid:()=>{throw ae(Xe)},async getPublicKeyThumbprint(){throw ae(Xe)},async removeTokenBindingKey(){throw ae(Xe)},async clearKeystore(){throw ae(Xe)},async signJwt(){throw ae(Xe)},async hashString(){throw ae(Xe)}};/*! @azure/msal-common v15.12.0 2025-08-19 */var Wt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Wt||(Wt={}));let Im=class QS{constructor(e,n,r){this.level=Wt.Info;const i=()=>{},s=e||QS.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:Wt.Info,this.correlationId=s.correlationId||ee.EMPTY_STRING,this.packageName=n||ee.EMPTY_STRING,this.packageVersion=r||ee.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Wt.Info}}clone(e,n,r){return new QS({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const s=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Wt[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,s,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:Wt.Error,containsPii:!1,correlationId:n||ee.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:Wt.Error,containsPii:!0,correlationId:n||ee.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:Wt.Warning,containsPii:!1,correlationId:n||ee.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:Wt.Warning,containsPii:!0,correlationId:n||ee.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:Wt.Info,containsPii:!1,correlationId:n||ee.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:Wt.Info,containsPii:!0,correlationId:n||ee.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:Wt.Verbose,containsPii:!1,correlationId:n||ee.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:Wt.Verbose,containsPii:!0,correlationId:n||ee.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:Wt.Trace,containsPii:!1,correlationId:n||ee.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:Wt.Trace,containsPii:!0,correlationId:n||ee.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.12.0 2025-08-19 */const hj="@azure/msal-common",GA="15.12.0";/*! @azure/msal-common v15.12.0 2025-08-19 */const QA={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v15.12.0 2025-08-19 */const fj="redirect_uri_empty",O7="claims_request_parsing_error",pj="authority_uri_insecure",wf="url_parse_error",mj="empty_url_error",gj="empty_input_scopes_error",YA="invalid_claims",yj="token_request_empty",vj="logout_request_empty",M7="invalid_code_challenge_method",JA="pkce_params_missing",XA="invalid_cloud_discovery_metadata",_j="invalid_authority_metadata",wj="untrusted_authority",mw="missing_ssh_jwk",Tj="missing_ssh_kid",D7="missing_nonce_authentication_header",L7="invalid_authentication_header",Ej="cannot_set_OIDCOptions",Cj="cannot_allow_platform_broker",Sj="authority_mismatch",Ij="invalid_request_method_for_EAR",bj="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.12.0 2025-08-19 */const F7={[fj]:"A redirect URI is required for all calls, and none has been set.",[O7]:"Could not parse the given claims request object.",[pj]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[wf]:"URL could not be parsed into appropriate segments.",[mj]:"URL was empty or null.",[gj]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[YA]:"Given claims parameter must be a stringified JSON object.",[yj]:"Token request was empty and not found in cache.",[vj]:"The logout request was null or undefined.",[M7]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[JA]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[XA]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[_j]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[wj]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[mw]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Tj]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[D7]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[L7]:"Invalid authentication header provided",[Ej]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Cj]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Sj]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[bj]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Ij]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class ZA extends xt{constructor(e){super(e,F7[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ZA.prototype)}}function Ot(t){return new ZA(t)}/*! @azure/msal-common v15.12.0 2025-08-19 */class _i{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return r.forEach(s=>{if(s.trim()){const[o,a]=s.split(/=(.+)/g,2);o&&a&&(n[i(o)]=i(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class Rn{constructor(e){const n=e?_i.trimArrayEntries([...e]):[],r=n?_i.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw Ot(gj);this.scopes=new Set,r.forEach(i=>this.scopes.add(i))}static fromString(e){const r=(e||ee.EMPTY_STRING).split(" ");return new Rn(r)}static createSearchScopes(e){const n=e&&e.length>0?e:[...hh],r=new Rn(n);return r.containsOnlyOIDCScopes()?r.removeScope(ee.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Rn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return a1.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw ae(oj)}}removeScope(e){if(!e)throw ae(sj);this.scopes.delete(e.trim())}removeOIDCScopes(){a1.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ae(KS);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw ae(KS);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),i=this.getScopeCount();return n.size<i+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):ee.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.12.0 2025-08-19 */function h1(t,e){return!!t&&!!e&&t===e.split(".")[1]}function e0(t,e,n,r){if(r){const{oid:i,sub:s,tid:o,name:a,tfp:c,acr:l,preferred_username:u,upn:d,login_hint:f}=r,m=o||c||l||"";return{tenantId:m,localAccountId:i||s||"",name:a,username:u||d||"",loginHint:f,isHomeTenant:h1(m,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:h1(n,t)}}function t0(t,e,n,r){let i=t;if(e){const{isHomeTenant:s,...o}=e;i={...t,...o}}if(n){const{isHomeTenant:s,...o}=e0(t.homeAccountId,t.localAccountId,t.tenantId,n);return i={...i,...o,idTokenClaims:n,idToken:r},i}return i}/*! @azure/msal-common v15.12.0 2025-08-19 */function fh(t,e){const n=U7(t);try{const r=e(n);return JSON.parse(r)}catch{throw ae(BA)}}function U7(t){if(!t)throw ae(YU);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw ae(BA);return n[2]}function Aj(t,e){if(e===0||Date.now()-3e5>t+e)throw ae(nj)}/*! @azure/msal-common v15.12.0 2025-08-19 */function f1(t){if(!t)return t;let e=t.toLowerCase();return _i.endsWith(e,"?")?e=e.slice(0,-1):_i.endsWith(e,"?/")&&(e=e.slice(0,-2)),_i.endsWith(e,"/")||(e+="/"),e}function kj(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Iv(t){if(!t||t.indexOf("=")<0)return null;try{const e=kj(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw ae(ZU)}return null}function Mp(t,e=!0,n){const r=new Array;return t.forEach((i,s)=>{!e&&n&&s in n?r.push(`${s}=${i}`):r.push(`${s}=${encodeURIComponent(i)}`)}),r.join("&")}function p1(t){if(!t)return t;const e=t.split("#")[0];try{const n=new URL(e),r=n.origin+n.pathname+n.search;return f1(r)}catch{return f1(e)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class _t{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Ot(mj);e.includes("#")||(this._urlString=_t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return _i.endsWith(n,"?")?n=n.slice(0,-1):_i.endsWith(n,"?/")&&(n=n.slice(0,-2)),_i.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Ot(wf)}if(!e.HostNameAndPort||!e.PathSegments)throw Ot(wf);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Ot(pj)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return _t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===oc.COMMON||r[0]===oc.ORGANIZATIONS)&&(r[0]=e),_t.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Ot(wf);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let i=r.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),r.PathSegments=i,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Ot(wf);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===ee.FORWARD_SLASH){const i=new _t(n).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new _t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Iv(e)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const xj={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},m1=xj.endpointMetadata,n0=xj.instanceDiscoveryMetadata,Rj=new Set;n0.metadata.forEach(t=>{t.aliases.forEach(e=>{Rj.add(e)})});function j7(t,e){var i;let n;const r=t.canonicalAuthority;if(r){const s=new _t(r).getUrlComponents().HostNameAndPort;n=g1(s,(i=t.cloudDiscoveryMetadata)==null?void 0:i.metadata,ui.CONFIG,e)||g1(s,n0.metadata,ui.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function g1(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const i=bv(e,t);if(i)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),i.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function V7(t){return bv(n0.metadata,t)}function bv(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.12.0 2025-08-19 */const Av="cache_quota_exceeded",r0="cache_error_unknown";/*! @azure/msal-common v15.12.0 2025-08-19 */const HE={[Av]:"Exceeded cache storage capacity.",[r0]:"Unexpected error occurred when using cache storage."};class nd extends xt{constructor(e,n){const r=n||(HE[e]?HE[e]:HE[r0]);super(`${e}: ${r}`),Object.setPrototypeOf(this,nd.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function YS(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new nd(Av):new nd(t.name,t.message):new nd(r0)}/*! @azure/msal-common v15.12.0 2025-08-19 */class JS{constructor(e,n,r,i,s){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(hj,GA),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(s=>s.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,n,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(r,s))return null;const c=this.getIdToken(e,i,n,r.tenantId);return c&&(a=fh(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=t0(e,r,a,c==null?void 0:c.secret),o)}getTenantProfilesFromAccountEntity(e,n,r,i){const s=e.getAccountInfo();let o=s.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=o.get(r);if(l)o=new Map([[r,l]]);else return[]}const c=[];return o.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(s,a,l,n,i);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var i;if(!e)throw ae(aj);try{e.account&&await this.setAccount(e.account,n),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(s){throw(i=this.commonLogger)==null||i.error("CacheManager.saveCacheRecord: failed"),s instanceof xt?s:YS(s)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=Rn.fromString(e.target);i.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,r,!1))return;const a=this.getAccessTokenCredential(o,n);a&&this.credentialMatchesFilter(a,r)&&Rn.fromString(a.target).intersectingScopeSets(s)&&this.removeAccessToken(o,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),i=[];return r.forEach(s=>{var l;const o=this.getAccount(s,n);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const a={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},c=(l=o.tenantProfiles)==null?void 0:l.filter(u=>this.tenantProfileMatchesFilter(u,a));c&&c.length===0||i.push(o)}),i}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===Jn.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===It.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(r[i]=s))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;const s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(r=s)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.filter(i).forEach(s=>{this.removeItem(s,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.idToken.filter(i).forEach(s=>{this.removeIdToken(s,n)}),r.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,n)}),r.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==Jn.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==It.POP)return;const i=r.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{var s;this.commonLogger.error(`Failed to remove token binding key ${i}`,n),(s=this.performanceClient)==null||s.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Jn.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!i){const u=new Map;a.forEach((f,m)=>{f.realm===e.tenantId&&u.set(m,f)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,n)}),s&&n&&s.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const i=r&&r.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(o,n);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,i){const s=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);const o=Rn.createSearchScopes(n.scopes),a=n.authenticationScheme||It.BEARER,c=a&&a.toLowerCase()!==It.BEARER.toLowerCase()?Jn.ACCESS_TOKEN_WITH_AUTH_SCHEME:Jn.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,l,!0)){const w=this.getAccessTokenCredential(m,s);w&&this.credentialMatchesFilter(w,l)&&d.push(w)}});const f=d.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(m=>{this.removeAccessToken(this.generateCredentialKey(m),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,n,r){const i=e.toLowerCase();if(n.clientId&&i.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&i.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&i.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&i.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const s=n.target.asArray();for(let o=0;o<s.length;o++){if(r&&!i.includes(s[o].toLowerCase()))return!1;if(!r&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),i=[];return r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;const o=this.getAccessTokenCredential(s,n);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=n?Tv:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Jn.REFRESH_TOKEN,clientId:this.clientId,familyId:o},c=i&&i.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const f=this.getRefreshTokenCredential(d,r);f&&this.credentialMatchesFilter(f,a)&&l.push(f)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&s&&r&&s.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),i=Object.keys(r).map(o=>r[o]),s=i.length;if(s<1)return null;if(s>1)throw ae(rj);return i[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Tv)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const i=j7(this.staticAuthorityOptions,this.commonLogger);if(i.includes(n)&&i.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==Jn.ACCESS_TOKEN&&e.credentialType!==Jn.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Rn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(VA)!==-1}isAuthorityMetadata(e){return e.indexOf(Ev.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ev.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class $7 extends JS{async setAccount(){throw ae(Xe)}getAccount(){throw ae(Xe)}async setIdTokenCredential(){throw ae(Xe)}getIdTokenCredential(){throw ae(Xe)}async setAccessTokenCredential(){throw ae(Xe)}getAccessTokenCredential(){throw ae(Xe)}async setRefreshTokenCredential(){throw ae(Xe)}getRefreshTokenCredential(){throw ae(Xe)}setAppMetadata(){throw ae(Xe)}getAppMetadata(){throw ae(Xe)}setServerTelemetry(){throw ae(Xe)}getServerTelemetry(){throw ae(Xe)}setAuthorityMetadata(){throw ae(Xe)}getAuthorityMetadata(){throw ae(Xe)}getAuthorityMetadataKeys(){throw ae(Xe)}setThrottlingCache(){throw ae(Xe)}getThrottlingCache(){throw ae(Xe)}removeItem(){throw ae(Xe)}getKeys(){throw ae(Xe)}getAccountKeys(){throw ae(Xe)}getTokenKeys(){throw ae(Xe)}generateCredentialKey(){throw ae(Xe)}generateAccountKey(){throw ae(Xe)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const ni={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.12.0 2025-08-19 */const F={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},B7={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v15.12.0 2025-08-19 */class y1{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Pj{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:B7.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new y1}}startPerformanceMeasurement(){return new y1}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.12.0 2025-08-19 */const Nj={tokenRenewalOffsetSeconds:GU,preventCorsPreflight:!1},H7={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Wt.Info,correlationId:ee.EMPTY_STRING},z7={claimsBasedCachingEnabled:!1},W7={async sendGetRequestAsync(){throw ae(Xe)},async sendPostRequestAsync(){throw ae(Xe)}},K7={sku:ee.SKU,version:GA,cpu:ee.EMPTY_STRING,os:ee.EMPTY_STRING},q7={clientSecret:ee.EMPTY_STRING,clientAssertion:void 0},G7={azureCloudInstance:QA.None,tenant:`${ee.DEFAULT_COMMON_TENANT}`},Q7={application:{appName:"",appVersion:""}};function Y7({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:f}){const m={...H7,...n};return{authOptions:J7(t),systemOptions:{...Nj,...e},loggerOptions:m,cacheOptions:{...z7,...r},storageInterface:i||new $7(t.clientId,Sv,new Im(m),new Pj),networkInterface:s||W7,cryptoInterface:o||Sv,clientCredentials:a||q7,libraryInfo:{...K7,...c},telemetry:{...Q7,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:f||null}}function J7(t){return{clientCapabilities:[],azureCloudOptions:G7,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function Oj(t){return t.authOptions.authority.options.protocolMode===ni.OIDC}/*! @azure/msal-common v15.12.0 2025-08-19 */const cs={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.12.0 2025-08-19 */function kv(t,e){if(!t)throw ae(QU);try{const n=e(t);return JSON.parse(n)}catch{throw ae($A)}}function rd(t){if(!t)throw ae($A);const e=t.split(Op.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?ee.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.12.0 2025-08-19 */const Fl="client_id",Mj="redirect_uri",X7="response_type",Z7="response_mode",eQ="grant_type",tQ="claims",nQ="scope",rQ="refresh_token",iQ="state",sQ="nonce",oQ="prompt",aQ="code",cQ="code_challenge",lQ="code_challenge_method",uQ="code_verifier",dQ="client-request-id",hQ="x-client-SKU",fQ="x-client-VER",pQ="x-client-OS",mQ="x-client-CPU",gQ="x-client-current-telemetry",yQ="x-client-last-telemetry",vQ="x-ms-lib-capability",_Q="x-app-name",wQ="x-app-ver",TQ="post_logout_redirect_uri",EQ="id_token_hint",CQ="client_secret",SQ="client_assertion",IQ="client_assertion_type",Dj="token_type",Lj="req_cnf",v1="return_spa_code",bQ="nativebroker",AQ="logout_hint",kQ="sid",xQ="login_hint",RQ="domain_hint",PQ="x-client-xtra-sku",xv="brk_client_id",Rv="brk_redirect_uri",XS="instance_aware",NQ="ear_jwk",OQ="ear_jwe_crypto";/*! @azure/msal-common v15.12.0 2025-08-19 */function gw(t,e,n){if(!e)return;const r=t.get(Fl);r&&t.has(xv)&&(n==null||n.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(Mj)},e))}function i0(t,e){t.set(X7,e)}function MQ(t,e){t.set(Z7,e||g7.QUERY)}function DQ(t){t.set(bQ,"1")}function s0(t,e,n=!0,r=hh){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const i=n?[...e||[],...r]:e||[],s=new Rn(i);t.set(nQ,s.printScopes())}function o0(t,e){t.set(Fl,e)}function a0(t,e){t.set(Mj,e)}function LQ(t,e){t.set(TQ,e)}function FQ(t,e){t.set(EQ,e)}function UQ(t,e){t.set(RQ,e)}function Vg(t,e){t.set(xQ,e)}function Pv(t,e){t.set(Ir.CCS_HEADER,`UPN:${e}`)}function $f(t,e){t.set(Ir.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function _1(t,e){t.set(kQ,e)}function c0(t,e,n){const r=zQ(e,n);try{JSON.parse(r)}catch{throw Ot(YA)}t.set(tQ,r)}function l0(t,e){t.set(dQ,e)}function u0(t,e){t.set(hQ,e.sku),t.set(fQ,e.version),e.os&&t.set(pQ,e.os),e.cpu&&t.set(mQ,e.cpu)}function d0(t,e){e!=null&&e.appName&&t.set(_Q,e.appName),e!=null&&e.appVersion&&t.set(wQ,e.appVersion)}function jQ(t,e){t.set(oQ,e)}function Fj(t,e){e&&t.set(iQ,e)}function VQ(t,e){t.set(sQ,e)}function Uj(t,e,n){if(e&&n)t.set(cQ,e),t.set(lQ,n);else throw Ot(JA)}function $Q(t,e){t.set(aQ,e)}function BQ(t,e){t.set(rQ,e)}function HQ(t,e){t.set(uQ,e)}function jj(t,e){t.set(CQ,e)}function Vj(t,e){e&&t.set(SQ,e)}function $j(t,e){e&&t.set(IQ,e)}function Bj(t,e){t.set(eQ,e)}function h0(t){t.set(y7,"1")}function Hj(t){t.has(XS)||t.set(XS,"true")}function cc(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function zQ(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw Ot(YA)}return e&&e.length>0&&(n.hasOwnProperty(Ug.ACCESS_TOKEN)||(n[Ug.ACCESS_TOKEN]={}),n[Ug.ACCESS_TOKEN][Ug.XMS_CC]={values:e}),JSON.stringify(n)}function f0(t,e){e&&(t.set(Dj,It.POP),t.set(Lj,e))}function zj(t,e){e&&(t.set(Dj,It.SSH),t.set(Lj,e))}function Wj(t,e){t.set(gQ,e.generateCurrentRequestHeaderValue()),t.set(yQ,e.generateLastRequestHeaderValue())}function Kj(t){t.set(vQ,Vf.X_MS_LIB_CAPABILITY_VALUE)}function WQ(t,e){t.set(AQ,e)}function yw(t,e,n){t.has(xv)||t.set(xv,e),t.has(Rv)||t.set(Rv,n)}function KQ(t,e){t.set(NQ,encodeURIComponent(e)),t.set(OQ,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function qQ(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.12.0 2025-08-19 */const rs={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.12.0 2025-08-19 */function GQ(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.12.0 2025-08-19 */function QQ(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.12.0 2025-08-19 */function YQ(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.12.0 2025-08-19 */const wi=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}try{const a=t(...s);return o==null||o.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a}},X=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}return r==null||r.setPreQueueTime(e,i),t(...s).then(a=>(n.trace(`Returning result from ${e}`),o==null||o.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a})};/*! @azure/msal-common v15.12.0 2025-08-19 */class vw{constructor(e,n,r,i){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=i}async detectRegion(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=Tu.ENVIRONMENT_VARIABLE;else{const s=vw.IMDS_OPTIONS;try{const o=await X(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(ee.IMDS_VERSION,s);if(o.status===qa.SUCCESS&&(r=o.body,n.region_source=Tu.IMDS),o.status===qa.BAD_REQUEST){const a=await X(this.getCurrentVersion.bind(this),F.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!a)return n.region_source=Tu.FAILED_AUTO_DETECTION,null;const c=await X(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,s);c.status===qa.SUCCESS&&(r=c.body,n.region_source=Tu.IMDS)}}catch{return n.region_source=Tu.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=Tu.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(F.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${ee.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,ee.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(F.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${ee.IMDS_ENDPOINT}?format=json`,e);return r.status===qa.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}vw.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.12.0 2025-08-19 */function si(){return Math.round(new Date().getTime()/1e3)}function w1(t){return t.getTime()/1e3}function id(t){return t?new Date(Number(t)*1e3):new Date}function Nv(t,e){const n=Number(t)||0;return si()+e>n}function JQ(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function XQ(t){return Number(t)>si()}/*! @azure/msal-common v15.12.0 2025-08-19 */function _w(t,e,n,r,i){return{credentialType:Jn.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:i,lastUpdatedAt:Date.now().toString()}}function ww(t,e,n,r,i,s,o,a,c,l,u,d,f,m,w){var v,E;const y={homeAccountId:t,credentialType:Jn.ACCESS_TOKEN,secret:n,cachedAt:si().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:i,target:s,tokenType:u||It.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),m&&(y.requestedClaims=m,y.requestedClaimsHash=w),((v=y.tokenType)==null?void 0:v.toLowerCase())!==It.BEARER.toLowerCase())switch(y.credentialType=Jn.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case It.POP:const T=fh(n,c);if(!((E=T==null?void 0:T.cnf)!=null&&E.kid))throw ae(cj);y.keyId=T.cnf.kid;break;case It.SSH:y.keyId=f}return y}function qj(t,e,n,r,i,s,o){const a={credentialType:Jn.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function p0(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function T1(t){return t?p0(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Jn.ACCESS_TOKEN||t.credentialType===Jn.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function ZQ(t){return t?p0(t)&&t.hasOwnProperty("realm")&&t.credentialType===Jn.ID_TOKEN:!1}function E1(t){return t?p0(t)&&t.credentialType===Jn.REFRESH_TOKEN:!1}function eY(t,e){const n=t.indexOf(Qn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function tY(t,e){let n=!1;t&&(n=t.indexOf(Vf.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function nY({environment:t,clientId:e}){return[VA,t,e].join(Op.CACHE_KEY_SEPARATOR).toLowerCase()}function rY(t,e){return e?t.indexOf(VA)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function iY(t,e){return e?t.indexOf(Ev.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function C1(){return si()+Ev.REFRESH_TIME_SECONDS}function $g(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function zE(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function S1(t){return t.expiresAt<=si()}/*! @azure/msal-common v15.12.0 2025-08-19 */class hr{constructor(e,n,r,i,s,o,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=c||!1,this.regionDiscovery=new vw(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(ee.CIAM_AUTH_URL))return rs.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case ee.ADFS:return rs.Adfs;case ee.DSTS:return rs.Dsts}return rs.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new _t(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ae(xo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ae(xo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ae(xo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ae(dj);return this.replacePath(this.metadata.end_session_endpoint)}else throw ae(xo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ae(xo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ae(xo)}canReplaceTenant(e){return e.PathSegments.length===1&&!hr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===rs.Default&&this.protocolMode!==ni.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const i=new _t(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=s[c];if(c===0&&this.canReplaceTenant(i)){const u=new _t(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(n=n.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===rs.Adfs||this.protocolMode===ni.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await X(this.updateCloudDiscoveryMetadata.bind(this),F.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await X(this.updateEndpointMetadata.bind(this),F.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(s=this.performanceClient)==null||s.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:C1(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==ui.CACHE&&(r==null?void 0:r.source)!==ui.CACHE&&(e.expiresAt=C1(),e.canonical_authority=this.canonicalAuthority);const i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){var i,s,o;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===ui.HARDCODED_VALUES&&(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&n.metadata){const a=await X(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);$g(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await X(this.getEndpointMetadataFromNetwork.bind(this),F.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(o=this.authorityOptions.azureRegionConfiguration)!=null&&o.azureRegion&&(r=await X(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),$g(e,r,!0),ui.NETWORK;throw ae(XU,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),$g(e,n,!1),{source:ui.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const i=this.getEndpointMetadataFromHardcodedValues();if(i)return $g(e,i,!1),{source:ui.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=S1(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ui.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new _t(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Ot(_j)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const i=await this.networkInterface.sendGetRequestAsync(n,e);return GQ(i.body)?i.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(i){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${i}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in m1?m1[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.azureRegion;if(n){if(n!==ee.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=BE.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,hr.replaceWithRegionalInformation(e,n);const o=await X(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),F.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((s=this.authorityOptions.azureRegionConfiguration)==null?void 0:s.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=BE.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,hr.replaceWithRegionalInformation(e,o);this.regionDiscoveryMetadata.region_outcome=BE.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await X(this.getCloudDiscoveryMetadataFromNetwork.bind(this),F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return zE(e,r,!0),ui.NETWORK;throw Ot(wj)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||ee.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||ee.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||ee.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),zE(e,n,!1),ui.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const i=V7(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),zE(e,i,!1),ui.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=S1(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),ui.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===rs.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),hr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=bv(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ot(XA)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),hr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${ee.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(e,n);let o,a;if(QQ(s.body))o=s.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(YQ(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),o=s.body,o.error===ee.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=bv(a,this.hostnameAndPort)}catch(s){if(s instanceof xt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const o=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=hr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&_t.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==QA.None){const i=n.tenant?n.tenant:ee.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${i}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return ee.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ae(xo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Rj.has(e)}static isPublicCloudAuthority(e){return ee.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const i=new _t(e);i.validateAsUri();const s=i.getUrlComponents();let o=`${n}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${n}.${ee.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=_t.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=hr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=hr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=hr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const i=new _t(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(ee.CIAM_AUTH_URL)){const s=i.HostNameAndPort.split(".")[0];n=`${n}${s}${ee.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}hr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",oc.COMMON,oc.CONSUMERS,oc.ORGANIZATIONS]);function sY(t){var i;const r=(i=new _t(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:i.toLowerCase();switch(r){case oc.COMMON:case oc.ORGANIZATIONS:case oc.CONSUMERS:return;default:return r}}function Gj(t){return t.endsWith(ee.FORWARD_SLASH)?t:`${t}${ee.FORWARD_SLASH}`}function oY(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Ot(XA)}return{canonicalAuthority:t.authority?Gj(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.12.0 2025-08-19 */async function Qj(t,e,n,r,i,s,o){o==null||o.addQueueMeasurement(F.AuthorityFactoryCreateDiscoveredInstance,s);const a=hr.transformCIAMAuthority(Gj(t)),c=new hr(a,e,n,r,i,s,o);try{return await X(c.resolveEndpointsAsync.bind(c),F.AuthorityResolveEndpointsAsync,i,o,s)(),c}catch{throw ae(xo)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class au extends xt{constructor(e,n,r,i,s){super(e,n,r),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,au.prototype)}}/*! @azure/msal-common v15.12.0 2025-08-19 */function Tw(t,e,n){var r;return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class Vs{static generateThrottlingStorageKey(e){return`${Vf.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){var o;const i=Vs.generateThrottlingStorageKey(n),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,r);return}throw new au(((o=s.errorCodes)==null?void 0:o.join(" "))||ee.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,n,r,i){if(Vs.checkResponseStatus(r)||Vs.checkResponseForRetryAfter(r)){const s={throttleTime:Vs.calculateThrottleTime(parseInt(r.headers[Ir.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Vs.generateThrottlingStorageKey(n),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ir.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Vf.DEFAULT_THROTTLE_TIME_SECONDS),r+Vf.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,i){const s=Tw(n,r,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,r.correlationId)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class Ew extends xt{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Ew.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function Tf(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new Ew(t,e,n)}/*! @azure/msal-common v15.12.0 2025-08-19 */class m0{constructor(e,n){this.config=Y7(e),this.logger=new Im(this.config.loggerOptions,hj,GA),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Ir.CONTENT_TYPE]=ee.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case cs.HOME_ACCOUNT_ID:try{const r=rd(e.credential);n[Ir.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case cs.UPN:n[Ir.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,i,s,o){var c;o&&((c=this.performanceClient)==null||c.addQueueMeasurement(o,s));const a=await this.sendPostRequest(i,e,{body:n,headers:r},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,n,r,i){var o,a,c;Vs.preProcess(this.cacheManager,e,i);let s;try{s=await X(this.networkClient.sendPostRequestAsync.bind(this.networkClient),F.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(n,r);const l=s.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((o=s.body.refresh_token)==null?void 0:o.length)||0,httpVerToken:l[Ir.X_MS_HTTP_VERSION]||"",requestId:l[Ir.X_MS_REQUEST_ID]||""},i)}catch(l){if(l instanceof Ew){const u=l.responseHeaders;throw u&&((c=this.performanceClient)==null||c.addFields({httpVerToken:u[Ir.X_MS_HTTP_VERSION]||"",requestId:u[Ir.X_MS_REQUEST_ID]||"",contentTypeHeader:u[Ir.CONTENT_TYPE]||void 0,contentLengthHeader:u[Ir.CONTENT_LENGTH]||void 0,httpStatus:l.httpStatus},i)),l.error}throw l instanceof xt?l:ae(JU)}return Vs.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(F.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,i=await Qj(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=i}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&yw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&cc(n,e.tokenQueryParameters),l0(n,e.correlationId),gw(n,e.correlationId,this.performanceClient),Mp(n)}}/*! @azure/msal-common v15.12.0 2025-08-19 */function Yj(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.12.0 2025-08-19 */class gs{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){var l,u,d,f,m,w,y;const i=new gs;n.authorityType===rs.Adfs?i.authorityType=jg.ADFS_ACCOUNT_TYPE:n.protocolMode===ni.OIDC?i.authorityType=jg.GENERIC_ACCOUNT_TYPE:i.authorityType=jg.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&r&&(s=kv(e.clientInfo,r)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;const o=e.environment||n&&n.getPreferredCache();if(!o)throw ae(WA);i.environment=o,i.realm=(s==null?void 0:s.utid)||Yj(e.idTokenClaims)||"",i.localAccountId=(s==null?void 0:s.uid)||((l=e.idTokenClaims)==null?void 0:l.oid)||((u=e.idTokenClaims)==null?void 0:u.sub)||"";const a=((d=e.idTokenClaims)==null?void 0:d.preferred_username)||((f=e.idTokenClaims)==null?void 0:f.upn),c=(m=e.idTokenClaims)!=null&&m.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||c||"",i.loginHint=(w=e.idTokenClaims)==null?void 0:w.login_hint,i.name=((y=e.idTokenClaims)==null?void 0:y.name)||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{const v=e0(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[v]}return i}static createFromAccountInfo(e,n,r){var s;const i=new gs;return i.authorityType=e.authorityType||jg.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=n,i.msGraphHost=r,i.tenantProfiles=Array.from(((s=e.tenantProfiles)==null?void 0:s.values())||[]),i}static generateHomeAccountId(e,n,r,i,s){if(!(n===rs.Adfs||n===rs.Dsts)){if(e)try{const o=kv(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}r.warning("No client info in response")}return(s==null?void 0:s.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let i=!0;if(r){const s=e.idTokenClaims||{},o=n.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&i}}/*! @azure/msal-common v15.12.0 2025-08-19 */const Ov="no_tokens_found",Jj="native_account_unavailable",g0="refresh_token_expired",y0="ux_not_allowed",aY="interaction_required",cY="consent_required",lY="login_required",Cw="bad_token";/*! @azure/msal-common v15.12.0 2025-08-19 */const I1=[aY,cY,lY,Cw,y0],uY=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],dY={[Ov]:"No refresh token found in the cache. Please sign-in.",[Jj]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[g0]:"Refresh token has expired.",[Cw]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[y0]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class ys extends xt{constructor(e,n,r,i,s,o,a,c){super(e,n,r),Object.setPrototypeOf(this,ys.prototype),this.timestamp=i||ee.EMPTY_STRING,this.traceId=s||ee.EMPTY_STRING,this.correlationId=o||ee.EMPTY_STRING,this.claims=a||ee.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function Xj(t,e,n){const r=!!t&&I1.indexOf(t)>-1,i=!!n&&uY.indexOf(n)>-1,s=!!e&&I1.some(o=>e.indexOf(o)>-1);return r||s||i}function Mv(t){return new ys(t,dY[t])}/*! @azure/msal-common v15.12.0 2025-08-19 */class ph{static setRequestState(e,n,r){const i=ph.generateLibraryState(e,r);return n?`${i}${ee.RESOURCE_DELIM}${n}`:i}static generateLibraryState(e,n){if(!e)throw ae(GS);const r={id:e.createNewGuid()};n&&(r.meta=n);const i=JSON.stringify(r);return e.base64Encode(i)}static parseRequestState(e,n){if(!e)throw ae(GS);if(!n)throw ae(Nd);try{const r=n.split(ee.RESOURCE_DELIM),i=r[0],s=r.length>1?r.slice(1).join(ee.RESOURCE_DELIM):ee.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||ee.EMPTY_STRING,libraryState:a}}catch{throw ae(Nd)}}}/*! @azure/msal-common v15.12.0 2025-08-19 */const hY={SW:"sw"};class Od{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(F.PopTokenGenerateCnf,e.correlationId);const r=await X(this.generateKid.bind(this),F.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(F.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:hY.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,i){const{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:c,shrOptions:l}=r,u=o?new _t(o):void 0,d=u==null?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:si(),m:s==null?void 0:s.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},n,l,r.correlationId)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class fY{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.12.0 2025-08-19 */class Ul{constructor(e,n,r,i,s,o,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const i=`Error(s): ${e.error_codes||ee.NOT_AVAILABLE} - Timestamp: ${e.timestamp||ee.NOT_AVAILABLE} - Description: ${e.error_description||ee.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||ee.NOT_AVAILABLE} - Trace ID: ${e.trace_id||ee.NOT_AVAILABLE}`,s=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,o=new au(e.error,i,e.suberror,s,e.status);if(n&&e.status&&e.status>=qa.SERVER_ERROR_RANGE_START&&e.status<=qa.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(n&&e.status&&e.status>=qa.CLIENT_ERROR_RANGE_START&&e.status<=qa.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw Xj(e.error,e.error_description,e.suberror)?new ys(e.error,e.error_description,e.suberror,e.timestamp||ee.EMPTY_STRING,e.trace_id||ee.EMPTY_STRING,e.correlation_id||ee.EMPTY_STRING,e.claims||ee.EMPTY_STRING,s):o}}async handleServerTokenResponse(e,n,r,i,s,o,a,c,l){var w;(w=this.performanceClient)==null||w.addQueueMeasurement(F.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=fh(e.id_token||ee.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&u.nonce!==s.nonce)throw ae(tj);if(i.maxAge||i.maxAge===0){const y=u.auth_time;if(!y)throw ae(HA);Aj(y,i.maxAge)}}this.homeAccountIdentifier=gs.generateHomeAccountId(e.client_info||ee.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,u);let d;s&&s.state&&(d=ph.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;const f=this.generateCacheRecord(e,n,r,i,u,o,s);let m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new fY(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),a&&!c&&f.account){const y=this.cacheStorage.generateAccountKey(f.account.getAccountInfo());if(!this.cacheStorage.getAccount(y,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ul.generateAuthenticationResult(this.cryptoObj,n,f,!1,i,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(f,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return Ul.generateAuthenticationResult(this.cryptoObj,n,f,!1,i,u,d,e,l)}generateCacheRecord(e,n,r,i,s,o,a){const c=n.getPreferredCache();if(!c)throw ae(WA);const l=Yj(s);let u,d;e.id_token&&s&&(u=_w(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=v0(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,c,l,a,void 0,this.logger));let f=null;if(e.access_token){const y=e.scope?Rn.fromString(e.scope):new Rn(i.scopes||[]),v=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,E=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,T=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=r+v,b=C+E,M=T&&T>0?r+T:void 0;f=ww(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant||"",y.printScopes(),C,b,this.cryptoObj.base64Decode,M,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){const v=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=r+v}m=qj(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,y)}let w=null;return e.foci&&(w={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:f,refreshToken:m,appMetadata:w}}static async generateAuthenticationResult(e,n,r,i,s,o,a,c,l){var C,b,M,L,k;let u=ee.EMPTY_STRING,d=[],f=null,m,w,y=ee.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===It.POP&&!s.popKid){const I=new Od(e),{secret:A,keyId:R}=r.accessToken;if(!R)throw ae(KA);u=await I.signPopToken(A,R,s)}else u=r.accessToken.secret;d=Rn.fromString(r.accessToken.target).asArray(),f=id(r.accessToken.expiresOn),m=id(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(w=id(r.accessToken.refreshOn))}r.appMetadata&&(y=r.appMetadata.familyId===Tv?Tv:"");const v=(o==null?void 0:o.oid)||(o==null?void 0:o.sub)||"",E=(o==null?void 0:o.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const T=r.account?t0(r.account.getAccountInfo(),void 0,o,(C=r.idToken)==null?void 0:C.secret):null;return{authority:n.canonicalAuthority,uniqueId:v,tenantId:E,scopes:d,account:T,idToken:((b=r==null?void 0:r.idToken)==null?void 0:b.secret)||"",idTokenClaims:o||{},accessToken:u,fromCache:i,expiresOn:f,extExpiresOn:m,refreshOn:w,correlationId:s.correlationId,requestId:l||ee.EMPTY_STRING,familyId:y,tokenType:((M=r.accessToken)==null?void 0:M.tokenType)||ee.EMPTY_STRING,state:a?a.userRequestState:ee.EMPTY_STRING,cloudGraphHostName:((L=r.account)==null?void 0:L.cloudGraphHostName)||ee.EMPTY_STRING,msGraphHost:((k=r.account)==null?void 0:k.msGraphHost)||ee.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function v0(t,e,n,r,i,s,o,a,c,l,u,d){d==null||d.verbose("setCachedAccount called");const m=t.getAccountKeys().find(T=>T.startsWith(n));let w=null;m&&(w=t.getAccount(m,i));const y=w||gs.createAccount({homeAccountId:n,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:l==null?void 0:l.cloud_graph_host_name,msGraphHost:l==null?void 0:l.msgraph_host,nativeAccountId:u},e,r),v=y.tenantProfiles||[],E=c||y.realm;if(E&&!v.find(T=>T.tenantId===E)){const T=e0(n,y.localAccountId,E,s);v.push(T)}return y.tenantProfiles=v,y}/*! @azure/msal-common v15.12.0 2025-08-19 */async function Zj(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.12.0 2025-08-19 */class eV extends m0{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(F.AuthClientAcquireToken,e.correlationId),!e.code)throw ae(ij);const r=si(),i=await X(this.executeTokenRequest.bind(this),F.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=(c=i.headers)==null?void 0:c[Ir.X_MS_REQUEST_ID],o=new Ul(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),X(o.handleServerTokenResponse.bind(o),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,n,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Ot(vj);const n=this.createLogoutUrlQueryString(e);return _t.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(F.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),i=_t.appendQueryString(e.tokenEndpoint,r),s=await X(this.createTokenRequestBody.bind(this),F.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let o;if(n.clientInfo)try{const u=kv(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${u.uid}${Op.CLIENT_INFO_SEPARATOR}${u.utid}`,type:cs.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}const a=this.createTokenRequestHeaders(o||n.ccsCredential),c=Tw(this.config.authOptions.clientId,n);return X(this.executePostToTokenEndpoint.bind(this),F.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(i,s,a,c,n.correlationId,F.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(o0(n,e.embeddedClientId||((s=e.tokenBodyParameters)==null?void 0:s[Fl])||this.config.authOptions.clientId),this.includeRedirectUri)a0(n,e.redirectUri);else if(!e.redirectUri)throw Ot(fj);if(s0(n,e.scopes,!0,this.oidcDefaultScopes),$Q(n,e.code),u0(n,this.config.libraryInfo),d0(n,this.config.telemetry.application),Kj(n),this.serverTelemetryManager&&!Oj(this.config)&&Wj(n,this.serverTelemetryManager),e.codeVerifier&&HQ(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&jj(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;Vj(n,await Zj(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),$j(n,o.assertionType)}if(Bj(n,qU.AUTHORIZATION_CODE_GRANT),h0(n),e.authenticationScheme===It.POP){const o=new Od(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await X(o.generateCnf.bind(o),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,f0(n,a)}else if(e.authenticationScheme===It.SSH)if(e.sshJwk)zj(n,e.sshJwk);else throw Ot(mw);(!_i.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&c0(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const o=kv(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${Op.CLIENT_INFO_SEPARATOR}${o.utid}`,type:cs.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case cs.HOME_ACCOUNT_ID:try{const o=rd(r.credential);$f(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case cs.UPN:Pv(n,r.credential);break}return e.embeddedClientId&&yw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&cc(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[v1])&&cc(n,{[v1]:"1"}),gw(n,e.correlationId,this.performanceClient),Mp(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&LQ(n,e.postLogoutRedirectUri),e.correlationId&&l0(n,e.correlationId),e.idTokenHint&&FQ(n,e.idTokenHint),e.state&&Fj(n,e.state),e.logoutHint&&WQ(n,e.logoutHint),e.extraQueryParameters&&cc(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&Hj(n),Mp(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const pY=300;class mY extends m0{constructor(e,n){super(e,n)}async acquireToken(e){var o,a;(o=this.performanceClient)==null||o.addQueueMeasurement(F.RefreshTokenClientAcquireToken,e.correlationId);const n=si(),r=await X(this.executeTokenRequest.bind(this),F.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=(a=r.headers)==null?void 0:a[Ir.X_MS_REQUEST_ID],s=new Ul(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(r.body),X(s.handleServerTokenResponse.bind(s),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Ot(yj);if((r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw ae(zA);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await X(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(i){const s=i instanceof ys&&i.errorCode===Ov,o=i instanceof au&&i.errorCode===l1.INVALID_GRANT_ERROR&&i.subError===l1.CLIENT_MISMATCH_ERROR;if(s||o)return X(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw i}return X(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var s,o,a;(s=this.performanceClient)==null||s.addQueueMeasurement(F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=wi(this.cacheManager.getRefreshToken.bind(this.cacheManager),F.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw Mv(Ov);if(r.expiresOn&&Nv(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||pY))throw(o=this.performanceClient)==null||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Mv(g0);const i={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||It.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:cs.HOME_ACCOUNT_ID}};try{return await X(this.acquireToken.bind(this),F.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(c){if(c instanceof ys&&((a=this.performanceClient)==null||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===Cw)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const l=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(l,e.correlationId)}throw c}}async executeTokenRequest(e,n){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(F.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),i=_t.appendQueryString(n.tokenEndpoint,r),s=await X(this.createTokenRequestBody.bind(this),F.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=Tw(this.config.authOptions.clientId,e);return X(this.executePostToTokenEndpoint.bind(this),F.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,F.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(o0(n,e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[Fl])||this.config.authOptions.clientId),e.redirectUri&&a0(n,e.redirectUri),s0(n,e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),Bj(n,qU.REFRESH_TOKEN_GRANT),h0(n),u0(n,this.config.libraryInfo),d0(n,this.config.telemetry.application),Kj(n),this.serverTelemetryManager&&!Oj(this.config)&&Wj(n,this.serverTelemetryManager),BQ(n,e.refreshToken),this.config.clientCredentials.clientSecret&&jj(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;Vj(n,await Zj(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),$j(n,o.assertionType)}if(e.authenticationScheme===It.POP){const o=new Od(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await X(o.generateCnf.bind(o),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,f0(n,a)}else if(e.authenticationScheme===It.SSH)if(e.sshJwk)zj(n,e.sshJwk);else throw Ot(mw);if((!_i.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&c0(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case cs.HOME_ACCOUNT_ID:try{const o=rd(e.ccsCredential.credential);$f(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case cs.UPN:Pv(n,e.ccsCredential.credential);break}return e.embeddedClientId&&yw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&cc(n,e.tokenBodyParameters),gw(n,e.correlationId,this.performanceClient),Mp(n)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class gY extends m0{constructor(e,n){super(e,n)}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(F.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Xc.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!_i.isEmptyObj(e.claims))throw this.setCacheOutcome(Xc.FORCE_REFRESH_OR_CLAIMS,e.correlationId),ae(ac);if(!e.account)throw ae(zA);const r=e.account.tenantId||sY(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,r);if(s){if(XQ(s.cachedAt)||Nv(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Xc.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),ae(ac);s.refreshOn&&Nv(s.refreshOn,0)&&(n=Xc.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Xc.NO_CACHED_ACCESS_TOKEN,e.correlationId),ae(ac);const o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await X(this.generateResultFromCacheRecord.bind(this),F.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,i;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(i=this.performanceClient)==null||i.addFields({cacheOutcome:e},n),e!==Xc.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=fh(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const s=r==null?void 0:r.auth_time;if(!s)throw ae(HA);Aj(s,n.maxAge)}return Ul.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const yY={sendGetRequestAsync:()=>Promise.reject(ae(Xe)),sendPostRequestAsync:()=>Promise.reject(ae(Xe))};/*! @azure/msal-common v15.12.0 2025-08-19 */function vY(t,e,n,r){var a,c;const i=e.correlationId,s=new Map;o0(s,e.embeddedClientId||((a=e.extraQueryParameters)==null?void 0:a[Fl])||t.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(s0(s,o,!0,(c=t.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),a0(s,e.redirectUri),l0(s,i),MQ(s,e.responseMode),h0(s),e.prompt&&(jQ(s,e.prompt),r==null||r.addFields({prompt:e.prompt},i)),e.domainHint&&(UQ(s,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},i)),e.prompt!==kr.SELECT_ACCOUNT)if(e.sid&&e.prompt===kr.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),_1(s,e.sid),r==null||r.addFields({sidFromRequest:!0},i);else if(e.account){const l=TY(e.account);let u=EY(e.account);if(u&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Vg(s,u),r==null||r.addFields({loginHintFromClaim:!0},i);try{const d=rd(e.account.homeAccountId);$f(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&e.prompt===kr.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),_1(s,l),r==null||r.addFields({sidFromClaim:!0},i);try{const d=rd(e.account.homeAccountId);$f(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Vg(s,e.loginHint),Pv(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Vg(s,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},i);try{const d=rd(e.account.homeAccountId);$f(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Vg(s,e.loginHint),Pv(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&VQ(s,e.nonce),e.state&&Fj(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&c0(s,e.claims,t.clientCapabilities),e.embeddedClientId&&yw(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(XS))&&Hj(s),s}function _0(t,e,n,r){const i=Mp(e,n,r);return _t.appendQueryString(t.authorizationEndpoint,i)}function _Y(t,e){if(tV(t,e),!t.code)throw ae(lj);return t}function tV(t,e){if(!t.state||!e)throw t.state?ae(WS,"Cached State"):ae(WS,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw ae(Nd,t.state)}try{r=decodeURIComponent(e)}catch{throw ae(Nd,t.state)}if(n!==r)throw ae(ej);if(t.error||t.error_description||t.suberror){const i=wY(t);throw Xj(t.error,t.error_description,t.suberror)?new ys(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new au(t.error||"",t.error_description,t.suberror,i)}}function wY(t){var r,i;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(i=t.error_uri)==null?void 0:i.substring(n+e.length):void 0}function TY(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}function EY(t){var e;return t.loginHint||((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.12.0 2025-08-19 */const b1=",",nV="|";function CY(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[n,r]],[2,[i,s]]]);let a=[];if(e!=null&&e.length){if(a=e.split(b1),a.length<4)return e}else a=Array.from({length:4},()=>nV);return o.forEach((c,l)=>{var u,d;c.length===2&&((u=c[0])!=null&&u.length)&&((d=c[1])!=null&&d.length)&&SY({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(b1)}function SY(t){const{skuArr:e,index:n,skuName:r,skuVersion:i}=t;n>=e.length||(e[n]=[r,i].join(nV))}class Dp{constructor(e,n){this.cacheOutcome=Xc.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||ee.EMPTY_STRING,this.wrapperVer=e.wrapperVer||ee.EMPTY_STRING,this.telemetryCacheKey=Qn.CACHE_KEY+Op.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Qn.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const i=n.join(Qn.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(Qn.VALUE_SEPARATOR);return[Qn.SCHEMA_VERSION,o,i].join(Qn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Dp.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(Qn.VALUE_SEPARATOR),i=e.errors.slice(0,n).join(Qn.VALUE_SEPARATOR),s=e.errors.length,o=n<s?Qn.OVERFLOW_TRUE:Qn.OVERFLOW_FALSE,a=[s,o].join(Qn.VALUE_SEPARATOR);return[Qn.SCHEMA_VERSION,e.cacheHits,r,i,a].join(Qn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=Qn.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof xt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(Qn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Dp.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const i={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,i=0;const s=e.errors.length;for(n=0;n<s;n++){const o=e.failedRequests[2*n]||ee.EMPTY_STRING,a=e.failedRequests[2*n+1]||ee.EMPTY_STRING,c=e.errors[n]||ee.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+c.length+3,i<Qn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||ee.EMPTY_STRING),e.push(this.regionSource||ee.EMPTY_STRING),e.push(this.regionOutcome||ee.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return CY(e)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const rV="missing_kid_error",iV="missing_alg_error";/*! @azure/msal-common v15.12.0 2025-08-19 */const IY={[rV]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[iV]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class w0 extends xt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,w0.prototype)}}function A1(t){return new w0(t,IY[t])}/*! @azure/msal-common v15.12.0 2025-08-19 */class T0{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw A1(rV);if(!e.alg)throw A1(iV);const n=new T0({typ:e.typ||v7.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const E0="pkce_not_created",C0="ear_jwk_empty",sV="ear_jwe_empty",ZS="crypto_nonexistent",Sw="empty_navigate_uri",oV="hash_empty_error",S0="no_state_in_hash",aV="hash_does_not_contain_known_properties",cV="unable_to_parse_state",lV="state_interaction_type_mismatch",uV="interaction_in_progress",dV="popup_window_error",hV="empty_window_error",Lp="user_cancelled",bY="monitor_popup_timeout",fV="monitor_window_timeout",pV="redirect_in_iframe",mV="block_iframe_reload",gV="block_nested_popups",AY="iframe_closed_prematurely",Iw="silent_logout_unsupported",yV="no_account_error",kY="silent_prompt_value_error",vV="no_token_request_cache_error",_V="unable_to_parse_token_request_cache_error",xY="auth_request_not_set_error",RY="invalid_cache_type",bw="non_browser_environment",xu="database_not_open",Dv="no_network_connectivity",wV="post_request_failed",TV="get_request_failed",eI="failed_to_parse_response",EV="unable_to_load_token",I0="crypto_key_not_found",CV="auth_code_required",SV="auth_code_or_nativeAccountId_required",IV="spa_code_and_nativeAccountId_present",b0="database_unavailable",bV="unable_to_acquire_token_from_native_platform",AV="native_handshake_timeout",kV="native_extension_not_installed",A0="native_connection_not_established",Bf="uninitialized_public_client_application",xV="native_prompt_not_supported",RV="invalid_base64_string",PV="invalid_pop_token_request",NV="failed_to_build_headers",OV="failed_to_parse_headers",Ey="failed_to_decrypt_ear_response",Lv="timed_out";/*! @azure/msal-browser v4.21.1 2025-08-27 */const Co="For more visit: aka.ms/msaljs/browser-errors",PY={[E0]:"The PKCE code challenge and verifier could not be generated.",[C0]:"No EAR encryption key provided. This is unexpected.",[sV]:"Server response does not contain ear_jwe property. This is unexpected.",[ZS]:"The crypto object or function is not available.",[Sw]:"Navigation URI is empty. Please check stack trace for more info.",[oV]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Co}`,[S0]:"Hash does not contain state. Please verify that the request originated from msal.",[aV]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Co}`,[cV]:"Unable to parse state. Please verify that the request originated from msal.",[lV]:"Hash contains state but the interaction type does not match the caller.",[uV]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Co}`,[dV]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[hV]:"window.open returned null or undefined window object.",[Lp]:"User cancelled the flow.",[bY]:`Token acquisition in popup failed due to timeout.  ${Co}`,[fV]:`Token acquisition in iframe failed due to timeout.  ${Co}`,[pV]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[mV]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Co}`,[gV]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[AY]:"The iframe being monitored was closed prematurely.",[Iw]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[yV]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[kY]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[vV]:"No token request found in cache.",[_V]:"The cached token request could not be parsed.",[xY]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[RY]:"Invalid cache type",[bw]:"Login and token requests are not supported in non-browser environments.",[xu]:"Database is not open!",[Dv]:"No network connectivity. Check your internet connection.",[wV]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[TV]:"Network request failed. Please check the network trace to determine root cause.",[eI]:"Failed to parse network response. Check network trace.",[EV]:"Error loading token to cache.",[I0]:"Cryptographic Key or Keypair not found in browser storage.",[CV]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[SV]:"An authorization code or nativeAccountId must be provided to this flow.",[IV]:"Request cannot contain both spa code and native account id.",[b0]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[bV]:`Unable to acquire token from native platform.  ${Co}`,[AV]:"Timed out while attempting to establish connection to browser extension",[kV]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[A0]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Co}`,[Bf]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Co}`,[xV]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[RV]:"Invalid base64 encoded string.",[PV]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[NV]:"Failed to build request headers object.",[OV]:"Failed to parse response headers",[Ey]:"Failed to decrypt ear response",[Lv]:"The request timed out."};class bm extends xt{constructor(e,n){super(e,PY[e],n),Object.setPrototypeOf(this,bm.prototype),this.name="BrowserAuthError"}}function _e(t,e){return new bm(t,e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const Kr={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Di={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},rf={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Pn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},k1={GET:"GET",POST:"POST"},Ma={SIGNIN:"signin",SIGNOUT:"signout"},wn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Bg={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},kt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Le;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(Le||(Le={}));const x1={scopes:hh},MV="jwk",tI="msal.db",NY=1,OY=`${tI}.keys`,Cr={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},MY=[Cr.Default,Cr.Skip,Cr.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.21.1 2025-08-27 */function Hg(t){return encodeURIComponent(Fp(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function _c(t){return DV(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fp(t){return DV(new TextEncoder().encode(t))}function DV(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */function fs(t){return new TextDecoder().decode(lc(t))}function lc(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw _e(RV)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const DY="RSASSA-PKCS1-v1_5",mh="AES-GCM",LV="HKDF",k0="SHA-256",LY=2048,FY=new Uint8Array([1,0,1]),R1="0123456789abcdef",P1=new Uint32Array(1),x0="raw",FV="encrypt",R0="decrypt",UY="deriveKey",jY="crypto_subtle_undefined",P0={name:DY,hash:k0,modulusLength:LY,publicExponent:FY};function VY(t){if(!window)throw _e(bw);if(!window.crypto)throw _e(ZS);if(!t&&!window.crypto.subtle)throw _e(ZS,jY)}async function UV(t,e,n){e==null||e.addQueueMeasurement(F.Sha256Digest,n);const i=new TextEncoder().encode(t);return window.crypto.subtle.digest(k0,i)}function $Y(t){return window.crypto.getRandomValues(t)}function WE(){return window.crypto.getRandomValues(P1),P1[0]}function vs(){const t=Date.now(),e=WE()*1024+(WE()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),i=e&2**30-1,s=WE();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=s>>>24,n[13]=s>>>16,n[14]=s>>>8,n[15]=s;let o="";for(let a=0;a<n.length;a++)o+=R1.charAt(n[a]>>>4),o+=R1.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(o+="-");return o}async function BY(t,e){return window.crypto.subtle.generateKey(P0,t,e)}async function KE(t){return window.crypto.subtle.exportKey(MV,t)}async function HY(t,e,n){return window.crypto.subtle.importKey(MV,t,P0,e,n)}async function zY(t,e){return window.crypto.subtle.sign(P0,t,e)}async function N0(){const t=await jV(),n={alg:"dir",kty:"oct",k:_c(new Uint8Array(t))};return Fp(JSON.stringify(n))}async function WY(t){const e=fs(t),r=JSON.parse(e).k,i=lc(r);return window.crypto.subtle.importKey(x0,i,mh,!1,[R0])}async function KY(t,e){const n=e.split(".");if(n.length!==5)throw _e(Ey,"jwe_length");const r=await WY(t).catch(()=>{throw _e(Ey,"import_key")});try{const i=new TextEncoder().encode(n[0]),s=lc(n[2]),o=lc(n[3]),a=lc(n[4]),c=a.byteLength*8,l=new Uint8Array(o.length+a.length);l.set(o),l.set(a,o.length);const u=await window.crypto.subtle.decrypt({name:mh,iv:s,tagLength:c,additionalData:i},r,l);return new TextDecoder().decode(u)}catch{throw _e(Ey,"decrypt")}}async function jV(){const t=await window.crypto.subtle.generateKey({name:mh,length:256},!0,[FV,R0]);return window.crypto.subtle.exportKey(x0,t)}async function N1(t){return window.crypto.subtle.importKey(x0,t,LV,!1,[UY])}async function VV(t,e,n){return window.crypto.subtle.deriveKey({name:LV,salt:e,hash:k0,info:new TextEncoder().encode(n)},t,{name:mh,length:256},!1,[FV,R0])}async function qY(t,e,n){const r=new TextEncoder().encode(e),i=window.crypto.getRandomValues(new Uint8Array(16)),s=await VV(t,i,n),o=await window.crypto.subtle.encrypt({name:mh,iv:new Uint8Array(12)},s,r);return{data:_c(new Uint8Array(o)),nonce:_c(i)}}async function O1(t,e,n,r){const i=lc(r),s=await VV(t,lc(e),n),o=await window.crypto.subtle.decrypt({name:mh,iv:new Uint8Array(12)},s,i);return new TextDecoder().decode(o)}async function $V(t){const e=await UV(t),n=new Uint8Array(e);return _c(n)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const Up="storage_not_supported",nI="stubbed_public_client_application_called",Fv="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.21.1 2025-08-27 */const Cy={[Up]:"Given storage configuration option was not supported.",[nI]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Fv]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Cy[Up],Cy[nI],Cy[Fv];class O0 extends xt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,O0.prototype)}}function M0(t){return new O0(t,Cy[t])}/*! @azure/msal-browser v4.21.1 2025-08-27 */function BV(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function GY(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function D0(){return window.parent!==window}function QY(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Kr.POPUP_NAME_PREFIX}.`)===0}function Fo(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function YY(){const e=new _t(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function JY(){if(_t.hashContainsKnownProperties(window.location.hash)&&D0())throw _e(mV)}function XY(t){if(D0()&&!t)throw _e(pV)}function ZY(){if(QY())throw _e(gV)}function HV(){if(typeof window>"u")throw _e(bw)}function zV(t){if(!t)throw _e(Bf)}function L0(t){HV(),JY(),ZY(),zV(t)}function M1(t,e){if(L0(t),XY(e.system.allowRedirectInIframe),e.cache.cacheLocation===Pn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw M0(Fv)}function WV(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function eJ(){return vs()}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Uv{navigateInternal(e,n){return Uv.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Uv.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,i)=>{setTimeout(()=>{i(_e(Lv,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class tJ{async sendGetRequestAsync(e,n){let r,i={},s=0;const o=D1(n);try{r=await fetch(e,{method:k1.GET,headers:o})}catch(a){throw Tf(_e(window.navigator.onLine?TV:Dv),void 0,void 0,a)}i=L1(r.headers);try{return s=r.status,{headers:i,body:await r.json(),status:s}}catch(a){throw Tf(_e(eI),s,i,a)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",i=D1(n);let s,o=0,a={};try{s=await fetch(e,{method:k1.POST,headers:i,body:r})}catch(c){throw Tf(_e(window.navigator.onLine?wV:Dv),void 0,void 0,c)}a=L1(s.headers);try{return o=s.status,{headers:a,body:await s.json(),status:o}}catch(c){throw Tf(_e(eI),o,a,c)}}}function D1(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,i])=>{e.append(r,i)}),e}catch(e){throw Tf(_e(NV),void 0,void 0,e)}}function L1(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw _e(OV)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const nJ=6e4,rI=1e4,rJ=3e4,KV=2e3;function iJ({auth:t,cache:e,system:n,telemetry:r},i){const s={clientId:ee.EMPTY_STRING,authority:`${ee.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:ee.EMPTY_STRING,authorityMetadata:ee.EMPTY_STRING,redirectUri:typeof window<"u"?Fo():"",postLogoutRedirectUri:ee.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ni.AAD,OIDCOptions:{serverResponseType:pw.FRAGMENT,defaultScopes:[ee.OPENID_SCOPE,ee.PROFILE_SCOPE,ee.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:QA.None,tenant:ee.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},o={cacheLocation:Pn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Pn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Pn.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Wt.Info,piiLoggingEnabled:!1},l={...{...Nj,loggerOptions:a,networkClient:i?new tJ:yY,navigationClient:new Uv,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||nJ,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||rI,navigateFrameWait:0,redirectNavigationTimeout:rJ,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||KV,pollIntervalMilliseconds:Kr.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},u={application:{appName:ee.EMPTY_STRING,appVersion:ee.EMPTY_STRING},client:new Pj};if((t==null?void 0:t.protocolMode)!==ni.OIDC&&(t!=null&&t.OIDCOptions)&&new Im(l.loggerOptions).warning(JSON.stringify(Ot(Ej))),t!=null&&t.protocolMode&&t.protocolMode===ni.OIDC&&(l!=null&&l.allowPlatformBroker))throw Ot(Cj);return{auth:{...s,...t,OIDCOptions:{...s.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...o,...e},system:l,telemetry:{...u,...r}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const sJ="@azure/msal-browser",jl="4.21.1";/*! @azure/msal-browser v4.21.1 2025-08-27 */const Fn="msal",F0="browser",qE="-",Sa=1,iI=1,oJ=`${Fn}.${F0}.log.level`,aJ=`${Fn}.${F0}.log.pii`,cJ=`${Fn}.${F0}.platform.auth.dom`,F1=`${Fn}.version`,U1="account.keys",j1="token.keys";function Ms(t=iI){return t<1?`${Fn}.${U1}`:`${Fn}.${t}.${U1}`}function pl(t,e=Sa){return e<1?`${Fn}.${j1}.${t}`:`${Fn}.${e}.${j1}.${t}`}/*! @azure/msal-browser v4.21.1 2025-08-27 */class U0{static loggerCallback(e,n){switch(e){case Wt.Error:console.error(n);return;case Wt.Info:console.info(n);return;case Wt.Verbose:console.debug(n);return;case Wt.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=iJ(e,this.browserEnvironment);let n;try{n=window[Pn.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(oJ),i=(c=n==null?void 0:n.getItem(aJ))==null?void 0:c.toLowerCase(),s=i==="true"?!0:i==="false"?!1:void 0,o={...this.config.system.loggerOptions},a=r&&Object.keys(Wt).includes(r)?Wt[r]:void 0;a&&(o.loggerCallback=U0.loggerCallback,o.logLevel=a),s!==void 0&&(o.piiLoggingEnabled=s),this.logger=new Im(o,sJ,jl),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Vl extends U0{getModuleName(){return Vl.MODULE_NAME}getId(){return Vl.ID}async initialize(){return this.available=typeof window<"u",this.available}}Vl.MODULE_NAME="";Vl.ID="StandardOperatingContext";/*! @azure/msal-browser v4.21.1 2025-08-27 */class lJ{constructor(){this.dbName=tI,this.version=NY,this.tableName=OY,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",i=>{const s=i;this.db=s.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(_e(b0)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(xu));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,i)=>{if(!this.db)return i(_e(xu));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),i(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(xu));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(_e(xu));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();s.addEventListener("success",o=>{const a=o;this.closeConnection(),e(a.target.result)}),s.addEventListener("error",o=>{this.closeConnection(),n(o)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(xu));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(tI),i=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(i),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(i),e(!0))),r.addEventListener("error",()=>(clearTimeout(i),n(!1)))})}}/*! @azure/msal-browser v4.21.1 2025-08-27 */let Aw=class{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.21.1 2025-08-27 */class uJ{constructor(e){this.inMemoryCache=new Aw,this.indexedDBCache=new lJ,this.logger=e}handleDatabaseAccessError(e){if(e instanceof bm&&e.errorCode===b0)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Xo{constructor(e,n,r){this.logger=e,VY(r??!1),this.cache=new uJ(this.logger),this.performanceClient=n}createNewGuid(){return vs()}base64Encode(e){return Fp(e)}base64Decode(e){return fs(e)}base64UrlEncode(e){return Hg(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var u;const n=(u=this.performanceClient)==null?void 0:u.startMeasurement(F.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await BY(Xo.EXTRACTABLE,Xo.POP_KEY_USAGES),i=await KE(r.publicKey),s={e:i.e,kty:i.kty,n:i.n},o=V1(s),a=await this.hashString(o),c=await KE(r.privateKey),l=await HY(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:l,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw ae(uj)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,i){var C;const s=(C=this.performanceClient)==null?void 0:C.startMeasurement(F.CryptoOptsSignJwt,i),o=await this.cache.getItem(n);if(!o)throw _e(I0);const a=await KE(o.publicKey),c=V1(a),l=Hg(JSON.stringify({kid:n})),u=T0.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:l}),d=Hg(u);e.cnf={jwk:JSON.parse(c)};const f=Hg(JSON.stringify(e)),m=`${d}.${f}`,y=new TextEncoder().encode(m),v=await zY(o.privateKey,y),E=_c(new Uint8Array(v)),T=`${m}.${E}`;return s&&s.end({success:!0}),T}async hashString(e){return $V(e)}}Xo.POP_KEY_USAGES=["sign","verify"];Xo.EXTRACTABLE=!0;function V1(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.21.1 2025-08-27 */const dJ=24*60*60*1e3,sI={Lax:"Lax",None:"None"};class qV{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let i=0;i<r.length;i++){const s=r[i],[o,...a]=decodeURIComponent(s).trim().split("="),c=a.join("=");if(o===n)return c}return""}getUserData(){throw ae(Xe)}setItem(e,n,r,i=!0,s=sI.Lax){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${s};`;if(r){const a=hJ(r);o+=`expires=${a};`}(i||s===sI.None)&&(o+="Secure;"),document.cookie=o}async setUserData(){return Promise.reject(ae(Xe))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const i=decodeURIComponent(r).trim().split("=");n.push(i[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function hJ(t){const e=new Date;return new Date(e.getTime()+t*dJ).toUTCString()}/*! @azure/msal-browser v4.21.1 2025-08-27 */function Hf(t,e){const n=t.getItem(Ms(e));return n?JSON.parse(n):[]}function zf(t,e,n){const r=e.getItem(pl(t,n));if(r){const i=JSON.parse(r);if(i&&i.hasOwnProperty("idToken")&&i.hasOwnProperty("accessToken")&&i.hasOwnProperty("refreshToken"))return i}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function oI(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.21.1 2025-08-27 */const $1="msal.cache.encryption",fJ="msal.broadcast.cache";class pJ{constructor(e,n,r){if(!window.localStorage)throw M0(Up);this.memoryStorage=new Aw,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(fJ)}async initialize(e){const n=new qV,r=n.getItem($1);let i={key:"",id:""};if(r)try{i=JSON.parse(r)}catch{}if(i.key&&i.id){const s=wi(lc,F.Base64Decode,this.logger,this.performanceClient,e)(i.key);this.encryptionCookie={id:i.id,key:await X(N1,F.GenerateHKDF,this.logger,this.performanceClient,e)(s)}}else{const s=vs(),o=await X(jV,F.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=wi(_c,F.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(o));this.encryptionCookie={id:s,key:await X(N1,F.GenerateHKDF,this.logger,this.performanceClient,e)(o)};const c={id:s,key:a};n.setItem($1,JSON.stringify(c),0,!0,sI.None)}await X(this.importExistingCache.bind(this),F.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw _e(Bf);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw _e(Bf);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=await X(O1,F.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!i)return null;try{return JSON.parse(i)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,i){if(!this.initialized||!this.encryptionCookie)throw _e(Bf);const{data:s,nonce:o}=await X(qY,F.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:o,data:s,lastUpdatedAt:i};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Hf(this).forEach(r=>this.removeItem(r));const n=zf(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Fn)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Hf(this);n=await this.importArray(n,e),n.length?this.setItem(Ms(),JSON.stringify(n)):this.removeItem(Ms());const r=zf(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(pl(this.clientId),JSON.stringify(r)):this.removeItem(pl(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let i;try{i=JSON.parse(r)}catch{return null}return oI(i)?i.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):X(O1,F.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,i.nonce,this.getContext(e),i.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),i)}async importArray(e,n){const r=[],i=[];return e.forEach(s=>{const o=this.getItemFromEncryptedCache(s,n).then(a=>{a?(this.memoryStorage.setItem(s,a),r.push(s)):this.removeItem(s)});i.push(o)}),await Promise.all(i),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(F.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:i,context:s}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(s&&s!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${s}`),n.end({success:!1,errorCode:"contextMismatch"});return}i?(this.memoryStorage.setItem(r,i),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.21.1 2025-08-27 */let mJ=class{constructor(){if(!window.sessionStorage)throw M0(Up)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.21.1 2025-08-27 */const Me={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.21.1 2025-08-27 */function B1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class aI extends JS{constructor(e,n,r,i,s,o,a){super(e,r,i,s,a),this.cacheConfig=n,this.logger=i,this.internalStorage=new Aw,this.browserStorage=H1(e,n.cacheLocation,i,s),this.temporaryCacheStorage=H1(e,n.temporaryCacheLocation,i,s),this.cookieStorage=new qV,this.eventHandler=o}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=Hf(this.browserStorage,0),r=zf(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const i=Hf(this.browserStorage,1),s=zf(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:i.length,currAccessCount:s.accessToken.length,currIdCount:s.idToken.length,currRefreshCount:s.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(iI,n,i,e),this.updateV0ToCurrent(Sa,r.idToken,s.idToken,e),this.updateV0ToCurrent(Sa,r.accessToken,s.accessToken,e),this.updateV0ToCurrent(Sa,r.refreshToken,s.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Ms(0),JSON.stringify(n)):this.browserStorage.removeItem(Ms(0)),i.length>0?this.browserStorage.setItem(Ms(1),JSON.stringify(i)):this.browserStorage.removeItem(Ms(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(s,e,1)}async updateV0ToCurrent(e,n,r,i){const s=[];for(const o of[...n]){const a=this.browserStorage.getItem(o),c=this.validateAndParseJson(a||"");if(!c){B1(n,o);continue}c.lastUpdatedAt||(c.lastUpdatedAt=Date.now().toString(),this.setItem(o,JSON.stringify(c),i));const l=oI(c)?await this.browserStorage.decryptData(o,c,i):c;let u;if(l&&(T1(l)||E1(l))&&(u=l.expiresOn),!l||JQ(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||u&&Nv(u,GU)){this.browserStorage.removeItem(o),B1(n,o),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i);continue}if(this.cacheConfig.cacheLocation!==Pn.LocalStorage||oI(c)){const d=`${Fn}.${e}${qE}${o}`,f=this.browserStorage.getItem(d);if(f){const m=this.validateAndParseJson(f);if(Number(c.lastUpdatedAt)>Number(m.lastUpdatedAt)){s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},i)}));continue}}else{s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{r.push(d),this.performanceClient.incrementFields({upgradedCacheCount:1},i)}));continue}}}return Promise.all(s)}trackVersionChanges(e){const n=this.browserStorage.getItem(F1);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==jl&&this.setItem(F1,jl,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let i=0,s=[];const o=20;for(let a=0;a<=o;a++)try{this.browserStorage.setItem(e,n),a>0&&(a<=i?this.removeAccessTokenKeys(s.slice(0,a),r,0):(this.removeAccessTokenKeys(s.slice(0,i),r,0),this.removeAccessTokenKeys(s.slice(i,a),r)));break}catch(c){const l=YS(c);if(l.errorCode===Av&&a<o){if(!s.length){const u=e===pl(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,d=e===pl(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;s=[...u,...d],i=u.length}if(s.length<=a)throw l;this.removeAccessToken(s[a],r,!1)}else throw l}}async setUserData(e,n,r,i){let s=0,o=[];const a=20;for(let c=0;c<=a;c++)try{await X(this.browserStorage.setUserData.bind(this.browserStorage),F.SetUserData,this.logger,this.performanceClient)(e,n,r,i),c>0&&(c<=s?this.removeAccessTokenKeys(o.slice(0,c),r,0):(this.removeAccessTokenKeys(o.slice(0,s),r,0),this.removeAccessTokenKeys(o.slice(s,c),r)));break}catch(l){const u=YS(l);if(u.errorCode===Av&&c<a){if(!o.length){const d=this.getTokenKeys(0).accessToken,f=this.getTokenKeys().accessToken;o=[...d,...f],s=d.length}if(o.length<=c)throw u;this.removeAccessToken(o[c],r,!1)}else throw u}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const i=this.validateAndParseJson(r);return!i||!gs.isAccountEntity(i)?null:JS.toObject(new gs,i)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===Pn.LocalStorage&&s&&this.eventHandler.emitEvent(Me.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Hf(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Ms(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),i=r.indexOf(e);if(i>-1){if(r.splice(i,1),r.length===0){this.removeItem(Ms());return}else this.setItem(Ms(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(i=>{i.includes(e.homeAccountId)&&i.includes(e.environment)&&this.browserStorage.removeItem(i)}),this.cacheConfig.cacheLocation===Pn.LocalStorage&&this.eventHandler.emitEvent(Me.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),i=r.idToken.indexOf(e);i>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(i,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=Sa){this.logger.trace("removeAccessTokenKey called");const i=this.getTokenKeys(r);let s=0;if(e.forEach(o=>{const a=i.accessToken.indexOf(o);a>-1&&(i.accessToken.splice(a,1),s++)}),s>0){this.logger.info(`removed ${s} accessToken keys from tokenKeys map`),this.setTokenKeys(i,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),i=r.refreshToken.indexOf(e);i>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(i,1),this.setTokenKeys(r,n))}getTokenKeys(e=Sa){return zf(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=Sa){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(pl(this.clientId,r));return}else this.setItem(pl(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!ZQ(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(r),this.setTokenKeys(s,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const i=this.validateAndParseJson(r);return!i||!T1(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys(),o=s.accessToken.indexOf(r);o!==-1&&s.accessToken.splice(o,1),this.logger.trace(`access token ${o===-1?"added to":"updated in"} map`),s.accessToken.push(r),this.setTokenKeys(s,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!E1(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(r),this.setTokenKeys(s,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!rY(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=nY(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!eY(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&iY(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(Bg.WRAPPER_SKU,e),this.internalStorage.setItem(Bg.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Bg.WRAPPER_SKU)||ee.EMPTY_STRING,n=this.internalStorage.getItem(Bg.WRAPPER_VER)||ee.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(c1.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const i=this.validateAndParseJson(r);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(c1.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:si().toString()};this.setItem(r,JSON.stringify(i),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Me.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!tY(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const s=this.cookieStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),s}const i=this.temporaryCacheStorage.getItem(r);if(!i){if(this.cacheConfig.cacheLocation===Pn.LocalStorage){const s=this.browserStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),s}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),i}setTemporaryCache(e,n,r){const i=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(i,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(i,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(Fn)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(Fn)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(F.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i,e);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(i,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return _i.startsWith(e,Fn)?e:`${Fn}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===Jn.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==It.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Fn}.${Sa}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(qE).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${Fn}.${iI}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(qE).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(wn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(wn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(wn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(wn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(wn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Fp(JSON.stringify(e));if(this.setTemporaryCache(wn.REQUEST_PARAMS,r,!0),n){const i=Fp(n);this.setTemporaryCache(wn.VERIFIER,i,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(wn.REQUEST_PARAMS,!0);if(!e)throw _e(vV);const n=this.getTemporaryCache(wn.VERIFIER,!0);let r,i="";try{r=JSON.parse(fs(e)),n&&(i=fs(n))}catch(s){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${s}`),_e(_V)}return[r,i]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(wn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const n=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${Fn}.${wn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),BV(window),null}}setInteractionInProgress(e,n=Ma.SIGNIN){var i;const r=`${Fn}.${wn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw _e(uV);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&((i=this.getInteractionInProgress())==null?void 0:i.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){var a,c,l;const r=_w((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let i;n.claims&&(i=await this.cryptoImpl.hashString(n.claims));const s=ww((l=e.account)==null?void 0:l.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?w1(e.expiresOn):0,e.extExpiresOn?w1(e.extExpiresOn):0,fs,void 0,e.tokenType,void 0,n.sshKid,n.claims,i),o={idToken:r,accessToken:s};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(i){if(i instanceof nd&&this.performanceClient&&n)try{const s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},n)}catch{}throw i}}}function H1(t,e,n,r){try{switch(e){case Pn.LocalStorage:return new pJ(t,n,r);case Pn.SessionStorage:return new mJ;case Pn.MemoryStorage:default:break}}catch(i){n.error(i)}return new Aw}const gJ=(t,e,n,r)=>{const i={cacheLocation:Pn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Pn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new aI(t,i,Sv,e,n,r)};/*! @azure/msal-browser v4.21.1 2025-08-27 */function yJ(t,e,n,r,i){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(i||{},r):[]}function vJ(t,e,n,r){const i=n.getAccountInfoFilteredBy(t,r);return i?(e.verbose("getAccount: Account matching provided filter found, returning"),i):(e.verbose("getAccount: No matching account found, returning null"),null)}function _J(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const i=n.getAccountInfoFilteredBy({username:t},r);return i?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),i):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function wJ(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const i=n.getAccountInfoFilteredBy({homeAccountId:t},r);return i?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),i):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function TJ(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const i=n.getAccountInfoFilteredBy({localAccountId:t},r);return i?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),i):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function EJ(t,e,n){e.setActiveAccount(t,n)}function CJ(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const SJ="msal.broadcast.event";class IJ{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Im({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(SJ)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const i=r||eJ();return this.eventCallbacks.has(i)?(this.logger.error(`Event callback with id: ${i} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(i,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${i}`),i)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,i){var o;const s={eventType:e,interactionType:n||null,payload:r||null,error:i||null,timestamp:Date.now()};switch(e){case Me.ACCOUNT_ADDED:case Me.ACCOUNT_REMOVED:case Me.ACTIVE_ACCOUNT_CHANGED:(o=this.broadcastChannel)==null||o.postMessage(s);break;default:this.invokeCallbacks(s);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],i)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${i}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class GV{constructor(e,n,r,i,s,o,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=s,this.navigationClient=o,this.platformAuthProvider=c,this.correlationId=l||vs(),this.logger=i.clone(Kr.MSAL_SKU,jl,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return _t.getAbsoluteUrl(n,Fo())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Dp(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const i={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||this.config.auth.authority,o=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&o?this.config.auth.authority.replace(_t.getDomainFromUrl(s),n.environment):s,c=hr.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await X(Qj,F.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,i,this.logger,this.correlationId,this.performanceClient);if(n&&!l.isAlias(n.environment))throw Ot(Sj);return l}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function j0(t,e,n,r){n.addQueueMeasurement(F.InitializeBaseRequest,t.correlationId);const i=t.authority||e.auth.authority,s=[...t&&t.scopes||[]],o={...t,correlationId:t.correlationId,authority:i,scopes:s};if(!o.authenticationScheme)o.authenticationScheme=It.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(o.authenticationScheme===It.SSH){if(!t.sshJwk)throw Ot(mw);if(!t.sshKid)throw Ot(Tj)}r.verbose(`Authentication Scheme set to "${o.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!_i.isEmptyObj(t.claims)&&(o.requestedClaimsHash=await $V(t.claims)),o}async function bJ(t,e,n,r,i){r.addQueueMeasurement(F.InitializeSilentRequest,t.correlationId);const s=await X(j0,F.InitializeBaseRequest,i,r,t.correlationId)(t,n,r,i);return{...t,...s,account:e,forceRefresh:t.forceRefresh||!1}}function QV(t,e){let n;const r=t.httpMethod;if(e===ni.EAR){if(n=r||fl.POST,n!==fl.POST)throw Ot(Ij)}else n=r||fl.GET;if(t.authorizePostBodyParameters&&n!==fl.POST)throw Ot(bj);return n}/*! @azure/msal-browser v4.21.1 2025-08-27 */class gh extends GV{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||vs(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=_t.getAbsoluteUrl(e.postLogoutRedirectUri,Fo())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=_t.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Fo())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=_t.getAbsoluteUrl(Fo(),Fo())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await X(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new eV(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}=e;this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:Kr.MSAL_SKU,version:jl,cpu:ee.EMPTY_STRING,os:ee.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),i={interactionType:n},s=ph.setRequestState(this.browserCrypto,e&&e.state||ee.EMPTY_STRING,i),a={...await X(j0,F.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:s,nonce:e.nonce||vs(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c={...a,httpMethod:QV(a,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return c;const l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function AJ(t,e){if(!e)return null;try{return ph.parseRequestState(t,e).libraryState.meta}catch{throw ae(Nd)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function Wf(t,e,n){const r=Iv(t);if(!r)throw kj(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),_e(aV)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),_e(oV));return r}function kJ(t,e,n){if(!t.state)throw _e(S0);const r=AJ(e,t.state);if(!r)throw _e(cV);if(r.interactionType!==n)throw _e(lV)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class YV{constructor(e,n,r,i,s){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=i,this.performanceClient=s}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(F.HandleCodeResponse,n.correlationId);let r;try{r=_Y(e,n.state)}catch(i){throw i instanceof au&&i.subError===Lp?_e(Lp):i}return X(this.handleCodeResponseFromServer.bind(this),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(F.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await X(this.authModule.updateAuthority.bind(this.authModule),F.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const s=this.createCcsCredentials(n);s&&(this.authCodeRequest.ccsCredential=s)}return await X(this.authModule.acquireToken.bind(this.authModule),F.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:cs.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:cs.UPN}:null}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const xJ="ContentError",JV="user_switch";/*! @azure/msal-browser v4.21.1 2025-08-27 */const RJ="USER_INTERACTION_REQUIRED",PJ="USER_CANCEL",NJ="NO_NETWORK",OJ="DISABLED",MJ="ACCOUNT_UNAVAILABLE",DJ="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.21.1 2025-08-27 */const LJ=-2147186943,FJ={[JV]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class $s extends xt{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,$s.prototype),this.name="NativeAuthError",this.ext=r}}function Ru(t){if(t.ext&&t.ext.status&&t.ext.status===OJ||t.ext&&t.ext.error&&t.ext.error===LJ)return!0;switch(t.errorCode){case xJ:return!0;default:return!1}}function jv(t,e,n){if(n&&n.status)switch(n.status){case MJ:return Mv(Jj);case RJ:return new ys(t,e);case PJ:return _e(Lp);case NJ:return _e(Dv);case DJ:return Mv(y0)}return new $s(t,FJ[t]||e,n)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class XV extends gh{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(kt.acquireTokenSilent_silentFlow),r=await X(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new gY(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const o=(await X(i.acquireCachedToken.bind(i),F.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),o}catch(s){throw s instanceof bm&&s.errorCode===I0&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n==null?void 0:n.account)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Sy extends GV{constructor(e,n,r,i,s,o,a,c,l,u,d,f){super(e,n,r,i,s,o,c,l,f),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=d,this.silentCacheClient=new XV(e,this.nativeStorageManager,r,i,s,o,c,l,f);const m=this.platformAuthProvider.getExtensionName();this.skus=Dp.makeExtraSkuString({libraryName:Kr.MSAL_SKU,libraryVersion:jl,extensionName:m,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[PQ]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(F.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(F.NativeInteractionClientAcquireToken,this.correlationId),i=si(),s=this.initializeServerTelemetryManager(this.apiId);try{const o=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,o);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(n===Cr.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const a=await this.platformAuthProvider.sendMessage(o);return await this.handleNativeResponse(a,o,i).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),s.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(o){throw o instanceof $s&&s.setNativeBrokerErrorCode(o.errorCode),r.end({success:!1}),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Rn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ae(qS);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw ae(qS);try{const i=this.createSilentCacheRequest(n,r),s=await this.silentCacheClient.acquireToken(i),o={...r,idTokenClaims:s==null?void 0:s.idTokenClaims,idToken:s==null?void 0:s.idToken};return{...s,account:o}}catch(i){throw i}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const i=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(i)}catch(a){if(a instanceof $s&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),Ru(a)))throw a}this.browserStorage.setTemporaryCache(wn.NATIVE_REQUEST,JSON.stringify(i),!0);const s={apiId:kt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(o,s)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:i,...s}=r;i&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(wn.NATIVE_REQUEST));const o=si();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const a=await this.platformAuthProvider.sendMessage(s),c=await this.handleNativeResponse(a,s,o);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),c}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var u,d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=fh(e.id_token,fs),s=this.createHomeAccountIdentifier(e,i),o=(u=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId))==null?void 0:u.homeAccountId;if((d=n.extraParameters)!=null&&d.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==o&&e.account.id!==n.accountId)throw jv(JV);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=v0(this.browserStorage,a,s,fs,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const l=await this.generateAuthenticationResult(e,n,i,c,a.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId),await this.cacheNativeTokens(e,n,s,i,e.access_token,l.tenantId,r),l}createHomeAccountIdentifier(e,n){return gs.generateHomeAccountId(e.client_info||ee.EMPTY_STRING,rs.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?Rn.fromString(n):Rn.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===It.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Od(this.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw ae(KA);return r.signPopToken(e.access_token,n.keyId,i)}else return e.access_token}async generateAuthenticationResult(e,n,r,i,s,o){const a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(n.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||ee.EMPTY_STRING,d=l.TenantId||r.tid||ee.EMPTY_STRING,f=t0(i.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const m=await this.generatePopAccessToken(e,n),w=n.tokenType===It.POP?It.POP:It.BEARER;return{authority:s,uniqueId:u,tenantId:d,scopes:c.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:m,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:id(o+e.expires_in),tokenType:w,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,i,s,o,a){const c=_w(r,n.authority,e.id_token||"",n.clientId,i.tid||""),l=n.tokenType===It.POP?ee.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,d=this.generateScopes(e.scope,n.scope),f=ww(r,n.authority,s,n.clientId,i.tid||o,d.printScopes(),u,0,fs,void 0,n.tokenType,void 0,n.keyId),m={idToken:c,accessToken:f};return this.nativeStorageManager.saveCacheRecord(m,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===It.POP?ee.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...i}=e,s=new Rn(r||[]);s.appendScopes(hh);const o={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(o.signPopToken&&e.popKid)throw _e(PV);if(this.handleExtraBrokerParams(o),o.extraParameters=o.extraParameters||{},o.extraParameters.telemetry=Di.MATS_TELEMETRY,e.authenticationScheme===It.POP){const a={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},c=new Od(this.browserCrypto);let l;if(o.keyId)l=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:o.keyId})),o.signPopToken=!1;else{const u=await X(c.generateCnf.bind(c),F.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(a,this.logger);l=u.reqCnfString,o.keyId=u.kid,o.signPopToken=!0}o.reqCnf=l}return this.addRequestSKUs(o),o}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new _t(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case kt.ssoSilent:case kt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),kr.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case kr.NONE:case kr.CONSENT:case kr.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),_e(xV)}}handleExtraBrokerParams(e){var s;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(xv)&&e.extraParameters.hasOwnProperty(Rv)&&e.extraParameters.hasOwnProperty(Fl);if(!e.embeddedClientId&&!n)return;let r="";const i=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Rv],r=e.extraParameters[Fl]),e.extraParameters={child_client_id:r,child_redirect_uri:i},(s=this.performanceClient)==null||s.addFields({embeddedClientId:r,embeddedRedirectUri:i},this.correlationId)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function V0(t,e,n,r,i){const s=vY({...t.auth,authority:e},n,r,i);if(u0(s,{sku:Kr.MSAL_SKU,version:jl,os:"",cpu:""}),t.auth.protocolMode!==ni.OIDC&&d0(s,t.telemetry.application),n.platformBroker&&(DQ(s),i.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===It.POP)){const o=new Xo(r,i),a=new Od(o);let c;n.popKid?c=o.encodeKid(n.popKid):c=(await X(a.generateCnf.bind(a),F.PopTokenGenerateCnf,r,i,n.correlationId)(n,r)).reqCnfString,f0(s,c)}return gw(s,n.correlationId,i),s}async function $0(t,e,n,r,i){if(!n.codeChallenge)throw Ot(JA);const s=await X(V0,F.GetStandardParams,r,i,n.correlationId)(t,e,n,r,i);return i0(s,jA.CODE),Uj(s,n.codeChallenge,ee.S256_CODE_CHALLENGE_METHOD),cc(s,n.extraQueryParameters||{}),_0(e,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function B0(t,e,n,r,i,s){if(!r.earJwk)throw _e(C0);const o=await V0(e,n,r,i,s);i0(o,jA.IDTOKEN_TOKEN_REFRESHTOKEN),KQ(o,r.earJwk);const a=new Map;cc(a,r.extraQueryParameters||{});const c=_0(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return ZV(t,c,o)}async function H0(t,e,n,r,i,s){const o=await V0(e,n,r,i,s);i0(o,jA.CODE),Uj(o,r.codeChallenge,r.codeChallengeMethod||ee.S256_CODE_CHALLENGE_METHOD),qQ(o,r.authorizePostBodyParameters||{});const a=new Map;cc(a,r.extraQueryParameters||{});const c=_0(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return ZV(t,c,o)}function ZV(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((i,s)=>{const o=t.createElement("input");o.hidden=!0,o.name=s,o.value=i,r.appendChild(o)}),t.body.appendChild(r),r}async function e4(t,e,n,r,i,s,o,a,c,l){if(a.verbose("Account id found, calling WAM for token"),!l)throw _e(A0);const u=new Xo(a,c),d=new Sy(r,i,u,a,o,r.system.navigationClient,n,c,l,e,s,t.correlationId),{userRequestState:f}=ph.parseRequestState(u,t.state);return X(d.acquireToken.bind(d),F.NativeInteractionClientAcquireToken,a,c,t.correlationId)({...t,state:f,prompt:void 0})}async function Vv(t,e,n,r,i,s,o,a,c,l,u,d){if(Vs.removeThrottle(o,i.auth.clientId,t),e.accountId)return X(e4,F.HandleResponsePlatformBroker,l,u,t.correlationId)(t,e.accountId,r,i,o,a,c,l,u,d);const f={...t,code:e.code||"",codeVerifier:n},m=new YV(s,o,f,l,u);return await X(m.handleCodeResponse.bind(m),F.HandleCodeResponse,l,u,t.correlationId)(e,t)}async function z0(t,e,n,r,i,s,o,a,c,l,u){if(Vs.removeThrottle(s,r.auth.clientId,t),tV(e,t.state),!e.ear_jwe)throw _e(sV);if(!t.earJwk)throw _e(C0);const d=JSON.parse(await X(KY,F.DecryptEarResponse,c,l,t.correlationId)(t.earJwk,e.ear_jwe));if(d.accountId)return X(e4,F.HandleResponsePlatformBroker,c,l,t.correlationId)(t,d.accountId,n,r,s,o,a,c,l,u);const f=new Ul(r.auth.clientId,s,new Xo(c,l),c,null,null,l);f.validateTokenResponse(d);const m={code:"",state:t.state,nonce:t.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await X(f.handleServerTokenResponse.bind(f),F.HandleServerTokenResponse,c,l,t.correlationId)(d,i,si(),t,m,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const UJ=32;async function kw(t,e,n){t.addQueueMeasurement(F.GeneratePkceCodes,n);const r=wi(jJ,F.GenerateCodeVerifier,e,t,n)(t,e,n),i=await X(VJ,F.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:i}}function jJ(t,e,n){try{const r=new Uint8Array(UJ);return wi($Y,F.GetRandomValues,e,t,n)(r),_c(r)}catch{throw _e(E0)}}async function VJ(t,e,n,r){e.addQueueMeasurement(F.GenerateCodeChallengeFromVerifier,r);try{const i=await X(UV,F.Sha256Digest,n,e,r)(t,e,r);return _c(new Uint8Array(i))}catch{throw _e(E0)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class $v{constructor(e,n,r,i){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=i,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(F.NativeMessageHandlerHandshake),this.platformAuthType=Di.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:rf.GetToken,request:e},r={channel:Di.CHANNEL_ID,extensionId:this.extensionId,responseId:vs(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const i=await new Promise((o,a)=>{this.resolvers.set(r.responseId,{resolve:o,reject:a})});return this.validatePlatformBrokerResponse(i)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const i=new $v(e,n,r,Di.PREFERRED_EXTENSION_ID);return await i.sendHandshakeRequest(),i}catch{const s=new $v(e,n,r);return await s.sendHandshakeRequest(),s}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Di.CHANNEL_ID,extensionId:this.extensionId,responseId:vs(),body:{method:rf.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(_e(AV)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==Di.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===rf.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(_e(kV))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),i=this.handshakeResolvers.get(n.responseId);try{const s=n.body.method;if(s===rf.Response){if(!r)return;const o=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(o)}`),o.status!=="Success")r.reject(jv(o.code,o.description,o.ext));else if(o.result)o.result.code&&o.result.description?r.reject(jv(o.result.code,o.result.description,o.result.ext)):r.resolve(o.result);else throw zS(Cv,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(s===rf.HandshakeResponse){if(!i){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),i.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(s){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${s}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(s):i&&i.reject(s)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw zS(Cv,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===Di.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class W0{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=Di.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){var i;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(i=window.navigator)!=null&&i.platformAuthentication){const s=await window.navigator.platformAuthentication.getSupportedContracts(Di.MICROSOFT_ENTRA_BROKERID);if(s!=null&&s.includes(Di.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new W0(e,n,r)}}getExtensionId(){return Di.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Di.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:i,scope:s,redirectUri:o,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:d,...f}=e,m=this.getDOMExtraParams(f);return{accountId:n,brokerId:this.getExtensionId(),authority:i,clientId:r,correlationId:a||this.correlationId,extraParameters:{...d,...m},isSecurityTokenService:!1,redirectUri:o,scope:s,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),jv(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw zS(Cv,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((i,[s,o])=>(i[s]=String(o),i),{})}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function $J(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const i=BJ();t.trace("Has client allowed platform auth via DOM API: "+i);let s;try{i&&(s=await W0.createProvider(t,e,n)),s||(t.trace("Platform auth via DOM API not available, checking for extension"),s=await $v.createProvider(t,r||KV,e))}catch(o){t.trace("Platform auth not available",o)}return s}function BJ(){let t;try{return t=window[Pn.SessionStorage],(t==null?void 0:t.getItem(cJ))==="true"}catch{return!1}}function jp(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case It.BEARER:case It.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.21.1 2025-08-27 */class HJ extends gh{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=s}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||hh,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const s={...e,httpMethod:QV(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(s,r,n)}}catch(i){return Promise.reject(i)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},i=e&&e.authority,s=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,i,s)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,i,s))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const i=await X(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Le.Popup);n.popup&&WV(i.authority);const s=jp(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return i.platformBroker=s,this.config.auth.protocolMode===ni.EAR?this.executeEarFlow(i,n):this.executeCodeFlow(i,n,r)}async executeCodeFlow(e,n,r){var c;const i=e.correlationId,s=this.initializeServerTelemetryManager(kt.acquireTokenPopup),o=r||await X(kw,F.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),a={...e,codeChallenge:o.challenge};try{const l=await X(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i)({serverTelemetryManager:s,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===fl.POST)return await this.executeCodeFlowWithPost(a,n,l,o.verifier);{const u=await X($0,F.GetAuthCodeUrl,this.logger,this.performanceClient,i)(this.config,l.authority,a,this.logger,this.performanceClient),d=this.initiateAuthRequest(u,n);this.eventHandler.emitEvent(Me.POPUP_OPENED,Le.Popup,{popupWindow:d},null);const f=await this.monitorPopupForHash(d,n.popupWindowParent),m=wi(Wf,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await X(Vv,F.HandleResponseCode,this.logger,this.performanceClient,i)(e,m,o.verifier,kt.acquireTokenPopup,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(l){throw(c=n.popup)==null||c.close(),l instanceof xt&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),l}}async executeEarFlow(e,n){const r=e.correlationId,i=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await X(N0,F.GenerateEarKey,this.logger,this.performanceClient,r)(),o={...e,earJwk:s},a=n.popup||this.openPopup("about:blank",n);(await B0(a.document,this.config,i,o,this.logger,this.performanceClient)).submit();const l=await X(this.monitorPopupForHash.bind(this),F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,n.popupWindowParent),u=wi(Wf,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return X(z0,F.HandleResponseEar,this.logger,this.performanceClient,r)(o,u,kt.acquireTokenPopup,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,i){const s=e.correlationId,o=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,s)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=n.popup||this.openPopup("about:blank",n);(await H0(a.document,this.config,o,e,this.logger,this.performanceClient)).submit();const l=await X(this.monitorPopupForHash.bind(this),F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(a,n.popupWindowParent),u=wi(Wf,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return X(Vv,F.HandleResponseCode,this.logger,this.performanceClient,s)(e,u,i,kt.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,i){var o,a,c;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Me.LOGOUT_START,Le.Popup,e);const s=this.initializeServerTelemetryManager(kt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const l=await X(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0});try{l.authority.endSessionEndpoint}catch{if((o=e.account)!=null&&o.homeAccountId&&e.postLogoutRedirectUri&&l.authority.protocolMode===ni.OIDC){if(this.eventHandler.emitEvent(Me.LOGOUT_SUCCESS,Le.Popup,e),i){const f={apiId:kt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=_t.getAbsoluteUrl(i,Fo());await this.navigationClient.navigateInternal(m,f)}(a=n.popup)==null||a.close();return}}const u=l.getLogoutUri(e);this.eventHandler.emitEvent(Me.LOGOUT_SUCCESS,Le.Popup,e);const d=this.openPopup(u,n);if(this.eventHandler.emitEvent(Me.POPUP_OPENED,Le.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,n.popupWindowParent).catch(()=>{}),i){const f={apiId:kt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=_t.getAbsoluteUrl(i,Fo());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${m}`),await this.navigationClient.navigateInternal(m,f)}else this.logger.verbose("No main window navigation requested")}catch(l){throw(c=n.popup)==null||c.close(),l instanceof xt&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),this.eventHandler.emitEvent(Me.LOGOUT_FAILURE,Le.Popup,null,l),this.eventHandler.emitEvent(Me.LOGOUT_END,Le.Popup),l}this.eventHandler.emitEvent(Me.LOGOUT_END,Le.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),_e(Sw)}monitorPopupForHash(e,n){return new Promise((r,i)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const s=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(s),i(_e(Lp));return}let o="";try{o=e.location.href}catch{}if(!o||o==="about:blank")return;clearInterval(s);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===pw.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw _e(hV);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),_e(dV)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:i}){var m,w,y,v;const s=i.screenLeft?i.screenLeft:i.screenX,o=i.screenTop?i.screenTop:i.screenY,a=i.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=i.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=(m=r.popupSize)==null?void 0:m.width,u=(w=r.popupSize)==null?void 0:w.height,d=(y=r.popupPosition)==null?void 0:y.top,f=(v=r.popupPosition)==null?void 0:v.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Kr.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Kr.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Kr.POPUP_HEIGHT/2+o)),(!f||f<0||f>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,a/2-Kr.POPUP_WIDTH/2+s)),i.open(e,n,`width=${l}, height=${u}, top=${d}, left=${f}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${Kr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${Kr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function zJ(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class WJ extends gh{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.nativeStorage=c}async acquireToken(e){const n=await X(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Le.Redirect);n.platformBroker=jp(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=s=>{s.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Me.RESTORE_FROM_BFCACHE,Le.Redirect))},i=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${i}`),this.browserStorage.setTemporaryCache(wn.ORIGIN_URI,i,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ni.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(s){throw s instanceof xt&&s.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),s}}async executeCodeFlow(e,n){const r=e.correlationId,i=this.initializeServerTelemetryManager(kt.acquireTokenRedirect),s=await X(kw,F.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),o={...e,codeChallenge:s.challenge};this.browserStorage.cacheAuthorizeRequest(o,s.verifier);try{if(o.httpMethod===fl.POST)return await this.executeCodeFlowWithPost(o);{const a=await X(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=await X($0,F.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,o,this.logger,this.performanceClient);return await this.initiateAuthRequest(c,n)}}catch(a){throw a instanceof xt&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}}async executeEarFlow(e){const n=e.correlationId,r=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await X(N0,F.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i};return this.browserStorage.cacheAuthorizeRequest(s),(await B0(document,this.config,r,s,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(_e(Lv,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await H0(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((s,o)=>{setTimeout(()=>{o(_e(Lv,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,i){const s=this.initializeServerTelemetryManager(kt.handleRedirectPromise);try{const[o,a]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),zJ()!=="back_forward"?i.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(wn.ORIGIN_URI,!0)||ee.EMPTY_STRING,l=p1(c),u=p1(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&GY(c),await this.handleResponse(o,n,r,s);if(this.config.auth.navigateToLoginRequestUrl){if(!D0()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(wn.URL_HASH,a,!0);const d={apiId:kt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let f=!0;if(!c||c==="null"){const m=YY();this.browserStorage.setTemporaryCache(wn.ORIGIN_URI,m,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),f=await this.navigationClient.navigateInternal(m,d)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),f=await this.navigationClient.navigateInternal(c,d);if(!f)return await this.handleResponse(o,n,r,s)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,n,r,s);return null}catch(o){throw o instanceof xt&&(o.setCorrelationId(this.correlationId),s.cacheFailedRequest(o)),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===pw.QUERY?n=window.location.search:n=window.location.hash);let r=Iv(n);if(r){try{kJ(r,this.browserCrypto,Le.Redirect)}catch(s){return s instanceof xt&&this.logger.error(`Interaction type validation failed due to ${s.errorCode}: ${s.errorMessage}`),[null,""]}return BV(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const i=this.browserStorage.getTemporaryCache(wn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(wn.URL_HASH)),i&&(r=Iv(i),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,i]):[null,""]}async handleResponse(e,n,r,i){if(!e.state)throw _e(S0);if(e.ear_jwe){const a=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return X(z0,F.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,kt.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await X(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:n.authority});return X(Vv,F.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,kt.acquireTokenRedirect,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:kt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=n||this.config.auth.onRedirectNavigate;if(typeof i=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),i(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),_e(Sw)}async logout(e){var i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(kt.logout);try{this.eventHandler.emitEvent(Me.LOGOUT_START,Le.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const s={apiId:kt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await X(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===ni.OIDC)try{o.authority.endSessionEndpoint}catch{if((i=n.account)!=null&&i.homeAccountId){this.eventHandler.emitEvent(Me.LOGOUT_SUCCESS,Le.Redirect,n);return}}const a=o.getLogoutUri(n);if(this.eventHandler.emitEvent(Me.LOGOUT_SUCCESS,Le.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(a)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}}catch(s){throw s instanceof xt&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(Me.LOGOUT_FAILURE,Le.Redirect,null,s),this.eventHandler.emitEvent(Me.LOGOUT_END,Le.Redirect),s}this.eventHandler.emitEvent(Me.LOGOUT_END,Le.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return _t.getAbsoluteUrl(n,Fo())}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function KJ(t,e,n,r,i){if(e.addQueueMeasurement(F.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),_e(Sw);return i?X(QJ,F.SilentHandlerLoadFrame,n,e,r)(t,i,e,r):wi(YJ,F.SilentHandlerLoadFrameSync,n,e,r)(t)}async function qJ(t,e,n,r,i){const s=xw();if(!s.contentDocument)throw"No document associated with iframe!";return(await H0(s.contentDocument,t,e,n,r,i)).submit(),s}async function GJ(t,e,n,r,i){const s=xw();if(!s.contentDocument)throw"No document associated with iframe!";return(await B0(s.contentDocument,t,e,n,r,i)).submit(),s}async function z1(t,e,n,r,i,s,o){return r.addQueueMeasurement(F.SilentHandlerMonitorIframeForHash,s),new Promise((a,c)=>{e<rI&&i.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${rI}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(_e(fV))},e),u=window.setInterval(()=>{let d="";const f=t.contentWindow;try{d=f?f.location.href:""}catch{}if(!d||d==="about:blank")return;let m="";f&&(o===pw.QUERY?m=f.location.search:m=f.location.hash),window.clearTimeout(l),window.clearInterval(u),a(m)},n)}).finally(()=>{wi(JJ,F.RemoveHiddenIframe,i,r,s)(t)})}function QJ(t,e,n,r){return n.addQueueMeasurement(F.SilentHandlerLoadFrame,r),new Promise((i,s)=>{const o=xw();window.setTimeout(()=>{if(!o){s("Unable to load iframe");return}o.src=t,i(o)},e)})}function YJ(t){const e=xw();return e.src=t,e}function xw(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function JJ(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class XJ extends gh{constructor(e,n,r,i,s,o,a,c,l,u,d){super(e,n,r,i,s,o,c,u,d),this.apiId=a,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==kr.NONE&&n.prompt!==kr.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${kr.NONE}`),n.prompt=kr.NONE):n.prompt=kr.NONE;const r=await X(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Le.Silent);return r.platformBroker=jp(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),WV(r.authority),this.config.auth.protocolMode===ni.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await X(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await X(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(i){if(i instanceof xt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),!n||!(i instanceof xt)||i.errorCode!==Kr.INVALID_GRANT_ERROR)throw i;return this.performanceClient.addFields({retryError:i.errorCode},this.correlationId),await X(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await X(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await X(N0,F.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i},o=await X(GJ,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,s,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=await X(z1,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,a),l=wi(Wf,F.DeserializeResponse,this.logger,this.performanceClient,n)(c,a,this.logger);return X(z0,F.HandleResponseEar,this.logger,this.performanceClient,n)(s,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(_e(Iw))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(F.SilentIframeClientTokenHelper,r);const i=await X(kw,F.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s={...n,codeChallenge:i.challenge};let o;if(n.httpMethod===fl.POST)o=await X(qJ,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);else{const u=await X($0,F.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);o=await X(KJ,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const a=this.config.auth.OIDCOptions.serverResponseType,c=await X(z1,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=wi(Wf,F.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return X(Vv,F.HandleResponseCode,this.logger,this.performanceClient,r)(n,l,i.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class ZJ extends gh{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentRefreshClientAcquireToken,e.correlationId);const n=await X(j0,F.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const i=this.initializeServerTelemetryManager(kt.acquireTokenSilent_silentFlow),s=await this.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return X(s.acquireTokenByRefreshToken.bind(s),F.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(o=>{throw o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o),o})}logout(){return Promise.reject(_e(Iw))}async createRefreshTokenClient(e){const n=await X(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new mY(n,this.performanceClient)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class eX{constructor(e,n,r,i){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=i}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw _e(bw);const i=e.correlationId||vs(),s=n.id_token?fh(n.id_token,fs):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new hr(hr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||vs()):void 0,c=await this.loadAccount(e,r.clientInfo||n.client_info||"",i,s,a),l=await this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,i),u=await this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,i),d=await this.loadRefreshToken(n,c.homeAccountId,c.environment,i);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},s,a)}async loadAccount(e,n,r,i,s){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=gs.createFromAccountInfo(e.account);return await this.storage.setAccount(l,r),l}else if(!s||!n&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),_e(EV);const o=gs.generateHomeAccountId(n,s.authorityType,this.logger,this.cryptoObj,i),a=i==null?void 0:i.tid,c=v0(this.storage,s,o,fs,r,i,n,s.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r),c}async loadIdToken(e,n,r,i,s){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=_w(n,r,e.id_token,this.config.auth.clientId,i);return await this.storage.setIdTokenCredential(o,s),o}async loadAccessToken(e,n,r,i,s,o,a){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?Rn.fromString(n.scope):new Rn(e.scopes),l=o.expiresOn||n.expires_in+si(),u=o.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+si(),d=ww(r,i,n.access_token,this.config.auth.clientId,s,c.printScopes(),l,u,fs);return await this.storage.setAccessTokenCredential(d,a),d}async loadRefreshToken(e,n,r,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const s=qj(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(s,i),s}generateAuthenticationResult(e,n,r,i){var u,d,f;let s="",o=[],a=null,c;n!=null&&n.accessToken&&(s=n.accessToken.secret,o=Rn.fromString(n.accessToken.target).asArray(),a=id(n.accessToken.expiresOn),c=id(n.accessToken.extendedExpiresOn));const l=n.account;return{authority:i?i.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:o,account:l.getAccountInfo(),idToken:((u=n.idToken)==null?void 0:u.secret)||"",idTokenClaims:r||{},accessToken:s,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((d=n.refreshToken)==null?void 0:d.familyId)||"",tokenType:((f=n==null?void 0:n.accessToken)==null?void 0:f.tokenType)||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class tX extends eV{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class nX extends gh{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,c,l,u),this.apiId=a}async acquireToken(e){if(!e.code)throw _e(CV);const n=await X(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Le.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const i={...n,code:e.code},s=await X(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),o=new tX(s);this.logger.verbose("Auth code client created");const a=new YV(o,this.browserStorage,i,this.logger,this.performanceClient);return await X(a.handleCodeResponseFromServer.bind(a),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(i){throw i instanceof xt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}}logout(){return Promise.reject(_e(Iw))}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function rX(t,e,n){var o;const r=((o=window.msal)==null?void 0:o.clientIds)||[],i=r.length,s=r.filter(a=>a===t).length;s>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:i,sameClientIdInstanceCount:s})}/*! @azure/msal-browser v4.21.1 2025-08-27 */function xs(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function zg(t,e){try{L0(t)}catch(n){throw e.end({success:!1},n),n}}class Rw{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Xo(this.logger,this.performanceClient):Sv,this.eventHandler=new IJ(this.logger),this.browserStorage=this.isBrowserEnvironment?new aI(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,oY(this.config.auth)):gJ(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:Pn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Pn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new aI(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new eX(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new Rw(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Me.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),i=this.config.system.allowPlatformBroker,s=this.performanceClient.startMeasurement(F.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Me.INITIALIZE_START),!n)try{this.logMultipleInstances(s)}catch{}if(await X(this.browserStorage.initialize.bind(this.browserStorage),F.InitializeCache,this.logger,this.performanceClient,r)(r),i)try{this.platformAuthProvider=await $J(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),wi(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),F.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Me.INITIALIZE_END),s.end({allowPlatformBroker:i,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),zV(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var c;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((c=this.browserStorage.getInteractionInProgress())==null?void 0:c.type)===Ma.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),s=i&&this.platformAuthProvider&&!e;let o;this.eventHandler.emitEvent(Me.HANDLE_REDIRECT_START,Le.Redirect);let a;try{if(s&&this.platformAuthProvider){o=this.performanceClient.startMeasurement(F.AcquireTokenRedirect,(i==null?void 0:i.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),o.add({isPlatformBrokerRequest:!0});const l=new Sy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,i.accountId,this.nativeInternalStorage,i.correlationId);a=X(l.handleRedirectPromise.bind(l),F.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(this.performanceClient,o.event.correlationId)}else{const[l,u]=this.browserStorage.getCachedRequest(),d=l.correlationId;o=this.performanceClient.startMeasurement(F.AcquireTokenRedirect,d),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const f=this.createRedirectClient(d);a=X(f.handleRedirectPromise.bind(f),F.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(e,l,u,o)}}catch(l){throw this.browserStorage.resetRequestCache(),l}return a.then(l=>(l?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Me.LOGIN_SUCCESS,Le.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_SUCCESS,Le.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),o.end({success:!0,accountType:xs(l.account)})):o.event.errorCode?o.end({success:!1}):o.discard(),this.eventHandler.emitEvent(Me.HANDLE_REDIRECT_END,Le.Redirect),l)).catch(l=>{this.browserStorage.resetRequestCache();const u=l;throw r.length>0?this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_FAILURE,Le.Redirect,null,u):this.eventHandler.emitEvent(Me.LOGIN_FAILURE,Le.Redirect,null,u),this.eventHandler.emitEvent(Me.HANDLE_REDIRECT_END,Le.Redirect),o.end({success:!1},u),l})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(F.AcquireTokenPreRedirect,n);r.add({accountType:xs(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=o=>{const a=typeof i=="function"?i(o):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0})||r.event,a};else{const o=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof o=="function"?o(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0})||r.event,c}}const s=this.getAllAccounts().length>0;try{M1(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNIN),s?this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_START,Le.Redirect,e):this.eventHandler.emitEvent(Me.LOGIN_START,Le.Redirect,e);let o;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?o=new Sy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof $s&&Ru(c))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof ys)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw c}):o=this.createRedirectClient(n).acquireToken(e),await o}catch(o){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(F.AcquireTokenRedirect,n).end({success:!1},o):r.end({success:!1},o),s?this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_FAILURE,Le.Redirect,null,o):this.eventHandler.emitEvent(Me.LOGIN_FAILURE,Le.Redirect,null,o),o}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(F.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:xs(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),zg(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNIN)}catch(a){return Promise.reject(a)}const i=this.getAllAccounts();i.length>0?this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_START,Le.Popup,e):this.eventHandler.emitEvent(Me.LOGIN_START,Le.Popup,e);let s;const o=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative({...e,correlationId:n},kt.acquireTokenPopup).then(a=>(r.end({success:!0,accountType:xs(a.account)}),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof $s&&Ru(a))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,o);if(a instanceof ys)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,o);throw a})):s=this.createPopupClient(n).acquireToken(e,o),s.then(a=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Me.LOGIN_SUCCESS,Le.Popup,a):this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_SUCCESS,Le.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:xs(a.account)}),a)).catch(a=>(i.length>0?this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_FAILURE,Le.Popup,null,a):this.eventHandler.emitEvent(Me.LOGIN_FAILURE,Le.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var s,o,a;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(F.SsoSilent,n),(s=this.ssoSilentMeasurement)==null||s.add({scenarioId:e.scenarioId,accountType:xs(e.account)}),zg(this.initialized,this.ssoSilentMeasurement),(o=this.ssoSilentMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Me.SSO_SILENT_START,Le.Silent,r);let i;return this.canUsePlatformBroker(r)?((a=this.ssoSilentMeasurement)==null||a.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(r,kt.ssoSilent).catch(c=>{var l;if((l=this.ssoSilentMeasurement)==null||l.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof $s&&Ru(c))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c})):i=this.createSilentIframeClient(r.correlationId).acquireToken(r),i.then(c=>{var l;return this.eventHandler.emitEvent(Me.SSO_SILENT_SUCCESS,Le.Silent,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length,accountType:xs(c.account)}),c}).catch(c=>{var l;throw this.eventHandler.emitEvent(Me.SSO_SILENT_FAILURE,Le.Silent,null,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!1},c),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(F.AcquireTokenByCode,n);zg(this.initialized,r),this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_BY_CODE_START,Le.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw _e(IV);if(e.code){const i=e.code;let s=this.hybridAuthCodeResponses.get(i);return s?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),s=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(o=>(this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Le.Silent,o),this.hybridAuthCodeResponses.delete(i),r.end({success:!0,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,accountType:xs(o.account)}),o)).catch(o=>{throw this.hybridAuthCodeResponses.delete(i),this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_BY_CODE_FAILURE,Le.Silent,null,o),r.end({success:!1},o),o}),this.hybridAuthCodeResponses.set(i,s)),await s}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const i=await this.acquireTokenNative({...e,correlationId:n},kt.acquireTokenByCode,e.nativeAccountId).catch(s=>{throw s instanceof $s&&Ru(s)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s});return r.end({accountType:xs(i.account),success:!0}),i}else throw _e(bV);else throw _e(SV)}catch(i){throw this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_BY_CODE_FAILURE,Le.Silent,null,i),r.end({success:!1},i),i}}async acquireTokenByCodeAsync(e){var i;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(F.AcquireTokenByCodeAsync,e.correlationId),(i=this.acquireTokenByCodeAsyncMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(s=>{var o;return(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!0,fromCache:s.fromCache}),s}).catch(s=>{var o;throw(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenFromCache,e.correlationId),n){case Cr.Default:case Cr.AccessToken:case Cr.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return X(r.acquireToken.bind(r),F.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ae(ac)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenByRefreshToken,e.correlationId),n){case Cr.Default:case Cr.AccessTokenAndRefreshToken:case Cr.RefreshToken:case Cr.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return X(r.acquireToken.bind(r),F.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ae(ac)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(F.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return X(n.acquireToken.bind(n),F.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return M1(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return L0(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ma.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return yJ(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return vJ(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return _J(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return wJ(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return TJ(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();EJ(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return CJ(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=gs.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,i){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw _e(A0);return new Sy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,i)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!jp(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case kr.NONE:case kr.CONSENT:case kr.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new HJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new WJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new XJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new XV(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new ZJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new nX(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,kt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return HV(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Pn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Pn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?vs():ee.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||x1})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||x1})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(F.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),zg(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const i=e.account||this.getActiveAccount();if(!i)throw _e(yV);return r.add({accountType:xs(i)}),this.acquireTokenSilentDeduped(e,i,n).then(s=>(r.end({success:!0,fromCache:s.fromCache,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),{...s,state:e.state,correlationId:n})).catch(s=>{throw s instanceof xt&&s.setCorrelationId(n),r.end({success:!1},s),s})}async acquireTokenSilentDeduped(e,n,r){const i=Tw(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:r},n.homeAccountId),s=JSON.stringify(i),o=this.activeSilentTokenRequests.get(s);if(typeof o>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const a=X(this.acquireTokenSilentAsync.bind(this),F.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(s,a),a.finally(()=>{this.activeSilentTokenRequests.delete(s)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),o}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(F.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_START,Le.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const i=await X(bJ,F.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),s=e.cacheLookupPolicy||Cr.Default;return this.acquireTokenSilentNoIframe(i,s).catch(async a=>{if(iX(a,s))if(this.activeIframeRequest)if(s!==Cr.Skip){const[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,i.correlationId);const d=this.performanceClient.startMeasurement(F.AwaitConcurrentIframe,i.correlationId);d.add({awaitIframeCorrelationId:u});const f=await l;if(d.end({success:f}),f)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,i.correlationId),this.acquireTokenSilentNoIframe(i,s);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),X(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),i.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),X(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_SUCCESS,Le.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_FAILURE,Le.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return jp(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,kt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof $s&&Ru(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ae(ac)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===Cr.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),X(this.acquireTokenFromCache.bind(this),F.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Cr.AccessToken)throw r;return this.eventHandler.emitEvent(Me.ACQUIRE_TOKEN_NETWORK_START,Le.Silent,e),X(this.acquireTokenByRefreshToken.bind(this),F.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await X(kw,F.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),rX(n,e,this.logger)}}function iX(t,e){const n=!(t instanceof ys&&t.subError!==Cw),r=t.errorCode===Kr.INVALID_GRANT_ERROR||t.errorCode===ac,i=n&&r||t.errorCode===Ov||t.errorCode===g0,s=MY.includes(e);return i&&s}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function sX(t,e){const n=new Vl(t);return await n.initialize(),Rw.createController(n,e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class K0{static async createPublicClientApplication(e){const n=await sX(e);return new K0(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new Rw(new Vl(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const oX={auth:{clientId:"34cf9dc4-f837-4136-98c1-f66e913b4f95",authority:"https://login.microsoftonline.com/common",redirectUri:"https://zp1v56uxy8rdx5ypatb0ockcb9tr6a-oci3--8080--96435430.local-credentialless.webcontainer-api.io"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},Pu=new K0(oX),GE={scopes:["User.Read","Notes.Read"]},aX=()=>{Pu.initialize()},AIe=async()=>{try{const t=Pu.getAllAccounts()[0];if(t){const n={...GE,account:t};return(await Pu.acquireTokenSilent(n)).accessToken}const e=await Pu.loginPopup(GE);return Pu.setActiveAccount(e.account),e.accessToken}catch(t){if(console.error("MSAL login or token acquisition failed:",t),t.name==="InteractionRequiredAuthError")return(await Pu.acquireTokenPopup(GE)).accessToken;throw t}},cX=1,lX=1e6;let QE=0;function uX(){return QE=(QE+1)%Number.MAX_SAFE_INTEGER,QE.toString()}const YE=new Map,W1=t=>{if(YE.has(t))return;const e=setTimeout(()=>{YE.delete(t),Kf({type:"REMOVE_TOAST",toastId:t})},lX);YE.set(t,e)},dX=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,cX)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?W1(n):t.toasts.forEach(r=>{W1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Iy=[];let by={toasts:[]};function Kf(t){by=dX(by,t),Iy.forEach(e=>{e(by)})}function hX({...t}){const e=uX(),n=i=>Kf({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Kf({type:"DISMISS_TOAST",toastId:e});return Kf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function fa(){const[t,e]=g.useState(by);return g.useEffect(()=>(Iy.push(e),()=>{const n=Iy.indexOf(e);n>-1&&Iy.splice(n,1)}),[t]),{...t,toast:hX,dismiss:n=>Kf({type:"DISMISS_TOAST",toastId:n})}}function we(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function K1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Pw(...t){return e=>{let n=!1;const r=t.map(i=>{const s=K1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():K1(t[i],null)}}}}function Ct(...t){return g.useCallback(Pw(...t),t)}function fX(t,e){const n=g.createContext(e),r=s=>{const{children:o,...a}=s,c=g.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function ai(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),c=n.length;n=[...n,o];const l=d=>{var E;const{scope:f,children:m,...w}=d,y=((E=f==null?void 0:f[t])==null?void 0:E[c])||a,v=g.useMemo(()=>w,Object.values(w));return p.jsx(y.Provider,{value:v,children:m})};l.displayName=s+"Provider";function u(d,f){var y;const m=((y=f==null?void 0:f[t])==null?void 0:y[c])||a,w=g.useContext(m);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const c=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,pX(i,...e)]}function pX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(s)[`__scope${l}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function $l(t){const e=mX(t),n=g.forwardRef((r,i)=>{const{children:s,...o}=r,a=g.Children.toArray(s),c=a.find(yX);if(c){const l=c.props.children,u=a.map(d=>d===c?g.Children.count(l)>1?g.Children.only(null):g.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...o,ref:i,children:g.isValidElement(l)?g.cloneElement(l,void 0,u):null})}return p.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var t4=$l("Slot");function mX(t){const e=g.forwardRef((n,r)=>{const{children:i,...s}=n;if(g.isValidElement(i)){const o=_X(i),a=vX(s,i.props);return i.type!==g.Fragment&&(a.ref=r?Pw(r,o):o),g.cloneElement(i,a)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var n4=Symbol("radix.slottable");function gX(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=n4,e}function yX(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===n4}function vX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function _X(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function q0(t){const e=t+"CollectionProvider",[n,r]=ai(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:E}=y,T=G.useRef(null),C=G.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:C,collectionRef:T,children:E})};o.displayName=e;const a=t+"CollectionSlot",c=$l(a),l=G.forwardRef((y,v)=>{const{scope:E,children:T}=y,C=s(a,E),b=Ct(v,C.collectionRef);return p.jsx(c,{ref:b,children:T})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=$l(u),m=G.forwardRef((y,v)=>{const{scope:E,children:T,...C}=y,b=G.useRef(null),M=Ct(v,b),L=s(u,E);return G.useEffect(()=>(L.itemMap.set(b,{ref:b,...C}),()=>void L.itemMap.delete(b))),p.jsx(f,{[d]:"",ref:M,children:T})});m.displayName=u;function w(y){const v=s(t+"CollectionConsumer",y);return G.useCallback(()=>{const T=v.collectionRef.current;if(!T)return[];const C=Array.from(T.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((L,k)=>C.indexOf(L.ref.current)-C.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:m},w,r]}var wX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=wX.reduce((t,e)=>{const n=$l(`Primitive.${e}`),r=g.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function G0(t,e){t&&Sm.flushSync(()=>t.dispatchEvent(e))}function mn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function TX(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var EX="DismissableLayer",cI="dismissableLayer.update",CX="dismissableLayer.pointerDownOutside",SX="dismissableLayer.focusOutside",q1,r4=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yh=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,l=g.useContext(r4),[u,d]=g.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),w=Ct(e,k=>d(k)),y=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),E=y.indexOf(v),T=u?y.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,b=T>=E,M=bX(k=>{const I=k.target,A=[...l.branches].some(R=>R.contains(I));!b||A||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},f),L=AX(k=>{const I=k.target;[...l.branches].some(R=>R.contains(I))||(s==null||s(k),o==null||o(k),k.defaultPrevented||a==null||a())},f);return TX(k=>{T===l.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},f),g.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(q1=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),G1(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=q1)}},[u,f,n,l]),g.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),G1())},[u,l]),g.useEffect(()=>{const k=()=>m({});return document.addEventListener(cI,k),()=>document.removeEventListener(cI,k)},[]),p.jsx(je.div,{...c,ref:w,style:{pointerEvents:C?b?"auto":"none":void 0,...t.style},onFocusCapture:we(t.onFocusCapture,L.onFocusCapture),onBlurCapture:we(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:we(t.onPointerDownCapture,M.onPointerDownCapture)})});yh.displayName=EX;var IX="DismissableLayerBranch",i4=g.forwardRef((t,e)=>{const n=g.useContext(r4),r=g.useRef(null),i=Ct(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(je.div,{...t,ref:i})});i4.displayName=IX;function bX(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){s4(CX,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function AX(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&s4(SX,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function G1(){const t=new CustomEvent(cI);document.dispatchEvent(t)}function s4(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?G0(i,s):i.dispatchEvent(s)}var kX=yh,xX=i4,oi=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},RX="Portal",Am=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=g.useState(!1);oi(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?DU.createPortal(p.jsx(je.div,{...r,ref:e}),o):null});Am.displayName=RX;function PX(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var zn=t=>{const{present:e,children:n}=t,r=NX(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=Ct(r.ref,OX(i));return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};zn.displayName="Presence";function NX(t){const[e,n]=g.useState(),r=g.useRef(null),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,c]=PX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const l=Wg(r.current);s.current=a==="mounted"?l:"none"},[a]),oi(()=>{const l=r.current,u=i.current;if(u!==t){const f=s.current,m=Wg(l);t?c("MOUNT"):m==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),oi(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,d=m=>{const y=Wg(r.current).includes(m.animationName);if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=m=>{m.target===e&&(s.current=Wg(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function Wg(t){return(t==null?void 0:t.animationName)||"none"}function OX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var MX=Kb[" useInsertionEffect ".trim().toString()]||oi;function Fc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=DX({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const u=g.useRef(t!==void 0);g.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const l=g.useCallback(u=>{var d;if(a){const f=LX(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[c,l]}function DX({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),i=g.useRef(n),s=g.useRef(e);return MX(()=>{s.current=e},[e]),g.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function LX(t){return typeof t=="function"}var FX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),UX="VisuallyHidden",Nw=g.forwardRef((t,e)=>p.jsx(je.span,{...t,ref:e,style:{...FX,...t.style}}));Nw.displayName=UX;var jX=Nw,Q0="ToastProvider",[Y0,VX,$X]=q0("Toast"),[o4,kIe]=ai("Toast",[$X]),[BX,Ow]=o4(Q0),a4=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,c]=g.useState(null),[l,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Q0}\`. Expected non-empty \`string\`.`),p.jsx(Y0.Provider,{scope:e,children:p.jsx(BX,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:a,onViewportChange:c,onToastAdd:g.useCallback(()=>u(m=>m+1),[]),onToastRemove:g.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};a4.displayName=Q0;var c4="ToastViewport",HX=["F8"],lI="toast.viewportPause",uI="toast.viewportResume",l4=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=HX,label:i="Notifications ({hotkey})",...s}=t,o=Ow(c4,n),a=VX(n),c=g.useRef(null),l=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=Ct(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;g.useEffect(()=>{const v=E=>{var C;r.length!==0&&r.every(b=>E[b]||E.code===b)&&((C=d.current)==null||C.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),g.useEffect(()=>{const v=c.current,E=d.current;if(w&&v&&E){const T=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(lI);E.dispatchEvent(L),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(uI);E.dispatchEvent(L),o.isClosePausedRef.current=!1}},b=L=>{!v.contains(L.relatedTarget)&&C()},M=()=>{v.contains(document.activeElement)||C()};return v.addEventListener("focusin",T),v.addEventListener("focusout",b),v.addEventListener("pointermove",T),v.addEventListener("pointerleave",M),window.addEventListener("blur",T),window.addEventListener("focus",C),()=>{v.removeEventListener("focusin",T),v.removeEventListener("focusout",b),v.removeEventListener("pointermove",T),v.removeEventListener("pointerleave",M),window.removeEventListener("blur",T),window.removeEventListener("focus",C)}}},[w,o.isClosePausedRef]);const y=g.useCallback(({tabbingDirection:v})=>{const T=a().map(C=>{const b=C.ref.current,M=[b,...nZ(b)];return v==="forwards"?M:M.reverse()});return(v==="forwards"?T.reverse():T).flat()},[a]);return g.useEffect(()=>{const v=d.current;if(v){const E=T=>{var M,L,k;const C=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!C){const I=document.activeElement,A=T.shiftKey;if(T.target===v&&A){(M=l.current)==null||M.focus();return}const P=y({tabbingDirection:A?"backwards":"forwards"}),x=P.findIndex(H=>H===I);JE(P.slice(x+1))?T.preventDefault():A?(L=l.current)==null||L.focus():(k=u.current)==null||k.focus()}};return v.addEventListener("keydown",E),()=>v.removeEventListener("keydown",E)}},[a,y]),p.jsxs(xX,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&p.jsx(dI,{ref:l,onFocusFromOutsideViewport:()=>{const v=y({tabbingDirection:"forwards"});JE(v)}}),p.jsx(Y0.Slot,{scope:n,children:p.jsx(je.ol,{tabIndex:-1,...s,ref:f})}),w&&p.jsx(dI,{ref:u,onFocusFromOutsideViewport:()=>{const v=y({tabbingDirection:"backwards"});JE(v)}})]})});l4.displayName=c4;var u4="ToastFocusProxy",dI=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Ow(u4,n);return p.jsx(Nw,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var l;const a=o.relatedTarget;!((l=s.viewport)!=null&&l.contains(a))&&r()}})});dI.displayName=u4;var km="Toast",zX="toast.swipeStart",WX="toast.swipeMove",KX="toast.swipeCancel",qX="toast.swipeEnd",d4=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,c]=Fc({prop:r,defaultProp:i??!0,onChange:s,caller:km});return p.jsx(zn,{present:n||a,children:p.jsx(YX,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:mn(t.onPause),onResume:mn(t.onResume),onSwipeStart:we(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:we(t.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:we(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:we(t.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});d4.displayName=km;var[GX,QX]=o4(km,{onClose(){}}),YX=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:m,...w}=t,y=Ow(km,n),[v,E]=g.useState(null),T=Ct(e,H=>E(H)),C=g.useRef(null),b=g.useRef(null),M=i||y.duration,L=g.useRef(0),k=g.useRef(M),I=g.useRef(0),{onToastAdd:A,onToastRemove:R}=y,N=mn(()=>{var z;(v==null?void 0:v.contains(document.activeElement))&&((z=y.viewport)==null||z.focus()),o()}),P=g.useCallback(H=>{!H||H===1/0||(window.clearTimeout(I.current),L.current=new Date().getTime(),I.current=window.setTimeout(N,H))},[N]);g.useEffect(()=>{const H=y.viewport;if(H){const z=()=>{P(k.current),l==null||l()},Q=()=>{const te=new Date().getTime()-L.current;k.current=k.current-te,window.clearTimeout(I.current),c==null||c()};return H.addEventListener(lI,Q),H.addEventListener(uI,z),()=>{H.removeEventListener(lI,Q),H.removeEventListener(uI,z)}}},[y.viewport,M,c,l,P]),g.useEffect(()=>{s&&!y.isClosePausedRef.current&&P(M)},[s,M,y.isClosePausedRef,P]),g.useEffect(()=>(A(),()=>R()),[A,R]);const x=g.useMemo(()=>v?v4(v):null,[v]);return y.viewport?p.jsxs(p.Fragment,{children:[x&&p.jsx(JX,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:x}),p.jsx(GX,{scope:n,onClose:N,children:Sm.createPortal(p.jsx(Y0.ItemSlot,{scope:n,children:p.jsx(kX,{asChild:!0,onEscapeKeyDown:we(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||N(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...w,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:we(t.onKeyDown,H=>{H.key==="Escape"&&(a==null||a(H.nativeEvent),H.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:we(t.onPointerDown,H=>{H.button===0&&(C.current={x:H.clientX,y:H.clientY})}),onPointerMove:we(t.onPointerMove,H=>{if(!C.current)return;const z=H.clientX-C.current.x,Q=H.clientY-C.current.y,te=!!b.current,U=["left","right"].includes(y.swipeDirection),j=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,se=U?j(0,z):0,Ce=U?0:j(0,Q),V=H.pointerType==="touch"?10:2,W={x:se,y:Ce},Y={originalEvent:H,delta:W};te?(b.current=W,Kg(WX,d,Y,{discrete:!1})):Q1(W,y.swipeDirection,V)?(b.current=W,Kg(zX,u,Y,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(z)>V||Math.abs(Q)>V)&&(C.current=null)}),onPointerUp:we(t.onPointerUp,H=>{const z=b.current,Q=H.target;if(Q.hasPointerCapture(H.pointerId)&&Q.releasePointerCapture(H.pointerId),b.current=null,C.current=null,z){const te=H.currentTarget,U={originalEvent:H,delta:z};Q1(z,y.swipeDirection,y.swipeThreshold)?Kg(qX,m,U,{discrete:!0}):Kg(KX,f,U,{discrete:!0}),te.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),JX=t=>{const{__scopeToast:e,children:n,...r}=t,i=Ow(km,e),[s,o]=g.useState(!1),[a,c]=g.useState(!1);return eZ(()=>o(!0)),g.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),a?null:p.jsx(Am,{asChild:!0,children:p.jsx(Nw,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},XX="ToastTitle",h4=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(je.div,{...r,ref:e})});h4.displayName=XX;var ZX="ToastDescription",f4=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(je.div,{...r,ref:e})});f4.displayName=ZX;var p4="ToastAction",m4=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(y4,{altText:n,asChild:!0,children:p.jsx(J0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${p4}\`. Expected non-empty \`string\`.`),null)});m4.displayName=p4;var g4="ToastClose",J0=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=QX(g4,n);return p.jsx(y4,{asChild:!0,children:p.jsx(je.button,{type:"button",...r,ref:e,onClick:we(t.onClick,i.onClose)})})});J0.displayName=g4;var y4=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function v4(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),tZ(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...v4(r))}}),e}function Kg(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?G0(i,s):i.dispatchEvent(s)}var Q1=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function eZ(t=()=>{}){const e=mn(t);oi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function tZ(t){return t.nodeType===t.ELEMENT_NODE}function nZ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function JE(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var rZ=a4,_4=l4,w4=d4,T4=h4,E4=f4,C4=m4,S4=J0;function I4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=I4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function b4(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=I4(t))&&(r&&(r+=" "),r+=e);return r}const Y1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,J1=b4,xm=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return J1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],d=s==null?void 0:s[l];if(u===null)return null;const f=Y1(u)||Y1(d);return i[l][f]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:f,...m}=u;return Object.entries(m).every(w=>{let[y,v]=w;return Array.isArray(v)?v.includes({...s,...a}[y]):{...s,...a}[y]===v})?[...l,d,f]:l},[]);return J1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sZ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),X1=t=>{const e=sZ(t);return e.charAt(0).toUpperCase()+e.slice(1)},A4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),oZ=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>g.createElement("svg",{ref:c,...aZ,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:A4("lucide",i),...!s&&!oZ(a)&&{"aria-hidden":"true"},...a},[...o.map(([l,u])=>g.createElement(l,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(t,e)=>{const n=g.forwardRef(({className:r,...i},s)=>g.createElement(cZ,{ref:s,iconNode:e,className:A4(`lucide-${iZ(X1(t))}`,`lucide-${t}`,r),...i}));return n.displayName=X1(t),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uZ=Ge("arrow-left",lZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Z1=Ge("bell",dZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],k4=Ge("calendar",hZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hI=Ge("chart-column",fZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],mZ=Ge("check-check",pZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],x4=Ge("check",gZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],R4=Ge("chevron-right",yZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],P4=Ge("chrome",vZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wZ=Ge("circle-check-big",_Z);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],EZ=Ge("circle",TZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],X0=Ge("clock",CZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],IZ=Ge("cloud-off",SZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],AZ=Ge("command",bZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],xZ=Ge("dollar-sign",kZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],PZ=Ge("dot",RZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],OZ=Ge("file-text",NZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uc=Ge("loader-circle",MZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LZ=Ge("log-out",DZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eO=Ge("mail",FZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],jZ=Ge("maximize",UZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],N4=Ge("menu",VZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Z=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],BZ=Ge("message-square",$Z);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],O4=Ge("mic",HZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],WZ=Ge("minimize",zZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],qZ=Ge("notebook-text",KZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],fI=Ge("pause",GZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Z0=Ge("phone",QZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],pI=Ge("play",YZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],M4=Ge("refresh-cw",JZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ZZ=Ge("rotate-ccw",XZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tO=Ge("search",eee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nee=Ge("settings",tee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Md=Ge("square-check-big",ree);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],see=Ge("square",iee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],aee=Ge("timer",oee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lee=Ge("trash-2",cee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qf=Ge("triangle-alert",uee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ek=Ge("user",dee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],D4=Ge("users",hee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pee=Ge("wifi-off",fee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],gee=Ge("wifi",mee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],vee=Ge("wrench",yee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vh=Ge("x",_ee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tee=Ge("zap",wee),tk="-",Eee=t=>{const e=See(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(tk);return a[0]===""&&a.length!==1&&a.shift(),L4(a,e)||Cee(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},L4=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?L4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(tk);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},nO=/^\[(.+)\]$/,Cee=t=>{if(nO.test(t)){const e=nO.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},See=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return bee(Object.entries(t.classGroups),n).forEach(([s,o])=>{mI(o,r,s,e)}),r},mI=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:rO(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Iee(i)){mI(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{mI(o,rO(e,s),n,r)})})},rO=(t,e)=>{let n=t;return e.split(tk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Iee=t=>t.isThemeGetter,bee=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Aee=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},F4="!",kee=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let l=0,u=0,d;for(let v=0;v<a.length;v++){let E=a[v];if(l===0){if(E===i&&(r||a.slice(v,v+s)===e)){c.push(a.slice(u,v)),u=v+s;continue}if(E==="/"){d=v;continue}}E==="["?l++:E==="]"&&l--}const f=c.length===0?a:a.substring(u),m=f.startsWith(F4),w=m?f.substring(1):f,y=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},xee=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Ree=t=>({cache:Aee(t.cacheSize),parseClassName:kee(t),...Eee(t)}),Pee=/\s+/,Nee=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(Pee);let a="";for(let c=o.length-1;c>=0;c-=1){const l=o[c],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:m}=n(l);let w=!!m,y=r(w?f.substring(0,m):f);if(!y){if(!w){a=l+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=l+(a.length>0?" "+a:a);continue}w=!1}const v=xee(u).join(":"),E=d?v+F4:v,T=E+y;if(s.includes(T))continue;s.push(T);const C=i(y,w);for(let b=0;b<C.length;++b){const M=C[b];s.push(E+M)}a=l+(a.length>0?" "+a:a)}return a};function Oee(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=U4(e))&&(r&&(r+=" "),r+=n);return r}const U4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=U4(t[r]))&&(n&&(n+=" "),n+=e);return n};function Mee(t,...e){let n,r,i,s=o;function o(c){const l=e.reduce((u,d)=>d(u),t());return n=Ree(l),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=Nee(c,n);return i(c,u),u}return function(){return s(Oee.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},j4=/^\[(?:([a-z-]+):)?(.+)\]$/i,Dee=/^\d+\/\d+$/,Lee=new Set(["px","full","screen"]),Fee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Vee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$ee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,So=t=>sd(t)||Lee.has(t)||Dee.test(t),Ta=t=>_h(t,"length",Qee),sd=t=>!!t&&!Number.isNaN(Number(t)),XE=t=>_h(t,"number",sd),sf=t=>!!t&&Number.isInteger(Number(t)),Bee=t=>t.endsWith("%")&&sd(t.slice(0,-1)),Je=t=>j4.test(t),Ea=t=>Fee.test(t),Hee=new Set(["length","size","percentage"]),zee=t=>_h(t,Hee,V4),Wee=t=>_h(t,"position",V4),Kee=new Set(["image","url"]),qee=t=>_h(t,Kee,Jee),Gee=t=>_h(t,"",Yee),of=()=>!0,_h=(t,e,n)=>{const r=j4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Qee=t=>Uee.test(t)&&!jee.test(t),V4=()=>!1,Yee=t=>Vee.test(t),Jee=t=>$ee.test(t),Xee=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),r=jt("brightness"),i=jt("borderColor"),s=jt("borderRadius"),o=jt("borderSpacing"),a=jt("borderWidth"),c=jt("contrast"),l=jt("grayscale"),u=jt("hueRotate"),d=jt("invert"),f=jt("gap"),m=jt("gradientColorStops"),w=jt("gradientColorStopPositions"),y=jt("inset"),v=jt("margin"),E=jt("opacity"),T=jt("padding"),C=jt("saturate"),b=jt("scale"),M=jt("sepia"),L=jt("skew"),k=jt("space"),I=jt("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Je,e],P=()=>[Je,e],x=()=>["",So,Ta],H=()=>["auto",sd,Je],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Je],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[sd,Je];return{cacheSize:500,separator:":",theme:{colors:[of],spacing:[So,Ta],blur:["none","",Ea,Je],brightness:Ce(),borderColor:[t],borderRadius:["none","","full",Ea,Je],borderSpacing:P(),borderWidth:x(),contrast:Ce(),grayscale:j(),hueRotate:Ce(),invert:j(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[Bee,Ta],inset:N(),margin:N(),opacity:Ce(),padding:P(),saturate:Ce(),scale:Ce(),sepia:j(),skew:Ce(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[Ea]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Je]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sf,Je]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",sf,Je]}],"grid-cols":[{"grid-cols":[of]}],"col-start-end":[{col:["auto",{span:["full",sf,Je]},Je]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[of]}],"row-start-end":[{row:["auto",{span:[sf,Je]},Je]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,e]}],"min-w":[{"min-w":[Je,e,"min","max","fit"]}],"max-w":[{"max-w":[Je,e,"none","full","min","max","fit","prose",{screen:[Ea]},Ea]}],h:[{h:[Je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ea,Ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",XE]}],"font-family":[{font:[of]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",sd,XE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",So,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",So,Ta]}],"underline-offset":[{"underline-offset":["auto",So,Je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),Wee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},qee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[So,Je]}],"outline-w":[{outline:[So,Ta]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:x()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[So,Ta]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ea,Gee]}],"shadow-color":[{shadow:[of]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ea,Je]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[C]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[sf,Je]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[So,Ta,XE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Zee=Mee(Xee);function pe(...t){return Zee(b4(t))}const iO="/sounds/iphone_ding.mp3",sO="/sounds/ting.mp3";async function oO(t){try{const e=new Audio(t);e.addEventListener("error",n=>{console.warn(`Sound file not found: ${t}. Skipping audio playback.`)}),await e.play()}catch{console.warn(`Could not play sound: ${t}. This is likely due to missing audio files.`)}}const ete=rZ,$4=g.forwardRef(({className:t,...e},n)=>p.jsx(_4,{ref:n,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$4.displayName=_4.displayName;const tte=xm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),B4=g.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(w4,{ref:r,className:pe(tte({variant:e}),t),...n}));B4.displayName=w4.displayName;const nte=g.forwardRef(({className:t,...e},n)=>p.jsx(C4,{ref:n,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));nte.displayName=C4.displayName;const H4=g.forwardRef(({className:t,...e},n)=>p.jsx(S4,{ref:n,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(vh,{className:"h-4 w-4"})}));H4.displayName=S4.displayName;const z4=g.forwardRef(({className:t,...e},n)=>p.jsx(T4,{ref:n,className:pe("text-sm font-semibold",t),...e}));z4.displayName=T4.displayName;const W4=g.forwardRef(({className:t,...e},n)=>p.jsx(E4,{ref:n,className:pe("text-sm opacity-90",t),...e}));W4.displayName=E4.displayName;function rte(){const{toasts:t}=fa();return p.jsxs(ete,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return p.jsxs(B4,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(z4,{children:n}),r&&p.jsx(W4,{children:r})]}),i,p.jsx(H4,{})]},e)}),p.jsx($4,{})]})}var Bv=["light","dark"],nk="(prefers-color-scheme: dark)",ite=typeof window>"u",rk=g.createContext(void 0),ste={setTheme:t=>{},themes:[]},ote=()=>{var t;return(t=g.useContext(rk))!=null?t:ste},ate=t=>g.useContext(rk)?t.children:g.createElement(lte,{...t}),cte=["light","dark"],lte=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=cte,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:c,children:l,nonce:u})=>{let[d,f]=g.useState(()=>aO(i,o)),[m,w]=g.useState(()=>aO(i)),y=c?Object.values(c):s,v=g.useCallback(b=>{let M=b;if(!M)return;b==="system"&&n&&(M=cO());let L=c?c[M]:M,k=e?dte():null,I=document.documentElement;if(a==="class"?(I.classList.remove(...y),L&&I.classList.add(L)):L?I.setAttribute(a,L):I.removeAttribute(a),r){let A=Bv.includes(o)?o:null,R=Bv.includes(M)?M:A;I.style.colorScheme=R}k==null||k()},[]),E=g.useCallback(b=>{let M=typeof b=="function"?b(b):b;f(M);try{localStorage.setItem(i,M)}catch{}},[t]),T=g.useCallback(b=>{let M=cO(b);w(M),d==="system"&&n&&!t&&v("system")},[d,t]);g.useEffect(()=>{let b=window.matchMedia(nk);return b.addListener(T),T(b),()=>b.removeListener(T)},[T]),g.useEffect(()=>{let b=M=>{if(M.key!==i)return;let L=M.newValue||o;E(L)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[E]),g.useEffect(()=>{v(t??d)},[t,d]);let C=g.useMemo(()=>({theme:d,setTheme:E,forcedTheme:t,resolvedTheme:d==="system"?m:d,themes:n?[...s,"system"]:s,systemTheme:n?m:void 0}),[d,E,t,m,n,s]);return g.createElement(rk.Provider,{value:C},g.createElement(ute,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:c,children:l,attrs:y,nonce:u}),l)},ute=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:c})=>{let l=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?Bv.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,y=!1,v=!0)=>{let E=o?o[w]:w,T=y?w+"|| ''":`'${E}'`,C="";return i&&v&&!y&&Bv.includes(w)&&(C+=`d.style.colorScheme = '${w}';`),n==="class"?y||E?C+=`c.add(${T})`:C+="null":E&&(C+=`d[s](n,${T})`),C},m=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${nk}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${l?"":"else{"+f(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${d}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})}),aO=(t,e)=>{if(ite)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},dte=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},cO=t=>(t||(t=window.matchMedia(nk)),t.matches?"dark":"light"),hte=t=>{switch(t){case"success":return mte;case"info":return yte;case"warning":return gte;case"error":return vte;default:return null}},fte=Array(12).fill(0),pte=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},fte.map((n,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),mte=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gte=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yte=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vte=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_te=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wte=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},gI=1,Tte=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:gI++,o=this.toasts.find(c=>c.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:a,title:r}):c):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async l=>{if(o=["resolve",l],G.isValidElement(l))s=!1,this.create({id:r,type:"default",message:l});else if(Cte(l)&&!l.ok){s=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,d=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:r,type:"error",message:u,description:d})}else if(n.success!==void 0){s=!1;let u=typeof n.success=="function"?await n.success(l):n.success,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async l=>{if(o=["reject",l],n.error!==void 0){s=!1;let u=typeof n.error=="function"?await n.error(l):n.error,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var l;s&&(this.dismiss(r),r=void 0),(l=n.finally)==null||l.call(n)}),c=()=>new Promise((l,u)=>a.then(()=>o[0]==="reject"?u(o[1]):l(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||gI++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hr=new Tte,Ete=(t,e)=>{let n=(e==null?void 0:e.id)||gI++;return Hr.addToast({title:t,...e,id:n}),n},Cte=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Ste=Ete,Ite=()=>Hr.toasts,bte=()=>Hr.getActiveToasts(),Eu=Object.assign(Ste,{success:Hr.success,info:Hr.info,warning:Hr.warning,error:Hr.error,custom:Hr.custom,message:Hr.message,promise:Hr.promise,dismiss:Hr.dismiss,loading:Hr.loading},{getHistory:Ite,getToasts:bte});function Ate(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Ate(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function qg(t){return t.label!==void 0}var kte=3,xte="32px",Rte="16px",lO=4e3,Pte=356,Nte=14,Ote=20,Mte=200;function Ji(...t){return t.filter(Boolean).join(" ")}function Dte(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Lte=t=>{var e,n,r,i,s,o,a,c,l,u,d;let{invert:f,toast:m,unstyled:w,interacting:y,setHeights:v,visibleToasts:E,heights:T,index:C,toasts:b,expanded:M,removeToast:L,defaultRichColors:k,closeButton:I,style:A,cancelButtonStyle:R,actionButtonStyle:N,className:P="",descriptionClassName:x="",duration:H,position:z,gap:Q,loadingIcon:te,expandByDefault:U,classNames:j,icons:se,closeButtonAriaLabel:Ce="Close toast",pauseWhenPageIsHidden:V}=t,[W,Y]=G.useState(null),[re,ge]=G.useState(null),[ne,De]=G.useState(!1),[Pe,Ve]=G.useState(!1),[Ye,it]=G.useState(!1),[gt,Ie]=G.useState(!1),[Ne,Rt]=G.useState(!1),[Gt,Qt]=G.useState(0),[Ze,D]=G.useState(0),B=G.useRef(m.duration||H||lO),K=G.useRef(null),de=G.useRef(null),ue=C===0,oe=C+1<=E,ce=m.type,xe=m.dismissible!==!1,at=m.className||"",yn=m.descriptionClassName||"",Ur=G.useMemo(()=>T.findIndex($e=>$e.toastId===m.id)||0,[T,m.id]),jr=G.useMemo(()=>{var $e;return($e=m.closeButton)!=null?$e:I},[m.closeButton,I]),xi=G.useMemo(()=>m.duration||H||lO,[m.duration,H]),Mn=G.useRef(0),Wn=G.useRef(0),bs=G.useRef(0),Gi=G.useRef(null),[Uh,ga]=z.split("-"),jh=G.useMemo(()=>T.reduce(($e,ft,Pt)=>Pt>=Ur?$e:$e+ft.height,0),[T,Ur]),Vh=wte(),Wc=m.invert||f,Kc=ce==="loading";Wn.current=G.useMemo(()=>Ur*Q+jh,[Ur,jh]),G.useEffect(()=>{B.current=xi},[xi]),G.useEffect(()=>{De(!0)},[]),G.useEffect(()=>{let $e=de.current;if($e){let ft=$e.getBoundingClientRect().height;return D(ft),v(Pt=>[{toastId:m.id,height:ft,position:m.position},...Pt]),()=>v(Pt=>Pt.filter(Kn=>Kn.toastId!==m.id))}},[v,m.id]),G.useLayoutEffect(()=>{if(!ne)return;let $e=de.current,ft=$e.style.height;$e.style.height="auto";let Pt=$e.getBoundingClientRect().height;$e.style.height=ft,D(Pt),v(Kn=>Kn.find(Vr=>Vr.toastId===m.id)?Kn.map(Vr=>Vr.toastId===m.id?{...Vr,height:Pt}:Vr):[{toastId:m.id,height:Pt,position:m.position},...Kn])},[ne,m.title,m.description,v,m.id]);let Ri=G.useCallback(()=>{Ve(!0),Qt(Wn.current),v($e=>$e.filter(ft=>ft.toastId!==m.id)),setTimeout(()=>{L(m)},Mte)},[m,L,v,Wn]);G.useEffect(()=>{if(m.promise&&ce==="loading"||m.duration===1/0||m.type==="loading")return;let $e;return M||y||V&&Vh?(()=>{if(bs.current<Mn.current){let ft=new Date().getTime()-Mn.current;B.current=B.current-ft}bs.current=new Date().getTime()})():B.current!==1/0&&(Mn.current=new Date().getTime(),$e=setTimeout(()=>{var ft;(ft=m.onAutoClose)==null||ft.call(m,m),Ri()},B.current)),()=>clearTimeout($e)},[M,y,m,ce,V,Vh,Ri]),G.useEffect(()=>{m.delete&&Ri()},[Ri,m.delete]);function wo(){var $e,ft,Pt;return se!=null&&se.loading?G.createElement("div",{className:Ji(j==null?void 0:j.loader,($e=m==null?void 0:m.classNames)==null?void 0:$e.loader,"sonner-loader"),"data-visible":ce==="loading"},se.loading):te?G.createElement("div",{className:Ji(j==null?void 0:j.loader,(ft=m==null?void 0:m.classNames)==null?void 0:ft.loader,"sonner-loader"),"data-visible":ce==="loading"},te):G.createElement(pte,{className:Ji(j==null?void 0:j.loader,(Pt=m==null?void 0:m.classNames)==null?void 0:Pt.loader),visible:ce==="loading"})}return G.createElement("li",{tabIndex:0,ref:de,className:Ji(P,at,j==null?void 0:j.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[ce],(n=m==null?void 0:m.classNames)==null?void 0:n[ce]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:k,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":ne,"data-promise":!!m.promise,"data-swiped":Ne,"data-removed":Pe,"data-visible":oe,"data-y-position":Uh,"data-x-position":ga,"data-index":C,"data-front":ue,"data-swiping":Ye,"data-dismissible":xe,"data-type":ce,"data-invert":Wc,"data-swipe-out":gt,"data-swipe-direction":re,"data-expanded":!!(M||U&&ne),style:{"--index":C,"--toasts-before":C,"--z-index":b.length-C,"--offset":`${Pe?Gt:Wn.current}px`,"--initial-height":U?"auto":`${Ze}px`,...A,...m.style},onDragEnd:()=>{it(!1),Y(null),Gi.current=null},onPointerDown:$e=>{Kc||!xe||(K.current=new Date,Qt(Wn.current),$e.target.setPointerCapture($e.pointerId),$e.target.tagName!=="BUTTON"&&(it(!0),Gi.current={x:$e.clientX,y:$e.clientY}))},onPointerUp:()=>{var $e,ft,Pt,Kn;if(gt||!xe)return;Gi.current=null;let Vr=Number((($e=de.current)==null?void 0:$e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ht=Number(((ft=de.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),As=new Date().getTime()-((Pt=K.current)==null?void 0:Pt.getTime()),qn=W==="x"?Vr:Ht,$r=Math.abs(qn)/As;if(Math.abs(qn)>=Ote||$r>.11){Qt(Wn.current),(Kn=m.onDismiss)==null||Kn.call(m,m),ge(W==="x"?Vr>0?"right":"left":Ht>0?"down":"up"),Ri(),Ie(!0),Rt(!1);return}it(!1),Y(null)},onPointerMove:$e=>{var ft,Pt,Kn,Vr;if(!Gi.current||!xe||((ft=window.getSelection())==null?void 0:ft.toString().length)>0)return;let Ht=$e.clientY-Gi.current.y,As=$e.clientX-Gi.current.x,qn=(Pt=t.swipeDirections)!=null?Pt:Dte(z);!W&&(Math.abs(As)>1||Math.abs(Ht)>1)&&Y(Math.abs(As)>Math.abs(Ht)?"x":"y");let $r={x:0,y:0};W==="y"?(qn.includes("top")||qn.includes("bottom"))&&(qn.includes("top")&&Ht<0||qn.includes("bottom")&&Ht>0)&&($r.y=Ht):W==="x"&&(qn.includes("left")||qn.includes("right"))&&(qn.includes("left")&&As<0||qn.includes("right")&&As>0)&&($r.x=As),(Math.abs($r.x)>0||Math.abs($r.y)>0)&&Rt(!0),(Kn=de.current)==null||Kn.style.setProperty("--swipe-amount-x",`${$r.x}px`),(Vr=de.current)==null||Vr.style.setProperty("--swipe-amount-y",`${$r.y}px`)}},jr&&!m.jsx?G.createElement("button",{"aria-label":Ce,"data-disabled":Kc,"data-close-button":!0,onClick:Kc||!xe?()=>{}:()=>{var $e;Ri(),($e=m.onDismiss)==null||$e.call(m,m)},className:Ji(j==null?void 0:j.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=se==null?void 0:se.close)!=null?s:_te):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:G.createElement(G.Fragment,null,ce||m.icon||m.promise?G.createElement("div",{"data-icon":"",className:Ji(j==null?void 0:j.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||wo():null,m.type!=="loading"?m.icon||(se==null?void 0:se[ce])||hte(ce):null):null,G.createElement("div",{"data-content":"",className:Ji(j==null?void 0:j.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},G.createElement("div",{"data-title":"",className:Ji(j==null?void 0:j.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?G.createElement("div",{"data-description":"",className:Ji(x,yn,j==null?void 0:j.description,(l=m==null?void 0:m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&qg(m.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:$e=>{var ft,Pt;qg(m.cancel)&&xe&&((Pt=(ft=m.cancel).onClick)==null||Pt.call(ft,$e),Ri())},className:Ji(j==null?void 0:j.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&qg(m.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:$e=>{var ft,Pt;qg(m.action)&&((Pt=(ft=m.action).onClick)==null||Pt.call(ft,$e),!$e.defaultPrevented&&Ri())},className:Ji(j==null?void 0:j.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function uO(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Fte(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?Rte:xte;function c(l){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof l=="number"?`${l}px`:l})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(l=>{r[l]===void 0?n[`${o}-${l}`]=a:n[`${o}-${l}`]=typeof r[l]=="number"?`${r[l]}px`:r[l]}):c(a)}),n}var Ute=g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:c,mobileOffset:l,theme:u="light",richColors:d,duration:f,style:m,visibleToasts:w=kte,toastOptions:y,dir:v=uO(),gap:E=Nte,loadingIcon:T,icons:C,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:M}=t,[L,k]=G.useState([]),I=G.useMemo(()=>Array.from(new Set([r].concat(L.filter(V=>V.position).map(V=>V.position)))),[L,r]),[A,R]=G.useState([]),[N,P]=G.useState(!1),[x,H]=G.useState(!1),[z,Q]=G.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=G.useRef(null),U=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=G.useRef(null),se=G.useRef(!1),Ce=G.useCallback(V=>{k(W=>{var Y;return(Y=W.find(re=>re.id===V.id))!=null&&Y.delete||Hr.dismiss(V.id),W.filter(({id:re})=>re!==V.id)})},[]);return G.useEffect(()=>Hr.subscribe(V=>{if(V.dismiss){k(W=>W.map(Y=>Y.id===V.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{DU.flushSync(()=>{k(W=>{let Y=W.findIndex(re=>re.id===V.id);return Y!==-1?[...W.slice(0,Y),{...W[Y],...V},...W.slice(Y+1)]:[V,...W]})})})}),[]),G.useEffect(()=>{if(u!=="system"){Q(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;let V=window.matchMedia("(prefers-color-scheme: dark)");try{V.addEventListener("change",({matches:W})=>{Q(W?"dark":"light")})}catch{V.addListener(({matches:Y})=>{try{Q(Y?"dark":"light")}catch(re){console.error(re)}})}},[u]),G.useEffect(()=>{L.length<=1&&P(!1)},[L]),G.useEffect(()=>{let V=W=>{var Y,re;i.every(ge=>W[ge]||W.code===ge)&&(P(!0),(Y=te.current)==null||Y.focus()),W.code==="Escape"&&(document.activeElement===te.current||(re=te.current)!=null&&re.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[i]),G.useEffect(()=>{if(te.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,se.current=!1)}},[te.current]),G.createElement("section",{ref:e,"aria-label":`${b} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((V,W)=>{var Y;let[re,ge]=V.split("-");return L.length?G.createElement("ol",{key:V,dir:v==="auto"?uO():v,tabIndex:-1,ref:te,className:a,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":re,"data-lifted":N&&L.length>1&&!s,"data-x-position":ge,style:{"--front-toast-height":`${((Y=A[0])==null?void 0:Y.height)||0}px`,"--width":`${Pte}px`,"--gap":`${E}px`,...m,...Fte(c,l)},onBlur:ne=>{se.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(se.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||se.current||(se.current=!0,j.current=ne.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{x||P(!1)},onDragEnd:()=>P(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},L.filter(ne=>!ne.position&&W===0||ne.position===V).map((ne,De)=>{var Pe,Ve;return G.createElement(Lte,{key:ne.id,icons:C,index:De,toast:ne,defaultRichColors:d,duration:(Pe=y==null?void 0:y.duration)!=null?Pe:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:w,closeButton:(Ve=y==null?void 0:y.closeButton)!=null?Ve:o,interacting:x,position:V,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:Ce,toasts:L.filter(Ye=>Ye.position==ne.position),heights:A.filter(Ye=>Ye.position==ne.position),setHeights:R,expandByDefault:s,gap:E,loadingIcon:T,expanded:N,pauseWhenPageIsHidden:M,swipeDirections:t.swipeDirections})})):null}))});const jte=({...t})=>{const{theme:e="system"}=ote();return p.jsx(Ute,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Vte=Kb[" useId ".trim().toString()]||(()=>{}),$te=0;function Zs(t){const[e,n]=g.useState(Vte());return oi(()=>{t||n(r=>r??String($te++))},[t]),t||(e?`radix-${e}`:"")}const Bte=["top","right","bottom","left"],wc=Math.min,pi=Math.max,Hv=Math.round,Gg=Math.floor,eo=t=>({x:t,y:t}),Hte={left:"right",right:"left",bottom:"top",top:"bottom"},zte={start:"end",end:"start"};function yI(t,e,n){return pi(t,wc(e,n))}function Zo(t,e){return typeof t=="function"?t(e):t}function ea(t){return t.split("-")[0]}function wh(t){return t.split("-")[1]}function ik(t){return t==="x"?"y":"x"}function sk(t){return t==="y"?"height":"width"}const Wte=new Set(["top","bottom"]);function Hs(t){return Wte.has(ea(t))?"y":"x"}function ok(t){return ik(Hs(t))}function Kte(t,e,n){n===void 0&&(n=!1);const r=wh(t),i=ok(t),s=sk(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=zv(o)),[o,zv(o)]}function qte(t){const e=zv(t);return[vI(t),e,vI(e)]}function vI(t){return t.replace(/start|end/g,e=>zte[e])}const dO=["left","right"],hO=["right","left"],Gte=["top","bottom"],Qte=["bottom","top"];function Yte(t,e,n){switch(t){case"top":case"bottom":return n?e?hO:dO:e?dO:hO;case"left":case"right":return e?Gte:Qte;default:return[]}}function Jte(t,e,n,r){const i=wh(t);let s=Yte(ea(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(vI)))),s}function zv(t){return t.replace(/left|right|bottom|top/g,e=>Hte[e])}function Xte(t){return{top:0,right:0,bottom:0,left:0,...t}}function K4(t){return typeof t!="number"?Xte(t):{top:t,right:t,bottom:t,left:t}}function Wv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function fO(t,e,n){let{reference:r,floating:i}=t;const s=Hs(e),o=ok(e),a=sk(o),c=ea(e),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(wh(e)){case"start":m[o]-=f*(n&&l?-1:1);break;case"end":m[o]+=f*(n&&l?-1:1);break}return m}const Zte=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=fO(l,r,c),f=r,m={},w=0;for(let y=0;y<a.length;y++){const{name:v,fn:E}=a[y],{x:T,y:C,data:b,reset:M}=await E({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:l,platform:o,elements:{reference:t,floating:e}});u=T??u,d=C??d,m={...m,[v]:{...m[v],...b}},M&&w<=50&&(w++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(l=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):M.rects),{x:u,y:d}=fO(l,f,c)),y=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:m}};async function Vp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=Zo(e,t),w=K4(m),v=a[f?d==="floating"?"reference":"floating":d],E=Wv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),T=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},M=Wv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:C,strategy:c}):T);return{top:(E.top-M.top+w.top)/b.y,bottom:(M.bottom-E.bottom+w.bottom)/b.y,left:(E.left-M.left+w.left)/b.x,right:(M.right-E.right+w.right)/b.x}}const ene=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=Zo(t,e)||{};if(l==null)return{};const d=K4(u),f={x:n,y:r},m=ok(i),w=sk(m),y=await o.getDimensions(l),v=m==="y",E=v?"top":"left",T=v?"bottom":"right",C=v?"clientHeight":"clientWidth",b=s.reference[w]+s.reference[m]-f[m]-s.floating[w],M=f[m]-s.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let k=L?L[C]:0;(!k||!await(o.isElement==null?void 0:o.isElement(L)))&&(k=a.floating[C]||s.floating[w]);const I=b/2-M/2,A=k/2-y[w]/2-1,R=wc(d[E],A),N=wc(d[T],A),P=R,x=k-y[w]-N,H=k/2-y[w]/2+I,z=yI(P,H,x),Q=!c.arrow&&wh(i)!=null&&H!==z&&s.reference[w]/2-(H<P?R:N)-y[w]/2<0,te=Q?H<P?H-P:H-x:0;return{[m]:f[m]+te,data:{[m]:z,centerOffset:H-z-te,...Q&&{alignmentOffset:te}},reset:Q}}}),tne=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...v}=Zo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=ea(i),T=Hs(a),C=ea(a)===a,b=await(c.isRTL==null?void 0:c.isRTL(l.floating)),M=f||(C||!y?[zv(a)]:qte(a)),L=w!=="none";!f&&L&&M.push(...Jte(a,y,w,b));const k=[a,...M],I=await Vp(e,v),A=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(I[E]),d){const H=Kte(i,o,b);A.push(I[H[0]],I[H[1]])}if(R=[...R,{placement:i,overflows:A}],!A.every(H=>H<=0)){var N,P;const H=(((N=s.flip)==null?void 0:N.index)||0)+1,z=k[H];if(z&&(!(d==="alignment"?T!==Hs(z):!1)||R.every(U=>U.overflows[0]>0&&Hs(U.placement)===T)))return{data:{index:H,overflows:R},reset:{placement:z}};let Q=(P=R.filter(te=>te.overflows[0]<=0).sort((te,U)=>te.overflows[1]-U.overflows[1])[0])==null?void 0:P.placement;if(!Q)switch(m){case"bestFit":{var x;const te=(x=R.filter(U=>{if(L){const j=Hs(U.placement);return j===T||j==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(j=>j>0).reduce((j,se)=>j+se,0)]).sort((U,j)=>U[1]-j[1])[0])==null?void 0:x[0];te&&(Q=te);break}case"initialPlacement":Q=a;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};function pO(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function mO(t){return Bte.some(e=>t[e]>=0)}const nne=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Zo(t,e);switch(r){case"referenceHidden":{const s=await Vp(e,{...i,elementContext:"reference"}),o=pO(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mO(o)}}}case"escaped":{const s=await Vp(e,{...i,altBoundary:!0}),o=pO(s,n.floating);return{data:{escapedOffsets:o,escaped:mO(o)}}}default:return{}}}}},q4=new Set(["left","top"]);async function rne(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ea(n),a=wh(n),c=Hs(n)==="y",l=q4.has(o)?-1:1,u=s&&c?-1:1,d=Zo(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:w}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof w=="number"&&(m=a==="end"?w*-1:w),c?{x:m*u,y:f*l}:{x:f*l,y:m*u}}const ine=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await rne(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},sne=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:E,y:T}=v;return{x:E,y:T}}},...c}=Zo(t,e),l={x:n,y:r},u=await Vp(e,c),d=Hs(ea(i)),f=ik(d);let m=l[f],w=l[d];if(s){const v=f==="y"?"top":"left",E=f==="y"?"bottom":"right",T=m+u[v],C=m-u[E];m=yI(T,m,C)}if(o){const v=d==="y"?"top":"left",E=d==="y"?"bottom":"right",T=w+u[v],C=w-u[E];w=yI(T,w,C)}const y=a.fn({...e,[f]:m,[d]:w});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:s,[d]:o}}}}}},one=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Zo(t,e),u={x:n,y:r},d=Hs(i),f=ik(d);let m=u[f],w=u[d];const y=Zo(a,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const C=f==="y"?"height":"width",b=s.reference[f]-s.floating[C]+v.mainAxis,M=s.reference[f]+s.reference[C]-v.mainAxis;m<b?m=b:m>M&&(m=M)}if(l){var E,T;const C=f==="y"?"width":"height",b=q4.has(ea(i)),M=s.reference[d]-s.floating[C]+(b&&((E=o.offset)==null?void 0:E[d])||0)+(b?0:v.crossAxis),L=s.reference[d]+s.reference[C]+(b?0:((T=o.offset)==null?void 0:T[d])||0)-(b?v.crossAxis:0);w<M?w=M:w>L&&(w=L)}return{[f]:m,[d]:w}}}},ane=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=Zo(t,e),u=await Vp(e,l),d=ea(i),f=wh(i),m=Hs(i)==="y",{width:w,height:y}=s.floating;let v,E;d==="top"||d==="bottom"?(v=d,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=d,v=f==="end"?"top":"bottom");const T=y-u.top-u.bottom,C=w-u.left-u.right,b=wc(y-u[v],T),M=wc(w-u[E],C),L=!e.middlewareData.shift;let k=b,I=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=T),L&&!f){const R=pi(u.left,0),N=pi(u.right,0),P=pi(u.top,0),x=pi(u.bottom,0);m?I=w-2*(R!==0||N!==0?R+N:pi(u.left,u.right)):k=y-2*(P!==0||x!==0?P+x:pi(u.top,u.bottom))}await c({...e,availableWidth:I,availableHeight:k});const A=await o.getDimensions(a.floating);return w!==A.width||y!==A.height?{reset:{rects:!0}}:{}}}};function Mw(){return typeof window<"u"}function Th(t){return G4(t)?(t.nodeName||"").toLowerCase():"#document"}function Ti(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yo(t){var e;return(e=(G4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function G4(t){return Mw()?t instanceof Node||t instanceof Ti(t).Node:!1}function _s(t){return Mw()?t instanceof Element||t instanceof Ti(t).Element:!1}function co(t){return Mw()?t instanceof HTMLElement||t instanceof Ti(t).HTMLElement:!1}function gO(t){return!Mw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ti(t).ShadowRoot}const cne=new Set(["inline","contents"]);function Rm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ws(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!cne.has(i)}const lne=new Set(["table","td","th"]);function une(t){return lne.has(Th(t))}const dne=[":popover-open",":modal"];function Dw(t){return dne.some(e=>{try{return t.matches(e)}catch{return!1}})}const hne=["transform","translate","scale","rotate","perspective"],fne=["transform","translate","scale","rotate","perspective","filter"],pne=["paint","layout","strict","content"];function ak(t){const e=ck(),n=_s(t)?ws(t):t;return hne.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||fne.some(r=>(n.willChange||"").includes(r))||pne.some(r=>(n.contain||"").includes(r))}function mne(t){let e=Tc(t);for(;co(e)&&!Dd(e);){if(ak(e))return e;if(Dw(e))return null;e=Tc(e)}return null}function ck(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gne=new Set(["html","body","#document"]);function Dd(t){return gne.has(Th(t))}function ws(t){return Ti(t).getComputedStyle(t)}function Lw(t){return _s(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Tc(t){if(Th(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gO(t)&&t.host||yo(t);return gO(e)?e.host:e}function Q4(t){const e=Tc(t);return Dd(e)?t.ownerDocument?t.ownerDocument.body:t.body:co(e)&&Rm(e)?e:Q4(e)}function $p(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Q4(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ti(i);if(s){const a=_I(o);return e.concat(o,o.visualViewport||[],Rm(i)?i:[],a&&n?$p(a):[])}return e.concat(i,$p(i,[],n))}function _I(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Y4(t){const e=ws(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=co(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Hv(n)!==s||Hv(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function lk(t){return _s(t)?t:t.contextElement}function od(t){const e=lk(t);if(!co(e))return eo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Y4(e);let o=(s?Hv(n.width):n.width)/r,a=(s?Hv(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const yne=eo(0);function J4(t){const e=Ti(t);return!ck()||!e.visualViewport?yne:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vne(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ti(t)?!1:e}function Bl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=lk(t);let o=eo(1);e&&(r?_s(r)&&(o=od(r)):o=od(t));const a=vne(s,n,r)?J4(s):eo(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=Ti(s),m=r&&_s(r)?Ti(r):r;let w=f,y=_I(w);for(;y&&r&&m!==w;){const v=od(y),E=y.getBoundingClientRect(),T=ws(y),C=E.left+(y.clientLeft+parseFloat(T.paddingLeft))*v.x,b=E.top+(y.clientTop+parseFloat(T.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=C,l+=b,w=Ti(y),y=_I(w)}}return Wv({width:u,height:d,x:c,y:l})}function uk(t,e){const n=Lw(t).scrollLeft;return e?e.left+n:Bl(yo(t)).left+n}function X4(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:uk(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function _ne(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=yo(r),a=e?Dw(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=eo(1);const u=eo(0),d=co(r);if((d||!d&&!s)&&((Th(r)!=="body"||Rm(o))&&(c=Lw(r)),co(r))){const m=Bl(r);l=od(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const f=o&&!d&&!s?X4(o,c,!0):eo(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function wne(t){return Array.from(t.getClientRects())}function Tne(t){const e=yo(t),n=Lw(t),r=t.ownerDocument.body,i=pi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=pi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+uk(t);const a=-n.scrollTop;return ws(r).direction==="rtl"&&(o+=pi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Ene(t,e){const n=Ti(t),r=yo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=ck();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}const Cne=new Set(["absolute","fixed"]);function Sne(t,e){const n=Bl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=co(t)?od(t):eo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function yO(t,e,n){let r;if(e==="viewport")r=Ene(t,n);else if(e==="document")r=Tne(yo(t));else if(_s(e))r=Sne(e,n);else{const i=J4(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Wv(r)}function Z4(t,e){const n=Tc(t);return n===e||!_s(n)||Dd(n)?!1:ws(n).position==="fixed"||Z4(n,e)}function Ine(t,e){const n=e.get(t);if(n)return n;let r=$p(t,[],!1).filter(a=>_s(a)&&Th(a)!=="body"),i=null;const s=ws(t).position==="fixed";let o=s?Tc(t):t;for(;_s(o)&&!Dd(o);){const a=ws(o),c=ak(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&Cne.has(i.position)||Rm(o)&&!c&&Z4(t,o))?r=r.filter(u=>u!==o):i=a,o=Tc(o)}return e.set(t,r),r}function bne(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Dw(e)?[]:Ine(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=yO(e,u,i);return l.top=pi(d.top,l.top),l.right=wc(d.right,l.right),l.bottom=wc(d.bottom,l.bottom),l.left=pi(d.left,l.left),l},yO(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ane(t){const{width:e,height:n}=Y4(t);return{width:e,height:n}}function kne(t,e,n){const r=co(e),i=yo(e),s=n==="fixed",o=Bl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=eo(0);function l(){c.x=uk(i)}if(r||!r&&!s)if((Th(e)!=="body"||Rm(i))&&(a=Lw(e)),r){const m=Bl(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&l();s&&!r&&i&&l();const u=i&&!r&&!s?X4(i,a):eo(0),d=o.left+a.scrollLeft-c.x-u.x,f=o.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function ZE(t){return ws(t).position==="static"}function vO(t,e){if(!co(t)||ws(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yo(t)===n&&(n=n.ownerDocument.body),n}function e$(t,e){const n=Ti(t);if(Dw(t))return n;if(!co(t)){let i=Tc(t);for(;i&&!Dd(i);){if(_s(i)&&!ZE(i))return i;i=Tc(i)}return n}let r=vO(t,e);for(;r&&une(r)&&ZE(r);)r=vO(r,e);return r&&Dd(r)&&ZE(r)&&!ak(r)?n:r||mne(t)||n}const xne=async function(t){const e=this.getOffsetParent||e$,n=this.getDimensions,r=await n(t.floating);return{reference:kne(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rne(t){return ws(t).direction==="rtl"}const Pne={convertOffsetParentRelativeRectToViewportRelativeRect:_ne,getDocumentElement:yo,getClippingRect:bne,getOffsetParent:e$,getElementRects:xne,getClientRects:wne,getDimensions:Ane,getScale:od,isElement:_s,isRTL:Rne};function t$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Nne(t,e){let n=null,r;const i=yo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=t.getBoundingClientRect(),{left:u,top:d,width:f,height:m}=l;if(a||e(),!f||!m)return;const w=Gg(d),y=Gg(i.clientWidth-(u+f)),v=Gg(i.clientHeight-(d+m)),E=Gg(u),C={rootMargin:-w+"px "+-y+"px "+-v+"px "+-E+"px",threshold:pi(0,wc(1,c))||1};let b=!0;function M(L){const k=L[0].intersectionRatio;if(k!==c){if(!b)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!t$(l,t.getBoundingClientRect())&&o(),b=!1}try{n=new IntersectionObserver(M,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,C)}n.observe(t)}return o(!0),s}function One(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=lk(t),u=i||s?[...l?$p(l):[],...$p(e)]:[];u.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const d=l&&a?Nne(l,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(E=>{let[T]=E;T&&T.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),n()}),l&&!c&&m.observe(l),m.observe(e));let w,y=c?Bl(t):null;c&&v();function v(){const E=Bl(t);y&&!t$(y,E)&&n(),y=E,w=requestAnimationFrame(v)}return n(),()=>{var E;u.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),d==null||d(),(E=m)==null||E.disconnect(),m=null,c&&cancelAnimationFrame(w)}}const Mne=ine,Dne=sne,Lne=tne,Fne=ane,Une=nne,_O=ene,jne=one,Vne=(t,e,n)=>{const r=new Map,i={platform:Pne,...n},s={...i.platform,_c:r};return Zte(t,e,{...i,platform:s})};var $ne=typeof document<"u",Bne=function(){},Ay=$ne?g.useLayoutEffect:Bne;function Kv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Kv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function n$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wO(t,e){const n=n$(t);return Math.round(e*n)/n}function eC(t){const e=g.useRef(t);return Ay(()=>{e.current=t}),e}function Hne(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=g.useState(r);Kv(f,r)||m(r);const[w,y]=g.useState(null),[v,E]=g.useState(null),T=g.useCallback(U=>{U!==L.current&&(L.current=U,y(U))},[]),C=g.useCallback(U=>{U!==k.current&&(k.current=U,E(U))},[]),b=s||w,M=o||v,L=g.useRef(null),k=g.useRef(null),I=g.useRef(u),A=c!=null,R=eC(c),N=eC(i),P=eC(l),x=g.useCallback(()=>{if(!L.current||!k.current)return;const U={placement:e,strategy:n,middleware:f};N.current&&(U.platform=N.current),Vne(L.current,k.current,U).then(j=>{const se={...j,isPositioned:P.current!==!1};H.current&&!Kv(I.current,se)&&(I.current=se,Sm.flushSync(()=>{d(se)}))})},[f,e,n,N,P]);Ay(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[l]);const H=g.useRef(!1);Ay(()=>(H.current=!0,()=>{H.current=!1}),[]),Ay(()=>{if(b&&(L.current=b),M&&(k.current=M),b&&M){if(R.current)return R.current(b,M,x);x()}},[b,M,x,R,A]);const z=g.useMemo(()=>({reference:L,floating:k,setReference:T,setFloating:C}),[T,C]),Q=g.useMemo(()=>({reference:b,floating:M}),[b,M]),te=g.useMemo(()=>{const U={position:n,left:0,top:0};if(!Q.floating)return U;const j=wO(Q.floating,u.x),se=wO(Q.floating,u.y);return a?{...U,transform:"translate("+j+"px, "+se+"px)",...n$(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:se}},[n,a,Q.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:x,refs:z,elements:Q,floatingStyles:te}),[u,x,z,Q,te])}const zne=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?_O({element:r.current,padding:i}).fn(n):{}:r?_O({element:r,padding:i}).fn(n):{}}}},Wne=(t,e)=>({...Mne(t),options:[t,e]}),Kne=(t,e)=>({...Dne(t),options:[t,e]}),qne=(t,e)=>({...jne(t),options:[t,e]}),Gne=(t,e)=>({...Lne(t),options:[t,e]}),Qne=(t,e)=>({...Fne(t),options:[t,e]}),Yne=(t,e)=>({...Une(t),options:[t,e]}),Jne=(t,e)=>({...zne(t),options:[t,e]});var Xne="Arrow",r$=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(je.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});r$.displayName=Xne;var Zne=r$;function ere(t){const[e,n]=g.useState(void 0);return oi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var dk="Popper",[i$,Eh]=ai(dk),[tre,s$]=i$(dk),o$=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return p.jsx(tre,{scope:e,anchor:r,onAnchorChange:i,children:n})};o$.displayName=dk;var a$="PopperAnchor",c$=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=s$(a$,n),o=g.useRef(null),a=Ct(e,o);return g.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(je.div,{...i,ref:a})});c$.displayName=a$;var hk="PopperContent",[nre,rre]=i$(hk),l$=g.forwardRef((t,e)=>{var ne,De,Pe,Ve,Ye,it;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:w,...y}=t,v=s$(hk,n),[E,T]=g.useState(null),C=Ct(e,gt=>T(gt)),[b,M]=g.useState(null),L=ere(b),k=(L==null?void 0:L.width)??0,I=(L==null?void 0:L.height)??0,A=r+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(l)?l:[l],P=N.length>0,x={padding:R,boundary:N.filter(sre),altBoundary:P},{refs:H,floatingStyles:z,placement:Q,isPositioned:te,middlewareData:U}=Hne({strategy:"fixed",placement:A,whileElementsMounted:(...gt)=>One(...gt,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[Wne({mainAxis:i+I,alignmentAxis:o}),c&&Kne({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?qne():void 0,...x}),c&&Gne({...x}),Qne({...x,apply:({elements:gt,rects:Ie,availableWidth:Ne,availableHeight:Rt})=>{const{width:Gt,height:Qt}=Ie.reference,Ze=gt.floating.style;Ze.setProperty("--radix-popper-available-width",`${Ne}px`),Ze.setProperty("--radix-popper-available-height",`${Rt}px`),Ze.setProperty("--radix-popper-anchor-width",`${Gt}px`),Ze.setProperty("--radix-popper-anchor-height",`${Qt}px`)}}),b&&Jne({element:b,padding:a}),ore({arrowWidth:k,arrowHeight:I}),f&&Yne({strategy:"referenceHidden",...x})]}),[j,se]=h$(Q),Ce=mn(w);oi(()=>{te&&(Ce==null||Ce())},[te,Ce]);const V=(ne=U.arrow)==null?void 0:ne.x,W=(De=U.arrow)==null?void 0:De.y,Y=((Pe=U.arrow)==null?void 0:Pe.centerOffset)!==0,[re,ge]=g.useState();return oi(()=>{E&&ge(window.getComputedStyle(E).zIndex)},[E]),p.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:te?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(Ve=U.transformOrigin)==null?void 0:Ve.x,(Ye=U.transformOrigin)==null?void 0:Ye.y].join(" "),...((it=U.hide)==null?void 0:it.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(nre,{scope:n,placedSide:j,onArrowChange:M,arrowX:V,arrowY:W,shouldHideArrow:Y,children:p.jsx(je.div,{"data-side":j,"data-align":se,...y,ref:C,style:{...y.style,animation:te?void 0:"none"}})})})});l$.displayName=hk;var u$="PopperArrow",ire={top:"bottom",right:"left",bottom:"top",left:"right"},d$=g.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=rre(u$,r),o=ire[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(Zne,{...i,ref:n,style:{...i.style,display:"block"}})})});d$.displayName=u$;function sre(t){return t!==null}var ore=t=>({name:"transformOrigin",options:t,fn(e){var v,E,T;const{placement:n,rects:r,middlewareData:i}=e,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[l,u]=h$(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((E=i.arrow)==null?void 0:E.x)??0)+a/2,m=(((T=i.arrow)==null?void 0:T.y)??0)+c/2;let w="",y="";return l==="bottom"?(w=o?d:`${f}px`,y=`${-c}px`):l==="top"?(w=o?d:`${f}px`,y=`${r.floating.height+c}px`):l==="right"?(w=`${-c}px`,y=o?d:`${m}px`):l==="left"&&(w=`${r.floating.width+c}px`,y=o?d:`${m}px`),{data:{x:w,y}}}});function h$(t){const[e,n="center"]=t.split("-");return[e,n]}var fk=o$,Fw=c$,pk=l$,mk=d$,[Uw,RIe]=ai("Tooltip",[Eh]),jw=Eh(),f$="TooltipProvider",are=700,wI="tooltip.open",[cre,gk]=Uw(f$),p$=t=>{const{__scopeTooltip:e,delayDuration:n=are,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=g.useRef(!0),a=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),p.jsx(cre,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:g.useCallback(l=>{a.current=l},[]),disableHoverableContent:i,children:s})};p$.displayName=f$;var Bp="Tooltip",[lre,Vw]=Uw(Bp),m$=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=gk(Bp,t.__scopeTooltip),l=jw(e),[u,d]=g.useState(null),f=Zs(),m=g.useRef(0),w=o??c.disableHoverableContent,y=a??c.delayDuration,v=g.useRef(!1),[E,T]=Fc({prop:r,defaultProp:i??!1,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(wI))):c.onClose(),s==null||s(k)},caller:Bp}),C=g.useMemo(()=>E?v.current?"delayed-open":"instant-open":"closed",[E]),b=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,T(!0)},[T]),M=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,T(!1)},[T]),L=g.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,T(!0),m.current=0},y)},[y,T]);return g.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(fk,{...l,children:p.jsx(lre,{scope:e,contentId:f,open:E,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?L():b()},[c.isOpenDelayedRef,L,b]),onTriggerLeave:g.useCallback(()=>{w?M():(window.clearTimeout(m.current),m.current=0)},[M,w]),onOpen:b,onClose:M,disableHoverableContent:w,children:n})})};m$.displayName=Bp;var TI="TooltipTrigger",g$=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Vw(TI,n),s=gk(TI,n),o=jw(n),a=g.useRef(null),c=Ct(e,a,i.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(Fw,{asChild:!0,...o,children:p.jsx(je.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:we(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:we(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:we(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:we(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:we(t.onBlur,i.onClose),onClick:we(t.onClick,i.onClose)})})});g$.displayName=TI;var ure="TooltipPortal",[PIe,dre]=Uw(ure,{forceMount:void 0}),Ld="TooltipContent",y$=g.forwardRef((t,e)=>{const n=dre(Ld,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Vw(Ld,t.__scopeTooltip);return p.jsx(zn,{present:r||o.open,children:o.disableHoverableContent?p.jsx(v$,{side:i,...s,ref:e}):p.jsx(hre,{side:i,...s,ref:e})})}),hre=g.forwardRef((t,e)=>{const n=Vw(Ld,t.__scopeTooltip),r=gk(Ld,t.__scopeTooltip),i=g.useRef(null),s=Ct(e,i),[o,a]=g.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:d}=r,f=g.useCallback(()=>{a(null),d(!1)},[d]),m=g.useCallback((w,y)=>{const v=w.currentTarget,E={x:w.clientX,y:w.clientY},T=yre(E,v.getBoundingClientRect()),C=vre(E,T),b=_re(y.getBoundingClientRect()),M=Tre([...C,...b]);a(M),d(!0)},[d]);return g.useEffect(()=>()=>f(),[f]),g.useEffect(()=>{if(c&&u){const w=v=>m(v,u),y=v=>m(v,c);return c.addEventListener("pointerleave",w),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",y)}}},[c,u,m,f]),g.useEffect(()=>{if(o){const w=y=>{const v=y.target,E={x:y.clientX,y:y.clientY},T=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),C=!wre(E,o);T?f():C&&(f(),l())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,u,o,l,f]),p.jsx(v$,{...t,ref:s})}),[fre,pre]=Uw(Bp,{isInside:!1}),mre=gX("TooltipContent"),v$=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=Vw(Ld,n),l=jw(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(wI,u),()=>document.removeEventListener(wI,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(yh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(pk,{"data-state":c.stateAttribute,...l,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(mre,{children:r}),p.jsx(fre,{scope:n,isInside:!0,children:p.jsx(jX,{id:c.contentId,role:"tooltip",children:i||r})})]})})});y$.displayName=Ld;var _$="TooltipArrow",gre=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=jw(n);return pre(_$,n).isInside?null:p.jsx(mk,{...i,...r,ref:e})});gre.displayName=_$;function yre(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vre(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function _re(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function wre(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,f=c.y;u>r!=f>r&&n<(d-l)*(r-u)/(f-u)+l&&(i=!i)}return i}function Tre(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Ere(e)}function Ere(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Cre=p$,Sre=m$,Ire=g$,w$=y$;const T$=Cre,bre=Sre,Are=Ire,E$=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(w$,{ref:r,sideOffset:e,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));E$.displayName=w$.displayName;var $w=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bw=typeof window>"u"||"Deno"in globalThis;function Zi(){}function kre(t,e){return typeof t=="function"?t(e):t}function xre(t){return typeof t=="number"&&t>=0&&t!==1/0}function Rre(t,e){return Math.max(t+(e||0)-Date.now(),0)}function EI(t,e){return typeof t=="function"?t(e):t}function Pre(t,e){return typeof t=="function"?t(e):t}function TO(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==yk(o,e.options))return!1}else if(!zp(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function EO(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Hp(e.options.mutationKey)!==Hp(s))return!1}else if(!zp(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function yk(t,e){return((e==null?void 0:e.queryKeyHashFn)||Hp)(t)}function Hp(t){return JSON.stringify(t,(e,n)=>CI(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function zp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>zp(t[n],e[n])):!1}function C$(t,e){if(t===e)return t;const n=CO(t)&&CO(e);if(n||CI(t)&&CI(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:s[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=C$(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return i===o&&l===i?t:a}return e}function CO(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function CI(t){if(!SO(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!SO(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function SO(t){return Object.prototype.toString.call(t)==="[object Object]"}function Nre(t){return new Promise(e=>{setTimeout(e,t)})}function Ore(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?C$(t,e):e}function Mre(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Dre(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var vk=Symbol();function S$(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===vk?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var _l,ja,gd,p2,Lre=(p2=class extends $w{constructor(){super();vt(this,_l);vt(this,ja);vt(this,gd);Qe(this,gd,e=>{if(!Bw&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,ja)||this.setEventListener(Z(this,gd))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,ja))==null||e.call(this),Qe(this,ja,void 0))}setEventListener(e){var n;Qe(this,gd,e),(n=Z(this,ja))==null||n.call(this),Qe(this,ja,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Z(this,_l)!==e&&(Qe(this,_l,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Z(this,_l)=="boolean"?Z(this,_l):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},_l=new WeakMap,ja=new WeakMap,gd=new WeakMap,p2),I$=new Lre,yd,Va,vd,m2,Fre=(m2=class extends $w{constructor(){super();vt(this,yd,!0);vt(this,Va);vt(this,vd);Qe(this,vd,e=>{if(!Bw&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Z(this,Va)||this.setEventListener(Z(this,vd))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,Va))==null||e.call(this),Qe(this,Va,void 0))}setEventListener(e){var n;Qe(this,vd,e),(n=Z(this,Va))==null||n.call(this),Qe(this,Va,e(this.setOnline.bind(this)))}setOnline(e){Z(this,yd)!==e&&(Qe(this,yd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Z(this,yd)}},yd=new WeakMap,Va=new WeakMap,vd=new WeakMap,m2),qv=new Fre;function Ure(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function jre(t){return Math.min(1e3*2**t,3e4)}function b$(t){return(t??"online")==="online"?qv.isOnline():!0}var A$=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tC(t){return t instanceof A$}function k$(t){let e=!1,n=0,r=!1,i;const s=Ure(),o=y=>{var v;r||(f(new A$(y)),(v=t.abort)==null||v.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>I$.isFocused()&&(t.networkMode==="always"||qv.isOnline())&&t.canRun(),u=()=>b$(t.networkMode)&&t.canRun(),d=y=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,y),i==null||i(),s.resolve(y))},f=y=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,y),i==null||i(),s.reject(y))},m=()=>new Promise(y=>{var v;i=E=>{(r||l())&&y(E)},(v=t.onPause)==null||v.call(t)}).then(()=>{var y;i=void 0,r||(y=t.onContinue)==null||y.call(t)}),w=()=>{if(r)return;let y;const v=n===0?t.initialPromise:void 0;try{y=v??t.fn()}catch(E){y=Promise.reject(E)}Promise.resolve(y).then(d).catch(E=>{var L;if(r)return;const T=t.retry??(Bw?0:3),C=t.retryDelay??jre,b=typeof C=="function"?C(n,E):C,M=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,E);if(e||!M){f(E);return}n++,(L=t.onFail)==null||L.call(t,n,E),Nre(b).then(()=>l()?void 0:m()).then(()=>{e?f(E):w()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?w():m().then(w),s)}}var Vre=t=>setTimeout(t,0);function $re(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Vre;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Ar=$re(),wl,g2,x$=(g2=class{constructor(){vt(this,wl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xre(this.gcTime)&&Qe(this,wl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Bw?1/0:5*60*1e3))}clearGcTimeout(){Z(this,wl)&&(clearTimeout(Z(this,wl)),Qe(this,wl,void 0))}},wl=new WeakMap,g2),_d,Tl,Ni,El,dr,ym,Cl,es,bo,y2,Bre=(y2=class extends x${constructor(n){super();vt(this,es);vt(this,_d);vt(this,Tl);vt(this,Ni);vt(this,El);vt(this,dr);vt(this,ym);vt(this,Cl);Qe(this,Cl,!1),Qe(this,ym,n.defaultOptions),this.setOptions(n.options),this.observers=[],Qe(this,El,n.client),Qe(this,Ni,Z(this,El).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Qe(this,_d,zre(this.options)),this.state=n.state??Z(this,_d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Z(this,dr))==null?void 0:n.promise}setOptions(n){this.options={...Z(this,ym),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,Ni).remove(this)}setData(n,r){const i=Ore(this.state.data,n,this.options);return ar(this,es,bo).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){ar(this,es,bo).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=Z(this,dr))==null?void 0:i.promise;return(s=Z(this,dr))==null||s.cancel(n),r?r.then(Zi).catch(Zi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,_d))}isActive(){return this.observers.some(n=>Pre(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>EI(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Rre(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,dr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,dr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Z(this,Ni).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Z(this,dr)&&(Z(this,Cl)?Z(this,dr).cancel({revert:!0}):Z(this,dr).cancelRetry()),this.scheduleGc()),Z(this,Ni).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ar(this,es,bo).call(this,{type:"invalidate"})}fetch(n,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Z(this,dr))return Z(this,dr).continueRetry(),Z(this,dr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(w=>w.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Qe(this,Cl,!0),i.signal)})},o=()=>{const m=S$(this.options,r),y=(()=>{const v={client:Z(this,El),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return Qe(this,Cl,!1),this.options.persister?this.options.persister(m,y,this):m(y)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Z(this,El),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(c,this),Qe(this,Tl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&ar(this,es,bo).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const l=m=>{var w,y,v,E;tC(m)&&m.silent||ar(this,es,bo).call(this,{type:"error",error:m}),tC(m)||((y=(w=Z(this,Ni).config).onError)==null||y.call(w,m,this),(E=(v=Z(this,Ni).config).onSettled)==null||E.call(v,this.state.data,m,this)),this.scheduleGc()};return Qe(this,dr,k$({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var w,y,v,E;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(T){l(T);return}(y=(w=Z(this,Ni).config).onSuccess)==null||y.call(w,m,this),(E=(v=Z(this,Ni).config).onSettled)==null||E.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,w)=>{ar(this,es,bo).call(this,{type:"failed",failureCount:m,error:w})},onPause:()=>{ar(this,es,bo).call(this,{type:"pause"})},onContinue:()=>{ar(this,es,bo).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Z(this,dr).start()}},_d=new WeakMap,Tl=new WeakMap,Ni=new WeakMap,El=new WeakMap,dr=new WeakMap,ym=new WeakMap,Cl=new WeakMap,es=new WeakSet,bo=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Hre(i.data,this.options),fetchMeta:n.meta??null};case"success":return Qe(this,Tl,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=n.error;return tC(s)&&s.revert&&Z(this,Tl)?{...Z(this,Tl),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Ar.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Z(this,Ni).notify({query:this,type:"updated",action:n})})},y2);function Hre(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:b$(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zre(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ls,v2,Wre=(v2=class extends $w{constructor(e={}){super();vt(this,Ls);this.config=e,Qe(this,Ls,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??yk(i,n);let o=this.get(s);return o||(o=new Bre({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Z(this,Ls).has(e.queryHash)||(Z(this,Ls).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Z(this,Ls).get(e.queryHash);n&&(e.destroy(),n===e&&Z(this,Ls).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ar.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Z(this,Ls).get(e)}getAll(){return[...Z(this,Ls).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>TO(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>TO(e,r)):n}notify(e){Ar.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ar.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ar.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ls=new WeakMap,v2),Fs,Er,Sl,Us,Ia,_2,Kre=(_2=class extends x${constructor(n){super();vt(this,Us);vt(this,Fs);vt(this,Er);vt(this,Sl);this.mutationId=n.mutationId,Qe(this,Er,n.mutationCache),Qe(this,Fs,[]),this.state=n.state||qre(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Z(this,Fs).includes(n)||(Z(this,Fs).push(n),this.clearGcTimeout(),Z(this,Er).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Qe(this,Fs,Z(this,Fs).filter(r=>r!==n)),this.scheduleGc(),Z(this,Er).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Z(this,Fs).length||(this.state.status==="pending"?this.scheduleGc():Z(this,Er).remove(this))}continue(){var n;return((n=Z(this,Sl))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,c,l,u,d,f,m,w,y,v,E,T,C,b,M,L,k,I,A;const r=()=>{ar(this,Us,Ia).call(this,{type:"continue"})};Qe(this,Sl,k$({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(R,N)=>{ar(this,Us,Ia).call(this,{type:"failed",failureCount:R,error:N})},onPause:()=>{ar(this,Us,Ia).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,Er).canRun(this)}));const i=this.state.status==="pending",s=!Z(this,Sl).canStart();try{if(i)r();else{ar(this,Us,Ia).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(o=Z(this,Er).config).onMutate)==null?void 0:a.call(o,n,this));const N=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,n));N!==this.state.context&&ar(this,Us,Ia).call(this,{type:"pending",context:N,variables:n,isPaused:s})}const R=await Z(this,Sl).start();return await((d=(u=Z(this,Er).config).onSuccess)==null?void 0:d.call(u,R,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,R,n,this.state.context)),await((y=(w=Z(this,Er).config).onSettled)==null?void 0:y.call(w,R,null,this.state.variables,this.state.context,this)),await((E=(v=this.options).onSettled)==null?void 0:E.call(v,R,null,n,this.state.context)),ar(this,Us,Ia).call(this,{type:"success",data:R}),R}catch(R){try{throw await((C=(T=Z(this,Er).config).onError)==null?void 0:C.call(T,R,n,this.state.context,this)),await((M=(b=this.options).onError)==null?void 0:M.call(b,R,n,this.state.context)),await((k=(L=Z(this,Er).config).onSettled)==null?void 0:k.call(L,void 0,R,this.state.variables,this.state.context,this)),await((A=(I=this.options).onSettled)==null?void 0:A.call(I,void 0,R,n,this.state.context)),R}finally{ar(this,Us,Ia).call(this,{type:"error",error:R})}}finally{Z(this,Er).runNext(this)}}},Fs=new WeakMap,Er=new WeakMap,Sl=new WeakMap,Us=new WeakSet,Ia=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ar.batch(()=>{Z(this,Fs).forEach(i=>{i.onMutationUpdate(n)}),Z(this,Er).notify({mutation:this,type:"updated",action:n})})},_2);function qre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var No,ts,vm,w2,Gre=(w2=class extends $w{constructor(e={}){super();vt(this,No);vt(this,ts);vt(this,vm);this.config=e,Qe(this,No,new Set),Qe(this,ts,new Map),Qe(this,vm,0)}build(e,n,r){const i=new Kre({mutationCache:this,mutationId:++wg(this,vm)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){Z(this,No).add(e);const n=Qg(e);if(typeof n=="string"){const r=Z(this,ts).get(n);r?r.push(e):Z(this,ts).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Z(this,No).delete(e)){const n=Qg(e);if(typeof n=="string"){const r=Z(this,ts).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Z(this,ts).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Qg(e);if(typeof n=="string"){const r=Z(this,ts).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Qg(e);if(typeof n=="string"){const i=(r=Z(this,ts).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ar.batch(()=>{Z(this,No).forEach(e=>{this.notify({type:"removed",mutation:e})}),Z(this,No).clear(),Z(this,ts).clear()})}getAll(){return Array.from(Z(this,No))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>EO(n,r))}findAll(e={}){return this.getAll().filter(n=>EO(e,n))}notify(e){Ar.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ar.batch(()=>Promise.all(e.map(n=>n.continue().catch(Zi))))}},No=new WeakMap,ts=new WeakMap,vm=new WeakMap,w2);function Qg(t){var e;return(e=t.options.scope)==null?void 0:e.id}function IO(t){return{onFetch:(e,n)=>{var u,d,f,m,w;const r=e.options,i=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let y=!1;const v=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},E=S$(e.options,e.fetchOptions),T=async(C,b,M)=>{if(y)return Promise.reject();if(b==null&&C.pages.length)return Promise.resolve(C);const k=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:b,direction:M?"backward":"forward",meta:e.options.meta};return v(N),N})(),I=await E(k),{maxPages:A}=e.options,R=M?Dre:Mre;return{pages:R(C.pages,I,A),pageParams:R(C.pageParams,b,A)}};if(i&&s.length){const C=i==="backward",b=C?Qre:bO,M={pages:s,pageParams:o},L=b(r,M);a=await T(M,L,C)}else{const C=t??s.length;do{const b=c===0?o[0]??r.initialPageParam:bO(r,a);if(c>0&&b==null)break;a=await T(a,b),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var y,v;return(v=(y=e.options).persister)==null?void 0:v.call(y,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function bO(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Qre(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var rn,$a,Ba,wd,Td,Ha,Ed,Cd,T2,Yre=(T2=class{constructor(t={}){vt(this,rn);vt(this,$a);vt(this,Ba);vt(this,wd);vt(this,Td);vt(this,Ha);vt(this,Ed);vt(this,Cd);Qe(this,rn,t.queryCache||new Wre),Qe(this,$a,t.mutationCache||new Gre),Qe(this,Ba,t.defaultOptions||{}),Qe(this,wd,new Map),Qe(this,Td,new Map),Qe(this,Ha,0)}mount(){wg(this,Ha)._++,Z(this,Ha)===1&&(Qe(this,Ed,I$.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,rn).onFocus())})),Qe(this,Cd,qv.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,rn).onOnline())})))}unmount(){var t,e;wg(this,Ha)._--,Z(this,Ha)===0&&((t=Z(this,Ed))==null||t.call(this),Qe(this,Ed,void 0),(e=Z(this,Cd))==null||e.call(this),Qe(this,Cd,void 0))}isFetching(t){return Z(this,rn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Z(this,$a).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,rn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Z(this,rn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(EI(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Z(this,rn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=Z(this,rn).get(r.queryHash),s=i==null?void 0:i.state.data,o=kre(e,s);if(o!==void 0)return Z(this,rn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ar.batch(()=>Z(this,rn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,rn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Z(this,rn);Ar.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Z(this,rn);return Ar.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ar.batch(()=>Z(this,rn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Zi).catch(Zi)}invalidateQueries(t,e={}){return Ar.batch(()=>(Z(this,rn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ar.batch(()=>Z(this,rn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Zi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Zi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Z(this,rn).build(this,e);return n.isStaleByTime(EI(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zi).catch(Zi)}fetchInfiniteQuery(t){return t.behavior=IO(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zi).catch(Zi)}ensureInfiniteQueryData(t){return t.behavior=IO(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qv.isOnline()?Z(this,$a).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,rn)}getMutationCache(){return Z(this,$a)}getDefaultOptions(){return Z(this,Ba)}setDefaultOptions(t){Qe(this,Ba,t)}setQueryDefaults(t,e){Z(this,wd).set(Hp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Z(this,wd).values()],n={};return e.forEach(r=>{zp(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Z(this,Td).set(Hp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Z(this,Td).values()],n={};return e.forEach(r=>{zp(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Z(this,Ba).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=yk(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===vk&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Z(this,Ba).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Z(this,rn).clear(),Z(this,$a).clear()}},rn=new WeakMap,$a=new WeakMap,Ba=new WeakMap,wd=new WeakMap,Td=new WeakMap,Ha=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,T2),Jre=g.createContext(void 0),Xre=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(Jre.Provider,{value:t,children:e}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var Hl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Hl||(Hl={}));class ky extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Zre=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},eie=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:Zre(t),s=()=>i()!=="web",o=d=>{const f=l.get(d);return!!(f!=null&&f.platforms.has(i())||a(d))},a=d=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===d)},c=d=>t.console.error(d),l=new Map,u=(d,f={})=>{const m=l.get(d);if(m)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),m.proxy;const w=i(),y=a(d);let v;const E=async()=>(!v&&w in f?v=typeof f[w]=="function"?v=await f[w]():v=f[w]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),T=(I,A)=>{var R,N;if(y){const P=y==null?void 0:y.methods.find(x=>A===x.name);if(P)return P.rtype==="promise"?x=>n.nativePromise(d,A.toString(),x):(x,H)=>n.nativeCallback(d,A.toString(),x,H);if(I)return(R=I[A])===null||R===void 0?void 0:R.bind(I)}else{if(I)return(N=I[A])===null||N===void 0?void 0:N.bind(I);throw new ky(`"${d}" plugin is not implemented on ${w}`,Hl.Unimplemented)}},C=I=>{let A;const R=(...N)=>{const P=E().then(x=>{const H=T(x,I);if(H){const z=H(...N);return A=z==null?void 0:z.remove,z}else throw new ky(`"${d}.${I}()" is not implemented on ${w}`,Hl.Unimplemented)});return I==="addListener"&&(P.remove=async()=>A()),P};return R.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(R,"name",{value:I,writable:!1,configurable:!1}),R},b=C("addListener"),M=C("removeListener"),L=(I,A)=>{const R=b({eventName:I},A),N=async()=>{const x=await R;M({eventName:I,callbackId:x},A)},P=new Promise(x=>R.then(()=>x({remove:N})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},P},k=new Proxy({},{get(I,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?L:b;case"removeListener":return M;default:return C(A)}}});return r[d]=k,l.set(d,{name:d,proxy:k,platforms:new Set([...Object.keys(f),...y?[w]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=i,n.handleError=c,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=u,n.Exception=ky,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},tie=t=>t.Capacitor=eie(t),Jt=tie(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ch=Jt.registerPlugin;class _k{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Jt.Exception(e,Hl.Unimplemented)}unavailable(e="not available"){return new Jt.Exception(e,Hl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const AO=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),kO=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nie extends _k{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=kO(i).trim(),s=kO(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=AO(e.key),r=AO(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ch("CapacitorCookies",{web:()=>new nie});const rie=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),iie=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},sie=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,c;return Array.isArray(o)?(c="",o.forEach(l=>{a=e?encodeURIComponent(l):l,c+=`${s}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${s}=${a}`),`${r}&${c}`},"").substr(1):null,R$=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=iie(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{s.append(c,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class oie extends _k{async request(e){const n=R$(e,e.webFetchExtra),r=sie(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await s.blob(),c=await rie(l);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const u={};return s.headers.forEach((d,f)=>{u[f]=d}),{data:c,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ch("CapacitorHttp",{web:()=>new oie});const MIe=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Jt,CapacitorException:ky,get ExceptionCode(){return Hl},WebPlugin:_k,buildRequestInit:R$,registerPlugin:Ch},Symbol.toStringTag,{value:"Module"})),Pi=Ch("PushNotifications",{});var SI;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(SI||(SI={}));const sn=Ch("LocalNotifications",{web:()=>qt(()=>import("./web-DQ2tZVFc.js"),[]).then(t=>new t.LocalNotificationsWeb)}),aie=Object.freeze(Object.defineProperty({__proto__:null,LocalNotifications:sn,get Weekday(){return SI}},Symbol.toStringTag,{value:"Module"})),cie=()=>{};var xO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(t,e){if(!t)throw Sh(e)},Sh=function(t){return new Error("Firebase Database ("+P$.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lie=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(f=64)),r.push(n[u],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(N$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new uie;const f=s<<2|a>>4;if(r.push(f),l!==64){const m=a<<4&240|l>>2;if(r.push(m),d!==64){const w=l<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O$=function(t){const e=N$(t);return wk.encodeByteArray(e,!0)},Gv=function(t){return O$(t).replace(/\./g,"")},Qv=function(t){try{return wk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function die(t){return M$(void 0,t)}function M$(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!hie(n)||(t[n]=M$(t[n],e[n]));return t}function hie(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pie=()=>fie().__FIREBASE_DEFAULTS__,mie=()=>{if(typeof process>"u"||typeof xO>"u")return;const t=xO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qv(t[1]);return e&&JSON.parse(e)},Hw=()=>{try{return cie()||pie()||mie()||gie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D$=t=>{var e,n;return(n=(e=Hw())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zw=t=>{const e=D$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},L$=()=>{var t;return(t=Hw())==null?void 0:t.config},F$=t=>{var e;return(e=Hw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gv(JSON.stringify(n)),Gv(JSON.stringify(o)),""].join(".")}const Gf={};function yie(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gf))Gf[e]?t.emulator.push(e):t.prod.push(e);return t}function vie(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let RO=!1;function Om(t,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||Gf[t]===e||Gf[t]||RO)return;Gf[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=yie().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{RO=!0,o()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=vie(r),m=n("text"),w=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),v=document.getElementById(y)||document.createElement("a"),E=n("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;a(C),u(v,y);const b=l();c(T,E),C.append(T,w,v,b),document.body.appendChild(C)}s?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ek(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function _ie(){var e;const t=(e=Hw())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wie(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tie(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function V$(){return P$.NODE_ADMIN===!0}function Eie(){return!_ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ck(){try{return typeof indexedDB=="object"}catch{return!1}}function Sk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function $$(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cie="FirebaseError";class ki extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Cie,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uc.prototype.create)}}class Uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Sie(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ki(i,a,r)}}function Sie(t,e){return t.replace(Iie,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Iie=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){return JSON.parse(t)}function Bn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Wp(Qv(s[0])||""),n=Wp(Qv(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},bie=function(t){const e=B$(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Aie=function(t){const e=B$(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fd(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function II(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yv(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function lo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(PO(s)&&PO(o)){if(!lo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function PO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ef(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Cf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function xie(t,e){const n=new Rie(t,e);return n.subscribe.bind(n)}class Rie{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pie(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=nC),i.error===void 0&&(i.error=nC),i.complete===void 0&&(i.complete=nC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pie(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nC(){}function Ww(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nie=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,he(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Kw=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie=1e3,Mie=2,Die=4*60*60*1e3,Lie=.5;function NO(t,e=Oie,n=Mie){const r=e*Math.pow(n,t),i=Math.round(Lie*r*(Math.random()-.5)*2);return Math.min(Die,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fie{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Pm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jie(e))try{this.getOrInitializeService({instanceIdentifier:Zc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zc){return this.instances.has(e)}getOptions(e=Zc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uie(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zc){return this.component?this.component.multipleInstances?e:Zc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uie(t){return t===Zc?void 0:t}function jie(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fie(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const $ie={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},Bie=st.INFO,Hie={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},zie=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Hie[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=Bie,this._logHandler=zie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$ie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const Wie=(t,e)=>e.some(n=>t instanceof n);let OO,MO;function Kie(){return OO||(OO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qie(){return MO||(MO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H$=new WeakMap,bI=new WeakMap,z$=new WeakMap,rC=new WeakMap,Ik=new WeakMap;function Gie(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&H$.set(n,t)}).catch(()=>{}),Ik.set(e,t),e}function Qie(t){if(bI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bI.set(t,e)}let AI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yie(t){AI=t(AI)}function Jie(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(iC(this),e,...n);return z$.set(r,e.sort?e.sort():[e]),Wo(r)}:qie().includes(t)?function(...e){return t.apply(iC(this),e),Wo(H$.get(this))}:function(...e){return Wo(t.apply(iC(this),e))}}function Xie(t){return typeof t=="function"?Jie(t):(t instanceof IDBTransaction&&Qie(t),Wie(t,Kie())?new Proxy(t,AI):t)}function Wo(t){if(t instanceof IDBRequest)return Gie(t);if(rC.has(t))return rC.get(t);const e=Xie(t);return e!==t&&(rC.set(t,e),Ik.set(e,t)),e}const iC=t=>Ik.get(t);function qw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Wo(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Wo(o.result),c.oldVersion,c.newVersion,Wo(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function sC(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Wo(n).then(()=>{})}const Zie=["get","getKey","getAll","getAllKeys","count"],ese=["put","add","delete","clear"],oC=new Map;function DO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oC.get(e))return oC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ese.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zie.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return oC.set(e,s),s}Yie(t=>({...t,get:(e,n,r)=>DO(e,n)||t.get(e,n,r),has:(e,n)=>!!DO(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kI="@firebase/app",LO="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new Mm("@firebase/app"),rse="@firebase/app-compat",ise="@firebase/analytics-compat",sse="@firebase/analytics",ose="@firebase/app-check-compat",ase="@firebase/app-check",cse="@firebase/auth",lse="@firebase/auth-compat",use="@firebase/database",dse="@firebase/data-connect",hse="@firebase/database-compat",fse="@firebase/functions",pse="@firebase/functions-compat",mse="@firebase/installations",gse="@firebase/installations-compat",yse="@firebase/messaging",vse="@firebase/messaging-compat",_se="@firebase/performance",wse="@firebase/performance-compat",Tse="@firebase/remote-config",Ese="@firebase/remote-config-compat",Cse="@firebase/storage",Sse="@firebase/storage-compat",Ise="@firebase/firestore",bse="@firebase/ai",Ase="@firebase/firestore-compat",kse="firebase",xse="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="[DEFAULT]",Rse={[kI]:"fire-core",[rse]:"fire-core-compat",[sse]:"fire-analytics",[ise]:"fire-analytics-compat",[ase]:"fire-app-check",[ose]:"fire-app-check-compat",[cse]:"fire-auth",[lse]:"fire-auth-compat",[use]:"fire-rtdb",[dse]:"fire-data-connect",[hse]:"fire-rtdb-compat",[fse]:"fire-fn",[pse]:"fire-fn-compat",[mse]:"fire-iid",[gse]:"fire-iid-compat",[yse]:"fire-fcm",[vse]:"fire-fcm-compat",[_se]:"fire-perf",[wse]:"fire-perf-compat",[Tse]:"fire-rc",[Ese]:"fire-rc-compat",[Cse]:"fire-gcs",[Sse]:"fire-gcs-compat",[Ise]:"fire-fst",[Ase]:"fire-fst-compat",[bse]:"fire-vertex","fire-js":"fire-js",[kse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new Map,Pse=new Map,RI=new Map;function FO(t,e){try{t.container.addComponent(e)}catch(n){ta.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Or(t){const e=t.name;if(RI.has(e))return ta.debug(`There were multiple attempts to register component ${e}.`),!1;RI.set(e,t);for(const n of Kp.values())FO(n,t);for(const n of Pse.values())FO(n,t);return!0}function Ss(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dc=new Uc("app","Firebase",Nse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=xse;function W$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:xI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw dc.create("bad-app-name",{appName:String(i)});if(n||(n=L$()),!n)throw dc.create("no-options");const s=Kp.get(i);if(s){if(lo(n,s.options)&&lo(r,s.config))return s;throw dc.create("duplicate-app",{appName:i})}const o=new Vie(i);for(const c of RI.values())o.addComponent(c);const a=new Ose(n,r,o);return Kp.set(i,a),a}function Vc(t=xI){const e=Kp.get(t);if(!e&&t===xI&&L$())return W$();if(!e)throw dc.create("no-app",{appName:t});return e}function Mse(){return Array.from(Kp.values())}function In(t,e,n){let r=Rse[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ta.warn(o.join(" "));return}Or(new wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dse="firebase-heartbeat-database",Lse=1,qp="firebase-heartbeat-store";let aC=null;function K$(){return aC||(aC=qw(Dse,Lse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qp)}catch(n){console.warn(n)}}}}).catch(t=>{throw dc.create("idb-open",{originalErrorMessage:t.message})})),aC}async function Fse(t){try{const n=(await K$()).transaction(qp),r=await n.objectStore(qp).get(q$(t));return await n.done,r}catch(e){if(e instanceof ki)ta.warn(e.message);else{const n=dc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ta.warn(n.message)}}}async function UO(t,e){try{const r=(await K$()).transaction(qp,"readwrite");await r.objectStore(qp).put(e,q$(t)),await r.done}catch(n){if(n instanceof ki)ta.warn(n.message);else{const r=dc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ta.warn(r.message)}}}function q$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Use=1024,jse=30;class Vse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jO();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>jse){const o=Hse(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ta.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jO(),{heartbeatsToSend:r,unsentEntries:i}=$se(this._heartbeatsCache.heartbeats),s=Gv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ta.warn(n),""}}}function jO(){return new Date().toISOString().substring(0,10)}function $se(t,e=Use){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),VO(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),VO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ck()?Sk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function VO(t){return Gv(JSON.stringify({version:2,heartbeats:t})).length}function Hse(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zse(t){Or(new wr("platform-logger",e=>new tse(e),"PRIVATE")),Or(new wr("heartbeat",e=>new Vse(e),"PRIVATE")),In(kI,LO,t),In(kI,LO,"esm2020"),In("fire-js","")}zse("");var $O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hc,G$;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(R,N,P){for(var x=Array(arguments.length-2),H=2;H<arguments.length;H++)x[H-2]=arguments[H];return I.prototype[N].apply(R,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,I,A){A||(A=0);var R=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)R[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;16>N;++N)R[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],N=k.g[2];var P=k.g[3],x=I+(P^A&(N^P))+R[0]+3614090360&4294967295;I=A+(x<<7&4294967295|x>>>25),x=P+(N^I&(A^N))+R[1]+3905402710&4294967295,P=I+(x<<12&4294967295|x>>>20),x=N+(A^P&(I^A))+R[2]+606105819&4294967295,N=P+(x<<17&4294967295|x>>>15),x=A+(I^N&(P^I))+R[3]+3250441966&4294967295,A=N+(x<<22&4294967295|x>>>10),x=I+(P^A&(N^P))+R[4]+4118548399&4294967295,I=A+(x<<7&4294967295|x>>>25),x=P+(N^I&(A^N))+R[5]+1200080426&4294967295,P=I+(x<<12&4294967295|x>>>20),x=N+(A^P&(I^A))+R[6]+2821735955&4294967295,N=P+(x<<17&4294967295|x>>>15),x=A+(I^N&(P^I))+R[7]+4249261313&4294967295,A=N+(x<<22&4294967295|x>>>10),x=I+(P^A&(N^P))+R[8]+1770035416&4294967295,I=A+(x<<7&4294967295|x>>>25),x=P+(N^I&(A^N))+R[9]+2336552879&4294967295,P=I+(x<<12&4294967295|x>>>20),x=N+(A^P&(I^A))+R[10]+4294925233&4294967295,N=P+(x<<17&4294967295|x>>>15),x=A+(I^N&(P^I))+R[11]+2304563134&4294967295,A=N+(x<<22&4294967295|x>>>10),x=I+(P^A&(N^P))+R[12]+1804603682&4294967295,I=A+(x<<7&4294967295|x>>>25),x=P+(N^I&(A^N))+R[13]+4254626195&4294967295,P=I+(x<<12&4294967295|x>>>20),x=N+(A^P&(I^A))+R[14]+2792965006&4294967295,N=P+(x<<17&4294967295|x>>>15),x=A+(I^N&(P^I))+R[15]+1236535329&4294967295,A=N+(x<<22&4294967295|x>>>10),x=I+(N^P&(A^N))+R[1]+4129170786&4294967295,I=A+(x<<5&4294967295|x>>>27),x=P+(A^N&(I^A))+R[6]+3225465664&4294967295,P=I+(x<<9&4294967295|x>>>23),x=N+(I^A&(P^I))+R[11]+643717713&4294967295,N=P+(x<<14&4294967295|x>>>18),x=A+(P^I&(N^P))+R[0]+3921069994&4294967295,A=N+(x<<20&4294967295|x>>>12),x=I+(N^P&(A^N))+R[5]+3593408605&4294967295,I=A+(x<<5&4294967295|x>>>27),x=P+(A^N&(I^A))+R[10]+38016083&4294967295,P=I+(x<<9&4294967295|x>>>23),x=N+(I^A&(P^I))+R[15]+3634488961&4294967295,N=P+(x<<14&4294967295|x>>>18),x=A+(P^I&(N^P))+R[4]+3889429448&4294967295,A=N+(x<<20&4294967295|x>>>12),x=I+(N^P&(A^N))+R[9]+568446438&4294967295,I=A+(x<<5&4294967295|x>>>27),x=P+(A^N&(I^A))+R[14]+3275163606&4294967295,P=I+(x<<9&4294967295|x>>>23),x=N+(I^A&(P^I))+R[3]+4107603335&4294967295,N=P+(x<<14&4294967295|x>>>18),x=A+(P^I&(N^P))+R[8]+1163531501&4294967295,A=N+(x<<20&4294967295|x>>>12),x=I+(N^P&(A^N))+R[13]+2850285829&4294967295,I=A+(x<<5&4294967295|x>>>27),x=P+(A^N&(I^A))+R[2]+4243563512&4294967295,P=I+(x<<9&4294967295|x>>>23),x=N+(I^A&(P^I))+R[7]+1735328473&4294967295,N=P+(x<<14&4294967295|x>>>18),x=A+(P^I&(N^P))+R[12]+2368359562&4294967295,A=N+(x<<20&4294967295|x>>>12),x=I+(A^N^P)+R[5]+4294588738&4294967295,I=A+(x<<4&4294967295|x>>>28),x=P+(I^A^N)+R[8]+2272392833&4294967295,P=I+(x<<11&4294967295|x>>>21),x=N+(P^I^A)+R[11]+1839030562&4294967295,N=P+(x<<16&4294967295|x>>>16),x=A+(N^P^I)+R[14]+4259657740&4294967295,A=N+(x<<23&4294967295|x>>>9),x=I+(A^N^P)+R[1]+2763975236&4294967295,I=A+(x<<4&4294967295|x>>>28),x=P+(I^A^N)+R[4]+1272893353&4294967295,P=I+(x<<11&4294967295|x>>>21),x=N+(P^I^A)+R[7]+4139469664&4294967295,N=P+(x<<16&4294967295|x>>>16),x=A+(N^P^I)+R[10]+3200236656&4294967295,A=N+(x<<23&4294967295|x>>>9),x=I+(A^N^P)+R[13]+681279174&4294967295,I=A+(x<<4&4294967295|x>>>28),x=P+(I^A^N)+R[0]+3936430074&4294967295,P=I+(x<<11&4294967295|x>>>21),x=N+(P^I^A)+R[3]+3572445317&4294967295,N=P+(x<<16&4294967295|x>>>16),x=A+(N^P^I)+R[6]+76029189&4294967295,A=N+(x<<23&4294967295|x>>>9),x=I+(A^N^P)+R[9]+3654602809&4294967295,I=A+(x<<4&4294967295|x>>>28),x=P+(I^A^N)+R[12]+3873151461&4294967295,P=I+(x<<11&4294967295|x>>>21),x=N+(P^I^A)+R[15]+530742520&4294967295,N=P+(x<<16&4294967295|x>>>16),x=A+(N^P^I)+R[2]+3299628645&4294967295,A=N+(x<<23&4294967295|x>>>9),x=I+(N^(A|~P))+R[0]+4096336452&4294967295,I=A+(x<<6&4294967295|x>>>26),x=P+(A^(I|~N))+R[7]+1126891415&4294967295,P=I+(x<<10&4294967295|x>>>22),x=N+(I^(P|~A))+R[14]+2878612391&4294967295,N=P+(x<<15&4294967295|x>>>17),x=A+(P^(N|~I))+R[5]+4237533241&4294967295,A=N+(x<<21&4294967295|x>>>11),x=I+(N^(A|~P))+R[12]+1700485571&4294967295,I=A+(x<<6&4294967295|x>>>26),x=P+(A^(I|~N))+R[3]+2399980690&4294967295,P=I+(x<<10&4294967295|x>>>22),x=N+(I^(P|~A))+R[10]+4293915773&4294967295,N=P+(x<<15&4294967295|x>>>17),x=A+(P^(N|~I))+R[1]+2240044497&4294967295,A=N+(x<<21&4294967295|x>>>11),x=I+(N^(A|~P))+R[8]+1873313359&4294967295,I=A+(x<<6&4294967295|x>>>26),x=P+(A^(I|~N))+R[15]+4264355552&4294967295,P=I+(x<<10&4294967295|x>>>22),x=N+(I^(P|~A))+R[6]+2734768916&4294967295,N=P+(x<<15&4294967295|x>>>17),x=A+(P^(N|~I))+R[13]+1309151649&4294967295,A=N+(x<<21&4294967295|x>>>11),x=I+(N^(A|~P))+R[4]+4149444226&4294967295,I=A+(x<<6&4294967295|x>>>26),x=P+(A^(I|~N))+R[11]+3174756917&4294967295,P=I+(x<<10&4294967295|x>>>22),x=N+(I^(P|~A))+R[2]+718787259&4294967295,N=P+(x<<15&4294967295|x>>>17),x=A+(P^(N|~I))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+P&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,R=this.B,N=this.h,P=0;P<I;){if(N==0)for(;P<=A;)i(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<I;)if(R[N++]=k.charCodeAt(P++),N==this.blockSize){i(this,R),N=0;break}}else for(;P<I;)if(R[N++]=k[P++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var R=0;32>R;R+=8)k[A++]=this.g[I]>>>R&255;return k};function s(k,I){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function o(k,I){this.h=I;for(var A=[],R=!0,N=k.length-1;0<=N;N--){var P=k[N]|0;R&&P==I||(A[N]=P,R=!1)}this.g=A}var a={};function c(k){return-128<=k&&128>k?s(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function l(k){if(isNaN(k)||!isFinite(k))return d;if(0>k)return v(l(-k));for(var I=[],A=1,R=0;k>=A;R++)I[R]=k/A|0,A*=4294967296;return new o(I,0)}function u(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return v(u(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(I,8)),R=d,N=0;N<k.length;N+=8){var P=Math.min(8,k.length-N),x=parseInt(k.substring(N,N+P),I);8>P?(P=l(Math.pow(I,P)),R=R.j(P).add(l(x))):(R=R.j(A),R=R.add(l(x)))}return R}var d=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-v(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var R=this.i(A);k+=(0<=R?R:4294967296+R)*I,I*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(y(this))return"-"+v(this).toString(k);for(var I=l(Math.pow(k,6)),A=this,R="";;){var N=b(A,I).g;A=E(A,N.j(I));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=N,w(A))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function y(k){return k.h==-1}t.l=function(k){return k=E(this,k),y(k)?-1:w(k)?0:1};function v(k){for(var I=k.g.length,A=[],R=0;R<I;R++)A[R]=~k.g[R];return new o(A,~k.h).add(f)}t.abs=function(){return y(this)?v(this):this},t.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],R=0,N=0;N<=I;N++){var P=R+(this.i(N)&65535)+(k.i(N)&65535),x=(P>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);R=x>>>16,P&=65535,x&=65535,A[N]=x<<16|P}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(k,I){return k.add(v(I))}t.j=function(k){if(w(this)||w(k))return d;if(y(this))return y(k)?v(this).j(v(k)):v(v(this).j(k));if(y(k))return v(this.j(v(k)));if(0>this.l(m)&&0>k.l(m))return l(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],R=0;R<2*I;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<k.g.length;N++){var P=this.i(R)>>>16,x=this.i(R)&65535,H=k.i(N)>>>16,z=k.i(N)&65535;A[2*R+2*N]+=x*z,T(A,2*R+2*N),A[2*R+2*N+1]+=P*z,T(A,2*R+2*N+1),A[2*R+2*N+1]+=x*H,T(A,2*R+2*N+1),A[2*R+2*N+2]+=P*H,T(A,2*R+2*N+2)}for(R=0;R<I;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=I;R<2*I;R++)A[R]=0;return new o(A,0)};function T(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function C(k,I){this.g=k,this.h=I}function b(k,I){if(w(I))throw Error("division by zero");if(w(k))return new C(d,d);if(y(k))return I=b(v(k),I),new C(v(I.g),v(I.h));if(y(I))return I=b(k,v(I)),new C(v(I.g),I.h);if(30<k.g.length){if(y(k)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var A=f,R=I;0>=R.l(k);)A=M(A),R=M(R);var N=L(A,1),P=L(R,1);for(R=L(R,2),A=L(A,2);!w(R);){var x=P.add(R);0>=x.l(k)&&(N=N.add(A),P=x),R=L(R,1),A=L(A,1)}return I=E(k,N.j(I)),new C(N,I)}for(N=d;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=l(A),x=P.j(I);y(x)||0<x.l(k);)A-=R,P=l(A),x=P.j(I);w(P)&&(P=f),N=N.add(P),k=E(k,x)}return new C(N,k)}t.A=function(k){return b(this,k).h},t.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],R=0;R<I;R++)A[R]=this.i(R)&k.i(R);return new o(A,this.h&k.h)},t.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],R=0;R<I;R++)A[R]=this.i(R)|k.i(R);return new o(A,this.h|k.h)},t.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],R=0;R<I;R++)A[R]=this.i(R)^k.i(R);return new o(A,this.h^k.h)};function M(k){for(var I=k.g.length+1,A=[],R=0;R<I;R++)A[R]=k.i(R)<<1|k.i(R-1)>>>31;return new o(A,k.h)}function L(k,I){var A=I>>5;I%=32;for(var R=k.g.length-A,N=[],P=0;P<R;P++)N[P]=0<I?k.i(P+A)>>>I|k.i(P+A+1)<<32-I:k.i(P+A);return new o(N,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,G$=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,hc=o}).apply(typeof $O<"u"?$O:typeof self<"u"?self:typeof window<"u"?window:{});var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q$,Sf,Y$,xy,PI,J$,X$,Z$;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,S){return h==Array.prototype||h==Object.prototype||(h[_]=S.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yg=="object"&&Yg];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function i(h,_){if(_)e:{var S=r;h=h.split(".");for(var O=0;O<h.length-1;O++){var $=h[O];if(!($ in S))break e;S=S[$]}h=h[h.length-1],O=S[h],_=_(O),_!=O&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}function s(h,_){h instanceof String&&(h+="");var S=0,O=!1,$={next:function(){if(!O&&S<h.length){var q=S++;return{value:_(q,h[q]),done:!1}}return O=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(h){return h||function(){return s(this,function(_,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function l(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function u(h,_,S){return h.call.apply(h.bind,arguments)}function d(h,_,S){if(!h)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,O),h.apply(_,$)}}return function(){return h.apply(_,arguments)}}function f(h,_,S){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function m(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function w(h,_){function S(){}S.prototype=_.prototype,h.aa=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(O,$,q){for(var me=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)me[Nt-2]=arguments[Nt];return _.prototype[$].apply(O,me)}}function y(h){const _=h.length;if(0<_){const S=Array(_);for(let O=0;O<_;O++)S[O]=h[O];return S}return[]}function v(h,_){for(let S=1;S<arguments.length;S++){const O=arguments[S];if(c(O)){const $=h.length||0,q=O.length||0;h.length=$+q;for(let me=0;me<q;me++)h[$+me]=O[me]}else h.push(O)}}class E{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function T(h){return/^[\s\xa0]*$/.test(h)}function C(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function b(h){return b[" "](h),h}b[" "]=function(){};var M=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(h,_,S){for(const O in h)_.call(S,h[O],O,h)}function k(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function I(h){const _={};for(const S in h)_[S]=h[S];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(h,_){let S,O;for(let $=1;$<arguments.length;$++){O=arguments[$];for(S in O)h[S]=O[S];for(let q=0;q<A.length;q++)S=A[q],Object.prototype.hasOwnProperty.call(O,S)&&(h[S]=O[S])}}function N(h){var _=1;h=h.split(":");const S=[];for(;0<_&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function P(h){a.setTimeout(()=>{throw h},0)}function x(){var h=j;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class H{constructor(){this.h=this.g=null}add(_,S){const O=z.get();O.set(_,S),this.h?this.h.next=O:this.g=O,this.h=O}}var z=new E(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let te,U=!1,j=new H,se=()=>{const h=a.Promise.resolve(void 0);te=()=>{h.then(Ce)}};var Ce=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(S){P(S)}var _=z;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}U=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};a.addEventListener("test",S,_),a.removeEventListener("test",S,_)}catch{}return h}();function re(h,_){if(W.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(M){e:{try{b(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement);this.relatedTarget=_,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ge[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}w(re,W);var ge={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),De=0;function Pe(h,_,S,O,$){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!O,this.ha=$,this.key=++De,this.da=this.fa=!1}function Ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ye(h){this.src=h,this.g={},this.h=0}Ye.prototype.add=function(h,_,S,O,$){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var me=gt(h,_,O,$);return-1<me?(_=h[me],S||(_.fa=!1)):(_=new Pe(_,this.src,q,!!O,$),_.fa=S,h.push(_)),_};function it(h,_){var S=_.type;if(S in h.g){var O=h.g[S],$=Array.prototype.indexOf.call(O,_,void 0),q;(q=0<=$)&&Array.prototype.splice.call(O,$,1),q&&(Ve(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function gt(h,_,S,O){for(var $=0;$<h.length;++$){var q=h[$];if(!q.da&&q.listener==_&&q.capture==!!S&&q.ha==O)return $}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Ne={};function Rt(h,_,S,O,$){if(Array.isArray(_)){for(var q=0;q<_.length;q++)Rt(h,_[q],S,O,$);return null}return S=oe(S),h&&h[ne]?h.K(_,S,l(O)?!!O.capture:!!O,$):Gt(h,_,S,!1,O,$)}function Gt(h,_,S,O,$,q){if(!_)throw Error("Invalid event type");var me=l($)?!!$.capture:!!$,Nt=de(h);if(Nt||(h[Ie]=Nt=new Ye(h)),S=Nt.add(_,S,O,me,q),S.proxy)return S;if(O=Qt(),S.proxy=O,O.src=h,O.listener=S,h.addEventListener)Y||($=me),$===void 0&&($=!1),h.addEventListener(_.toString(),O,$);else if(h.attachEvent)h.attachEvent(B(_.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Qt(){function h(S){return _.call(h.src,h.listener,S)}const _=K;return h}function Ze(h,_,S,O,$){if(Array.isArray(_))for(var q=0;q<_.length;q++)Ze(h,_[q],S,O,$);else O=l(O)?!!O.capture:!!O,S=oe(S),h&&h[ne]?(h=h.i,_=String(_).toString(),_ in h.g&&(q=h.g[_],S=gt(q,S,O,$),-1<S&&(Ve(q[S]),Array.prototype.splice.call(q,S,1),q.length==0&&(delete h.g[_],h.h--)))):h&&(h=de(h))&&(_=h.g[_.toString()],h=-1,_&&(h=gt(_,S,O,$)),(S=-1<h?_[h]:null)&&D(S))}function D(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ne])it(_.i,h);else{var S=h.type,O=h.proxy;_.removeEventListener?_.removeEventListener(S,O,h.capture):_.detachEvent?_.detachEvent(B(S),O):_.addListener&&_.removeListener&&_.removeListener(O),(S=de(_))?(it(S,h),S.h==0&&(S.src=null,_[Ie]=null)):Ve(h)}}}function B(h){return h in Ne?Ne[h]:Ne[h]="on"+h}function K(h,_){if(h.da)h=!0;else{_=new re(_,this);var S=h.listener,O=h.ha||h.src;h.fa&&D(h),h=S.call(O,_)}return h}function de(h){return h=h[Ie],h instanceof Ye?h:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(h){return typeof h=="function"?h:(h[ue]||(h[ue]=function(_){return h.handleEvent(_)}),h[ue])}function ce(){V.call(this),this.i=new Ye(this),this.M=this,this.F=null}w(ce,V),ce.prototype[ne]=!0,ce.prototype.removeEventListener=function(h,_,S,O){Ze(this,h,_,S,O)};function xe(h,_){var S,O=h.F;if(O)for(S=[];O;O=O.F)S.push(O);if(h=h.M,O=_.type||_,typeof _=="string")_=new W(_,h);else if(_ instanceof W)_.target=_.target||h;else{var $=_;_=new W(O,h),R(_,$)}if($=!0,S)for(var q=S.length-1;0<=q;q--){var me=_.g=S[q];$=at(me,O,!0,_)&&$}if(me=_.g=h,$=at(me,O,!0,_)&&$,$=at(me,O,!1,_)&&$,S)for(q=0;q<S.length;q++)me=_.g=S[q],$=at(me,O,!1,_)&&$}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var S=h.g[_],O=0;O<S.length;O++)Ve(S[O]);delete h.g[_],h.h--}}this.F=null},ce.prototype.K=function(h,_,S,O){return this.i.add(String(h),_,!1,S,O)},ce.prototype.L=function(h,_,S,O){return this.i.add(String(h),_,!0,S,O)};function at(h,_,S,O){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var $=!0,q=0;q<_.length;++q){var me=_[q];if(me&&!me.da&&me.capture==S){var Nt=me.listener,Gn=me.ha||me.src;me.fa&&it(h.i,me),$=Nt.call(Gn,O)!==!1&&$}}return $&&!O.defaultPrevented}function yn(h,_,S){if(typeof h=="function")S&&(h=f(h,S));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function Ur(h){h.g=yn(()=>{h.g=null,h.i&&(h.i=!1,Ur(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class jr extends V{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xi(h){V.call(this),this.h=h,this.g={}}w(xi,V);var Mn=[];function Wn(h){L(h.g,function(_,S){this.g.hasOwnProperty(S)&&D(_)},h),h.g={}}xi.prototype.N=function(){xi.aa.N.call(this),Wn(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=a.JSON.stringify,Gi=a.JSON.parse,Uh=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function ga(){}ga.prototype.h=null;function jh(h){return h.h||(h.h=h.i())}function Vh(){}var Wc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kc(){W.call(this,"d")}w(Kc,W);function Ri(){W.call(this,"c")}w(Ri,W);var wo={},$e=null;function ft(){return $e=$e||new ce}wo.La="serverreachability";function Pt(h){W.call(this,wo.La,h)}w(Pt,W);function Kn(h){const _=ft();xe(_,new Pt(_))}wo.STAT_EVENT="statevent";function Vr(h,_){W.call(this,wo.STAT_EVENT,h),this.stat=_}w(Vr,W);function Ht(h){const _=ft();xe(_,new Vr(_,h))}wo.Ma="timingevent";function As(h,_){W.call(this,wo.Ma,h),this.size=_}w(As,W);function qn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function gK(h,_,S,O,$,q){h.info(function(){if(h.g)if(q)for(var me="",Nt=q.split("&"),Gn=0;Gn<Nt.length;Gn++){var yt=Nt[Gn].split("=");if(1<yt.length){var sr=yt[0];yt=yt[1];var or=sr.split("_");me=2<=or.length&&or[1]=="type"?me+(sr+"="+yt+"&"):me+(sr+"=redacted&")}}else me=null;else me=q;return"XMLHTTP REQ ("+O+") [attempt "+$+"]: "+_+`
`+S+`
`+me})}function yK(h,_,S,O,$,q,me){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+$+"]: "+_+`
`+S+`
`+q+" "+me})}function gu(h,_,S,O){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+_K(h,S)+(O?" "+O:"")})}function vK(h,_){h.info(function(){return"TIMEOUT: "+_})}$r.prototype.info=function(){};function _K(h,_){if(!h.g)return _;if(!_)return null;try{var S=JSON.parse(_);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var O=S[h];if(!(2>O.length)){var $=O[1];if(Array.isArray($)&&!(1>$.length)){var q=$[0];if(q!="noop"&&q!="stop"&&q!="close")for(var me=1;me<$.length;me++)$[me]=""}}}}return bs(S)}catch{return _}}var og={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rP={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nE;function ag(){}w(ag,ga),ag.prototype.g=function(){return new XMLHttpRequest},ag.prototype.i=function(){return{}},nE=new ag;function ya(h,_,S,O){this.j=h,this.i=_,this.l=S,this.R=O||1,this.U=new xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iP}function iP(){this.i=null,this.g="",this.h=!1}var sP={},rE={};function iE(h,_,S){h.L=1,h.v=dg(To(_)),h.m=S,h.P=!0,oP(h,null)}function oP(h,_){h.F=Date.now(),cg(h),h.A=To(h.v);var S=h.A,O=h.R;Array.isArray(O)||(O=[String(O)]),wP(S.i,"t",O),h.C=0,S=h.j.J,h.h=new iP,h.g=UP(h.j,S?_:null,!h.m),0<h.O&&(h.M=new jr(f(h.Y,h,h.g),h.O)),_=h.U,S=h.g,O=h.ca;var $="readystatechange";Array.isArray($)||($&&(Mn[0]=$.toString()),$=Mn);for(var q=0;q<$.length;q++){var me=Rt(S,$[q],O||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Kn(),gK(h.i,h.u,h.A,h.l,h.R,h.m)}ya.prototype.ca=function(h){h=h.target;const _=this.M;_&&Eo(h)==3?_.j():this.Y(h)},ya.prototype.Y=function(h){try{if(h==this.g)e:{const or=Eo(this.g);var _=this.g.Ba();const _u=this.g.Z();if(!(3>or)&&(or!=3||this.g&&(this.h.h||this.g.oa()||AP(this.g)))){this.J||or!=4||_==7||(_==8||0>=_u?Kn(3):Kn(2)),sE(this);var S=this.g.Z();this.X=S;t:if(aP(this)){var O=AP(this.g);h="";var $=O.length,q=Eo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qc(this),$h(this);var me="";break t}this.h.i=new a.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,h+=this.h.i.decode(O[_],{stream:!(q&&_==$-1)});O.length=0,this.h.g+=h,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=S==200,yK(this.i,this.u,this.A,this.l,this.R,or,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,Gn=this.g;if((Nt=Gn.g?Gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Nt)){var yt=Nt;break t}}yt=null}if(S=yt)gu(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oE(this,S);else{this.o=!1,this.s=3,Ht(12),qc(this),$h(this);break e}}if(this.P){S=!0;let Qi;for(;!this.J&&this.C<me.length;)if(Qi=wK(this,me),Qi==rE){or==4&&(this.s=4,Ht(14),S=!1),gu(this.i,this.l,null,"[Incomplete Response]");break}else if(Qi==sP){this.s=4,Ht(15),gu(this.i,this.l,me,"[Invalid Chunk]"),S=!1;break}else gu(this.i,this.l,Qi,null),oE(this,Qi);if(aP(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),or!=4||me.length!=0||this.h.h||(this.s=1,Ht(16),S=!1),this.o=this.o&&S,!S)gu(this.i,this.l,me,"[Invalid Chunked Response]"),qc(this),$h(this);else if(0<me.length&&!this.W){this.W=!0;var sr=this.j;sr.g==this&&sr.ba&&!sr.M&&(sr.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),hE(sr),sr.M=!0,Ht(11))}}else gu(this.i,this.l,me,null),oE(this,me);or==4&&qc(this),this.o&&!this.J&&(or==4?MP(this.j,this):(this.o=!1,cg(this)))}else FK(this.g),S==400&&0<me.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),qc(this),$h(this)}}}catch{}finally{}};function aP(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function wK(h,_){var S=h.C,O=_.indexOf(`
`,S);return O==-1?rE:(S=Number(_.substring(S,O)),isNaN(S)?sP:(O+=1,O+S>_.length?rE:(_=_.slice(O,O+S),h.C=O+S,_)))}ya.prototype.cancel=function(){this.J=!0,qc(this)};function cg(h){h.S=Date.now()+h.I,cP(h,h.I)}function cP(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=qn(f(h.ba,h),_)}function sE(h){h.B&&(a.clearTimeout(h.B),h.B=null)}ya.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(vK(this.i,this.A),this.L!=2&&(Kn(),Ht(17)),qc(this),this.s=2,$h(this)):cP(this,this.S-h)};function $h(h){h.j.G==0||h.J||MP(h.j,h)}function qc(h){sE(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Wn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function oE(h,_){try{var S=h.j;if(S.G!=0&&(S.g==h||aE(S.h,h))){if(!h.K&&aE(S.h,h)&&S.G==3){try{var O=S.Da.g.parse(_)}catch{O=null}if(Array.isArray(O)&&O.length==3){var $=O;if($[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)yg(S),mg(S);else break e;dE(S),Ht(18)}}else S.za=$[1],0<S.za-S.T&&37500>$[2]&&S.F&&S.v==0&&!S.C&&(S.C=qn(f(S.Za,S),6e3));if(1>=dP(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Qc(S,11)}else if((h.K||S.g==h)&&yg(S),!T(_))for($=S.Da.g.parse(_),_=0;_<$.length;_++){let yt=$[_];if(S.T=yt[0],yt=yt[1],S.G==2)if(yt[0]=="c"){S.K=yt[1],S.ia=yt[2];const sr=yt[3];sr!=null&&(S.la=sr,S.j.info("VER="+S.la));const or=yt[4];or!=null&&(S.Aa=or,S.j.info("SVER="+S.Aa));const _u=yt[5];_u!=null&&typeof _u=="number"&&0<_u&&(O=1.5*_u,S.L=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const Qi=h.g;if(Qi){const _g=Qi.g?Qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_g){var q=O.h;q.g||_g.indexOf("spdy")==-1&&_g.indexOf("quic")==-1&&_g.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(cE(q,q.h),q.h=null))}if(O.D){const fE=Qi.g?Qi.g.getResponseHeader("X-HTTP-Session-Id"):null;fE&&(O.ya=fE,Ut(O.I,O.D,fE))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),O=S;var me=h;if(O.qa=FP(O,O.J?O.ia:null,O.W),me.K){hP(O.h,me);var Nt=me,Gn=O.L;Gn&&(Nt.I=Gn),Nt.B&&(sE(Nt),cg(Nt)),O.g=me}else NP(O);0<S.i.length&&gg(S)}else yt[0]!="stop"&&yt[0]!="close"||Qc(S,7);else S.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Qc(S,7):uE(S):yt[0]!="noop"&&S.l&&S.l.ta(yt),S.v=0)}}Kn(4)}catch{}}var TK=class{constructor(h,_){this.g=h,this.map=_}};function lP(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uP(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function dP(h){return h.h?1:h.g?h.g.size:0}function aE(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function cE(h,_){h.g?h.g.add(_):h.h=_}function hP(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}lP.prototype.cancel=function(){if(this.i=fP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function fP(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.D);return _}return y(h.i)}function EK(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],S=h.length,O=0;O<S;O++)_.push(h[O]);return _}_=[],S=0;for(O in h)_[S++]=h[O];return _}function CK(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var S=0;S<h;S++)_.push(S);return _}_=[],S=0;for(const O in h)_[S++]=O;return _}}}function pP(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var S=CK(h),O=EK(h),$=O.length,q=0;q<$;q++)_.call(void 0,O[q],S&&S[q],h)}var mP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SK(h,_){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var O=h[S].indexOf("="),$=null;if(0<=O){var q=h[S].substring(0,O);$=h[S].substring(O+1)}else q=h[S];_(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Gc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Gc){this.h=h.h,lg(this,h.j),this.o=h.o,this.g=h.g,ug(this,h.s),this.l=h.l;var _=h.i,S=new zh;S.i=_.i,_.g&&(S.g=new Map(_.g),S.h=_.h),gP(this,S),this.m=h.m}else h&&(_=String(h).match(mP))?(this.h=!1,lg(this,_[1]||"",!0),this.o=Bh(_[2]||""),this.g=Bh(_[3]||"",!0),ug(this,_[4]),this.l=Bh(_[5]||"",!0),gP(this,_[6]||"",!0),this.m=Bh(_[7]||"")):(this.h=!1,this.i=new zh(null,this.h))}Gc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Hh(_,yP,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Hh(_,yP,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Hh(S,S.charAt(0)=="/"?AK:bK,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Hh(S,xK)),h.join("")};function To(h){return new Gc(h)}function lg(h,_,S){h.j=S?Bh(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ug(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function gP(h,_,S){_ instanceof zh?(h.i=_,RK(h.i,h.h)):(S||(_=Hh(_,kK)),h.i=new zh(_,h.h))}function Ut(h,_,S){h.i.set(_,S)}function dg(h){return Ut(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Bh(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hh(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,IK),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function IK(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yP=/[#\/\?@]/g,bK=/[#\?:]/g,AK=/[#\?]/g,kK=/[#\?@]/g,xK=/#/g;function zh(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function va(h){h.g||(h.g=new Map,h.h=0,h.i&&SK(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}t=zh.prototype,t.add=function(h,_){va(this),this.i=null,h=yu(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function vP(h,_){va(h),_=yu(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function _P(h,_){return va(h),_=yu(h,_),h.g.has(_)}t.forEach=function(h,_){va(this),this.g.forEach(function(S,O){S.forEach(function($){h.call(_,$,O,this)},this)},this)},t.na=function(){va(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),S=[];for(let O=0;O<_.length;O++){const $=h[O];for(let q=0;q<$.length;q++)S.push(_[O])}return S},t.V=function(h){va(this);let _=[];if(typeof h=="string")_P(this,h)&&(_=_.concat(this.g.get(yu(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)_=_.concat(h[S])}return _},t.set=function(h,_){return va(this),this.i=null,h=yu(this,h),_P(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function wP(h,_,S){vP(h,_),0<S.length&&(h.i=null,h.g.set(yu(h,_),y(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var S=0;S<_.length;S++){var O=_[S];const q=encodeURIComponent(String(O)),me=this.V(O);for(O=0;O<me.length;O++){var $=q;me[O]!==""&&($+="="+encodeURIComponent(String(me[O]))),h.push($)}}return this.i=h.join("&")};function yu(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function RK(h,_){_&&!h.j&&(va(h),h.i=null,h.g.forEach(function(S,O){var $=O.toLowerCase();O!=$&&(vP(this,O),wP(this,$,S))},h)),h.j=_}function PK(h,_){const S=new $r;if(a.Image){const O=new Image;O.onload=m(_a,S,"TestLoadImage: loaded",!0,_,O),O.onerror=m(_a,S,"TestLoadImage: error",!1,_,O),O.onabort=m(_a,S,"TestLoadImage: abort",!1,_,O),O.ontimeout=m(_a,S,"TestLoadImage: timeout",!1,_,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else _(!1)}function NK(h,_){const S=new $r,O=new AbortController,$=setTimeout(()=>{O.abort(),_a(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:O.signal}).then(q=>{clearTimeout($),q.ok?_a(S,"TestPingServer: ok",!0,_):_a(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),_a(S,"TestPingServer: error",!1,_)})}function _a(h,_,S,O,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),O(S)}catch{}}function OK(){this.g=new Uh}function MK(h,_,S){const O=S||"";try{pP(h,function($,q){let me=$;l($)&&(me=bs($)),_.push(O+q+"="+encodeURIComponent(me))})}catch($){throw _.push(O+"type="+encodeURIComponent("_badmap")),$}}function hg(h){this.l=h.Ub||null,this.j=h.eb||!1}w(hg,ga),hg.prototype.g=function(){return new fg(this.l,this.j)},hg.prototype.i=function(h){return function(){return h}}({});function fg(h,_){ce.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(fg,ce),t=fg.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Kh(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wh(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Kh(this)),this.g&&(this.readyState=3,Kh(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;TP(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function TP(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Wh(this):Kh(this),this.readyState==3&&TP(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Wh(this))},t.Qa=function(h){this.g&&(this.response=h,Wh(this))},t.ga=function(){this.g&&Wh(this)};function Wh(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Kh(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function Kh(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function EP(h){let _="";return L(h,function(S,O){_+=O,_+=":",_+=S,_+=`\r
`}),_}function lE(h,_,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=EP(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):Ut(h,_,S))}function nn(h){ce.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(nn,ce);var DK=/^https?$/i,LK=["POST","PUT"];t=nn.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nE.g(),this.v=this.o?jh(this.o):jh(nE),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(q){CP(this,q);return}if(h=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var $ in O)S.set($,O[$]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const q of O.keys())S.set(q,O.get(q));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(q=>q.toLowerCase()=="content-type"),$=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LK,_,void 0))||O||$||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,me]of S)this.g.setRequestHeader(q,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bP(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){CP(this,q)}};function CP(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,SP(h),pg(h)}function SP(h){h.A||(h.A=!0,xe(h,"complete"),xe(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,xe(this,"complete"),xe(this,"abort"),pg(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pg(this,!0)),nn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?IP(this):this.bb())},t.bb=function(){IP(this)};function IP(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Eo(h)!=4||h.Z()!=2)){if(h.u&&Eo(h)==4)yn(h.Ea,0,h);else if(xe(h,"readystatechange"),Eo(h)==4){h.h=!1;try{const me=h.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var O;if(O=me===0){var $=String(h.D).match(mP)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),O=!DK.test($?$.toLowerCase():"")}S=O}if(S)xe(h,"complete"),xe(h,"success");else{h.m=6;try{var q=2<Eo(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",SP(h)}}finally{pg(h)}}}}function pg(h,_){if(h.g){bP(h);const S=h.g,O=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||xe(h,"ready");try{S.onreadystatechange=O}catch{}}}function bP(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Eo(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Eo(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Gi(_)}};function AP(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function FK(h){const _={};h=(h.g&&2<=Eo(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(T(h[O]))continue;var S=N(h[O]);const $=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const q=_[$]||[];_[$]=q,q.push(S)}k(_,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qh(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function kP(h){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qh("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qh("baseRetryDelayMs",5e3,h),this.cb=qh("retryDelaySeedMs",1e4,h),this.Wa=qh("forwardChannelMaxRetries",2,h),this.wa=qh("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new lP(h&&h.concurrentRequestLimit),this.Da=new OK,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kP.prototype,t.la=8,t.G=1,t.connect=function(h,_,S,O){Ht(0),this.W=h,this.H=_||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.I=FP(this,null,this.W),gg(this)};function uE(h){if(xP(h),h.G==3){var _=h.U++,S=To(h.I);if(Ut(S,"SID",h.K),Ut(S,"RID",_),Ut(S,"TYPE","terminate"),Gh(h,S),_=new ya(h,h.j,_),_.L=2,_.v=dg(To(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=_.v,S=!0),S||(_.g=UP(_.j,null),_.g.ea(_.v)),_.F=Date.now(),cg(_)}LP(h)}function mg(h){h.g&&(hE(h),h.g.cancel(),h.g=null)}function xP(h){mg(h),h.u&&(a.clearTimeout(h.u),h.u=null),yg(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function gg(h){if(!uP(h.h)&&!h.s){h.s=!0;var _=h.Ga;te||se(),U||(te(),U=!0),j.add(_,h),h.B=0}}function UK(h,_){return dP(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=qn(f(h.Ga,h,_),DP(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new ya(this,this.j,h);let q=this.o;if(this.S&&(q?(q=I(q),R(q,this.S)):q=this.S),this.m!==null||this.O||($.H=q,q=null),this.P)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(_+=O,4096<_){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=PP(this,$,_),S=To(this.I),Ut(S,"RID",h),Ut(S,"CVER",22),this.D&&Ut(S,"X-HTTP-Session-Id",this.D),Gh(this,S),q&&(this.O?_="headers="+encodeURIComponent(String(EP(q)))+"&"+_:this.m&&lE(S,this.m,q)),cE(this.h,$),this.Ua&&Ut(S,"TYPE","init"),this.P?(Ut(S,"$req",_),Ut(S,"SID","null"),$.T=!0,iE($,S,null)):iE($,S,_),this.G=2}}else this.G==3&&(h?RP(this,h):this.i.length==0||uP(this.h)||RP(this))};function RP(h,_){var S;_?S=_.l:S=h.U++;const O=To(h.I);Ut(O,"SID",h.K),Ut(O,"RID",S),Ut(O,"AID",h.T),Gh(h,O),h.m&&h.o&&lE(O,h.m,h.o),S=new ya(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),_&&(h.i=_.D.concat(h.i)),_=PP(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),cE(h.h,S),iE(S,O,_)}function Gh(h,_){h.H&&L(h.H,function(S,O){Ut(_,O,S)}),h.l&&pP({},function(S,O){Ut(_,O,S)})}function PP(h,_,S){S=Math.min(h.i.length,S);var O=h.l?f(h.l.Na,h.l,h):null;e:{var $=h.i;let q=-1;for(;;){const me=["count="+S];q==-1?0<S?(q=$[0].g,me.push("ofs="+q)):q=0:me.push("ofs="+q);let Nt=!0;for(let Gn=0;Gn<S;Gn++){let yt=$[Gn].g;const sr=$[Gn].map;if(yt-=q,0>yt)q=Math.max(0,$[Gn].g-100),Nt=!1;else try{MK(sr,me,"req"+yt+"_")}catch{O&&O(sr)}}if(Nt){O=me.join("&");break e}}}return h=h.i.splice(0,S),_.D=h,O}function NP(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;te||se(),U||(te(),U=!0),j.add(_,h),h.v=0}}function dE(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=qn(f(h.Fa,h),DP(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,OP(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=qn(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),mg(this),OP(this))};function hE(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function OP(h){h.g=new ya(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=To(h.qa);Ut(_,"RID","rpc"),Ut(_,"SID",h.K),Ut(_,"AID",h.T),Ut(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ut(_,"TO",h.ja),Ut(_,"TYPE","xmlhttp"),Gh(h,_),h.m&&h.o&&lE(_,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=dg(To(_)),S.m=null,S.P=!0,oP(S,h)}t.Za=function(){this.C!=null&&(this.C=null,mg(this),dE(this),Ht(19))};function yg(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function MP(h,_){var S=null;if(h.g==_){yg(h),hE(h),h.g=null;var O=2}else if(aE(h.h,_))S=_.D,hP(h.h,_),O=1;else return;if(h.G!=0){if(_.o)if(O==1){S=_.m?_.m.length:0,_=Date.now()-_.F;var $=h.B;O=ft(),xe(O,new As(O,S)),gg(h)}else NP(h);else if($=_.s,$==3||$==0&&0<_.X||!(O==1&&UK(h,_)||O==2&&dE(h)))switch(S&&0<S.length&&(_=h.h,_.i=_.i.concat(S)),$){case 1:Qc(h,5);break;case 4:Qc(h,10);break;case 3:Qc(h,6);break;default:Qc(h,2)}}}function DP(h,_){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*_}function Qc(h,_){if(h.j.info("Error code "+_),_==2){var S=f(h.fb,h),O=h.Xa;const $=!O;O=new Gc(O||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lg(O,"https"),dg(O),$?PK(O.toString(),S):NK(O.toString(),S)}else Ht(2);h.G=0,h.l&&h.l.sa(_),LP(h),xP(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function LP(h){if(h.G=0,h.ka=[],h.l){const _=fP(h.h);(_.length!=0||h.i.length!=0)&&(v(h.ka,_),v(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function FP(h,_,S){var O=S instanceof Gc?To(S):new Gc(S);if(O.g!="")_&&(O.g=_+"."+O.g),ug(O,O.s);else{var $=a.location;O=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var q=new Gc(null);O&&lg(q,O),_&&(q.g=_),$&&ug(q,$),S&&(q.l=S),O=q}return S=h.D,_=h.ya,S&&_&&Ut(O,S,_),Ut(O,"VER",h.la),Gh(h,O),O}function UP(h,_,S){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new nn(new hg({eb:S})):new nn(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jP(){}t=jP.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vg(){}vg.prototype.g=function(h,_){return new li(h,_)};function li(h,_){ce.call(this),this.g=new kP(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!T(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!T(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new vu(this)}w(li,ce),li.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){uE(this.g)},li.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=bs(h),h=S);_.i.push(new TK(_.Ya++,h)),_.G==3&&gg(_)},li.prototype.N=function(){this.g.l=null,delete this.j,uE(this.g),delete this.g,li.aa.N.call(this)};function VP(h){Kc.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}w(VP,Kc);function $P(){Ri.call(this),this.status=1}w($P,Ri);function vu(h){this.g=h}w(vu,jP),vu.prototype.ua=function(){xe(this.g,"a")},vu.prototype.ta=function(h){xe(this.g,new VP(h))},vu.prototype.sa=function(h){xe(this.g,new $P)},vu.prototype.ra=function(){xe(this.g,"b")},vg.prototype.createWebChannel=vg.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,Z$=function(){return new vg},X$=function(){return ft()},J$=wo,PI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},og.NO_ERROR=0,og.TIMEOUT=8,og.HTTP_ERROR=6,xy=og,rP.COMPLETE="complete",Y$=rP,Vh.EventType=Wc,Wc.OPEN="a",Wc.CLOSE="b",Wc.ERROR="c",Wc.MESSAGE="d",ce.prototype.listen=ce.prototype.K,Sf=Vh,nn.prototype.listenOnce=nn.prototype.L,nn.prototype.getLastError=nn.prototype.Ka,nn.prototype.getLastErrorCode=nn.prototype.Ba,nn.prototype.getStatus=nn.prototype.Z,nn.prototype.getResponseJson=nn.prototype.Oa,nn.prototype.getResponseText=nn.prototype.oa,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Ha,Q$=nn}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});const BO="@firebase/firestore",HO="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Mm("@firebase/firestore");function Nu(){return zl.logLevel}function Se(t,...e){if(zl.logLevel<=st.DEBUG){const n=e.map(bk);zl.debug(`Firestore (${Ih}): ${t}`,...n)}}function na(t,...e){if(zl.logLevel<=st.ERROR){const n=e.map(bk);zl.error(`Firestore (${Ih}): ${t}`,...n)}}function Ud(t,...e){if(zl.logLevel<=st.WARN){const n=e.map(bk);zl.warn(`Firestore (${Ih}): ${t}`,...n)}}function bk(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eB(t,r,n)}function eB(t,e,n){let r=`FIRESTORE (${Ih}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw na(r),new Error(r)}function Et(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||eB(e,i,r)}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fr.UNAUTHENTICATED))}shutdown(){}}class Kse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qse{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ko,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ko)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new tB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class Gse{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Qse{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Gse(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yse{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0,3512);const r=s=>{s.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zO(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Jse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ct(t,e){return t<e?-1:t>e?1:0}function NI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return cC(i)===cC(s)?ct(i,s):cC(i)?1:-1}return ct(t.length,e.length)}const Xse=55296,Zse=57343;function cC(t){const e=t.charCodeAt(0);return e>=Xse&&e<=Zse}function jd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="__name__";class Ds{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ds?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ds.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ct(e.length,n.length)}static compareSegments(e,n){const r=Ds.isNumericId(e),i=Ds.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ds.extractNumericId(e).compare(Ds.extractNumericId(n)):NI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hc.fromString(e.substring(4,e.length-2))}}class Lt extends Ds{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const eoe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Ds{construct(e,n,r){return new er(e,n,r)}static isValidIdentifier(e){return eoe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WO}static keyField(){return new er([WO])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ve(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Lt.fromString(e))}static fromName(e){return new Oe(Lt.fromString(e).popFirst(5))}static empty(){return new Oe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t,e,n){if(!n)throw new ve(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function toe(t,e,n,r){if(e===!0&&r===!0)throw new ve(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KO(t){if(!Oe.isDocumentKey(t))throw new ve(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qO(t){if(Oe.isDocumentKey(t))throw new ve(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rB(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gw(t);throw new ve(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Dm(t,e){if(!rB(t))throw new ve(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ve(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=-62135596800,QO=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*QO);return new $t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<GO)throw new ve(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QO}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dm(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:Sn("string",$t._jsonSchemaVersion),seconds:Sn("number"),nanoseconds:Sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new $t(0,0))}static max(){return new He(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=-1;function noe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new $t(n+1,0):new $t(n,r));return new Ec(i,Oe.empty(),e)}function roe(t){return new Ec(t.readTime,t.key,Gp)}class Ec{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ec(He.min(),Oe.empty(),Gp)}static max(){return new Ec(He.max(),Oe.empty(),Gp)}}function ioe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(t.documentKey,e.documentKey),n!==0?n:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const soe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ooe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==soe)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ie.reject(n)}static resolve(e){return new ie((n,r)=>{n(e)})}static reject(e){return new ie((n,r)=>{r(e)})}static waitFor(e){return new ie((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next(i=>i?ie.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ie((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new ie((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function aoe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ah(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qw.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=-1;function Yw(t){return t==null}function Jv(t){return t===0&&1/t==-1/0}function coe(t){return typeof t=="number"&&Number.isInteger(t)&&!Jv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="";function loe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=YO(e)),e=uoe(t.get(n),e);return YO(e)}function uoe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case iB:n+="";break;default:n+=s}}return n}function YO(t){return t+iB+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $c(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn=class OI{constructor(e,n){this.comparator=e,this.root=n||fc.EMPTY}insert(e,n){return new OI(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fc.BLACK,null,null))}remove(e){return new OI(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fc.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jg(this.root,e,this.comparator,!0)}},Jg=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fc=class Ao{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ao.RED,this.left=i??Ao.EMPTY,this.right=s??Ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ao(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ao.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ao.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}};fc.EMPTY=null,fc.RED=!0,fc.BLACK=!1;fc.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new fc(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XO(this.data.getIterator())}getIteratorFrom(e){return new XO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nn(this.comparator);return n.data=e,n}}class XO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new gi([])}unionWith(e){let n=new Nn(er.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oB("Invalid base64 string: "+s):s}}(e);return new rr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const doe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(t){if(Et(!!t,39018),typeof t=="string"){let e=0;const n=doe.exec(t);if(Et(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hn(t.seconds),nanos:hn(t.nanos)}}function hn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sc(t){return typeof t=="string"?rr.fromBase64String(t):rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="server_timestamp",cB="__type__",lB="__previous_value__",uB="__local_write_time__";function xk(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cB])==null?void 0:r.stringValue)===aB}function Jw(t){const e=t.mapValue.fields[lB];return xk(e)?Jw(e):e}function Qp(t){const e=Cc(t.mapValue.fields[uB].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hoe{constructor(e,n,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}}const Xv="(default)";class Yp{constructor(e,n){this.projectId=e,this.database=n||Xv}static empty(){return new Yp("","")}get isDefaultDatabase(){return this.database===Xv}isEqual(e){return e instanceof Yp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB="__type__",hB="__max__",Xg={mapValue:{fields:{__type__:{stringValue:hB}}}},fB="__vector__",Zv="value";function Ic(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xk(t)?4:poe(t)?9007199254740991:foe(t)?10:11:Fe(28295,{value:t})}function uo(t,e){if(t===e)return!0;const n=Ic(t);if(n!==Ic(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qp(t).isEqual(Qp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Cc(i.timestampValue),a=Cc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Sc(i.bytesValue).isEqual(Sc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return hn(i.geoPointValue.latitude)===hn(s.geoPointValue.latitude)&&hn(i.geoPointValue.longitude)===hn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return hn(i.integerValue)===hn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=hn(i.doubleValue),a=hn(s.doubleValue);return o===a?Jv(o)===Jv(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return jd(t.arrayValue.values||[],e.arrayValue.values||[],uo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(JO(o)!==JO(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!uo(o[c],a[c])))return!1;return!0}(t,e);default:return Fe(52216,{left:t})}}function Jp(t,e){return(t.values||[]).find(n=>uo(n,e))!==void 0}function Vd(t,e){if(t===e)return 0;const n=Ic(t),r=Ic(e);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=hn(s.integerValue||s.doubleValue),c=hn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return ZO(t.timestampValue,e.timestampValue);case 4:return ZO(Qp(t),Qp(e));case 5:return NI(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Sc(s),c=Sc(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ct(a[l],c[l]);if(u!==0)return u}return ct(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ct(hn(s.latitude),hn(o.latitude));return a!==0?a:ct(hn(s.longitude),hn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eM(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,m,w,y;const a=s.fields||{},c=o.fields||{},l=(f=a[Zv])==null?void 0:f.arrayValue,u=(m=c[Zv])==null?void 0:m.arrayValue,d=ct(((w=l==null?void 0:l.values)==null?void 0:w.length)||0,((y=u==null?void 0:u.values)==null?void 0:y.length)||0);return d!==0?d:eM(l,u)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Xg.mapValue&&o===Xg.mapValue)return 0;if(s===Xg.mapValue)return 1;if(o===Xg.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){const f=NI(c[d],u[d]);if(f!==0)return f;const m=Vd(a[c[d]],l[u[d]]);if(m!==0)return m}return ct(c.length,u.length)}(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function ZO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const n=Cc(t),r=Cc(e),i=ct(n.seconds,r.seconds);return i!==0?i:ct(n.nanos,r.nanos)}function eM(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Vd(n[i],r[i]);if(s)return s}return ct(n.length,r.length)}function $d(t){return MI(t)}function MI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=MI(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${MI(n.fields[o])}`;return i+"}"}(t.mapValue):Fe(61005,{value:t})}function Ry(t){switch(Ic(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jw(t);return e?16+Ry(e):16;case 5:return 2*t.stringValue.length;case 6:return Sc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ry(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return $c(r.fields,(s,o)=>{i+=s.length+Ry(o)}),i}(t.mapValue);default:throw Fe(13486,{value:t})}}function tM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function DI(t){return!!t&&"integerValue"in t}function Rk(t){return!!t&&"arrayValue"in t}function nM(t){return!!t&&"nullValue"in t}function rM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Py(t){return!!t&&"mapValue"in t}function foe(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dB])==null?void 0:r.stringValue)===fB}function Qf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $c(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qf(t.arrayValue.values[n]);return e}return{...t}}function poe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Py(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qf(n)}setAll(e){let n=er.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Py(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Py(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$c(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qr(Qf(this.value))}}function pB(t){const e=[];return $c(t.fields,(n,r)=>{const i=new er([n]);if(Py(r)){const s=pB(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mr(e,0,He.min(),He.min(),He.min(),qr.empty(),0)}static newFoundDocument(e,n,r,i){return new mr(e,1,n,He.min(),r,i,0)}static newNoDocument(e,n){return new mr(e,2,n,He.min(),He.min(),qr.empty(),0)}static newUnknownDocument(e,n){return new mr(e,3,n,He.min(),He.min(),qr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n){this.position=e,this.inclusive=n}}function iM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Oe.comparator(Oe.fromName(o.referenceValue),n.key):r=Vd(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!uo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n="asc"){this.field=e,this.dir=n}}function moe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{}class Cn extends mB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yoe(e,n,r):n==="array-contains"?new woe(e,r):n==="in"?new Toe(e,r):n==="not-in"?new Eoe(e,r):n==="array-contains-any"?new Coe(e,r):new Cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new voe(e,r):new _oe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vd(n,this.value)):n!==null&&Ic(this.value)===Ic(n)&&this.matchesComparison(Vd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends mB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ts(e,n)}matches(e){return gB(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gB(t){return t.op==="and"}function yB(t){return goe(t)&&gB(t)}function goe(t){for(const e of t.filters)if(e instanceof Ts)return!1;return!0}function LI(t){if(t instanceof Cn)return t.field.canonicalString()+t.op.toString()+$d(t.value);if(yB(t))return t.filters.map(e=>LI(e)).join(",");{const e=t.filters.map(n=>LI(n)).join(",");return`${t.op}(${e})`}}function vB(t,e){return t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.field.isEqual(i.field)&&uo(r.value,i.value)}(t,e):t instanceof Ts?function(r,i){return i instanceof Ts&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&vB(o,i.filters[a]),!0):!1}(t,e):void Fe(19439)}function _B(t){return t instanceof Cn?function(n){return`${n.field.canonicalString()} ${n.op} ${$d(n.value)}`}(t):t instanceof Ts?function(n){return n.op.toString()+" {"+n.getFilters().map(_B).join(" ,")+"}"}(t):"Filter"}class yoe extends Cn{constructor(e,n,r){super(e,n,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class voe extends Cn{constructor(e,n){super(e,"in",n),this.keys=wB("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _oe extends Cn{constructor(e,n){super(e,"not-in",n),this.keys=wB("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wB(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class woe extends Cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rk(n)&&Jp(n.arrayValue,this.value)}}class Toe extends Cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jp(this.value.arrayValue,n)}}class Eoe extends Cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jp(this.value.arrayValue,n)}}class Coe extends Cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rk(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function oM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Soe(t,e,n,r,i,s,o)}function Pk(t){const e=qe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>LI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Yw(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$d(r)).join(",")),e.Te=n}return e.Te}function Nk(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!moe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sM(t.startAt,e.startAt)&&sM(t.endAt,e.endAt)}function FI(t){return Oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ioe(t,e,n,r,i,s,o,a){return new kh(t,e,n,r,i,s,o,a)}function Xw(t){return new kh(t)}function aM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TB(t){return t.collectionGroup!==null}function Yf(t){const e=qe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nn(er.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Xp(s,r))}),n.has(er.keyField().canonicalString())||e.Ie.push(new Xp(er.keyField(),r))}return e.Ie}function to(t){const e=qe(t);return e.Ee||(e.Ee=boe(e,Yf(t))),e.Ee}function boe(t,e){if(t.limitType==="F")return oM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xp(i.field,s)});const n=t.endAt?new e_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new e_(t.startAt.position,t.startAt.inclusive):null;return oM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function UI(t,e){const n=t.filters.concat([e]);return new kh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function t_(t,e,n){return new kh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zw(t,e){return Nk(to(t),to(e))&&t.limitType===e.limitType}function EB(t){return`${Pk(to(t))}|lt:${t.limitType}`}function Ou(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_B(i)).join(", ")}]`),Yw(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$d(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$d(i)).join(",")),`Target(${r})`}(to(t))}; limitType=${t.limitType})`}function eT(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Yf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const l=iM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Yf(r),i)||r.endAt&&!function(o,a,c){const l=iM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Yf(r),i))}(t,e)}function Aoe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CB(t){return(e,n)=>{let r=!1;for(const i of Yf(t)){const s=koe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function koe(t,e,n){const r=t.field.isKeyField()?Oe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Vd(c,l):Fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$c(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return sB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xoe=new bn(Oe.comparator);function ra(){return xoe}const SB=new bn(Oe.comparator);function If(...t){let e=SB;for(const n of t)e=e.insert(n.key,n);return e}function IB(t){let e=SB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ml(){return Jf()}function bB(){return Jf()}function Jf(){return new lu(t=>t.toString(),(t,e)=>t.isEqual(e))}const Roe=new bn(Oe.comparator),Poe=new Nn(Oe.comparator);function lt(...t){let e=Poe;for(const n of t)e=e.add(n);return e}const Noe=new Nn(ct);function Ooe(){return Noe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jv(e)?"-0":e}}function AB(t){return{integerValue:""+t}}function Moe(t,e){return coe(e)?AB(e):Ok(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this._=void 0}}function Doe(t,e,n){return t instanceof Zp?function(i,s){const o={fields:{[cB]:{stringValue:aB},[uB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xk(s)&&(s=Jw(s)),s&&(o.fields[lB]=s),{mapValue:o}}(n,e):t instanceof Bd?xB(t,e):t instanceof em?RB(t,e):function(i,s){const o=kB(i,s),a=cM(o)+cM(i.Ae);return DI(o)&&DI(i.Ae)?AB(a):Ok(i.serializer,a)}(t,e)}function Loe(t,e,n){return t instanceof Bd?xB(t,e):t instanceof em?RB(t,e):n}function kB(t,e){return t instanceof n_?function(r){return DI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zp extends tT{}class Bd extends tT{constructor(e){super(),this.elements=e}}function xB(t,e){const n=PB(e);for(const r of t.elements)n.some(i=>uo(i,r))||n.push(r);return{arrayValue:{values:n}}}class em extends tT{constructor(e){super(),this.elements=e}}function RB(t,e){let n=PB(e);for(const r of t.elements)n=n.filter(i=>!uo(i,r));return{arrayValue:{values:n}}}class n_ extends tT{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function cM(t){return hn(t.integerValue||t.doubleValue)}function PB(t){return Rk(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n){this.field=e,this.transform=n}}function Foe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bd&&i instanceof Bd||r instanceof em&&i instanceof em?jd(r.elements,i.elements,uo):r instanceof n_&&i instanceof n_?uo(r.Ae,i.Ae):r instanceof Zp&&i instanceof Zp}(t.transform,e.transform)}class Uoe{constructor(e,n){this.version=e,this.transformResults=n}}class Pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ny(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nT{}function OB(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rT(t.key,Pr.none()):new Lm(t.key,t.data,Pr.none());{const n=t.data,r=qr.empty();let i=new Nn(er.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Bc(t.key,r,new gi(i.toArray()),Pr.none())}}function joe(t,e,n){t instanceof Lm?function(i,s,o){const a=i.value.clone(),c=uM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bc?function(i,s,o){if(!Ny(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=uM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(MB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xf(t,e,n,r){return t instanceof Lm?function(s,o,a,c){if(!Ny(s.precondition,o))return a;const l=s.value.clone(),u=dM(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bc?function(s,o,a,c){if(!Ny(s.precondition,o))return a;const l=dM(s.fieldTransforms,c,o),u=o.data;return u.setAll(MB(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ny(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Voe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=kB(r.transform,i||null);s!=null&&(n===null&&(n=qr.empty()),n.set(r.field,s))}return n||null}function lM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jd(r,i,(s,o)=>Foe(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lm extends nT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bc extends nT{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uM(t,e,n){const r=new Map;Et(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Loe(o,a,n[i]))}return r}function dM(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Doe(s,o,e))}return r}class rT extends nT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $oe extends nT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&joe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bB();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=OB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(He.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),lt())}isEqual(e){return this.batchId===e.batchId&&jd(this.mutations,e.mutations,(n,r)=>lM(n,r))&&jd(this.baseMutations,e.baseMutations,(n,r)=>lM(n,r))}}class Mk{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Et(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Roe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Mk(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hoe=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,ut;function Woe(t){switch(t){case J.OK:return Fe(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function DB(t){if(t===void 0)return na("GRPC error has no .code"),J.UNKNOWN;switch(t){case _n.OK:return J.OK;case _n.CANCELLED:return J.CANCELLED;case _n.UNKNOWN:return J.UNKNOWN;case _n.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case _n.INTERNAL:return J.INTERNAL;case _n.UNAVAILABLE:return J.UNAVAILABLE;case _n.UNAUTHENTICATED:return J.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case _n.NOT_FOUND:return J.NOT_FOUND;case _n.ALREADY_EXISTS:return J.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return J.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case _n.ABORTED:return J.ABORTED;case _n.OUT_OF_RANGE:return J.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return J.UNIMPLEMENTED;case _n.DATA_LOSS:return J.DATA_LOSS;default:return Fe(39323,{code:t})}}(ut=_n||(_n={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Koe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qoe=new hc([4294967295,4294967295],0);function hM(t){const e=Koe().encode(t),n=new G$;return n.update(e),new Uint8Array(n.digest())}function fM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hc([n,r],0),new hc([i,s],0)]}class Dk{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bf(`Invalid padding: ${n}`);if(r<0)throw new bf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(hc.fromNumber(r)));return i.compare(qoe)===1&&(i=new hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hM(e),[r,i]=fM(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Dk(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=hM(e),[r,i]=fM(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Fm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new iT(He.min(),i,new bn(ct),ra(),lt())}}class Fm{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fm(r,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class LB{constructor(e,n){this.targetId=e,this.Ce=n}}class FB{constructor(e,n,r=rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class pM{constructor(){this.ve=0,this.Fe=mM(),this.Me=rr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),n=lt(),r=lt();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:s})}}),new Fm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mM()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Goe{constructor(e){this.Ge=e,this.ze=new Map,this.je=ra(),this.Je=Zg(),this.He=Zg(),this.Ye=new bn(ct)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(FI(s))if(r===0){const o=new Oe(s.path);this.et(n,o,mr.newNoDocument(o,He.min()))}else Et(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Sc(r).toUint8Array()}catch(c){if(c instanceof oB)return Ud("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dk(o,i,s)}catch(c){return Ud(c instanceof bf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&FI(a.target)){const c=new Oe(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,mr.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=lt();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new iT(e,n,this.Ye,this.je,r);return this.je=ra(),this.Je=Zg(),this.He=Zg(),this.Ye=new bn(ct),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pM,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nn(ct),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nn(ct),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pM),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zg(){return new bn(Oe.comparator)}function mM(){return new bn(Oe.comparator)}const Qoe={asc:"ASCENDING",desc:"DESCENDING"},Yoe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Joe={and:"AND",or:"OR"};class Xoe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jI(t,e){return t.useProto3Json||Yw(e)?e:{value:e}}function r_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Zoe(t,e){return r_(t,e.toTimestamp())}function no(t){return Et(!!t,49232),He.fromTimestamp(function(n){const r=Cc(n);return new $t(r.seconds,r.nanos)}(t))}function Lk(t,e){return VI(t,e).canonicalString()}function VI(t,e){const n=function(i){return new Lt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jB(t){const e=Lt.fromString(t);return Et(zB(e),10190,{key:e.toString()}),e}function $I(t,e){return Lk(t.databaseId,e.path)}function lC(t,e){const n=jB(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Oe($B(n))}function VB(t,e){return Lk(t.databaseId,e)}function eae(t){const e=jB(t);return e.length===4?Lt.emptyPath():$B(e)}function BI(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $B(t){return Et(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gM(t,e,n){return{name:$I(t,e),fields:n.value.mapValue.fields}}function tae(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Fe(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(Et(u===void 0||typeof u=="string",58123),rr.fromBase64String(u||"")):(Et(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),rr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?J.UNKNOWN:DB(l.code);return new ve(u,l.message||"")}(o);n=new FB(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lC(t,r.document.name),s=no(r.document.updateTime),o=r.document.createTime?no(r.document.createTime):He.min(),a=new qr({mapValue:{fields:r.document.fields}}),c=mr.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Oy(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lC(t,r.document),s=r.readTime?no(r.readTime):He.min(),o=mr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Oy([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lC(t,r.document),s=r.removedTargetIds||[];n=new Oy([],s,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new zoe(i,s),a=r.targetId;n=new LB(a,o)}}return n}function nae(t,e){let n;if(e instanceof Lm)n={update:gM(t,e.key,e.value)};else if(e instanceof rT)n={delete:$I(t,e.key)};else if(e instanceof Bc)n={update:gM(t,e.key,e.data),updateMask:dae(e.fieldMask)};else{if(!(e instanceof $oe))return Fe(16599,{Vt:e.type});n={verify:$I(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Zp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof em)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof n_)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Zoe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Fe(27497)}(t,e.precondition)),n}function rae(t,e){return t&&t.length>0?(Et(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?no(i.updateTime):no(s);return o.isEqual(He.min())&&(o=no(s)),new Uoe(o,i.transformResults||[])}(n,e))):[]}function iae(t,e){return{documents:[VB(t,e.path)]}}function sae(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VB(t,i);const s=function(l){if(l.length!==0)return HB(Ts.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:Mu(f.field),direction:cae(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function oae(t){let e=eae(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=BB(d);return f instanceof Ts&&yB(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(w){return new Xp(Du(w.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Yw(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(d){const f=!!d.before,m=d.values||[];return new e_(m,f)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const f=!d.before,m=d.values||[];return new e_(m,f)}(n.endAt)),Ioe(e,i,o,s,a,"F",c,l)}function aae(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BB(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Du(n.unaryFilter.field);return Cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Du(n.unaryFilter.field);return Cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Du(n.unaryFilter.field);return Cn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Du(n.unaryFilter.field);return Cn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Cn.create(Du(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ts.create(n.compositeFilter.filters.map(r=>BB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}}(n.compositeFilter.op))}(t):Fe(30097,{filter:t})}function cae(t){return Qoe[t]}function lae(t){return Yoe[t]}function uae(t){return Joe[t]}function Mu(t){return{fieldPath:t.canonicalString()}}function Du(t){return er.fromServerFormat(t.fieldPath)}function HB(t){return t instanceof Cn?function(n){if(n.op==="=="){if(rM(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NAN"}};if(nM(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rM(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NOT_NAN"}};if(nM(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(n.field),op:lae(n.op),value:n.value}}}(t):t instanceof Ts?function(n){const r=n.getFilters().map(i=>HB(i));return r.length===1?r[0]:{compositeFilter:{op:uae(n.op),filters:r}}}(t):Fe(54877,{filter:t})}function dae(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zB(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,r,i,s=He.min(),o=He.min(),a=rr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this.yt=e}}function fae(t){const e=oae({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?t_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{constructor(){this.Cn=new mae}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Ec.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Ec.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class mae{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nn(Lt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WB=41943040;class zr{static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(WB,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hd(0)}static cr(){return new Hd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="LruGarbageCollector",gae=1048576;function _M([t,e],[n,r]){const i=ct(t,n);return i===0?ct(e,r):i}class yae{constructor(e){this.Ir=e,this.buffer=new Nn(_M),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_M(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vae{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(vM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ah(n)?Se(vM,"Ignoring IndexedDB error during garbage collection: ",n):await bh(n)}await this.Vr(3e5)})}}class _ae{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Qw.ce);const r=new yae(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(yM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yM):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),Nu()<=st.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function wae(t,e){return new _ae(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{constructor(){this.changes=new lu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eae{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xf(r.mutation,i,gi.empty(),$t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,lt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=lt()){const i=ml();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=If();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ml();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,lt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ra();const o=Jf(),a=function(){return Jf()}();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Bc)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Xf(u.mutation,l,u.mutation.getFieldMask(),$t.now())):o.set(l.key,gi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>a.set(l,new Eae(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Jf();let i=new bn((o,a)=>o-a),s=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||gi.empty();u=a.applyToLocalView(l,u),r.set(c,u);const d=(i.get(a.batchId)||lt()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=bB();u.forEach(f=>{if(!s.has(f)){const m=OB(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return ie.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ie.resolve(ml());let a=Gp,c=s;return o.next(l=>ie.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ie.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,lt())).next(u=>({batchId:a,changes:IB(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next(r=>{let i=If();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=If();return this.indexManager.getCollectionParents(e,s).next(a=>ie.forEach(a,c=>{const l=function(d,f){return new kh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,mr.newInvalidDocument(u)))});let a=If();return o.forEach((c,l)=>{const u=s.get(c);u!==void 0&&Xf(u.mutation,l,gi.empty(),$t.now()),eT(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:no(i.createTime)}}(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:fae(i.bundledQuery),readTime:no(i.readTime)}}(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iae{constructor(){this.overlays=new bn(Oe.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ml();return ie.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const i=ml(),s=n.length+1,o=new Oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new bn((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=ml(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=ml(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return ie.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Hoe(n,r));let s=this.qr.get(n);s===void 0&&(s=lt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Qr=new Nn(Un.$r),this.Ur=new Nn(Un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Un(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Un(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Oe(new Lt([])),r=new Un(n,e),i=new Un(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Oe(new Lt([])),r=new Un(n,e),i=new Un(n,e+1);let s=lt();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Un(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Un{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Oe.comparator(e.key,n.key)||ct(e.Yr,n.Yr)}static Kr(e,n){return ct(e.Yr,n.Yr)||Oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aae{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(Un.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Boe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?kk:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Un(n,0),i=new Un(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nn(ct);return n.forEach(i=>{const s=new Un(i,0),o=new Un(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Oe.isDocumentKey(s)||(s=s.child(""));const o=new Un(new Oe(s),0);let a=new Nn(ct);return this.Zr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),ie.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Et(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(n.mutations,i=>{const s=new Un(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Un(n,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(e){this.ri=e,this.docs=function(){return new bn(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(n))}getEntries(e,n){let r=ra();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mr.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ra();const o=n.path,a=new Oe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ioe(roe(u),r)<=0||(i.has(u.key)||eT(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ii(e,n){return ie.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xae(this)}getSize(e){return ie.resolve(this.size)}}class xae extends Tae{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rae{constructor(e){this.persistence=e,this.si=new lu(n=>Pk(n),Nk),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new Fk,this.targetCount=0,this.ai=Hd.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Hd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ie.waitFor(s).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ie.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qw(0),this.li=!1,this.li=!0,this.hi=new bae,this.referenceDelegate=e(this),this.Pi=new Rae(this),this.indexManager=new pae,this.remoteDocumentCache=function(i){return new kae(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new hae(n),this.Ii=new Sae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Iae,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Aae(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const i=new Pae(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return ie.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Pae extends ooe{constructor(e){super(),this.currentSequenceNumber=e}}class Uk{constructor(e){this.persistence=e,this.Ri=new Fk,this.Vi=null}static mi(e){return new Uk(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,r=>{const i=Oe.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,He.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class i_{constructor(e,n){this.persistence=e,this.pi=new lu(r=>loe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wae(this,n)}static mi(e,n){return new i_(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ie.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?ie.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,He.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ry(e.data.value)),n}br(e,n,r){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=lt(),i=lt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jk(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Eie()?8:aoe(_r())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Nae;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Nu()<=st.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Ou(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Nu()<=st.DEBUG&&Se("QueryEngine","Query:",Ou(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Nu()<=st.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Ou(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,to(n))):ie.resolve())}ys(e,n){if(aM(n))return ie.resolve(null);let r=to(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=t_(n,null,"F"),r=to(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=lt(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,t_(n,null,"F")):this.vs(e,l,n,c)}))})))}ws(e,n,r,i){return aM(n)||i.isEqual(He.min())?ie.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?ie.resolve(null):(Nu()<=st.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ou(n)),this.vs(e,o,n,noe(i,Gp)).next(a=>a))})}Ds(e,n){let r=new Nn(CB(e));return n.forEach((i,s)=>{eT(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Nu()<=st.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Ou(n)),this.ps.getDocumentsMatchingQuery(e,n,Ec.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="LocalStore",Mae=3e8;class Dae{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new bn(ct),this.xs=new lu(s=>Pk(s),Nk),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cae(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Lae(t,e,n,r){return new Dae(t,e,n,r)}async function qB(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=lt();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function Fae(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const d=l.batch,f=d.keys();let m=ie.resolve();return f.forEach(w=>{m=m.next(()=>u.getEntry(c,w)).next(y=>{const v=l.docVersions.get(w);Et(v!==null,48541),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),u.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=lt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GB(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Uae(t,e){const n=qe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(rr.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(y,v,E){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Mae?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,u)&&a.push(n.Pi.updateTargetData(s,m))});let c=ra(),l=lt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(jae(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!r.isEqual(He.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ie.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Ms=i,s))}function jae(t,e,n){let r=lt(),i=lt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ra();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(He.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Se(Vk,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function Vae(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kk),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $ae(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,ie.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ga(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function HI(t,e,n){const r=qe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ah(o))throw o;Se(Vk,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function wM(t,e,n){const r=qe(t);let i=He.min(),s=lt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const d=qe(c),f=d.xs.get(u);return f!==void 0?ie.resolve(d.Ms.get(f)):d.Pi.getTargetData(l,u)}(r,o,to(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:He.min(),n?s:lt())).next(a=>(Bae(r,Aoe(e),a),{documents:a,Qs:s})))}function Bae(t,e,n){let r=t.Os.get(e)||He.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class TM{constructor(){this.activeTargetIds=Ooe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hae{constructor(){this.Mo=new TM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new TM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="ConnectivityMonitor";class CM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(EM,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(EM,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey=null;function zI(){return ey===null?ey=function(){return 268435456+Math.round(2147483648*Math.random())}():ey++,"0x"+ey.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="RestConnection",Wae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kae{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Xv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=zI(),a=this.zo(e,n.toUriEncodedString());Se(uC,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:l}=new URL(a),u=Cs(l);return this.Jo(e,a,c,r,u).then(d=>(Se(uC,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ud(uC,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ih}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Wae[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qae{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="WebChannelConnection";class Gae extends Kae{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=zI();return new Promise((a,c)=>{const l=new Q$;l.setWithCredentials(!0),l.listenOnce(Y$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xy.NO_ERROR:const d=l.getResponseJson();Se(ur,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case xy.TIMEOUT:Se(ur,`RPC '${e}' ${o} timed out`),c(new ve(J.DEADLINE_EXCEEDED,"Request time out"));break;case xy.HTTP_ERROR:const f=l.getStatus();if(Se(ur,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const y=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(T)>=0?T:J.UNKNOWN}(w.status);c(new ve(y,w.message))}else c(new ve(J.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ve(J.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{Se(ur,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);Se(ur,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}T_(e,n,r){const i=zI(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Z$(),a=X$(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=s.join("");Se(ur,`Creating RPC '${e}' stream ${i}: ${u}`,c);const d=o.createWebChannel(u,c);this.I_(d);let f=!1,m=!1;const w=new qae({Yo:v=>{m?Se(ur,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(f||(Se(ur,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),Se(ur,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),y=(v,E,T)=>{v.listen(E,C=>{try{T(C)}catch(b){setTimeout(()=>{throw b},0)}})};return y(d,Sf.EventType.OPEN,()=>{m||(Se(ur,`RPC '${e}' stream ${i} transport opened.`),w.o_())}),y(d,Sf.EventType.CLOSE,()=>{m||(m=!0,Se(ur,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(d))}),y(d,Sf.EventType.ERROR,v=>{m||(m=!0,Ud(ur,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),w.a_(new ve(J.UNAVAILABLE,"The operation could not be completed")))}),y(d,Sf.EventType.MESSAGE,v=>{var E;if(!m){const T=v.data[0];Et(!!T,16349);const C=T,b=(C==null?void 0:C.error)||((E=C[0])==null?void 0:E.error);if(b){Se(ur,`RPC '${e}' stream ${i} received error:`,b);const M=b.status;let L=function(A){const R=_n[A];if(R!==void 0)return DB(R)}(M),k=b.message;L===void 0&&(L=J.INTERNAL,k="Unknown error status: "+M+" with message "+b.message),m=!0,w.a_(new ve(L,k)),d.close()}else Se(ur,`RPC '${e}' stream ${i} received:`,T),w.u_(T)}}),y(a,J$.STAT_EVENT,v=>{v.stat===PI.PROXY?Se(ur,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===PI.NOPROXY&&Se(ur,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function dC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){return new Xoe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="PersistentStream";class YB{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QB(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(na(n.toString()),na("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ve(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Se(SM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Se(SM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qae extends YB{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tae(this.serializer,e),r=function(s){if(!("targetChange"in s))return He.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?no(o.readTime):He.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=BI(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=FI(c)?{documents:iae(s,c)}:{query:sae(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UB(s,o.resumeToken);const l=jI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(He.min())>0){a.readTime=r_(s,o.snapshotVersion.toTimestamp());const l=jI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=aae(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=BI(this.serializer),n.removeTarget=e,this.q_(n)}}class Yae extends YB{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rae(e.writeResults,e.commitTime),r=no(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=BI(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nae(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jae{}class Xae extends Jae{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ve(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,VI(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(J.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,VI(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(J.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Zae{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(na(n),this.aa=!1):Se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="RemoteStore";class ece{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{uu(this)&&(Se(Wl,"Restarting streams for network reachability change."),await async function(c){const l=qe(c);l.Ea.add(4),await Um(l),l.Ra.set("Unknown"),l.Ea.delete(4),await oT(l)}(this))})}),this.Ra=new Zae(r,i)}}async function oT(t){if(uu(t))for(const e of t.da)await e(!0)}async function Um(t){for(const e of t.da)await e(!1)}function JB(t,e){const n=qe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zk(n)?Hk(n):xh(n).O_()&&Bk(n,e))}function $k(t,e){const n=qe(t),r=xh(n);n.Ia.delete(e),r.O_()&&XB(n,e),n.Ia.size===0&&(r.O_()?r.L_():uu(n)&&n.Ra.set("Unknown"))}function Bk(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xh(t).Y_(e)}function XB(t,e){t.Va.Ue(e),xh(t).Z_(e)}function Hk(t){t.Va=new Goe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xh(t).start(),t.Ra.ua()}function zk(t){return uu(t)&&!xh(t).x_()&&t.Ia.size>0}function uu(t){return qe(t).Ea.size===0}function ZB(t){t.Va=void 0}async function tce(t){t.Ra.set("Online")}async function nce(t){t.Ia.forEach((e,n)=>{Bk(t,e)})}async function rce(t,e){ZB(t),zk(t)?(t.Ra.ha(e),Hk(t)):t.Ra.set("Unknown")}async function ice(t,e,n){if(t.Ra.set("Online"),e instanceof FB&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){Se(Wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await s_(t,r)}else if(e instanceof Oy?t.Va.Ze(e):e instanceof LB?t.Va.st(e):t.Va.tt(e),!n.isEqual(He.min()))try{const r=await GB(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(rr.EMPTY_BYTE_STRING,u.snapshotVersion)),XB(s,c);const d=new Ga(u.target,c,l,u.sequenceNumber);Bk(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Se(Wl,"Failed to raise snapshot:",r),await s_(t,r)}}async function s_(t,e,n){if(!Ah(e))throw e;t.Ea.add(1),await Um(t),t.Ra.set("Offline"),n||(n=()=>GB(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Se(Wl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await oT(t)})}function e3(t,e){return e().catch(n=>s_(t,n,e))}async function aT(t){const e=qe(t),n=bc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kk;for(;sce(e);)try{const i=await Vae(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,oce(e,i)}catch(i){await s_(e,i)}t3(e)&&n3(e)}function sce(t){return uu(t)&&t.Ta.length<10}function oce(t,e){t.Ta.push(e);const n=bc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function t3(t){return uu(t)&&!bc(t).x_()&&t.Ta.length>0}function n3(t){bc(t).start()}async function ace(t){bc(t).ra()}async function cce(t){const e=bc(t);for(const n of t.Ta)e.ea(n.mutations)}async function lce(t,e,n){const r=t.Ta.shift(),i=Mk.from(r,e,n);await e3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await aT(t)}async function uce(t,e){e&&bc(t).X_&&await async function(r,i){if(function(o){return Woe(o)&&o!==J.ABORTED}(i.code)){const s=r.Ta.shift();bc(r).B_(),await e3(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await aT(r)}}(t,e),t3(t)&&n3(t)}async function IM(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),Se(Wl,"RemoteStore received new credentials");const r=uu(n);n.Ea.add(3),await Um(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await oT(n)}async function dce(t,e){const n=qe(t);e?(n.Ea.delete(2),await oT(n)):e||(n.Ea.add(2),await Um(n),n.Ra.set("Unknown"))}function xh(t){return t.ma||(t.ma=function(n,r,i){const s=qe(n);return s.sa(),new Qae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:tce.bind(null,t),t_:nce.bind(null,t),r_:rce.bind(null,t),H_:ice.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zk(t)?Hk(t):t.Ra.set("Unknown")):(await t.ma.stop(),ZB(t))})),t.ma}function bc(t){return t.fa||(t.fa=function(n,r,i){const s=qe(n);return s.sa(),new Yae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ace.bind(null,t),r_:uce.bind(null,t),ta:cce.bind(null,t),na:lce.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await aT(t)):(await t.fa.stop(),t.Ta.length>0&&(Se(Wl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Wk(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kk(t,e){if(na("AsyncQueue",`${e}: ${t}`),Ah(t))return new ve(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{static emptySet(e){return new ad(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Oe.comparator(n.key,r.key):(n,r)=>Oe.comparator(n.key,r.key),this.keyedMap=If(),this.sortedSet=new bn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ad)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ad;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.ga=new bn(Oe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class zd{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zd(e,n,ad.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hce{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class fce{constructor(){this.queries=AM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=qe(n),s=i.queries;i.queries=AM(),s.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new ve(J.ABORTED,"Firestore shutting down"))}}function AM(){return new lu(t=>EB(t),Zw)}async function qk(t,e){const n=qe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new hce,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Kk(o,`Initialization of query '${Ou(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Qk(n)}async function Gk(t,e){const n=qe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pce(t,e){const n=qe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Qk(n)}function mce(t,e,n){const r=qe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Qk(t){t.Ca.forEach(e=>{e.next()})}var WI,kM;(kM=WI||(WI={})).Ma="default",kM.Cache="cache";class Yk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==WI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.key=e}}class i3{constructor(e){this.key=e}}class gce{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=CB(e),this.tu=new ad(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new bM,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),m=eT(this.query,d)?d:null,w=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;f&&m?f.data.isEqual(m.data)?w!==y&&(r.track({type:3,doc:m}),v=!0):this.su(f,m)||(r.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),v=!0):f&&!m&&(r.track({type:1,doc:f}),v=!0,(c||l)&&(a=!0)),v&&(m?(o=o.add(m),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(m,w){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:v})}};return y(m)-y(w)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new zd(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bM,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new i3(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new r3(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jk="SyncEngine";class yce{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vce{constructor(e){this.key=e,this.hu=!1}}class _ce{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new lu(a=>EB(a),Zw),this.Iu=new Map,this.Eu=new Set,this.du=new bn(Oe.comparator),this.Au=new Map,this.Ru=new Fk,this.Vu={},this.mu=new Map,this.fu=Hd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wce(t,e,n=!0){const r=u3(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await s3(r,e,n,!0),i}async function Tce(t,e){const n=u3(t);await s3(n,e,!0,!1)}async function s3(t,e,n,r){const i=await $ae(t.localStore,to(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Ece(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&JB(t.remoteStore,i),a}async function Ece(t,e,n,r,i){t.pu=(d,f,m)=>async function(y,v,E,T){let C=v.view.ru(E);C.Cs&&(C=await wM(y.localStore,v.query,!1).then(({documents:k})=>v.view.ru(k,C)));const b=T&&T.targetChanges.get(v.targetId),M=T&&T.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(C,y.isPrimaryClient,b,M);return RM(y,v.targetId,L.au),L.snapshot}(t,d,f,m);const s=await wM(t.localStore,e,!0),o=new gce(e,s.Qs),a=o.ru(s.documents),c=Fm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);RM(t,n,l.au);const u=new yce(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function Cce(t,e,n){const r=qe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Zw(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$k(r.remoteStore,i.targetId),KI(r,i.targetId)}).catch(bh)):(KI(r,i.targetId),await HI(r.localStore,i.targetId,!0))}async function Sce(t,e){const n=qe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$k(n.remoteStore,r.targetId))}async function Ice(t,e,n){const r=Nce(t);try{const i=await function(o,a){const c=qe(o),l=$t.now(),u=a.reduce((m,w)=>m.add(w.key),lt());let d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=ra(),y=lt();return c.Ns.getEntries(m,u).next(v=>{w=v,w.forEach((E,T)=>{T.isValidDocument()||(y=y.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(v=>{d=v;const E=[];for(const T of a){const C=Voe(T,d.get(T.key).overlayedDocument);C!=null&&E.push(new Bc(T.key,C,pB(C.value.mapValue),Pr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,E,a)}).next(v=>{f=v;const E=v.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(m,v.batchId,E)})}).then(()=>({batchId:f.batchId,changes:IB(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new bn(ct)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l}(r,i.batchId,n),await jm(r,i.changes),await aT(r.remoteStore)}catch(i){const s=Kk(i,"Failed to persist write");n.reject(s)}}async function o3(t,e){const n=qe(t);try{const r=await Uae(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Et(o.hu,14607):i.removedDocuments.size>0&&(Et(o.hu,42227),o.hu=!1))}),await jm(n,r,e)}catch(r){await bh(r)}}function xM(t,e,n){const r=qe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=qe(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(const f of d.Sa)f.va(a)&&(l=!0)}),l&&Qk(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bce(t,e,n){const r=qe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new bn(Oe.comparator);o=o.insert(s,mr.newNoDocument(s,He.min()));const a=lt().add(s),c=new iT(He.min(),new Map,new bn(ct),o,a);await o3(r,c),r.du=r.du.remove(s),r.Au.delete(e),Xk(r)}else await HI(r.localStore,e,!1).then(()=>KI(r,e,n)).catch(bh)}async function Ace(t,e){const n=qe(t),r=e.batch.batchId;try{const i=await Fae(n.localStore,e);c3(n,r,null),a3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jm(n,i)}catch(i){await bh(i)}}async function kce(t,e,n){const r=qe(t);try{const i=await function(o,a){const c=qe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Et(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);c3(r,e,n),a3(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jm(r,i)}catch(i){await bh(i)}}function a3(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function c3(t,e,n){const r=qe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function KI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||l3(t,r)})}function l3(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($k(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Xk(t))}function RM(t,e,n){for(const r of n)r instanceof r3?(t.Ru.addReference(r.key,e),xce(t,r)):r instanceof i3?(Se(Jk,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||l3(t,r.key)):Fe(19791,{wu:r})}function xce(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Se(Jk,"New document in limbo: "+n),t.Eu.add(r),Xk(t))}function Xk(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Oe(Lt.fromString(e)),r=t.fu.next();t.Au.set(r,new vce(n)),t.du=t.du.insert(n,r),JB(t.remoteStore,new Ga(to(Xw(n.path)),r,"TargetPurposeLimboResolution",Qw.ce))}}async function jm(t,e,n){const r=qe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(l=>{var u;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(u=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);const d=jk.As(c.targetId,l);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,l){const u=qe(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ie.forEach(l,f=>ie.forEach(f.Es,m=>u.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>ie.forEach(f.ds,m=>u.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Ah(d))throw d;Se(Vk,"Failed to update sequence numbers: "+d)}for(const d of l){const f=d.targetId;if(!d.fromCache){const m=u.Ms.get(f),w=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(w);u.Ms=u.Ms.insert(f,y)}}}(r.localStore,s))}async function Rce(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){Se(Jk,"User change. New user:",e.toKey());const r=await qB(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ve(J.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jm(n,r.Ls)}}function Pce(t,e){const n=qe(t),r=n.Au.get(e);if(r&&r.hu)return lt().add(r.key);{let i=lt();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function u3(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bce.bind(null,e),e.Pu.H_=pce.bind(null,e.eventManager),e.Pu.yu=mce.bind(null,e.eventManager),e}function Nce(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ace.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kce.bind(null,e),e}class o_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Lae(this.persistence,new Oae,e.initialUser,this.serializer)}Cu(e){return new KB(Uk.mi,this.serializer)}Du(e){return new Hae}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}o_.provider={build:()=>new o_};class Oce extends o_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Et(this.persistence.referenceDelegate instanceof i_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vae(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new KB(r=>i_.mi(r,n),this.serializer)}}class qI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rce.bind(null,this.syncEngine),await dce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fce}()}createDatastore(e){const n=sT(e.databaseInfo.databaseId),r=function(s){return new Gae(s)}(e.databaseInfo);return function(s,o,a,c){return new Xae(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ece(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xM(this.syncEngine,n,0),function(){return CM.v()?new CM:new zae}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){const d=new _ce(i,s,o,a,c,l);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=qe(i);Se(Wl,"RemoteStore shutting down."),s.Ea.add(5),await Um(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qI.provider={build:()=>new qI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):na("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="FirestoreClient";class Mce{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=Ak.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Se(Ac,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Se(Ac,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kk(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hC(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Ac,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qB(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Dce(t);Se(Ac,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>IM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>IM(e.remoteStore,i)),t._onlineComponents=e}async function Dce(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Ac,"Using user provided OfflineComponentProvider");try{await hC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ud("Error using user provided cache. Falling back to memory cache: "+n),await hC(t,new o_)}}else Se(Ac,"Using default OfflineComponentProvider"),await hC(t,new Oce(void 0));return t._offlineComponents}async function d3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Ac,"Using user provided OnlineComponentProvider"),await PM(t,t._uninitializedComponentsProvider._online)):(Se(Ac,"Using default OnlineComponentProvider"),await PM(t,new qI))),t._onlineComponents}function Lce(t){return d3(t).then(e=>e.syncEngine)}async function a_(t){const e=await d3(t),n=e.eventManager;return n.onListen=wce.bind(null,e.syncEngine),n.onUnlisten=Cce.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Tce.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Sce.bind(null,e.syncEngine),n}function Fce(t,e,n={}){const r=new Ko;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new Zk({next:f=>{u.Nu(),o.enqueueAndForget(()=>Gk(s,d));const m=f.docs.has(a);!m&&f.fromCache?l.reject(new ve(J.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?l.reject(new ve(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new Yk(Xw(a.path),u,{includeMetadataChanges:!0,qa:!0});return qk(s,d)}(await a_(t),t.asyncQueue,e,n,r)),r.promise}function Uce(t,e,n={}){const r=new Ko;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new Zk({next:f=>{u.Nu(),o.enqueueAndForget(()=>Gk(s,d)),f.fromCache&&c.source==="server"?l.reject(new ve(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new Yk(a,u,{includeMetadataChanges:!0,qa:!0});return qk(s,d)}(await a_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="firestore.googleapis.com",OM=!0;class MM{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f3,this.ssl=OM}else this.host=e.host,this.ssl=e.ssl??OM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gae)throw new ve(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}toe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h3(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cT{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MM({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MM(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Wse;switch(r.type){case"firstParty":return new Qse(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NM.get(n);r&&(Se("ComponentProvider","Removing Datastore"),NM.delete(n),r.terminate())}(this),Promise.resolve()}}function jce(t,e,n,r={}){var l;t=Rr(t,cT);const i=Cs(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Nm(`https://${a}`),Om("Firestore",!0)),s.host!==f3&&s.host!==a&&Ud("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!lo(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=fr.MOCK_USER;else{u=Tk(r.mockUserToken,(l=t._app)==null?void 0:l.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ve(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new fr(f)}t._authCredentials=new Kse(new tB(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dm(n,ln._jsonSchema))return new ln(e,r||null,new Oe(Lt.fromString(n.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:Sn("string",ln._jsonSchemaVersion),referencePath:Sn("string")};class pc extends pa{constructor(e,n,r){super(e,n,Xw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Oe(e))}withConverter(e){return new pc(this.firestore,e,this._path)}}function gr(t,e,...n){if(t=ze(t),nB("collection","path",e),t instanceof cT){const r=Lt.fromString(e,...n);return qO(r),new pc(t,null,r)}{if(!(t instanceof ln||t instanceof pc))throw new ve(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return qO(r),new pc(t.firestore,null,r)}}function Be(t,e,...n){if(t=ze(t),arguments.length===1&&(e=Ak.newId()),nB("doc","path",e),t instanceof cT){const r=Lt.fromString(e,...n);return KO(r),new ln(t,null,new Oe(r))}{if(!(t instanceof ln||t instanceof pc))throw new ve(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return KO(r),new ln(t.firestore,t instanceof pc?t.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="AsyncQueue";class LM{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QB(this,"async_queue_retry"),this._c=()=>{const r=dC();r&&Se(DM,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=dC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ko;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ah(e))throw e;Se(DM,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,na("INTERNAL UNHANDLED ERROR: ",FM(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Wk.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:FM(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function FM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ho extends cT{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new LM,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LM(e),this._firestoreClient=void 0,await e}}}function Vce(t,e){const n=typeof t=="object"?t:Vc(),r=typeof t=="string"?t:Xv,i=Ss(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=zw("firestore");s&&jce(i,...s)}return i}function Vm(t){if(t._terminated)throw new ve(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$ce(t),t._firestoreClient}function $ce(t){var r,i,s;const e=t._freezeSettings(),n=function(a,c,l,u){return new hoe(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,h3(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Mce(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fi(rr.fromBase64String(e))}catch(n){throw new ve(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fi(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dm(e,Fi._jsonSchema))return Fi.fromBase64String(e.bytes)}}Fi._jsonSchemaVersion="firestore/bytes/1.0",Fi._jsonSchema={type:Sn("string",Fi._jsonSchemaVersion),bytes:Sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ro._jsonSchemaVersion}}static fromJSON(e){if(Dm(e,ro._jsonSchema))return new ro(e.latitude,e.longitude)}}ro._jsonSchemaVersion="firestore/geoPoint/1.0",ro._jsonSchema={type:Sn("string",ro._jsonSchemaVersion),latitude:Sn("number"),longitude:Sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:io._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dm(e,io._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new io(e.vectorValues);throw new ve(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}io._jsonSchemaVersion="firestore/vectorValue/1.0",io._jsonSchema={type:Sn("string",io._jsonSchemaVersion),vectorValues:Sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bce=/^__.*__$/;class Hce{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lm(e,this.data,n,this.fieldTransforms)}}class p3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function m3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class lT{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lT({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return c_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(m3(this.Ac)&&Bce.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zce{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sT(e)}Cc(e,n,r,i=!1){return new lT({Ac:e,methodName:n,Dc:r,path:er.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hm(t){const e=t._freezeSettings(),n=sT(t._databaseId);return new zce(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ex(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);rx("Data must be an object, but it was:",o,r);const a=v3(r,o);let c,l;if(s.merge)c=new gi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=GI(e,d,n);if(!o.contains(f))throw new ve(J.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);w3(u,f)||u.push(f)}c=new gi(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new Hce(new qr(a),c,l)}class zm extends Bm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zm}}function Wce(t,e,n){return new lT({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tx extends Bm{_toFieldTransform(e){return new NB(e.path,new Zp)}isEqual(e){return e instanceof tx}}class nx extends Bm{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Wce(this,e,!0),r=this.vc.map(s=>Rh(s,n)),i=new Bd(r);return new NB(e.path,i)}isEqual(e){return e instanceof nx&&lo(this.vc,e.vc)}}function g3(t,e,n,r){const i=t.Cc(1,e,n);rx("Data must be an object, but it was:",i,r);const s=[],o=qr.empty();$c(r,(c,l)=>{const u=ix(e,c,n);l=ze(l);const d=i.yc(u);if(l instanceof zm)s.push(u);else{const f=Rh(l,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new gi(s);return new p3(o,a,i.fieldTransforms)}function y3(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[GI(e,r,n)],c=[i];if(s.length%2!=0)throw new ve(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(GI(e,s[f])),c.push(s[f+1]);const l=[],u=qr.empty();for(let f=a.length-1;f>=0;--f)if(!w3(l,a[f])){const m=a[f];let w=c[f];w=ze(w);const y=o.yc(m);if(w instanceof zm)l.push(m);else{const v=Rh(w,y);v!=null&&(l.push(m),u.set(m,v))}}const d=new gi(l);return new p3(u,d,o.fieldTransforms)}function Kce(t,e,n,r=!1){return Rh(n,t.Cc(r?4:3,e))}function Rh(t,e){if(_3(t=ze(t)))return rx("Unsupported field value:",e,t),v3(t,e);if(t instanceof Bm)return function(r,i){if(!m3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Rh(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Moe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$t.fromDate(r);return{timestampValue:r_(i.serializer,s)}}if(r instanceof $t){const s=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:r_(i.serializer,s)}}if(r instanceof ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fi)return{bytesValue:UB(i.serializer,r._byteString)};if(r instanceof ln){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lk(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof io)return function(o,a){return{mapValue:{fields:{[dB]:{stringValue:fB},[Zv]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return Ok(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Gw(r)}`)}(t,e)}function v3(t,e){const n={};return sB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$c(t,(r,i)=>{const s=Rh(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function _3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof ro||t instanceof Fi||t instanceof ln||t instanceof Bm||t instanceof io)}function rx(t,e,n){if(!_3(n)||!rB(n)){const r=Gw(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function GI(t,e,n){if((e=ze(e))instanceof $m)return e._internalPath;if(typeof e=="string")return ix(t,e);throw c_("Field path arguments must be of type string or ",t,!1,void 0,n)}const qce=new RegExp("[~\\*/\\[\\]]");function ix(t,e,n){if(e.search(qce)>=0)throw c_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $m(...e.split("."))._internalPath}catch{throw c_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function c_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ve(J.INVALID_ARGUMENT,a+t+c)}function w3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Gce extends T3{data(){return super.data()}}function uT(t,e){return typeof e=="string"?ix(t,e):e instanceof $m?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sx{}let ox=class extends sx{};function ia(t,e,...n){let r=[];e instanceof sx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof ax).length,a=s.filter(c=>c instanceof dT).length;if(o>1||o>0&&a>0)throw new ve(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class dT extends ox{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dT(e,n,r)}_apply(e){const n=this._parse(e);return C3(e._query,n),new pa(e.firestore,e.converter,UI(e._query,n))}_parse(e){const n=Hm(e.firestore);return function(s,o,a,c,l,u,d){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ve(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){VM(d,u);const w=[];for(const y of d)w.push(jM(c,s,y));f={arrayValue:{values:w}}}else f=jM(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||VM(d,u),f=Kce(a,o,d,u==="in"||u==="not-in");return Cn.create(l,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cd(t,e,n){const r=e,i=uT("where",t);return dT._create(i,r,n)}class ax extends sx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ax(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)C3(o,c),o=UI(o,c)}(e._query,n),new pa(e.firestore,e.converter,UI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cx extends ox{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ve(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ve(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xp(s,o)}(e._query,this._field,this._direction);return new pa(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new kh(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Wd(t,e="asc"){const n=e,r=uT("orderBy",t);return cx._create(r,n)}class lx extends ox{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lx(e,n,r)}_apply(e){return new pa(e.firestore,e.converter,t_(e._query,this._limit,this._limitType))}}function Qce(t){return lx._create("limit",t,"F")}function jM(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new ve(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TB(e)&&n.indexOf("/")!==-1)throw new ve(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Lt.fromString(n));if(!Oe.isDocumentKey(r))throw new ve(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tM(t,new Oe(r))}if(n instanceof ln)return tM(t,n._key);throw new ve(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gw(n)}.`)}function VM(t,e){if(!Array.isArray(t)||t.length===0)throw new ve(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C3(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ve(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Yce{convertValue(e,n="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $c(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Zv].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>hn(o.doubleValue));return new io(n)}convertGeoPoint(e){return new ro(hn(e.latitude),hn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qp(e));default:return null}}convertTimestamp(e){const n=Cc(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);Et(zB(r),9688,{name:e});const i=new Yp(r.get(1),r.get(3)),s=new Oe(r.popFirst(5));return i.isEqual(n)||na(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Af{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Al extends T3{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new My(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Al._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Al._jsonSchemaVersion="firestore/documentSnapshot/1.0",Al._jsonSchema={type:Sn("string",Al._jsonSchemaVersion),bundleSource:Sn("string","DocumentSnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class My extends Al{data(e={}){return super.data(e)}}class kl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Af(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new My(this._firestore,this._userDataWriter,r.key,r,new Af(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new My(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Af(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new My(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Af(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Jce(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=kl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ak.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Jce(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){t=Rr(t,ln);const e=Rr(t.firestore,ho);return Fce(Vm(e),t._key).then(n=>S3(e,t,n))}kl._jsonSchemaVersion="firestore/querySnapshot/1.0",kl._jsonSchema={type:Sn("string",kl._jsonSchemaVersion),bundleSource:Sn("string","QuerySnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class dx extends Yce{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function $M(t){t=Rr(t,pa);const e=Rr(t.firestore,ho),n=Vm(e),r=new dx(e);return E3(t._query),Uce(n,t._query).then(i=>new kl(e,r,t,i))}function xa(t,e,n){t=Rr(t,ln);const r=Rr(t.firestore,ho),i=ux(t.converter,e,n);return Wm(r,[ex(Hm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pr.none())])}function Gr(t,e,n,...r){t=Rr(t,ln);const i=Rr(t.firestore,ho),s=Hm(i);let o;return o=typeof(e=ze(e))=="string"||e instanceof $m?y3(s,"updateDoc",t._key,e,n,r):g3(s,"updateDoc",t._key,e),Wm(i,[o.toMutation(t._key,Pr.exists(!0))])}function fo(t){return Wm(Rr(t.firestore,ho),[new rT(t._key,Pr.none())])}function Ph(t,e){const n=Rr(t.firestore,ho),r=Be(t),i=ux(t.converter,e);return Wm(n,[ex(Hm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pr.exists(!1))]).then(()=>r)}function so(t,...e){var c,l,u;t=ze(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||UM(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(UM(e[r])){const d=e[r];e[r]=(c=d.next)==null?void 0:c.bind(d),e[r+1]=(l=d.error)==null?void 0:l.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(t instanceof ln)o=Rr(t.firestore,ho),a=Xw(t._key.path),s={next:d=>{e[r]&&e[r](S3(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Rr(t,pa);o=Rr(d.firestore,ho),a=d._query;const f=new dx(o);s={next:m=>{e[r]&&e[r](new kl(o,f,d,m))},error:e[r+1],complete:e[r+2]},E3(t._query)}return function(f,m,w,y){const v=new Zk(y),E=new Yk(m,v,w);return f.asyncQueue.enqueueAndForget(async()=>qk(await a_(f),E)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>Gk(await a_(f),E))}}(Vm(o),a,i,s)}function Wm(t,e){return function(r,i){const s=new Ko;return r.asyncQueue.enqueueAndForget(async()=>Ice(await Lce(r),i,s)),s.promise}(Vm(t),e)}function S3(t,e,n){const r=n.docs.get(e._key),i=new dx(t);return new Al(t,i,e._key,r,new Af(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xce{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hm(e)}set(e,n,r){this._verifyNotCommitted();const i=fC(e,this._firestore),s=ux(i.converter,n,r),o=ex(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Pr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=fC(e,this._firestore);let o;return o=typeof(n=ze(n))=="string"||n instanceof $m?y3(this._dataReader,"WriteBatch.update",s._key,n,r,i):g3(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=fC(e,this._firestore);return this._mutations=this._mutations.concat(new rT(n._key,Pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fC(t,e){if((t=ze(t)).firestore!==e)throw new ve(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return new zm("deleteField")}function QI(){return new tx("serverTimestamp")}function I3(...t){return new nx("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){return Vm(t=Rr(t,ho)),new Xce(t,e=>Wm(t,e))}(function(e,n=!0){(function(i){Ih=i})(jc),Or(new wr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ho(new qse(r.getProvider("auth-internal")),new Yse(o,r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ve(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yp(l.options.projectId,u)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),In(BO,HO,e),In(BO,HO,"esm2020")})();var Zce="firebase",ele="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(Zce,ele,"app");function b3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tle=b3,A3=new Uc("auth","Firebase",b3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Mm("@firebase/auth");function nle(t,...e){l_.logLevel<=st.WARN&&l_.warn(`Auth (${jc}): ${t}`,...e)}function Dy(t,...e){l_.logLevel<=st.ERROR&&l_.error(`Auth (${jc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,...e){throw fx(t,...e)}function ri(t,...e){return fx(t,...e)}function hx(t,e,n){const r={...tle(),[e]:n};return new Uc("auth","Firebase",r).create(e,{appName:t.name})}function oo(t){return hx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zi(t,"argument-error"),hx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return A3.create(t,...e)}function Ee(t,e,...n){if(!t)throw fx(e,...n)}function Uo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dy(e),new Error(e)}function sa(t,e){t||Uo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function x3(){return BM()==="http:"||BM()==="https:"}function BM(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x3()||U$()||"connection"in navigator)?navigator.onLine:!0}function ile(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.shortDelay=e,this.longDelay=n,sa(n>e,"Short delay should be less than long delay!"),this.isMobile=Ek()||j$()}get(){return rle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e){sa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Uo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Uo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Uo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ole=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ale=new Km(3e4,6e4);function Lr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ci(t,e,n,r,i={}){return P3(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=cu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:c,...s};return wie()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(l.credentials="include"),R3.fetch()(await N3(t,t.config.apiHost,n,a),l)})}async function P3(t,e,n){t._canInitEmulator=!1;const r={...sle,...e};try{const i=new lle(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw kf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw kf(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw hx(t,u,l);zi(t,u)}}catch(i){if(i instanceof ki)throw i;zi(t,"network-request-failed",{message:String(i)})}}async function Hc(t,e,n,r,i={}){const s=await ci(t,e,n,r,i);return"mfaPendingCredential"in s&&zi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function N3(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?px(t.config,i):`${t.config.apiScheme}://${i}`;return ole.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function cle(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lle{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),ale.get())})}}function kf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ri(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){return t!==void 0&&t.getResponse!==void 0}function zM(t){return t!==void 0&&t.enterprise!==void 0}class O3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cle(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ule(t){return(await ci(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function M3(t,e){return ci(t,"GET","/v2/recaptchaConfig",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dle(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function u_(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hle(t,e=!1){const n=ze(t),r=await n.getIdToken(e),i=mx(r);Ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zf(mC(i.auth_time)),issuedAtTime:Zf(mC(i.iat)),expirationTime:Zf(mC(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mC(t){return Number(t)*1e3}function mx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dy("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qv(n);return i?JSON.parse(i):(Dy("Failed to decode base64 JWT payload"),null)}catch(i){return Dy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function WM(t){const e=mx(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ki&&fle(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fle({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ple{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zf(this.lastLoginAt),this.creationTime=Zf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Kd(t,u_(e,{idToken:n}));Ee(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?D3(i.providerUserInfo):[],o=gle(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new XI(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,u)}async function mle(t){const e=ze(t);await d_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gle(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function D3(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yle(t,e){const n=await P3(t,{},async()=>{const r=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await N3(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(c.credentials="include"),R3.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vle(t,e){return ci(t,"POST","/v2/accounts:revokeToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=WM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await yle(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ld;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ld,this.toJSON())}_performRefresh(){return Uo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new ple(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new XI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Kd(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hle(this,e)}reload(){return mle(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await d_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await Kd(this,dle(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:w,stsTokenManager:y}=n;Ee(d&&y,e,"internal-error");const v=ld.fromJSON(this.name,y);Ee(typeof d=="string",e,"internal-error"),Ca(r,e.name),Ca(i,e.name),Ee(typeof f=="boolean",e,"internal-error"),Ee(typeof m=="boolean",e,"internal-error"),Ca(s,e.name),Ca(o,e.name),Ca(a,e.name),Ca(c,e.name),Ca(l,e.name),Ca(u,e.name);const E=new ls({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:v,createdAt:l,lastLoginAt:u});return w&&Array.isArray(w)&&(E.providerData=w.map(T=>({...T}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new ld;i.updateFromServerResponse(n);const s=new ls({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await d_(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?D3(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ld;a.updateFromIdToken(r);const c=new ls({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new XI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=new Map;function jo(t){sa(t instanceof Function,"Expected a class definition");let e=KM.get(t);return e?(sa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}L3.type="NONE";const qM=L3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e,n){return`firebase:${t}:${e}:${n}`}class ud{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ly(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ly("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await u_(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ud(jo(qM),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||jo(qM);const o=Ly(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){let d;if(typeof u=="string"){const f=await u_(e,{idToken:u}).catch(()=>{});if(!f)break;d=await ls._fromGetAccountInfoResponse(e,f,u)}else d=ls._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ud(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new ud(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B3(e))return"Blackberry";if(H3(e))return"Webos";if(U3(e))return"Safari";if((e.includes("chrome/")||j3(e))&&!e.includes("edge/"))return"Chrome";if($3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function F3(t=_r()){return/firefox\//i.test(t)}function U3(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j3(t=_r()){return/crios\//i.test(t)}function V3(t=_r()){return/iemobile/i.test(t)}function $3(t=_r()){return/android/i.test(t)}function B3(t=_r()){return/blackberry/i.test(t)}function H3(t=_r()){return/webos/i.test(t)}function gx(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _le(t=_r()){var e;return gx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function wle(){return Tie()&&document.documentMode===10}function z3(t=_r()){return gx(t)||$3(t)||H3(t)||B3(t)||/windows phone/i.test(t)||V3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t,e=[]){let n;switch(t){case"Browser":n=GM(_r());break;case"Worker":n=`${GM(_r())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tle{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ele(t,e={}){return ci(t,"GET","/v2/passwordPolicy",Lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cle=6;class Sle{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Cle,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ile{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QM(this),this.idTokenSubscription=new QM(this),this.beforeStateQueue=new Tle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jo(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ud.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await u_(this,{idToken:e}),r=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await d_(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ile()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(oo(this));const n=e?ze(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ele(this),n=new Sle(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vle(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jo(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await ud.create(this,[jo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&nle(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wi(t){return ze(t)}class QM{constructor(e){this.auth=e,this.observer=null,this.addObserver=xie(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ble(t){qm=t}function yx(t){return qm.loadJS(t)}function Ale(){return qm.recaptchaV2Script}function kle(){return qm.recaptchaEnterpriseScript}function xle(){return qm.gapiScript}function K3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rle=500,Ple=6e4,ty=1e12;class Nle{constructor(e){this.auth=e,this.counter=ty,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Dle(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||ty;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||ty;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||ty;return(r=this._widgets.get(n))==null||r.execute(),""}}class Ole{constructor(){this.enterprise=new Mle}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Mle{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Dle{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ee(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Lle(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Ple)},Rle))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Lle(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const Fle="recaptcha-enterprise",ep="NO_RECAPTCHA";class q3{constructor(e){this.type=Fle,this.auth=Wi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{M3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new O3(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;zM(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(ep)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ole().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&zM(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kle();c.length!==0&&(c+=a),yx(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function af(t,e,n,r=!1,i=!1){const s=new q3(t);let o;if(i)o=ep;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function xl(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await af(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await af(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await af(t,e,n);return r(t,a).catch(async c=>{var l;if(((l=t._getRecaptchaConfig())==null?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await af(t,e,n,!1,!0);return r(t,u)}return Promise.reject(c)})}else{const a=await af(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function Ule(t){const e=Wi(t),n=await M3(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new O3(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new q3(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jle(t,e){const n=Ss(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(lo(s,e??{}))return i;zi(i,"already-initialized")}return n.initialize({options:e})}function Vle(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $le(t,e,n){const r=Wi(t);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=G3(e),{host:o,port:a}=Ble(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(lo(l,r.config.emulator)&&lo(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Cs(o)?(Nm(`${s}//${o}${c}`),Om("Auth",!0)):Hle()}function G3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ble(t){const e=G3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:YM(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:YM(o)}}}function YM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Hle(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Uo("not implemented")}_getIdTokenResponse(e){return Uo("not implemented")}_linkToIdToken(e,n){return Uo("not implemented")}_getReauthenticationResolver(e){return Uo("not implemented")}}async function zle(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wle(t,e){return Hc(t,"POST","/v1/accounts:signInWithPassword",Lr(t,e))}async function Q3(t,e){return ci(t,"POST","/v1/accounts:sendOobCode",Lr(t,e))}async function Kle(t,e){return Q3(t,e)}async function qle(t,e){return Q3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gle(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}async function Qle(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends hT{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xl(e,n,"signInWithPassword",Wle,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Gle(e,{email:this._email,oobCode:this._password});default:zi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xl(e,r,"signUpPassword",zle,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Qle(e,{idToken:n,email:this._email,oobCode:this._password});default:zi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(t,e){return Hc(t,"POST","/v1/accounts:signInWithIdp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yle="http://localhost";class oa extends hT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new oa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return dd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,dd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,dd(e,n)}buildRequest(){const e={requestUri:Yle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){return ci(t,"POST","/v1/accounts:sendVerificationCode",Lr(t,e))}async function Jle(t,e){return Hc(t,"POST","/v1/accounts:signInWithPhoneNumber",Lr(t,e))}async function Xle(t,e){const n=await Hc(t,"POST","/v1/accounts:signInWithPhoneNumber",Lr(t,e));if(n.temporaryProof)throw kf(t,"account-exists-with-different-credential",n);return n}const Zle={USER_NOT_FOUND:"user-not-found"};async function eue(t,e){const n={...e,operation:"REAUTH"};return Hc(t,"POST","/v1/accounts:signInWithPhoneNumber",Lr(t,n),Zle)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends hT{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new tp({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new tp({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Jle(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Xle(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return eue(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new tp({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tue(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nue(t){const e=Ef(Cf(t)).link,n=e?Ef(Cf(e)).deep_link_id:null,r=Ef(Cf(t)).deep_link_id;return(r?Ef(Cf(r)).link:null)||r||n||e||t}class vx{constructor(e){const n=Ef(Cf(e)),r=n.apiKey??null,i=n.oobCode??null,s=tue(n.mode??null);Ee(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nue(e);try{return new vx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.providerId=Nh.PROVIDER_ID}static credential(e,n){return tm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=vx.parseLink(n);return Ee(r,"argument-error"),tm._fromEmailAndCode(e,r.code,r.tenantId)}}Nh.PROVIDER_ID="password";Nh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends fT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hd extends Oh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Ee("providerId"in n&&"signInMethod"in n,"argument-error"),oa._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Ee(e.idToken||e.accessToken,"argument-error"),oa._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return hd.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hd.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new hd(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Oh{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Da.credential(e.oauthAccessToken)}catch{return null}}}Da.FACEBOOK_SIGN_IN_METHOD="facebook.com";Da.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oo.credential(n,r)}catch{return null}}}Oo.GOOGLE_SIGN_IN_METHOD="google.com";Oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Oh{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return La.credential(e.oauthAccessToken)}catch{return null}}}La.GITHUB_SIGN_IN_METHOD="github.com";La.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends Oh{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Fa.credential(n,r)}catch{return null}}}Fa.TWITTER_SIGN_IN_METHOD="twitter.com";Fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rue(t,e){return Hc(t,"POST","/v1/accounts:signUp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ls._fromIdTokenResponse(e,r,i),o=XM(r);return new Kl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=XM(r);return new Kl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function XM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends ki{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,h_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new h_(e,n,r,i)}}function Y3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?h_._fromErrorAndOperation(t,s,e,r):s})}async function iue(t,e,n=!1){const r=await Kd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sue(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(oo(r));const i="reauthenticate";try{const s=await Kd(t,Y3(r,i,e,t),n);Ee(s.idToken,r,"internal-error");const o=mx(s.idToken);Ee(o,r,"internal-error");const{sub:a}=o;return Ee(t.uid===a,r,"user-mismatch"),Kl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e,n=!1){if(Zn(t.app))return Promise.reject(oo(t));const r="signIn",i=await Y3(t,r,e),s=await Kl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function X3(t,e){return J3(Wi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t){const e=Wi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oue(t,e,n){const r=Wi(t);await xl(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qle,"EMAIL_PASSWORD_PROVIDER")}async function aue(t,e,n){if(Zn(t.app))return Promise.reject(oo(t));const r=Wi(t),o=await xl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rue,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Z3(t),c}),a=await Kl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function cue(t,e,n){return Zn(t.app)?Promise.reject(oo(t)):X3(ze(t),Nh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Z3(t),r})}async function ZM(t,e){const n=ze(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await Kle(n.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lue(t,e){return ci(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uue(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ze(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Kd(r,lue(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function due(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function hue(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function fue(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function pue(t){return ze(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){return ci(t,"POST","/v2/accounts/mfaEnrollment:start",Lr(t,e))}const f_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(f_,"1"),this.storage.removeItem(f_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mue=1e3,gue=10;class tH extends eH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);wle()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gue):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tH.type="LOCAL";const yue=tH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH extends eH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nH.type="SESSION";const rH=nH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vue(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),c=await vue(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=_x("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function wue(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function Tue(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Eue(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Cue(){return wx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH="firebaseLocalStorageDb",Sue=1,p_="firebaseLocalStorage",sH="fbase_key";class Gm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mT(t,e){return t.transaction([p_],e?"readwrite":"readonly").objectStore(p_)}function Iue(){const t=indexedDB.deleteDatabase(iH);return new Gm(t).toPromise()}function ZI(){const t=indexedDB.open(iH,Sue);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(p_,{keyPath:sH})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(p_)?e(r):(r.close(),await Iue(),e(await ZI()))})})}async function tD(t,e,n){const r=mT(t,!0).put({[sH]:e,value:n});return new Gm(r).toPromise()}async function bue(t,e){const n=mT(t,!1).get(e),r=await new Gm(n).toPromise();return r===void 0?null:r.value}function nD(t,e){const n=mT(t,!0).delete(e);return new Gm(n).toPromise()}const Aue=800,kue=3;class oH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ZI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kue)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pT._getInstance(Cue()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Tue(),!this.activeServiceWorker)return;this.sender=new _ue(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Eue()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ZI();return await tD(e,f_,"1"),await nD(e,f_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bue(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mT(i,!1).getAll();return new Gm(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Aue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oH.type="LOCAL";const xue=oH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t,e){return ci(t,"POST","/v2/accounts/mfaSignIn:start",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=K3("rcb"),Rue=new Km(3e4,6e4);class Pue{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Tn().grecaptcha)!=null&&e.render)}load(e,n=""){return Ee(Nue(n),e,"argument-error"),this.shouldResolveImmediately(n)&&HM(Tn().grecaptcha)?Promise.resolve(Tn().grecaptcha):new Promise((r,i)=>{const s=Tn().setTimeout(()=>{i(ri(e,"network-request-failed"))},Rue.get());Tn()[gC]=()=>{Tn().clearTimeout(s),delete Tn()[gC];const a=Tn().grecaptcha;if(!a||!HM(a)){i(ri(e,"internal-error"));return}const c=a.render;a.render=(l,u)=>{const d=c(l,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${Ale()}?${cu({onload:gC,render:"explicit",hl:n})}`;yx(o).catch(()=>{clearTimeout(s),i(ri(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Tn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Nue(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Oue{async load(e){return new Nle(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="recaptcha",Mue={theme:"light",type:"image"};class Due{constructor(e,n,r={...Mue}){this.parameters=r,this.type=np,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wi(e),this.isInvisible=this.parameters.size==="invisible",Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Ee(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oue:new Pue,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Tn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ee(x3()&&!wx(),this.auth,"internal-error"),await Lue(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await ule(this.auth);Ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Lue(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fue{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=tp._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Uue(t,e,n){if(Zn(t.app))return Promise.reject(oo(t));const r=Wi(t),i=await jue(r,e,ze(n));return new Fue(i,s=>X3(r,s))}async function jue(t,e,n){var r;if(!t._getRecaptchaConfig())try{await Ule(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){Ee(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await xl(t,o,"mfaSmsEnrollment",async(u,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===ep){Ee((n==null?void 0:n.type)===np,u,"argument-error");const f=await yC(u,d,n);return eD(u,f)}return eD(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{Ee(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Ee(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await xl(t,a,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===ep){Ee((n==null?void 0:n.type)===np,d,"argument-error");const m=await yC(d,f,n);return rD(d,m)}return rD(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await xl(t,s,"sendVerificationCode",async(l,u)=>{if(u.captchaResponse===ep){Ee((n==null?void 0:n.type)===np,l,"argument-error");const d=await yC(l,u,n);return JM(l,d)}return JM(l,u)},"PHONE_PROVIDER").catch(l=>Promise.reject(l))).sessionInfo}}finally{n==null||n._reset()}}async function yC(t,e,n){Ee(n.type===np,t,"argument-error");const r=await n.verify();Ee(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){return e?jo(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends hT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return dd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return dd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vue(t){return J3(t.auth,new Ex(t),t.bypassAuthState)}function $ue(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),sue(n,new Ex(t),t.bypassAuthState)}async function Bue(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),iue(n,new Ex(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vue;case"linkViaPopup":case"linkViaRedirect":return Bue;case"reauthViaPopup":case"reauthViaRedirect":return $ue;default:zi(this.auth,"internal-error")}}resolve(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hue=new Km(2e3,1e4);async function zue(t,e,n){if(Zn(t.app))return Promise.reject(ri(t,"operation-not-supported-in-this-environment"));const r=Wi(t);k3(t,e,fT);const i=Tx(r,n);return new Qa(r,"signInViaPopup",e,i).executeNotNull()}async function Wue(t,e,n){const r=ze(t);k3(r.auth,e,fT);const i=Tx(r.auth,n);return new Qa(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Qa extends aH{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){sa(this.filter.length===1,"Popup operations only handle one event");const e=_x();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hue.get())};e()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kue="pendingRedirect",Fy=new Map;class que extends aH{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fy.get(this.auth._key());if(!e){try{const r=await Gue(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fy.set(this.auth._key(),e)}return this.bypassAuthState||Fy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gue(t,e){const n=Jue(e),r=Yue(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Que(t,e){Fy.set(t._key(),e)}function Yue(t){return jo(t._redirectPersistence)}function Jue(t){return Ly(Kue,t.config.apiKey,t.name)}async function Xue(t,e,n=!1){if(Zn(t.app))return Promise.reject(oo(t));const r=Wi(t),i=Tx(r,e),o=await new que(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zue=10*60*1e3;class ede{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tde(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cH(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zue&&this.cachedEventUids.clear(),this.cachedEventUids.has(iD(e))}saveEventToCache(e){this.cachedEventUids.add(iD(e)),this.lastProcessedEventTime=Date.now()}}function iD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tde(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nde(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rde=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ide=/^https?/;async function sde(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nde(t);for(const n of e)try{if(ode(n))return}catch{}zi(t,"unauthorized-domain")}function ode(t){const e=JI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ide.test(n))return!1;if(rde.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ade=new Km(3e4,6e4);function sD(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cde(t){return new Promise((e,n)=>{var i,s,o;function r(){sD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sD(),n(ri(t,"network-request-failed"))},timeout:ade.get()})}if((s=(i=Tn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Tn().gapi)!=null&&o.load)r();else{const a=K3("iframefcb");return Tn()[a]=()=>{gapi.load?r():n(ri(t,"network-request-failed"))},yx(`${xle()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Uy=null,e})}let Uy=null;function lde(t){return Uy=Uy||cde(t),Uy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ude=new Km(5e3,15e3),dde="__/auth/iframe",hde="emulator/auth/iframe",fde={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pde=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mde(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?px(e,hde):`https://${t.config.authDomain}/${dde}`,r={apiKey:e.apiKey,appName:t.name,v:jc},i=pde.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${cu(r).slice(1)}`}async function gde(t){const e=await lde(t),n=Tn().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:mde(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fde,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ri(t,"network-request-failed"),a=Tn().setTimeout(()=>{s(o)},ude.get());function c(){Tn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yde={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vde=500,_de=600,wde="_blank",Tde="http://localhost";class oD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ede(t,e,n,r=vde,i=_de){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...yde,width:r.toString(),height:i.toString(),top:s,left:o},l=_r().toLowerCase();n&&(a=j3(l)?wde:n),F3(l)&&(e=e||Tde,c.scrollbars="yes");const u=Object.entries(c).reduce((f,[m,w])=>`${f}${m}=${w},`,"");if(_le(l)&&a!=="_self")return Cde(e||"",a),new oD(null);const d=window.open(e||"",a,u);Ee(d,t,"popup-blocked");try{d.focus()}catch{}return new oD(d)}function Cde(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sde="__/auth/handler",Ide="emulator/auth/handler",bde=encodeURIComponent("fac");async function aD(t,e,n,r,i,s){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jc,eventId:i};if(e instanceof fT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",II(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Oh){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${bde}=${encodeURIComponent(c)}`:"";return`${Ade(t)}?${cu(a).slice(1)}${l}`}function Ade({config:t}){return t.emulator?px(t,Ide):`https://${t.authDomain}/${Sde}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="webStorageSupport";class kde{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rH,this._completeRedirectFn=Xue,this._overrideRedirectResult=Que}async _openPopup(e,n,r,i){var o;sa((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await aD(e,n,r,JI(),i);return Ede(e,s,_x())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await aD(e,n,r,JI(),i);return wue(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(sa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gde(e),r=new ede(e);return n.register("authEvent",i=>(Ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vC,{type:vC},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[vC];s!==void 0&&n(!!s),zi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sde(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return z3()||U3()||gx()}}const xde=kde;var cD="@firebase/auth",lD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rde{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pde(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nde(t){Or(new wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W3(t)},l=new Ile(r,i,s,c);return Vle(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Or(new wr("auth-internal",e=>{const n=Wi(e.getProvider("auth").getImmediate());return(r=>new Rde(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),In(cD,lD,Pde(t)),In(cD,lD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode=5*60,Mde=F$("authIdTokenMaxAge")||Ode;let uD=null;const Dde=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mde)return;const i=n==null?void 0:n.token;uD!==i&&(uD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Lde(t=Vc()){const e=Ss(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jle(t,{popupRedirectResolver:xde,persistence:[xue,yue,rH]}),r=F$("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Dde(s.toString());hue(n,o,()=>o(n.currentUser)),due(n,a=>o(a))}}const i=D$("auth");return i&&$le(n,`http://${i}`),n}function Fde(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ble({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ri("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Fde().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nde("Browser");var dD={};const hD="@firebase/database",fD="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lH="";function Ude(t){lH=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Bn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wp(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vde{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return vo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jde(e)}}catch{}return new Vde},gl=uH("localStorage"),$de=uH("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Mm("@firebase/database"),Bde=function(){let t=1;return function(){return t++}}(),dH=function(t){const e=Nie(t),n=new kie;n.update(e);const r=n.digest();return wk.encodeByteArray(r)},Qm=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Qm.apply(null,r):typeof r=="object"?e+=Bn(r):e+=r,e+=" "}return e};let rp=null,pD=!0;const Hde=function(t,e){he(!e,"Can't turn on custom loggers persistently."),fd.logLevel=st.VERBOSE,rp=fd.log.bind(fd)},Xn=function(...t){if(pD===!0&&(pD=!1,rp===null&&$de.get("logging_enabled")===!0&&Hde()),rp){const e=Qm.apply(null,t);rp(e)}},Ym=function(t){return function(...e){Xn(t,...e)}},eb=function(...t){const e="FIREBASE INTERNAL ERROR: "+Qm(...t);fd.error(e)},aa=function(...t){const e=`FIREBASE FATAL ERROR: ${Qm(...t)}`;throw fd.error(e),new Error(e)},Nr=function(...t){const e="FIREBASE WARNING: "+Qm(...t);fd.warn(e)},zde=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Nr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Cx=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Wde=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ql="[MIN_NAME]",kc="[MAX_NAME]",du=function(t,e){if(t===e)return 0;if(t===ql||e===kc)return-1;if(e===ql||t===kc)return 1;{const n=mD(t),r=mD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Kde=function(t,e){return t===e?0:t<e?-1:1},cf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Bn(e))},Sx=function(t){if(typeof t!="object"||t===null)return Bn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Bn(e[r]),n+=":",n+=Sx(t[e[r]]);return n+="}",n},hH=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ir(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const fH=function(t){he(!Cx(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},qde=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Gde=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Qde(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Yde=new RegExp("^-?(0*)\\d{1,10}$"),Jde=-2147483648,Xde=2147483647,mD=function(t){if(Yde.test(t)){const e=Number(t);if(e>=Jde&&e<=Xde)return e}return null},Mh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Nr("Exception was thrown by user callback.",n),e},Math.floor(0))}},Zde=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ip=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ehe{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Zn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Nr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nr(e)}}class jy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}jy.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="5",pH="v",mH="s",gH="r",yH="f",vH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_H="ls",wH="p",tb="ac",TH="websocket",EH="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function nhe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function SH(t,e,n){he(typeof e=="string","typeof type must == string"),he(typeof n=="object","typeof params must == object");let r;if(e===TH)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===EH)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);nhe(t)&&(n.ns=t.namespace);const i=[];return ir(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rhe{constructor(){this.counters_={}}incrementCounter(e,n=1){vo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return die(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C={},wC={};function bx(t){const e=t.toString();return _C[e]||(_C[e]=new rhe),_C[e]}function ihe(t,e){const n=t.toString();return wC[n]||(wC[n]=e()),wC[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class she{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="start",ohe="close",ahe="pLPCommand",che="pRTLPCB",IH="id",bH="pw",AH="ser",lhe="cb",uhe="seg",dhe="ts",hhe="d",fhe="dframe",kH=1870,xH=30,phe=kH-xH,mhe=25e3,ghe=3e4;class Qu{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ym(e),this.stats_=bx(n),this.urlFn=c=>(this.appCheckToken&&(c[tb]=this.appCheckToken),SH(n,EH,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new she(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ghe)),Wde(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ax((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gD)this.id=a,this.password=c;else if(o===ohe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[gD]="t",r[AH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[lhe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[pH]=Ix,this.transportSessionId&&(r[mH]=this.transportSessionId),this.lastSessionId&&(r[_H]=this.lastSessionId),this.applicationId&&(r[wH]=this.applicationId),this.appCheckToken&&(r[tb]=this.appCheckToken),typeof location<"u"&&location.hostname&&vH.test(location.hostname)&&(r[gH]=yH);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qu.forceAllow_=!0}static forceDisallow(){Qu.forceDisallow_=!0}static isAvailable(){return Qu.forceAllow_?!0:!Qu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!qde()&&!Gde()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Bn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=O$(n),i=hH(r,phe);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[fhe]="t",r[IH]=e,r[bH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Bn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ax{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Bde(),window[ahe+this.uniqueCallbackIdentifier]=e,window[che+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ax.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xn("frame writing exception"),a.stack&&Xn(a.stack),Xn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[IH]=this.myID,e[bH]=this.myPW,e[AH]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xH+r.length<=kH;){const o=this.pendingSegs.shift();r=r+"&"+uhe+i+"="+o.seg+"&"+dhe+i+"="+o.ts+"&"+hhe+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(mhe)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Xn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yhe=16384,vhe=45e3;let m_=null;typeof MozWebSocket<"u"?m_=MozWebSocket:typeof WebSocket<"u"&&(m_=WebSocket);class ss{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ym(this.connId),this.stats_=bx(n),this.connURL=ss.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[pH]=Ix,typeof location<"u"&&location.hostname&&vH.test(location.hostname)&&(o[gH]=yH),n&&(o[mH]=n),r&&(o[_H]=r),i&&(o[tb]=i),s&&(o[wH]=s),SH(e,TH,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gl.set("previous_websocket_failure",!0);try{let r;V$(),this.mySock=new m_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ss.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&m_!==null&&!ss.forceDisallow_}static previouslyFailed(){return gl.isInMemoryStorage||gl.get("previous_websocket_failure")===!0}markConnectionHealthy(){gl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Wp(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(he(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Bn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=hH(n,yhe);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(vhe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ss.responsesRequiredToBeHealthy=2;ss.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{static get ALL_TRANSPORTS(){return[Qu,ss]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ss&&ss.isAvailable();let r=n&&!ss.previouslyFailed();if(e.webSocketOnly&&(n||Nr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ss];else{const i=this.transports_=[];for(const s of nm.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);nm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}nm.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _he=6e4,whe=5e3,The=10*1024,Ehe=100*1024,TC="t",yD="d",Che="s",vD="r",She="e",_D="o",wD="a",TD="n",ED="p",Ihe="h";class bhe{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ym("c:"+this.id+":"),this.transportManager_=new nm(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ip(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ehe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>The?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(TC in e){const n=e[TC];n===wD?this.upgradeIfSecondaryHealthy_():n===vD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_D&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=cf("t",e),r=cf("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ED,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:TD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=cf("t",e),r=cf("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=cf(TC,e);if(yD in e){const r=e[yD];if(n===Ihe){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===TD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Che?this.onConnectionShutdown_(r):n===vD?this.onReset_(r):n===She?eb("Server Error: "+r):n===_D?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eb("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ix!==r&&Nr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ip(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_he))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ip(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(whe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ED,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e){this.allowedEvents_=e,this.listeners_={},he(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){he(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends PH{static getInstance(){return new g_}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ek()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return he(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=32,SD=768;class At{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Tt(){return new At("")}function et(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xc(t){return t.pieces_.length-t.pieceNum_}function Dt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new At(t.pieces_,e)}function kx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ahe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function rm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function NH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new At(e,0)}function cn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof At)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new At(n,0)}function tt(t){return t.pieceNum_>=t.pieces_.length}function Yr(t,e){const n=et(t),r=et(e);if(n===null)return e;if(n===r)return Yr(Dt(t),Dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function khe(t,e){const n=rm(t,0),r=rm(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=du(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function xx(t,e){if(xc(t)!==xc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ji(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xc(t)>xc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class xhe{constructor(e,n){this.errorPrefix_=n,this.parts_=rm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Kw(this.parts_[r]);OH(this)}}function Rhe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Kw(e),OH(t)}function Phe(t){const e=t.parts_.pop();t.byteLength_-=Kw(e),t.parts_.length>0&&(t.byteLength_-=1)}function OH(t){if(t.byteLength_>SD)throw new Error(t.errorPrefix_+"has a key path longer than "+SD+" bytes ("+t.byteLength_+").");if(t.parts_.length>CD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+CD+") or object contains a cycle "+el(t))}function el(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx extends PH{static getInstance(){return new Rx}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return he(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=1e3,Nhe=60*5*1e3,ID=30*1e3,Ohe=1.3,Mhe=3e4,Dhe="server_kill",bD=3;class qo extends RH{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=qo.nextPersistentConnectionId_++,this.log_=Ym("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lf,this.maxReconnectDelay_=Nhe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!V$())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Rx.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&g_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Bn(s)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Pm,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;qo.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&vo(e,"w")){const r=Fd(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Nr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Aie(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ID)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=bie(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Bn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):eb("Unrecognized action received from server: "+Bn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Mhe&&(this.reconnectDelay_=lf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ohe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+qo.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){he(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Xn("getToken() completed but was canceled"):(Xn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new bhe(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Nr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Dhe)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Nr(d),c())}}}interrupt(e){Xn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],II(this.interruptReasons_)&&(this.reconnectDelay_=lf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Sx(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new At(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Xn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bD&&(this.reconnectDelay_=ID,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+lH.replace(/\./g,"-")]=1,Ek()?e["framework.cordova"]=1:j$()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=g_.getInstance().currentlyOnline();return II(this.interruptReasons_)&&e}}qo.nextPersistentConnectionId_=0;qo.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new nt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new nt(ql,e),i=new nt(ql,n);return this.compare(r,i)!==0}minPost(){return nt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ny;class MH extends gT{static get __EMPTY_NODE(){return ny}static set __EMPTY_NODE(e){ny=e}compare(e,n){return du(e.name,n.name)}isDefinedOn(e){throw Sh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return nt.MIN}maxPost(){return new nt(kc,ny)}makePost(e,n){return he(typeof e=="string","KeyIndex indexValue must always be a string."),new nt(e,ny)}toString(){return".key"}}const Rl=new MH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=i??Jr.EMPTY_NODE,this.right=s??Jr.EMPTY_NODE}copy(e,n,r,i,s){return new Vn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Jr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Vn.RED=!0;Vn.BLACK=!1;class Lhe{copy(e,n,r,i,s){return this}insert(e,n,r){return new Vn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Jr{constructor(e,n=Jr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Jr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Jr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ry(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ry(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ry(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ry(this.root_,null,this.comparator_,!0,e)}}Jr.EMPTY_NODE=new Lhe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fhe(t,e){return du(t.name,e.name)}function Px(t,e){return du(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nb;function Uhe(t){nb=t}const DH=function(t){return typeof t=="number"?"number:"+fH(t):"string:"+t},LH=function(t){if(t.isLeafNode()){const e=t.val();he(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vo(e,".sv"),"Priority must be a string or number.")}else he(t===nb||t.isEmpty(),"priority of unexpected type.");he(t===nb||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AD;class Ln{static set __childrenNodeConstructor(e){AD=e}static get __childrenNodeConstructor(){return AD}constructor(e,n=Ln.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,he(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),LH(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ln(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return tt(e)?this:et(e)===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ln.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=et(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(he(r!==".priority"||xc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ln.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+DH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=fH(this.value_):e+=this.value_,this.lazyHash_=dH(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ln.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ln.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ln.VALUE_TYPE_ORDER.indexOf(n),s=Ln.VALUE_TYPE_ORDER.indexOf(r);return he(i>=0,"Unknown leaf type: "+n),he(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ln.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FH,UH;function jhe(t){FH=t}function Vhe(t){UH=t}class $he extends gT{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?du(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return nt.MIN}maxPost(){return new nt(kc,new Ln("[PRIORITY-POST]",UH))}makePost(e,n){const r=FH(e);return new nt(n,new Ln("[PRIORITY-POST]",r))}toString(){return".priority"}}const Xt=new $he;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bhe=Math.log(2);class Hhe{constructor(e){const n=s=>parseInt(Math.log(s)/Bhe,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const y_=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new Vn(f,d.node,Vn.BLACK,null,null);{const m=parseInt(u/2,10)+c,w=i(c,m),y=i(m+1,l);return d=t[m],f=n?n(d):d,new Vn(f,d.node,Vn.BLACK,w,y)}},s=function(c){let l=null,u=null,d=t.length;const f=function(w,y){const v=d-w,E=d;d-=w;const T=i(v+1,E),C=t[v],b=n?n(C):C;m(new Vn(b,C.node,y,null,T))},m=function(w){l?(l.left=w,l=w):(u=w,l=w)};for(let w=0;w<c.count;++w){const y=c.nextBitIsOne(),v=Math.pow(2,c.count-(w+1));y?f(v,Vn.BLACK):(f(v,Vn.BLACK),f(v,Vn.RED))}return u},o=new Hhe(t.length),a=s(o);return new Jr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EC;const Cu={};class Vo{static get Default(){return he(Cu&&Xt,"ChildrenNode.ts has not been loaded"),EC=EC||new Vo({".priority":Cu},{".priority":Xt}),EC}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Fd(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Jr?n:null}hasIndex(e){return vo(this.indexSet_,e.toString())}addIndex(e,n){he(e!==Rl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(nt.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=y_(r,e.getCompare()):a=Cu;const c=e.toString(),l={...this.indexSet_};l[c]=e;const u={...this.indexes_};return u[c]=a,new Vo(u,l)}addToIndexes(e,n){const r=Yv(this.indexes_,(i,s)=>{const o=Fd(this.indexSet_,s);if(he(o,"Missing index implementation for "+s),i===Cu)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(nt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),y_(a,o.getCompare())}else return Cu;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new nt(e.name,a))),c.insert(e,e.node)}});return new Vo(r,this.indexSet_)}removeFromIndexes(e,n){const r=Yv(this.indexes_,i=>{if(i===Cu)return i;{const s=n.get(e.name);return s?i.remove(new nt(e.name,s)):i}});return new Vo(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;class Ue{static get EMPTY_NODE(){return uf||(uf=new Ue(new Jr(Px),null,Vo.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&LH(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uf}updatePriority(e){return this.children_.isEmpty()?this:new Ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?uf:n}}getChild(e){const n=et(e);return n===null?this:this.getImmediateChild(n).getChild(Dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(he(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new nt(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?uf:this.priorityNode_;return new Ue(i,o,s)}}updateChild(e,n){const r=et(e);if(r===null)return n;{he(et(e)!==".priority"||xc(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Dt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Xt,(o,a)=>{n[o]=a.val(e),r++,s&&Ue.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+DH(this.getPriority().val())+":"),this.forEachChild(Xt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":dH(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new nt(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new nt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new nt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,nt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,nt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Jm?-1:0}withIndex(e){if(e===Rl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Rl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Xt),i=n.getIterator(Xt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Rl?null:this.indexMap_.get(e.toString())}}Ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class zhe extends Ue{constructor(){super(new Jr(Px),Ue.EMPTY_NODE,Vo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ue.EMPTY_NODE}isEmpty(){return!1}}const Jm=new zhe;Object.defineProperties(nt,{MIN:{value:new nt(ql,Ue.EMPTY_NODE)},MAX:{value:new nt(kc,Jm)}});MH.__EMPTY_NODE=Ue.EMPTY_NODE;Ln.__childrenNodeConstructor=Ue;Uhe(Jm);Vhe(Jm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe=!0;function $n(t,e=null){if(t===null)return Ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),he(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ln(n,$n(e))}if(!(t instanceof Array)&&Whe){const n=[];let r=!1;if(ir(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=$n(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new nt(o,c)))}}),n.length===0)return Ue.EMPTY_NODE;const s=y_(n,Fhe,o=>o.name,Px);if(r){const o=y_(n,Xt.getCompare());return new Ue(s,$n(e),new Vo({".priority":o},{".priority":Xt}))}else return new Ue(s,$n(e),Vo.Default)}else{let n=Ue.EMPTY_NODE;return ir(t,(r,i)=>{if(vo(t,r)&&r.substring(0,1)!=="."){const s=$n(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority($n(e))}}jhe($n);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends gT{constructor(e){super(),this.indexPath_=e,he(!tt(e)&&et(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?du(e.name,n.name):s}makePost(e,n){const r=$n(e),i=Ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new nt(n,i)}maxPost(){const e=Ue.EMPTY_NODE.updateChild(this.indexPath_,Jm);return new nt(kc,e)}toString(){return rm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Khe extends gT{compare(e,n){const r=e.node.compareTo(n.node);return r===0?du(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return nt.MIN}maxPost(){return nt.MAX}makePost(e,n){const r=$n(e);return new nt(n,r)}toString(){return".value"}}const jH=new Khe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t){return{type:"value",snapshotNode:t}}function qd(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function im(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function sm(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function qhe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){he(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(im(n,a)):he(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(qd(n,r)):o.trackChildChange(sm(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Xt,(i,s)=>{n.hasChild(i)||r.trackChildChange(im(i,s))}),n.isLeafNode()||n.forEachChild(Xt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(sm(i,s,o))}else r.trackChildChange(qd(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.indexedFilter_=new Ox(e.getIndex()),this.index_=e.getIndex(),this.startPost_=om.getStartPost_(e),this.endPost_=om.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new nt(n,r))||(r=Ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ue.EMPTY_NODE);const s=this;return n.forEachChild(Xt,(o,a)=>{s.matches(new nt(o,a))||(i=i.updateImmediateChild(o,Ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ghe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new om(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new nt(n,r))||(r=Ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ue.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,m)=>d(m,f)}else o=this.index_.getCompare();const a=e;he(a.numChildren()===this.limit_,"");const c=new nt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,c);if(u&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(sm(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(im(n,d));const y=a.updateImmediateChild(n,Ue.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(qd(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(im(l.name,l.node)),s.trackChildChange(qd(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ql}hasEnd(){return this.endSet_}getIndexEndValue(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xt}copy(){const e=new Mx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Qhe(t){return t.loadsAllData()?new Ox(t.getIndex()):t.hasLimit()?new Ghe(t):new om(t)}function Yhe(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Jhe(t,e){const n=t.copy();return n.index_=e,n}function kD(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Xt?n="$priority":t.index_===jH?n="$value":t.index_===Rl?n="$key":(he(t.index_ instanceof Nx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Bn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Bn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Bn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Bn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Bn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function xD(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends RH{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(he(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ym("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=v_.getListenId_(e,r),a={};this.listens_[o]=a;const c=kD(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Fd(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){const r=v_.getListenId_(e,n);delete this.listens_[r]}get(e){const n=kD(e._queryParams),r=e._path.toString(),i=new Pm;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Wp(a.responseText)}catch{Nr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Nr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xhe{constructor(){this.rootNode_=Ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){return{value:null,children:new Map}}function $H(t,e,n){if(tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=et(e);t.children.has(r)||t.children.set(r,__());const i=t.children.get(r);e=Dt(e),$H(i,e,n)}}function rb(t,e,n){t.value!==null?n(e,t.value):Zhe(t,(r,i)=>{const s=new At(e.toString()+"/"+r);rb(i,s,n)})}function Zhe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class efe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&ir(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=10*1e3,tfe=30*1e3,nfe=5*60*1e3;class rfe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new efe(e);const r=RD+(tfe-RD)*Math.random();ip(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ir(e,(i,s)=>{s>0&&vo(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ip(this.reportStats_.bind(this),Math.floor(Math.random()*2*nfe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(us||(us={}));function Dx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Lx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Fx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=us.ACK_USER_WRITE,this.source=Dx()}operationForChild(e){if(tt(this.path)){if(this.affectedTree.value!=null)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new At(e));return new w_(Tt(),n,this.revert)}}else return he(et(this.path)===e,"operationForChild called for unrelated child."),new w_(Dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.source=e,this.path=n,this.type=us.LISTEN_COMPLETE}operationForChild(e){return tt(this.path)?new am(this.source,Tt()):new am(this.source,Dt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=us.OVERWRITE}operationForChild(e){return tt(this.path)?new Gl(this.source,Tt(),this.snap.getImmediateChild(e)):new Gl(this.source,Dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=us.MERGE}operationForChild(e){if(tt(this.path)){const n=this.children.subtree(new At(e));return n.isEmpty()?null:n.value?new Gl(this.source,Tt(),n.value):new Gd(this.source,Tt(),n)}else return he(et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gd(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=et(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ife{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function sfe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(qhe(o.childName,o.snapshotNode))}),df(t,i,"child_removed",e,r,n),df(t,i,"child_added",e,r,n),df(t,i,"child_moved",s,r,n),df(t,i,"child_changed",e,r,n),df(t,i,"value",e,r,n),i}function df(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>afe(t,a,c)),o.forEach(a=>{const c=ofe(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function ofe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function afe(t,e,n){if(e.childName==null||n.childName==null)throw Sh("Should only compare child_ events.");const r=new nt(e.childName,e.snapshotNode),i=new nt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){return{eventCache:t,serverCache:e}}function sp(t,e,n,r){return yT(new Ql(e,n,r),t.serverCache)}function BH(t,e,n,r){return yT(t.eventCache,new Ql(e,n,r))}function ib(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Yl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CC;const cfe=()=>(CC||(CC=new Jr(Kde)),CC);class Mt{static fromObject(e){let n=new Mt(null);return ir(e,(r,i)=>{n=n.set(new At(r),i)}),n}constructor(e,n=cfe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Tt(),value:this.value};if(tt(e))return null;{const r=et(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Dt(e),n);return s!=null?{path:cn(new At(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tt(e))return this;{const n=et(e),r=this.children.get(n);return r!==null?r.subtree(Dt(e)):new Mt(null)}}set(e,n){if(tt(e))return new Mt(n,this.children);{const r=et(e),s=(this.children.get(r)||new Mt(null)).set(Dt(e),n),o=this.children.insert(r,s);return new Mt(this.value,o)}}remove(e){if(tt(e))return this.children.isEmpty()?new Mt(null):new Mt(null,this.children);{const n=et(e),r=this.children.get(n);if(r){const i=r.remove(Dt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Mt(null):new Mt(this.value,s)}else return this}}get(e){if(tt(e))return this.value;{const n=et(e),r=this.children.get(n);return r?r.get(Dt(e)):null}}setTree(e,n){if(tt(e))return n;{const r=et(e),s=(this.children.get(r)||new Mt(null)).setTree(Dt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Mt(this.value,o)}}fold(e){return this.fold_(Tt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(cn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Tt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(tt(e))return null;{const s=et(e),o=this.children.get(s);return o?o.findOnPath_(Dt(e),cn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Tt(),n)}foreachOnPath_(e,n,r){if(tt(e))return this;{this.value&&r(n,this.value);const i=et(e),s=this.children.get(i);return s?s.foreachOnPath_(Dt(e),cn(n,i),r):new Mt(null)}}foreach(e){this.foreach_(Tt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(cn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.writeTree_=e}static empty(){return new ps(new Mt(null))}}function op(t,e,n){if(tt(e))return new ps(new Mt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Yr(i,e);return s=s.updateChild(o,n),new ps(t.writeTree_.set(i,s))}else{const i=new Mt(n),s=t.writeTree_.setTree(e,i);return new ps(s)}}}function sb(t,e,n){let r=t;return ir(n,(i,s)=>{r=op(r,cn(e,i),s)}),r}function PD(t,e){if(tt(e))return ps.empty();{const n=t.writeTree_.setTree(e,new Mt(null));return new ps(n)}}function ob(t,e){return hu(t,e)!=null}function hu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Yr(n.path,e)):null}function ND(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Xt,(r,i)=>{e.push(new nt(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new nt(r,i.value))}),e}function mc(t,e){if(tt(e))return t;{const n=hu(t,e);return n!=null?new ps(new Mt(n)):new ps(t.writeTree_.subtree(e))}}function ab(t){return t.writeTree_.isEmpty()}function Qd(t,e){return HH(Tt(),t.writeTree_,e)}function HH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(he(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=HH(cn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(cn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){return qH(e,t)}function lfe(t,e,n,r,i){he(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=op(t.visibleWrites,e,n)),t.lastWriteId=r}function ufe(t,e,n,r){he(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=sb(t.visibleWrites,e,n),t.lastWriteId=r}function dfe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function hfe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);he(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&ffe(a,r.path)?i=!1:ji(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return pfe(t),!0;if(r.snap)t.visibleWrites=PD(t.visibleWrites,r.path);else{const a=r.children;ir(a,c=>{t.visibleWrites=PD(t.visibleWrites,cn(r.path,c))})}return!0}else return!1}function ffe(t,e){if(t.snap)return ji(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ji(cn(t.path,n),e))return!0;return!1}function pfe(t){t.visibleWrites=zH(t.allWrites,mfe,Tt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mfe(t){return t.visible}function zH(t,e,n){let r=ps.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)ji(n,o)?(a=Yr(n,o),r=op(r,a,s.snap)):ji(o,n)&&(a=Yr(o,n),r=op(r,Tt(),s.snap.getChild(a)));else if(s.children){if(ji(n,o))a=Yr(n,o),r=sb(r,a,s.children);else if(ji(o,n))if(a=Yr(o,n),tt(a))r=sb(r,Tt(),s.children);else{const c=Fd(s.children,et(a));if(c){const l=c.getChild(Dt(a));r=op(r,Tt(),l)}}}else throw Sh("WriteRecord should have .snap or .children")}}return r}function WH(t,e,n,r,i){if(!r&&!i){const s=hu(t.visibleWrites,e);if(s!=null)return s;{const o=mc(t.visibleWrites,e);if(ab(o))return n;if(n==null&&!ob(o,Tt()))return null;{const a=n||Ue.EMPTY_NODE;return Qd(o,a)}}}else{const s=mc(t.visibleWrites,e);if(!i&&ab(s))return n;if(!i&&n==null&&!ob(s,Tt()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ji(l.path,e)||ji(e,l.path))},a=zH(t.allWrites,o,e),c=n||Ue.EMPTY_NODE;return Qd(a,c)}}}function gfe(t,e,n){let r=Ue.EMPTY_NODE;const i=hu(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=mc(t.visibleWrites,e);return n.forEachChild(Xt,(o,a)=>{const c=Qd(mc(s,new At(o)),a);r=r.updateImmediateChild(o,c)}),ND(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=mc(t.visibleWrites,e);return ND(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function yfe(t,e,n,r,i){he(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=cn(e,n);if(ob(t.visibleWrites,s))return null;{const o=mc(t.visibleWrites,s);return ab(o)?i.getChild(n):Qd(o,i.getChild(n))}}function vfe(t,e,n,r){const i=cn(e,n),s=hu(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=mc(t.visibleWrites,i);return Qd(o,r.getNode().getImmediateChild(n))}else return null}function _fe(t,e){return hu(t.visibleWrites,e)}function wfe(t,e,n,r,i,s,o){let a;const c=mc(t.visibleWrites,e),l=hu(c,Tt());if(l!=null)a=l;else if(n!=null)a=Qd(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&u.length<i;)d(m,r)!==0&&u.push(m),m=f.getNext();return u}else return[]}function Tfe(){return{visibleWrites:ps.empty(),allWrites:[],lastWriteId:-1}}function T_(t,e,n,r){return WH(t.writeTree,t.treePath,e,n,r)}function jx(t,e){return gfe(t.writeTree,t.treePath,e)}function OD(t,e,n,r){return yfe(t.writeTree,t.treePath,e,n,r)}function E_(t,e){return _fe(t.writeTree,cn(t.treePath,e))}function Efe(t,e,n,r,i,s){return wfe(t.writeTree,t.treePath,e,n,r,i,s)}function Vx(t,e,n){return vfe(t.writeTree,t.treePath,e,n)}function KH(t,e){return qH(cn(t.treePath,e),t.writeTree)}function qH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;he(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),he(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,sm(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,im(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,qd(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,sm(r,e.snapshotNode,i.oldSnap));else throw Sh("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sfe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const GH=new Sfe;class $x{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ql(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Yl(this.viewCache_),s=Efe(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ife(t){return{filter:t}}function bfe(t,e){he(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),he(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Afe(t,e,n,r,i){const s=new Cfe;let o,a;if(n.type===us.OVERWRITE){const l=n;l.source.fromUser?o=cb(t,e,l.path,l.snap,r,i,s):(he(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!tt(l.path),o=C_(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===us.MERGE){const l=n;l.source.fromUser?o=xfe(t,e,l.path,l.children,r,i,s):(he(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=lb(t,e,l.path,l.children,r,i,a,s))}else if(n.type===us.ACK_USER_WRITE){const l=n;l.revert?o=Nfe(t,e,l.path,r,i,s):o=Rfe(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===us.LISTEN_COMPLETE)o=Pfe(t,e,n.path,r,s);else throw Sh("Unknown operation type: "+n.type);const c=s.getChanges();return kfe(e,o,c),{viewCache:o,changes:c}}function kfe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ib(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(VH(ib(e)))}}function QH(t,e,n,r,i,s){const o=e.eventCache;if(E_(r,n)!=null)return e;{let a,c;if(tt(n))if(he(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Yl(e),u=l instanceof Ue?l:Ue.EMPTY_NODE,d=jx(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=T_(r,Yl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=et(n);if(l===".priority"){he(xc(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=OD(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Dt(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const f=OD(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=Vx(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return sp(e,a,o.isFullyInitialized()||tt(n),t.filter.filtersNodes())}}function C_(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(tt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),m,null)}else{const m=et(n);if(!c.isCompleteForPath(n)&&xc(n)>1)return e;const w=Dt(n),v=c.getNode().getImmediateChild(m).updateChild(w,r);m===".priority"?l=u.updatePriority(c.getNode(),v):l=u.updateChild(c.getNode(),m,v,w,GH,null)}const d=BH(e,l,c.isFullyInitialized()||tt(n),u.filtersNodes()),f=new $x(i,d,s);return QH(t,d,n,i,f,a)}function cb(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new $x(i,e,s);if(tt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=sp(e,l,!0,t.filter.filtersNodes());else{const d=et(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=sp(e,l,a.isFullyInitialized(),a.isFiltered());else{const f=Dt(n),m=a.getNode().getImmediateChild(d);let w;if(tt(f))w=r;else{const y=u.getCompleteChild(d);y!=null?kx(f)===".priority"&&y.getChild(NH(f)).isEmpty()?w=y:w=y.updateChild(f,r):w=Ue.EMPTY_NODE}if(m.equals(w))c=e;else{const y=t.filter.updateChild(a.getNode(),d,w,f,u,o);c=sp(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function MD(t,e){return t.eventCache.isCompleteForChild(e)}function xfe(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=cn(n,c);MD(e,et(u))&&(a=cb(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=cn(n,c);MD(e,et(u))||(a=cb(t,a,u,l,i,s,o))}),a}function DD(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lb(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;tt(n)?l=r:l=new Mt(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=DD(t,m,f);c=C_(t,c,new At(d),w,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),y=DD(t,w,f);c=C_(t,c,new At(d),y,i,s,o,a)}}),c}function Rfe(t,e,n,r,i,s,o){if(E_(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(tt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return C_(t,e,n,c.getNode().getChild(n),i,s,a,o);if(tt(n)){let l=new Mt(null);return c.getNode().forEachChild(Rl,(u,d)=>{l=l.set(new At(u),d)}),lb(t,e,n,l,i,s,a,o)}else return e}else{let l=new Mt(null);return r.foreach((u,d)=>{const f=cn(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),lb(t,e,n,l,i,s,a,o)}}function Pfe(t,e,n,r,i){const s=e.serverCache,o=BH(e,s.getNode(),s.isFullyInitialized()||tt(n),s.isFiltered());return QH(t,o,n,r,GH,i)}function Nfe(t,e,n,r,i,s){let o;if(E_(r,n)!=null)return e;{const a=new $x(r,e,i),c=e.eventCache.getNode();let l;if(tt(n)||et(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=T_(r,Yl(e));else{const d=e.serverCache.getNode();he(d instanceof Ue,"serverChildren would be complete if leaf node"),u=jx(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{const u=et(n);let d=Vx(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Dt(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Ue.EMPTY_NODE,Dt(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=T_(r,Yl(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||E_(r,Tt())!=null,sp(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ofe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Ox(r.getIndex()),s=Qhe(r);this.processor_=Ife(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(Ue.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(Ue.EMPTY_NODE,a.getNode(),null),u=new Ql(c,o.isFullyInitialized(),i.filtersNodes()),d=new Ql(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=yT(d,u),this.eventGenerator_=new ife(this.query_)}get query(){return this.query_}}function Mfe(t){return t.viewCache_.serverCache.getNode()}function Dfe(t,e){const n=Yl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!tt(e)&&!n.getImmediateChild(et(e)).isEmpty())?n.getChild(e):null}function LD(t){return t.eventRegistrations_.length===0}function Lfe(t,e){t.eventRegistrations_.push(e)}function FD(t,e,n){const r=[];if(n){he(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function UD(t,e,n,r){e.type===us.MERGE&&e.source.queryId!==null&&(he(Yl(t.viewCache_),"We should always have a full cache before handling merges"),he(ib(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Afe(t.processor_,i,e,n,r);return bfe(t.processor_,s.viewCache),he(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,YH(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Ffe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,(s,o)=>{r.push(qd(s,o))}),n.isFullyInitialized()&&r.push(VH(n.getNode())),YH(t,r,n.getNode(),e)}function YH(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return sfe(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S_;class Ufe{constructor(){this.views=new Map}}function jfe(t){he(!S_,"__referenceConstructor has already been defined"),S_=t}function Vfe(){return he(S_,"Reference.ts has not been loaded"),S_}function $fe(t){return t.views.size===0}function Bx(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return he(s!=null,"SyncTree gave us an op for an invalid query."),UD(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(UD(o,e,n,r));return s}}function Bfe(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=T_(n,i?r:null),c=!1;a?c=!0:r instanceof Ue?(a=jx(n,r),c=!1):(a=Ue.EMPTY_NODE,c=!1);const l=yT(new Ql(a,c,!1),new Ql(r,i,!1));return new Ofe(e,l)}return o}function Hfe(t,e,n,r,i,s){const o=Bfe(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Lfe(o,n),Ffe(o,n)}function zfe(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Rc(t);if(i==="default")for(const[c,l]of t.views.entries())o=o.concat(FD(l,n,r)),LD(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=t.views.get(i);c&&(o=o.concat(FD(c,n,r)),LD(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Rc(t)&&s.push(new(Vfe())(e._repo,e._path)),{removed:s,events:o}}function JH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function pd(t,e){let n=null;for(const r of t.views.values())n=n||Dfe(r,e);return n}function XH(t,e){if(e._queryParams.loadsAllData())return vT(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ZH(t,e){return XH(t,e)!=null}function Rc(t){return vT(t)!=null}function vT(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I_;function Wfe(t){he(!I_,"__referenceConstructor has already been defined"),I_=t}function Kfe(){return he(I_,"Reference.ts has not been loaded"),I_}let qfe=1;class jD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mt(null),this.pendingWriteTree_=Tfe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function e6(t,e,n,r,i){return lfe(t.pendingWriteTree_,e,n,r,i),i?Dh(t,new Gl(Dx(),e,n)):[]}function Gfe(t,e,n,r){ufe(t.pendingWriteTree_,e,n,r);const i=Mt.fromObject(n);return Dh(t,new Gd(Dx(),e,i))}function Ya(t,e,n=!1){const r=dfe(t.pendingWriteTree_,e);if(hfe(t.pendingWriteTree_,e)){let s=new Mt(null);return r.snap!=null?s=s.set(Tt(),!0):ir(r.children,o=>{s=s.set(new At(o),!0)}),Dh(t,new w_(r.path,s,n))}else return[]}function _T(t,e,n){return Dh(t,new Gl(Lx(),e,n))}function Qfe(t,e,n){const r=Mt.fromObject(n);return Dh(t,new Gd(Lx(),e,r))}function Yfe(t,e){return Dh(t,new am(Lx(),e))}function Jfe(t,e,n){const r=zx(t,n);if(r){const i=Wx(r),s=i.path,o=i.queryId,a=Yr(s,e),c=new am(Fx(o),a);return Kx(t,s,c)}else return[]}function ub(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||ZH(o,e))){const c=zfe(o,e,n,r);$fe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,m)=>Rc(m));if(u&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const m=epe(f);for(let w=0;w<m.length;++w){const y=m[w],v=y.query,E=r6(t,y);t.listenProvider_.startListening(ap(v),b_(t,v),E.hashFn,E.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(ap(e),null):l.forEach(f=>{const m=t.queryToTagMap.get(wT(f));t.listenProvider_.stopListening(ap(f),m)}))}tpe(t,l)}return a}function Xfe(t,e,n,r){const i=zx(t,r);if(i!=null){const s=Wx(i),o=s.path,a=s.queryId,c=Yr(o,e),l=new Gl(Fx(a),c,n);return Kx(t,o,l)}else return[]}function Zfe(t,e,n,r){const i=zx(t,r);if(i){const s=Wx(i),o=s.path,a=s.queryId,c=Yr(o,e),l=Mt.fromObject(n),u=new Gd(Fx(a),c,l);return Kx(t,o,u)}else return[]}function VD(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,m)=>{const w=Yr(f,i);s=s||pd(m,w),o=o||Rc(m)});let a=t.syncPointTree_.get(i);a?(o=o||Rc(a),s=s||pd(a,Tt())):(a=new Ufe,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=Ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,w)=>{const y=pd(w,Tt());y&&(s=s.updateImmediateChild(m,y))}));const l=ZH(a,e);if(!l&&!e._queryParams.loadsAllData()){const f=wT(e);he(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=npe();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const u=Ux(t.pendingWriteTree_,i);let d=Hfe(a,e,n,u,s,c);if(!l&&!o&&!r){const f=XH(a,e);d=d.concat(rpe(t,e,f))}return d}function Hx(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Yr(o,e),l=pd(a,c);if(l)return l});return WH(i,e,s,n,!0)}function Dh(t,e){return t6(e,t.syncPointTree_,null,Ux(t.pendingWriteTree_,Tt()))}function t6(t,e,n,r){if(tt(t.path))return n6(t,e,n,r);{const i=e.get(Tt());n==null&&i!=null&&(n=pd(i,Tt()));let s=[];const o=et(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=KH(r,o);s=s.concat(t6(a,c,l,u))}return i&&(s=s.concat(Bx(i,t,r,n))),s}}function n6(t,e,n,r){const i=e.get(Tt());n==null&&i!=null&&(n=pd(i,Tt()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=KH(r,o),u=t.operationForChild(o);u&&(s=s.concat(n6(u,a,c,l)))}),i&&(s=s.concat(Bx(i,t,r,n))),s}function r6(t,e){const n=e.query,r=b_(t,n);return{hashFn:()=>(Mfe(e)||Ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Jfe(t,n._path,r):Yfe(t,n._path);{const s=Qde(i,n);return ub(t,n,null,s)}}}}function b_(t,e){const n=wT(e);return t.queryToTagMap.get(n)}function wT(t){return t._path.toString()+"$"+t._queryIdentifier}function zx(t,e){return t.tagToQueryMap.get(e)}function Wx(t){const e=t.indexOf("$");return he(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new At(t.substr(0,e))}}function Kx(t,e,n){const r=t.syncPointTree_.get(e);he(r,"Missing sync point for query tag that we're tracking");const i=Ux(t.pendingWriteTree_,e);return Bx(r,n,i,null)}function epe(t){return t.fold((e,n,r)=>{if(n&&Rc(n))return[vT(n)];{let i=[];return n&&(i=JH(n)),ir(r,(s,o)=>{i=i.concat(o)}),i}})}function ap(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Kfe())(t._repo,t._path):t}function tpe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=wT(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function npe(){return qfe++}function rpe(t,e,n){const r=e._path,i=b_(t,e),s=r6(t,n),o=t.listenProvider_.startListening(ap(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)he(!Rc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!tt(l)&&u&&Rc(u))return[vT(u).query];{let f=[];return u&&(f=f.concat(JH(u).map(m=>m.query))),ir(d,(m,w)=>{f=f.concat(w)}),f}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(ap(u),b_(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new qx(n)}node(){return this.node_}}class Gx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=cn(this.path_,e);return new Gx(this.syncTree_,n)}node(){return Hx(this.syncTree_,this.path_)}}const ipe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$D=function(t,e,n){if(!t||typeof t!="object")return t;if(he(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return spe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return ope(t[".sv"],e);he(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},spe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:he(!1,"Unexpected server value: "+t)}},ope=function(t,e,n){t.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&he(!1,"Unexpected increment value: "+r);const i=e.node();if(he(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},i6=function(t,e,n,r){return Qx(e,new Gx(n,t),r)},s6=function(t,e,n){return Qx(t,new qx(e),n)};function Qx(t,e,n){const r=t.getPriority().val(),i=$D(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=$D(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ln(a,$n(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ln(i))),o.forEachChild(Xt,(a,c)=>{const l=Qx(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Jx(t,e){let n=e instanceof At?e:new At(e),r=t,i=et(n);for(;i!==null;){const s=Fd(r.node.children,i)||{children:{},childCount:0};r=new Yx(i,r,s),n=Dt(n),i=et(n)}return r}function Lh(t){return t.node.value}function o6(t,e){t.node.value=e,db(t)}function a6(t){return t.node.childCount>0}function ape(t){return Lh(t)===void 0&&!a6(t)}function TT(t,e){ir(t.node.children,(n,r)=>{e(new Yx(n,t,r))})}function c6(t,e,n,r){n&&!r&&e(t),TT(t,i=>{c6(i,e,!0,r)}),n&&r&&e(t)}function cpe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Xm(t){return new At(t.parent===null?t.name:Xm(t.parent)+"/"+t.name)}function db(t){t.parent!==null&&lpe(t.parent,t.name,t)}function lpe(t,e,n){const r=ape(n),i=vo(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,db(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,db(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe=/[\[\].#$\/\u0000-\u001F\u007F]/,dpe=/[\[\].#$\u0000-\u001F\u007F]/,SC=10*1024*1024,Xx=function(t){return typeof t=="string"&&t.length!==0&&!upe.test(t)},l6=function(t){return typeof t=="string"&&t.length!==0&&!dpe.test(t)},hpe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),l6(t)},hb=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Cx(t)||t&&typeof t=="object"&&vo(t,".sv")},u6=function(t,e,n,r){r&&e===void 0||ET(Ww(t,"value"),e,n)},ET=function(t,e,n){const r=n instanceof At?new xhe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+el(r));if(typeof e=="function")throw new Error(t+"contains a function "+el(r)+" with contents = "+e.toString());if(Cx(e))throw new Error(t+"contains "+e.toString()+" "+el(r));if(typeof e=="string"&&e.length>SC/3&&Kw(e)>SC)throw new Error(t+"contains a string greater than "+SC+" utf8 bytes "+el(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ir(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Xx(o)))throw new Error(t+" contains an invalid key ("+o+") "+el(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Rhe(r,o),ET(t,a,r),Phe(r)}),i&&s)throw new Error(t+' contains ".value" child '+el(r)+" in addition to actual children.")}},fpe=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=rm(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Xx(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(khe);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ji(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},ppe=function(t,e,n,r){const i=Ww(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ir(e,(o,a)=>{const c=new At(o);if(ET(i,a,cn(n,c)),kx(c)===".priority"&&!hb(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),fpe(i,s)},Zx=function(t,e,n,r){if(!l6(n))throw new Error(Ww(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mpe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Zx(t,e,n)},d6=function(t,e){if(et(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},gpe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Xx(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!hpe(n))throw new Error(Ww(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ype{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function CT(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!xx(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function h6(t,e,n){CT(t,n),f6(t,r=>xx(r,e))}function Es(t,e,n){CT(t,n),f6(t,r=>ji(r,e)||ji(e,r))}function f6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(vpe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function vpe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();rp&&Xn("event: "+n.toString()),Mh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe="repo_interrupt",wpe=25;class Tpe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ype,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=__(),this.transactionQueueTree_=new Yx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Epe(t,e,n){if(t.stats_=bx(t.repoInfo_),t.forceRestClient_||Zde())t.server_=new v_(t.repoInfo_,(r,i,s,o)=>{BD(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>HD(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Bn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new qo(t.repoInfo_,e,(r,i,s,o)=>{BD(t,r,i,s,o)},r=>{HD(t,r)},r=>{Cpe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=ihe(t.repoInfo_,()=>new rfe(t.stats_,t.server_)),t.infoData_=new Xhe,t.infoSyncTree_=new jD({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=_T(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),eR(t,"connected",!1),t.serverSyncTree_=new jD({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);Es(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function p6(t){const n=t.infoData_.getNode(new At(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ST(t){return ipe({timestamp:p6(t)})}function BD(t,e,n,r,i){t.dataUpdateCount++;const s=new At(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Yv(n,l=>$n(l));o=Zfe(t.serverSyncTree_,s,c,i)}else{const c=$n(n);o=Xfe(t.serverSyncTree_,s,c,i)}else if(r){const c=Yv(n,l=>$n(l));o=Qfe(t.serverSyncTree_,s,c)}else{const c=$n(n);o=_T(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Yd(t,s)),Es(t.eventQueue_,a,o)}function HD(t,e){eR(t,"connected",e),e===!1&&bpe(t)}function Cpe(t,e){ir(e,(n,r)=>{eR(t,n,r)})}function eR(t,e,n){const r=new At("/.info/"+e),i=$n(n);t.infoData_.updateSnapshot(r,i);const s=_T(t.infoSyncTree_,r,i);Es(t.eventQueue_,r,s)}function tR(t){return t.nextWriteId_++}function Spe(t,e,n,r,i){IT(t,"set",{path:e.toString(),value:n,priority:r});const s=ST(t),o=$n(n,r),a=Hx(t.serverSyncTree_,e),c=s6(o,a,s),l=tR(t),u=e6(t.serverSyncTree_,e,c,l,!0);CT(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const w=f==="ok";w||Nr("set at "+e+" failed: "+f);const y=Ya(t.serverSyncTree_,l,!w);Es(t.eventQueue_,e,y),pb(t,i,f,m)});const d=rR(t,e);Yd(t,d),Es(t.eventQueue_,d,[])}function Ipe(t,e,n,r){IT(t,"update",{path:e.toString(),value:n});let i=!0;const s=ST(t),o={};if(ir(n,(a,c)=>{i=!1,o[a]=i6(cn(e,a),$n(c),t.serverSyncTree_,s)}),i)Xn("update() called with empty data.  Don't do anything."),pb(t,r,"ok",void 0);else{const a=tR(t),c=Gfe(t.serverSyncTree_,e,o,a);CT(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||Nr("update at "+e+" failed: "+l);const f=Ya(t.serverSyncTree_,a,!d),m=f.length>0?Yd(t,e):e;Es(t.eventQueue_,m,f),pb(t,r,l,u)}),ir(n,l=>{const u=rR(t,cn(e,l));Yd(t,u)}),Es(t.eventQueue_,e,[])}}function bpe(t){IT(t,"onDisconnectEvents");const e=ST(t),n=__();rb(t.onDisconnect_,Tt(),(i,s)=>{const o=i6(i,s,t.serverSyncTree_,e);$H(n,i,o)});let r=[];rb(n,Tt(),(i,s)=>{r=r.concat(_T(t.serverSyncTree_,i,s));const o=rR(t,i);Yd(t,o)}),t.onDisconnect_=__(),Es(t.eventQueue_,Tt(),r)}function Ape(t,e,n){let r;et(e._path)===".info"?r=VD(t.infoSyncTree_,e,n):r=VD(t.serverSyncTree_,e,n),h6(t.eventQueue_,e._path,r)}function fb(t,e,n){let r;et(e._path)===".info"?r=ub(t.infoSyncTree_,e,n):r=ub(t.serverSyncTree_,e,n),h6(t.eventQueue_,e._path,r)}function kpe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_pe)}function IT(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xn(n,...e)}function pb(t,e,n,r){e&&Mh(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function m6(t,e,n){return Hx(t.serverSyncTree_,e,n)||Ue.EMPTY_NODE}function nR(t,e=t.transactionQueueTree_){if(e||bT(t,e),Lh(e)){const n=y6(t,e);he(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&xpe(t,Xm(e),n)}else a6(e)&&TT(e,n=>{nR(t,n)})}function xpe(t,e,n){const r=n.map(l=>l.currentWriteId),i=m6(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];he(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Yr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{IT(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Ya(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();bT(t,Jx(t.transactionQueueTree_,e)),nR(t,t.transactionQueueTree_),Es(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Mh(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Nr("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Yd(t,e)}},o)}function Yd(t,e){const n=g6(t,e),r=Xm(n),i=y6(t,n);return Rpe(t,i,r),r}function Rpe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Yr(n,c.path);let u=!1,d;if(he(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Ya(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=wpe)u=!0,d="maxretry",i=i.concat(Ya(t.serverSyncTree_,c.currentWriteId,!0));else{const f=m6(t,c.path,o);c.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){ET("transaction failed: Data returned ",m,c.path);let w=$n(m);typeof m=="object"&&m!=null&&vo(m,".priority")||(w=w.updatePriority(f.getPriority()));const v=c.currentWriteId,E=ST(t),T=s6(w,f,E);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=T,c.currentWriteId=tR(t),o.splice(o.indexOf(v),1),i=i.concat(e6(t.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),i=i.concat(Ya(t.serverSyncTree_,v,!0))}else u=!0,d="nodata",i=i.concat(Ya(t.serverSyncTree_,c.currentWriteId,!0))}Es(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}bT(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Mh(r[a]);nR(t,t.transactionQueueTree_)}function g6(t,e){let n,r=t.transactionQueueTree_;for(n=et(e);n!==null&&Lh(r)===void 0;)r=Jx(r,n),e=Dt(e),n=et(e);return r}function y6(t,e){const n=[];return v6(t,e,n),n.sort((r,i)=>r.order-i.order),n}function v6(t,e,n){const r=Lh(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);TT(e,i=>{v6(t,i,n)})}function bT(t,e){const n=Lh(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,o6(e,n.length>0?n:void 0)}TT(e,r=>{bT(t,r)})}function rR(t,e){const n=Xm(g6(t,e)),r=Jx(t.transactionQueueTree_,e);return cpe(r,i=>{IC(t,i)}),IC(t,r),c6(r,i=>{IC(t,i)}),n}function IC(t,e){const n=Lh(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(he(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(he(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ya(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?o6(e,void 0):n.length=s+1,Es(t.eventQueue_,Xm(e),i);for(let o=0;o<r.length;o++)Mh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ppe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Npe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Nr(`Invalid query segment '${n}' in query '${t}'`)}return e}const zD=function(t,e){const n=Ope(t),r=n.namespace;n.domain==="firebase.com"&&aa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&aa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||zde();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new CH(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new At(n.pathString)}},Ope=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Ppe(t.substring(u,d)));const f=Npe(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const m=e.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Mpe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=WD.charAt(n%64),n=Math.floor(n/64);he(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=WD.charAt(e[i]);return he(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Bn(this.snapshot.exportVal())}}class w6{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return he(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return tt(this._path)?null:kx(this._path)}get ref(){return new ma(this._repo,this._path)}get _queryIdentifier(){const e=xD(this._queryParams),n=Sx(e);return n==="{}"?"default":n}get _queryObject(){return xD(this._queryParams)}isEqual(e){if(e=ze(e),!(e instanceof Zm))return!1;const n=this._repo===e._repo,r=xx(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ahe(this._path)}}function Dpe(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Lpe(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Rl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ql)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==kc)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Xt){if(e!=null&&!hb(e)||n!=null&&!hb(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(he(t.getIndex()instanceof Nx||t.getIndex()===jH,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class ma extends Zm{constructor(e,n){super(e,n,new Mx,!1)}get parent(){const e=NH(this._path);return e===null?null:new ma(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class cm{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new At(e),r=Jd(this.ref,e);return new cm(this._node.getChild(n),r,Xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new cm(i,Jd(this.ref,r),Xt)))}hasChild(e){const n=new At(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nl(t,e){return t=ze(t),t._checkNotDeleted("ref"),e!==void 0?Jd(t._root,e):t._root}function Jd(t,e){return t=ze(t),et(t._path)===null?mpe("child","path",e):Zx("child","path",e),new ma(t._repo,cn(t._path,e))}function jIe(t,e){t=ze(t),d6("push",t._path),u6("push",e,t._path,!0);const n=p6(t._repo),r=Mpe(n),i=Jd(t,r),s=Jd(t,r);let o;return e!=null?o=mb(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function mb(t,e){t=ze(t),d6("set",t._path),u6("set",e,t._path,!1);const n=new Pm;return Spe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Fpe(t,e){ppe("update",e,t._path);const n=new Pm;return Ipe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class AT{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new _6("value",this,new cm(e.snapshotNode,new ma(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new w6(this,e,n):null}matches(e){return e instanceof AT?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class kT{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new w6(this,e,n):null}createEvent(e,n){he(e.childName!=null,"Child events should have a childName.");const r=Jd(new ma(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new _6(e.type,this,new cm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kT?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function E6(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,l=(u,d)=>{fb(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}const o=new T6(n,s||void 0),a=e==="value"?new AT(o):new kT(e,o);return Ape(t._repo,t,a),()=>fb(t._repo,t,a)}function gb(t,e,n,r){return E6(t,"value",e,n,r)}function Upe(t,e,n,r){return E6(t,"child_added",e,n,r)}function C6(t,e,n){let r=null;const i=n?new T6(n):null;e==="value"?r=new AT(i):e&&(r=new kT(e,i)),fb(t._repo,t,r)}class S6{}class jpe extends S6{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zm(e._repo,e._path,Yhe(e._queryParams,this._limit),e._orderByCalled)}}function Vpe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jpe(t)}class $pe extends S6{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Dpe(e,"orderByChild");const n=new At(this._path);if(tt(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Nx(n),i=Jhe(e._queryParams,r);return Lpe(i),new Zm(e._repo,e._path,i,!0)}}function Bpe(t){return Zx("orderByChild","path",t),new $pe(t)}function Hpe(t,...e){let n=ze(t);for(const r of e)n=r._apply(n);return n}jfe(ma);Wfe(ma);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe="FIREBASE_DATABASE_EMULATOR_HOST",yb={};let Wpe=!1;function Kpe(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=Cs(s);t.repoInfo_=new CH(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function qpe(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||aa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=zD(s,i),a=o.repoInfo,c;typeof process<"u"&&dD&&(c=dD[zpe]),c?(s=`http://${c}?ns=${a.namespace}`,o=zD(s,i),a=o.repoInfo):o.repoInfo.secure;const l=new the(t.name,t.options,e);gpe("Invalid Firebase Database URL",o),tt(o.path)||aa("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Qpe(a,t,l,new ehe(t,n));return new Ype(u,t)}function Gpe(t,e){const n=yb[e];(!n||n[t.key]!==t)&&aa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),kpe(t),delete n[t.key]}function Qpe(t,e,n,r){let i=yb[e.name];i||(i={},yb[e.name]=i);let s=i[t.toURLString()];return s&&aa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Tpe(t,Wpe,n,r),i[t.toURLString()]=s,s}class Ype{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Epe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ma(this._repo,Tt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Gpe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&aa("Cannot call "+e+" on a deleted database.")}}function Jpe(t=Vc(),e){const n=Ss(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=zw("database");r&&Xpe(n,...r)}return n}function Xpe(t,e,n,r={}){t=ze(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&lo(r,s.repoInfo_.emulatorOptions))return;aa("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&aa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new jy(jy.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:Tk(r.mockUserToken,t.app.options.projectId);o=new jy(a)}Cs(e)&&(Nm(e),Om("Database",!0)),Kpe(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zpe(t){Ude(jc),Or(new wr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return qpe(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),In(hD,fD,t),In(hD,fD,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eme={".sv":"timestamp"};function VIe(){return eme}qo.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};qo.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Zpe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="firebasestorage.googleapis.com",b6="storageBucket",tme=2*60*1e3,nme=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends ki{constructor(e,n,r=0){super(bC(e),`Firebase Storage: ${n} (${bC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var un;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(un||(un={}));function bC(t){return"storage/"+t}function iR(){const t="An unknown error occurred, please check the error payload for server response.";return new dn(un.UNKNOWN,t)}function rme(t){return new dn(un.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ime(t){return new dn(un.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sme(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dn(un.UNAUTHENTICATED,t)}function ome(){return new dn(un.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ame(t){return new dn(un.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cme(){return new dn(un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lme(){return new dn(un.CANCELED,"User canceled the upload/download.")}function ume(t){return new dn(un.INVALID_URL,"Invalid URL '"+t+"'.")}function dme(t){return new dn(un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hme(){return new dn(un.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+b6+"' property when initializing the app?")}function fme(){return new dn(un.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pme(){return new dn(un.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mme(t){return new dn(un.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vb(t){return new dn(un.INVALID_ARGUMENT,t)}function A6(){return new dn(un.APP_DELETED,"The Firebase app was deleted.")}function gme(t){return new dn(un.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cp(t,e){return new dn(un.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function hf(t){throw new dn(un.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=yi.makeFromUrl(e,n)}catch{return new yi(e,"")}if(r.path==="")return r;throw dme(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),w={bucket:1,path:3},y=n===I6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",E=new RegExp(`^https?://${y}/${i}/${v}`,"i"),C=[{regex:a,indices:c,postModify:s},{regex:m,indices:w,postModify:l},{regex:E,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<C.length;b++){const M=C[b],L=M.regex.exec(e);if(L){const k=L[M.indices.bucket];let I=L[M.indices.path];I||(I=""),r=new yi(k,I),M.postModify(r);break}}if(r==null)throw ume(e);return r}}class yme{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vme(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...v){l||(l=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(m,c())},v)}function f(){s&&clearTimeout(s)}function m(v,...E){if(l){f();return}if(v){f(),u.call(null,v,...E);return}if(c()||o){f(),u.call(null,v,...E);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,d(C)}let w=!1;function y(v){w||(w=!0,f(),!l&&(i!==null?(v||(a=2),clearTimeout(i),d(0)):v||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function _me(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wme(t){return t!==void 0}function Tme(t){return typeof t=="object"&&!Array.isArray(t)}function sR(t){return typeof t=="string"||t instanceof String}function KD(t){return oR()&&t instanceof Blob}function oR(){return typeof Blob<"u"}function qD(t,e,n,r){if(r<e)throw vb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function k6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Pl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pl||(Pl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eme(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cme{constructor(e,n,r,i,s,o,a,c,l,u,d,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,y)=>{this.resolve_=w,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new iy(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Pl.NO_ERROR,c=s.getStatus();if(!a||Eme(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Pl.ABORT;r(!1,new iy(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new iy(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());wme(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=iR();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?A6():lme();o(c)}else{const c=cme();o(c)}};this.canceled_?n(!1,new iy(!1,null,!0)):this.backoffId_=vme(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_me(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class iy{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Sme(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ime(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bme(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Ame(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kme(t,e,n,r,i,s,o=!0,a=!1){const c=k6(t.urlParams),l=t.url+c,u=Object.assign({},t.headers);return bme(u,e),Sme(u,n),Ime(u,s),Ame(u,r),new Cme(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xme(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Rme(...t){const e=xme();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(oR())return new Blob(t);throw new dn(un.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Pme(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nme(t){if(typeof atob>"u")throw mme("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class AC{constructor(e,n){this.data=e,this.contentType=n||null}}function Ome(t,e){switch(t){case zs.RAW:return new AC(x6(e));case zs.BASE64:case zs.BASE64URL:return new AC(R6(t,e));case zs.DATA_URL:return new AC(Dme(e),Lme(e))}throw iR()}function x6(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Mme(t){let e;try{e=decodeURIComponent(t)}catch{throw cp(zs.DATA_URL,"Malformed data URL.")}return x6(e)}function R6(t,e){switch(t){case zs.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw cp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zs.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw cp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Nme(e)}catch(i){throw i.message.includes("polyfill")?i:cp(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class P6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cp(zs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Fme(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Dme(t){const e=new P6(t);return e.base64?R6(zs.BASE64,e.rest):Mme(e.rest)}function Lme(t){return new P6(t).contentType}function Fme(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){let r=0,i="";KD(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(KD(this.data_)){const r=this.data_,i=Pme(r,e,n);return i===null?null:new Ua(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ua(r,!0)}}static getBlob(...e){if(oR()){const n=e.map(r=>r instanceof Ua?r.data_:r);return new Ua(Rme.apply(null,n))}else{const n=e.map(o=>sR(o)?Ome(zs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ua(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){let e;try{e=JSON.parse(t)}catch{return null}return Tme(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ume(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jme(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function O6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vme(t,e){return e}class Tr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Vme}}let sy=null;function $me(t){return!sR(t)||t.length<2?t:O6(t)}function M6(){if(sy)return sy;const t=[];t.push(new Tr("bucket")),t.push(new Tr("generation")),t.push(new Tr("metageneration")),t.push(new Tr("name","fullPath",!0));function e(s,o){return $me(o)}const n=new Tr("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Tr("size");return i.xform=r,t.push(i),t.push(new Tr("timeCreated")),t.push(new Tr("updated")),t.push(new Tr("md5Hash",null,!0)),t.push(new Tr("cacheControl",null,!0)),t.push(new Tr("contentDisposition",null,!0)),t.push(new Tr("contentEncoding",null,!0)),t.push(new Tr("contentLanguage",null,!0)),t.push(new Tr("contentType",null,!0)),t.push(new Tr("metadata","customMetadata",!0)),sy=t,sy}function Bme(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new yi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Hme(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Bme(r,t),r}function D6(t,e,n){const r=N6(e);return r===null?null:Hme(t,r,n)}function zme(t,e,n,r){const i=N6(e);if(i===null||!sR(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),m=xT(f,n,r),w=k6({alt:"media",token:l});return m+w})[0]}function Wme(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class aR{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t){if(!t)throw iR()}function Kme(t,e){function n(r,i){const s=D6(t,i,e);return L6(s!==null),s}return n}function qme(t,e){function n(r,i){const s=D6(t,i,e);return L6(s!==null),zme(s,i,t.host,t._protocol)}return n}function F6(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ome():i=sme():n.getStatus()===402?i=ime(t.bucket):n.getStatus()===403?i=ame(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function U6(t){const e=F6(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=rme(t.path)),s.serverResponse=i.serverResponse,s}return n}function Gme(t,e,n){const r=e.fullServerUrl(),i=xT(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new aR(i,s,qme(t,n),o);return a.errorHandler=U6(e),a}function Qme(t,e){const n=e.fullServerUrl(),r=xT(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(c,l){}const a=new aR(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=U6(e),a}function Yme(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Jme(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Yme(null,e)),r}function Xme(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let b=0;b<2;b++)C=C+Math.random().toString().slice(2);return C}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=Jme(e,r,i),u=Wme(l,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=Ua.getBlob(d,r,f);if(m===null)throw fme();const w={name:l.fullPath},y=xT(s,t.host,t._protocol),v="POST",E=t.maxUploadRetryTime,T=new aR(y,v,Kme(t,n),E);return T.urlParams=w,T.headers=o,T.body=m.uploadData(),T.errorHandler=F6(e),T}class Zme{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw hf("cannot .send() more than once");if(Cs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ege extends Zme{initXhr(){this.xhr_.responseType="text"}}function cR(){return new ege}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this._service=e,n instanceof yi?this._location=n:this._location=yi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jl(e,n)}get root(){const e=new yi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O6(this._location.path)}get storage(){return this._service}get parent(){const e=Ume(this._location.path);if(e===null)return null;const n=new yi(this._location.bucket,e);return new Jl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw gme(e)}}function tge(t,e,n){t._throwIfRoot("uploadBytes");const r=Xme(t.storage,t._location,M6(),new Ua(e,!0),n);return t.storage.makeRequestWithTokens(r,cR).then(i=>({metadata:i,ref:t}))}function nge(t){t._throwIfRoot("getDownloadURL");const e=Gme(t.storage,t._location,M6());return t.storage.makeRequestWithTokens(e,cR).then(n=>{if(n===null)throw pme();return n})}function rge(t){t._throwIfRoot("deleteObject");const e=Qme(t.storage,t._location);return t.storage.makeRequestWithTokens(e,cR)}function ige(t,e){const n=jme(t._location.path,e),r=new yi(t._location.bucket,n);return new Jl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sge(t){return/^[A-Za-z]+:\/\//.test(t)}function oge(t,e){return new Jl(t,e)}function j6(t,e){if(t instanceof lR){const n=t;if(n._bucket==null)throw hme();const r=new Jl(n,n._bucket);return e!=null?j6(r,e):r}else return e!==void 0?ige(t,e):t}function age(t,e){if(e&&sge(e)){if(t instanceof lR)return oge(t,e);throw vb("To use ref(service, url), the first argument must be a Storage instance.")}else return j6(t,e)}function GD(t,e){const n=e==null?void 0:e[b6];return n==null?null:yi.makeFromBucketSpec(n,t)}function cge(t,e,n,r={}){t.host=`${e}:${n}`;const i=Cs(e);i&&(Nm(`https://${t.host}/b`),Om("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Tk(s,t.app.options.projectId))}class lR{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=I6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tme,this._maxUploadRetryTime=nme,this._requests=new Set,i!=null?this._bucket=yi.makeFromBucketSpec(i,this._host):this._bucket=GD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yi.makeFromBucketSpec(this._url,e):this._bucket=GD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new yme(A6());{const o=kme(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const QD="@firebase/storage",YD="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="storage";function lge(t,e,n){return t=ze(t),tge(t,e,n)}function uge(t){return t=ze(t),nge(t)}function dge(t){return t=ze(t),rge(t)}function JD(t,e){return t=ze(t),age(t,e)}function hge(t=Vc(),e){t=ze(t);const r=Ss(t,V6).getImmediate({identifier:e}),i=zw("storage");return i&&fge(r,...i),r}function fge(t,e,n,r={}){cge(t,e,n,r)}function pge(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new lR(n,r,i,e,jc)}function mge(){Or(new wr(V6,pge,"PUBLIC").setMultipleInstances(!0)),In(QD,YD,""),In(QD,YD,"esm2020")}mge();const $6="@firebase/installations",uR="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=1e4,H6=`w:${uR}`,z6="FIS_v2",gge="https://firebaseinstallations.googleapis.com/v1",yge=60*60*1e3,vge="installations",_ge="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wge={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xl=new Uc(vge,_ge,wge);function W6(t){return t instanceof ki&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6({projectId:t}){return`${gge}/projects/${t}/installations`}function q6(t){return{token:t.token,requestStatus:2,expiresIn:Ege(t.expiresIn),creationTime:Date.now()}}async function G6(t,e){const r=(await e.json()).error;return Xl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Q6({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Tge(t,{refreshToken:e}){const n=Q6(t);return n.append("Authorization",Cge(e)),n}async function Y6(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Ege(t){return Number(t.replace("s","000"))}function Cge(t){return`${z6} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sge({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=K6(t),i=Q6(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={fid:n,authVersion:z6,appId:t.appId,sdkVersion:H6},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Y6(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:q6(l.authToken)}}else throw await G6("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ige(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bge=/^[cdef][\w-]{21}$/,_b="";function Age(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=kge(t);return bge.test(n)?n:_b}catch{return _b}}function kge(t){return Ige(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=new Map;function Z6(t,e){const n=RT(t);e5(n,e),xge(n,e)}function e5(t,e){const n=X6.get(t);if(n)for(const r of n)r(e)}function xge(t,e){const n=Rge();n&&n.postMessage({key:t,fid:e}),Pge()}let yl=null;function Rge(){return!yl&&"BroadcastChannel"in self&&(yl=new BroadcastChannel("[Firebase] FID Change"),yl.onmessage=t=>{e5(t.data.key,t.data.fid)}),yl}function Pge(){X6.size===0&&yl&&(yl.close(),yl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nge="firebase-installations-database",Oge=1,Zl="firebase-installations-store";let kC=null;function dR(){return kC||(kC=qw(Nge,Oge,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zl)}}})),kC}async function A_(t,e){const n=RT(t),i=(await dR()).transaction(Zl,"readwrite"),s=i.objectStore(Zl),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&Z6(t,e.fid),e}async function t5(t){const e=RT(t),r=(await dR()).transaction(Zl,"readwrite");await r.objectStore(Zl).delete(e),await r.done}async function PT(t,e){const n=RT(t),i=(await dR()).transaction(Zl,"readwrite"),s=i.objectStore(Zl),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&Z6(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t){let e;const n=await PT(t.appConfig,r=>{const i=Mge(r),s=Dge(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===_b?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Mge(t){const e=t||{fid:Age(),registrationStatus:0};return n5(e)}function Dge(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Xl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Lge(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Fge(t)}:{installationEntry:e}}async function Lge(t,e){try{const n=await Sge(t,e);return A_(t.appConfig,n)}catch(n){throw W6(n)&&n.customData.serverCode===409?await t5(t.appConfig):await A_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Fge(t){let e=await XD(t.appConfig);for(;e.registrationStatus===1;)await J6(100),e=await XD(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await hR(t);return r||n}return e}function XD(t){return PT(t,e=>{if(!e)throw Xl.create("installation-not-found");return n5(e)})}function n5(t){return Uge(t)?{fid:t.fid,registrationStatus:0}:t}function Uge(t){return t.registrationStatus===1&&t.registrationTime+B6<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jge({appConfig:t,heartbeatServiceProvider:e},n){const r=Vge(t,n),i=Tge(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={installation:{sdkVersion:H6,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Y6(()=>fetch(r,a));if(c.ok){const l=await c.json();return q6(l)}else throw await G6("Generate Auth Token",c)}function Vge(t,{fid:e}){return`${K6(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e=!1){let n;const r=await PT(t.appConfig,s=>{if(!r5(s))throw Xl.create("not-registered");const o=s.authToken;if(!e&&Hge(o))return s;if(o.requestStatus===1)return n=$ge(t,e),s;{if(!navigator.onLine)throw Xl.create("app-offline");const a=Wge(s);return n=Bge(t,a),a}});return n?await n:r.authToken}async function $ge(t,e){let n=await ZD(t.appConfig);for(;n.authToken.requestStatus===1;)await J6(100),n=await ZD(t.appConfig);const r=n.authToken;return r.requestStatus===0?fR(t,e):r}function ZD(t){return PT(t,e=>{if(!r5(e))throw Xl.create("not-registered");const n=e.authToken;return Kge(n)?{...e,authToken:{requestStatus:0}}:e})}async function Bge(t,e){try{const n=await jge(t,e),r={...e,authToken:n};return await A_(t.appConfig,r),n}catch(n){if(W6(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await t5(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await A_(t.appConfig,r)}throw n}}function r5(t){return t!==void 0&&t.registrationStatus===2}function Hge(t){return t.requestStatus===2&&!zge(t)}function zge(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+yge}function Wge(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Kge(t){return t.requestStatus===1&&t.requestTime+B6<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qge(t){const e=t,{installationEntry:n,registrationPromise:r}=await hR(e);return r?r.catch(console.error):fR(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gge(t,e=!1){const n=t;return await Qge(n),(await fR(n,e)).token}async function Qge(t){const{registrationPromise:e}=await hR(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yge(t){if(!t||!t.options)throw xC("App Configuration");if(!t.name)throw xC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw xC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xC(t){return Xl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="installations",Jge="installations-internal",Xge=t=>{const e=t.getProvider("app").getImmediate(),n=Yge(e),r=Ss(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Zge=t=>{const e=t.getProvider("app").getImmediate(),n=Ss(e,i5).getImmediate();return{getId:()=>qge(n),getToken:i=>Gge(n,i)}};function eye(){Or(new wr(i5,Xge,"PUBLIC")),Or(new wr(Jge,Zge,"PRIVATE"))}eye();In($6,uR);In($6,uR,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="analytics",tye="firebase_id",nye="origin",rye=60*1e3,iye="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pR="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new Mm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sye={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ei=new Uc("analytics","Analytics",sye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oye(t){if(!t.startsWith(pR)){const e=Ei.create("invalid-gtag-resource",{gtagURL:t});return ii.warn(e.message),""}return t}function s5(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function aye(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function cye(t,e){const n=aye("firebase-js-sdk-policy",{createScriptURL:oye}),r=document.createElement("script"),i=`${pR}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function lye(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function uye(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await s5(n)).find(l=>l.measurementId===i);c&&await e[c.appId]}}catch(a){ii.error(a)}t("config",i,s)}async function dye(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await s5(n);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){ii.error(s)}}function hye(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await dye(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await uye(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){ii.error(a)}}return i}function fye(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=hye(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function pye(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(pR)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mye=30,gye=1e3;class yye{constructor(e={},n=gye){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const o5=new yye;function vye(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function _ye(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:vye(n)},i=iye.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw Ei.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function wye(t,e=o5,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ei.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ei.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Cye;return setTimeout(async()=>{a.abort()},rye),a5({appId:r,apiKey:i,measurementId:s},o,a,e)}async function a5(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=o5){var a;const{appId:s,measurementId:o}=t;try{await Tye(r,e)}catch(c){if(o)return ii.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await _ye(t);return i.deleteThrottleMetadata(s),c}catch(c){const l=c;if(!Eye(l)){if(i.deleteThrottleMetadata(s),o)return ii.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw c}const u=Number((a=l==null?void 0:l.customData)==null?void 0:a.httpStatus)===503?NO(n,i.intervalMillis,mye):NO(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,d),ii.debug(`Calling attemptFetch again in ${u} millis`),a5(t,d,r,i)}}function Tye(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ei.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Eye(t){if(!(t instanceof ki)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Cye{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Sye(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iye(){if(Ck())try{await Sk()}catch(t){return ii.warn(Ei.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ii.warn(Ei.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bye(t,e,n,r,i,s,o){const a=wye(t);a.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&ii.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ii.error(f)),e.push(a);const c=Iye().then(f=>{if(f)return r.getId()}),[l,u]=await Promise.all([a,c]);pye(s)||cye(s,l.measurementId),i("js",new Date);const d=(o==null?void 0:o.config)??{};return d[nye]="firebase",d.update=!0,u!=null&&(d[tye]=u),i("config",l.measurementId,d),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{constructor(e){this.app=e}_delete(){return delete lp[this.app.options.appId],Promise.resolve()}}let lp={},eL=[];const tL={};let RC="dataLayer",kye="gtag",nL,c5,rL=!1;function xye(){const t=[];if(U$()&&t.push("This is a browser extension environment."),$$()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ei.create("invalid-analytics-context",{errorInfo:e});ii.warn(n.message)}}function Rye(t,e,n){xye();const r=t.options.appId;if(!r)throw Ei.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ii.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ei.create("no-api-key");if(lp[r]!=null)throw Ei.create("already-exists",{id:r});if(!rL){lye(RC);const{wrappedGtag:s,gtagCore:o}=fye(lp,eL,tL,RC,kye);c5=s,nL=o,rL=!0}return lp[r]=bye(t,eL,tL,e,nL,RC,n),new Aye(t)}function Pye(t=Vc()){t=ze(t);const e=Ss(t,k_);return e.isInitialized()?e.getImmediate():Nye(t)}function Nye(t,e={}){const n=Ss(t,k_);if(n.isInitialized()){const i=n.getImmediate();if(lo(e,n.getOptions()))return i;throw Ei.create("already-initialized")}return n.initialize({options:e})}function Oye(t,e,n,r){t=ze(t),Sye(c5,lp[t.app.options.appId],e,n,r).catch(i=>ii.error(i))}const iL="@firebase/analytics",sL="0.10.18";function Mye(){Or(new wr(k_,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Rye(r,i,n)},"PUBLIC")),Or(new wr("analytics-internal",t,"PRIVATE")),In(iL,sL),In(iL,sL,"esm2020");function t(e){try{const n=e.getProvider(k_).getImmediate();return{logEvent:(r,i,s)=>Oye(n,r,i,s)}}catch(n){throw Ei.create("interop-component-reg-failed",{reason:n})}}}Mye();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dye="/firebase-messaging-sw.js",Lye="/firebase-cloud-messaging-push-scope",l5="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fye="https://fcmregistrations.googleapis.com/v1",u5="google.c.a.c_id",Uye="google.c.a.c_l",jye="google.c.a.ts",Vye="google.c.a.e",oL=1e4;var aL;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(aL||(aL={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var lm;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(lm||(lm={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $ye(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="fcm_token_details_db",Bye=5,cL="fcm_token_object_Store";async function Hye(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(PC))return null;let e=null;return(await qw(PC,Bye,{upgrade:async(r,i,s,o)=>{if(i<2||!r.objectStoreNames.contains(cL))return;const a=o.objectStore(cL),c=await a.index("fcmSenderId").get(t);if(await a.clear(),!!c){if(i===2){const l=c;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:l.createTime??Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Ro(l.vapidKey)}}}else if(i===3){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Ro(l.auth),p256dh:Ro(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Ro(l.vapidKey)}}}else if(i===4){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Ro(l.auth),p256dh:Ro(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Ro(l.vapidKey)}}}}}})).close(),await sC(PC),await sC("fcm_vapid_details_db"),await sC("undefined"),zye(e)?e:null}function zye(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wye="firebase-messaging-database",Kye=1,um="firebase-messaging-store";let NC=null;function d5(){return NC||(NC=qw(Wye,Kye,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(um)}}})),NC}async function qye(t){const e=h5(t),r=await(await d5()).transaction(um).objectStore(um).get(e);if(r)return r;{const i=await Hye(t.appConfig.senderId);if(i)return await mR(t,i),i}}async function mR(t,e){const n=h5(t),i=(await d5()).transaction(um,"readwrite");return await i.objectStore(um).put(e,n),await i.done,e}function h5({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gye={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},yr=new Uc("messaging","Messaging",Gye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qye(t,e){const n=await yR(t),r=f5(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(gR(t.appConfig),i)).json()}catch(o){throw yr.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw yr.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw yr.create("token-subscribe-no-token");return s.token}async function Yye(t,e){const n=await yR(t),r=f5(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${gR(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw yr.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw yr.create("token-update-failed",{errorInfo:o})}if(!s.token)throw yr.create("token-update-no-token");return s.token}async function Jye(t,e){const r={method:"DELETE",headers:await yR(t)};try{const s=await(await fetch(`${gR(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw yr.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw yr.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function gR({projectId:t}){return`${Fye}/projects/${t}/registrations`}async function yR({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function f5({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==l5&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xye=7*24*60*60*1e3;async function Zye(t){const e=await tve(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ro(e.getKey("auth")),p256dh:Ro(e.getKey("p256dh"))},r=await qye(t.firebaseDependencies);if(r){if(nve(r.subscriptionOptions,n))return Date.now()>=r.createTime+Xye?eve(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Jye(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return lL(t.firebaseDependencies,n)}else return lL(t.firebaseDependencies,n)}async function eve(t,e){try{const n=await Yye(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await mR(t.firebaseDependencies,r),n}catch(n){throw n}}async function lL(t,e){const r={token:await Qye(t,e),createTime:Date.now(),subscriptionOptions:e};return await mR(t,r),r.token}async function tve(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$ye(e)})}function nve(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return rve(e,t),ive(e,t),sve(e,t),e}function rve(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function ive(t,e){e.data&&(t.data=e.data)}function sve(t,e){var i,s,o,a;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;t.fcmOptions={};const n=((s=e.fcmOptions)==null?void 0:s.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ove(t){return typeof t=="object"&&!!t&&u5 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ave(t){if(!t||!t.options)throw OC("App Configuration Object");if(!t.name)throw OC("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw OC(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function OC(t){return yr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=ave(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lve(t){try{t.swRegistration=await navigator.serviceWorker.register(Dye,{scope:Lye}),t.swRegistration.update().catch(()=>{}),await uve(t.swRegistration)}catch(e){throw yr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function uve(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${oL} ms`)),oL),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var o;((o=s.target)==null?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dve(t,e){if(!e&&!t.swRegistration&&await lve(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw yr.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hve(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=l5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e){if(!navigator)throw yr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw yr.create("permission-blocked");return await hve(t,e==null?void 0:e.vapidKey),await dve(t,e==null?void 0:e.serviceWorkerRegistration),Zye(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fve(t,e,n){const r=pve(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[u5],message_name:n[Uye],message_time:n[jye],message_device_time:Math.floor(Date.now()/1e3)})}function pve(t){switch(t){case lm.NOTIFICATION_CLICKED:return"notification_open";case lm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mve(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===lm.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(uL(n)):t.onMessageHandler.next(uL(n)));const r=n.data;ove(r)&&r[Vye]==="1"&&await fve(t,n.messageType,r)}const dL="@firebase/messaging",hL="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gve=t=>{const e=new cve(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>mve(e,n)),e},yve=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>p5(e,r)}};function vve(){Or(new wr("messaging",gve,"PUBLIC")),Or(new wr("messaging-internal",yve,"PRIVATE")),In(dL,hL),In(dL,hL,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ve(){try{await Sk()}catch{return!1}return typeof window<"u"&&Ck()&&$$()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wve(t,e){if(!navigator)throw yr.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tve(t=Vc()){return _ve().then(e=>{if(!e)throw yr.create("unsupported-browser")},e=>{throw yr.create("indexed-db-unsupported")}),Ss(ze(t),"messaging").getImmediate()}async function fL(t,e){return t=ze(t),p5(t,e)}function Eve(t,e){return t=ze(t),wve(t,e)}vve();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cve="type.googleapis.com/google.protobuf.Int64Value",Sve="type.googleapis.com/google.protobuf.UInt64Value";function m5(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function x_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>x_(e));if(typeof t=="function"||typeof t=="object")return m5(t,e=>x_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Xd(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Cve:case Sve:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Xd(e)):typeof t=="function"||typeof t=="object"?m5(t,e=>Xd(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xr extends ki{constructor(e,n,r){super(`${vR}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Xr.prototype)}}function Ive(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function R_(t,e){let n=Ive(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!pL[o])return new Xr("internal","internal");n=pL[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=Xd(i))}}catch{}return n==="ok"?null:new Xr(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bve{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Zn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="us-central1",Ave=/^data: (.*?)(?:\n|$)/;function kve(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Xr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class xve{constructor(e,n,r,i,s=wb,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new bve(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=wb}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Rve(t,e,n){const r=Cs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Nm(t.emulatorOrigin),Om("Functions",!0))}function Pve(t,e,n){const r=i=>Ove(t,e,i,{});return r.stream=(i,s)=>Dve(t,e,i,s),r}async function Nve(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}async function g5(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Ove(t,e,n,r){const i=t._url(e);return Mve(t,i,n,r)}async function Mve(t,e,n,r){n=x_(n);const i={data:n},s=await g5(t,r),o=r.timeout||7e4,a=kve(o),c=await Promise.race([Nve(e,i,s,t.fetchImpl),a.promise,t.cancelAllRequests]);if(a.cancel(),!c)throw new Xr("cancelled","Firebase Functions instance was deleted.");const l=R_(c.status,c.json);if(l)throw l;if(!c.json)throw new Xr("internal","Response is not valid JSON object.");let u=c.json.data;if(typeof u>"u"&&(u=c.json.result),typeof u>"u")throw new Xr("internal","Response is missing data field.");return{data:Xd(u)}}function Dve(t,e,n,r){const i=t._url(e);return Lve(t,i,n,r||{})}async function Lve(t,e,n,r){var f;n=x_(n);const i={data:n},s=await g5(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const y=new Xr("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const w=R_(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,c;const l=new Promise((m,w)=>{a=m,c=w});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Xr("cancelled","Request was cancelled.");c(m)});const u=o.body.getReader(),d=Fve(u,a,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=d.getReader();return{async next(){const{value:w,done:y}=await m.read();return{value:w,done:y}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:l}}function Fve(t,e,n,r){const i=(o,a)=>{const c=o.match(Ave);if(!c)return;const l=c[1];try{const u=JSON.parse(l);if("result"in u){e(Xd(u.result));return}if("message"in u){a.enqueue(Xd(u.message));return}if("error"in u){const d=R_(0,u);a.error(d),n(d);return}}catch(u){if(u instanceof Xr){a.error(u),n(u);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return c();async function c(){if(r!=null&&r.aborted){const l=new Xr("cancelled","Request was cancelled");return o.error(l),n(l),Promise.resolve()}try{const{value:l,done:u}=await t.read();if(u){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Xr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=s.decode(l,{stream:!0});const d=a.split(`
`);a=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),o);return c()}catch(l){const u=l instanceof Xr?l:R_(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const mL="@firebase/functions",gL="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uve="auth-internal",jve="app-check-internal",Vve="messaging-internal";function $ve(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(Uve),o=n.getProvider(Vve),a=n.getProvider(jve);return new xve(i,s,o,a,r)};Or(new wr(vR,e,"PUBLIC").setMultipleInstances(!0)),In(mL,gL,t),In(mL,gL,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(t=Vc(),e=wb){const r=Ss(ze(t),vR).getImmediate({identifier:e}),i=zw("functions");return i&&Hve(r,...i),r}function Hve(t,e,n){Rve(ze(t),e,n)}function $Ie(t,e,n){return Pve(ze(t),e)}$ve();const zve={apiKey:"AIzaSyCmioywtCMDFJjDvq8bF0_NBZJC5nyVPYo",authDomain:"huddlely.firebaseapp.com",projectId:"huddlely",storageBucket:"huddlely.firebasestorage.app",messagingSenderId:"788189911710",appId:"1:788189911710:web:3fd75fade0c56164d5b98f",measurementId:"G-8ZE8GCXPRX"},fu=Mse().length===0?W$(zve):Vc(),Ns=Lde(fu),Ae=Vce(fu),rl=Jpe(fu),yL=hge(fu);Pye(fu);const NT=new Oo,BIe=Bve(fu,"us-central1");let y5=null;if(typeof window<"u")try{y5=Tve(fu)}catch(t){console.log("Messaging not available:",t)}NT.addScope("https://www.googleapis.com/auth/calendar");NT.addScope("https://www.googleapis.com/auth/userinfo.profile");NT.addScope("https://www.googleapis.com/auth/userinfo.email");const vL=t=>new Due(Ns,t,{size:"normal",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),Wve=async(t,e)=>{try{return await Uue(Ns,t,e)}catch(n){throw console.error("Error sending OTP:",n),n}},Kve=async(t,e)=>{try{return await t.confirm(e)}catch(n){throw console.error("Error verifying OTP:",n),n}},MC=768;function Fh(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${MC-1}px)`),r=()=>{e(window.innerWidth<MC)};return n.addEventListener("change",r),e(window.innerWidth<MC),()=>n.removeEventListener("change",r)},[]),!!t}const v5=g.createContext(void 0),qve=({children:t})=>{const e=Fh(),[n,r]=g.useState(e?"collapsed":"expanded"),[i,s]=g.useState(!1);g.useEffect(()=>{r(e?"collapsed":"expanded")},[e]);const o=()=>{r(a=>a==="expanded"?"collapsed":"expanded")};return p.jsx(v5.Provider,{value:{state:n,setState:r,toggleSidebar:o,isChatOpenMobile:i,setChatOpenMobile:s},children:t})},OT=()=>{const t=g.useContext(v5);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},_5=g.forwardRef(({className:t,...e},n)=>p.jsx("aside",{ref:n,className:pe("flex flex-col",t),...e}));_5.displayName="Sidebar";const w5=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("flex flex-col overflow-y-auto",t),...e}));w5.displayName="SidebarContent";const T5=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("flex flex-col",t),...e}));T5.displayName="SidebarGroup";const E5=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:pe("px-4 py-2 text-xs font-semibold text-muted-foreground",t),...e}));E5.displayName="SidebarGroupLabel";const C5=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("flex flex-col",t),...e}));C5.displayName="SidebarGroupContent";const S5=g.forwardRef(({className:t,...e},n)=>p.jsx("ul",{ref:n,className:pe("space-y-1",t),...e}));S5.displayName="SidebarMenu";const Tb=g.forwardRef(({className:t,...e},n)=>p.jsx("li",{ref:n,className:pe("",t),...e}));Tb.displayName="SidebarMenuItem";const Vy=g.forwardRef(({className:t,...e},n)=>p.jsx("button",{ref:n,className:pe("flex w-full items-center gap-3 px-3 py-2 text-sm",t),...e}));Vy.displayName="SidebarMenuButton";const Gve=g.forwardRef(({className:t,...e},n)=>p.jsx("hr",{ref:n,className:pe("my-2 border-border/50",t),...e}));Gve.displayName="SidebarSeparator";const I5=g.forwardRef((t,e)=>{const{toggleSidebar:n}=OT();return p.jsx("button",{ref:e,onClick:n,...t})});I5.displayName="SidebarTrigger";const Qve=xm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ci({className:t,variant:e,...n}){return p.jsx("div",{className:pe(Qve({variant:e}),t),...n})}var MT="Collapsible",[Yve,HIe]=ai(MT),[Jve,_R]=Yve(MT),b5=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[c,l]=Fc({prop:r,defaultProp:i??!1,onChange:o,caller:MT});return p.jsx(Jve,{scope:n,disabled:s,contentId:Zs(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:p.jsx(je.div,{"data-state":TR(c),"data-disabled":s?"":void 0,...a,ref:e})})});b5.displayName=MT;var A5="CollapsibleTrigger",k5=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=_R(A5,n);return p.jsx(je.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":TR(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:we(t.onClick,i.onOpenToggle)})});k5.displayName=A5;var wR="CollapsibleContent",x5=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=_R(wR,t.__scopeCollapsible);return p.jsx(zn,{present:n||i.open,children:({present:s})=>p.jsx(Xve,{...r,ref:e,present:s})})});x5.displayName=wR;var Xve=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=_R(wR,n),[a,c]=g.useState(r),l=g.useRef(null),u=Ct(e,l),d=g.useRef(0),f=d.current,m=g.useRef(0),w=m.current,y=o.open||a,v=g.useRef(y),E=g.useRef(void 0);return g.useEffect(()=>{const T=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(T)},[]),oi(()=>{const T=l.current;if(T){E.current=E.current||{transitionDuration:T.style.transitionDuration,animationName:T.style.animationName},T.style.transitionDuration="0s",T.style.animationName="none";const C=T.getBoundingClientRect();d.current=C.height,m.current=C.width,v.current||(T.style.transitionDuration=E.current.transitionDuration,T.style.animationName=E.current.animationName),c(r)}},[o.open,r]),p.jsx(je.div,{"data-state":TR(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...s,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:y&&i})});function TR(t){return t?"open":"closed"}var Zve=b5;const e_e=Zve,t_e=k5,n_e=x5,R5=g.createContext(void 0);function r_e({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(null),[s,o]=g.useState(!0),{toast:a}=fa();g.useEffect(()=>{const N=fue(Ns,async P=>{n(P),P?await l(P):i(null),o(!1)});return()=>N()},[]);const c=async N=>{const P=Be(Ae,"users",N),x=await Li(P);x.exists()&&i(x.data())},l=async N=>{const P=Be(Ae,"users",N.uid),x=await Li(P);if(x.exists()){const H=x.data();i(H),await Gr(P,{lastLoginAt:new Date().toISOString()})}else{const H={uid:N.uid,email:N.email||"",displayName:N.displayName||"",photoURL:N.photoURL||"",phoneNumber:N.phoneNumber||"",emailVerified:N.emailVerified,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),preferences:{notifications:!0,theme:"system",language:"en"},teamId:null,role:"user"};await xa(P,H),i(H)}},R={user:e,userProfile:r,loading:s,signIn:async(N,P)=>{await cue(Ns,N,P)},signUp:async(N,P,x)=>{const H=await aue(Ns,N,P);H.user&&x&&await uue(H.user,{displayName:x}),H.user&&await ZM(H.user)},signInWithGoogle:async()=>{try{const{UniversalGoogleAuth:N}=await qt(async()=>{const{UniversalGoogleAuth:P}=await import("./universalAuth-BLGtKFjr.js");return{UniversalGoogleAuth:P}},[]);await N.signIn()}catch(N){console.error("Google Sign-In failed:",N),await zue(Ns,NT)}},signInWithMicrosoft:async()=>{const N=new hd("microsoft.com");try{if(!Ns.currentUser)throw new Error("You must be logged in with Google/Email before linking Microsoft.");const P=await Wue(Ns.currentUser,N);a({title:"Microsoft Linked ",description:`Connected as ${P.user.displayName||P.user.email}`});const x=hd.credentialFromResult(P),H=x==null?void 0:x.accessToken;console.log("Microsoft Access Token:",H)}catch(P){P.code==="auth/credential-already-in-use"?a({title:"Already Linked",description:"This Microsoft account is already linked with another user.",variant:"destructive"}):(console.error("Microsoft linking error:",P),a({title:"Microsoft Link Failed",description:P.message,variant:"destructive"}))}},signInWithPhone:async N=>{const P=vL("recaptcha-container");return await Wve(N,P)},verifyPhoneOTP:async(N,P)=>{await Kve(N,P)},signOutUser:async()=>{await pue(Ns)},updateUserProfile:async N=>{if(!e||!r)return;const P=Be(Ae,"users",e.uid);await Gr(P,N),i({...r,...N}),a({title:"Profile Updated! "})},sendVerificationEmail:async()=>{e&&await ZM(e)},resetPassword:async N=>{await oue(Ns,N),a({title:"Password reset email sent!",description:"Check your inbox for reset instructions."})},setupPhoneAuth:N=>vL(N),sendTeamRequest:async N=>{if(!e||!r)throw new Error("Authentication required.");if(e.email===N)throw new Error("You cannot send a request to yourself.");const P=gr(Ae,"users"),x=ia(P,cd("email","==",N)),H=await $M(x);if(H.empty)throw new Error("No user found with this email address.");const z=H.docs[0];await Ph(gr(Ae,"teamRequests"),{senderId:e.uid,senderName:r.displayName||e.email,senderEmail:e.email,receiverId:z.id,receiverEmail:z.data().email,status:"pending",createdAt:QI()}),a({title:"Team request sent! "})},fetchReceivedTeamRequests:async()=>{if(!e)return[];const N=gr(Ae,"teamRequests"),P=ia(N,cd("receiverId","==",e.uid),cd("status","==","pending"));return(await $M(P)).docs.map(H=>({id:H.id,...H.data()}))},acceptTeamRequest:async(N,P)=>{if(!e)throw new Error("You must be logged in to accept a request.");o(!0);const x=YI(Ae);try{const H=Be(Ae,"users",P),z=await Li(H);if(!z.exists())throw new Error("The user who sent the invite no longer exists.");const te=z.data().teamId,U=Be(Ae,"users",e.uid),j=Be(Ae,"teamRequests",N);if(te){const se=Be(Ae,"teams",te);x.update(se,{memberIds:I3(e.uid)}),x.update(U,{teamId:te})}else{const se=Be(gr(Ae,"teams"));x.set(se,{memberIds:[P,e.uid],createdAt:QI(),createdBy:P}),x.update(H,{teamId:se.id}),x.update(U,{teamId:se.id})}x.delete(j),await x.commit(),await c(e.uid),a({title:"Team request accepted! ",description:"You are now part of the team."})}catch(H){throw console.error("Error accepting team request:",H),a({title:"Failed to accept request",description:H.message,variant:"destructive"}),H}finally{o(!1)}},declineTeamRequest:async N=>{const P=Be(Ae,"teamRequests",N);await fo(P),a({title:"Team request declined"})},fetchTeamMembers:async()=>{if(!(r!=null&&r.teamId))return[];const N=Be(Ae,"teams",r.teamId),P=await Li(N);if(!P.exists())return await Gr(Be(Ae,"users",r.uid),{teamId:null}),i(z=>z?{...z,teamId:null}:null),[];const x=P.data(),H=[];for(const z of x.memberIds){const Q=Be(Ae,"users",z),te=await Li(Q);te.exists()&&H.push(te.data())}return H}};return p.jsx(R5.Provider,{value:R,children:!s&&t})}function On(){const t=g.useContext(R5);if(t===void 0)throw new Error("useAuth must be used within an AuthContextProvider");return t}let Eb=null;const _L=t=>{Eb=t},il=class il{constructor(){zt(this,"permission","default");zt(this,"scheduledNotifications",new Map);zt(this,"pendingAssignments",new Map);this.checkPermission(),this.setupServiceWorker()}static getInstance(){return il.instance||(il.instance=new il),il.instance}async addInAppNotification(e,n,r,i,s){if(Eb)try{await Eb({title:n,body:r,type:i,read:!1,data:s||{}},e),console.log("In-app notification added:",{title:n,body:r,type:i})}catch(o){console.error("Failed to add in-app notification:",o)}else console.warn("Global addNotification function not available")}checkPermission(){"Notification"in window&&(this.permission=Notification.permission)}async setupServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}catch(e){console.warn("Service Worker registration failed:",e)}}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.permission==="granted")return!0;const e=await Notification.requestPermission();return this.permission=e,e==="granted"}async showNotification(e,n){if(this.permission!=="granted")return console.warn("Notification permission not granted"),null;const r={icon:"/favicon.ico",badge:"/favicon.ico",tag:"mindmeld-notification",requireInteraction:!1,silent:!1,...n};try{if("serviceWorker"in navigator&&"actions"in Notification.prototype&&r.actions&&r.actions.length>0)if("serviceWorker"in navigator)try{return await(await navigator.serviceWorker.ready).showNotification(e,r),null}catch(s){console.warn("Service Worker notification failed, falling back to basic notification:",s);const{actions:o,...a}=r,c=new Notification(e,a);return a.requireInteraction||setTimeout(()=>{c.close()},5e3),c}else{const{actions:s,...o}=r,a=new Notification(e,o);return o.requireInteraction||setTimeout(()=>{a.close()},5e3),a}else{const s=new Notification(e,r);return r.requireInteraction||setTimeout(()=>{s.close()},5e3),s}}catch(i){return console.error("Failed to show notification:",i),null}}scheduleTaskReminder(e,n=15){if(!e.dueDate)return;const r=new Date(e.dueDate),i=new Date(r.getTime()-n*60*1e3),s=new Date;if(i<=s)return;const o=i.getTime()-s.getTime(),a=`task-reminder-${e.id}`;this.clearScheduledNotification(a);const c=setTimeout(()=>{this.showNotification(` Task Reminder: ${e.title}`,{body:`Due in ${n} minutes: ${e.description||"No description"}`,icon:"/favicon.ico",tag:a,data:{taskId:e.id,type:"reminder"},..."serviceWorker"in navigator&&{actions:[{action:"start",title:" Start Now"},{action:"snooze",title:" Snooze 5min"}]}}),this.scheduledNotifications.delete(a),qt(async()=>{const{alexaNotifications:l}=await Promise.resolve().then(()=>GC);return{alexaNotifications:l}},void 0).then(({alexaNotifications:l})=>{l.send({title:"Task Reminder",body:`${e.title} is due in ${n} minutes`,type:"reminder",data:{taskId:e.id}})})},o);this.scheduledNotifications.set(a,c)}scheduleTaskDueNotification(e){if(!e.dueDate)return;const n=new Date(e.dueDate),r=new Date;if(n<=r)return;const i=n.getTime()-r.getTime(),s=`task-due-${e.id}`;this.clearScheduledNotification(s);const o=setTimeout(()=>{this.showNotification(` Task Due Now: ${e.title}`,{body:`This task is now due: ${e.description||"No description"}`,icon:"/favicon.ico",tag:s,data:{taskId:e.id,type:"due"},requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"complete",title:" Mark Complete"},{action:"extend",title:" Extend Deadline"}]}}),this.scheduledNotifications.delete(s),qt(async()=>{const{alexaNotifications:a}=await Promise.resolve().then(()=>GC);return{alexaNotifications:a}},void 0).then(({alexaNotifications:a})=>{a.send({title:"Task Due Now",body:`${e.title} is due now`,type:"reminder",data:{taskId:e.id}})})},i);this.scheduledNotifications.set(s,o)}showPomodoroNotification(e,n){const i={"focus-complete":{title:" Focus Session Complete!",body:`Great work! Time for a well-deserved break. Sessions completed: ${n||0}`,actions:[{action:"start-break",title:" Start Break"},{action:"continue",title:" Continue Working"}]},"break-complete":{title:" Break Time Over!",body:"Ready to focus again? Let's get back to work!",actions:[{action:"start-focus",title:" Start Focus"},{action:"extend-break",title:" Extend Break"}]}}[e];this.showNotification(i.title,{body:i.body,tag:`pomodoro-${e}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:i.actions}})}showTaskCompleteNotification(e){this.showNotification(" Task Completed!",{body:`Great job completing "${e}"!`,tag:"task-complete",..."serviceWorker"in navigator&&{actions:[{action:"view-stats",title:" View Stats"},{action:"next-task",title:" Next Task"}]}})}showTaskAssignmentNotification(e,n,r){if(!e.assignedTo||!e.assignedTo.includes(r))return;this.addInAppNotification(r,"New Task Assignment",`${n} assigned "${e.title}" to you`,"task-assignment",{taskId:e.id,taskTitle:e.title,assignerName:n,priority:e.priority});const i=e.priority==="high"?"":e.priority==="medium"?"":"",s=e.dueDate?` (Due: ${new Date(e.dueDate).toLocaleDateString()})`:"";this.showNotification(`${i} New Task Assignment`,{body:`${n} assigned "${e.title}" to you${s}`,tag:`task-assignment-${e.id}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"start-task",title:" Start Now"},{action:"view-task",title:" View Details"},{action:"mark-progress",title:" Mark In Progress"}]},data:{taskId:e.id,type:"assignment",priority:e.priority,assignerName:n}}),qt(async()=>{const{alexaNotifications:o}=await Promise.resolve().then(()=>GC);return{alexaNotifications:o}},void 0).then(({alexaNotifications:o})=>{o.send({title:"New Task Assignment",body:`${n} assigned ${e.title} to you${s?", due "+new Date(e.dueDate).toLocaleString():""}`,type:"assignment",data:{taskId:e.id,priority:e.priority}})})}showBulkAssignmentNotification(e,n){this.showNotification(" Multiple Task Assignments",{body:`${n} assigned ${e} tasks to you`,tag:"bulk-assignment",requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"view-all-tasks",title:" View All Tasks"},{action:"prioritize",title:" Help Me Prioritize"}]},data:{type:"bulk-assignment",taskCount:e,assignerName:n}})}showSmartTaskSuggestion(e,n){this.showNotification(" AI Task Suggestion",{body:`Based on your schedule, I suggest working on "${e.title}" now. ${n}`,tag:`ai-suggestion-${e.id}`,..."serviceWorker"in navigator&&{actions:[{action:"start-suggested",title:" Start Now"},{action:"schedule-later",title:" Schedule Later"},{action:"dismiss-suggestion",title:" Not Now"}]},data:{taskId:e.id,type:"ai-suggestion",reason:n}})}showTeamCollaborationUpdate(e,n,r){const i={started:"",completed:"",commented:"",updated:""};this.showNotification(`${i[n]||""} Team Update`,{body:`${e} ${n} "${r}"`,tag:`team-update-${Date.now()}`,..."serviceWorker"in navigator&&{actions:[{action:"view-task",title:" View Task"},{action:"send-message",title:" Send Message"}]},data:{type:"team-collaboration",action:n,teamMemberName:e}})}showWorkloadBalanceAlert(e,n){this.showNotification(" Workload Balance Alert",{body:`You have ${e} active tasks. ${n}`,tag:"workload-balance",..."serviceWorker"in navigator&&{actions:[{action:"auto-prioritize",title:" Auto-Prioritize"},{action:"delegate-tasks",title:" Delegate Tasks"},{action:"schedule-break",title:" Schedule Break"}]},data:{type:"workload-balance",currentTasks:e}})}handleTaskAssignment(e,n,r){if(console.log("=== ASSIGNMENT NOTIFICATION DEBUG ==="),console.log("Task assignedTo:",e.assignedTo),console.log("Current user ID:",r),console.log("Assigner name:",n),!e.assignedTo||!e.assignedTo.includes(r))return console.log("Current user not assigned to this task"),"none";console.log("Current user IS assigned to this task");const i=`${n}-${r}`;if(this.pendingAssignments.has(i)){const s=this.pendingAssignments.get(i);clearTimeout(s.timeout);const o=s.count+1;if(o>=3)return console.log("Showing bulk assignment notification for",o,"tasks"),this.showBulkAssignmentNotification(o,n),this.pendingAssignments.delete(i),"bulk";const a=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:o,timeout:a})}else{const s=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:1,timeout:s})}return console.log("Showing single assignment notification"),this.showTaskAssignmentNotification(e,n,r),"single"}showDailyMotivation(){const e=["Ready to crush your goals today? ","Every small step counts towards your success! ","Focus on progress, not perfection! ","You've got this! Let's make today productive! ","Time to turn your dreams into achievements! "],n=e[Math.floor(Math.random()*e.length)];this.showNotification(" Good Morning!",{body:n,tag:"daily-motivation"})}scheduleRecurringReminders(e){this.clearAllScheduledNotifications(),e.forEach(n=>{n.dueDate&&n.status!=="completed"&&(this.scheduleTaskReminder(n,15),this.scheduleTaskReminder(n,60),this.scheduleTaskDueNotification(n))})}clearScheduledNotification(e){const n=this.scheduledNotifications.get(e);n&&(clearTimeout(n),this.scheduledNotifications.delete(e))}clearAllScheduledNotifications(){this.scheduledNotifications.forEach(e=>{clearTimeout(e)}),this.scheduledNotifications.clear()}getScheduledNotificationsCount(){return this.scheduledNotifications.size}isPermissionGranted(){return this.permission==="granted"}showDailySummary(e){const{tasksCompleted:n,focusTime:r,sessionsCompleted:i}=e;this.showNotification(" Daily Summary",{body:`Today: ${n} tasks completed, ${r}min focused, ${i} sessions`,tag:"daily-summary",requireInteraction:!1})}showWeeklyGoalReminder(){this.showNotification(" Weekly Goals Check-in",{body:"How are you progressing with your weekly goals? Take a moment to review!",tag:"weekly-goals",..."serviceWorker"in navigator&&{actions:[{action:"review-goals",title:" Review Goals"},{action:"update-goals",title:" Update Goals"}]}})}};zt(il,"instance");let Cb=il;const Os=Cb.getInstance();"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{const{action:e,data:n}=t.data;switch(e){case"notification-click":console.log("Notification clicked:",n);break;case"notification-action":console.log("Notification action:",n);break}});function i_e(){const t=g.useRef({}),e=g.useCallback(i=>{if(!t.current[i]){const s=new Audio(i);s.preload="auto",s.addEventListener("error",()=>{console.warn(`Sound file not found: ${i}. Skipping audio playback.`)}),t.current[i]=s}return t.current[i]},[]),n=g.useCallback(async i=>{try{const s=e(i);s.currentTime=0;const o=s.play();o!==void 0&&await o}catch{console.warn(`Could not play sound: ${i}. This is likely due to missing audio files or browser restrictions.`)}},[e]),r=g.useCallback(()=>{e("/sounds/iphone_ding.mp3"),e("/sounds/ting.mp3")},[e]);return{playSound:n,preloadSound:e,preloadCommonSounds:r}}const P5=g.createContext(void 0);function s_e({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),{user:s}=On(),{toast:o}=fa();g.useEffect(()=>{s?a():n([])},[s]);const a=()=>{if(!s)return;console.log("Setting up notifications real-time listener for user:",s.uid),i(!0);const y=ia(gr(Ae,"users",s.uid,"notifications"),Wd("timestamp","desc")),v=so(y,E=>{console.log("Notifications snapshot received, size:",E.size);const T=[];E.forEach(C=>{T.push({id:C.id,...C.data()})}),n(T),i(!1)},E=>{console.error("Error in notifications listener:",E),o({title:"Connection error",description:"Lost connection to notifications. Retrying...",variant:"destructive"}),i(!1)});return()=>{console.log("Cleaning up notifications listener"),v()}},c=async(y,v)=>{const E=v||(s==null?void 0:s.uid);if(!E){console.warn("Cannot add notification: no target user specified and current user not authenticated");return}try{const T=gr(Ae,"users",E,"notifications"),C={...y,userId:E,timestamp:new Date().toISOString()};console.log("Adding notification for user:",E,C),await Ph(T,C),console.log("Notification added successfully")}catch(T){console.error("Error adding notification:",T),o({title:"Failed to save notification",description:"Could not save the notification.",variant:"destructive"})}},l=async y=>{if(s)try{const v=Be(Ae,"users",s.uid,"notifications",y);await Gr(v,{read:!0}),console.log("Notification marked as read:",y)}catch(v){console.error("Error marking notification as read:",v)}},u=async()=>{if(s)try{const y=YI(Ae);e.filter(E=>!E.read).forEach(E=>{const T=Be(Ae,"users",s.uid,"notifications",E.id);y.update(T,{read:!0})}),await y.commit(),console.log("All notifications marked as read"),o({title:"All notifications marked as read",description:"Your notification list has been cleared."})}catch(y){console.error("Error marking all notifications as read:",y),o({title:"Failed to mark notifications as read",description:"Could not update notifications.",variant:"destructive"})}},d=async y=>{if(s)try{const v=Be(Ae,"users",s.uid,"notifications",y);await fo(v),console.log("Notification deleted:",y)}catch(v){console.error("Error deleting notification:",v),o({title:"Failed to delete notification",description:"Could not delete the notification.",variant:"destructive"})}},f=async()=>{if(s)try{const y=YI(Ae);e.forEach(v=>{const E=Be(Ae,"users",s.uid,"notifications",v.id);y.delete(E)}),await y.commit(),console.log("All notifications cleared"),o({title:"All notifications cleared",description:"Your notification history has been cleared."})}catch(y){console.error("Error clearing all notifications:",y),o({title:"Failed to clear notifications",description:"Could not clear notifications.",variant:"destructive"})}},m=e.filter(y=>!y.read).length,w={notifications:e,unreadCount:m,loading:r,addNotification:c,markAsRead:l,markAllAsRead:u,deleteNotification:d,clearAllNotifications:f};return p.jsx(P5.Provider,{value:w,children:t})}function ER(){const t=g.useContext(P5);if(t===void 0)throw new Error("useNotifications must be used within a NotificationsContextProvider");return t}const N5="taskly_viewed_timestamps";function O5(){try{const t=localStorage.getItem(N5);return t?JSON.parse(t):{}}catch(t){return console.error("Error reading viewed timestamps from localStorage:",t),{}}}function o_e(t){try{localStorage.setItem(N5,JSON.stringify(t))}catch(e){console.error("Error saving viewed timestamps to localStorage:",e)}}function zIe(t,e){if(!t||!e)return;const n=O5();n[t]=e,o_e(n)}function a_e(t){return O5()[t]||null}function wL(t){if(!t.lastCommentedAt)return!1;const e=a_e(t.id);return e?new Date(t.lastCommentedAt)>new Date(e):!0}var $y={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*(((i*=1.525)+1)*t-i))+e:s/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,s;return s=$y.easeOutBounce(r-t,0,i,r),i-s+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,s;return t<r/2?(s=$y.easeInBounce(t*2,0,i,r),s*.5+e):(s=$y.easeOutBounce(t*2-r,0,i,r),s*.5+i*.5+e)}},c_e=$y;function l_e(t){return t*Math.PI/180}function di(t,e){return t+Math.random()*(e-t)}function u_e(t,e){return Math.floor(t+Math.random()*(e-t+1))}var up;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(up||(up={}));var Ra;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Ra||(Ra={}));const d_e=1e3/60;class h_e{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=di(5,20),this.h=di(5,20),this.radius=di(5,10),this.vx=typeof o=="number"?di(-o,o):di(o.min,o.max),this.vy=typeof a=="number"?di(-a,0):di(a.min,a.max),this.shape=u_e(0,2),this.angle=l_e(di(0,360)),this.angularSpin=di(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=di(0,1),this.rotationDirection=di(0,1)?Ra.Positive:Ra.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/d_e;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===Ra.Positive?this.rotationDirection=Ra.Negative:this.rotateY<=-1&&this.rotationDirection===Ra.Negative&&(this.rotationDirection=Ra.Positive);const c=.1*this.rotationDirection*a;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case up.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case up.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case up.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class f_e{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=di(this.x,this.w+this.x),s=di(this.y,this.h+this.y);return new h_e(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:c}=this,{run:l,recycle:u,numberOfPieces:d,debug:f,tweenFunction:m,tweenDuration:w}=this.getOptions();if(!l)return!1;const y=this.particles.length,v=u?y:a;if(v<d){c!==d&&(this.tweenProgress=0,this.tweenFrom=v,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(w,Math.max(0,this.tweenProgress+i));const E=m(this.tweenProgress,this.tweenFrom,d,w),T=Math.round(E-v);for(let C=0;C<T;C++)this.particles.push(this.getParticle());this.particlesGenerated+=T}f&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${y}`,s.width-10,s.height-20));for(let E=this.particles.length-1;E>=0;E--){const T=this.particles[E];T.update(i),(T.y>s.height||T.y<-100||T.x>s.width+100||T.x<-100)&&(u&&v<=d?this.particles[E]=this.getParticle():this.removeParticleAt(E))}return y>0||v<d},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const CR={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:c_e.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class p_e{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...CR,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:c,context:l}=this,u=Math.min(i-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?u%a:0),s&&(l.fillStyle="white",l.clearRect(0,0,c.width,c.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new f_e(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const m_e=G.createRef();class SR extends G.Component{constructor(e){super(e),this.canvas=G.createRef(),this.canvas=e.canvasRef||m_e}componentDidMount(){if(this.canvas.current){const e=DC(this.props)[0];this.confetti=new p_e(this.canvas.current,e)}}componentDidUpdate(){const e=DC(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=DC(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return p.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}SR.defaultProps={...CR};SR.displayName="ReactConfetti";function DC(t){const e={},n={},r={},i=[...Object.keys(CR),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in t){const a=t[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,n]}const g_e=G.forwardRef((t,e)=>p.jsx(SR,{canvasRef:e,...t}));function y_e(){const[t,e]=g.useState({width:void 0,height:void 0});return g.useEffect(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}const M5=g.createContext(void 0);function v_e({children:t}){const[e,n]=g.useState(!1),{width:r,height:i}=y_e(),s=g.useCallback(()=>{n(!0)},[]),o=()=>{n(!1)};return p.jsxs(M5.Provider,{value:{showConfetti:s},children:[t,e&&r&&i&&p.jsx(g_e,{width:r,height:i,recycle:!1,numberOfPieces:500,gravity:.25,wind:.03,tweenDuration:6e3,colors:["#3b82f6","#f97316","#22c55e","#facc15"],onConfettiComplete:o})]})}function __e(){const t=g.useContext(M5);if(t===void 0)throw new Error("useConfetti must be used within a ConfettiProvider");return t}const D5=g.createContext(void 0);function w_e({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState([]),[s,o]=g.useState(!0),[a,c]=g.useState(!1),{user:l,userProfile:u}=On();ER();const{toast:d}=fa(),{playSound:f,preloadCommonSounds:m}=i_e(),{showConfetti:w}=__e(),y=V=>V.sort((W,Y)=>{const re=wL(W),ge=wL(Y);if(re!==ge)return re?-1:1;const ne={high:3,medium:2,low:1};return ne[W.priority]!==ne[Y.priority]?ne[Y.priority]-ne[W.priority]:new Date(Y.createdAt).getTime()-new Date(W.createdAt).getTime()});g.useEffect(()=>{let V;return l&&u?(V=v(),m()):(n([]),i([]),o(!1)),()=>{V&&(console.log("Cleaning up all real-time listeners."),V())}},[l,u,m]);const v=()=>{if(!l||!u)return;o(!0);const V=[],W=ia(gr(Ae,"users",l.uid,"tasks"),Wd("createdAt","desc")),Y=so(W,re=>{const ge=re.docs.map(ne=>({id:ne.id,...ne.data()}));n(ne=>{const De=ne.filter(Ve=>Ve.teamId),Pe=[...ge,...De];return y(Pe)}),o(!1)},re=>{console.error("Error in personal tasks listener:",re),d({title:"Connection error",description:"Lost connection to personal tasks.",variant:"destructive"}),o(!1)});if(V.push(Y),u.teamId){const re=ia(gr(Ae,"teams",u.teamId,"tasks"),cd("assignedTo","array-contains",l.uid),Wd("createdAt","desc")),ge=so(re,Pe=>{const Ve=Pe.docs.map(Ye=>({id:Ye.id,...Ye.data()}));n(Ye=>{const gt=[...Ye.filter(Ie=>!Ie.teamId),...Ve];return y(gt)})},Pe=>{console.error("Error in team tasks listener:",Pe),d({title:"Team connection error",description:"Lost connection to team tasks.",variant:"destructive"})});V.push(ge);const ne=Be(Ae,"teams",u.teamId),De=so(ne,async Pe=>{if(Pe.exists()){const Ye=Pe.data().memberIds||[];if(Ye.length>0){const it=Ye.map(Ne=>Li(Be(Ae,"users",Ne))),Ie=(await Promise.all(it)).filter(Ne=>Ne.exists()).map(Ne=>Ne.data());i(Ie)}else i([])}else i([])},Pe=>{console.error("Error in team members listener:",Pe),i([])});V.push(De)}else i([]);return()=>{V.forEach(re=>re())}},E=async V=>{if(!l||!u)return;const W=`temp-${Date.now()}`,Y=!!(u.teamId&&V.assignedTo&&V.assignedTo.length>0),re={...V,id:W,assignedTo:V.assignedTo||[],teamId:Y?u.teamId:void 0,createdBy:l.uid,createdAt:new Date().toISOString(),status:"todo",priority:V.priority||"medium",subtasks:V.subtasks||[]};n(ge=>y([re,...ge])),d({title:"Task created",description:"Your task is being saved..."});try{const{id:ge,...ne}=re;ne.teamId||delete ne.teamId;const De=Y?`teams/${u.teamId}/tasks`:`users/${l.uid}/tasks`,Pe=await Ph(gr(Ae,De),ne),Ve={...re,id:Pe.id};if(n(Ye=>y(Ye.map(it=>it.id===W?Ve:it))),Ve.dueDate&&(Os.scheduleTaskReminder(Ve,15),Os.scheduleTaskDueNotification(Ve)),Ve.assignedTo&&Ve.assignedTo.length>0){const Ye=u.displayName||l.email||"Someone";for(const it of Ve.assignedTo)it!==l.uid&&(console.log("Sending task assignment notification to user:",it),Os.handleTaskAssignment(Ve,Ye,it))}}catch(ge){n(ne=>y(ne.filter(De=>De.id!==W))),console.error("Error adding task:",ge),d({title:"Failed to create task",variant:"destructive"})}},T=async(V,W)=>{if(!l||!u){d({title:"Authentication required",variant:"destructive"});return}const Y=e.find(Ye=>Ye.id===V);if(!Y){d({title:"Task not found",variant:"destructive"});return}const re=Y.assignedTo||[],ge=W.assignedTo||re,De=!!(u.teamId&&ge.length>0)?u.teamId:null,Pe=(Y.teamId||null)!==De,Ve={...Y,...W,teamId:De||void 0};Ve.teamId||delete Ve.teamId,n(Ye=>y(Ye.map(it=>it.id===V?Ve:it)));try{const Ye=ge.filter(gt=>!re.includes(gt));if(Ye.length>0){const gt=u.displayName||l.email||"Someone";for(const Ie of Ye)Ie!==l.uid&&(console.log("Sending task assignment notification to user:",Ie),Os.handleTaskAssignment(Ve,gt,Ie))}const it={...W};if(Object.entries(it).forEach(([gt,Ie])=>{Ie===void 0&&(it[gt]=pC())}),it.teamId=De||pC(),Pe){const gt=Be(Ae,Y.teamId?`teams/${Y.teamId}/tasks`:`users/${l.uid}/tasks`,V);await fo(gt);const Ie=Be(Ae,De?`teams/${De}/tasks`:`users/${l.uid}/tasks`,V),{id:Ne,...Rt}=Ve,Gt={};Object.entries(Rt).forEach(([Qt,Ze])=>{Ze!==void 0&&(Gt[Qt]=Ze)}),await xa(Ie,Gt)}else{const gt=Be(Ae,Y.teamId?`teams/${Y.teamId}/tasks`:`users/${l.uid}/tasks`,V);await Gr(gt,it)}d({title:"Task updated",description:"Your changes have been saved."})}catch(Ye){n(it=>y(it.map(gt=>gt.id===V?Y:gt))),console.error("Error updating task:",Ye),d({title:"Failed to update task",variant:"destructive"})}},C=async V=>{if(!l)return;const W=e.find(Y=>Y.id===V);if(W){n(Y=>y(Y.filter(re=>re.id!==V)));try{const Y=W.teamId?`teams/${W.teamId}/tasks/${V}`:`users/${l.uid}/tasks/${V}`;await fo(Be(Ae,Y)),Os.clearScheduledNotification(`task-reminder-${V}`),Os.clearScheduledNotification(`task-due-${V}`),d({title:"Task deleted",variant:"destructive"})}catch(Y){n(re=>y([...re,W])),console.error("Error deleting task:",Y),d({title:"Failed to delete task",variant:"destructive"})}}},b=async V=>{if(!l)return;const W=e.find(ne=>ne.id===V);if(!W)return;const Y={...W},re=W.status==="completed"?"todo":"completed",ge={...W,status:re};re==="completed"?ge.completedAt=new Date().toISOString():delete ge.completedAt,n(ne=>y(ne.map(De=>De.id===V?ge:De)));try{re==="completed"&&(f(iO),w(),Os.showTaskCompleteNotification(W.title),await Os.addInAppNotification(l.uid,"Task completed! ",`Great job completing "${W.title}"!`,"task-complete",{taskId:V,taskTitle:W.title}));const ne=W.teamId?`teams/${W.teamId}/tasks/${V}`:`users/${l.uid}/tasks/${V}`,De={status:re,completedAt:re==="completed"?ge.completedAt:pC()};await Gr(Be(Ae,ne),De)}catch(ne){n(De=>y(De.map(Pe=>Pe.id===V?Y:Pe))),console.error("Error toggling task status:",ne),d({title:"Failed to update task",variant:"destructive"})}},M=async V=>{if(!l)return;const W=e.find(re=>re.id===V);if(!W)return;const Y=W.priority==="high"?"medium":"high";n(re=>y(re.map(ge=>ge.id===V?{...ge,priority:Y}:ge)));try{const re=W.teamId?`teams/${W.teamId}/tasks/${V}`:`users/${l.uid}/tasks/${V}`;await Gr(Be(Ae,re),{priority:Y})}catch(re){n(ge=>y(ge.map(ne=>ne.id===V?{...ne,priority:W.priority}:ne))),console.error("Error toggling task priority:",re),d({title:"Failed to update priority",variant:"destructive"})}},L=async(V,W)=>{if(!l)return;const Y=e.find(ne=>ne.id===V);if(!Y)return;const re={...Y},ge=(Y.timeSpent||0)+W;n(ne=>y(ne.map(De=>De.id===V?{...De,timeSpent:ge}:De)));try{const ne=Y.teamId?`teams/${Y.teamId}/tasks/${V}`:`users/${l.uid}/tasks/${V}`;await Gr(Be(Ae,ne),{timeSpent:ge})}catch(ne){throw n(De=>y(De.map(Pe=>Pe.id===V?re:Pe))),console.error("Error updating task time:",ne),ne}},k=async(V,W)=>{if(!l)return;const Y=e.find(ne=>ne.id===V);if(!Y)return;const re={id:`sub-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,title:W,isCompleted:!1,createdAt:new Date().toISOString()},ge=[...Y.subtasks||[],re];await T(V,{subtasks:ge}),d({title:"Subtask added!"})},I=async(V,W,Y)=>{if(!l)return;const re=e.find(Pe=>Pe.id===V);if(!re||!re.subtasks)return;const ge=re.subtasks.map(Pe=>{if(Pe.id===W){const Ve=!Pe.isCompleted;let Ye=Pe.timeSpent||0;return Ve&&Y&&(Ye+=Y.currentSeconds),{...Pe,isCompleted:Ve,completedAt:Ve?new Date().toISOString():void 0,timeSpent:Ye}}return Pe}),ne=ge.find(Pe=>Pe.id===W);Y&&(ne!=null&&ne.isCompleted)&&await Y.stopTracking(),ne!=null&&ne.isCompleted&&f(iO);const De=ge.every(Pe=>Pe.isCompleted);De&&re.status!=="completed"?(await T(V,{subtasks:ge}),await b(V),d({title:"Subtask updated!",description:"All subtasks completed! Parent task marked as complete."})):!De&&re.status==="completed"?(await T(V,{subtasks:ge}),await b(V),d({title:"Subtask updated!",description:"Parent task status reverted to 'todo'."})):(await T(V,{subtasks:ge}),d({title:"Subtask updated!"}))},A=async(V,W)=>{if(!l)return;const Y=e.find(ge=>ge.id===V);if(!Y||!Y.subtasks)return;const re=Y.subtasks.filter(ge=>ge.id!==W);await T(V,{subtasks:re}),d({title:"Subtask deleted!",variant:"destructive"})},R=async(V,W,Y)=>{if(!l)return;const re=e.find(ne=>ne.id===V);if(!re||!re.subtasks)return;const ge=re.subtasks.map(ne=>ne.id===W?{...ne,timeSpent:(ne.timeSpent||0)+Y}:ne);await T(V,{subtasks:ge})},N=async(V,W)=>{if(!l)return;const Y=e.find(ne=>ne.id===V);if(!Y)return;const re=Y.lastCommentedAt?new Date(Y.lastCommentedAt).getTime():0;if(new Date(W).getTime()>re){n(ne=>y(ne.map(De=>De.id===V?{...De,lastCommentedAt:W}:De)));try{const ne=Y.teamId?`teams/${Y.teamId}/tasks/${V}`:`users/${l.uid}/tasks/${V}`;await Gr(Be(Ae,ne),{lastCommentedAt:W})}catch(ne){console.error("Error updating task lastCommentedAt:",ne)}}},P=(V,W)=>e.filter(Y=>{const re=new Date(Y.createdAt);return re>=V&&re<=W}),x=V=>e.filter(W=>W.status===V),H=V=>e.filter(W=>W.priority===V),z=V=>{const W=new Date(V);W.setHours(0,0,0,0);const Y=new Date(V);return Y.setHours(23,59,59,999),e.filter(re=>{if(re.status!=="completed"||typeof re.completedAt!="string")return!1;const ge=new Date(re.completedAt);return ge>=W&&ge<=Y})},Ce={tasks:e,teamMembers:r,loading:s,isTaskFormActive:a,setTaskFormActive:c,addTask:E,updateTask:T,deleteTask:C,toggleTaskStatus:b,toggleTaskPriority:M,updateTaskTimeSpent:L,addSubtask:k,toggleSubtaskStatus:I,deleteSubtask:A,updateSubtaskTimeSpent:R,updateTaskLastCommentedAt:N,getTasksByDateRange:P,getTasksByStatus:x,getTasksByPriority:H,getTasksCompletedOnDate:z,getTotalTasksCount:()=>e.length,getCompletedTasksCount:()=>e.filter(V=>V.status==="completed").length,getActiveTasksCount:()=>e.filter(V=>V.status!=="completed").length,getCurrentStreak:()=>{if(e.length===0)return 0;let V=0,W=new Date;for(;z(W).length>0;)V++,W.setDate(W.getDate()-1);return V},getLongestStreak:()=>{if(e.length===0)return 0;const V=[...new Set(e.filter(re=>re.status==="completed"&&typeof re.completedAt=="string").map(re=>new Date(re.completedAt).setHours(0,0,0,0)))].sort((re,ge)=>re-ge);if(V.length===0)return 0;let W=0,Y=1;for(let re=1;re<V.length;re++)V[re]-V[re-1]===864e5?Y++:(W=Math.max(W,Y),Y=1);return Math.max(W,Y)}};return p.jsx(D5.Provider,{value:Ce,children:t})}function DT(){const t=g.useContext(D5);if(t===void 0)throw new Error("useTasks must be used within a TasksContextProvider");return t}const L5=g.createContext(void 0);function F5({children:t}){const{user:e}=On(),{teamMembers:n}=DT(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),l=async y=>{if(e)try{const v=nl(rl,`presence/${e.uid}`);await mb(v,{online:y,lastSeen:Date.now()})}catch(v){console.error("Error updating online status:",v)}};g.useEffect(()=>{if(!e)return;l(!0);const y=()=>{l(!1)};window.addEventListener("beforeunload",y);const v=()=>{l(!document.hidden)};return document.addEventListener("visibilitychange",v),()=>{l(!1),window.removeEventListener("beforeunload",y),document.removeEventListener("visibilitychange",v)}},[e]),g.useEffect(()=>{if(!n.length)return;const y=[];return n.forEach(v=>{const E=nl(rl,`presence/${v.uid}`);gb(E,T=>{const C=T.val();C&&i(b=>({...b,[v.uid]:{online:C.online||!1,lastSeen:C.lastSeen||Date.now()}}))}),y.push(()=>C6(E))}),()=>{y.forEach(v=>v())}},[n]);const u=Object.values(s).reduce((y,v)=>y+v,0),d=async(y,v)=>{if(e)try{const E=nl(rl,`messageStatus/${y}/${v}/${e.uid}`);await mb(E,{read:!0,readAt:Date.now()})}catch(E){console.error("Error marking message as read:",E)}},f=async(y,v)=>{if(!(!e||v.length===0))try{const E={},T={read:!0,readAt:Date.now()};v.forEach(C=>{E[`messageStatus/${y}/${C}/${e.uid}`]=T}),await Fpe(nl(rl),E)}catch(E){console.error("Error marking messages as read:",E)}},w={onlineStatus:r,unreadCounts:s,messageStatus:a,totalUnreadCount:u,markMessageAsRead:d,markChatAsRead:async y=>{if(e)try{o(E=>({...E,[y]:0}));const v=nl(rl,`chats/${y}/messages`);gb(v,async E=>{const T=E.val();if(T){const C=Object.keys(T);await f(y,C)}},{onlyOnce:!0})}catch(v){console.error("Error marking chat as read:",v)}},markMessagesAsReadBatch:f,updateOnlineStatus:l};return p.jsx(L5.Provider,{value:w,children:t})}function T_e(){const t=g.useContext(L5);if(t===void 0)throw new Error("useTeamChat must be used within a TeamChatProvider");return t}const E_e=[{title:"Dashboard",url:"/",icon:hI},{title:"Tasks",url:"/tasks",icon:Md},{title:"Team Chat",url:"/team-chat",icon:D4},{title:"Meetly",url:"/meetly",icon:O4},{title:"Sales",icon:xZ,adminOnly:!0,subItems:[{title:"Call Tracker",url:"/sales-tracker",icon:Z0},{title:"Opportunities",url:"/sales-opportunity",icon:Tee},{title:"Sales Tools",url:"/sales-tools",icon:vee}]},{title:"Focus Timer",url:"/timer",icon:aee},{title:"AI Assistant",url:"/chat",icon:BZ},{title:"Calendar",url:"/calendar",icon:k4},{title:"Notes",url:"/notes",icon:OZ},{title:"Analytics",url:"/analytics",icon:hI}],U5=({onLinkClick:t,collapsed:e})=>{const{totalUnreadCount:n}=T_e(),i=go().pathname,{userProfile:s}=On(),o=E_e.filter(u=>!u.adminOnly||(s==null?void 0:s.role)==="admin"),a=u=>!!(u==="/"&&i==="/"||u!=="/"&&i.startsWith(u)),c=u=>a(u)?"bg-primary/10 text-primary font-semibold":"hover:bg-accent/50 text-muted-foreground hover:text-foreground",l=u=>u.some(f=>a(f.url))?"bg-primary/10 text-primary font-semibold":"hover:bg-accent/50 text-muted-foreground hover:text-foreground";return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("div",{className:"flex items-center justify-center p-4 border-b border-border/50",children:e?p.jsx("div",{className:"gradient-primary h-9 w-9 rounded-lg flex items-center justify-center shadow-md",children:p.jsx(Md,{className:"h-5 w-5 text-white"})}):p.jsxs("div",{className:"flex items-center gap-3 w-full px-2",children:[p.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 h-10 w-10 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:p.jsx(Md,{className:"h-5 w-5 text-white"})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:"text-lg font-bold text-foreground tracking-tight truncate",children:"Taskly"})})]})}),p.jsx(w5,{className:"px-3 flex-1 py-4",children:p.jsxs(T5,{children:[p.jsx(E5,{className:e?"sr-only":"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Navigation"}),p.jsx(C5,{children:p.jsx(S5,{children:o.map(u=>u.subItems?p.jsxs(e_e,{defaultOpen:u.subItems.some(d=>a(d.url)),children:[p.jsx(t_e,{asChild:!0,children:p.jsxs(Vy,{className:pe("w-full rounded-lg transition-all duration-200 group h-10",l(u.subItems)),children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx(u.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate flex-1 text-left",children:u.title})]}),!e&&p.jsx(R4,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-90"})]})}),p.jsx(n_e,{children:p.jsx("div",{className:pe("space-y-1 mt-1",e&&"hidden"),children:u.subItems.map(d=>p.jsx(Tb,{children:p.jsx(s1,{to:d.url,className:"block",onClick:t,children:p.jsxs(Vy,{className:pe("w-full rounded-lg transition-all duration-200 pl-11 h-9",c(d.url)),children:[p.jsx(d.icon,{className:"h-4 w-4 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate ml-3 flex-1 text-left",children:d.title})]})})},d.title))})})]},u.title):p.jsx(Tb,{children:p.jsx(s1,{to:u.url,className:"block",onClick:t,children:p.jsxs(Vy,{className:pe("w-full rounded-lg transition-all duration-200 group relative h-10",c(u.url)),children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx(u.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate flex-1 text-left",children:u.title})]}),u.url==="/team-chat"&&n>0&&!e&&p.jsx(Ci,{variant:"destructive",className:"h-5 min-w-[20px] flex items-center justify-center px-1.5 text-xs font-semibold flex-shrink-0",children:n>99?"99+":n})]})})},u.title))})})]})})]})};function C_e({className:t}){const{state:e,setState:n}=OT(),r=go(),i=Fh(),s=g.useRef(null),o=g.useRef(null),a=e==="collapsed",c=()=>{i||(s.current&&(clearTimeout(s.current),s.current=null),o.current=setTimeout(()=>{n("expanded")},5e3))},l=()=>{i||(o.current&&(clearTimeout(o.current),o.current=null),s.current=setTimeout(()=>{n("collapsed")},2e3))};return g.useEffect(()=>{if(r.pathname==="/sales-tracker"){const u=setTimeout(()=>{i||n("collapsed")},1e3);return()=>clearTimeout(u)}},[r.pathname,n,i]),i?null:p.jsx(_5,{className:pe("border-r border-border bg-background transition-all duration-300 ease-in-out h-full",a?"w-16":"w-64",t),onMouseEnter:c,onMouseLeave:l,children:p.jsx(U5,{collapsed:a})})}const S_e=xm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-elegant transition-smooth",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",focus:"gradient-primary text-focus-foreground hover:shadow-glow transition-smooth",break:"gradient-secondary text-break-foreground hover:shadow-elegant transition-smooth",success:"bg-success text-success-foreground hover:bg-success/90 transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ht=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?t4:"button";return p.jsx(o,{className:pe(S_e({variant:e,size:n,className:t})),ref:s,...i})});ht.displayName="Button";const Ws=g.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ws.displayName="Input";var j5={exports:{}},V5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=g;function I_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var b_e=typeof Object.is=="function"?Object.is:I_e,A_e=Zd.useState,k_e=Zd.useEffect,x_e=Zd.useLayoutEffect,R_e=Zd.useDebugValue;function P_e(t,e){var n=e(),r=A_e({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return x_e(function(){i.value=n,i.getSnapshot=e,LC(i)&&s({inst:i})},[t,n,e]),k_e(function(){return LC(i)&&s({inst:i}),t(function(){LC(i)&&s({inst:i})})},[t]),R_e(n),n}function LC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!b_e(t,n)}catch{return!0}}function N_e(t,e){return e()}var O_e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?N_e:P_e;V5.useSyncExternalStore=Zd.useSyncExternalStore!==void 0?Zd.useSyncExternalStore:O_e;j5.exports=V5;var M_e=j5.exports;function D_e(){return M_e.useSyncExternalStore(L_e,()=>!0,()=>!1)}function L_e(){return()=>{}}var IR="Avatar",[F_e,WIe]=ai(IR),[U_e,$5]=F_e(IR),B5=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=g.useState("idle");return p.jsx(U_e,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:p.jsx(je.span,{...r,ref:e})})});B5.displayName=IR;var H5="AvatarImage",z5=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=$5(H5,n),a=j_e(r,s),c=mn(l=>{i(l),o.onImageLoadingStatusChange(l)});return oi(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?p.jsx(je.img,{...s,ref:e,src:r}):null});z5.displayName=H5;var W5="AvatarFallback",K5=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=$5(W5,n),[o,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?p.jsx(je.span,{...i,ref:e}):null});K5.displayName=W5;function TL(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function j_e(t,{referrerPolicy:e,crossOrigin:n}){const r=D_e(),i=g.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=g.useState(()=>TL(s,t));return oi(()=>{a(TL(s,t))},[s,t]),oi(()=>{const c=d=>()=>{a(d)};if(!s)return;const l=c("loaded"),u=c("error");return s.addEventListener("load",l),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",l),s.removeEventListener("error",u)}},[s,n,e]),o}var q5=B5,G5=z5,Q5=K5;const Y5=g.forwardRef(({className:t,...e},n)=>p.jsx(q5,{ref:n,className:pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Y5.displayName=q5.displayName;const J5=g.forwardRef(({className:t,...e},n)=>p.jsx(G5,{ref:n,className:pe("aspect-square h-full w-full",t),...e}));J5.displayName=G5.displayName;const X5=g.forwardRef(({className:t,...e},n)=>p.jsx(Q5,{ref:n,className:pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));X5.displayName=Q5.displayName;var V_e=g.createContext(void 0);function LT(t){const e=g.useContext(V_e);return t||e||"ltr"}var FC=0;function bR(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??EL()),document.body.insertAdjacentElement("beforeend",t[1]??EL()),FC++,()=>{FC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),FC--}},[])}function EL(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var UC="focusScope.autoFocusOnMount",jC="focusScope.autoFocusOnUnmount",CL={bubbles:!1,cancelable:!0},$_e="FocusScope",FT=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=g.useState(null),l=mn(i),u=mn(s),d=g.useRef(null),f=Ct(e,y=>c(y)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(C){if(m.paused||!a)return;const b=C.target;a.contains(b)?d.current=b:ba(d.current,{select:!0})},v=function(C){if(m.paused||!a)return;const b=C.relatedTarget;b!==null&&(a.contains(b)||ba(d.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const M of C)M.removedNodes.length>0&&ba(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const T=new MutationObserver(E);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),T.disconnect()}}},[r,a,m.paused]),g.useEffect(()=>{if(a){IL.add(m);const y=document.activeElement;if(!a.contains(y)){const E=new CustomEvent(UC,CL);a.addEventListener(UC,l),a.dispatchEvent(E),E.defaultPrevented||(B_e(q_e(Z5(a)),{select:!0}),document.activeElement===y&&ba(a))}return()=>{a.removeEventListener(UC,l),setTimeout(()=>{const E=new CustomEvent(jC,CL);a.addEventListener(jC,u),a.dispatchEvent(E),E.defaultPrevented||ba(y??document.body,{select:!0}),a.removeEventListener(jC,u),IL.remove(m)},0)}}},[a,l,u,m]);const w=g.useCallback(y=>{if(!n&&!r||m.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,E=document.activeElement;if(v&&E){const T=y.currentTarget,[C,b]=H_e(T);C&&b?!y.shiftKey&&E===b?(y.preventDefault(),n&&ba(C,{select:!0})):y.shiftKey&&E===C&&(y.preventDefault(),n&&ba(b,{select:!0})):E===T&&y.preventDefault()}},[n,r,m.paused]);return p.jsx(je.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});FT.displayName=$_e;function B_e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ba(r,{select:e}),document.activeElement!==n)return}function H_e(t){const e=Z5(t),n=SL(e,t),r=SL(e.reverse(),t);return[n,r]}function Z5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SL(t,e){for(const n of t)if(!z_e(n,{upTo:e}))return n}function z_e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function W_e(t){return t instanceof HTMLInputElement&&"select"in t}function ba(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&W_e(t)&&e&&t.select()}}var IL=K_e();function K_e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=bL(t,e),t.unshift(e)},remove(e){var n;t=bL(t,e),(n=t[0])==null||n.resume()}}}function bL(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function q_e(t){return t.filter(e=>e.tagName!=="A")}var VC="rovingFocusGroup.onEntryFocus",G_e={bubbles:!1,cancelable:!0},eg="RovingFocusGroup",[Sb,ez,Q_e]=q0(eg),[Y_e,UT]=ai(eg,[Q_e]),[J_e,X_e]=Y_e(eg),tz=g.forwardRef((t,e)=>p.jsx(Sb.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Sb.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Z_e,{...t,ref:e})})}));tz.displayName=eg;var Z_e=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=t,f=g.useRef(null),m=Ct(e,f),w=LT(s),[y,v]=Fc({prop:o,defaultProp:a??null,onChange:c,caller:eg}),[E,T]=g.useState(!1),C=mn(l),b=ez(n),M=g.useRef(!1),[L,k]=g.useState(0);return g.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(VC,C),()=>I.removeEventListener(VC,C)},[C]),p.jsx(J_e,{scope:n,orientation:r,dir:w,loop:i,currentTabStopId:y,onItemFocus:g.useCallback(I=>v(I),[v]),onItemShiftTab:g.useCallback(()=>T(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(I=>I+1),[]),onFocusableItemRemove:g.useCallback(()=>k(I=>I-1),[]),children:p.jsx(je.div,{tabIndex:E||L===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:we(t.onMouseDown,()=>{M.current=!0}),onFocus:we(t.onFocus,I=>{const A=!M.current;if(I.target===I.currentTarget&&A&&!E){const R=new CustomEvent(VC,G_e);if(I.currentTarget.dispatchEvent(R),!R.defaultPrevented){const N=b().filter(Q=>Q.focusable),P=N.find(Q=>Q.active),x=N.find(Q=>Q.id===y),z=[P,x,...N].filter(Boolean).map(Q=>Q.ref.current);iz(z,u)}}M.current=!1}),onBlur:we(t.onBlur,()=>T(!1))})})}),nz="RovingFocusGroupItem",rz=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=Zs(),l=s||c,u=X_e(nz,n),d=u.currentTabStopId===l,f=ez(n),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:y}=u;return g.useEffect(()=>{if(r)return m(),()=>w()},[r,m,w]),p.jsx(Sb.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:p.jsx(je.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:we(t.onMouseDown,v=>{r?u.onItemFocus(l):v.preventDefault()}),onFocus:we(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:we(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const E=nwe(v,u.orientation,u.dir);if(E!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let C=f().filter(b=>b.focusable).map(b=>b.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const b=C.indexOf(v.currentTarget);C=u.loop?rwe(C,b+1):C.slice(b+1)}setTimeout(()=>iz(C))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:y!=null}):o})})});rz.displayName=nz;var ewe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function twe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function nwe(t,e,n){const r=twe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ewe[r]}function iz(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function rwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sz=tz,oz=rz,iwe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Su=new WeakMap,oy=new WeakMap,ay={},$C=0,az=function(t){return t&&(t.host||az(t.parentNode))},swe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=az(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},owe=function(t,e,n,r){var i=swe(e,Array.isArray(t)?t:[t]);ay[n]||(ay[n]=new WeakMap);var s=ay[n],o=[],a=new Set,c=new Set(i),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var m=f.getAttribute(r),w=m!==null&&m!=="false",y=(Su.get(f)||0)+1,v=(s.get(f)||0)+1;Su.set(f,y),s.set(f,v),o.push(f),y===1&&w&&oy.set(f,!0),v===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(e),a.clear(),$C++,function(){o.forEach(function(d){var f=Su.get(d)-1,m=s.get(d)-1;Su.set(d,f),s.set(d,m),f||(oy.has(d)||d.removeAttribute(r),oy.delete(d)),m||d.removeAttribute(n)}),$C--,$C||(Su=new WeakMap,Su=new WeakMap,oy=new WeakMap,ay={})}},AR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=iwe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),owe(r,i,n,"aria-hidden")):function(){return null}},Bs=function(){return Bs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bs.apply(this,arguments)};function cz(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function awe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var By="right-scroll-bar-position",Hy="width-before-scroll-bar",cwe="with-scroll-bars-hidden",lwe="--removed-body-scroll-bar-size";function BC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function uwe(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var dwe=typeof window<"u"?g.useLayoutEffect:g.useEffect,AL=new WeakMap;function hwe(t,e){var n=uwe(null,function(r){return t.forEach(function(i){return BC(i,r)})});return dwe(function(){var r=AL.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||BC(a,null)}),s.forEach(function(a){i.has(a)||BC(a,o)})}AL.set(n,t)},[t]),n}function fwe(t){return t}function pwe(t,e){e===void 0&&(e=fwe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function mwe(t){t===void 0&&(t={});var e=pwe(null);return e.options=Bs({async:!0,ssr:!1},t),e}var lz=function(t){var e=t.sideCar,n=cz(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Bs({},n))};lz.isSideCarExport=!0;function gwe(t,e){return t.useMedium(e),lz}var uz=mwe(),HC=function(){},jT=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:HC,onWheelCapture:HC,onTouchMoveCapture:HC}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,m=t.noRelative,w=t.noIsolation,y=t.inert,v=t.allowPinchZoom,E=t.as,T=E===void 0?"div":E,C=t.gapMode,b=cz(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=f,L=hwe([n,e]),k=Bs(Bs({},b),i);return g.createElement(g.Fragment,null,u&&g.createElement(M,{sideCar:uz,removeScrollBar:l,shards:d,noRelative:m,noIsolation:w,inert:y,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:C}),o?g.cloneElement(g.Children.only(a),Bs(Bs({},k),{ref:L})):g.createElement(T,Bs({},k,{className:c,ref:L}),a))});jT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jT.classNames={fullWidth:Hy,zeroRight:By};var ywe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vwe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ywe();return e&&t.setAttribute("nonce",e),t}function _we(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function wwe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Twe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=vwe())&&(_we(e,n),wwe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ewe=function(){var t=Twe();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},dz=function(){var t=Ewe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Cwe={left:0,top:0,right:0,gap:0},zC=function(t){return parseInt(t||"",10)||0},Swe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[zC(n),zC(r),zC(i)]},Iwe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Cwe;var e=Swe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},bwe=dz(),md="data-scroll-locked",Awe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(cwe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(md,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(By,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(By," .").concat(By,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hy," .").concat(Hy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(md,`] {
    `).concat(lwe,": ").concat(a,`px;
  }
`)},kL=function(){var t=parseInt(document.body.getAttribute(md)||"0",10);return isFinite(t)?t:0},kwe=function(){g.useEffect(function(){return document.body.setAttribute(md,(kL()+1).toString()),function(){var t=kL()-1;t<=0?document.body.removeAttribute(md):document.body.setAttribute(md,t.toString())}},[])},xwe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;kwe();var s=g.useMemo(function(){return Iwe(i)},[i]);return g.createElement(bwe,{styles:Awe(s,!e,i,n?"":"!important")})},Ib=!1;if(typeof window<"u")try{var cy=Object.defineProperty({},"passive",{get:function(){return Ib=!0,!0}});window.addEventListener("test",cy,cy),window.removeEventListener("test",cy,cy)}catch{Ib=!1}var Iu=Ib?{passive:!1}:!1,Rwe=function(t){return t.tagName==="TEXTAREA"},hz=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Rwe(t)&&n[e]==="visible")},Pwe=function(t){return hz(t,"overflowY")},Nwe=function(t){return hz(t,"overflowX")},xL=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=fz(t,r);if(i){var s=pz(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Owe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Mwe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},fz=function(t,e){return t==="v"?Pwe(e):Nwe(e)},pz=function(t,e){return t==="v"?Owe(e):Mwe(e)},Dwe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Lwe=function(t,e,n,r,i){var s=Dwe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),l=!1,u=o>0,d=0,f=0;do{if(!a)break;var m=pz(t,a),w=m[0],y=m[1],v=m[2],E=y-v-s*w;(w||E)&&fz(t,a)&&(d+=E,f+=w);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!i)||!u&&(Math.abs(f)<1||!i))&&(l=!0),l},ly=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},RL=function(t){return[t.deltaX,t.deltaY]},PL=function(t){return t&&"current"in t?t.current:t},Fwe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Uwe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jwe=0,bu=[];function Vwe(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(jwe++)[0],s=g.useState(dz)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=awe([t.lockRef.current],(t.shards||[]).map(PL),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var E=ly(y),T=n.current,C="deltaX"in y?y.deltaX:T[0]-E[0],b="deltaY"in y?y.deltaY:T[1]-E[1],M,L=y.target,k=Math.abs(C)>Math.abs(b)?"h":"v";if("touches"in y&&k==="h"&&L.type==="range")return!1;var I=xL(k,L);if(!I)return!0;if(I?M=k:(M=k==="v"?"h":"v",I=xL(k,L)),!I)return!1;if(!r.current&&"changedTouches"in y&&(C||b)&&(r.current=M),!M)return!0;var A=r.current||M;return Lwe(A,v,y,A==="h"?C:b,!0)},[]),c=g.useCallback(function(y){var v=y;if(!(!bu.length||bu[bu.length-1]!==s)){var E="deltaY"in v?RL(v):ly(v),T=e.current.filter(function(M){return M.name===v.type&&(M.target===v.target||v.target===M.shadowParent)&&Fwe(M.delta,E)})[0];if(T&&T.should){v.cancelable&&v.preventDefault();return}if(!T){var C=(o.current.shards||[]).map(PL).filter(Boolean).filter(function(M){return M.contains(v.target)}),b=C.length>0?a(v,C[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),l=g.useCallback(function(y,v,E,T){var C={name:y,delta:v,target:E,should:T,shadowParent:$we(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(b){return b!==C})},1)},[]),u=g.useCallback(function(y){n.current=ly(y),r.current=void 0},[]),d=g.useCallback(function(y){l(y.type,RL(y),y.target,a(y,t.lockRef.current))},[]),f=g.useCallback(function(y){l(y.type,ly(y),y.target,a(y,t.lockRef.current))},[]);g.useEffect(function(){return bu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Iu),document.addEventListener("touchmove",c,Iu),document.addEventListener("touchstart",u,Iu),function(){bu=bu.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,Iu),document.removeEventListener("touchmove",c,Iu),document.removeEventListener("touchstart",u,Iu)}},[]);var m=t.removeScrollBar,w=t.inert;return g.createElement(g.Fragment,null,w?g.createElement(s,{styles:Uwe(i)}):null,m?g.createElement(xwe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function $we(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Bwe=gwe(uz,Vwe);var VT=g.forwardRef(function(t,e){return g.createElement(jT,Bs({},t,{ref:e,sideCar:Bwe}))});VT.classNames=jT.classNames;var bb=["Enter"," "],Hwe=["ArrowDown","PageUp","Home"],mz=["ArrowUp","PageDown","End"],zwe=[...Hwe,...mz],Wwe={ltr:[...bb,"ArrowRight"],rtl:[...bb,"ArrowLeft"]},Kwe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tg="Menu",[dm,qwe,Gwe]=q0(tg),[pu,gz]=ai(tg,[Gwe,Eh,UT]),$T=Eh(),yz=UT(),[Qwe,mu]=pu(tg),[Ywe,ng]=pu(tg),vz=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=$T(e),[c,l]=g.useState(null),u=g.useRef(!1),d=mn(s),f=LT(i);return g.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),p.jsx(fk,{...a,children:p.jsx(Qwe,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:l,children:p.jsx(Ywe,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};vz.displayName=tg;var Jwe="MenuAnchor",kR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=$T(n);return p.jsx(Fw,{...i,...r,ref:e})});kR.displayName=Jwe;var xR="MenuPortal",[Xwe,_z]=pu(xR,{forceMount:void 0}),wz=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=mu(xR,e);return p.jsx(Xwe,{scope:e,forceMount:n,children:p.jsx(zn,{present:n||s.open,children:p.jsx(Am,{asChild:!0,container:i,children:r})})})};wz.displayName=xR;var $i="MenuContent",[Zwe,RR]=pu($i),Tz=g.forwardRef((t,e)=>{const n=_z($i,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=mu($i,t.__scopeMenu),o=ng($i,t.__scopeMenu);return p.jsx(dm.Provider,{scope:t.__scopeMenu,children:p.jsx(zn,{present:r||s.open,children:p.jsx(dm.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(eTe,{...i,ref:e}):p.jsx(tTe,{...i,ref:e})})})})}),eTe=g.forwardRef((t,e)=>{const n=mu($i,t.__scopeMenu),r=g.useRef(null),i=Ct(e,r);return g.useEffect(()=>{const s=r.current;if(s)return AR(s)},[]),p.jsx(PR,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:we(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),tTe=g.forwardRef((t,e)=>{const n=mu($i,t.__scopeMenu);return p.jsx(PR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),nTe=$l("MenuContent.ScrollLock"),PR=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:m,disableOutsideScroll:w,...y}=t,v=mu($i,n),E=ng($i,n),T=$T(n),C=yz(n),b=qwe(n),[M,L]=g.useState(null),k=g.useRef(null),I=Ct(e,k,v.onContentChange),A=g.useRef(0),R=g.useRef(""),N=g.useRef(0),P=g.useRef(null),x=g.useRef("right"),H=g.useRef(0),z=w?VT:g.Fragment,Q=w?{as:nTe,allowPinchZoom:!0}:void 0,te=j=>{var ne,De;const se=R.current+j,Ce=b().filter(Pe=>!Pe.disabled),V=document.activeElement,W=(ne=Ce.find(Pe=>Pe.ref.current===V))==null?void 0:ne.textValue,Y=Ce.map(Pe=>Pe.textValue),re=pTe(Y,se,W),ge=(De=Ce.find(Pe=>Pe.textValue===re))==null?void 0:De.ref.current;(function Pe(Ve){R.current=Ve,window.clearTimeout(A.current),Ve!==""&&(A.current=window.setTimeout(()=>Pe(""),1e3))})(se),ge&&setTimeout(()=>ge.focus())};g.useEffect(()=>()=>window.clearTimeout(A.current),[]),bR();const U=g.useCallback(j=>{var Ce,V;return x.current===((Ce=P.current)==null?void 0:Ce.side)&&gTe(j,(V=P.current)==null?void 0:V.area)},[]);return p.jsx(Zwe,{scope:n,searchRef:R,onItemEnter:g.useCallback(j=>{U(j)&&j.preventDefault()},[U]),onItemLeave:g.useCallback(j=>{var se;U(j)||((se=k.current)==null||se.focus(),L(null))},[U]),onTriggerLeave:g.useCallback(j=>{U(j)&&j.preventDefault()},[U]),pointerGraceTimerRef:N,onPointerGraceIntentChange:g.useCallback(j=>{P.current=j},[]),children:p.jsx(z,{...Q,children:p.jsx(FT,{asChild:!0,trapped:i,onMountAutoFocus:we(s,j=>{var se;j.preventDefault(),(se=k.current)==null||se.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(yh,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:m,children:p.jsx(sz,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:L,onEntryFocus:we(c,j=>{E.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(pk,{role:"menu","aria-orientation":"vertical","data-state":Fz(v.open),"data-radix-menu-content":"",dir:E.dir,...T,...y,ref:I,style:{outline:"none",...y.style},onKeyDown:we(y.onKeyDown,j=>{const Ce=j.target.closest("[data-radix-menu-content]")===j.currentTarget,V=j.ctrlKey||j.altKey||j.metaKey,W=j.key.length===1;Ce&&(j.key==="Tab"&&j.preventDefault(),!V&&W&&te(j.key));const Y=k.current;if(j.target!==Y||!zwe.includes(j.key))return;j.preventDefault();const ge=b().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);mz.includes(j.key)&&ge.reverse(),hTe(ge)}),onBlur:we(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(A.current),R.current="")}),onPointerMove:we(t.onPointerMove,hm(j=>{const se=j.target,Ce=H.current!==j.clientX;if(j.currentTarget.contains(se)&&Ce){const V=j.clientX>H.current?"right":"left";x.current=V,H.current=j.clientX}}))})})})})})})});Tz.displayName=$i;var rTe="MenuGroup",NR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(je.div,{role:"group",...r,ref:e})});NR.displayName=rTe;var iTe="MenuLabel",Ez=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(je.div,{...r,ref:e})});Ez.displayName=iTe;var P_="MenuItem",NL="menu.itemSelect",BT=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=ng(P_,t.__scopeMenu),a=RR(P_,t.__scopeMenu),c=Ct(e,s),l=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(NL,{bubbles:!0,cancelable:!0});d.addEventListener(NL,m=>r==null?void 0:r(m),{once:!0}),G0(d,f),f.defaultPrevented?l.current=!1:o.onClose()}};return p.jsx(Cz,{...i,ref:c,disabled:n,onClick:we(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),l.current=!0},onPointerUp:we(t.onPointerUp,d=>{var f;l.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:we(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||bb.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});BT.displayName=P_;var Cz=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=RR(P_,n),a=yz(n),c=g.useRef(null),l=Ct(e,c),[u,d]=g.useState(!1),[f,m]=g.useState("");return g.useEffect(()=>{const w=c.current;w&&m((w.textContent??"").trim())},[s.children]),p.jsx(dm.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:p.jsx(oz,{asChild:!0,...a,focusable:!r,children:p.jsx(je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:l,onPointerMove:we(t.onPointerMove,hm(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:we(t.onPointerLeave,hm(w=>o.onItemLeave(w))),onFocus:we(t.onFocus,()=>d(!0)),onBlur:we(t.onBlur,()=>d(!1))})})})}),sTe="MenuCheckboxItem",Sz=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(xz,{scope:t.__scopeMenu,checked:n,children:p.jsx(BT,{role:"menuitemcheckbox","aria-checked":N_(n)?"mixed":n,...i,ref:e,"data-state":MR(n),onSelect:we(i.onSelect,()=>r==null?void 0:r(N_(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Sz.displayName=sTe;var Iz="MenuRadioGroup",[oTe,aTe]=pu(Iz,{value:void 0,onValueChange:()=>{}}),bz=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=mn(r);return p.jsx(oTe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(NR,{...i,ref:e})})});bz.displayName=Iz;var Az="MenuRadioItem",kz=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=aTe(Az,t.__scopeMenu),s=n===i.value;return p.jsx(xz,{scope:t.__scopeMenu,checked:s,children:p.jsx(BT,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":MR(s),onSelect:we(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});kz.displayName=Az;var OR="MenuItemIndicator",[xz,cTe]=pu(OR,{checked:!1}),Rz=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=cTe(OR,n);return p.jsx(zn,{present:r||N_(s.checked)||s.checked===!0,children:p.jsx(je.span,{...i,ref:e,"data-state":MR(s.checked)})})});Rz.displayName=OR;var lTe="MenuSeparator",Pz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Pz.displayName=lTe;var uTe="MenuArrow",Nz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=$T(n);return p.jsx(mk,{...i,...r,ref:e})});Nz.displayName=uTe;var dTe="MenuSub",[KIe,Oz]=pu(dTe),xf="MenuSubTrigger",Mz=g.forwardRef((t,e)=>{const n=mu(xf,t.__scopeMenu),r=ng(xf,t.__scopeMenu),i=Oz(xf,t.__scopeMenu),s=RR(xf,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,l={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),p.jsx(kR,{asChild:!0,...l,children:p.jsx(Cz,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Fz(n.open),...t,ref:Pw(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:we(t.onPointerMove,hm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:we(t.onPointerLeave,hm(d=>{var m,w;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const y=(w=n.content)==null?void 0:w.dataset.side,v=y==="right",E=v?-5:5,T=f[v?"left":"right"],C=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+E,y:d.clientY},{x:T,y:f.top},{x:C,y:f.top},{x:C,y:f.bottom},{x:T,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:we(t.onKeyDown,d=>{var m;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Wwe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});Mz.displayName=xf;var Dz="MenuSubContent",Lz=g.forwardRef((t,e)=>{const n=_z($i,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=mu($i,t.__scopeMenu),o=ng($i,t.__scopeMenu),a=Oz(Dz,t.__scopeMenu),c=g.useRef(null),l=Ct(e,c);return p.jsx(dm.Provider,{scope:t.__scopeMenu,children:p.jsx(zn,{present:r||s.open,children:p.jsx(dm.Slot,{scope:t.__scopeMenu,children:p.jsx(PR,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:we(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:we(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:we(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),f=Kwe[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});Lz.displayName=Dz;function Fz(t){return t?"open":"closed"}function N_(t){return t==="indeterminate"}function MR(t){return N_(t)?"indeterminate":t?"checked":"unchecked"}function hTe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function fTe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function pTe(t,e,n){const i=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=fTe(t,Math.max(s,0));i.length===1&&(o=o.filter(l=>l!==n));const c=o.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function mTe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,f=c.y;u>r!=f>r&&n<(d-l)*(r-u)/(f-u)+l&&(i=!i)}return i}function gTe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return mTe(n,e)}function hm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var yTe=vz,vTe=kR,_Te=wz,wTe=Tz,TTe=NR,ETe=Ez,CTe=BT,STe=Sz,ITe=bz,bTe=kz,ATe=Rz,kTe=Pz,xTe=Nz,RTe=Mz,PTe=Lz,HT="DropdownMenu",[NTe,qIe]=ai(HT,[gz]),Fr=gz(),[OTe,Uz]=NTe(HT),jz=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Fr(e),l=g.useRef(null),[u,d]=Fc({prop:i,defaultProp:s??!1,onChange:o,caller:HT});return p.jsx(OTe,{scope:e,triggerId:Zs(),triggerRef:l,contentId:Zs(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a,children:p.jsx(yTe,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};jz.displayName=HT;var Vz="DropdownMenuTrigger",$z=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=Uz(Vz,n),o=Fr(n);return p.jsx(vTe,{asChild:!0,...o,children:p.jsx(je.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Pw(e,s.triggerRef),onPointerDown:we(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:we(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});$z.displayName=Vz;var MTe="DropdownMenuPortal",Bz=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Fr(e);return p.jsx(_Te,{...r,...n})};Bz.displayName=MTe;var Hz="DropdownMenuContent",zz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Uz(Hz,n),s=Fr(n),o=g.useRef(!1);return p.jsx(wTe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:we(t.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:we(t.onInteractOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zz.displayName=Hz;var DTe="DropdownMenuGroup",LTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(TTe,{...i,...r,ref:e})});LTe.displayName=DTe;var FTe="DropdownMenuLabel",Wz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(ETe,{...i,...r,ref:e})});Wz.displayName=FTe;var UTe="DropdownMenuItem",Kz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(CTe,{...i,...r,ref:e})});Kz.displayName=UTe;var jTe="DropdownMenuCheckboxItem",qz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(STe,{...i,...r,ref:e})});qz.displayName=jTe;var VTe="DropdownMenuRadioGroup",$Te=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(ITe,{...i,...r,ref:e})});$Te.displayName=VTe;var BTe="DropdownMenuRadioItem",Gz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(bTe,{...i,...r,ref:e})});Gz.displayName=BTe;var HTe="DropdownMenuItemIndicator",Qz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(ATe,{...i,...r,ref:e})});Qz.displayName=HTe;var zTe="DropdownMenuSeparator",Yz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(kTe,{...i,...r,ref:e})});Yz.displayName=zTe;var WTe="DropdownMenuArrow",KTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(xTe,{...i,...r,ref:e})});KTe.displayName=WTe;var qTe="DropdownMenuSubTrigger",Jz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(RTe,{...i,...r,ref:e})});Jz.displayName=qTe;var GTe="DropdownMenuSubContent",Xz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Fr(n);return p.jsx(PTe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Xz.displayName=GTe;var QTe=jz,YTe=$z,JTe=Bz,Zz=zz,e9=Wz,t9=Kz,n9=qz,r9=Gz,i9=Qz,s9=Yz,o9=Jz,a9=Xz;const XTe=QTe,ZTe=YTe,eEe=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(o9,{ref:i,className:pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,p.jsx(R4,{className:"ml-auto h-4 w-4"})]}));eEe.displayName=o9.displayName;const tEe=g.forwardRef(({className:t,...e},n)=>p.jsx(a9,{ref:n,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));tEe.displayName=a9.displayName;const c9=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(JTe,{children:p.jsx(Zz,{ref:r,sideOffset:e,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));c9.displayName=Zz.displayName;const zy=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(t9,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));zy.displayName=t9.displayName;const nEe=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(n9,{ref:i,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(i9,{children:p.jsx(x4,{className:"h-4 w-4"})})}),e]}));nEe.displayName=n9.displayName;const rEe=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(r9,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(i9,{children:p.jsx(EZ,{className:"h-2 w-2 fill-current"})})}),e]}));rEe.displayName=r9.displayName;const iEe=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(e9,{ref:r,className:pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));iEe.displayName=e9.displayName;const Ab=g.forwardRef(({className:t,...e},n)=>p.jsx(s9,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));Ab.displayName=s9.displayName;var zT="Popover",[l9,GIe]=ai(zT,[Eh]),rg=Eh(),[sEe,zc]=l9(zT),u9=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=rg(e),c=g.useRef(null),[l,u]=g.useState(!1),[d,f]=Fc({prop:r,defaultProp:i??!1,onChange:s,caller:zT});return p.jsx(fk,{...a,children:p.jsx(sEe,{scope:e,contentId:Zs(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:n})})};u9.displayName=zT;var d9="PopoverAnchor",oEe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=zc(d9,n),s=rg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return g.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(Fw,{...s,...r,ref:e})});oEe.displayName=d9;var h9="PopoverTrigger",f9=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=zc(h9,n),s=rg(n),o=Ct(e,i.triggerRef),a=p.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":v9(i.open),...r,ref:o,onClick:we(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(Fw,{asChild:!0,...s,children:a})});f9.displayName=h9;var DR="PopoverPortal",[aEe,cEe]=l9(DR,{forceMount:void 0}),p9=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=zc(DR,e);return p.jsx(aEe,{scope:e,forceMount:n,children:p.jsx(zn,{present:n||s.open,children:p.jsx(Am,{asChild:!0,container:i,children:r})})})};p9.displayName=DR;var eh="PopoverContent",m9=g.forwardRef((t,e)=>{const n=cEe(eh,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=zc(eh,t.__scopePopover);return p.jsx(zn,{present:r||s.open,children:s.modal?p.jsx(uEe,{...i,ref:e}):p.jsx(dEe,{...i,ref:e})})});m9.displayName=eh;var lEe=$l("PopoverContent.RemoveScroll"),uEe=g.forwardRef((t,e)=>{const n=zc(eh,t.__scopePopover),r=g.useRef(null),i=Ct(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return AR(o)},[]),p.jsx(VT,{as:lEe,allowPinchZoom:!0,children:p.jsx(g9,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,l=a.button===2||c;s.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:we(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),dEe=g.forwardRef((t,e)=>{const n=zc(eh,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(g9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),g9=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=t,f=zc(eh,n),m=rg(n);return bR(),p.jsx(FT,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(yh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:p.jsx(pk,{"data-state":v9(f.open),role:"dialog",id:f.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),y9="PopoverClose",hEe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=zc(y9,n);return p.jsx(je.button,{type:"button",...r,ref:e,onClick:we(t.onClick,()=>i.onOpenChange(!1))})});hEe.displayName=y9;var fEe="PopoverArrow",pEe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=rg(n);return p.jsx(mk,{...i,...r,ref:e})});pEe.displayName=fEe;function v9(t){return t?"open":"closed"}var mEe=u9,gEe=f9,yEe=p9,_9=m9;const w9=mEe,T9=gEe,LR=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(yEe,{children:p.jsx(_9,{ref:i,align:e,sideOffset:n,className:pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));LR.displayName=_9.displayName;function vEe(t,[e,n]){return Math.min(n,Math.max(e,t))}function _Ee(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var FR="ScrollArea",[E9,QIe]=ai(FR),[wEe,Ki]=E9(FR),C9=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,c]=g.useState(null),[l,u]=g.useState(null),[d,f]=g.useState(null),[m,w]=g.useState(null),[y,v]=g.useState(null),[E,T]=g.useState(0),[C,b]=g.useState(0),[M,L]=g.useState(!1),[k,I]=g.useState(!1),A=Ct(e,N=>c(N)),R=LT(i);return p.jsx(wEe,{scope:n,type:r,dir:R,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:u,content:d,onContentChange:f,scrollbarX:m,onScrollbarXChange:w,scrollbarXEnabled:M,onScrollbarXEnabledChange:L,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:T,onCornerHeightChange:b,children:p.jsx(je.div,{dir:R,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});C9.displayName=FR;var S9="ScrollAreaViewport",I9=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=Ki(S9,n),a=g.useRef(null),c=Ct(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(je.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});I9.displayName=S9;var _o="ScrollAreaScrollbar",UR=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Ki(_o,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return g.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?p.jsx(TEe,{...r,ref:e,forceMount:n}):i.type==="scroll"?p.jsx(EEe,{...r,ref:e,forceMount:n}):i.type==="auto"?p.jsx(b9,{...r,ref:e,forceMount:n}):i.type==="always"?p.jsx(jR,{...r,ref:e}):null});UR.displayName=_o;var TEe=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Ki(_o,t.__scopeScrollArea),[s,o]=g.useState(!1);return g.useEffect(()=>{const a=i.scrollArea;let c=0;if(a){const l=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(zn,{present:n||s,children:p.jsx(b9,{"data-state":s?"visible":"hidden",...r,ref:e})})}),EEe=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Ki(_o,t.__scopeScrollArea),s=t.orientation==="horizontal",o=KT(()=>c("SCROLL_END"),100),[a,c]=_Ee("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,c]),g.useEffect(()=>{const l=i.viewport,u=s?"scrollLeft":"scrollTop";if(l){let d=l[u];const f=()=>{const m=l[u];d!==m&&(c("SCROLL"),o()),d=m};return l.addEventListener("scroll",f),()=>l.removeEventListener("scroll",f)}},[i.viewport,s,c,o]),p.jsx(zn,{present:n||a!=="hidden",children:p.jsx(jR,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:we(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:we(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),b9=g.forwardRef((t,e)=>{const n=Ki(_o,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=g.useState(!1),a=t.orientation==="horizontal",c=KT(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:u)}},10);return th(n.viewport,c),th(n.content,c),p.jsx(zn,{present:r||s,children:p.jsx(jR,{"data-state":s?"visible":"hidden",...i,ref:e})})}),jR=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=Ki(_o,t.__scopeScrollArea),s=g.useRef(null),o=g.useRef(0),[a,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=P9(a.viewport,a.content),u={...r,sizes:a,onSizesChange:c,hasThumb:l>0&&l<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function d(f,m){return kEe(f,o.current,a,m)}return n==="horizontal"?p.jsx(CEe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollLeft,m=OL(f,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=d(f,i.dir))}}):n==="vertical"?p.jsx(SEe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollTop,m=OL(f,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=d(f))}}):null}),CEe=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Ki(_o,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=Ct(e,c,s.onScrollbarXChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(k9,{"data-orientation":"horizontal",...i,ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":WT(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const f=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),O9(f,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:M_(o.paddingLeft),paddingEnd:M_(o.paddingRight)}})}})}),SEe=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Ki(_o,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=Ct(e,c,s.onScrollbarYChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(k9,{"data-orientation":"vertical",...i,ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":WT(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const f=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),O9(f,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:M_(o.paddingTop),paddingEnd:M_(o.paddingBottom)}})}})}),[IEe,A9]=E9(_o),k9=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:l,onWheelScroll:u,onResize:d,...f}=t,m=Ki(_o,n),[w,y]=g.useState(null),v=Ct(e,A=>y(A)),E=g.useRef(null),T=g.useRef(""),C=m.viewport,b=r.content-r.viewport,M=mn(u),L=mn(c),k=KT(d,10);function I(A){if(E.current){const R=A.clientX-E.current.left,N=A.clientY-E.current.top;l({x:R,y:N})}}return g.useEffect(()=>{const A=R=>{const N=R.target;(w==null?void 0:w.contains(N))&&M(R,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[C,w,b,M]),g.useEffect(L,[r,L]),th(w,k),th(m.content,k),p.jsx(IEe,{scope:n,scrollbar:w,hasThumb:i,onThumbChange:mn(s),onThumbPointerUp:mn(o),onThumbPositionChange:L,onThumbPointerDown:mn(a),children:p.jsx(je.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:we(t.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),E.current=w.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),I(A))}),onPointerMove:we(t.onPointerMove,I),onPointerUp:we(t.onPointerUp,A=>{const R=A.target;R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=T.current,m.viewport&&(m.viewport.style.scrollBehavior=""),E.current=null})})})}),O_="ScrollAreaThumb",x9=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=A9(O_,t.__scopeScrollArea);return p.jsx(zn,{present:n||i.hasThumb,children:p.jsx(bEe,{ref:e,...r})})}),bEe=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=Ki(O_,n),o=A9(O_,n),{onThumbPositionChange:a}=o,c=Ct(e,d=>o.onThumbChange(d)),l=g.useRef(void 0),u=KT(()=>{l.current&&(l.current(),l.current=void 0)},100);return g.useEffect(()=>{const d=s.viewport;if(d){const f=()=>{if(u(),!l.current){const m=xEe(d,a);l.current=m,a()}};return a(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[s.viewport,u,a]),p.jsx(je.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:we(t.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),w=d.clientX-m.left,y=d.clientY-m.top;o.onThumbPointerDown({x:w,y})}),onPointerUp:we(t.onPointerUp,o.onThumbPointerUp)})});x9.displayName=O_;var VR="ScrollAreaCorner",R9=g.forwardRef((t,e)=>{const n=Ki(VR,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(AEe,{...t,ref:e}):null});R9.displayName=VR;var AEe=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=Ki(VR,n),[s,o]=g.useState(0),[a,c]=g.useState(0),l=!!(s&&a);return th(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),th(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),l?p.jsx(je.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function M_(t){return t?parseInt(t,10):0}function P9(t,e){const n=t/e;return isNaN(n)?0:n}function WT(t){const e=P9(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function kEe(t,e,n,r="ltr"){const i=WT(n),s=i/2,o=e||s,a=i-o,c=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return N9([c,l],d)(t)}function OL(t,e,n="ltr"){const r=WT(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,c=n==="ltr"?[0,o]:[o*-1,0],l=vEe(t,c);return N9([0,o],[0,a])(l)}function N9(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function O9(t,e){return t>0&&t<e}var xEe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function KT(t,e){const n=mn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function th(t,e){const n=mn(e);oi(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var M9=C9,REe=I9,PEe=R9;const D9=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(M9,{ref:r,className:pe("relative overflow-hidden",t),...n,children:[p.jsx(REe,{className:"h-full w-full rounded-[inherit] touch-pan-y scrollbar-hide",children:e}),p.jsx(L9,{}),p.jsx(PEe,{})]}));D9.displayName=M9.displayName;const L9=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(UR,{ref:r,orientation:e,className:pe("flex touch-none select-none transition-colors hidden md:flex",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:p.jsx(x9,{className:"relative flex-1 rounded-full bg-border"})}));L9.displayName=UR.displayName;function NEe(){const{notifications:t,unreadCount:e,markAsRead:n,markAllAsRead:r,deleteNotification:i,clearAllNotifications:s}=ER(),[o,a]=g.useState(!1),c=m=>{const w=new Date(m),v=Math.floor((new Date().getTime()-w.getTime())/(1e3*60));return v<1?"Just now":v<60?`${v}m ago`:v<1440?`${Math.floor(v/60)}h ago`:w.toLocaleDateString()},l=m=>{switch(m){case"task-assignment":return"";case"task-complete":return"";case"pomodoro-complete":return"";case"team-request":return"";default:return""}},u=async m=>{m.read||await n(m.id)},d=async()=>{await r()},f=async()=>{await s(),a(!1)};return p.jsxs(w9,{open:o,onOpenChange:a,children:[p.jsx(T9,{asChild:!0,children:p.jsxs(ht,{variant:"ghost",size:"icon",className:pe("relative hover-scale transition-smooth h-9 w-9",e>0&&"text-primary"),children:[p.jsx(Z1,{className:"h-4 w-4"}),e>0&&p.jsx(Ci,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs font-bold animate-pulse",children:e>99?"99+":e})]})}),p.jsxs(LR,{className:"w-80 p-0 shadow-elegant",align:"end",children:[p.jsxs("div",{className:"p-4 border-b",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"font-semibold",children:"Notifications"}),p.jsxs("div",{className:"flex items-center gap-2",children:[e>0&&p.jsxs(ht,{variant:"ghost",size:"sm",onClick:d,className:"text-xs hover-scale",children:[p.jsx(mZ,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.length>0&&p.jsx(ht,{variant:"ghost",size:"sm",onClick:f,className:"text-xs hover-scale text-destructive hover:bg-destructive/10",children:p.jsx(lee,{className:"h-3 w-3"})})]})]}),e>0&&p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e," unread notification",e!==1?"s":""]})]}),p.jsx(D9,{className:"h-[400px]",children:t.length===0?p.jsxs("div",{className:"text-center py-8 px-4",children:[p.jsx(Z1,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll see updates about tasks and activities here"})]}):p.jsx("div",{className:"divide-y",children:t.map(m=>p.jsx("div",{className:pe("p-4 hover:bg-muted/30 transition-smooth cursor-pointer group",!m.read&&"bg-primary/5 border-l-2 border-l-primary"),onClick:()=>u(m),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"text-lg shrink-0 mt-0.5",children:l(m.type)}),p.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h4",{className:pe("text-sm font-medium leading-tight",!m.read&&"font-semibold"),children:m.title}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!m.read&&p.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"}),p.jsx(ht,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:w=>{w.stopPropagation(),i(m.id)},children:p.jsx(vh,{className:"h-3 w-3"})})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed line-clamp-2",children:m.body}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:c(m.timestamp)}),!m.read&&p.jsxs(ht,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),n(m.id)},className:"text-xs hover-scale opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(x4,{className:"h-3 w-3 mr-1"}),"Mark read"]})]})]})]})},m.id))})})]})]})}const OEe=[{href:"/tasks",label:"Tasks",icon:p.jsx(Md,{className:"h-5 w-5"})},{href:"/team-chat",label:"Team Chat",icon:p.jsx(D4,{className:"h-5 w-5"})},{href:"/meetly",label:"Meetly",icon:p.jsx(O4,{className:"h-5 w-5"})},{href:"/calendar",label:"Calendar",icon:p.jsx(k4,{className:"h-5 w-5"})},{href:"/notes",label:"Notes",icon:p.jsx(qZ,{className:"h-5 w-5"})},{href:"/analytics",label:"Analytics",icon:p.jsx(hI,{className:"h-5 w-5"})}];function ML({mobileTrigger:t}){const{user:e,userProfile:n,signOutUser:r}=On(),{state:i}=OT(),s=go(),o=ou(),[a,c]=g.useState(!1),[l,u]=g.useState(""),d=Fh(),f=()=>{const y=s.pathname;return{"/":"Dashboard","/tasks":"Tasks","/timer":"Timer","/chat":"AI Coach","/team-chat":"Team Chat","/meetly":"Meetly","/calendar":"Calendar","/notes":"Notes","/analytics":"Analytics","/profile":"Profile"}[y]||"Dashboard"},m=y=>{y.preventDefault(),l.trim()&&console.log("Searching for:",l)},w=(y,v)=>y&&y.trim()?y.split(" ").map(E=>E[0]).join("").toUpperCase().slice(0,2):v?v.split("@")[0].slice(0,2).toUpperCase():"U";return p.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 pt-safe",children:p.jsxs("div",{className:"flex h-14 items-center px-4",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[d&&t?t:p.jsx(I5,{className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:i==="expanded"?p.jsx(vh,{className:"h-4 w-4"}):p.jsx(N4,{className:"h-4 w-4"})}),p.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[p.jsx(Np,{to:"/",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Workspace"}),p.jsx("span",{className:"text-muted-foreground",children:"/"}),p.jsx("span",{className:"font-medium",children:f()})]})]}),p.jsx(T$,{delayDuration:0,children:p.jsx("nav",{className:"hidden md:flex items-center gap-1 ml-6",children:OEe.map(y=>p.jsxs(bre,{children:[p.jsx(Are,{asChild:!0,children:p.jsx(Np,{to:y.href,"aria-label":y.label,className:pe("flex h-9 w-9 items-center justify-center rounded-lg transition-colors hover:bg-accent",s.pathname.startsWith(y.href)?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:y.icon})}),p.jsx(E$,{children:p.jsx("p",{children:y.label})})]},y.href))})}),p.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[p.jsx("div",{className:"w-full max-w-xs",children:p.jsxs(w9,{open:a,onOpenChange:c,children:[p.jsx(T9,{asChild:!0,children:p.jsxs(ht,{variant:"outline",className:"w-full justify-start text-sm text-muted-foreground hover:bg-muted",children:[p.jsx(tO,{className:"mr-2 h-4 w-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Search everything..."}),p.jsx("span",{className:"sm:hidden",children:"Search..."}),p.jsx("div",{className:"ml-auto hidden sm:flex items-center gap-1",children:p.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground opacity-100",children:[p.jsx(AZ,{className:"h-3 w-3"}),"K"]})})]})}),p.jsx(LR,{className:"w-96 p-0",align:"center",children:p.jsx("form",{onSubmit:m,className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(tO,{className:"h-4 w-4 text-muted-foreground"}),p.jsx(Ws,{value:l,onChange:y=>u(y.target.value),placeholder:"Search tasks, notes, messages...",className:"border-0 shadow-none focus-visible:ring-0",autoFocus:!0})]})})})]})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(NEe,{}),p.jsxs(XTe,{children:[p.jsx(ZTe,{asChild:!0,children:p.jsx(ht,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:p.jsxs(Y5,{className:"h-8 w-8",children:[p.jsx(J5,{src:(n==null?void 0:n.photoURL)||(e==null?void 0:e.photoURL)||""}),p.jsx(X5,{className:"text-xs bg-primary/10 text-primary",children:w(n==null?void 0:n.displayName,e==null?void 0:e.email)})]})})}),p.jsxs(c9,{className:"w-56",align:"end",forceMount:!0,children:[p.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:p.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[(n==null?void 0:n.displayName)&&p.jsx("p",{className:"font-medium",children:n.displayName}),(e==null?void 0:e.email)&&p.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e.email})]})}),p.jsx(Ab,{}),p.jsxs(zy,{onClick:()=>o("/profile"),children:[p.jsx(ek,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Profile"})]}),p.jsxs(zy,{onClick:()=>o("/profile"),children:[p.jsx(nee,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsx(Ab,{}),p.jsxs(zy,{onClick:r,className:"text-destructive focus:text-destructive",children:[p.jsx(LZ,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Log out"})]})]})]})]})]})]})})}const F9=g.createContext(void 0);function MEe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(!1),[s,o]=g.useState(!0),a=u=>{n(u),i(!0),o(!0)},c=()=>{n(null),i(!1),o(!1)},l=()=>{o(!s)};return p.jsx(F9.Provider,{value:{activeTask:e,isTimerRunning:r,isTimerExpanded:s,startTaskTimer:a,stopTimer:c,toggleTimerSize:l},children:t})}function U9(){const t=g.useContext(F9);if(t===void 0)throw new Error("useTimer must be used within a TimerProvider");return t}const po=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));po.displayName="Card";const ca=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("flex flex-col space-y-1.5 p-6",t),...e}));ca.displayName="CardHeader";const la=g.forwardRef(({className:t,...e},n)=>p.jsx("h3",{ref:n,className:pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));la.displayName="CardTitle";const $R=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));$R.displayName="CardDescription";const mo=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("p-6 pt-0",t),...e}));mo.displayName="CardContent";const DEe=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("flex items-center p-6 pt-0",t),...e}));DEe.displayName="CardFooter";var BR="Progress",HR=100,[LEe,YIe]=ai(BR),[FEe,UEe]=LEe(BR),j9=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=jEe,...o}=t;(i||i===0)&&!DL(i)&&console.error(VEe(`${i}`,"Progress"));const a=DL(i)?i:HR;r!==null&&!LL(r,a)&&console.error($Ee(`${r}`,"Progress"));const c=LL(r,a)?r:null,l=D_(c)?s(c,a):void 0;return p.jsx(FEe,{scope:n,value:c,max:a,children:p.jsx(je.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":D_(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":B9(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});j9.displayName=BR;var V9="ProgressIndicator",$9=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=UEe(V9,n);return p.jsx(je.div,{"data-state":B9(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});$9.displayName=V9;function jEe(t,e){return`${Math.round(t/e*100)}%`}function B9(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function D_(t){return typeof t=="number"}function DL(t){return D_(t)&&!isNaN(t)&&t>0}function LL(t,e){return D_(t)&&!isNaN(t)&&t<=e&&t>=0}function VEe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${HR}\`.`}function $Ee(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${HR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var H9=j9,BEe=$9;const zR=g.forwardRef(({className:t,value:e,...n},r)=>p.jsx(H9,{ref:r,className:pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:p.jsx(BEe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));zR.displayName=H9.displayName;function HEe(){const{activeTask:t,isTimerExpanded:e,toggleTimerSize:n,stopTimer:r}=U9(),[i,s]=g.useState("focus"),[o,a]=g.useState(0),[c,l]=g.useState(!1),[u,d]=g.useState(0),{toast:f}=fa(),m=g.useRef(),w={shortBreak:5,longBreak:15,sessionsUntilLongBreak:4};g.useEffect(()=>{if(t&&i==="focus"){const M=t.estimatedTime||25;a(M*60)}else if(i==="break"){const M=u%w.sessionsUntilLongBreak===0&&u>0;a(M?w.longBreak*60:w.shortBreak*60)}},[t,i,u]);const y=i==="focus"?((t==null?void 0:t.estimatedTime)||25)*60:u%w.sessionsUntilLongBreak===0&&u>0?w.longBreak*60:w.shortBreak*60,v=(y-o)/y*100;g.useEffect(()=>(c&&o>0?m.current=setInterval(()=>{a(M=>M-1)},1e3):(clearInterval(m.current),o===0&&c&&(l(!1),i==="focus"?(d(M=>M+1),s("break"),oO(sO),Os.showPomodoroNotification("focus-complete",u+1),f({title:"Focus session completed! ",description:"Time for a break. Great work!"})):(s("focus"),oO(sO),Os.showPomodoroNotification("break-complete"),f({title:"Break time over! ",description:"Ready to focus again?"})))),()=>clearInterval(m.current)),[c,o,i,u,f]);const E=M=>{const L=Math.floor(M/60),k=M%60;return`${L.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`},T=()=>{l(!c)},C=()=>{l(!1);const M=(t==null?void 0:t.estimatedTime)||25;a(i==="focus"?M*60:w.shortBreak*60)},b=()=>{f({title:"Task completed! ",description:`"${t==null?void 0:t.title}" has been marked as complete.`}),r()};return t?p.jsx("div",{className:pe("fixed bottom-6 right-6 z-50 transition-all duration-300 ease-in-out",e?"w-96 h-auto":"w-72 h-20"),children:p.jsx(po,{className:pe("shadow-elegant border-2 backdrop-blur-sm transition-all duration-300",i==="focus"?"border-focus/30 bg-card/95":"border-break/30 bg-card/95",e&&"shadow-glow"),children:p.jsx(mo,{className:"p-4",children:e?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(X0,{className:"h-4 w-4 text-focus"}),p.jsx(Ci,{variant:i==="focus"?"default":"secondary",children:i==="focus"?"Focus":"Break"})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(ht,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(WZ,{className:"h-3 w-3"})}),p.jsx(ht,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",onClick:r,children:p.jsx(vh,{className:"h-3 w-3"})})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"font-semibold text-sm mb-1",children:t.title}),p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:pe("text-4xl font-mono font-bold transition-colors",i==="focus"?"text-focus":"text-break"),children:E(o)}),p.jsx(zR,{value:v,className:pe("h-2 transition-colors",i==="focus"?"[&>div]:bg-focus":"[&>div]:bg-break")})]}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsxs(ht,{variant:i==="focus"?"focus":"break",size:"sm",onClick:T,className:"hover-scale flex-1",children:[c?p.jsx(fI,{className:"h-4 w-4 mr-2"}):p.jsx(pI,{className:"h-4 w-4 mr-2"}),c?"Pause":"Start"]}),p.jsx(ht,{variant:"outline",size:"sm",onClick:C,className:"hover-scale",children:p.jsx(ZZ,{className:"h-4 w-4"})}),i==="focus"&&p.jsx(ht,{variant:"outline",size:"sm",onClick:b,className:"hover-scale text-success hover:text-success",children:p.jsx(wZ,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center text-xs",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-focus",children:"Sessions"}),p.jsx("div",{className:"text-lg font-bold",children:u})]}),p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-break",children:"Next Break"}),p.jsx("div",{className:"text-lg font-bold",children:w.sessionsUntilLongBreak-u%w.sessionsUntilLongBreak})]})]})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:pe("text-lg font-mono font-bold",i==="focus"?"text-focus":"text-break"),children:E(o)}),p.jsxs(Ci,{variant:"secondary",className:"text-xs",children:[t.title.slice(0,12),"..."]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(ht,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:T,children:c?p.jsx(fI,{className:"h-3 w-3"}):p.jsx(pI,{className:"h-3 w-3"})}),p.jsx(ht,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(jZ,{className:"h-3 w-3"})})]})]})})})}):null}const z9=g.createContext(void 0);function zEe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(0),[s,o]=g.useState(!1),[a,c]=g.useState(null),[l,u]=g.useState(null),[d,f]=g.useState(0),[m,w]=g.useState(!1),[y,v]=g.useState(null),{user:E}=On(),{updateTaskTimeSpent:T,updateSubtaskTimeSpent:C}=DT(),{toast:b}=fa();g.useEffect(()=>{if(!E)return;const z=Be(Ae,"users",E.uid,"activeTracking","currentSession"),Q=so(z,te=>{if(te.exists()){const U=te.data();if((!e||e.id!==U.taskId)&&n({id:U.taskId,title:U.taskTitle}),o(!U.isPaused),U.isPaused&&U.pausedAt)i(U.accumulatedSeconds),c(null);else{c(U.startTime);const j=Math.floor((Date.now()-U.startTime)/1e3);i(U.accumulatedSeconds+j)}}});return()=>Q()},[E]),g.useEffect(()=>{if(!E)return;const z=Be(Ae,"users",E.uid,"activeTracking","currentSubtaskSession"),Q=so(z,te=>{if(te.exists()){const U=te.data();if((!l||l.subtaskId!==U.subtaskId)&&u({taskId:U.taskId,subtaskId:U.subtaskId,subtaskTitle:U.subtaskTitle}),w(!U.isPaused),U.isPaused&&U.pausedAt)f(U.accumulatedSeconds),v(null);else{v(U.startTime);const j=Math.floor((Date.now()-U.startTime)/1e3);f(U.accumulatedSeconds+j)}}});return()=>Q()},[E]),g.useEffect(()=>{let z;return s&&e&&(z=setInterval(()=>{i(Q=>Q+1)},1e3)),()=>{z&&clearInterval(z)}},[s,e]),g.useEffect(()=>{let z;return m&&l&&(z=setInterval(()=>{f(Q=>Q+1)},1e3)),()=>{z&&clearInterval(z)}},[m,l]);const M=async z=>{if(!E)return;e&&e.id!==z.id&&await I();const Q=Date.now(),te={taskId:z.id,taskTitle:z.title,startTime:Q,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const U=Be(Ae,"users",E.uid,"activeTracking","currentSession");await xa(U,te),n(z),i(0),o(!0),c(Q),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_TIME_TRACKING",session:te}),b({title:"Time tracking started",description:`Now tracking time for "${z.title}"`})}catch(U){console.error("Error starting tracking:",U),b({title:"Failed to start tracking",variant:"destructive"})}},L=async()=>{if(!(!e||!E||!a))try{const z=Date.now(),Q=Math.floor((z-a)/1e3),te=r,U=Be(Ae,"users",E.uid,"activeTracking","currentSession"),j=await Li(U);j.exists()&&await xa(U,{...j.data(),pausedAt:z,isPaused:!0,accumulatedSeconds:te}),o(!1),c(null),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_TIME_TRACKING"}),b({title:"Time tracking paused",description:`Paused tracking for "${e.title}"`})}catch(z){console.error("Error pausing tracking:",z),b({title:"Failed to pause tracking",variant:"destructive"})}},k=async()=>{if(!(!e||!E))try{const z=Date.now(),Q=Be(Ae,"users",E.uid,"activeTracking","currentSession"),te=await Li(Q);te.exists()&&await xa(Q,{...te.data(),startTime:z,pausedAt:null,isPaused:!1}),o(!0),c(z),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_TIME_TRACKING"}),b({title:"Time tracking resumed",description:`Resumed tracking for "${e.title}"`})}catch(z){console.error("Error resuming tracking:",z),b({title:"Failed to resume tracking",variant:"destructive"})}},I=async()=>{if(!e||!E){n(null),i(0),o(!1),c(null);return}try{const z=Be(Ae,"users",E.uid,"activeTracking","currentSession"),Q=await Li(z);let te=r;if(Q.exists()&&!s)te=Q.data().accumulatedSeconds;else if(a&&s){const U=Math.floor((Date.now()-a)/1e3),j=Q.exists()?Q.data():null;te=((j==null?void 0:j.accumulatedSeconds)||0)+U}if(te>0){await T(e.id,te);const U=A(te);b({title:"Time tracking stopped",description:`Saved ${U} for "${e.title}"`})}await fo(z),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_TIME_TRACKING"})}catch(z){console.error("Error stopping tracking:",z),b({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{n(null),i(0),o(!1),c(null)}},A=z=>{if(typeof z!="number"||isNaN(z)||z<0)return"0s";const Q=Math.floor(z/3600),te=Math.floor(z%3600/60),U=Math.floor(z%60);return Q>0?`${Q}h ${te.toString().padStart(2,"0")}m`:te>0?`${te}m ${U.toString().padStart(2,"0")}s`:`${U}s`},R=async(z,Q,te)=>{if(!E)return;l&&(l.taskId!==z||l.subtaskId!==Q)&&await x();const U=Date.now(),j={taskId:z,subtaskId:Q,subtaskTitle:te,startTime:U,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const se=Be(Ae,"users",E.uid,"activeTracking","currentSubtaskSession");await xa(se,j),u({taskId:z,subtaskId:Q,subtaskTitle:te}),f(0),w(!0),v(U),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_SUBTASK_TIME_TRACKING",session:j}),b({title:"Time tracking started",description:`Now tracking time for subtask "${te}"`})}catch(se){console.error("Error starting subtask tracking:",se),b({title:"Failed to start tracking",variant:"destructive"})}},N=async()=>{if(!(!l||!E||!y))try{const z=Date.now(),Q=Math.floor((z-y)/1e3),te=d,U=Be(Ae,"users",E.uid,"activeTracking","currentSubtaskSession"),j=await Li(U);j.exists()&&await xa(U,{...j.data(),pausedAt:z,isPaused:!0,accumulatedSeconds:te}),w(!1),v(null),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_SUBTASK_TIME_TRACKING"}),b({title:"Time tracking paused",description:`Paused tracking for "${l.subtaskTitle}"`})}catch(z){console.error("Error pausing subtask tracking:",z),b({title:"Failed to pause tracking",variant:"destructive"})}},P=async()=>{if(!(!l||!E))try{const z=Date.now(),Q=Be(Ae,"users",E.uid,"activeTracking","currentSubtaskSession"),te=await Li(Q);te.exists()&&await xa(Q,{...te.data(),startTime:z,pausedAt:null,isPaused:!1}),w(!0),v(z),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_SUBTASK_TIME_TRACKING"}),b({title:"Time tracking resumed",description:`Resumed tracking for "${l.subtaskTitle}"`})}catch(z){console.error("Error resuming subtask tracking:",z),b({title:"Failed to resume tracking",variant:"destructive"})}},x=async()=>{if(!l||!E){u(null),f(0),w(!1),v(null);return}try{const z=Be(Ae,"users",E.uid,"activeTracking","currentSubtaskSession"),Q=await Li(z);let te=d;if(Q.exists()&&!m)te=Q.data().accumulatedSeconds;else if(y&&m){const U=Math.floor((Date.now()-y)/1e3),j=Q.exists()?Q.data():null;te=((j==null?void 0:j.accumulatedSeconds)||0)+U}if(te>0){await C(l.taskId,l.subtaskId,te);const U=A(te);b({title:"Time tracking stopped",description:`Saved ${U} for subtask "${l.subtaskTitle}"`})}await fo(z),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_SUBTASK_TIME_TRACKING"})}catch(z){console.error("Error stopping subtask tracking:",z),b({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{u(null),f(0),w(!1),v(null)}},H={trackingTask:e,currentSessionElapsedSeconds:r,isTracking:s,startTracking:M,pauseTracking:L,resumeTracking:k,stopTracking:I,getFormattedTime:A,trackingSubtask:l,currentSubtaskElapsedSeconds:d,isTrackingSubtask:m,startSubtaskTracking:R,pauseSubtaskTracking:N,resumeSubtaskTracking:P,stopSubtaskTracking:x};return p.jsx(z9.Provider,{value:H,children:t})}function WEe(){const t=g.useContext(z9);if(t===void 0)throw new Error("useTaskTimeTracker must be used within a TaskTimeTrackerProvider");return t}function KEe(){const{trackingTask:t,currentSessionElapsedSeconds:e,isTracking:n,pauseTracking:r,resumeTracking:i,stopTracking:s,getFormattedTime:o}=WEe();if(!t)return null;const a=(t.estimatedTime||0)*60,c=a>0?Math.min(e/a*100,100):0,l=a>0&&e>a;return p.jsxs(po,{className:pe("fixed bottom-6 left-6 z-50 w-80 shadow-elegant border-2 backdrop-blur-sm transition-all duration-300","border-focus/30 bg-card/95 shadow-glow animate-slide-in-right"),children:[p.jsx(ca,{className:"pb-3",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(la,{className:"text-sm flex items-center gap-2",children:[p.jsx(X0,{className:"h-4 w-4 text-focus"}),"Time Tracking"]}),p.jsx(Ci,{variant:n?"default":"secondary",className:"text-xs",children:n?"Active":"Paused"})]})}),p.jsxs(mo,{className:"space-y-4",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-1",children:t.title}),t.description&&p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:pe("text-3xl font-mono font-bold transition-colors",l?"text-break":"text-focus"),children:o(e)}),t.estimatedTime&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(zR,{value:c,className:pe("h-2 transition-colors",l?"[&>div]:bg-break":"[&>div]:bg-focus")}),p.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[p.jsx("span",{children:"0m"}),p.jsx("span",{className:pe("font-medium",l&&"text-break"),children:l?"Over estimate":`Target: ${t.estimatedTime}m`}),p.jsxs("span",{children:[t.estimatedTime,"m"]})]})]}),t.timeSpent&&t.timeSpent>0&&p.jsxs("div",{className:"text-center p-2 bg-muted/30 rounded-lg",children:[p.jsx("div",{className:"text-xs text-muted-foreground",children:"Total time spent"}),p.jsx("div",{className:"text-sm font-semibold text-success",children:o(t.timeSpent)})]})]}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsxs(ht,{variant:n?"outline":"focus",size:"sm",onClick:n?r:i,className:"hover-scale flex-1",children:[n?p.jsx(fI,{className:"h-4 w-4 mr-2"}):p.jsx(pI,{className:"h-4 w-4 mr-2"}),n?"Pause":"Resume"]}),p.jsx(ht,{variant:"outline",size:"sm",onClick:s,className:"hover-scale text-destructive hover:text-destructive hover:bg-destructive/10",children:p.jsx(see,{className:"h-4 w-4"})})]})]})]})}const sl=class sl{constructor(){zt(this,"db",null);zt(this,"dbName","TasklyOfflineDB");zt(this,"version",1)}static getInstance(){return sl.instance||(sl.instance=new sl),sl.instance}async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(!s.objectStoreNames.contains("tasks")){const o=s.createObjectStore("tasks",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("priority","priority",{unique:!1}),o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("notes")){const o=s.createObjectStore("notes",{keyPath:"id"});o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("offlineActions")){const o=s.createObjectStore("offlineActions",{keyPath:"id"});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("type","type",{unique:!1})}if(s.objectStoreNames.contains("userData")||s.createObjectStore("userData",{keyPath:"key"}),!s.objectStoreNames.contains("scheduledNotifications")){const o=s.createObjectStore("scheduledNotifications",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("scheduledTime","scheduledTime",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1})}}})}async getStore(e,n="readonly"){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize IndexedDB");if(!this.db.objectStoreNames.contains(e))throw new Error(`Object store '${e}' does not exist`);return this.db.transaction([e],n).objectStore(e)}async saveTasks(e){const n=await this.getStore("tasks","readwrite"),r=e.map(i=>new Promise((s,o)=>{const a=n.put({...i,lastModified:Date.now()});a.onsuccess=()=>s(),a.onerror=()=>o(a.error)}));await Promise.all(r)}async saveTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getTasks(){const e=await this.getStore("tasks");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async getTask(e){const n=await this.getStore("tasks");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}async deleteTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async saveNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getNotes(){const e=await this.getStore("notes");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async deleteNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async queueAction(e){const n=await this.getStore("offlineActions","readwrite"),r={...e,id:crypto.randomUUID(),retryCount:0};return new Promise((i,s)=>{const o=n.put(r);o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getQueuedActions(){const e=await this.getStore("offlineActions");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>{const s=i.result.sort((o,a)=>o.timestamp-a.timestamp);n(s)},i.onerror=()=>r(i.error)})}async removeAction(e){const n=await this.getStore("offlineActions","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async updateActionRetryCount(e,n){const r=await this.getStore("offlineActions","readwrite");return new Promise((i,s)=>{const o=r.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.retryCount=n;const c=r.put(a);c.onsuccess=()=>i(),c.onerror=()=>s(c.error)}else i()},o.onerror=()=>s(o.error)})}async clearAllActions(){const e=await this.getStore("offlineActions","readwrite");return new Promise((n,r)=>{const i=e.clear();i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})}async setUserData(e,n){const r=await this.getStore("userData","readwrite");return new Promise((i,s)=>{const o=r.put({key:e,value:n,timestamp:Date.now()});o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getUserData(e){const n=await this.getStore("userData");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>{var o;return r((o=s.result)==null?void 0:o.value)},s.onerror=()=>i(s.error)})}async getTasksByStatus(e){const r=(await this.getStore("tasks")).index("status");return new Promise((i,s)=>{const o=r.getAll(e);o.onsuccess=()=>i(o.result),o.onerror=()=>s(o.error)})}async getUnsyncedItems(){const[e,n,r]=await Promise.all([this.getTasks(),this.getNotes(),this.getQueuedActions()]);return{tasks:e.filter(i=>i.syncStatus!=="synced"),notes:n.filter(i=>i.syncStatus!=="synced"),actions:r}}async clearDatabase(){const n=["tasks","notes","offlineActions","userData"].map(async r=>{const i=await this.getStore(r,"readwrite");return new Promise((s,o)=>{const a=i.clear();a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})});await Promise.all(n)}};zt(sl,"instance");let kb=sl;const dt=kb.getInstance(),FL="taskly_sync_status",qEe=3,ol=class ol{constructor(){zt(this,"syncInProgress",!1);zt(this,"syncCallbacks",[])}static getInstance(){return ol.instance||(ol.instance=new ol),ol.instance}async initialize(){await dt.init()}async queueAction(e){await dt.queueAction({...e,timestamp:Date.now()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{"sync"in n&&n.sync.register("background-sync").catch(r=>{console.log("Background sync registration failed:",r)})})}async storeTaskLocally(e,n="pending"){const r={...e,lastModified:Date.now(),syncStatus:n};await dt.saveTask(r)}async getLocalTasks(){return dt.getTasks()}async deleteTaskLocally(e){await dt.deleteTask(e)}async getQueuedActions(){return dt.getQueuedActions()}async clearQueuedActions(){await dt.clearAllActions()}async getSyncStatus(){const e=localStorage.getItem(FL),n=e?JSON.parse(e):{lastSync:0,pending:0},r=await this.getQueuedActions(),i=await dt.getUnsyncedItems();return{...n,pending:r.length+i.tasks.length+i.notes.length,conflicted:i.tasks.filter(s=>s.syncStatus==="conflict").length+i.notes.filter(s=>s.syncStatus==="conflict").length}}async updateSyncStatus(e){const n=await this.getQueuedActions(),r={lastSync:e,pending:n.length};localStorage.setItem(FL,JSON.stringify(r))}isOnline(){return navigator.onLine}async syncWhenOnline(){if(!this.isOnline()||this.syncInProgress)return{success:!1,syncedCount:0,failedCount:0};this.syncInProgress=!0;let e=0,n=0;try{const r=await this.getQueuedActions(),i=await dt.getUnsyncedItems();if(r.length===0&&i.tasks.length===0&&i.notes.length===0)return this.syncInProgress=!1,{success:!0,syncedCount:0,failedCount:0};for(const s of r)try{await this.processAction(s),await dt.removeAction(s.id),e++}catch(o){console.error("Failed to process action:",s,o);const a=s.retryCount+1;a>=qEe?(await dt.removeAction(s.id),n++):await dt.updateActionRetryCount(s.id,a)}for(const s of i.tasks)try{await this.syncTask(s),e++}catch(o){console.error("Failed to sync task:",s,o),await dt.saveTask({...s,syncStatus:"conflict"}),n++}for(const s of i.notes)try{await this.syncNote(s),e++}catch(o){console.error("Failed to sync note:",s,o),await dt.saveNote({...s,syncStatus:"conflict"}),n++}return await this.updateSyncStatus(Date.now()),this.syncCallbacks.forEach(s=>s(n===0)),(e>0||n>0)&&this.showSyncNotification(n===0?"success":"warning",`Synced ${e} items${n>0?`, ${n} failed`:""}`),{success:n===0,syncedCount:e,failedCount:n}}catch(r){return console.error("Sync failed:",r),this.showSyncNotification("error","Sync failed - will retry later"),{success:!1,syncedCount:e,failedCount:n+1}}finally{this.syncInProgress=!1}}async processAction(e){switch(console.log("Processing offline action:",e),e.type){case"CREATE_TASK":break;case"UPDATE_TASK":break;case"DELETE_TASK":break;case"CREATE_NOTE":break;case"UPDATE_NOTE":break;case"DELETE_NOTE":break;default:throw new Error(`Unknown action type: ${e.type}`)}}async syncTask(e){console.log("Syncing task:",e),await dt.saveTask({...e,syncStatus:"synced"})}async syncNote(e){console.log("Syncing note:",e),await dt.saveNote({...e,syncStatus:"synced"})}showSyncNotification(e,n){"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly Sync",{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png"})}onSyncComplete(e){this.syncCallbacks.push(e)}async getConflicts(){const e=await dt.getUnsyncedItems();return{tasks:e.tasks.filter(n=>n.syncStatus==="conflict"),notes:e.notes.filter(n=>n.syncStatus==="conflict")}}async resolveTaskConflict(e,n){const r=await dt.getTask(e);r&&(n?await dt.saveTask({...r,syncStatus:"pending"}):await dt.saveTask({...r,syncStatus:"synced"}))}async init(){await this.initialize(),window.addEventListener("online",()=>{console.log("Back online - starting sync..."),this.syncWhenOnline()}),window.addEventListener("offline",()=>{console.log("Gone offline - actions will be queued")}),this.isOnline()&&this.syncWhenOnline()}};zt(ol,"instance");let L_=ol;const Rs=L_.getInstance(),GEe=Object.freeze(Object.defineProperty({__proto__:null,OfflineSync:L_,offlineSync:Rs},Symbol.toStringTag,{value:"Module"}));function W9(){const[t,e]=g.useState({isOnline:navigator.onLine,isSyncing:!1,lastSync:0,pending:0,conflicted:0}),n=g.useCallback(async()=>{const d=await Rs.getSyncStatus();e(f=>({...f,...d}))},[]);g.useEffect(()=>{let d=!0;const f=async()=>{d&&(e(y=>({...y,isOnline:!0})),await n())},m=()=>{d&&e(y=>({...y,isOnline:!1}))};n(),window.addEventListener("online",f),window.addEventListener("offline",m);const w=setInterval(n,5e3);return()=>{d=!1,window.removeEventListener("online",f),window.removeEventListener("offline",m),clearInterval(w)}},[n]);const r=g.useCallback(async()=>{if(!(!t.isOnline||t.isSyncing)){e(d=>({...d,isSyncing:!0}));try{const d=await Rs.syncWhenOnline();return await n(),d}finally{e(d=>({...d,isSyncing:!1}))}}},[t.isOnline,t.isSyncing,n]),i=g.useCallback(async(d,f)=>{const m={...d,id:crypto.randomUUID(),createdAt:new Date().toISOString(),subtasks:d.subtasks||[]};return await Rs.storeTaskLocally(m,"pending"),t.isOnline||await Rs.queueAction({type:"CREATE_TASK",data:m,userId:f}),await n(),m},[t.isOnline,n]),s=g.useCallback(async(d,f,m)=>{const w=await dt.getTask(d);if(!w)return null;const y={...w,...f,lastModified:Date.now(),syncStatus:"pending"};return await dt.saveTask(y),t.isOnline||await Rs.queueAction({type:"UPDATE_TASK",data:{id:d,updates:f},userId:m}),await n(),y},[t.isOnline,n]),o=g.useCallback(async(d,f)=>{await dt.deleteTask(d),t.isOnline||await Rs.queueAction({type:"DELETE_TASK",data:{id:d},userId:f}),await n()},[t.isOnline,n]),a=g.useCallback(async(d,f)=>{const m=await dt.getTask(d);if(!m)return null;const w=m.status==="completed"?"todo":"completed",y={...m,status:w,completedAt:w==="completed"?new Date().toISOString():void 0,lastModified:Date.now(),syncStatus:"pending"};return await dt.saveTask(y),t.isOnline||await Rs.queueAction({type:"TOGGLE_STATUS",data:{id:d,status:w},userId:f}),await n(),y},[t.isOnline,n]),c=g.useCallback(async()=>dt.getTasks(),[]),l=g.useCallback(async()=>Rs.getConflicts(),[]),u=g.useCallback(async(d,f)=>{await Rs.resolveTaskConflict(d,f),await n()},[n]);return{syncStatus:t,manualSync:r,createTaskOffline:i,updateTaskOffline:s,deleteTaskOffline:o,toggleTaskStatusOffline:a,getLocalTasks:c,getConflicts:l,resolveConflict:u,updateSyncStatus:n}}var qT="Dialog",[K9,JIe]=ai(qT),[QEe,Is]=K9(qT),q9=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=g.useRef(null),c=g.useRef(null),[l,u]=Fc({prop:r,defaultProp:i??!1,onChange:s,caller:qT});return p.jsx(QEe,{scope:e,triggerRef:a,contentRef:c,contentId:Zs(),titleId:Zs(),descriptionId:Zs(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};q9.displayName=qT;var G9="DialogTrigger",Q9=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Is(G9,n),s=Ct(e,i.triggerRef);return p.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":qR(i.open),...r,ref:s,onClick:we(t.onClick,i.onOpenToggle)})});Q9.displayName=G9;var WR="DialogPortal",[YEe,Y9]=K9(WR,{forceMount:void 0}),J9=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Is(WR,e);return p.jsx(YEe,{scope:e,forceMount:n,children:g.Children.map(r,o=>p.jsx(zn,{present:n||s.open,children:p.jsx(Am,{asChild:!0,container:i,children:o})}))})};J9.displayName=WR;var F_="DialogOverlay",X9=g.forwardRef((t,e)=>{const n=Y9(F_,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Is(F_,t.__scopeDialog);return s.modal?p.jsx(zn,{present:r||s.open,children:p.jsx(XEe,{...i,ref:e})}):null});X9.displayName=F_;var JEe=$l("DialogOverlay.RemoveScroll"),XEe=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Is(F_,n);return p.jsx(VT,{as:JEe,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(je.div,{"data-state":qR(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),eu="DialogContent",Z9=g.forwardRef((t,e)=>{const n=Y9(eu,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Is(eu,t.__scopeDialog);return p.jsx(zn,{present:r||s.open,children:s.modal?p.jsx(ZEe,{...i,ref:e}):p.jsx(eCe,{...i,ref:e})})});Z9.displayName=eu;var ZEe=g.forwardRef((t,e)=>{const n=Is(eu,t.__scopeDialog),r=g.useRef(null),i=Ct(e,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return AR(s)},[]),p.jsx(eW,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:we(t.onFocusOutside,s=>s.preventDefault())})}),eCe=g.forwardRef((t,e)=>{const n=Is(eu,t.__scopeDialog),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(eW,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),eW=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Is(eu,n),c=g.useRef(null),l=Ct(e,c);return bR(),p.jsxs(p.Fragment,{children:[p.jsx(FT,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(yh,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":qR(a.open),...o,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(tCe,{titleId:a.titleId}),p.jsx(rCe,{contentRef:c,descriptionId:a.descriptionId})]})]})}),KR="DialogTitle",tW=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Is(KR,n);return p.jsx(je.h2,{id:i.titleId,...r,ref:e})});tW.displayName=KR;var nW="DialogDescription",rW=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Is(nW,n);return p.jsx(je.p,{id:i.descriptionId,...r,ref:e})});rW.displayName=nW;var iW="DialogClose",sW=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Is(iW,n);return p.jsx(je.button,{type:"button",...r,ref:e,onClick:we(t.onClick,()=>i.onOpenChange(!1))})});sW.displayName=iW;function qR(t){return t?"open":"closed"}var oW="DialogTitleWarning",[XIe,aW]=fX(oW,{contentName:eu,titleName:KR,docsSlug:"dialog"}),tCe=({titleId:t})=>{const e=aW(oW),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},nCe="DialogDescriptionWarning",rCe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aW(nCe).contentName}}.`;return g.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},cW=q9,lW=Q9,uW=J9,GT=X9,QT=Z9,YT=tW,JT=rW,dW=sW;const iCe=cW,ZIe=lW,sCe=uW,hW=g.forwardRef(({className:t,...e},n)=>p.jsx(GT,{ref:n,className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));hW.displayName=GT.displayName;const fW=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(sCe,{children:[p.jsx(hW,{}),p.jsxs(QT,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,p.jsxs(dW,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(vh,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fW.displayName=QT.displayName;const pW=({className:t,...e})=>p.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});pW.displayName="DialogHeader";const oCe=({className:t,...e})=>p.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});oCe.displayName="DialogFooter";const mW=g.forwardRef(({className:t,...e},n)=>p.jsx(YT,{ref:n,className:pe("text-lg font-semibold leading-none tracking-tight",t),...e}));mW.displayName=YT.displayName;const gW=g.forwardRef(({className:t,...e},n)=>p.jsx(JT,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));gW.displayName=JT.displayName;function aCe({open:t,onOpenChange:e,conflicts:n}){const{resolveConflict:r}=W9(),[i,s]=g.useState(null),o=async(c,l)=>{s(c);try{await r(c,l),n.tasks=n.tasks.filter(u=>u.id!==c),n.tasks.length===0&&n.notes.length===0&&e(!1)}finally{s(null)}},a=c=>new Date(c).toLocaleString();return p.jsx(iCe,{open:t,onOpenChange:e,children:p.jsxs(fW,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[p.jsxs(pW,{children:[p.jsxs(mW,{className:"flex items-center gap-2",children:[p.jsx(qf,{className:"h-5 w-5 text-warning"}),"Sync Conflicts Detected"]}),p.jsx(gW,{children:"The following items have conflicts between your local changes and server data. Choose which version to keep."})]}),p.jsxs("div",{className:"space-y-4",children:[n.tasks.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Task Conflicts"}),p.jsx("div",{className:"space-y-3",children:n.tasks.map(c=>p.jsxs(po,{className:"border-warning/20",children:[p.jsxs(ca,{className:"pb-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(la,{className:"text-base",children:c.title}),p.jsx(Ci,{variant:"outline",className:"text-warning border-warning",children:"Conflict"})]}),c.description&&p.jsx($R,{children:c.description})]}),p.jsx(mo,{className:"space-y-4",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(ek,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Your Changes"})]}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Status:"}),p.jsx(Ci,{variant:c.status==="completed"?"default":"secondary",children:c.status})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Priority:"}),p.jsx(Ci,{variant:c.priority==="high"?"destructive":"outline",children:c.priority})]}),p.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[p.jsx(X0,{className:"h-3 w-3"}),p.jsxs("span",{children:["Modified: ",a(new Date(c.lastModified).toISOString())]})]})]}),p.jsx(ht,{onClick:()=>o(c.id,!0),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Keep My Changes"})]}),p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(qf,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Server Version"})]}),p.jsx("div",{className:"space-y-2 text-sm",children:p.jsx("div",{className:"text-muted-foreground",children:"Server data would be displayed here in a real implementation"})}),p.jsx(ht,{onClick:()=>o(c.id,!1),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Use Server Version"})]})]})})]},c.id))})]}),n.notes.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Note Conflicts"}),p.jsx("div",{className:"text-muted-foreground",children:"Note conflict resolution would be implemented here"})]}),n.tasks.length===0&&n.notes.length===0&&p.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[p.jsx(qf,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),p.jsx("p",{children:"No conflicts to resolve"})]})]}),p.jsx("div",{className:"flex justify-end gap-2 mt-6",children:p.jsx(ht,{variant:"outline",onClick:()=>e(!1),children:"Close"})})]})})}function cCe(){const{syncStatus:t,manualSync:e,getConflicts:n}=W9(),[r,i]=g.useState(!1),[s,o]=g.useState({tasks:[],notes:[]}),a=async()=>{!t.isOnline||t.isSyncing||await e()},c=async()=>{const l=await n();o(l),i(!0)};return t.isOnline&&t.pending===0&&t.conflicted===0?null:p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2",children:[p.jsx(Ci,{variant:t.isOnline?"default":"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:t.isOnline?p.jsxs(p.Fragment,{children:[t.isSyncing?p.jsx(M4,{className:"h-3 w-3 animate-spin"}):p.jsx(gee,{className:"h-3 w-3"}),t.pending>0&&p.jsxs("span",{children:["Syncing ",t.pending," items"]})]}):p.jsxs(p.Fragment,{children:[p.jsx(pee,{className:"h-3 w-3"}),p.jsx("span",{children:"Offline"}),t.pending>0&&p.jsxs(p.Fragment,{children:[p.jsx(IZ,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.pending," pending"]})]})]})}),t.conflicted>0&&p.jsxs(Ci,{variant:"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:c,children:[p.jsx(qf,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.conflicted," conflicts"]})]})]}),p.jsx(aCe,{open:r,onOpenChange:i,conflicts:s})]})}function ebe(t,e){const[n,r]=g.useState(t);return g.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function lCe(){const t=g.useRef(Date.now()),e=g.useRef(0);g.useEffect(()=>{e.current+=1});const n=g.useCallback(i=>{const s=Date.now(),o=s-t.current;o>16&&console.warn(`${i} render time: ${o}ms (render #${e.current})`),t.current=s},[]),r=g.useCallback((i,s)=>{const o=performance.now();i();const a=performance.now();console.log(`${s} took ${a-o} milliseconds`)},[]);return{logRenderTime:n,measurePerformance:r,renderCount:e.current}}function uCe(){const[t,e]=g.useState({fps:0,memoryUsage:0,loadTime:0,renderTime:0}),[n,r]=g.useState(!1);if(lCe(),g.useEffect(()=>{let o=0,a=performance.now(),c;const l=()=>{o++;const u=performance.now();if(u>=a+1e3){const d=Math.round(o*1e3/(u-a));e(f=>{var m;return{...f,fps:d,loadTime:Math.round(performance.now()),memoryUsage:((m=performance.memory)==null?void 0:m.usedJSHeapSize)||0}}),o=0,a=u}c=requestAnimationFrame(l)};return n&&(c=requestAnimationFrame(l)),()=>{c&&cancelAnimationFrame(c)}},[n]),!n)return null;const i=o=>{if(o===0)return"0 Bytes";const a=1024,c=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(a));return parseFloat((o/Math.pow(a,l)).toFixed(2))+" "+c[l]},s=o=>o>=55?"bg-green-500":o>=45?"bg-yellow-500":"bg-red-500";return p.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:p.jsxs(po,{className:"w-64 bg-background/90 backdrop-blur-sm border shadow-lg",children:[p.jsx(ca,{className:"pb-2",children:p.jsx(la,{className:"text-sm font-medium",children:"Performance"})}),p.jsxs(mo,{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS:"}),p.jsx(Ci,{variant:"outline",className:`${s(t.fps)} text-white border-none`,children:t.fps})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Memory:"}),p.jsx(Ci,{variant:"outline",children:i(t.memoryUsage)})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Load:"}),p.jsxs(Ci,{variant:"outline",children:[t.loadTime,"ms"]})]})]})]})})}const dCe=cW,hCe=lW,fCe=uW,yW=g.forwardRef(({className:t,...e},n)=>p.jsx(GT,{className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));yW.displayName=GT.displayName;const pCe=xm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),vW=g.forwardRef(({side:t="right",className:e,children:n,...r},i)=>p.jsxs(fCe,{children:[p.jsx(yW,{}),p.jsxs(QT,{ref:i,className:pe(pCe({side:t}),e),...r,children:[n,p.jsxs(dW,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(vh,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vW.displayName=QT.displayName;const _W=({className:t,...e})=>p.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});_W.displayName="SheetHeader";const wW=g.forwardRef(({className:t,...e},n)=>p.jsx(YT,{ref:n,className:pe("text-lg font-semibold text-foreground",t),...e}));wW.displayName=YT.displayName;const TW=g.forwardRef(({className:t,...e},n)=>p.jsx(JT,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));TW.displayName=JT.displayName;function mCe({children:t}){U9();const{isChatOpenMobile:e,state:n,setState:r}=OT(),i=go(),s=Fh();return s?p.jsxs(dCe,{open:n==="expanded",onOpenChange:o=>r(o?"expanded":"collapsed"),children:[p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(ML,{mobileTrigger:p.jsx(hCe,{asChild:!0,children:p.jsx(ht,{variant:"ghost",size:"icon",className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:p.jsx(N4,{className:"h-4 w-4"})})})}),p.jsx("main",{className:pe("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0 h-full","pt-0",i.pathname==="/"&&"scrollbar-hide"),children:t})]}),p.jsxs(vW,{side:"left",className:"w-64 p-0 border-r-0 flex flex-col",children:[p.jsxs(_W,{className:"sr-only",children:[p.jsx(wW,{children:"Main Navigation"}),p.jsx(TW,{children:"Navigate through the main sections of the Taskly application."})]}),p.jsx(U5,{onLinkClick:()=>r("collapsed"),collapsed:!1})]})]}):p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(ML,{}),p.jsx(cCe,{}),p.jsxs("div",{className:"flex flex-1 overflow-hidden items-start",children:[p.jsx(C_e,{className:pe("hidden md:flex","transition-all duration-300",!s&&e&&"hidden lg:flex")}),p.jsx("main",{className:pe("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0 h-full","pt-0"),children:t})]}),p.jsx(HEe,{}),p.jsx(KEe,{}),p.jsx(uCe,{})]})}function gCe({children:t}){return p.jsx(MEe,{children:p.jsx(F5,{children:p.jsx(qve,{children:p.jsx(mCe,{children:t})})})})}class EW extends g.Component{constructor(){super(...arguments);zt(this,"state",{hasError:!1});zt(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:p.jsxs(po,{className:"w-full max-w-md",children:[p.jsxs(ca,{className:"text-center",children:[p.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center",children:p.jsx(qf,{className:"w-6 h-6 text-destructive"})}),p.jsx(la,{children:"Something went wrong"}),p.jsx($R,{children:"We're sorry, but something unexpected happened. Please try again."})]}),p.jsxs(mo,{className:"text-center space-y-4",children:[this.state.error&&p.jsxs("details",{className:"text-sm text-muted-foreground",children:[p.jsx("summary",{className:"cursor-pointer",children:"Error details"}),p.jsx("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-auto",children:this.state.error.message})]}),p.jsxs("div",{className:"flex gap-2 justify-center",children:[p.jsxs(ht,{onClick:this.handleRetry,className:"gap-2",children:[p.jsx(M4,{className:"w-4 h-4"}),"Try Again"]}),p.jsx(ht,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})]})}):this.props.children}}function yCe({size:t="default",className:e}){const n={sm:"w-4 h-4",default:"w-6 h-6",lg:"w-8 h-8"};return p.jsx("div",{className:pe("animate-spin rounded-full border-2 border-primary border-t-transparent",n[t],e)})}function CW(){return p.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx(yCe,{size:"lg"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}var ig=t=>t.type==="checkbox",vl=t=>t instanceof Date,br=t=>t==null;const SW=t=>typeof t=="object";var gn=t=>!br(t)&&!Array.isArray(t)&&SW(t)&&!vl(t),IW=t=>gn(t)&&t.target?ig(t.target)?t.target.checked:t.target.value:t,vCe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,bW=(t,e)=>t.has(vCe(e)),_Ce=t=>{const e=t.constructor&&t.constructor.prototype;return gn(e)&&e.hasOwnProperty("isPrototypeOf")},GR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function An(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(GR&&(t instanceof Blob||r))&&(n||gn(t)))if(e=n?[]:{},!n&&!_Ce(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=An(t[i]));else return t;return e}var XT=t=>/^\w*$/.test(t),fn=t=>t===void 0,QR=t=>Array.isArray(t)?t.filter(Boolean):[],YR=t=>QR(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(t,e,n)=>{if(!e||!gn(t))return n;const r=(XT(e)?[e]:YR(e)).reduce((i,s)=>br(i)?i:i[s],t);return fn(r)||r===t?fn(t[e])?n:t[e]:r},fi=t=>typeof t=="boolean",St=(t,e,n)=>{let r=-1;const i=XT(e)?[e]:YR(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=n;if(r!==o){const l=t[a];c=gn(l)||Array.isArray(l)?l:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const U_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},os={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Io={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},JR=G.createContext(null);JR.displayName="HookFormContext";const ZT=()=>G.useContext(JR),wCe=t=>{const{children:e,...n}=t;return G.createElement(JR.Provider,{value:n},e)};var AW=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==os.all&&(e._proxyFormState[o]=!r||os.all),n&&(n[o]=!0),t[o]}});return i};const XR=typeof window<"u"?G.useLayoutEffect:G.useEffect;function TCe(t){const e=ZT(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=G.useState(n._formState),c=G.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return XR(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:l=>{!r&&a({...n._formState,...l})}}),[i,r,s]),G.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),G.useMemo(()=>AW(o,n,c.current,!1),[o,n])}var Ks=t=>typeof t=="string",kW=(t,e,n,r,i)=>Ks(t)?(r&&e.watch.add(t),ye(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),ye(n,s))):(r&&(e.watchAll=!0),n),xb=t=>br(t)||!SW(t);function Mo(t,e,n=new WeakSet){if(xb(t)||xb(e))return t===e;if(vl(t)&&vl(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(vl(o)&&vl(a)||gn(o)&&gn(a)||Array.isArray(o)&&Array.isArray(a)?!Mo(o,a,n):o!==a)return!1}}return!0}function ECe(t){const e=ZT(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},c=G.useRef(i),l=G.useRef(a),u=G.useRef(void 0);l.current=a;const d=G.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=G.useState(l.current?l.current(d):d);return XR(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:w=>{if(!s){const y=kW(r,n._names,w.values||n._formValues,!1,c.current);if(l.current){const v=l.current(y);Mo(v,u.current)||(m(v),u.current=v)}else m(y)}}}),[n,s,r,o]),G.useEffect(()=>n._removeUnmounted()),f}function CCe(t){const e=ZT(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,a=bW(i._names.array,n),c=G.useMemo(()=>ye(i._formValues,n,ye(i._defaultValues,n,o)),[i,n,o]),l=ECe({control:i,name:n,defaultValue:c,exact:!0}),u=TCe({control:i,name:n,exact:!0}),d=G.useRef(t),f=G.useRef(i.register(n,{...t.rules,value:l,...fi(t.disabled)?{disabled:t.disabled}:{}}));d.current=t;const m=G.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ye(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!ye(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ye(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ye(u.validatingFields,n)},error:{enumerable:!0,get:()=>ye(u.errors,n)}}),[u,n]),w=G.useCallback(T=>f.current.onChange({target:{value:IW(T),name:n},type:U_.CHANGE}),[n]),y=G.useCallback(()=>f.current.onBlur({target:{value:ye(i._formValues,n),name:n},type:U_.BLUR}),[n,i._formValues]),v=G.useCallback(T=>{const C=ye(i._fields,n);C&&T&&(C._f.ref={focus:()=>T.focus&&T.focus(),select:()=>T.select&&T.select(),setCustomValidity:b=>T.setCustomValidity(b),reportValidity:()=>T.reportValidity()})},[i._fields,n]),E=G.useMemo(()=>({name:n,value:l,...fi(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:w,onBlur:y,ref:v}),[n,r,u.disabled,w,y,v,l]);return G.useEffect(()=>{const T=i._options.shouldUnregister||s;i.register(n,{...d.current.rules,...fi(d.current.disabled)?{disabled:d.current.disabled}:{}});const C=(b,M)=>{const L=ye(i._fields,b);L&&L._f&&(L._f.mount=M)};if(C(n,!0),T){const b=An(ye(i._options.defaultValues,n));St(i._defaultValues,n,b),fn(ye(i._formValues,n))&&St(i._formValues,n,b)}return!a&&i.register(n),()=>{(a?T&&!i._state.action:T)?i.unregister(n):C(n,!1)}},[n,i,a,s]),G.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),G.useMemo(()=>({field:E,formState:u,fieldState:m}),[E,u,m])}const SCe=t=>t.render(CCe(t));var xW=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},dp=t=>Array.isArray(t)?t:[t],UL=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},Br=t=>gn(t)&&!Object.keys(t).length,ZR=t=>t.type==="file",as=t=>typeof t=="function",j_=t=>{if(!GR)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},RW=t=>t.type==="select-multiple",eP=t=>t.type==="radio",ICe=t=>eP(t)||ig(t),WC=t=>j_(t)&&t.isConnected;function bCe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=fn(t)?r++:t[e[r++]];return t}function ACe(t){for(const e in t)if(t.hasOwnProperty(e)&&!fn(t[e]))return!1;return!0}function vn(t,e){const n=Array.isArray(e)?e:XT(e)?[e]:YR(e),r=n.length===1?t:bCe(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(gn(r)&&Br(r)||Array.isArray(r)&&ACe(r))&&vn(t,n.slice(0,-1)),t}var PW=t=>{for(const e in t)if(as(t[e]))return!0;return!1};function V_(t,e={}){const n=Array.isArray(t);if(gn(t)||n)for(const r in t)Array.isArray(t[r])||gn(t[r])&&!PW(t[r])?(e[r]=Array.isArray(t[r])?[]:{},V_(t[r],e[r])):br(t[r])||(e[r]=!0);return e}function NW(t,e,n){const r=Array.isArray(t);if(gn(t)||r)for(const i in t)Array.isArray(t[i])||gn(t[i])&&!PW(t[i])?fn(e)||xb(n[i])?n[i]=Array.isArray(t[i])?V_(t[i],[]):{...V_(t[i])}:NW(t[i],br(e)?{}:e[i],n[i]):n[i]=!Mo(t[i],e[i]);return n}var ff=(t,e)=>NW(t,e,V_(e));const jL={value:!1,isValid:!1},VL={value:!0,isValid:!0};var OW=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!fn(t[0].attributes.value)?fn(t[0].value)||t[0].value===""?VL:{value:t[0].value,isValid:!0}:VL:jL}return jL},MW=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>fn(t)?t:e?t===""?NaN:t&&+t:n&&Ks(t)?new Date(t):r?r(t):t;const $L={isValid:!1,value:null};var DW=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,$L):$L;function BL(t){const e=t.ref;return ZR(e)?e.files:eP(e)?DW(t.refs).value:RW(e)?[...e.selectedOptions].map(({value:n})=>n):ig(e)?OW(t.refs).value:MW(fn(e.value)?t.ref.value:e.value,t)}var kCe=(t,e,n,r)=>{const i={};for(const s of t){const o=ye(e,s);o&&St(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},$_=t=>t instanceof RegExp,pf=t=>fn(t)?t:$_(t)?t.source:gn(t)?$_(t.value)?t.value.source:t.value:t,HL=t=>({isOnSubmit:!t||t===os.onSubmit,isOnBlur:t===os.onBlur,isOnChange:t===os.onChange,isOnAll:t===os.all,isOnTouch:t===os.onTouched});const zL="AsyncFunction";var xCe=t=>!!t&&!!t.validate&&!!(as(t.validate)&&t.validate.constructor.name===zL||gn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===zL)),RCe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),WL=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const hp=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=ye(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(hp(a,e))break}else if(gn(a)&&hp(a,e))break}}};function KL(t,e,n){const r=ye(t,n);if(r||XT(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=ye(e,s),a=ye(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var PCe=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Br(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||os.all))},NCe=(t,e,n)=>!t||!e||t===e||dp(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),OCe=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,MCe=(t,e)=>!QR(ye(t,e)).length&&vn(t,e),DCe=(t,e,n)=>{const r=dp(ye(t,n));return St(r,"root",e[n]),St(t,n,r),t},Wy=t=>Ks(t);function qL(t,e,n="validate"){if(Wy(t)||Array.isArray(t)&&t.every(Wy)||fi(t)&&!t)return{type:n,message:Wy(t)?t:"",ref:e}}var Au=t=>gn(t)&&!$_(t)?t:{value:t,message:""},GL=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:l,minLength:u,min:d,max:f,pattern:m,validate:w,name:y,valueAsNumber:v,mount:E}=t._f,T=ye(n,y);if(!E||e.has(y))return{};const C=a?a[0]:o,b=P=>{i&&C.reportValidity&&(C.setCustomValidity(fi(P)?"":P||""),C.reportValidity())},M={},L=eP(o),k=ig(o),I=L||k,A=(v||ZR(o))&&fn(o.value)&&fn(T)||j_(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,R=xW.bind(null,y,r,M),N=(P,x,H,z=Io.maxLength,Q=Io.minLength)=>{const te=P?x:H;M[y]={type:P?z:Q,message:te,ref:o,...R(P?z:Q,te)}};if(s?!Array.isArray(T)||!T.length:c&&(!I&&(A||br(T))||fi(T)&&!T||k&&!OW(a).isValid||L&&!DW(a).isValid)){const{value:P,message:x}=Wy(c)?{value:!!c,message:c}:Au(c);if(P&&(M[y]={type:Io.required,message:x,ref:C,...R(Io.required,x)},!r))return b(x),M}if(!A&&(!br(d)||!br(f))){let P,x;const H=Au(f),z=Au(d);if(!br(T)&&!isNaN(T)){const Q=o.valueAsNumber||T&&+T;br(H.value)||(P=Q>H.value),br(z.value)||(x=Q<z.value)}else{const Q=o.valueAsDate||new Date(T),te=se=>new Date(new Date().toDateString()+" "+se),U=o.type=="time",j=o.type=="week";Ks(H.value)&&T&&(P=U?te(T)>te(H.value):j?T>H.value:Q>new Date(H.value)),Ks(z.value)&&T&&(x=U?te(T)<te(z.value):j?T<z.value:Q<new Date(z.value))}if((P||x)&&(N(!!P,H.message,z.message,Io.max,Io.min),!r))return b(M[y].message),M}if((l||u)&&!A&&(Ks(T)||s&&Array.isArray(T))){const P=Au(l),x=Au(u),H=!br(P.value)&&T.length>+P.value,z=!br(x.value)&&T.length<+x.value;if((H||z)&&(N(H,P.message,x.message),!r))return b(M[y].message),M}if(m&&!A&&Ks(T)){const{value:P,message:x}=Au(m);if($_(P)&&!T.match(P)&&(M[y]={type:Io.pattern,message:x,ref:o,...R(Io.pattern,x)},!r))return b(x),M}if(w){if(as(w)){const P=await w(T,n),x=qL(P,C);if(x&&(M[y]={...x,...R(Io.validate,x.message)},!r))return b(x.message),M}else if(gn(w)){let P={};for(const x in w){if(!Br(P)&&!r)break;const H=qL(await w[x](T,n),C,x);H&&(P={...H,...R(x,H.message)},b(H.message),r&&(M[y]=P))}if(!Br(P)&&(M[y]={ref:C,...P},!r))return M}}return b(!0),M};const LCe={mode:os.onSubmit,reValidateMode:os.onChange,shouldFocusError:!0};function FCe(t={}){let e={...LCe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:as(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=gn(e.defaultValues)||gn(e.values)?An(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:An(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const f={array:UL(),state:UL()},m=e.criteriaMode===os.all,w=D=>B=>{clearTimeout(l),l=setTimeout(D,B)},y=async D=>{if(!e.disabled&&(u.isValid||d.isValid||D)){const B=e.resolver?Br((await k()).errors):await A(r,!0);B!==n.isValid&&f.state.next({isValid:B})}},v=(D,B)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((D||Array.from(a.mount)).forEach(K=>{K&&(B?St(n.validatingFields,K,B):vn(n.validatingFields,K))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Br(n.validatingFields)}))},E=(D,B=[],K,de,ue=!0,oe=!0)=>{if(de&&K&&!e.disabled){if(o.action=!0,oe&&Array.isArray(ye(r,D))){const ce=K(ye(r,D),de.argA,de.argB);ue&&St(r,D,ce)}if(oe&&Array.isArray(ye(n.errors,D))){const ce=K(ye(n.errors,D),de.argA,de.argB);ue&&St(n.errors,D,ce),MCe(n.errors,D)}if((u.touchedFields||d.touchedFields)&&oe&&Array.isArray(ye(n.touchedFields,D))){const ce=K(ye(n.touchedFields,D),de.argA,de.argB);ue&&St(n.touchedFields,D,ce)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=ff(i,s)),f.state.next({name:D,isDirty:N(D,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else St(s,D,B)},T=(D,B)=>{St(n.errors,D,B),f.state.next({errors:n.errors})},C=D=>{n.errors=D,f.state.next({errors:n.errors,isValid:!1})},b=(D,B,K,de)=>{const ue=ye(r,D);if(ue){const oe=ye(s,D,fn(K)?ye(i,D):K);fn(oe)||de&&de.defaultChecked||B?St(s,D,B?oe:BL(ue._f)):H(D,oe),o.mount&&y()}},M=(D,B,K,de,ue)=>{let oe=!1,ce=!1;const xe={name:D};if(!e.disabled){if(!K||de){(u.isDirty||d.isDirty)&&(ce=n.isDirty,n.isDirty=xe.isDirty=N(),oe=ce!==xe.isDirty);const at=Mo(ye(i,D),B);ce=!!ye(n.dirtyFields,D),at?vn(n.dirtyFields,D):St(n.dirtyFields,D,!0),xe.dirtyFields=n.dirtyFields,oe=oe||(u.dirtyFields||d.dirtyFields)&&ce!==!at}if(K){const at=ye(n.touchedFields,D);at||(St(n.touchedFields,D,K),xe.touchedFields=n.touchedFields,oe=oe||(u.touchedFields||d.touchedFields)&&at!==K)}oe&&ue&&f.state.next(xe)}return oe?xe:{}},L=(D,B,K,de)=>{const ue=ye(n.errors,D),oe=(u.isValid||d.isValid)&&fi(B)&&n.isValid!==B;if(e.delayError&&K?(c=w(()=>T(D,K)),c(e.delayError)):(clearTimeout(l),c=null,K?St(n.errors,D,K):vn(n.errors,D)),(K?!Mo(ue,K):ue)||!Br(de)||oe){const ce={...de,...oe&&fi(B)?{isValid:B}:{},errors:n.errors,name:D};n={...n,...ce},f.state.next(ce)}},k=async D=>{v(D,!0);const B=await e.resolver(s,e.context,kCe(D||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(D),B},I=async D=>{const{errors:B}=await k(D);if(D)for(const K of D){const de=ye(B,K);de?St(n.errors,K,de):vn(n.errors,K)}else n.errors=B;return B},A=async(D,B,K={valid:!0})=>{for(const de in D){const ue=D[de];if(ue){const{_f:oe,...ce}=ue;if(oe){const xe=a.array.has(oe.name),at=ue._f&&xCe(ue._f);at&&u.validatingFields&&v([de],!0);const yn=await GL(ue,a.disabled,s,m,e.shouldUseNativeValidation&&!B,xe);if(at&&u.validatingFields&&v([de]),yn[oe.name]&&(K.valid=!1,B))break;!B&&(ye(yn,oe.name)?xe?DCe(n.errors,yn,oe.name):St(n.errors,oe.name,yn[oe.name]):vn(n.errors,oe.name))}!Br(ce)&&await A(ce,B,K)}}return K.valid},R=()=>{for(const D of a.unMount){const B=ye(r,D);B&&(B._f.refs?B._f.refs.every(K=>!WC(K)):!WC(B._f.ref))&&ne(D)}a.unMount=new Set},N=(D,B)=>!e.disabled&&(D&&B&&St(s,D,B),!Mo(se(),i)),P=(D,B,K)=>kW(D,a,{...o.mount?s:fn(B)?i:Ks(D)?{[D]:B}:B},K,B),x=D=>QR(ye(o.mount?s:i,D,e.shouldUnregister?ye(i,D,[]):[])),H=(D,B,K={})=>{const de=ye(r,D);let ue=B;if(de){const oe=de._f;oe&&(!oe.disabled&&St(s,D,MW(B,oe)),ue=j_(oe.ref)&&br(B)?"":B,RW(oe.ref)?[...oe.ref.options].forEach(ce=>ce.selected=ue.includes(ce.value)):oe.refs?ig(oe.ref)?oe.refs.forEach(ce=>{(!ce.defaultChecked||!ce.disabled)&&(Array.isArray(ue)?ce.checked=!!ue.find(xe=>xe===ce.value):ce.checked=ue===ce.value||!!ue)}):oe.refs.forEach(ce=>ce.checked=ce.value===ue):ZR(oe.ref)?oe.ref.value="":(oe.ref.value=ue,oe.ref.type||f.state.next({name:D,values:An(s)})))}(K.shouldDirty||K.shouldTouch)&&M(D,ue,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&j(D)},z=(D,B,K)=>{for(const de in B){if(!B.hasOwnProperty(de))return;const ue=B[de],oe=D+"."+de,ce=ye(r,oe);(a.array.has(D)||gn(ue)||ce&&!ce._f)&&!vl(ue)?z(oe,ue,K):H(oe,ue,K)}},Q=(D,B,K={})=>{const de=ye(r,D),ue=a.array.has(D),oe=An(B);St(s,D,oe),ue?(f.array.next({name:D,values:An(s)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&K.shouldDirty&&f.state.next({name:D,dirtyFields:ff(i,s),isDirty:N(D,oe)})):de&&!de._f&&!br(oe)?z(D,oe,K):H(D,oe,K),WL(D,a)&&f.state.next({...n,name:D}),f.state.next({name:o.mount?D:void 0,values:An(s)})},te=async D=>{o.mount=!0;const B=D.target;let K=B.name,de=!0;const ue=ye(r,K),oe=at=>{de=Number.isNaN(at)||vl(at)&&isNaN(at.getTime())||Mo(at,ye(s,K,at))},ce=HL(e.mode),xe=HL(e.reValidateMode);if(ue){let at,yn;const Ur=B.type?BL(ue._f):IW(D),jr=D.type===U_.BLUR||D.type===U_.FOCUS_OUT,xi=!RCe(ue._f)&&!e.resolver&&!ye(n.errors,K)&&!ue._f.deps||OCe(jr,ye(n.touchedFields,K),n.isSubmitted,xe,ce),Mn=WL(K,a,jr);St(s,K,Ur),jr?(ue._f.onBlur&&ue._f.onBlur(D),c&&c(0)):ue._f.onChange&&ue._f.onChange(D);const Wn=M(K,Ur,jr),bs=!Br(Wn)||Mn;if(!jr&&f.state.next({name:K,type:D.type,values:An(s)}),xi)return(u.isValid||d.isValid)&&(e.mode==="onBlur"?jr&&y():jr||y()),bs&&f.state.next({name:K,...Mn?{}:Wn});if(!jr&&Mn&&f.state.next({...n}),e.resolver){const{errors:Gi}=await k([K]);if(oe(Ur),de){const Uh=KL(n.errors,r,K),ga=KL(Gi,r,Uh.name||K);at=ga.error,K=ga.name,yn=Br(Gi)}}else v([K],!0),at=(await GL(ue,a.disabled,s,m,e.shouldUseNativeValidation))[K],v([K]),oe(Ur),de&&(at?yn=!1:(u.isValid||d.isValid)&&(yn=await A(r,!0)));de&&(ue._f.deps&&j(ue._f.deps),L(K,yn,at,Wn))}},U=(D,B)=>{if(ye(n.errors,B)&&D.focus)return D.focus(),1},j=async(D,B={})=>{let K,de;const ue=dp(D);if(e.resolver){const oe=await I(fn(D)?D:ue);K=Br(oe),de=D?!ue.some(ce=>ye(oe,ce)):K}else D?(de=(await Promise.all(ue.map(async oe=>{const ce=ye(r,oe);return await A(ce&&ce._f?{[oe]:ce}:ce)}))).every(Boolean),!(!de&&!n.isValid)&&y()):de=K=await A(r);return f.state.next({...!Ks(D)||(u.isValid||d.isValid)&&K!==n.isValid?{}:{name:D},...e.resolver||!D?{isValid:K}:{},errors:n.errors}),B.shouldFocus&&!de&&hp(r,U,D?ue:a.mount),de},se=D=>{const B={...o.mount?s:i};return fn(D)?B:Ks(D)?ye(B,D):D.map(K=>ye(B,K))},Ce=(D,B)=>({invalid:!!ye((B||n).errors,D),isDirty:!!ye((B||n).dirtyFields,D),error:ye((B||n).errors,D),isValidating:!!ye(n.validatingFields,D),isTouched:!!ye((B||n).touchedFields,D)}),V=D=>{D&&dp(D).forEach(B=>vn(n.errors,B)),f.state.next({errors:D?n.errors:{}})},W=(D,B,K)=>{const de=(ye(r,D,{_f:{}})._f||{}).ref,ue=ye(n.errors,D)||{},{ref:oe,message:ce,type:xe,...at}=ue;St(n.errors,D,{...at,...B,ref:de}),f.state.next({name:D,errors:n.errors,isValid:!1}),K&&K.shouldFocus&&de&&de.focus&&de.focus()},Y=(D,B)=>as(D)?f.state.subscribe({next:K=>"values"in K&&D(P(void 0,B),K)}):P(D,B,!0),re=D=>f.state.subscribe({next:B=>{NCe(D.name,B.name,D.exact)&&PCe(B,D.formState||u,Gt,D.reRenderRoot)&&D.callback({values:{...s},...n,...B,defaultValues:i})}}).unsubscribe,ge=D=>(o.mount=!0,d={...d,...D.formState},re({...D,formState:d})),ne=(D,B={})=>{for(const K of D?dp(D):a.mount)a.mount.delete(K),a.array.delete(K),B.keepValue||(vn(r,K),vn(s,K)),!B.keepError&&vn(n.errors,K),!B.keepDirty&&vn(n.dirtyFields,K),!B.keepTouched&&vn(n.touchedFields,K),!B.keepIsValidating&&vn(n.validatingFields,K),!e.shouldUnregister&&!B.keepDefaultValue&&vn(i,K);f.state.next({values:An(s)}),f.state.next({...n,...B.keepDirty?{isDirty:N()}:{}}),!B.keepIsValid&&y()},De=({disabled:D,name:B})=>{(fi(D)&&o.mount||D||a.disabled.has(B))&&(D?a.disabled.add(B):a.disabled.delete(B))},Pe=(D,B={})=>{let K=ye(r,D);const de=fi(B.disabled)||fi(e.disabled);return St(r,D,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:D}},name:D,mount:!0,...B}}),a.mount.add(D),K?De({disabled:fi(B.disabled)?B.disabled:e.disabled,name:D}):b(D,!0,B.value),{...de?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:pf(B.min),max:pf(B.max),minLength:pf(B.minLength),maxLength:pf(B.maxLength),pattern:pf(B.pattern)}:{},name:D,onChange:te,onBlur:te,ref:ue=>{if(ue){Pe(D,B),K=ye(r,D);const oe=fn(ue.value)&&ue.querySelectorAll&&ue.querySelectorAll("input,select,textarea")[0]||ue,ce=ICe(oe),xe=K._f.refs||[];if(ce?xe.find(at=>at===oe):oe===K._f.ref)return;St(r,D,{_f:{...K._f,...ce?{refs:[...xe.filter(WC),oe,...Array.isArray(ye(i,D))?[{}]:[]],ref:{type:oe.type,name:D}}:{ref:oe}}}),b(D,!1,void 0,oe)}else K=ye(r,D,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(bW(a.array,D)&&o.action)&&a.unMount.add(D)}}},Ve=()=>e.shouldFocusError&&hp(r,U,a.mount),Ye=D=>{fi(D)&&(f.state.next({disabled:D}),hp(r,(B,K)=>{const de=ye(r,K);de&&(B.disabled=de._f.disabled||D,Array.isArray(de._f.refs)&&de._f.refs.forEach(ue=>{ue.disabled=de._f.disabled||D}))},0,!1))},it=(D,B)=>async K=>{let de;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let ue=An(s);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:oe,values:ce}=await k();n.errors=oe,ue=An(ce)}else await A(r);if(a.disabled.size)for(const oe of a.disabled)vn(ue,oe);if(vn(n.errors,"root"),Br(n.errors)){f.state.next({errors:{}});try{await D(ue,K)}catch(oe){de=oe}}else B&&await B({...n.errors},K),Ve(),setTimeout(Ve);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Br(n.errors)&&!de,submitCount:n.submitCount+1,errors:n.errors}),de)throw de},gt=(D,B={})=>{ye(r,D)&&(fn(B.defaultValue)?Q(D,An(ye(i,D))):(Q(D,B.defaultValue),St(i,D,An(B.defaultValue))),B.keepTouched||vn(n.touchedFields,D),B.keepDirty||(vn(n.dirtyFields,D),n.isDirty=B.defaultValue?N(D,An(ye(i,D))):N()),B.keepError||(vn(n.errors,D),u.isValid&&y()),f.state.next({...n}))},Ie=(D,B={})=>{const K=D?An(D):i,de=An(K),ue=Br(D),oe=ue?i:de;if(B.keepDefaultValues||(i=K),!B.keepValues){if(B.keepDirtyValues){const ce=new Set([...a.mount,...Object.keys(ff(i,s))]);for(const xe of Array.from(ce))ye(n.dirtyFields,xe)?St(oe,xe,ye(s,xe)):Q(xe,ye(oe,xe))}else{if(GR&&fn(D))for(const ce of a.mount){const xe=ye(r,ce);if(xe&&xe._f){const at=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(j_(at)){const yn=at.closest("form");if(yn){yn.reset();break}}}}if(B.keepFieldsRef)for(const ce of a.mount)Q(ce,ye(oe,ce));else r={}}s=e.shouldUnregister?B.keepDefaultValues?An(i):{}:An(oe),f.array.next({values:{...oe}}),f.state.next({values:{...oe}})}a={mount:B.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:ue?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Mo(D,i)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ue?{}:B.keepDirtyValues?B.keepDefaultValues&&s?ff(i,s):n.dirtyFields:B.keepDefaultValues&&D?ff(i,D):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ne=(D,B)=>Ie(as(D)?D(s):D,B),Rt=(D,B={})=>{const K=ye(r,D),de=K&&K._f;if(de){const ue=de.refs?de.refs[0]:de.ref;ue.focus&&(ue.focus(),B.shouldSelect&&as(ue.select)&&ue.select())}},Gt=D=>{n={...n,...D}},Ze={control:{register:Pe,unregister:ne,getFieldState:Ce,handleSubmit:it,setError:W,_subscribe:re,_runSchema:k,_focusError:Ve,_getWatch:P,_getDirty:N,_setValid:y,_setFieldArray:E,_setDisabledField:De,_setErrors:C,_getFieldArray:x,_reset:Ie,_resetDefaultValues:()=>as(e.defaultValues)&&e.defaultValues().then(D=>{Ne(D,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Ye,_subjects:f,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(D){o=D},get _defaultValues(){return i},get _names(){return a},set _names(D){a=D},get _formState(){return n},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:ge,trigger:j,register:Pe,handleSubmit:it,watch:Y,setValue:Q,getValues:se,reset:Ne,resetField:gt,clearErrors:V,unregister:ne,setError:W,setFocus:Rt,getFieldState:Ce};return{...Ze,formControl:Ze}}function fm(t={}){const e=G.useRef(void 0),n=G.useRef(void 0),[r,i]=G.useState({isDirty:!1,isValidating:!1,isLoading:as(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:as(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!as(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=FCe(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,XR(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),G.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),G.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),G.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),G.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),G.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),G.useEffect(()=>{t.values&&!Mo(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),G.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=AW(r,s),e.current}const QL=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ye(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},LW=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?QL(r.ref,n,t):r.refs&&r.refs.forEach(i=>QL(i,n,t))}},UCe=(t,e)=>{e.shouldUseNativeValidation&&LW(t,e);const n={};for(const r in t){const i=ye(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(jCe(e.names||Object.keys(t),r)){const o=Object.assign({},ye(n,r));St(o,"root",s),St(n,r,o)}else St(n,r,s)}return n},jCe=(t,e)=>t.some(n=>n.startsWith(e+"."));var VCe=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var c=n[o].types,l=c&&c[r.code];n[o]=xW(o,e,n,i,l?[].concat(l,r.message):r.message)}t.shift()}return n},pm=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(l){return s.shouldUseNativeValidation&&LW({},s),{errors:{},values:n.raw?r:l}})}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:UCe(VCe(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},wt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(wt||(wt={}));var YL;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(YL||(YL={}));const ke=wt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pa=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return Number.isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},fe=wt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ua extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}static assert(e){if(!(e instanceof ua))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,wt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ua.create=t=>new ua(t);const Rb=(t,e)=>{let n;switch(t.code){case fe.invalid_type:t.received===ke.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,wt.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${wt.joinValues(t.keys,", ")}`;break;case fe.invalid_union:n="Invalid input";break;case fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${wt.joinValues(t.options)}`;break;case fe.invalid_enum_value:n=`Invalid enum value. Expected ${wt.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:n="Invalid function arguments";break;case fe.invalid_return_type:n="Invalid function return type";break;case fe.invalid_date:n="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:wt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case fe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case fe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case fe.custom:n="Invalid input";break;case fe.invalid_intersection_types:n="Intersection results could not be merged";break;case fe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:n="Number must be finite";break;default:n=e.defaultError,wt.assertNever(t)}return{message:n}};let $Ce=Rb;function BCe(){return $Ce}const HCe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function Te(t,e){const n=BCe(),r=HCe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Rb?void 0:Rb].filter(i=>!!i)});t.common.issues.push(r)}class Ii{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return We;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Ii.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return We;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const We=Object.freeze({status:"aborted"}),Rf=t=>({status:"dirty",value:t}),qi=t=>({status:"valid",value:t}),JL=t=>t.status==="aborted",XL=t=>t.status==="dirty",nh=t=>t.status==="valid",B_=t=>typeof Promise<"u"&&t instanceof Promise;var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));class Pc{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ZL=(t,e)=>{if(nh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ua(t.common.issues);return this._error=n,this._error}}};function rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}class mt{get description(){return this._def.description}_getType(e){return Pa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Pa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ii,ctx:{common:e.parent.common,data:e.data,parsedType:Pa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(B_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pa(e)},i=this._parseSync({data:e,path:r.path,parent:r});return ZL(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return nh(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>nh(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(B_(i)?i:Promise.resolve(i));return ZL(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:fe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new sh({schema:this,typeName:Ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return gc.create(this,this._def)}nullable(){return oh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ao.create(this)}promise(){return K_.create(this,this._def)}or(e){return z_.create([this,e],this._def)}and(e){return W_.create(this,e,this._def)}transform(e){return new sh({...rt(this._def),schema:this,typeName:Ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Nb({...rt(this._def),innerType:this,defaultValue:n,typeName:Ke.ZodDefault})}brand(){return new hSe({typeName:Ke.ZodBranded,type:this,...rt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ob({...rt(this._def),innerType:this,catchValue:n,typeName:Ke.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return tP.create(this,e)}readonly(){return Mb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zCe=/^c[^\s-]{8,}$/i,WCe=/^[0-9a-z]+$/,KCe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,qCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,GCe=/^[a-z0-9_-]{21}$/i,QCe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,YCe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JCe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,XCe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let KC;const ZCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eSe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tSe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nSe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rSe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iSe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FW="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sSe=new RegExp(`^${FW}$`);function UW(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function oSe(t){return new RegExp(`^${UW(t)}$`)}function aSe(t){let e=`${FW}T${UW(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function cSe(t,e){return!!((e==="v4"||!e)&&ZCe.test(t)||(e==="v6"||!e)&&tSe.test(t))}function lSe(t,e){if(!QCe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function uSe(t,e){return!!((e==="v4"||!e)&&eSe.test(t)||(e==="v6"||!e)&&nSe.test(t))}class $o extends mt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const s=this._getOrReturnCtx(e);return Te(s,{code:fe.invalid_type,expected:ke.string,received:s.parsedType}),We}const r=new Ii;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Te(i,{code:fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Te(i,{code:fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")JCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"email",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")KC||(KC=new RegExp(XCe,"u")),KC.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"emoji",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")qCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"uuid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")GCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"nanoid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")zCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")WCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid2",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")KCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ulid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Te(i,{validation:"url",code:fe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"regex",code:fe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?aSe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?sSe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?oSe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?YCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"duration",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?cSe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ip",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?lSe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"jwt",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?uSe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cidr",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?rSe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?iSe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64url",code:fe.invalid_string,message:s.message}),r.dirty()):wt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:fe.invalid_string,...Re.errToObj(r)})}_addCheck(e){return new $o({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new $o({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $o({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $o({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$o.create=t=>new $o({checks:[],typeName:Ke.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...rt(t)});function dSe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class tu extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const s=this._getOrReturnCtx(e);return Te(s,{code:fe.invalid_type,expected:ke.number,received:s.parsedType}),We}let r;const i=new Ii;for(const s of this._def.checks)s.kind==="int"?wt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?dSe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.not_finite,message:s.message}),i.dirty()):wt.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new tu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new tu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&wt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}tu.create=t=>new tu({checks:[],typeName:Ke.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class nu extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ke.bigint)return this._getInvalidInput(e);let r;const i=new Ii;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:fe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):wt.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Te(n,{code:fe.invalid_type,expected:ke.bigint,received:n.parsedType}),We}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new nu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new nu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}nu.create=t=>new nu({checks:[],typeName:Ke.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...rt(t)});class H_ extends mt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const r=this._getOrReturnCtx(e);return Te(r,{code:fe.invalid_type,expected:ke.boolean,received:r.parsedType}),We}return qi(e.data)}}H_.create=t=>new H_({typeName:Ke.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class rh extends mt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const s=this._getOrReturnCtx(e);return Te(s,{code:fe.invalid_type,expected:ke.date,received:s.parsedType}),We}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Te(s,{code:fe.invalid_date}),We}const r=new Ii;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:fe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):wt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}rh.create=t=>new rh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ke.ZodDate,...rt(t)});class e2 extends mt{_parse(e){if(this._getType(e)!==ke.symbol){const r=this._getOrReturnCtx(e);return Te(r,{code:fe.invalid_type,expected:ke.symbol,received:r.parsedType}),We}return qi(e.data)}}e2.create=t=>new e2({typeName:Ke.ZodSymbol,...rt(t)});class t2 extends mt{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:fe.invalid_type,expected:ke.undefined,received:r.parsedType}),We}return qi(e.data)}}t2.create=t=>new t2({typeName:Ke.ZodUndefined,...rt(t)});class n2 extends mt{_parse(e){if(this._getType(e)!==ke.null){const r=this._getOrReturnCtx(e);return Te(r,{code:fe.invalid_type,expected:ke.null,received:r.parsedType}),We}return qi(e.data)}}n2.create=t=>new n2({typeName:Ke.ZodNull,...rt(t)});class r2 extends mt{constructor(){super(...arguments),this._any=!0}_parse(e){return qi(e.data)}}r2.create=t=>new r2({typeName:Ke.ZodAny,...rt(t)});class i2 extends mt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return qi(e.data)}}i2.create=t=>new i2({typeName:Ke.ZodUnknown,...rt(t)});class Nc extends mt{_parse(e){const n=this._getOrReturnCtx(e);return Te(n,{code:fe.invalid_type,expected:ke.never,received:n.parsedType}),We}}Nc.create=t=>new Nc({typeName:Ke.ZodNever,...rt(t)});class s2 extends mt{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:fe.invalid_type,expected:ke.void,received:r.parsedType}),We}return qi(e.data)}}s2.create=t=>new s2({typeName:Ke.ZodVoid,...rt(t)});class ao extends mt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ke.array)return Te(n,{code:fe.invalid_type,expected:ke.array,received:n.parsedType}),We;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Te(n,{code:o?fe.too_big:fe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Te(n,{code:fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Te(n,{code:fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Pc(n,o,n.path,a)))).then(o=>Ii.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Pc(n,o,n.path,a)));return Ii.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new ao({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new ao({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new ao({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}ao.create=(t,e)=>new ao({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ke.ZodArray,...rt(e)});function Lu(t){if(t instanceof on){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=gc.create(Lu(r))}return new on({...t._def,shape:()=>e})}else return t instanceof ao?new ao({...t._def,type:Lu(t.element)}):t instanceof gc?gc.create(Lu(t.unwrap())):t instanceof oh?oh.create(Lu(t.unwrap())):t instanceof ru?ru.create(t.items.map(e=>Lu(e))):t}class on extends mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=wt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ke.object){const l=this._getOrReturnCtx(e);return Te(l,{code:fe.invalid_type,expected:ke.object,received:l.parsedType}),We}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Nc&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],d=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Pc(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Nc){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Te(i,{code:fe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Pc(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,f=await u.value;l.push({key:d,value:f,alwaysSet:u.alwaysSet})}return l}).then(l=>Ii.mergeObjectSync(r,l)):Ii.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new on({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Re.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new on({...this._def,unknownKeys:"strip"})}passthrough(){return new on({...this._def,unknownKeys:"passthrough"})}extend(e){return new on({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new on({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ke.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new on({...this._def,catchall:e})}pick(e){const n={};for(const r of wt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new on({...this._def,shape:()=>n})}omit(e){const n={};for(const r of wt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new on({...this._def,shape:()=>n})}deepPartial(){return Lu(this)}partial(e){const n={};for(const r of wt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new on({...this._def,shape:()=>n})}required(e){const n={};for(const r of wt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof gc;)s=s._def.innerType;n[r]=s}return new on({...this._def,shape:()=>n})}keyof(){return jW(wt.objectKeys(this.shape))}}on.create=(t,e)=>new on({shape:()=>t,unknownKeys:"strip",catchall:Nc.create(),typeName:Ke.ZodObject,...rt(e)});on.strictCreate=(t,e)=>new on({shape:()=>t,unknownKeys:"strict",catchall:Nc.create(),typeName:Ke.ZodObject,...rt(e)});on.lazycreate=(t,e)=>new on({shape:t,unknownKeys:"strip",catchall:Nc.create(),typeName:Ke.ZodObject,...rt(e)});class z_ extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ua(a.ctx.common.issues));return Te(n,{code:fe.invalid_union,unionErrors:o}),We}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new ua(c));return Te(n,{code:fe.invalid_union,unionErrors:a}),We}}get options(){return this._def.options}}z_.create=(t,e)=>new z_({options:t,typeName:Ke.ZodUnion,...rt(e)});function Pb(t,e){const n=Pa(t),r=Pa(e);if(t===e)return{valid:!0,data:t};if(n===ke.object&&r===ke.object){const i=wt.objectKeys(e),s=wt.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=Pb(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ke.array&&r===ke.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=Pb(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===ke.date&&r===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class W_ extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(JL(s)||JL(o))return We;const a=Pb(s.value,o.value);return a.valid?((XL(s)||XL(o))&&n.dirty(),{status:n.value,value:a.data}):(Te(r,{code:fe.invalid_intersection_types}),We)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}W_.create=(t,e,n)=>new W_({left:t,right:e,typeName:Ke.ZodIntersection,...rt(n)});class ru extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.array)return Te(r,{code:fe.invalid_type,expected:ke.array,received:r.parsedType}),We;if(r.data.length<this._def.items.length)return Te(r,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&r.data.length>this._def.items.length&&(Te(r,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Pc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Ii.mergeArray(n,o)):Ii.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ru({...this._def,rest:e})}}ru.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ru({items:t,typeName:Ke.ZodTuple,rest:null,...rt(e)})};class o2 extends mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.map)return Te(r,{code:fe.invalid_type,expected:ke.map,received:r.parsedType}),We;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new Pc(r,a,r.path,[l,"key"])),value:s._parse(new Pc(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return We;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return We;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}o2.create=(t,e,n)=>new o2({valueType:e,keyType:t,typeName:Ke.ZodMap,...rt(n)});class mm extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.set)return Te(r,{code:fe.invalid_type,expected:ke.set,received:r.parsedType}),We;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Te(r,{code:fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Te(r,{code:fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return We;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new Pc(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new mm({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new mm({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}mm.create=(t,e)=>new mm({valueType:t,minSize:null,maxSize:null,typeName:Ke.ZodSet,...rt(e)});class a2 extends mt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}a2.create=(t,e)=>new a2({getter:t,typeName:Ke.ZodLazy,...rt(e)});class c2 extends mt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Te(n,{received:n.data,code:fe.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}}c2.create=(t,e)=>new c2({value:t,typeName:Ke.ZodLiteral,...rt(e)});function jW(t,e){return new ih({values:t,typeName:Ke.ZodEnum,...rt(e)})}class ih extends mt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{expected:wt.joinValues(r),received:n.parsedType,code:fe.invalid_type}),We}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{received:n.data,code:fe.invalid_enum_value,options:r}),We}return qi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ih.create(e,{...this._def,...n})}exclude(e,n=this._def){return ih.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ih.create=jW;class l2 extends mt{_parse(e){const n=wt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ke.string&&r.parsedType!==ke.number){const i=wt.objectValues(n);return Te(r,{expected:wt.joinValues(i),received:r.parsedType,code:fe.invalid_type}),We}if(this._cache||(this._cache=new Set(wt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=wt.objectValues(n);return Te(r,{received:r.data,code:fe.invalid_enum_value,options:i}),We}return qi(e.data)}get enum(){return this._def.values}}l2.create=(t,e)=>new l2({values:t,typeName:Ke.ZodNativeEnum,...rt(e)});class K_ extends mt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.promise&&n.common.async===!1)return Te(n,{code:fe.invalid_type,expected:ke.promise,received:n.parsedType}),We;const r=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return qi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}K_.create=(t,e)=>new K_({type:t,typeName:Ke.ZodPromise,...rt(e)});class sh extends mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Te(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return We;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?We:c.status==="dirty"||n.value==="dirty"?Rf(c.value):c});{if(n.value==="aborted")return We;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?We:a.status==="dirty"||n.value==="dirty"?Rf(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?We:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?We:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!nh(o))return We;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>nh(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):We);wt.assertNever(i)}}sh.create=(t,e,n)=>new sh({schema:t,typeName:Ke.ZodEffects,effect:e,...rt(n)});sh.createWithPreprocess=(t,e,n)=>new sh({schema:e,effect:{type:"preprocess",transform:t},typeName:Ke.ZodEffects,...rt(n)});class gc extends mt{_parse(e){return this._getType(e)===ke.undefined?qi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gc.create=(t,e)=>new gc({innerType:t,typeName:Ke.ZodOptional,...rt(e)});class oh extends mt{_parse(e){return this._getType(e)===ke.null?qi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oh.create=(t,e)=>new oh({innerType:t,typeName:Ke.ZodNullable,...rt(e)});class Nb extends mt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Nb.create=(t,e)=>new Nb({innerType:t,typeName:Ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});class Ob extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return B_(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ua(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ua(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ob.create=(t,e)=>new Ob({innerType:t,typeName:Ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});class u2 extends mt{_parse(e){if(this._getType(e)!==ke.nan){const r=this._getOrReturnCtx(e);return Te(r,{code:fe.invalid_type,expected:ke.nan,received:r.parsedType}),We}return{status:"valid",value:e.data}}}u2.create=t=>new u2({typeName:Ke.ZodNaN,...rt(t)});class hSe extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class tP extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?We:s.status==="dirty"?(n.dirty(),Rf(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?We:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new tP({in:e,out:n,typeName:Ke.ZodPipeline})}}class Mb extends mt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(nh(i)&&(i.value=Object.freeze(i.value)),i);return B_(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Mb.create=(t,e)=>new Mb({innerType:t,typeName:Ke.ZodReadonly,...rt(e)});on.lazycreate;var Ke;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ke||(Ke={}));const Bo=$o.create;tu.create;nu.create;const tbe=H_.create,nbe=rh.create;Nc.create;ao.create;const sg=on.create;on.strictCreate;z_.create;W_.create;ru.create;const rbe=ih.create;K_.create;gc.create;oh.create;const ibe={string:t=>$o.create({...t,coerce:!0}),number:t=>tu.create({...t,coerce:!0}),boolean:t=>H_.create({...t,coerce:!0}),bigint:t=>nu.create({...t,coerce:!0}),date:t=>rh.create({...t,coerce:!0})};var fSe=Object.defineProperty,pSe=Object.defineProperties,mSe=Object.getOwnPropertyDescriptors,q_=Object.getOwnPropertySymbols,VW=Object.prototype.hasOwnProperty,$W=Object.prototype.propertyIsEnumerable,d2=(t,e,n)=>e in t?fSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gSe=(t,e)=>{for(var n in e||(e={}))VW.call(e,n)&&d2(t,n,e[n]);if(q_)for(var n of q_(e))$W.call(e,n)&&d2(t,n,e[n]);return t},ySe=(t,e)=>pSe(t,mSe(e)),vSe=(t,e)=>{var n={};for(var r in t)VW.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&q_)for(var r of q_(t))e.indexOf(r)<0&&$W.call(t,r)&&(n[r]=t[r]);return n};function _Se(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function wSe(t){let e=g.useRef();return g.useEffect(()=>{e.current=t}),e.current}var TSe=18,BW=40,ESe=`${BW}px`,CSe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function SSe({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[i,s]=g.useState(!1),[o,a]=g.useState(!1),[c,l]=g.useState(!1),u=g.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&i&&o,[i,o,n]),d=g.useCallback(()=>{let f=t.current,m=e.current;if(!f||!m||c||n==="none")return;let w=f,y=w.getBoundingClientRect().left+w.offsetWidth,v=w.getBoundingClientRect().top+w.offsetHeight/2,E=y-TSe,T=v;document.querySelectorAll(CSe).length===0&&document.elementFromPoint(E,T)===f||(s(!0),l(!0))},[t,e,c,n]);return g.useEffect(()=>{let f=t.current;if(!f||n==="none")return;function m(){let y=window.innerWidth-f.getBoundingClientRect().right;a(y>=BW)}m();let w=setInterval(m,1e3);return()=>{clearInterval(w)}},[t,n]),g.useEffect(()=>{let f=r||document.activeElement===e.current;if(n==="none"||!f)return;let m=setTimeout(d,0),w=setTimeout(d,2e3),y=setTimeout(d,5e3),v=setTimeout(()=>{l(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(w),clearTimeout(y),clearTimeout(v)}},[e,r,n,d]),{hasPWMBadge:i,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:ESe}}var HW=g.createContext({}),zW=g.forwardRef((t,e)=>{var n=t,{value:r,onChange:i,maxLength:s,textAlign:o="left",pattern:a,placeholder:c,inputMode:l="numeric",onComplete:u,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:f,containerClassName:m,noScriptCSSFallback:w=ISe,render:y,children:v}=n,E=vSe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),T,C,b,M,L;let[k,I]=g.useState(typeof E.defaultValue=="string"?E.defaultValue:""),A=r??k,R=wSe(A),N=g.useCallback(Ie=>{i==null||i(Ie),I(Ie)},[i]),P=g.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),x=g.useRef(null),H=g.useRef(null),z=g.useRef({value:A,onChange:N,isIOS:typeof window<"u"&&((C=(T=window==null?void 0:window.CSS)==null?void 0:T.supports)==null?void 0:C.call(T,"-webkit-touch-callout","none"))}),Q=g.useRef({prev:[(b=x.current)==null?void 0:b.selectionStart,(M=x.current)==null?void 0:M.selectionEnd,(L=x.current)==null?void 0:L.selectionDirection]});g.useImperativeHandle(e,()=>x.current,[]),g.useEffect(()=>{let Ie=x.current,Ne=H.current;if(!Ie||!Ne)return;z.current.value!==Ie.value&&z.current.onChange(Ie.value),Q.current.prev=[Ie.selectionStart,Ie.selectionEnd,Ie.selectionDirection];function Rt(){if(document.activeElement!==Ie){V(null),Y(null);return}let Ze=Ie.selectionStart,D=Ie.selectionEnd,B=Ie.selectionDirection,K=Ie.maxLength,de=Ie.value,ue=Q.current.prev,oe=-1,ce=-1,xe;if(de.length!==0&&Ze!==null&&D!==null){let jr=Ze===D,xi=Ze===de.length&&de.length<K;if(jr&&!xi){let Mn=Ze;if(Mn===0)oe=0,ce=1,xe="forward";else if(Mn===K)oe=Mn-1,ce=Mn,xe="backward";else if(K>1&&de.length>1){let Wn=0;if(ue[0]!==null&&ue[1]!==null){xe=Mn<ue[1]?"backward":"forward";let bs=ue[0]===ue[1]&&ue[0]<K;xe==="backward"&&!bs&&(Wn=-1)}oe=Wn+Mn,ce=Wn+Mn+1}}oe!==-1&&ce!==-1&&oe!==ce&&x.current.setSelectionRange(oe,ce,xe)}let at=oe!==-1?oe:Ze,yn=ce!==-1?ce:D,Ur=xe??B;V(at),Y(yn),Q.current.prev=[at,yn,Ur]}if(document.addEventListener("selectionchange",Rt,{capture:!0}),Rt(),document.activeElement===Ie&&se(!0),!document.getElementById("input-otp-style")){let Ze=document.createElement("style");if(Ze.id="input-otp-style",document.head.appendChild(Ze),Ze.sheet){let D="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";mf(Ze.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),mf(Ze.sheet,`[data-input-otp]:autofill { ${D} }`),mf(Ze.sheet,`[data-input-otp]:-webkit-autofill { ${D} }`),mf(Ze.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),mf(Ze.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Gt=()=>{Ne&&Ne.style.setProperty("--root-height",`${Ie.clientHeight}px`)};Gt();let Qt=new ResizeObserver(Gt);return Qt.observe(Ie),()=>{document.removeEventListener("selectionchange",Rt,{capture:!0}),Qt.disconnect()}},[]);let[te,U]=g.useState(!1),[j,se]=g.useState(!1),[Ce,V]=g.useState(null),[W,Y]=g.useState(null);g.useEffect(()=>{_Se(()=>{var Ie,Ne,Rt,Gt;(Ie=x.current)==null||Ie.dispatchEvent(new Event("input"));let Qt=(Ne=x.current)==null?void 0:Ne.selectionStart,Ze=(Rt=x.current)==null?void 0:Rt.selectionEnd,D=(Gt=x.current)==null?void 0:Gt.selectionDirection;Qt!==null&&Ze!==null&&(V(Qt),Y(Ze),Q.current.prev=[Qt,Ze,D])})},[A,j]),g.useEffect(()=>{R!==void 0&&A!==R&&R.length<s&&A.length===s&&(u==null||u(A))},[s,u,R,A]);let re=SSe({containerRef:H,inputRef:x,pushPasswordManagerStrategy:d,isFocused:j}),ge=g.useCallback(Ie=>{let Ne=Ie.currentTarget.value.slice(0,s);if(Ne.length>0&&P&&!P.test(Ne)){Ie.preventDefault();return}typeof R=="string"&&Ne.length<R.length&&document.dispatchEvent(new Event("selectionchange")),N(Ne)},[s,N,R,P]),ne=g.useCallback(()=>{var Ie;if(x.current){let Ne=Math.min(x.current.value.length,s-1),Rt=x.current.value.length;(Ie=x.current)==null||Ie.setSelectionRange(Ne,Rt),V(Ne),Y(Rt)}se(!0)},[s]),De=g.useCallback(Ie=>{var Ne,Rt;let Gt=x.current;if(!f&&(!z.current.isIOS||!Ie.clipboardData||!Gt))return;let Qt=Ie.clipboardData.getData("text/plain"),Ze=f?f(Qt):Qt;Ie.preventDefault();let D=(Ne=x.current)==null?void 0:Ne.selectionStart,B=(Rt=x.current)==null?void 0:Rt.selectionEnd,K=(D!==B?A.slice(0,D)+Ze+A.slice(B):A.slice(0,D)+Ze+A.slice(D)).slice(0,s);if(K.length>0&&P&&!P.test(K))return;Gt.value=K,N(K);let de=Math.min(K.length,s-1),ue=K.length;Gt.setSelectionRange(de,ue),V(de),Y(ue)},[s,N,P,A]),Pe=g.useMemo(()=>({position:"relative",cursor:E.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[E.disabled]),Ve=g.useMemo(()=>({position:"absolute",inset:0,width:re.willPushPWMBadge?`calc(100% + ${re.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:re.willPushPWMBadge?`inset(0 ${re.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[re.PWM_BADGE_SPACE_WIDTH,re.willPushPWMBadge,o]),Ye=g.useMemo(()=>g.createElement("input",ySe(gSe({autoComplete:E.autoComplete||"one-time-code"},E),{"data-input-otp":!0,"data-input-otp-placeholder-shown":A.length===0||void 0,"data-input-otp-mss":Ce,"data-input-otp-mse":W,inputMode:l,pattern:P==null?void 0:P.source,"aria-placeholder":c,style:Ve,maxLength:s,value:A,ref:x,onPaste:Ie=>{var Ne;De(Ie),(Ne=E.onPaste)==null||Ne.call(E,Ie)},onChange:ge,onMouseOver:Ie=>{var Ne;U(!0),(Ne=E.onMouseOver)==null||Ne.call(E,Ie)},onMouseLeave:Ie=>{var Ne;U(!1),(Ne=E.onMouseLeave)==null||Ne.call(E,Ie)},onFocus:Ie=>{var Ne;ne(),(Ne=E.onFocus)==null||Ne.call(E,Ie)},onBlur:Ie=>{var Ne;se(!1),(Ne=E.onBlur)==null||Ne.call(E,Ie)}})),[ge,ne,De,l,Ve,s,W,Ce,E,P==null?void 0:P.source,A]),it=g.useMemo(()=>({slots:Array.from({length:s}).map((Ie,Ne)=>{var Rt;let Gt=j&&Ce!==null&&W!==null&&(Ce===W&&Ne===Ce||Ne>=Ce&&Ne<W),Qt=A[Ne]!==void 0?A[Ne]:null,Ze=A[0]!==void 0?null:(Rt=c==null?void 0:c[Ne])!=null?Rt:null;return{char:Qt,placeholderChar:Ze,isActive:Gt,hasFakeCaret:Gt&&Qt===null}}),isFocused:j,isHovering:!E.disabled&&te}),[j,te,s,W,Ce,E.disabled,A]),gt=g.useMemo(()=>y?y(it):g.createElement(HW.Provider,{value:it},v),[v,it,y]);return g.createElement(g.Fragment,null,w!==null&&g.createElement("noscript",null,g.createElement("style",null,w)),g.createElement("div",{ref:H,"data-input-otp-container":!0,style:Pe,className:m},gt,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ye)))});zW.displayName="Input";function mf(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var ISe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const WW=g.forwardRef(({className:t,containerClassName:e,...n},r)=>p.jsx(zW,{ref:r,containerClassName:pe("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:pe("disabled:cursor-not-allowed",t),...n}));WW.displayName="InputOTP";const KW=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:pe("flex items-center",t),...e}));KW.displayName="InputOTPGroup";const tl=g.forwardRef(({index:t,className:e,...n},r)=>{const i=g.useContext(HW),{char:s,hasFakeCaret:o,isActive:a}=i.slots[t];return p.jsxs("div",{ref:r,className:pe("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",a&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[s,o&&p.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:p.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});tl.displayName="InputOTPSlot";const bSe=g.forwardRef(({...t},e)=>p.jsx("div",{ref:e,role:"separator",...t,children:p.jsx(PZ,{})}));bSe.displayName="InputOTPSeparator";var ASe="Label",qW=g.forwardRef((t,e)=>p.jsx(je.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));qW.displayName=ASe;var GW=qW;const kSe=xm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),QW=g.forwardRef(({className:t,...e},n)=>p.jsx(GW,{ref:n,className:pe(kSe(),t),...e}));QW.displayName=GW.displayName;const gm=wCe,YW=g.createContext({}),Ho=({...t})=>p.jsx(YW.Provider,{value:{name:t.name},children:p.jsx(SCe,{...t})}),eE=()=>{const t=g.useContext(YW),e=g.useContext(JW),{getFieldState:n,formState:r}=ZT(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},JW=g.createContext({}),qs=g.forwardRef(({className:t,...e},n)=>{const r=g.useId();return p.jsx(JW.Provider,{value:{id:r},children:p.jsx("div",{ref:n,className:pe("space-y-2",t),...e})})});qs.displayName="FormItem";const Gs=g.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=eE();return p.jsx(QW,{ref:n,className:pe(r&&"text-destructive",t),htmlFor:i,...e})});Gs.displayName="FormLabel";const Qs=g.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=eE();return p.jsx(t4,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});Qs.displayName="FormControl";const xSe=g.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=eE();return p.jsx("p",{ref:n,id:r,className:pe("text-sm text-muted-foreground",t),...e})});xSe.displayName="FormDescription";const Ys=g.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=eE(),o=i?String(i==null?void 0:i.message):e;return o?p.jsx("p",{ref:r,id:s,className:pe("text-sm font-medium text-destructive",t),...n,children:o}):null});Ys.displayName="FormMessage";const RSe=sg({phoneNumber:Bo().min(10,"Phone number must be at least 10 digits").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number with country code")}),PSe=sg({otp:Bo().min(6,"OTP must be 6 digits").max(6,"OTP must be 6 digits")});function NSe({onBack:t,className:e}){const{signInWithPhone:n,verifyPhoneOTP:r,loading:i}=On(),[s,o]=g.useState("phone"),[a,c]=g.useState(null),[l,u]=g.useState(""),d=fm({resolver:pm(RSe),defaultValues:{phoneNumber:""}}),f=fm({resolver:pm(PSe),defaultValues:{otp:""}}),m=async E=>{try{const T=E.phoneNumber.startsWith("+")?E.phoneNumber:`+${E.phoneNumber}`,C=await n(T);c(C),u(T),o("otp")}catch(T){console.error("Error sending OTP:",T)}},w=async E=>{if(a)try{await r(a,E.otp)}catch(T){console.error("Error verifying OTP:",T),f.setError("otp",{message:"Invalid OTP. Please try again."})}},y=async()=>{if(l)try{const E=await n(l);c(E)}catch(E){console.error("Error resending OTP:",E)}},v=()=>{o("phone"),c(null),f.reset()};return p.jsxs(po,{className:pe("w-full max-w-md animate-fade-in",e),children:[p.jsx(ca,{children:p.jsxs("div",{className:"flex items-center gap-3",children:[(s==="otp"||t)&&p.jsx(ht,{variant:"ghost",size:"icon",onClick:s==="otp"?v:t,className:"h-8 w-8",children:p.jsx(uZ,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Z0,{className:"h-5 w-5 text-primary"}),p.jsx(la,{className:"text-xl",children:s==="phone"?"Sign in with Phone":"Enter Verification Code"})]})]})}),p.jsx(mo,{className:"space-y-6",children:s==="phone"?p.jsxs(p.Fragment,{children:[p.jsx("div",{id:"recaptcha-container",className:"flex justify-center"}),p.jsx(gm,{...d,children:p.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-4",children:[p.jsx(Ho,{control:d.control,name:"phoneNumber",render:({field:E})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Phone Number"}),p.jsx(Qs,{children:p.jsx(Ws,{placeholder:"+1234567890",...E,className:"text-center font-mono"})}),p.jsx(Ys,{}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +1 for US, +91 for India)"})]})}),p.jsx(ht,{type:"submit",className:"w-full",disabled:i,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})})]}):p.jsx(gm,{...f,children:p.jsxs("form",{onSubmit:f.handleSubmit(w),className:"space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"We've sent a 6-digit code to"}),p.jsx("p",{className:"font-medium",children:l})]}),p.jsx(Ho,{control:f.control,name:"otp",render:({field:E})=>p.jsxs(qs,{children:[p.jsx(Gs,{className:"sr-only",children:"Verification Code"}),p.jsx(Qs,{children:p.jsx("div",{className:"flex justify-center",children:p.jsx(WW,{maxLength:6,value:E.value,onChange:E.onChange,children:p.jsxs(KW,{children:[p.jsx(tl,{index:0}),p.jsx(tl,{index:1}),p.jsx(tl,{index:2}),p.jsx(tl,{index:3}),p.jsx(tl,{index:4}),p.jsx(tl,{index:5})]})})})}),p.jsx(Ys,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(ht,{type:"submit",className:"w-full",disabled:i||f.watch("otp").length!==6,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Sign In"}),p.jsx(ht,{type:"button",variant:"ghost",className:"w-full",onClick:y,disabled:i,children:"Resend OTP"})]})]})})})]})}var tE="Tabs",[OSe,sbe]=ai(tE,[UT]),XW=UT(),[MSe,nP]=OSe(tE),ZW=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...l}=t,u=LT(a),[d,f]=Fc({prop:r,onChange:i,defaultProp:s??"",caller:tE});return p.jsx(MSe,{scope:n,baseId:Zs(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:c,children:p.jsx(je.div,{dir:u,"data-orientation":o,...l,ref:e})})});ZW.displayName=tE;var eK="TabsList",tK=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=nP(eK,n),o=XW(n);return p.jsx(sz,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(je.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});tK.displayName=eK;var nK="TabsTrigger",rK=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=nP(nK,n),a=XW(n),c=oK(o.baseId,r),l=aK(o.baseId,r),u=r===o.value;return p.jsx(oz,{asChild:!0,...a,focusable:!i,active:u,children:p.jsx(je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:we(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:we(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:we(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});rK.displayName=nK;var iK="TabsContent",sK=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=nP(iK,n),c=oK(a.baseId,r),l=aK(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(zn,{present:i||u,children:({present:f})=>p.jsx(je.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});sK.displayName=iK;function oK(t,e){return`${t}-trigger-${e}`}function aK(t,e){return`${t}-content-${e}`}var DSe=ZW,cK=tK,lK=rK,uK=sK;const LSe=DSe,dK=g.forwardRef(({className:t,...e},n)=>p.jsx(cK,{ref:n,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));dK.displayName=cK.displayName;const Db=g.forwardRef(({className:t,...e},n)=>p.jsx(lK,{ref:n,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Db.displayName=lK.displayName;const Lb=g.forwardRef(({className:t,...e},n)=>p.jsx(uK,{ref:n,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Lb.displayName=uK.displayName;const FSe=sg({email:Bo().email({message:"Invalid email address."}),password:Bo().min(6,{message:"Password must be at least 6 characters."})}),USe=sg({email:Bo().email({message:"Invalid email address."})});function jSe(){const{signIn:t,signInWithGoogle:e,resetPassword:n,loading:r}=On(),i=ou(),[s,o]=g.useState(!1),a=Fh(),c=fm({resolver:pm(FSe),defaultValues:{email:"",password:""}}),l=fm({resolver:pm(USe),defaultValues:{email:""}});async function u(m){try{await t(m.email,m.password),i("/")}catch{}}async function d(){try{await e(),i("/")}catch{}}async function f(m){try{await n(m.email),o(!1),l.reset()}catch{}}return s?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs(po,{className:"w-full max-w-md shadow-elegant animate-scale-in",children:[p.jsx(ca,{children:p.jsxs(la,{className:"text-center text-2xl flex items-center justify-center gap-2",children:[p.jsx(eO,{className:"h-6 w-6 text-primary"}),"Reset Password"]})}),p.jsx(mo,{children:p.jsx(gm,{...l,children:p.jsxs("form",{onSubmit:l.handleSubmit(f),className:"space-y-4",children:[p.jsx(Ho,{control:l.control,name:"email",render:({field:m})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Email Address"}),p.jsx(Qs,{children:p.jsx(Ws,{placeholder:"m@example.com",...m})}),p.jsx(Ys,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(ht,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}):"Send Reset Email"}),p.jsx(ht,{type:"button",variant:"ghost",className:"w-full",onClick:()=>o(!1),children:"Back to Sign In"})]})]})})})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(Md,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Smart Task Management"})]}),p.jsxs(po,{className:"shadow-elegant animate-scale-in",children:[p.jsx(ca,{children:p.jsx(la,{className:"text-center text-xl",children:"Welcome Back"})}),p.jsxs(mo,{children:[p.jsxs(LSe,{defaultValue:"email",className:"w-full",children:[a?p.jsx("div",{className:"mb-6"}):p.jsxs(dK,{className:"grid w-full grid-cols-2 mb-6",children:[p.jsxs(Db,{value:"email",className:"flex items-center gap-2",children:[p.jsx(eO,{className:"h-4 w-4"}),"Email"]}),p.jsxs(Db,{value:"phone",className:"flex items-center gap-2",children:[p.jsx(Z0,{className:"h-4 w-4"}),"Phone"]})]}),p.jsx(Lb,{value:"email",className:"space-y-4",children:p.jsx(gm,{...c,children:p.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[p.jsx(Ho,{control:c.control,name:"email",render:({field:m})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Email"}),p.jsx(Qs,{children:p.jsx(Ws,{placeholder:"m@example.com",...m})}),p.jsx(Ys,{})]})}),p.jsx(Ho,{control:c.control,name:"password",render:({field:m})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Password"}),p.jsx(Qs,{children:p.jsx(Ws,{type:"password",placeholder:"",...m})}),p.jsx(Ys,{})]})}),p.jsx("div",{className:"flex justify-end",children:p.jsx(ht,{type:"button",variant:"link",className:"px-0 text-sm",onClick:()=>o(!0),children:"Forgot password?"})}),p.jsx(ht,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}):"Sign In"})]})})}),!a&&p.jsx(Lb,{value:"phone",children:p.jsx(NSe,{})})]}),!a&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(ht,{variant:"outline",className:"w-full hover-scale",onClick:d,disabled:r,children:[r?p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(P4,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",p.jsx(Np,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign Up"})]})]})]})]})})}const VSe=sg({displayName:Bo().min(2,{message:"Name must be at least 2 characters."}),email:Bo().email({message:"Invalid email address."}),password:Bo().min(8,{message:"Password must be at least 8 characters."}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,{message:"Password must contain at least one uppercase letter, one lowercase letter, and one number."}),confirmPassword:Bo()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function $Se(){const{signUp:t,signInWithGoogle:e,loading:n}=On(),r=ou(),i=Fh(),s=fm({resolver:pm(VSe),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""}});async function o(c){try{await t(c.email,c.password,c.displayName),r("/")}catch{}}async function a(){try{await e(),r("/")}catch{}}return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(Md,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Start your Taskly journey"})]}),p.jsxs(po,{className:"shadow-elegant animate-scale-in",children:[p.jsx(ca,{children:p.jsxs(la,{className:"text-center text-xl flex items-center justify-center gap-2",children:[p.jsx(ek,{className:"h-5 w-5 text-primary"}),"Create Your Account"]})}),p.jsxs(mo,{children:[p.jsx(gm,{...s,children:p.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[p.jsx(Ho,{control:s.control,name:"displayName",render:({field:c})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Full Name"}),p.jsx(Qs,{children:p.jsx(Ws,{placeholder:"John Doe",...c})}),p.jsx(Ys,{})]})}),p.jsx(Ho,{control:s.control,name:"email",render:({field:c})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Email"}),p.jsx(Qs,{children:p.jsx(Ws,{placeholder:"m@example.com",...c})}),p.jsx(Ys,{})]})}),p.jsx(Ho,{control:s.control,name:"password",render:({field:c})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Password"}),p.jsx(Qs,{children:p.jsx(Ws,{type:"password",placeholder:"",...c})}),p.jsx(Ys,{})]})}),p.jsx(Ho,{control:s.control,name:"confirmPassword",render:({field:c})=>p.jsxs(qs,{children:[p.jsx(Gs,{children:"Confirm Password"}),p.jsx(Qs,{children:p.jsx(Ws,{type:"password",placeholder:"",...c})}),p.jsx(Ys,{})]})}),p.jsx(ht,{type:"submit",className:"w-full",disabled:n,variant:"focus",children:n?p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}):"Create Account"})]})}),!i&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(ht,{variant:"outline",className:"w-full hover-scale",onClick:a,disabled:n,children:[n?p.jsx(uc,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(P4,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",p.jsx(Np,{to:"/signin",className:"text-primary hover:underline font-medium",children:"Sign In"})]}),p.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})]})]})})}const BSe=({children:t})=>{const{user:e,loading:n}=On(),r=ou();return g.useEffect(()=>{!n&&!e&&r("/signin")},[e,n,r]),n?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(uc,{className:"h-10 w-10 animate-spin text-primary"})}):e?p.jsx(p.Fragment,{children:t}):null},qC=({children:t})=>{const{userProfile:e,loading:n}=On();return n?p.jsx(CW,{}):!e||e.role!=="admin"?p.jsx(t7,{to:"/",replace:!0}):p.jsx(p.Fragment,{children:t})};function HSe(){const{tasks:t}=DT(),{user:e}=On(),[n,r]=g.useState(new Set);return g.useEffect(()=>{(async()=>{if(!e)return;if(Jt.isNativePlatform()&&(await sn.checkPermissions()).display!=="granted"){console.log("Native notification permission not granted, skipping native assignment check.");return}const s=t.filter(o=>{var u;const a=(u=o.assignedTo)==null?void 0:u.includes(e.uid),c=o.createdAt&&Date.now()-new Date(o.createdAt).getTime()<3e5,l=!n.has(o.id);return a&&c&&l});if(s.length!==0){if(console.log(`Found ${s.length} new task(s) to notify about.`),Jt.isNativePlatform()){const o=s.map(a=>({id:Math.floor(Math.random()*1e6),title:"New Task Assigned",body:`You have been assigned: "${a.title}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{taskId:a.id,type:"task_assignment"}}));try{await sn.schedule({notifications:o}),console.log("Native task assignment notifications scheduled successfully")}catch(a){console.error("Failed to schedule native notifications:",a)}}else for(const o of s)try{"Notification"in window&&Notification.permission==="granted"&&new Notification("New Task Assigned",{body:`You have been assigned: "${o.title}"`,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`task-assignment-${o.id}`,data:{taskId:o.id,type:"task_assignment"},requireInteraction:!0,vibrate:[200,100,200]})}catch(a){console.error("Failed to show web notification:",a)}r(o=>{const a=new Set(o);return s.forEach(c=>a.add(c.id)),a})}})()},[t,e,n]),null}class zSe{constructor(){zt(this,"messaging",null);zt(this,"vapidKey")}async init(){try{if(!("serviceWorker"in navigator)||!("Notification"in window)){console.warn("FCM not supported in this browser");return}this.messaging=y5,await this.requestPermission(),this.setupMessageListener()}catch(e){console.error("Failed to initialize FCM:",e)}}async requestPermission(){try{if(await Notification.requestPermission()==="granted"){const n=await navigator.serviceWorker.ready,r=await fL(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:n});return r?(console.log("FCM token received:",r),r):(console.warn("No FCM token available"),null)}else return console.warn("Notification permission denied"),null}catch(e){throw console.error("Failed to get FCM token:",e),e}}setupMessageListener(){this.messaging&&Eve(this.messaging,e=>{if(console.log("Message received:",e),e.notification){const{title:n,body:r,icon:i}=e.notification;"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(s=>{s.showNotification(n||"New Message",{body:r||"",icon:i||"/icon-192x192.png",badge:"/icon-192x192.png",tag:"fcm-message",requireInteraction:!1,silent:!1})})}})}async getToken(){this.messaging||await this.init();try{const e=await navigator.serviceWorker.ready;return await fL(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}catch(e){return console.error("Failed to get FCM token:",e),null}}}const WSe=new zSe,KSe=Ch("App",{web:()=>qt(()=>import("./web-4KDM1JG4.js"),[]).then(t=>new t.AppWeb)}),al=class al{constructor(){zt(this,"isInitialized",!1)}static getInstance(){return al.instance||(al.instance=new al),al.instance}async init(){if(!Jt.isNativePlatform()){console.log("Not running on native platform, skipping Capacitor notifications");return}try{if((await sn.requestPermissions()).display!=="granted"){console.warn("Notification permissions not granted");return}Jt.getPlatform()==="android"&&(await sn.createChannel({id:"task-reminders",name:"Task Reminders",description:"Notifications for task reminders",importance:4,visibility:1,sound:"beep.wav",vibration:!0,lights:!0,lightColor:"#488AFF"}),await sn.createChannel({id:"pomodoro",name:"Pomodoro Timer",description:"Notifications for pomodoro sessions",importance:4,visibility:1,sound:"ding.wav",vibration:!0,lights:!0,lightColor:"#FF6B6B"})),await sn.addListener("localNotificationActionPerformed",n=>{this.handleNotificationAction(n)}),await sn.addListener("localNotificationReceived",n=>{console.log("Notification received:",n)}),KSe.addListener("appStateChange",({isActive:n})=>{n&&this.handleAppResumed()}),this.isInitialized=!0,console.log("Capacitor notifications initialized")}catch(e){console.error("Failed to initialize Capacitor notifications:",e)}}handleNotificationAction(e){const{actionId:n,notification:r}=e;console.log("Notification action:",n,r),window.dispatchEvent(new CustomEvent("capacitor-notification-action",{detail:{actionId:n,notificationId:r.id,data:r.extra}}))}async handleAppResumed(){try{const e=await sn.getPending();console.log("Pending notifications:",e.notifications.length);const n=await sn.getDeliveredNotifications();console.log("Delivered notifications:",n.notifications.length)}catch(e){console.error("Error checking notifications on resume:",e)}}async scheduleNotification(e){if(!this.isInitialized||!Jt.isNativePlatform()){console.warn("Capacitor notifications not available, falling back to web notifications");return}try{await sn.schedule({notifications:[e]}),console.log("Notification scheduled:",e.id)}catch(n){console.error("Failed to schedule notification:",n)}}async cancelNotification(e){if(!(!this.isInitialized||!Jt.isNativePlatform()))try{await sn.cancel({notifications:[{id:e}]}),console.log("Notification cancelled:",e)}catch(n){console.error("Failed to cancel notification:",n)}}async cancelAllNotifications(){if(!(!this.isInitialized||!Jt.isNativePlatform()))try{const e=await sn.getPending();e.notifications.length>0&&await sn.cancel({notifications:e.notifications.map(n=>({id:n.id}))}),console.log("All notifications cancelled")}catch(e){console.error("Failed to cancel all notifications:",e)}}async getPendingNotifications(){if(!this.isInitialized||!Jt.isNativePlatform())return[];try{return(await sn.getPending()).notifications}catch(e){return console.error("Failed to get pending notifications:",e),[]}}async scheduleTaskReminder(e,n,r,i){const s=this.generateNotificationId(e);await this.scheduleNotification({id:s,title:n,body:r,schedule:{at:i,allowWhileIdle:!0},channelId:"task-reminders",iconColor:"#488AFF",extra:{taskId:e,type:"task-reminder"}})}async schedulePomodoroComplete(e){const n=Date.now();await this.scheduleNotification({id:n,title:`${e==="work"?"Work":"Break"} Session Complete`,body:`Great job! Time for your ${e==="work"?"break":"next work session"}.`,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"pomodoro",iconColor:"#FF6B6B",extra:{type:"pomodoro-complete",sessionType:e}})}async cancelTaskReminder(e){const n=this.generateNotificationId(e);await this.cancelNotification(n)}generateNotificationId(e){let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n)}isNativeNotificationsAvailable(){return this.isInitialized&&Jt.isNativePlatform()}};zt(al,"instance");let Fb=al;const h2=Fb.getInstance(),cl=class cl{constructor(){zt(this,"checkInterval",null)}static getInstance(){return cl.instance||(cl.instance=new cl),cl.instance}async init(){await dt.init(),this.startScheduleChecker(),await this.checkMissedNotifications()}async scheduleNotification(e){const n={...e,id:crypto.randomUUID(),createdAt:Date.now(),status:"pending"};await this.saveScheduledNotification(n);const r=e.scheduledTime-Date.now();return r<=5*60*1e3&&r>0&&setTimeout(()=>this.deliverNotification(n.id),r),n.id}async cancelNotification(e){const n=await this.getScheduledNotification(e);n&&(n.status="expired",await this.saveScheduledNotification(n))}async saveScheduledNotification(e){const n=await dt.getStore("scheduledNotifications","readwrite");return new Promise((r,i)=>{const s=n.put(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getScheduledNotification(e){const n=await dt.getStore("scheduledNotifications");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result||null),s.onerror=()=>i(s.error)})}async getAllPendingNotifications(){const n=(await dt.getStore("scheduledNotifications")).index("status");return new Promise((r,i)=>{const s=n.getAll("pending");s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}startScheduleChecker(){this.checkInterval=window.setInterval(()=>this.checkDueNotifications(),3e4)}async checkDueNotifications(){if(!this.isDatabaseReady())return;const e=await this.getAllPendingNotifications(),n=Date.now();for(const r of e)r.scheduledTime<=n&&await this.deliverNotification(r.id)}isDatabaseReady(){try{return dt&&typeof dt.getStore=="function"}catch{return!1}}async checkMissedNotifications(){const e=await this.getAllPendingNotifications(),n=Date.now();let r=0;for(const i of e)i.scheduledTime<=n&&(await this.deliverNotification(i.id),r++);r>0&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly - Missed Notifications",{body:`You had ${r} missed notification${r>1?"s":""} while the app was closed.`,icon:"/icon-192x192.png",tag:"missed-notifications"})}async deliverNotification(e){const n=await this.getScheduledNotification(e);if(!n||n.status!=="pending")return;if(Date.now()-n.scheduledTime>60*60*1e3){n.status="expired",await this.saveScheduledNotification(n);return}"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",options:{title:n.title,body:n.body,icon:n.icon||"/icon-192x192.png",badge:n.badge||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent,vibrate:n.vibrate||[200,100,200],actions:n.actions}}):"Notification"in window&&Notification.permission==="granted"&&new Notification(n.title,{body:n.body,icon:n.icon||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent}),n.status="delivered",await this.saveScheduledNotification(n)}async getNotificationHistory(){const e=await dt.getStore("scheduledNotifications");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result.sort((s,o)=>o.createdAt-s.createdAt)),i.onerror=()=>r(i.error)})}async clearExpiredNotifications(){const n=(await this.getNotificationHistory()).filter(i=>i.status==="expired"||i.status==="delivered"),r=await dt.getStore("scheduledNotifications","readwrite");for(const i of n)Date.now()-i.createdAt>7*24*60*60*1e3&&r.delete(i.id)}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}};zt(cl,"instance");let Ub=cl;const jb=Ub.getInstance(),qSe=Object.freeze(Object.defineProperty({__proto__:null,unifiedNotifications:jb},Symbol.toStringTag,{value:"Module"})),ku={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GOOGLE_PLACES_API_KEY:"AIzaSyDwoNRug6stvP0ju18oYDWiv8giJ1UMHtQ"};class GSe{constructor(){zt(this,"enabled");zt(this,"webhookUrl");this.enabled=typeof import.meta<"u"&&(ku==null?void 0:ku.VITE_ALEXA_ENABLED)==="true",this.webhookUrl=typeof import.meta<"u"&&(ku==null?void 0:ku.VITE_ALEXA_WEBHOOK)||null}isEnabled(){return!!this.enabled&&!!this.webhookUrl}async init(){}async send(e){if(!this.isEnabled()){this.speakFallback(e);return}try{await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.warn("Alexa webhook failed, using speech fallback:",n),this.speakFallback(e)}}async schedule(e){if(!e.scheduledTime||e.scheduledTime<=Date.now())return this.send(e);if(this.isEnabled())try{await fetch(this.webhookUrl+"/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return}catch(r){console.warn("Alexa schedule webhook failed, falling back to local timeout:",r)}const n=e.scheduledTime-Date.now();setTimeout(()=>this.speakFallback(e),Math.max(0,n))}speakFallback(e){var n;try{const r=`${e.title}. ${e.body}`,i=new SpeechSynthesisUtterance(r);i.lang="en-US",(n=window.speechSynthesis)==null||n.speak(i)}catch{}}}const Ky=new GSe,GC=Object.freeze(Object.defineProperty({__proto__:null,alexaNotifications:Ky},Symbol.toStringTag,{value:"Module"})),ll=class ll{constructor(){zt(this,"initialized",!1)}static getInstance(){return ll.instance||(ll.instance=new ll),ll.instance}async init(){if(!this.initialized)try{Jt.isNativePlatform()?(await h2.init(),console.log("Capacitor notifications initialized for native platform")):(await Promise.all([WSe.init(),jb.init(),Ky.init()]),console.log("Web notifications initialized for PWA")),this.initialized=!0,console.log("Unified notification service initialized for platform:",Jt.getPlatform())}catch(e){console.error("Failed to initialize unified notification service:",e)}}async sendNotification(e){this.initialized||await this.init();try{Jt.isNativePlatform()?(await this.sendCapacitorNotification(e),console.log("Sent native notification:",e.title)):(await this.sendWebNotification(e),console.log("Sent web notification:",e.title)),Ky.send({title:e.title,body:e.body,type:e.type,userId:e.userId,data:e.data}),!Jt.isNativePlatform()&&(e.type==="chat"||e.type==="task")&&await this.sendBackgroundNotification(e)}catch(n){console.error("Failed to send notification:",n)}}async scheduleNotification(e,n){const r=await jb.scheduleNotification({...e,scheduledTime:n});return Ky.schedule({title:e.title,body:e.body,type:e.type==="task"?"reminder":e.type,userId:e.userId,data:e.data,scheduledTime:n}),r}async sendCapacitorNotification(e){try{await h2.scheduleNotification({id:Date.now(),title:e.title,body:e.body,sound:"default",channelId:"app_main_channel",extra:{...e.data,type:e.type},schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0}})}catch(n){throw console.error("Failed to send Capacitor notification:",n),n}}async sendWebNotification(e){try{if("Notification"in window){if(Notification.permission==="default"&&await Notification.requestPermission()!=="granted"){console.warn("Web notification permission denied");return}Notification.permission==="granted"&&new Notification(e.title,{body:e.body,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`${e.type}-${Date.now()}`,data:{...e.data,type:e.type},requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,vibrate:[200,100,200]})}}catch(n){throw console.error("Failed to send web notification:",n),n}}async sendBackgroundNotification(e){e.scheduledTime&&await this.scheduleNotification(e,e.scheduledTime)}async sendChatNotification(e,n,r,i){return this.sendNotification({title:`New message from ${n}`,body:r.length>100?`${r.substring(0,100)}...`:r,type:"chat",data:{senderId:e,chatId:i,messagePreview:r.substring(0,50)},requireInteraction:!1})}async sendTaskAssignmentNotification(e,n,r){return this.sendNotification({title:"New Task Assignment",body:`${n} assigned you "${e}"`,type:"assignment",data:{taskId:r,assignerName:n,taskTitle:e},requireInteraction:!0})}async sendCommentNotification(e,n,r,i){return this.sendNotification({title:`New comment on "${e}"`,body:`${n}: ${r.length>80?`${r.substring(0,80)}...`:r}`,type:"comment",data:{taskId:i,commenterName:n,commentPreview:r.substring(0,50)}})}async sendPomodoroNotification(e,n){const r=e==="work_complete";return this.sendNotification({title:r?"Work Session Complete!":"Break Time Over!",body:r?`Great focus! Time for a break. Session ${n||1} completed.`:"Ready to get back to work? Your break is over.",type:"pomodoro",data:{pomodoroType:e,sessionCount:n},requireInteraction:!0})}};zt(ll,"instance");let Vb=ll;const G_=Vb.getInstance();function $b(t){const e=t??Date.now();return Math.floor(e%2e9)}function QSe(){const{user:t}=On(),e=g.useRef(new Map),n=g.useRef(new Map),r=g.useRef(null);g.useEffect(()=>{if(!t){i(),e.current.clear();return}G_.init();const s=gr(Ae,"chatRooms"),o=ia(s,cd("participants","array-contains",t.uid));return r.current=so(o,a=>{const c=new Set;a.forEach(l=>{c.add(l.id)}),n.current.forEach((l,u)=>{c.has(u)||(l(),n.current.delete(u),e.current.delete(u))}),c.forEach(l=>{if(!n.current.has(l)){const u=Hpe(nl(rl,`chats/${l}/messages`),Bpe("timestamp"),Vpe(10)),d=Upe(u,f=>{const m=f.val(),w=f.key;if(!w||!m)return;const y={id:w,...m};if(y.senderId===t.uid){e.current.set(l,y.timestamp);return}const v=e.current.get(l)||0;if(y.timestamp<=v)return;e.current.set(l,y.timestamp);const E=`New message from ${y.senderName}`,T=y.content.length>100?`${y.content.substring(0,100)}...`:y.content,C=$b(y.timestamp);Jt.isNativePlatform()?qt(async()=>{const{LocalNotifications:b}=await Promise.resolve().then(()=>aie);return{LocalNotifications:b}},void 0).then(({LocalNotifications:b})=>{b.schedule({notifications:[{id:C,title:E,body:T,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"chat_message",senderId:y.senderId,chatRoomId:l}}]}).catch(M=>{console.error("Failed to schedule native chat notification:",M)})}):"Notification"in window&&Notification.permission==="granted"&&new Notification(E,{body:T,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`chat-message-${y.id}`,data:{type:"chat_message",senderId:y.senderId,chatRoomId:l},requireInteraction:!1,vibrate:[100,50,100]})});n.current.set(l,()=>C6(u,"child_added",d))}})}),()=>{i()}},[t]);const i=()=>{r.current&&(r.current(),r.current=null),n.current.forEach(s=>s()),n.current.clear()};return null}function YSe(){const{user:t}=On(),[e,n]=g.useState(new Set),[r,i]=g.useState([]);return g.useEffect(()=>{(async()=>{if(!Jt.isNativePlatform()||!t)return;if((await sn.checkPermissions()).display!=="granted"){console.log("Notification permission not granted, skipping team invite check.");return}const a=r.filter(l=>{const u=l.inviteeId===t.uid,d=l.status==="pending",f=l.createdAt&&Date.now()-new Date(l.createdAt).getTime()<3e5,m=!e.has(l.id);return u&&d&&f&&m});if(a.length===0)return;console.log(`Found ${a.length} new team invite(s) to notify about.`);const c=a.map(l=>({id:Math.floor(Math.random()*1e6),title:"New Team Invitation",body:`${l.inviterName} invited you to join "${l.teamName}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"team_invite",inviteId:l.id,teamName:l.teamName,inviterId:l.inviterId}}));try{await sn.schedule({notifications:c}),n(l=>{const u=new Set(l);return a.forEach(d=>u.add(d.id)),u})}catch(l){console.error("Failed to schedule team invite notifications:",l)}})()},[r,t,e]),g.useEffect(()=>{},[t]),null}const hK=g.createContext(null);function JSe({children:t}){const{user:e}=On(),n=DT(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),[l,u]=g.useState({}),d=async(v,E,T)=>{if(!e||!E.trim())return;const C=new Date().toISOString();try{const b=gr(Ae,"taskComments",v,"comments");await Ph(b,{taskId:v,userId:e.uid,userDisplayName:e.displayName||e.email,userPhotoURL:e.photoURL,content:E.trim(),createdAt:C,isEdited:!1}),await n.updateTaskLastCommentedAt(v,C),T&&await G_.sendCommentNotification(T,e.displayName||e.email||"Anonymous",E.trim(),v),Eu.success("Comment added successfully")}catch(b){console.error("Error adding comment:",b),Eu.error("Failed to add comment")}},f=async(v,E,T)=>{if(!(!e||!T.trim()))try{const C=Be(Ae,"taskComments",E,"comments",v);await Gr(C,{content:T.trim(),updatedAt:new Date().toISOString(),isEdited:!0}),await n.updateTaskLastCommentedAt(E,new Date().toISOString()),Eu.success("Comment updated successfully")}catch(C){console.error("Error updating comment:",C),Eu.error("Failed to update comment")}},m=async(v,E)=>{if(e)try{const T=Be(Ae,"taskComments",E,"comments",v);await fo(T),await n.updateTaskLastCommentedAt(E,new Date().toISOString()),Eu.success("Comment deleted successfully")}catch(T){console.error("Error deleting comment:",T),Eu.error("Failed to delete comment")}},w=v=>{if(!v||l[v])return null;c(b=>({...b,[v]:!0}));const E=gr(Ae,"taskComments",v,"comments"),T=ia(E,Wd("createdAt","desc"),Qce(50)),C=so(T,b=>{const M=b.docs.map(L=>({id:L.id,...L.data()}));i(L=>({...L,[v]:M})),o(L=>({...L,[v]:M.length})),c(L=>({...L,[v]:!1})),b.docChanges().forEach(L=>{if(L.type==="added"||L.type==="modified"){const k=L.doc.data();k.userId!==(e==null?void 0:e.uid)&&n.updateTaskLastCommentedAt(v,k.createdAt)}})},b=>{console.error("Error fetching comments:",b),c(M=>({...M,[v]:!1}))});return u(b=>({...b,[v]:C})),C},y=v=>{l[v]&&(l[v](),u(E=>{const T={...E};return delete T[v],T}))};return p.jsx(hK.Provider,{value:{comments:r,commentCounts:s,loading:a,addComment:d,updateComment:f,deleteComment:m,subscribeToTaskComments:w,unsubscribeFromTaskComments:y},children:t})}function obe(){const t=g.useContext(hK);if(!t)throw new Error("useComments must be used within a CommentsContextProvider");return t}const fK=g.createContext(void 0);function XSe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),[s,o]=g.useState(!1),[a,c]=g.useState(0),[l,u]=g.useState(null),[d,f]=g.useState(0),[m,w]=g.useState(null),{user:y}=On(),{toast:v}=fa();g.useEffect(()=>{if(!y){n([]);return}i(!0);const k=ia(gr(Ae,"meetingRecordings"),cd("createdBy","==",y.uid),Wd("createdAt","desc")),I=so(k,A=>{const R=[];A.forEach(N=>{R.push({id:N.id,...N.data()})}),n(R),i(!1)},A=>{console.error("Error fetching recordings:",A),v({title:"Connection error",description:"Failed to load recordings. Please try again.",variant:"destructive"}),i(!1)});return()=>I()},[y,v]),g.useEffect(()=>{let k;return s&&(k=setInterval(()=>{c(Math.floor((Date.now()-d)/1e3))},1e3)),()=>{k&&clearInterval(k)}},[s,d]);const E=async()=>{if(!y){v({title:"Authentication required",description:"Please sign in to start recording.",variant:"destructive"});return}m&&w(null);try{const k=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),I=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",A=new MediaRecorder(k,{mimeType:I}),R=[];A.ondataavailable=N=>{N.data.size>0&&R.push(N.data)},A.onstop=()=>{const N=new Blob(R,{type:I});w(N),k.getTracks().forEach(P=>P.stop())},A.start(1e3),u(A),o(!0),f(Date.now()),c(0),v({title:"Recording started ",description:"Your meeting is being recorded."})}catch(k){console.error("Error starting recording:",k),v({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},T=async()=>{!l||!s||(l.stop(),o(!1),u(null),v({title:"Recording stopped ",description:"Ready to save your recording"}))},C=g.useCallback(()=>{w(null)},[]),L={recordings:e,loading:r,isRecording:s,recordingDuration:a,recordedAudio:m,startRecording:E,stopRecording:T,deleteRecording:async k=>{if(y)try{const I=e.find(A=>A.id===k);if(!I)return;await fo(Be(Ae,"meetingRecordings",k));try{const A=JD(yL,I.audioUrl);await dge(A)}catch(A){A.code!=="storage/object-not-found"&&console.warn("Could not delete audio file from storage:",A)}v({title:"Recording deleted",description:"The recording has been permanently removed.",variant:"destructive"})}catch(I){console.error("Error deleting recording:",I),v({title:"Delete failed",description:"Could not delete recording. Please try again.",variant:"destructive"})}},uploadRecording:async(k,I,A)=>{if(!y)return;const R=new Date().toISOString(),N=await Ph(gr(Ae,"meetingRecordings"),{title:I,audioUrl:"",duration:A,status:"uploading",createdAt:R,createdBy:y.uid,fileSize:k.size}),P=N.id;try{const x=`meetly-audio/${y.uid}/${R}-${I.replace(/[^a-zA-Z0-9]/g,"_")}.webm`,H=JD(yL,x),Q=await lge(H,k,{customMetadata:{firestoreId:P}}),te=await uge(Q.ref);await Gr(N,{audioUrl:te,status:"processing"}),C(),v({title:"Recording uploaded! ",description:"Your recording is being processed for transcription."})}catch(x){console.error("Error uploading recording:",x),await fo(Be(Ae,"meetingRecordings",P)),v({title:"Upload failed",description:"Could not upload recording. Please try again.",variant:"destructive"})}},clearRecordedAudio:C};return p.jsx(fK.Provider,{value:L,children:t})}function abe(){const t=g.useContext(fK);if(t===void 0)throw new Error("useMeetly must be used within a MeetlyContextProvider");return t}const pK=g.createContext(void 0);function ZSe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!0),{user:s,userProfile:o}=On(),{toast:a}=fa();g.useEffect(()=>{if(!s||!(o!=null&&o.teamId)){n([]),i(!1);return}i(!0);const m=ia(gr(Ae,"teams",o.teamId,"opportunities"),Wd("createdAt","desc")),w=so(m,y=>{const v=y.docs.map(E=>({id:E.id,...E.data()}));n(v),i(!1)},y=>{console.error("Error fetching opportunities:",y),a({title:"Error",description:"Could not load sales opportunities.",variant:"destructive"}),i(!1)});return()=>w()},[s,o==null?void 0:o.teamId,a]);const f={opportunities:e,loading:r,addOpportunity:async m=>{if(!(!s||!(o!=null&&o.teamId)))try{const w={...m,teamId:o.teamId,createdBy:s.uid,createdAt:new Date().toISOString(),notes:[]};await Ph(gr(Ae,"teams",o.teamId,"opportunities"),w),a({title:"Opportunity created!"})}catch(w){console.error("Error adding opportunity:",w),a({title:"Error",description:"Could not create opportunity.",variant:"destructive"})}},updateOpportunity:async(m,w)=>{if(!s||!(o!=null&&o.teamId))return;const y=e,v=y.find(C=>C.id===m);if(!v)return;const E={...v,...w},T=y.map(C=>C.id===m?E:C);n(T);try{const C=Be(Ae,"teams",o.teamId,"opportunities",m);await Gr(C,w)}catch(C){console.error("Error updating opportunity:",C),a({title:"Update Failed",description:"Could not save changes. Reverting.",variant:"destructive"}),n(y)}},deleteOpportunity:async m=>{if(!(!s||!(o!=null&&o.teamId)))try{const w=Be(Ae,"teams",o.teamId,"opportunities",m);await fo(w),a({title:"Opportunity deleted",variant:"destructive"})}catch(w){console.error("Error deleting opportunity:",w),a({title:"Error",description:"Could not delete opportunity.",variant:"destructive"})}},addNoteToOpportunity:async(m,w)=>{if(!s||!(o!=null&&o.teamId)||!w.trim())return;const y={id:`note-${Date.now()}`,content:w.trim(),authorId:s.uid,authorName:o.displayName||s.email||"Unknown User",createdAt:new Date().toISOString()};try{const v=Be(Ae,"teams",o.teamId,"opportunities",m);await Gr(v,{notes:I3(y)})}catch(v){console.error("Error adding note:",v),a({title:"Error",description:"Could not add note.",variant:"destructive"})}}};return p.jsx(pK.Provider,{value:f,children:t})}function cbe(){const t=g.useContext(pK);if(t===void 0)throw new Error("useSalesOpportunity must be used within a SalesOpportunityProvider");return t}const mK=g.createContext(void 0);function eIe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!0),{user:s}=On(),{toast:o}=fa();g.useEffect(()=>{if(!s){n([]),i(!1);return}i(!0);const c=nl(rl,"contacts"),l=gb(c,u=>{try{const d=u.val();if(d){const f=Object.entries(d).map(([m,w])=>{const y=w.callHistory?Object.entries(w.callHistory).map(([E,T])=>({...T,originalIndex:E})).sort((E,T)=>new Date(T.timestamp).getTime()-new Date(E.timestamp).getTime()).map((E,T,C)=>({...E,type:T===C.length-1?"New Call":"Follow-up"})):[],v=y[0]||null;return{id:m,name:w.name||"N/A",phone:w.phoneNumber||m,status:(v==null?void 0:v.feedback)||"No History",lastContacted:(v==null?void 0:v.timestamp)||new Date().toISOString(),callCount:w.callCount||0,callHistory:y}});f.sort((m,w)=>new Date(w.lastContacted).getTime()-new Date(m.lastContacted).getTime()),n(f)}else n([])}catch(d){console.error("Error transforming contact data:",d),o({title:"Error",description:"Failed to process contact data.",variant:"destructive"})}finally{i(!1)}},u=>{console.error("Firebase read error:",u),o({title:"Error",description:"Failed to fetch contacts from Firebase.",variant:"destructive"}),i(!1)});return()=>l()},[s,o]);const a={contacts:e,loading:r};return p.jsx(mK.Provider,{value:a,children:t})}function lbe(){const t=g.useContext(mK);if(t===void 0)throw new Error("useContacts must be used within a ContactsProvider");return t}const f2=async()=>{Jt.getPlatform()==="android"&&(await sn.createChannel({id:"app_main_channel",name:"Primary Notifications",description:"General app notifications and reminders",importance:4,vibration:!0,visibility:1}),console.log('Android notification channel "app_main_channel" created or already exists.'))},tIe=g.lazy(()=>qt(()=>import("./SalesTrackerPage-Bq_L6DPu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),nIe=g.lazy(()=>qt(()=>import("./SalesOpportunityPage-yHT-hehR.js"),__vite__mapDeps([19,15,9,2,3,10,4,20,7,6,21,22,23]))),rIe=g.lazy(()=>qt(()=>import("./SalesToolsPage-BYPanSP8.js"),__vite__mapDeps([24,1,16]))),iIe=g.lazy(()=>qt(()=>import("./TasksPage-BWtgi6uA.js"),__vite__mapDeps([25,26,20,3,10,7,4,27,6,23,11,12,28,17,22]))),sIe=g.lazy(()=>qt(()=>import("./DashboardPage-Daf8G9KI.js"),__vite__mapDeps([29,28,12,17,9,2,3,10,14,26,20,7,4,27,6,23,11,22,30,31,5,21,32]))),oIe=g.lazy(()=>qt(()=>import("./TeamChatPage-zos32DyD.js"),__vite__mapDeps([33,27,23,22,34]))),aIe=g.lazy(()=>qt(()=>import("./MeetlyPage-DfrNqASs.js"),__vite__mapDeps([35,36,37,4,16,2,3,11,12,18,34,22,38,39]))),cIe=g.lazy(()=>qt(()=>import("./TimerPage-BRwagCVb.js"),__vite__mapDeps([40,31,5]))),lIe=g.lazy(()=>qt(()=>import("./CalendarPage-e36eYcqT.js"),__vite__mapDeps([41,9,2,3,10,6,28,12,17,22,38,36,42]))),uIe=g.lazy(()=>qt(()=>import("./NotesPage-DRqap-yC.js"),__vite__mapDeps([43,6,44,8,16,22,42]))),dIe=g.lazy(()=>qt(()=>import("./AnalyticsPage-5Nlgl86h.js").then(t=>t.A),__vite__mapDeps([45,9,2,3,10,13,30,4,16,31,21,5]))),hIe=g.lazy(()=>qt(()=>import("./ChatPage-CbV2VOJb.js"),__vite__mapDeps([46,9,2,3,10,36,37,18]))),fIe=g.lazy(()=>qt(()=>import("./ProfilePage-67aKDDiI.js"),__vite__mapDeps([47,12,13,28,17,36,39,32]))),pIe=g.lazy(()=>qt(()=>import("./NotFound-BNrnPMeo.js"),[])),mIe=new Yre({defaultOptions:{queries:{retry:3,staleTime:5*60*1e3}}});function gIe(){const{addNotification:t}=ER();return g.useEffect(()=>(_L(t),()=>_L(null)),[t]),null}const yIe=async(t,e)=>{if(!t||!e){console.error("updateUserFCMToken failed: userId or token is missing.");return}try{console.log(`Attempting to save FCM token for user ${t}...`);const n=Be(Ae,"users",t);await Gr(n,{fcmToken:e,lastUpdated:QI()}),console.log("SUCCESSFULLY saved FCM token to Firestore.")}catch(n){console.error("CRITICAL ERROR saving FCM token to Firestore:",n)}};function vIe(){const{user:t}=On(),e=ou(),[n,r]=g.useState(null);g.useEffect(()=>{t&&n&&(console.log("User and FCM token are both available. Saving to Firestore."),yIe(t.uid,n.value))},[t,n]),g.useEffect(()=>{(async()=>{Jt.isNativePlatform()?await i():await s()})()},[e]);const i=async()=>{try{f2();const o=[];return await Pi.requestPermissions(),await Pi.register(),o.push(await Pi.addListener("registration",a=>{console.log("Push registration success. Received token."),r(a)})),o.push(await Pi.addListener("registrationError",a=>{console.error("Push registration FAILED:",a)})),o.push(await Pi.addListener("pushNotificationReceived",a=>{var u,d,f,m,w,y;console.log("SILENT/DATA-ONLY Push received:",a),((u=a.data)==null?void 0:u.type)==="chat_message"&&console.log("Chat message push data:",a.data);let c=((d=a.data)==null?void 0:d.title)||"New Notification",l=((f=a.data)==null?void 0:f.body)||"Check the app for details.";if(((m=a.data)==null?void 0:m.type)==="chat_message"){const v=((w=a.data)==null?void 0:w.senderName)||"Someone",E=((y=a.data)==null?void 0:y.message)||"New chat message.";c=`New message from ${v}`,l=E,console.log(`Constructed local notification: Title='${c}', Body='${l}'`)}sn.schedule({notifications:[{id:$b(),title:c,body:l,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:a.data}]})})),o.push(await Pi.addListener("pushNotificationActionPerformed",a=>{var l;console.log("Push notification action performed:",a);const c=(l=a.notification.data)==null?void 0:l.taskId;c&&e(`/tasks?taskId=${c}`)})),o.push(await sn.addListener("localNotificationActionPerformed",a=>{console.log("Local notification action performed:",a);const c=a.notification.extra;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"?e("/team-chat"):(c==null?void 0:c.type)==="team_invite"&&e("/dashboard")})),()=>{console.log("Removing all push notification listeners..."),o.forEach(a=>{try{a.remove()}catch(c){console.warn("Failed to remove listener handle:",c)}})}}catch(o){console.error("Failed to setup native notifications:",o)}},s=async()=>{try{if(await G_.init(),"Notification"in window&&Notification.permission==="default"){const o=await Notification.requestPermission();console.log("Web notification permission:",o)}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o=>{if(o.data.type==="NOTIFICATION_ACTION"){const{action:a,notificationData:c}=o.data;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"&&e("/team-chat")}})}catch(o){console.error("Failed to setup web notifications:",o)}};return g.useEffect(()=>{if(!Jt.isNativePlatform())return;f2();const o=[];return(async()=>{try{await Pi.requestPermissions(),await Pi.register(),o.push(await Pi.addListener("registration",c=>{console.log("Push registration success. Received token."),r(c)})),o.push(await Pi.addListener("registrationError",c=>{console.error("Push registration FAILED:",c)})),o.push(await Pi.addListener("pushNotificationReceived",c=>{var d,f;console.log("SILENT/DATA-ONLY Push received:",c);const l=((d=c.data)==null?void 0:d.title)||"New Notification",u=((f=c.data)==null?void 0:f.body)||"Check the app for details.";sn.schedule({notifications:[{id:$b(),title:l,body:u,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:c.data}]})})),o.push(await Pi.addListener("pushNotificationActionPerformed",c=>{var u;console.log("Push notification action performed:",c);const l=(u=c.notification.data)==null?void 0:u.taskId;l&&e(`/tasks?taskId=${l}`)})),o.push(await sn.addListener("localNotificationActionPerformed",c=>{console.log("Local notification action performed:",c);const l=c.notification.extra;l!=null&&l.taskId?e("/tasks"):(l==null?void 0:l.type)==="chat_message"?e("/chat"):(l==null?void 0:l.type)==="team_invite"&&e("/dashboard")}))}catch(c){console.error("Failed to setup push notifications:",c)}})(),G_.init(),()=>{console.log("Removing all push notification listeners..."),o.forEach(c=>{try{c.remove()}catch(l){console.warn("Failed to remove listener handle:",l)}})}},[e]),p.jsxs(p.Fragment,{children:[p.jsx(gIe,{}),p.jsx(HSe,{}),p.jsx(QSe,{}),p.jsx(YSe,{}),p.jsxs(r1,{children:[p.jsx(Dn,{path:"/signin",element:p.jsx(jSe,{})}),p.jsx(Dn,{path:"/signup",element:p.jsx($Se,{})}),p.jsx(Dn,{path:"/*",element:p.jsx(BSe,{children:p.jsx(EW,{children:p.jsx(gCe,{children:p.jsx(g.Suspense,{fallback:p.jsx(CW,{}),children:p.jsxs(r1,{children:[p.jsx(Dn,{path:"/",element:p.jsx(sIe,{})}),p.jsx(Dn,{path:"/tasks",element:p.jsx(iIe,{})}),p.jsx(Dn,{path:"/team-chat",element:p.jsx(oIe,{})}),p.jsx(Dn,{path:"/meetly",element:p.jsx(aIe,{})}),p.jsx(Dn,{path:"/sales-tracker",element:p.jsx(qC,{children:p.jsx(tIe,{})})}),p.jsx(Dn,{path:"/sales-opportunity",element:p.jsx(qC,{children:p.jsx(nIe,{})})}),p.jsx(Dn,{path:"/sales-tools",element:p.jsx(qC,{children:p.jsx(rIe,{})})}),p.jsx(Dn,{path:"/timer",element:p.jsx(cIe,{})}),p.jsx(Dn,{path:"/calendar",element:p.jsx(lIe,{})}),p.jsx(Dn,{path:"/notes",element:p.jsx(uIe,{})}),p.jsx(Dn,{path:"/analytics",element:p.jsx(dIe,{})}),p.jsx(Dn,{path:"/chat",element:p.jsx(hIe,{})}),p.jsx(Dn,{path:"/profile",element:p.jsx(fIe,{})}),p.jsx(Dn,{path:"*",element:p.jsx(pIe,{})})]})})})})})})]})]})}function _Ie(){return g.useEffect(()=>{aX()},[]),p.jsx(EW,{children:p.jsx(Xre,{client:mIe,children:p.jsx(ate,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:p.jsxs(T$,{children:[p.jsx(rte,{}),p.jsx(jte,{}),p.jsx(r_e,{children:p.jsx(v_e,{children:p.jsx(s_e,{children:p.jsx(w_e,{children:p.jsx(F5,{children:p.jsx(JSe,{children:p.jsx(zEe,{children:p.jsx(XSe,{children:p.jsx(ZSe,{children:p.jsx(eIe,{children:p.jsx(u7,{children:p.jsx(vIe,{})})})})})})})})})})})})]})})})})}const wIe=Jt.isNativePlatform();LU(document.getElementById("root")).render(p.jsx(_Ie,{}));const TIe=t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available, please refresh."),confirm("A new version of the app is available. Reload?")&&e.postMessage({type:"SKIP_WAITING"}))})}},EIe=async()=>{wIe?console.log("Running in native Capacitor environment"):"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t),TIe(t),navigator.serviceWorker.oncontrollerchange=()=>{console.log("Controller changed. Reloading page for new content."),window.location.reload()};const[e,n,r]=await Promise.all([qt(()=>Promise.resolve().then(()=>GEe),void 0),qt(()=>import("./notificationScheduler-gsjWrlAI.js"),[]),qt(()=>Promise.resolve().then(()=>qSe),void 0)]);await e.offlineSync.init(),navigator.serviceWorker.addEventListener("message",i=>{i.data.type==="NOTIFICATION_ACTION"&&window.dispatchEvent(new CustomEvent("notification-action",{detail:{action:i.data.action,data:i.data.notificationData}}))})}catch(t){console.log("SW registration failed: ",t)}}),["click","keydown","scroll","touchstart"].forEach(t=>{document.addEventListener(t,()=>{},{passive:!0})}))};EIe();export{tO as $,Y5 as A,Ci as B,X0 as C,iCe as D,oCe as E,On as F,fa as G,ebe as H,Ws as I,e_e as J,t_e as K,uc as L,BZ as M,n_e as N,lee as O,Z0 as P,Fpe as Q,nl as R,D9 as S,LSe as T,D4 as U,rl as V,lbe as W,vh as X,gb as Y,hI as Z,G as _,dK as a,T_e as a$,R4 as a0,mb as a1,sg as a2,Bo as a3,ibe as a4,nbe as a5,rbe as a6,fm as a7,pm as a8,gm as a9,wZ as aA,J5 as aB,lW as aC,YT as aD,JT as aE,cW as aF,obe as aG,WEe as aH,zR as aI,see as aJ,aee as aK,wL as aL,EZ as aM,zIe as aN,fI as aO,pI as aP,Zs as aQ,je as aR,Pw as aS,x4 as aT,ai as aU,JIe as aV,Ct as aW,XIe as aX,we as aY,gX as aZ,S_e as a_,Ho as aa,qs as ab,Gs as ac,Qs as ad,Ys as ae,cbe as af,ZIe as ag,XTe as ah,ZTe as ai,c9 as aj,zy as ak,Sm as al,$Ie as am,vee as an,eO as ao,BIe as ap,Eu as aq,uW as ar,GT as as,QT as at,dW as au,DT as av,U9 as aw,W9 as ax,Md as ay,ou as az,Db as b,$l as b$,OT as b0,C6 as b1,Hpe as b2,Vpe as b3,Bpe as b4,uZ as b5,jIe as b6,VIe as b7,Os as b8,mZ as b9,uge as bA,Gr as bB,fo as bC,Be as bD,dge as bE,SIe as bF,E2 as bG,ote as bH,Z1 as bI,tbe as bJ,hX as bK,q0 as bL,Eh as bM,Fw as bN,oi as bO,AR as bP,bR as bQ,VT as bR,FT as bS,yh as bT,pk as bU,mk as bV,FX as bW,mn as bX,LT as bY,fk as bZ,Am as b_,abe as ba,O4 as bb,OZ as bc,AZ as bd,Tee as be,zn as bf,ere as bg,Fc as bh,oO as bi,nee as bj,ZZ as bk,sO as bl,M4 as bm,AIe as bn,Kb as bo,qt as bp,ia as bq,Wd as br,cd as bs,gr as bt,so as bu,Ae as bv,Ph as bw,JD as bx,yL as by,lge as bz,Ge as c,vEe as c0,go as c1,_k as c2,Jt as c3,Oo as c4,X3 as c5,Ns as c6,zue as c7,NT as c8,MIe as c9,Lb as d,po as e,ca as f,la as g,mo as h,dt as i,p as j,X5 as k,k4 as l,ht as m,QW as n,w9 as o,T9 as p,pe as q,g as r,LR as s,fW as t,Fh as u,pW as v,mW as w,gW as x,L9 as y,ek as z};
