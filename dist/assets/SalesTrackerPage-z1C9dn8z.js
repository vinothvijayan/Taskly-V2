import{c as pe,s as Fe,j as e,m as Ce,T as ct,a as dt,b as Qe,d as Ge,P as je,C as Cs,U as ce,e as te,f as ae,g as le,h as ne,B as y,k as Re,r as g,A as Ue,l as He,n as _e,S as ge,o as Oe,p as L,X as ys,L as Me,M as mt,q as de,t as ts,u as as,v as me,w as ls,x as ye,I as qe,y as ks,D as ns,z as is,E as Ss,F as Ds,G as Is,H as Fs,J as ht,K as Ts,N as xt,O as ut,Q as ft,R as gt,V as Ms,W as As,Y as we,Z as ee,_ as se,$ as pt,a0 as jt,a1 as Nt,a2 as Ke,a3 as bt,a4 as vt,a5 as We,a6 as wt,a7 as Ct,a8 as yt}from"./index-C20fHVmm.js";import{T as kt,a as St,b as xs,c as X,d as Dt,e as Z,r as It,u as $e,w as Ft}from"./xlsx-DZrnJ2o3.js";import{f as P}from"./format-CcypP5ZI.js";import{T as Ls}from"./trending-up-Dc2fOQoQ.js";import{T as Tt}from"./textarea-DJZO54Po.js";import{S as Mt}from"./send-5UL8mSPm.js";import{S as At,A as Ps,a as $s,b as Es,c as Os,d as zs,e as Rs,f as Us,g as Hs}from"./alert-dialog-CR5ji12a.js";import{S as _s}from"./save-DRoTLn0j.js";import{C as qs}from"./calendar-BvZK3pUK.js";import{S as ze}from"./separator-BDnYhoo8.js";import{D as rs,a as os,b as Lt,c as Pt,d as $t,e as Et,f as Ot,g as zt,F as Rt}from"./drawer-gB5Jcqpd.js";import{u as Bs,a as Vs,P as Qs,D as Gs,b as Ut,c as Be,S as Ks,v as Ws,C as Ys}from"./sortable.esm-Cydrjq7h.js";import{D as Ht}from"./download-UVAAmKOw.js";import{S as us,a as _t,C as qt}from"./skeletons-Bb8mVUWj.js";import{R as Js,a as Te,b as Ze}from"./resizable-VLfMrKzG.js";import{U as fs,F as Bt}from"./upload-DzLu9PLr.js";import"./subDays-BYudXbBI.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qt=pe("arrow-right",Vt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],Kt=pe("chevrons-right",Gt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yt=pe("circle-play",Wt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Xt=pe("hash",Jt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ea=pe("phone-call",Zt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],ta=pe("phone-off",sa);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],la=pe("user-check",aa),na=()=>({interested:0,notInterested:0,followUp:0,callback:0,notPicked:0,sendDetails:0,totalCalls:0,duration:0}),Ye=(s,t)=>{const n={};let a=0,i=0,l=0;return s.forEach(h=>{h.callHistory.forEach(d=>{if(t!=="all"&&d.type!==t)return;const x=P(Fe(new Date(d.timestamp)),"yyyy-MM-dd");n[x]||(n[x]=na());const o=n[x];switch(o.totalCalls+=1,o.duration+=d.duration,a+=1,l+=d.duration,d.feedback){case"Interested":o.interested+=1,i+=1;break;case"Not Interested":o.notInterested+=1;break;case"Follow Up":o.followUp+=1;break;case"Callback":o.callback+=1;break;case"Not Picked":o.notPicked+=1;break;case"Send Details":o.sendDetails+=1;break}})}),{totalCalls:a,interested:i,totalDuration:l,avgDuration:a>0?Math.round(l/a):0,tableData:n}},Pe=({title:s,value:t,subValue:n,icon:a,color:i})=>e.jsxs(te,{className:"shadow-sm border-2",children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(le,{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx("div",{className:`p-2 rounded-full bg-opacity-10 ${i.replace("text-","bg-")}`,children:e.jsx(a,{className:`h-4 w-4 ${i}`})})]}),e.jsxs(ne,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),n&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})]}),gs=s=>{const t=Math.floor(s/3600),n=Math.floor(s%3600/60),a=s%60;return[t,n,a].map(i=>i.toString().padStart(2,"0")).join(":")},Je=({data:s,onDateClick:t,onDeleteDate:n})=>{const a=Object.keys(s.tableData).sort((i,l)=>new Date(l).getTime()-new Date(i).getTime());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Pe,{title:"Total Calls",value:s.totalCalls.toString(),icon:je,color:"text-blue-500"}),e.jsx(Pe,{title:"Interested",value:s.interested.toString(),subValue:`${s.totalCalls>0?(s.interested/s.totalCalls*100).toFixed(1):0}%`,icon:Ls,color:"text-green-500"}),e.jsx(Pe,{title:"Total Duration",value:gs(s.totalDuration),icon:Cs,color:"text-purple-500"}),e.jsx(Pe,{title:"Avg Duration",value:`${Math.round(s.avgDuration/60)}m ${s.avgDuration%60}s`,icon:ce,color:"text-orange-500"})]}),e.jsxs(te,{className:"shadow-sm",children:[e.jsx(ae,{children:e.jsx(le,{className:"text-lg",children:"Daily Call Summary"})}),e.jsx(ne,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(kt,{children:[e.jsx(St,{children:e.jsxs(xs,{className:"bg-muted/50",children:[e.jsx(X,{className:"font-semibold",children:"Date"}),e.jsx(X,{className:"text-center font-semibold",children:"Interested"}),e.jsx(X,{className:"text-center font-semibold",children:"Not Interested"}),e.jsx(X,{className:"text-center font-semibold",children:"Follow Up"}),e.jsx(X,{className:"text-center font-semibold",children:"Send Details"}),e.jsx(X,{className:"text-center font-semibold",children:"Callback"}),e.jsx(X,{className:"text-center font-semibold",children:"Not Picked"}),e.jsx(X,{className:"text-center font-bold",children:"Total Calls"}),e.jsx(X,{className:"text-right font-semibold",children:"Duration"}),e.jsx(X,{className:"text-center font-semibold",children:"Actions"})]})}),e.jsx(Dt,{children:a.map(i=>{const l=s.tableData[i];return e.jsxs(xs,{className:"hover:bg-muted/50 transition-colors",children:[e.jsx(Z,{onClick:()=>t(i),className:"cursor-pointer font-medium",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-7 rounded-md bg-green-50 text-green-700 dark:bg-green-950 dark:text-green-300 font-medium",children:l.interested})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-7 rounded-md bg-red-50 text-red-700 dark:bg-red-950 dark:text-red-300 font-medium",children:l.notInterested})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-7 rounded-md bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300 font-medium",children:l.followUp})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-7 rounded-md bg-indigo-50 text-indigo-700 dark:bg-indigo-950 dark:text-indigo-300 font-medium",children:l.sendDetails})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-7 rounded-md bg-yellow-50 text-yellow-700 dark:bg-yellow-950 dark:text-yellow-300 font-medium",children:l.callback})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-7 rounded-md bg-gray-50 text-gray-700 dark:bg-gray-900 dark:text-gray-300 font-medium",children:l.notPicked})}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{className:"font-bold text-lg",children:l.totalCalls})}),e.jsx(Z,{className:"text-right font-medium",children:gs(l.duration)}),e.jsx(Z,{className:"text-center",children:e.jsx(y,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>n(i,l.totalCalls),children:e.jsx(Re,{className:"h-4 w-4"})})})]},i)})})]})})})]})]})},ia=({contacts:s,onDateClick:t,onDeleteDate:n})=>{const a=Ye(s,"New Call"),i=Ye(s,"Follow-up"),l=Ye(s,"all");return e.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(ct,{defaultValue:"new-calls",className:"space-y-6",children:[e.jsxs(dt,{className:"grid w-full grid-cols-3 md:w-auto md:inline-grid bg-muted p-1 h-auto",children:[e.jsx(Qe,{value:"new-calls",className:"px-6 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"New Calls"}),e.jsx(Qe,{value:"follow-up",className:"px-6 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"Follow-up Calls"}),e.jsx(Qe,{value:"consolidated",className:"px-6 py-2.5 data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"Consolidated Report"})]}),e.jsx(Ge,{value:"new-calls",children:e.jsx(Je,{data:a,onDateClick:h=>t(h,"New Call"),onDeleteDate:n})}),e.jsx(Ge,{value:"follow-up",children:e.jsx(Je,{data:i,onDateClick:h=>t(h,"Follow-up"),onDeleteDate:n})}),e.jsx(Ge,{value:"consolidated",children:e.jsx(Je,{data:l,onDateClick:h=>t(h,"all"),onDeleteDate:n})})]})})},ps=s=>{switch(s){case"Interested":return e.jsx(L,{className:"bg-green-100 text-green-800 border-green-200",children:"Interested"});case"Follow Up":return e.jsx(L,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Follow-up"});case"Callback":return e.jsx(L,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Callback"});case"Send Details":return e.jsx(L,{className:"bg-indigo-100 text-indigo-800 border-indigo-200",children:"Send Details"});case"Not Interested":return e.jsx(L,{variant:"destructive",children:"Not Interested"});case"Not Picked":return e.jsx(L,{variant:"outline",children:"Not Picked"});default:return e.jsx(L,{variant:"secondary",children:s})}},ra=s=>{const t=Math.floor(s/60),n=s%60;return`${t}m ${n.toString().padStart(2,"0")}s`},Ee=({contact:s,onUpdateCallLogMessage:t,onMarkAsSent:n})=>{const[a,i]=g.useState(null),[l,h]=g.useState(!1);if(!s)return null;const d=s.callHistory?Object.values(s.callHistory).sort((u,f)=>new Date(f.timestamp).getTime()-new Date(u.timestamp).getTime()):[],x=u=>u.split(" ").map(f=>f[0]).join("").toUpperCase(),o=async()=>{!a||!s||(h(!0),await t(s.id,a.originalIndex,a.content),h(!1),i(null))};return e.jsxs("div",{className:"p-4 md:p-6 flex-1 flex flex-col bg-background overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 flex-shrink-0",children:[e.jsx(Ue,{className:"h-16 w-16 border",children:e.jsx(He,{className:"text-2xl bg-muted",children:x(s.name)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.name}),e.jsxs("p",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),s.phone]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"md:w-1/3 space-y-4 flex-shrink-0",children:[e.jsxs(te,{className:"shadow-sm",children:[e.jsx(ae,{children:e.jsx(le,{className:"text-base",children:"Key Info"})}),e.jsxs(ne,{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"Status"]}),ps(s.status)]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Total Calls"]}),e.jsx("span",{className:"font-medium",children:s.callCount})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"Last Contact"]}),e.jsx("span",{className:"font-medium text-right",children:P(new Date(s.lastContacted),"PP")})]})]})]}),s.status==="Send Details"&&e.jsx(Ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(te,{className:"shadow-sm bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:[e.jsx(ae,{children:e.jsx(le,{className:"text-base text-blue-800 dark:text-blue-300",children:"Action Required"})}),e.jsxs(ne,{children:[e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-4",children:"This contact is waiting for details to be sent."}),e.jsxs(y,{onClick:()=>n(s.id),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Mark Details as Sent"]})]})]})})]}),e.jsxs("div",{className:"md:w-2/3 flex flex-col overflow-hidden min-h-0",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 flex-shrink-0",children:"Call History"}),e.jsx(ge,{className:"flex-1 -mr-6 pr-6",children:e.jsxs("div",{className:"relative pl-8 border-l-2 border-dashed border-border",children:[e.jsx(Oe,{children:d.map((u,f)=>e.jsxs(Ce.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3,delay:f*.05},className:"relative mb-8",children:[e.jsx("div",{className:"absolute -left-[calc(0.5rem+1px)] top-1 h-4 w-4 rounded-full bg-primary ring-4 ring-background"}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ps(u.feedback),u.type==="New Call"&&e.jsx(L,{variant:"outline",className:"border-green-500 text-green-600",children:"New Call"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:P(new Date(u.timestamp),"PP, p")})]}),(a==null?void 0:a.originalIndex)!==u.originalIndex&&e.jsx(y,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>i({originalIndex:u.originalIndex,content:u.message}),children:e.jsx(At,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[(a==null?void 0:a.originalIndex)===u.originalIndex?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Tt,{value:a.content,onChange:v=>i({...a,content:v.target.value}),className:"text-sm",rows:3,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>i(null),disabled:l,children:[e.jsx(ys,{className:"h-4 w-4 mr-1"})," Cancel"]}),e.jsxs(y,{size:"sm",onClick:o,disabled:l,children:[l?e.jsx(Me,{className:"h-4 w-4 animate-spin"}):e.jsx(_s,{className:"h-4 w-4 mr-1"})," Save"]})]})]}):u.message&&e.jsxs("p",{className:"text-sm text-muted-foreground italic bg-muted/30 p-3 rounded-md border",children:['"',u.message,'"']}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[u.spokenToName&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(la,{className:"h-3 w-3"})," Spoke to: ",e.jsx("span",{className:"font-medium text-foreground",children:u.spokenToName})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Cs,{className:"h-3 w-3"})," Duration: ",e.jsx("span",{className:"font-medium text-foreground",children:ra(u.duration)})]})]})]})]})]},u.originalIndex))}),d.length===0&&e.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[e.jsx(mt,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"No call history recorded for this contact."})]})]})})]})]})]})},js=["Interested","Not Interested","Follow Up","Callback","Not Picked","Send Details"],Ns=({filters:s,onFiltersChange:t})=>{var i;const n=l=>{t({...s,dateRange:l})},a=(l,h,d)=>{const x=s[l],o=d?[...x,h]:x.filter(u=>u!==h);t({...s,[l]:o})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(de,{className:"font-medium text-xs",children:"Date Range"}),e.jsxs(ts,{children:[e.jsx(as,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:me("w-full justify-start text-left font-normal mt-1",!s.dateRange&&"text-muted-foreground"),children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),(i=s.dateRange)!=null&&i.from?s.dateRange.to?e.jsxs(e.Fragment,{children:[P(s.dateRange.from,"LLL dd")," - ",P(s.dateRange.to,"LLL dd")]}):P(s.dateRange.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(ls,{className:"w-auto p-0",align:"start",children:e.jsx(qs,{initialFocus:!0,mode:"range",selected:s.dateRange,onSelect:n,numberOfMonths:1})})]})]}),e.jsx(ze,{}),e.jsxs("div",{children:[e.jsx(de,{className:"font-medium text-xs",children:"Initial Call Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:js.map(l=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{id:`initial-${l}`,checked:s.initialCallFeedback.includes(l),onCheckedChange:h=>a("initialCallFeedback",l,!!h)}),e.jsx("label",{htmlFor:`initial-${l}`,className:"text-sm",children:l})]},`initial-${l}`))})]}),e.jsx(ze,{}),e.jsxs("div",{children:[e.jsx(de,{className:"font-medium text-xs",children:"Follow-up Call Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:js.map(l=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{id:`followup-${l}`,checked:s.followUpCallFeedback.includes(l),onCheckedChange:h=>a("followUpCallFeedback",l,!!h)}),e.jsx("label",{htmlFor:`followup-${l}`,className:"text-sm",children:l})]},`followup-${l}`))})]})]})};function oa({open:s,onOpenChange:t,onConfirm:n,logDetails:a}){const[i,l]=g.useState(""),h=i!=="Delete This",d=()=>{n(),l("")},x=o=>{o||l(""),t(o)};return a?e.jsx(Ps,{open:s,onOpenChange:x,children:e.jsxs($s,{children:[e.jsxs(Es,{children:[e.jsx(Os,{children:"Are you absolutely sure?"}),e.jsxs(zs,{children:["This action cannot be undone. This will permanently delete the call log for",e.jsxs("strong",{children:[" ",a.contactName]})," from",e.jsxs("strong",{children:[" ",P(new Date(a.log.timestamp),"PP")]}),"."]})]}),e.jsxs("div",{className:"space-y-2 my-4",children:[e.jsx(de,{htmlFor:"delete-confirm",children:'To confirm, type "Delete This" below:'}),e.jsx(qe,{id:"delete-confirm",value:i,onChange:o=>l(o.target.value),autoComplete:"off"})]}),e.jsxs(Rs,{children:[e.jsx(Us,{children:"Cancel"}),e.jsx(Hs,{onClick:d,disabled:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}):null}function Xs({open:s,onOpenChange:t,onConfirm:n,itemCount:a,itemName:i}){const[l,h]=g.useState(""),d=l!=="Delete This",x=()=>{n(),h("")},o=u=>{u||h(""),t(u)};return a===0?null:e.jsx(Ps,{open:s,onOpenChange:o,children:e.jsxs($s,{children:[e.jsxs(Es,{children:[e.jsx(Os,{children:"Are you absolutely sure?"}),e.jsxs(zs,{children:["This action cannot be undone. This will permanently delete",e.jsxs("strong",{children:[" ",a," selected ",i]}),"."]})]}),e.jsxs("div",{className:"space-y-2 my-4",children:[e.jsx(de,{htmlFor:"delete-confirm",children:'To confirm, type "Delete This" below:'}),e.jsx(qe,{id:"delete-confirm",value:l,onChange:u=>h(u.target.value),autoComplete:"off"})]}),e.jsxs(Rs,{children:[e.jsx(Us,{children:"Cancel"}),e.jsx(Hs,{onClick:x,disabled:d,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})}const ca=s=>{switch(s){case"Interested":return e.jsx(L,{className:"bg-green-100 text-green-800",children:"Interested"});case"Follow Up":return e.jsx(L,{className:"bg-blue-100 text-blue-800",children:"Follow-up"});case"Callback":return e.jsx(L,{className:"bg-yellow-100 text-yellow-800",children:"Callback"});case"Send Details":return e.jsx(L,{className:"bg-indigo-100 text-indigo-800",children:"Send Details"});case"Not Interested":return e.jsx(L,{variant:"destructive",children:"Not Interested"});case"Not Picked":return e.jsx(L,{variant:"outline",children:"Not Picked"});default:return e.jsx(L,{variant:"secondary",children:s})}},Zs=({call:s,isOverlay:t=!1,onSelectContact:n,isSelected:a,onDelete:i})=>e.jsxs("div",{className:me("w-full text-left p-3 rounded-lg border bg-background shadow-sm relative group",t?"cursor-grabbing":"cursor-grab",!t&&"hover:bg-muted/50 transition-colors",a&&"ring-2 ring-primary border-primary"),children:[i&&e.jsx(y,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",onClick:l=>{l.stopPropagation(),i()},children:e.jsx(Re,{className:"h-3.5 w-3.5"})}),e.jsxs("div",{onClick:()=>n&&n(s.contact),children:[a&&e.jsx(xt,{className:"h-4 w-4 text-white bg-primary rounded-full absolute -top-1.5 -left-1.5"}),e.jsxs("p",{className:"font-medium text-sm flex items-center gap-2 pr-6",children:[e.jsx(ut,{className:"h-3.5 w-3.5"})," ",s.contact.name]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1.5 flex items-center gap-2",children:[e.jsx(je,{className:"h-3 w-3"})," ",s.contact.phone]})]})]}),da=({call:s,onSelectContact:t,onToggleSelect:n,isSelected:a,onDelete:i})=>{const{attributes:l,listeners:h,setNodeRef:d,transform:x,transition:o,isDragging:u}=Be({id:s.log.originalIndex}),f={transform:Ys.Transform.toString(x),transition:o};return e.jsx("div",{ref:d,style:f,...l,...h,className:me(u&&"opacity-50"),onClick:()=>n(s.log.originalIndex),children:e.jsx(Zs,{call:s,onSelectContact:t,isSelected:a,onDelete:i})})},ma=({feedback:s,calls:t,onSelectContact:n,onToggleSelect:a,selectedLogIds:i,onDelete:l})=>{const{setNodeRef:h}=Be({id:s});return e.jsxs("div",{ref:h,className:"w-72 flex-shrink-0 bg-muted/30 rounded-lg p-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-shrink-0",children:[ca(s),e.jsxs("span",{className:"font-semibold text-sm text-muted-foreground",children:["(",t.length,")"]})]}),e.jsx(Ks,{items:t.map(d=>d.log.originalIndex),strategy:Ws,children:e.jsx("div",{className:"space-y-2",children:t.map(d=>e.jsx(da,{call:d,onSelectContact:n,onToggleSelect:a,isSelected:i.has(d.log.originalIndex),onDelete:()=>l(d)},d.log.originalIndex))})})]})},bs=({data:s,onSelectContact:t,onUpdateCallLogFeedback:n,onDeleteCallLog:a,onDeleteMultipleCallLogs:i})=>{const[l,h]=g.useState({}),[d,x]=g.useState(null),[o,u]=g.useState(new Set),[f,v]=g.useState(null),[$,I]=g.useState(!1),{addOpportunitiesFromContacts:U}=Fs();g.useEffect(()=>{if(s){const k=s.calls.reduce((D,C)=>{const{feedback:z}=C.log;return D[z]||(D[z]=[]),D[z].push(C),D},{});h(k),u(new Set)}},[s]);const H=Bs(Vs(Qs,{activationConstraint:{distance:10}})),S=k=>Object.keys(l).find(D=>l[D].some(C=>C.log.originalIndex===k)),A=k=>{const{active:D}=k,C=D.id,z=S(C);if(z){const E=l[z].find(_=>_.log.originalIndex===C);x(E||null)}},B=k=>{const{active:D,over:C}=k;if(x(null),!C)return;const z=D.id,E=C.id,_=S(z),w=xe.includes(E)?E:S(E);if(!_||!w||_===w)return;const b=l[_].find(O=>O.log.originalIndex===z);if(!b)return;h(O=>{const V={...O};return V[_]=V[_].filter(Y=>Y.log.originalIndex!==z),V[w]||(V[w]=[]),V[w]=[...V[w],b],V});const F=w;n(b.contact.id,b.log.originalIndex,F)},Q=k=>{u(D=>{const C=new Set(D);return C.has(k)?C.delete(k):C.add(k),C})},ke=()=>{if(o.size===0||!s)return;const k=s.calls.filter(C=>o.has(C.log.originalIndex)).map(C=>C.contact),D=Array.from(new Map(k.map(C=>[C.id,C])).values());U(D),u(new Set)},he=()=>{f&&(a(f.contact.id,f.log.originalIndex),v(null))},ie=()=>{if(o.size===0||!s)return;const k=s.calls.filter(D=>o.has(D.log.originalIndex)).map(D=>({contactId:D.contact.id,logId:D.log.originalIndex}));i(k),u(new Set),I(!1)},W=g.useMemo(()=>s?new Set(s.calls.map(k=>k.log.originalIndex)):new Set,[s]),Ne=()=>{o.size===W.size?u(new Set):u(W)},xe=["Interested","Follow Up","Callback","Not Interested","Not Picked","Send Details"];return e.jsxs(e.Fragment,{children:[e.jsxs(Gs,{sensors:H,onDragStart:A,onDragEnd:B,children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs(ge,{className:"h-full w-full",children:[e.jsx("div",{className:"flex space-x-4 pb-4",children:xe.map(k=>e.jsx(ma,{feedback:k,calls:l[k]||[],onSelectContact:t,onToggleSelect:Q,selectedLogIds:o,onDelete:v},k))}),e.jsx(ht,{orientation:"horizontal"})]}),e.jsx(Ut,{children:d?e.jsx(Zs,{call:d,isOverlay:!0}):null})]}),s&&s.calls.length>0&&e.jsxs("div",{className:"flex-shrink-0 p-4 border-t bg-background flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:Ne,children:o.size===W.size?"Deselect All":"Select All"}),e.jsxs("span",{className:"text-sm font-medium",children:[o.size," log(s) selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{onClick:()=>I(!0),disabled:o.size===0,variant:"destructive",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Delete Selected"]}),e.jsxs(y,{onClick:ke,disabled:o.size===0,children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add to Opportunities"]})]})]})]}),e.jsx(oa,{open:!!f,onOpenChange:k=>!k&&v(null),onConfirm:he,logDetails:f?{contactName:f.contact.name,log:f.log}:null}),e.jsx(Xs,{open:$,onOpenChange:I,onConfirm:ie,itemCount:o.size,itemName:"call logs"})]})},ha=s=>{const{isOpen:t,onOpenChange:n,data:a}=s;return ks()?e.jsx(rs,{open:t,onOpenChange:n,children:e.jsxs(os,{className:"p-4 h-[85vh] flex flex-col",children:[e.jsxs(Lt,{className:"flex-shrink-0 text-left",children:[e.jsxs(Pt,{children:["Call Details for ",a?P(new Date(a.date),"MMMM d, yyyy"):""]}),e.jsx($t,{children:"Drag and drop contacts to update their status. Tap to select."})]}),e.jsx(bs,{...s})]})}):e.jsx(ns,{open:t,onOpenChange:n,children:e.jsxs(is,{className:"max-w-[95vw] w-full h-[85vh] flex flex-col",children:[e.jsxs(Ss,{className:"flex-shrink-0",children:[e.jsxs(Ds,{children:["Call Details for ",a?P(new Date(a.date),"MMMM d, yyyy"):""]}),e.jsx(Is,{children:"Drag and drop contacts between columns to update their status. Click to select."})]}),e.jsx(bs,{...s})]})})},et=["Interested","Not Interested","Follow Up","Callback","Not Picked","Send Details"],xa=["New Contact",...et],ua=({open:s,onOpenChange:t,onExport:n})=>{var o,u;const[a,i]=g.useState({dateRange:void 0,initialCallFeedback:[],followUpCallFeedback:[]}),l=f=>{i(v=>({...v,dateRange:f}))},h=(f,v,$)=>{i(I=>{const U=I[f];return $?{...I,[f]:[...U,v]}:{...I,[f]:U.filter(H=>H!==v)}})},d=()=>{n(a),t(!1)},x=()=>{i({dateRange:void 0,initialCallFeedback:[],followUpCallFeedback:[]})};return e.jsx(ns,{open:s,onOpenChange:t,children:e.jsxs(is,{className:"sm:max-w-lg",children:[e.jsxs(Ss,{children:[e.jsx(Ds,{children:"Export Contacts to Excel"}),e.jsx(Is,{children:"Select filters to refine the contact list for your export."})]}),e.jsxs("div",{className:"py-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx(de,{className:"font-medium",children:"Date Range"}),e.jsxs(ts,{children:[e.jsx(as,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:me("w-full justify-start text-left font-normal mt-2",!a.dateRange&&"text-muted-foreground"),children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),(o=a.dateRange)!=null&&o.from?a.dateRange.to?e.jsxs(e.Fragment,{children:[P(a.dateRange.from,"LLL dd, y")," -"," ",P(a.dateRange.to,"LLL dd, y")]}):P(a.dateRange.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(ls,{className:"w-auto p-0",align:"start",children:e.jsx(qs,{initialFocus:!0,mode:"range",defaultMonth:(u=a.dateRange)==null?void 0:u.from,selected:a.dateRange,onSelect:l,numberOfMonths:2})})]})]}),e.jsx(ze,{}),e.jsxs("div",{children:[e.jsx(de,{className:"font-medium",children:"Initial Call Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:xa.map(f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{id:`export-initial-${f}`,checked:a.initialCallFeedback.includes(f),onCheckedChange:v=>h("initialCallFeedback",f,!!v)}),e.jsx("label",{htmlFor:`export-initial-${f}`,className:"text-sm font-medium leading-none",children:f==="New Contact"?"New (Never Called)":f})]},`initial-${f}`))})]}),e.jsx(ze,{}),e.jsxs("div",{children:[e.jsx(de,{className:"font-medium",children:"Follow-up Call Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:et.map(f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{id:`export-followup-${f}`,checked:a.followUpCallFeedback.includes(f),onCheckedChange:v=>h("followUpCallFeedback",f,!!v)}),e.jsx("label",{htmlFor:`export-followup-${f}`,className:"text-sm font-medium leading-none",children:f})]},`followup-${f}`))})]})]}),e.jsxs(ft,{children:[e.jsxs(y,{variant:"outline",onClick:x,children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Clear"]}),e.jsxs(y,{onClick:d,children:[e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})},fa=({liveCallData:s,onUpdateCallLogMessage:t,onMarkAsSent:n,onFinishSession:a})=>{const[i,l]=g.useState(!1);if(!s)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(je,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),e.jsx("h3",{className:"text-xl font-semibold",children:"No Active Call"}),e.jsx("p",{className:"text-sm",children:"Live call details will appear here when a call is initiated from the Sales Dialer app."})]})});const{status:h,currentContact:d,nextContact:x,queuePosition:o}=s,u=v=>v.split(" ").map($=>$[0]).join("").toUpperCase(),f=async()=>{l(!0),await a()};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsxs(te,{className:"w-full max-w-md shadow-2xl border-2 border-red-500 animate-pulse-glow-destructive",children:[e.jsx(ae,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500 animate-ping"}),e.jsx(le,{className:"text-2xl font-bold",children:"Live Call in Progress"})]})}),e.jsxs(ne,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 rounded-lg bg-muted/30",children:[e.jsx(L,{variant:h==="calling"?"destructive":"secondary",className:"animate-pulse",children:h==="calling"?"Calling Now":"Countdown..."}),e.jsx(Ue,{className:"h-24 w-24 border-4 border-muted",children:e.jsx(He,{className:"text-3xl",children:u(d.name)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:d.name}),e.jsx("p",{className:"text-lg text-muted-foreground text-center",children:d.phone})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{children:[e.jsx(ae,{className:"pb-2",children:e.jsxs(le,{className:"text-base flex items-center gap-2",children:[e.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"}),"Up Next"]})}),e.jsx(ne,{children:x?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.phone})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last contact in the queue."})})]}),e.jsxs(te,{children:[e.jsx(ae,{className:"pb-2",children:e.jsxs(le,{className:"text-base flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"}),"Queue Position"]})}),e.jsx(ne,{children:e.jsx("p",{className:"font-medium",children:o})})]})]})]}),e.jsx(gt,{children:e.jsxs(y,{variant:"destructive",className:"w-full",onClick:f,disabled:i,children:[i?e.jsx(Me,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(ta,{className:"mr-2 h-4 w-4"}),"Finish Session"]})})]})}),e.jsx("div",{className:"h-full overflow-hidden rounded-lg border bg-background shadow-sm",children:e.jsx(Ee,{contact:d,onUpdateCallLogMessage:t,onMarkAsSent:n})})]})},Xe=20,ga=({id:s,contact:t,children:n,onRemove:a})=>{const{attributes:i,listeners:l,setNodeRef:h,transform:d,transition:x}=Be({id:s}),o={transform:Ys.Transform.toString(d),transition:x};return e.jsxs("div",{ref:h,style:o,...i,...l,className:"flex items-center gap-3 p-2 rounded-lg bg-muted/50 border cursor-grab",children:[n,e.jsx(y,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>a(s),children:e.jsx(Re,{className:"h-4 w-4"})})]})},vs=({contact:s,isSelected:t,onToggle:n,onAdd:a})=>{const{attributes:i,listeners:l,setNodeRef:h}=Be({id:s.id}),d=x=>x.split(" ").map(o=>o[0]).join("").toUpperCase();return e.jsxs("div",{ref:h,...i,...l,className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 cursor-pointer",onClick:()=>a(s),children:[e.jsx(ye,{id:`contact-${s.id}`,checked:t,onCheckedChange:()=>n(s.id),onClick:x=>x.stopPropagation()}),e.jsxs("label",{htmlFor:`contact-${s.id}`,className:"flex items-center gap-3 cursor-pointer flex-1",children:[e.jsx(Ue,{className:"h-10 w-10 border",children:e.jsx(He,{children:d(s.name)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.phone})]})]})]})},pa=({contacts:s,onSaveImportedContacts:t})=>{const{user:n}=Ms(),{toast:a}=As(),[i,l]=g.useState(""),[h,d]=g.useState(new Set),[x,o]=g.useState([]),[u,f]=g.useState(!1),[v,$]=g.useState([]),[I,U]=g.useState(!1),H=g.useRef(null),[S,A]=g.useState(Xe),B=Bs(Vs(Qs,{activationConstraint:{distance:10}})),Q=g.useMemo(()=>{const c=new Set(x.map(b=>b.id)),w=new Set(v.map(b=>b.id));return s.filter(b=>!c.has(b.id)&&!w.has(b.id)&&(b.name.toLowerCase().includes(i.toLowerCase())||b.phone.includes(i)))},[s,x,v,i]),ke=g.useMemo(()=>Q.slice(0,S),[Q,S]);g.useEffect(()=>{A(Xe)},[i]);const he=c=>{d(w=>{const b=new Set(w);return b.has(c)?b.delete(c):b.add(c),b})},ie=()=>{const w=[...s,...v].filter(F=>h.has(F.id)),b=[...x];w.forEach(F=>{b.some(O=>O.id===F.id)||b.push(F)}),o(b),d(new Set),a({title:`${w.length} contact(s) added to queue.`})},W=c=>{x.some(w=>w.id===c.id)||o(w=>[...w,c])},Ne=c=>{o(w=>w.filter(b=>b.id!==c))},xe=async()=>{if(!(!n||x.length===0)){f(!0);try{const c={};c[`dialingQueue/${n.uid}`]=x,c["dialerBridge/activeWebUser"]=n.uid,await we(ee(se),c),a({title:"Dialing Queue Sent!",description:"Open the Sales Dialer app and press 'Start Dialing' to begin."}),o([])}catch(c){console.error("Failed to send dialing queue:",c),a({title:"Failed to send queue",variant:"destructive"})}finally{f(!1)}}},k=c=>{const{active:w,over:b}=c;if(!b)return;const F=String(w.id),O=String(b.id),Y=[...Q,...v].find(G=>G.id===F);Y&&(b.id==="call-queue-droppable"||x.some(G=>G.id===O))&&(x.some(G=>G.id===F)||o(G=>[...G,Y]))},D=c=>{var F;const w=(F=c.target.files)==null?void 0:F[0];if(!w)return;const b=new FileReader;b.onload=O=>{var ue;const V=(ue=O.target)==null?void 0:ue.result,Y=It(V,{type:"binary"}),G=Y.SheetNames[0],Ve=Y.Sheets[G],be=$e.sheet_to_json(Ve),Ae=new Set;let Se=0;const De=[];be.forEach(re=>{const fe=String(re.Phone||re.phone||re["Phone Number"]||"").trim(),Le=String(re.Name||re.name||"Unknown").trim();if(!(!fe||!Le)){if(Ae.has(fe)){Se++;return}Ae.add(fe),De.push({id:fe,name:Le,phone:fe,callHistory:[],status:"New",lastContacted:new Date().toISOString(),callCount:0})}}),$(De),a({title:"Import Complete",description:`${De.length} unique contacts loaded from file. ${Se>0?`${Se} duplicates within the file were ignored.`:""}`})},b.readAsBinaryString(w),H.current&&(H.current.value="")},C=async()=>{U(!0);try{await t(v),$([])}catch(c){console.error("Caught error from onSaveImportedContacts",c)}finally{U(!1)}},z=c=>c.split(" ").map(w=>w[0]).join("").toUpperCase(),E=()=>{const c=v.map(b=>b.id),w=c.every(b=>h.has(b));d(b=>{const F=new Set(b);return w?c.forEach(O=>F.delete(O)):c.forEach(O=>F.add(O)),F})},_=g.useMemo(()=>v.length===0?!1:v.every(c=>h.has(c.id)),[v,h]);return e.jsx(Gs,{sensors:B,onDragStart:()=>{},onDragEnd:k,children:e.jsxs(Js,{direction:"horizontal",className:"h-full rounded-lg border",children:[e.jsx(Te,{defaultSize:30,minSize:20,children:e.jsxs(te,{className:"flex flex-col h-full border-0 shadow-none rounded-none",children:[e.jsxs(ae,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"})," Imported Contacts"]}),e.jsx("input",{type:"file",ref:H,onChange:D,accept:".xlsx, .xls, .csv",className:"hidden"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{variant:"outline",onClick:()=>{var c;return(c=H.current)==null?void 0:c.click()},className:"flex-1",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"})," Import"]}),e.jsx(y,{variant:"outline",onClick:E,disabled:v.length===0,className:"flex-1",children:_?"Deselect All":"Select All"})]})]}),e.jsx(ne,{className:"flex-1 overflow-hidden p-0",children:e.jsx(ge,{className:"h-full",children:e.jsxs("div",{className:"p-4 space-y-2",children:[v.map(c=>e.jsx(vs,{contact:c,isSelected:h.has(c.id),onToggle:he,onAdd:W},c.id)),v.length===0&&e.jsx("div",{className:"text-center py-16 text-muted-foreground",children:e.jsx("p",{children:"Import contacts to get started."})})]})})}),v.length>0&&e.jsx("div",{className:"p-4 border-t",children:e.jsxs(y,{onClick:C,disabled:I,className:"w-full",children:[I?e.jsx(Me,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Save New Contacts"]})})]})}),e.jsx(Ze,{withHandle:!0}),e.jsx(Te,{defaultSize:40,minSize:30,children:e.jsxs(te,{className:"flex flex-col h-full border-0 shadow-none rounded-none",children:[e.jsxs(ae,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"})," Available Contacts"]}),e.jsx(qe,{placeholder:"Search contacts...",value:i,onChange:c=>l(c.target.value)})]}),e.jsx(ne,{className:"flex-1 overflow-hidden p-0",children:e.jsx(ge,{className:"h-full",children:e.jsxs("div",{className:"p-4 space-y-2",children:[ke.map(c=>e.jsx(vs,{contact:c,isSelected:h.has(c.id),onToggle:he,onAdd:W},c.id)),S<Q.length&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx(y,{variant:"outline",onClick:()=>A(c=>c+Xe),children:"Load More"})})]})})})]})}),e.jsx(Ze,{withHandle:!0}),e.jsx(Te,{defaultSize:30,minSize:20,children:e.jsxs(te,{className:"flex flex-col h-full border-0 shadow-none rounded-none",children:[e.jsx(ae,{children:e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"})," Call Queue"]})}),e.jsx(ne,{className:"flex-1 overflow-hidden p-0",children:e.jsx(ge,{className:"h-full",children:e.jsxs("div",{className:"p-4 space-y-2",id:"call-queue-droppable",children:[e.jsx(Ks,{items:x.map(c=>c.id),strategy:Ws,children:e.jsx(Oe,{children:x.map((c,w)=>e.jsx(Ce.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsxs(ga,{id:c.id,contact:c,onRemove:Ne,children:[e.jsxs("span",{className:"font-mono text-sm text-muted-foreground cursor-grab",children:[w+1,"."]}),e.jsx(Ue,{className:"h-10 w-10 border",children:e.jsx(He,{children:z(c.name)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:c.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.phone})]})]})},c.id))})}),x.length===0&&e.jsx("div",{className:"text-center py-16 text-muted-foreground",children:e.jsx("p",{children:"Drag contacts here to build your queue."})})]})})}),e.jsxs("div",{className:"p-4 border-t flex flex-col gap-4 flex-shrink-0",children:[e.jsxs(y,{onClick:ie,disabled:h.size===0,variant:"outline",children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add ",h.size>0?`(${h.size})`:""," to Queue"]}),e.jsxs(y,{onClick:xe,disabled:x.length===0||u,children:[u?e.jsx(Me,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Send Queue to Dialer (",x.length,")"]})]})]})})]})})},es=30,ss=Ct.forwardRef(({activeFilterCount:s,...t},n)=>e.jsxs(y,{ref:n,variant:"outline",className:"gap-2",...t,children:[e.jsx(Rt,{className:"h-4 w-4"}),"Filters",s>0&&e.jsx(L,{variant:"secondary",className:"rounded-full px-2",children:s})]}));ss.displayName="FilterTrigger";const ws=({searchTerm:s,setSearchTerm:t,isFilterOpen:n,setIsFilterOpen:a,filters:i,setFilters:l,loading:h,visibleContacts:d,handleSelectContact:x,selectedContact:o,visibleCount:u,filteredContacts:f,setVisibleCount:v,isMobile:$,activeFilterCount:I,selectedForOppIds:U,onToggleSelection:H})=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(qe,{placeholder:"Search by name or phone number...",value:s,onChange:S=>t(S.target.value),className:"pl-10"})]}),$?e.jsxs(rs,{open:n,onOpenChange:a,children:[e.jsx(zt,{asChild:!0,children:e.jsx(ss,{activeFilterCount:I})}),e.jsx(os,{children:e.jsx(Ns,{filters:i,onFiltersChange:l})})]}):e.jsxs(ts,{open:n,onOpenChange:a,children:[e.jsx(as,{asChild:!0,children:e.jsx(ss,{activeFilterCount:I})}),e.jsx(ls,{className:"w-80",align:"end",children:e.jsx(Ns,{filters:i,onFiltersChange:l})})]})]}),e.jsx(ge,{className:"flex-1 -mx-4",children:e.jsx("div",{className:"px-4 space-y-2",children:h?e.jsx("div",{className:"space-y-2",children:[...Array(10)].map((S,A)=>e.jsx(qt,{},A))}):d.length>0?e.jsxs(e.Fragment,{children:[d.map(S=>e.jsxs("div",{onClick:()=>x(S),className:me("w-full text-left p-4 bg-background rounded-lg border hover:bg-muted/50 transition-colors flex items-center justify-between cursor-pointer",(o==null?void 0:o.id)===S.id&&"bg-muted/50 border-primary",U.has(S.id)&&"ring-2 ring-primary border-primary"),children:[e.jsx(ye,{checked:U.has(S.id),onCheckedChange:()=>H(S.id),onClick:A=>A.stopPropagation(),className:"mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:S.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(je,{className:"h-3 w-3"})," ",S.phone]}),S.callHistory.length>0&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(_e,{className:"h-3 w-3"})," ",new Date(S.callHistory[0].timestamp).toLocaleDateString()]})]})]}),e.jsx(yt,{className:"h-5 w-5 text-muted-foreground"})]},S.id)),u<f.length&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(y,{variant:"outline",onClick:()=>v(S=>S+es),children:"Load More"})})]}):e.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[e.jsx(ce,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"font-medium",children:"No contacts found."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters."})]})})})]});function Ea(){var ds;const{user:s}=Ms(),{toast:t}=As(),{contacts:n,loading:a}=pt(),{addOpportunitiesFromContacts:i}=Fs(),[l,h]=g.useState(null),[d,x]=g.useState("contacts"),[o,u]=g.useState(null),[f,v]=g.useState(""),$=jt(f,300),[I,U]=g.useState({dateRange:void 0,initialCallFeedback:[],followUpCallFeedback:[]}),[H,S]=g.useState(!1),A=ks(),[B,Q]=g.useState(null),[ke,he]=g.useState(!1),[ie,W]=g.useState(es),[Ne,xe]=g.useState(null),[k,D]=g.useState(!1),[C,z]=g.useState(new Set),[E,_]=g.useState(null),[c,w]=g.useState(!1),b=g.useCallback(()=>{w(!0),t({title:"Syncing Contacts...",description:"Fetching the latest data from the server."}),setTimeout(()=>{w(!1),t({title:"Sync Complete!",description:"Your contact list is up to date."})},1500)},[t]);g.useEffect(()=>{if(!s)return;const m=ee(se,"liveCallStatus"),r=Nt(m,j=>{const N=j.val();if(N&&N.currentContact){const p=R=>{const J=R.callHistory?Object.entries(R.callHistory).map(([oe,M])=>({...M,originalIndex:oe})).sort((oe,M)=>new Date(M.timestamp).getTime()-new Date(oe.timestamp).getTime()).map((oe,M,K)=>({...oe,type:M===K.length-1?"New Call":"Follow-up"})):[],q=J[0]||null;return{id:R.phoneNumber,name:R.name||"N/A",phone:R.phoneNumber,callHistory:J,status:(q==null?void 0:q.feedback)||"No History",lastContacted:(q==null?void 0:q.timestamp)||new Date().toISOString(),callCount:R.callCount||0}},T=p(N.currentContact),ve=N.nextContact?p(N.nextContact):void 0;xe({...N,currentContact:T,nextContact:ve}),d!=="live-call"&&x("live-call")}else xe(null),d==="live-call"&&x("contacts")});return()=>{r()}},[s,d]);const F=g.useMemo(()=>n.filter(m=>{if($&&!(m.name.toLowerCase().includes($.toLowerCase())||m.phone.includes($)))return!1;const{dateRange:r,initialCallFeedback:j,followUpCallFeedback:N}=I;if(r!=null&&r.from||r!=null&&r.to){const p=r.from?Fe(r.from):null,T=r.to?Ke(r.to):null;if(!m.callHistory.some(R=>{const J=new Date(R.timestamp);return(!p||J>=p)&&(!T||J<=T)}))return!1}if(j.length>0){const p=m.callHistory.find(T=>T.type==="New Call");if(!p||!j.includes(p.feedback))return!1}return!(N.length>0&&!m.callHistory.some(T=>T.type==="Follow-up"&&N.includes(T.feedback)))}),[n,$,I]);g.useEffect(()=>{W(es)},[$,I]);const O=g.useMemo(()=>F.slice(0,ie),[F,ie]),V=m=>{const{dateRange:r,initialCallFeedback:j,followUpCallFeedback:N}=m,p=j.includes("New Contact"),T=j.filter(M=>M!=="New Contact");if(!(p||T.length>0||N.length>0||(r==null?void 0:r.from))){t({title:"No Filters Selected",description:"Please select at least one filter to export contacts."});return}const R=n.filter(M=>{const K=M.callHistory&&M.callHistory.length>0;return p&&!K?!(r!=null&&r.from):!K||p&&T.length===0&&N.length===0&&!(r!=null&&r.from)?!1:M.callHistory.some(Ie=>{let ms=!0;if(r!=null&&r.from){const rt=Fe(r.from),ot=r.to?Ke(r.to):Ke(r.from),hs=new Date(Ie.timestamp);ms=hs>=rt&&hs<=ot}if(!ms)return!1;const nt=Ie.type==="New Call"&&T.includes(Ie.feedback),it=Ie.type==="Follow-up"&&N.includes(Ie.feedback);return T.length===0&&N.length===0?!0:nt||it})});if(R.length===0){t({title:"No Contacts Found",description:"No contacts match the selected filters.",variant:"destructive"});return}const J=R.map(M=>{const K=M.callHistory&&M.callHistory.length>0?M.callHistory[0]:null;return{"Company Name":M.name,"Phone Number":M.phone,"Spoke To":(K==null?void 0:K.spokenToName)||"N/A","Last Status":M.status,"Last Message":(K==null?void 0:K.message)||"N/A","Last Contacted":M.lastContacted?P(new Date(M.lastContacted),"PPp"):"N/A"}}),q=$e.json_to_sheet(J),oe=$e.book_new();$e.book_append_sheet(oe,q,"Contacts"),q["!cols"]=[{wch:30},{wch:20},{wch:25},{wch:20},{wch:40},{wch:30}],Ft(oe,"Filtered_Contacts.xlsx"),t({title:"Export Successful",description:`Exported ${R.length} contacts.`})},Y=m=>{const r=n.find(j=>j.id===m.id);u(r||m),d==="live-call"&&D(!0)},G=(m,r)=>{const j=n.flatMap(N=>N.callHistory.filter(p=>{const T=P(Fe(new Date(p.timestamp)),"yyyy-MM-dd"),ve=r==="all"||p.type===r;return T===m&&ve}).map(p=>({contact:N,log:p})));Q({date:m,calls:j})},Ve=m=>{u(m),D(!0)},be=async(m,r,j)=>{if(!s){t({title:"Authentication Error",variant:"destructive"});return}const N=ee(se,`contacts/${m}/callHistory/${r}/message`);try{await We(N,j),t({title:"Note updated successfully!"})}catch(p){console.error("Error updating call log message:",p),t({title:"Failed to update note",variant:"destructive"})}},Ae=async(m,r,j)=>{if(!s){t({title:"Authentication Error",variant:"destructive"});return}const N=ee(se,`contacts/${m}/callHistory/${r}/feedback`);try{await We(N,j),t({title:"Contact status updated!"})}catch(p){console.error("Error updating call log feedback:",p),t({title:"Failed to update status",variant:"destructive"})}},Se=async(m,r)=>{if(!s){t({title:"Authentication Error",variant:"destructive"});return}const j=ee(se,`contacts/${m}/callHistory/${r}`);try{if(await We(j,null),t({title:"Call log deleted."}),B){const N=B.calls.filter(p=>p.log.originalIndex!==r);Q({...B,calls:N})}}catch(N){console.error("Error deleting call log:",N),t({title:"Failed to delete log",variant:"destructive"})}},De=async m=>{if(!s||m.length===0)return;const r={};m.forEach(({contactId:j,logId:N})=>{r[`contacts/${j}/callHistory/${N}`]=null});try{if(await we(ee(se),r),t({title:`${m.length} call log(s) deleted.`}),B){const j=new Set(m.map(p=>p.logId)),N=B.calls.filter(p=>!j.has(p.log.originalIndex));Q({...B,calls:N})}}catch(j){console.error("Error deleting multiple call logs:",j),t({title:"Failed to delete logs",variant:"destructive"})}},ue=async m=>{var J;if(!s){t({title:"Authentication Error",variant:"destructive"});return}const r=n.find(q=>q.id===m),j=(J=r==null?void 0:r.callHistory)==null?void 0:J[0];if(!r||!j||j.feedback!=="Send Details"){t({title:"Invalid Action",description:"This action is only for contacts awaiting details.",variant:"destructive"});return}const N=j.originalIndex;if(!N){t({title:"Data Error",description:"Cannot find the original call log to update.",variant:"destructive"});return}const p=ee(se,`contacts/${m}/callHistory/${N}`),T=j.message||"",R={feedback:"Interested",message:`[Details Sent on ${new Date().toLocaleDateString()}] ${T}`.trim()};try{await we(p,R),t({title:"Status Updated!",description:`${r.name} is now marked as Interested.`})}catch(q){console.error("Error marking as sent:",q),t({title:"Update Failed",variant:"destructive"})}},re=m=>{z(r=>{const j=new Set(r);return j.has(m)?j.delete(m):j.add(m),j})},fe=()=>{const m=n.filter(r=>C.has(r.id));i(m),z(new Set)},Le=async m=>{if(!s||m.length===0)return;const r=new Set(n.map(p=>p.phone)),j={};let N=0;if(m.forEach(p=>{if(!r.has(p.phone)){const T=`contacts/${p.phone}`;j[T]={name:p.name,phoneNumber:p.phone,callCount:0,callHistory:{}},N++}}),Object.keys(j).length===0){t({title:"No New Contacts to Save",description:"All imported contacts already exist in your master list."});return}try{await we(ee(se),j),t({title:"Contacts Saved!",description:`${N} new contacts have been saved to your master list.`})}catch(p){throw console.error("Error saving imported contacts:",p),t({title:"Save Failed",description:"Could not save the imported contacts to Firebase.",variant:"destructive"}),p}},st=async()=>{if(!s){t({title:"Authentication Error",variant:"destructive"});return}try{const m={};m.liveCallStatus=null,m["dialerBridge/activeWebUser"]=null,await we(ee(se),m),t({title:"Call session finished."})}catch(m){console.error("Failed to finish session:",m),t({title:"Error",description:"Could not finish the session.",variant:"destructive"})}},tt=(m,r)=>{_({date:m,count:r})},at=async()=>{if(!E||!s)return;const{date:m}=E,r={};let j=0;if(n.forEach(N=>{N.callHistory.forEach(p=>{P(Fe(new Date(p.timestamp)),"yyyy-MM-dd")===m&&(r[`contacts/${N.phone}/callHistory/${p.originalIndex}`]=null,j++)})}),Object.keys(r).length>0)try{await we(ee(se),r),t({title:`Successfully deleted ${j} call logs for ${P(new Date(m),"PP")}.`})}catch(N){console.error("Error deleting date summary:",N),t({title:"Deletion failed",variant:"destructive"})}_(null)},lt={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},cs=((ds=I.dateRange)!=null&&ds.from?1:0)+I.initialCallFeedback.length+I.followUpCallFeedback.length;return a&&n.length===0?e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-background",children:[e.jsxs("header",{className:"flex-shrink-0 bg-background border-b p-4 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"h-5 w-5 text-primary"})}),"Sales Tracker"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-9 w-32"}),e.jsx(us,{className:"h-9 w-48"})]})]}),e.jsx(_t,{})]}):e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-background",children:[e.jsxs("header",{className:"flex-shrink-0 bg-background border-b p-2 md:p-4 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-lg md:text-xl font-bold flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"hidden sm:inline",children:"Sales Tracker"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"outline",size:A?"icon":"default",onClick:b,disabled:c,children:[c?e.jsx(Me,{className:me("h-4 w-4 animate-spin",!A&&"mr-2")}):e.jsx(bt,{className:me("h-4 w-4",!A&&"mr-2")}),e.jsx("span",{className:"hidden md:inline",children:"Sync"})]}),e.jsxs(y,{variant:"outline",size:A?"icon":"default",onClick:()=>he(!0),children:[e.jsx(Bt,{className:me("h-4 w-4",!A&&"mr-2")}),e.jsx("span",{className:"hidden md:inline",children:"Export"})]}),e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:[e.jsxs(y,{size:"sm",variant:d==="live-call"?"default":"ghost",onClick:()=>x("live-call"),className:"gap-2 px-2 md:px-3 relative",children:[Ne&&e.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-red-500 animate-ping"}),e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Live Call"})]}),e.jsxs(y,{size:"sm",variant:d==="dialer"?"default":"ghost",onClick:()=>x("dialer"),className:"gap-2 px-2 md:px-3",children:[e.jsx(ea,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Dialer"})]}),e.jsxs(y,{size:"sm",variant:d==="contacts"?"default":"ghost",onClick:()=>x("contacts"),className:"gap-2 px-2 md:px-3",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Contacts"})]}),e.jsxs(y,{size:"sm",variant:d==="analytics"?"default":"ghost",onClick:()=>x("analytics"),className:"gap-2 px-2 md:px-3",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Analytics"})]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[e.jsx(Oe,{mode:"wait",children:e.jsx(Ce.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:lt,className:"p-4 md:p-6 h-full",children:d==="live-call"?e.jsx(fa,{liveCallData:Ne,onUpdateCallLogMessage:be,onMarkAsSent:ue,onFinishSession:st}):d==="dialer"?e.jsx(pa,{contacts:n,onSaveImportedContacts:Le}):d==="contacts"?A?e.jsx(ws,{searchTerm:f,setSearchTerm:v,isFilterOpen:H,setIsFilterOpen:S,filters:I,setFilters:U,loading:a,visibleContacts:O,handleSelectContact:Y,selectedContact:o,visibleCount:ie,filteredContacts:F,setVisibleCount:W,isMobile:A,activeFilterCount:cs,selectedForOppIds:C,onToggleSelection:re}):e.jsxs(Js,{direction:"horizontal",className:"h-full rounded-lg border",children:[e.jsx(Te,{defaultSize:40,minSize:30,children:e.jsx("div",{className:"p-4 h-full",children:e.jsx(ws,{searchTerm:f,setSearchTerm:v,isFilterOpen:H,setIsFilterOpen:S,filters:I,setFilters:U,loading:a,visibleContacts:O,handleSelectContact:Y,selectedContact:o,visibleCount:ie,filteredContacts:F,setVisibleCount:W,isMobile:A,activeFilterCount:cs,selectedForOppIds:C,onToggleSelection:re})})}),e.jsx(Ze,{withHandle:!0}),e.jsx(Te,{defaultSize:60,minSize:40,children:o?e.jsx(Ee,{contact:o,onUpdateCallLogMessage:be,onMarkAsSent:ue}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(ce,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"Select a contact to view details"})]})})})]}):e.jsx(ge,{className:"h-full -m-4 md:-m-6",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(ia,{contacts:n,onDateClick:G,onDeleteDate:tt})})})},d)}),e.jsx(Oe,{children:C.size>0&&d==="contacts"&&e.jsx(Ce.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-10",children:e.jsxs("div",{className:"flex items-center gap-4 bg-background p-3 rounded-lg shadow-lg border",children:[e.jsxs("span",{className:"text-sm font-medium",children:[C.size," contact(s) selected"]}),e.jsxs(y,{onClick:fe,children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add to Opportunities"]})]})})})]}),A&&e.jsx(rs,{open:!!o,onOpenChange:m=>!m&&u(null),children:e.jsxs(Et,{children:[e.jsx(Ot,{className:"fixed inset-0 bg-black/40"}),e.jsx(os,{className:"bg-background flex flex-col outline-none h-[90%] mt-24 fixed bottom-0 left-0 right-0 rounded-t-lg",children:e.jsx(Ee,{contact:o,onUpdateCallLogMessage:be,onMarkAsSent:ue})})]})}),e.jsx(ha,{isOpen:!!B,onOpenChange:m=>!m&&Q(null),data:B,onSelectContact:Ve,onUpdateCallLogFeedback:Ae,onDeleteCallLog:Se,onDeleteMultipleCallLogs:De}),e.jsx(ua,{open:ke,onOpenChange:he,onExport:V}),e.jsx(ns,{open:k,onOpenChange:D,children:e.jsx(is,{className:"max-w-4xl h-[85vh] flex flex-col",children:e.jsx(Ee,{contact:o,onUpdateCallLogMessage:be,onMarkAsSent:ue})})}),e.jsx(Xs,{open:!!E,onOpenChange:m=>!m&&_(null),onConfirm:at,itemCount:(E==null?void 0:E.count)||0,itemName:`call logs for ${E?P(new Date(E.date),"PP"):""}`})]})}export{Ea as default};
