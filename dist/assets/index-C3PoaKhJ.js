const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TasksPage-DcE1ETlq.js","assets/TaskForm-DSFQQGHf.js","assets/useTouchGestures-BC_F8JP4.js","assets/textarea-DzbpV_Fn.js","assets/en-US-DSSwd-Ay.js","assets/endOfMonth-BNqLjwTF.js","assets/proxy-wG0P1ngr.js","assets/checkbox-CRixpEwR.js","assets/index-Bc21jcnc.js","assets/select-DYfge7V7.js","assets/plus--53mYUUG.js","assets/DashboardPage-BUts6N_A.js","assets/calendar-XOjXnguh.js","assets/format-BmZa2Fkx.js","assets/trending-up-ChYZ69I8.js","assets/flame-BNAduFin.js","assets/TeamChatPage-B8d2qdyy.js","assets/copy-DE-hpREg.js","assets/MeetlyPage-BRo23c_L.js","assets/circle-alert-BxpbF718.js","assets/upload-BZumO5AQ.js","assets/download-Sr999xeL.js","assets/brain-BzIxTi2q.js","assets/zap-BhNFlfJH.js","assets/TimerPage-DgCg9ZwO.js","assets/CalendarPage-B4UHdqud.js","assets/external-link-Db82k4H4.js","assets/NotesPage-DgQIXlZe.js","assets/AnalyticsPage-dG0AkzB8.js","assets/ChatPage-CUr6ATJs.js"])))=>i.map(i=>d[i]);
var _K=Object.defineProperty;var NP=t=>{throw TypeError(t)};var wK=(t,e,n)=>e in t?_K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ht=(t,e,n)=>wK(t,typeof e!="symbol"?e+"":e,n),dE=(t,e,n)=>e.has(t)||NP("Cannot "+n);var X=(t,e,n)=>(dE(t,e,"read from private field"),n?n.call(t):e.get(t)),gt=(t,e,n)=>e.has(t)?NP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ke=(t,e,n,r)=>(dE(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),sr=(t,e,n)=>(dE(t,e,"access private method"),n);var yg=(t,e,n,r)=>({set _(i){Ke(t,e,i,n)},get _(){return X(t,e,r)}});function TK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const EK="modulepreload",CK=function(t){return"/"+t},OP={},mn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=CK(c),c in OP)return;OP[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":EK,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var eIe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g2={exports:{}},K_={},y2={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Symbol.for("react.element"),bK=Symbol.for("react.portal"),IK=Symbol.for("react.fragment"),SK=Symbol.for("react.strict_mode"),AK=Symbol.for("react.profiler"),kK=Symbol.for("react.provider"),RK=Symbol.for("react.context"),xK=Symbol.for("react.forward_ref"),PK=Symbol.for("react.suspense"),NK=Symbol.for("react.memo"),OK=Symbol.for("react.lazy"),MP=Symbol.iterator;function MK(t){return t===null||typeof t!="object"?null:(t=MP&&t[MP]||t["@@iterator"],typeof t=="function"?t:null)}var v2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_2=Object.assign,w2={};function nh(t,e,n){this.props=t,this.context=e,this.refs=w2,this.updater=n||v2}nh.prototype.isReactComponent={};nh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function T2(){}T2.prototype=nh.prototype;function jS(t,e,n){this.props=t,this.context=e,this.refs=w2,this.updater=n||v2}var VS=jS.prototype=new T2;VS.constructor=jS;_2(VS,nh.prototype);VS.isPureReactComponent=!0;var DP=Array.isArray,E2=Object.prototype.hasOwnProperty,$S={current:null},C2={key:!0,ref:!0,__self:!0,__source:!0};function b2(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)E2.call(e,r)&&!C2.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:mm,type:t,key:s,ref:o,props:i,_owner:$S.current}}function DK(t,e){return{$$typeof:mm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function BS(t){return typeof t=="object"&&t!==null&&t.$$typeof===mm}function LK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LP=/\/+/g;function hE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LK(""+t.key):e.toString(36)}function ay(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mm:case bK:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hE(o,0):r,DP(i)?(n="",t!=null&&(n=t.replace(LP,"$&/")+"/"),ay(i,e,n,"",function(l){return l})):i!=null&&(BS(i)&&(i=DK(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(LP,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",DP(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+hE(s,a);o+=ay(s,e,n,c,i)}else if(c=MK(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+hE(s,a++),o+=ay(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vg(t,e,n){if(t==null)return t;var r=[],i=0;return ay(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Or={current:null},cy={transition:null},UK={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:cy,ReactCurrentOwner:$S};function I2(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:vg,forEach:function(t,e,n){vg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vg(t,function(){e++}),e},toArray:function(t){return vg(t,function(e){return e})||[]},only:function(t){if(!BS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=nh;rt.Fragment=IK;rt.Profiler=AK;rt.PureComponent=jS;rt.StrictMode=SK;rt.Suspense=PK;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UK;rt.act=I2;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_2({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$S.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)E2.call(e,c)&&!C2.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:mm,type:t.type,key:i,ref:s,props:r,_owner:o}};rt.createContext=function(t){return t={$$typeof:RK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kK,_context:t},t.Consumer=t};rt.createElement=b2;rt.createFactory=function(t){var e=b2.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:xK,render:t}};rt.isValidElement=BS;rt.lazy=function(t){return{$$typeof:OK,_payload:{_status:-1,_result:t},_init:FK}};rt.memo=function(t,e){return{$$typeof:NK,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=cy.transition;cy.transition={};try{t()}finally{cy.transition=e}};rt.unstable_act=I2;rt.useCallback=function(t,e){return Or.current.useCallback(t,e)};rt.useContext=function(t){return Or.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return Or.current.useDeferredValue(t)};rt.useEffect=function(t,e){return Or.current.useEffect(t,e)};rt.useId=function(){return Or.current.useId()};rt.useImperativeHandle=function(t,e,n){return Or.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return Or.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return Or.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return Or.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return Or.current.useReducer(t,e,n)};rt.useRef=function(t){return Or.current.useRef(t)};rt.useState=function(t){return Or.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return Or.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return Or.current.useTransition()};rt.version="18.3.1";y2.exports=rt;var g=y2.exports;const Q=m2(g),HS=TK({__proto__:null,default:Q},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jK=g,VK=Symbol.for("react.element"),$K=Symbol.for("react.fragment"),BK=Object.prototype.hasOwnProperty,HK=jK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zK={key:!0,ref:!0,__self:!0,__source:!0};function S2(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BK.call(e,r)&&!zK.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VK,type:t,key:s,ref:o,props:i,_owner:HK.current}}K_.Fragment=$K;K_.jsx=S2;K_.jsxs=S2;g2.exports=K_;var p=g2.exports,A2={exports:{}},Ci={},k2={exports:{}},R2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,j){var U=z.length;z.push(j);e:for(;0<U;){var G=U-1>>>1,H=z[G];if(0<i(H,j))z[G]=j,z[U]=H,U=G;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var j=z[0],U=z.pop();if(U!==j){z[0]=U;e:for(var G=0,H=z.length,W=H>>>1;G<W;){var re=2*(G+1)-1,ae=z[re],ve=re+1,we=z[ve];if(0>i(ae,U))ve<H&&0>i(we,ae)?(z[G]=we,z[ve]=U,G=ve):(z[G]=ae,z[re]=U,G=re);else if(ve<H&&0>i(we,U))z[G]=we,z[ve]=U,G=ve;else break e}}return j}function i(z,j){var U=z.sortIndex-j.sortIndex;return U!==0?U:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,m=!1,_=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var j=n(l);j!==null;){if(j.callback===null)r(l);else if(j.startTime<=z)r(l),j.sortIndex=j.expirationTime,e(c,j);else break;j=n(l)}}function S(z){if(y=!1,C(z),!_)if(n(c)!==null)_=!0,fe(M);else{var j=n(l);j!==null&&ye(S,j.startTime-z)}}function M(z,j){_=!1,y&&(y=!1,E(I),I=-1),m=!0;var U=f;try{for(C(j),d=n(c);d!==null&&(!(d.expirationTime>j)||z&&!N());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var H=G(d.expirationTime<=j);j=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(c)&&r(c),C(j)}else r(c);d=n(c)}if(d!==null)var W=!0;else{var re=n(l);re!==null&&ye(S,re.startTime-j),W=!1}return W}finally{d=null,f=U,m=!1}}var D=!1,A=null,I=-1,k=5,x=-1;function N(){return!(t.unstable_now()-x<k)}function P(){if(A!==null){var z=t.unstable_now();x=z;var j=!0;try{j=A(!0,z)}finally{j?R():(D=!1,A=null)}}else D=!1}var R;if(typeof w=="function")R=function(){w(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,he=B.port2;B.port1.onmessage=P,R=function(){he.postMessage(null)}}else R=function(){T(P,0)};function fe(z){A=z,D||(D=!0,R())}function ye(z,j){I=T(function(){z(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,fe(M))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var U=f;f=j;try{return z()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=f;f=z;try{return j()}finally{f=U}},t.unstable_scheduleCallback=function(z,j,U){var G=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?G+U:G):U=G,z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,z={id:u++,callback:j,priorityLevel:z,startTime:U,expirationTime:H,sortIndex:-1},U>G?(z.sortIndex=U,e(l,z),n(c)===null&&z===n(l)&&(y?(E(I),I=-1):y=!0,ye(S,U-G))):(z.sortIndex=H,e(c,z),_||m||(_=!0,fe(M))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var j=f;return function(){var U=f;f=j;try{return z.apply(this,arguments)}finally{f=U}}}})(R2);k2.exports=R2;var WK=k2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KK=g,wi=WK;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x2=new Set,op={};function Gl(t,e){Td(t,e),Td(t+"Capture",e)}function Td(t,e){for(op[t]=e,t=0;t<e.length;t++)x2.add(e[t])}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zC=Object.prototype.hasOwnProperty,qK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FP={},UP={};function GK(t){return zC.call(UP,t)?!0:zC.call(FP,t)?!1:qK.test(t)?UP[t]=!0:(FP[t]=!0,!1)}function QK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YK(t,e,n,r){if(e===null||typeof e>"u"||QK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zn[t]=new Mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zn[e]=new Mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zn[t]=new Mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zn[t]=new Mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zn[t]=new Mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zn[t]=new Mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zn[t]=new Mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zn[t]=new Mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zn[t]=new Mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var zS=/[\-:]([a-z])/g;function WS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zS,WS);Zn[e]=new Mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zS,WS);Zn[e]=new Mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zS,WS);Zn[e]=new Mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zn[t]=new Mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zn[t]=new Mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function KS(t,e,n,r){var i=Zn.hasOwnProperty(e)?Zn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YK(e,n,i,r)&&(n=null),r||i===null?GK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sa=KK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_g=Symbol.for("react.element"),Mu=Symbol.for("react.portal"),Du=Symbol.for("react.fragment"),qS=Symbol.for("react.strict_mode"),WC=Symbol.for("react.profiler"),P2=Symbol.for("react.provider"),N2=Symbol.for("react.context"),GS=Symbol.for("react.forward_ref"),KC=Symbol.for("react.suspense"),qC=Symbol.for("react.suspense_list"),QS=Symbol.for("react.memo"),_a=Symbol.for("react.lazy"),O2=Symbol.for("react.offscreen"),jP=Symbol.iterator;function Bh(t){return t===null||typeof t!="object"?null:(t=jP&&t[jP]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,fE;function lf(t){if(fE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fE=e&&e[1]||""}return`
`+fE+t}var pE=!1;function mE(t,e){if(!t||pE)return"";pE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{pE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lf(t):""}function JK(t){switch(t.tag){case 5:return lf(t.type);case 16:return lf("Lazy");case 13:return lf("Suspense");case 19:return lf("SuspenseList");case 0:case 2:case 15:return t=mE(t.type,!1),t;case 11:return t=mE(t.type.render,!1),t;case 1:return t=mE(t.type,!0),t;default:return""}}function GC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Du:return"Fragment";case Mu:return"Portal";case WC:return"Profiler";case qS:return"StrictMode";case KC:return"Suspense";case qC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N2:return(t.displayName||"Context")+".Consumer";case P2:return(t._context.displayName||"Context")+".Provider";case GS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case QS:return e=t.displayName||null,e!==null?e:GC(t.type)||"Memo";case _a:e=t._payload,t=t._init;try{return GC(t(e))}catch{}}return null}function XK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return GC(e);case 8:return e===qS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZK(t){var e=M2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wg(t){t._valueTracker||(t._valueTracker=ZK(t))}function D2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=M2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function QC(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L2(t,e){e=e.checked,e!=null&&KS(t,"checked",e,!1)}function YC(t,e){L2(t,e);var n=lc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?JC(t,e.type,n):e.hasOwnProperty("defaultValue")&&JC(t,e.type,lc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $P(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function JC(t,e,n){(e!=="number"||zy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var uf=Array.isArray;function qu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function XC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function BP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(uf(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lc(n)}}function F2(t,e){var n=lc(e.value),r=lc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function HP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function U2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ZC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?U2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tg,j2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tg=Tg||document.createElement("div"),Tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ap(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eq=["Webkit","ms","Moz","O"];Object.keys(bf).forEach(function(t){eq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bf[e]=bf[t]})});function V2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bf.hasOwnProperty(t)&&bf[t]?(""+e).trim():e+"px"}function $2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=V2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tq=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eb(t,e){if(e){if(tq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function tb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nb=null;function YS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rb=null,Gu=null,Qu=null;function zP(t){if(t=vm(t)){if(typeof rb!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=J_(e),rb(t.stateNode,t.type,e))}}function B2(t){Gu?Qu?Qu.push(t):Qu=[t]:Gu=t}function H2(){if(Gu){var t=Gu,e=Qu;if(Qu=Gu=null,zP(t),e)for(t=0;t<e.length;t++)zP(e[t])}}function z2(t,e){return t(e)}function W2(){}var gE=!1;function K2(t,e,n){if(gE)return t(e,n);gE=!0;try{return z2(t,e,n)}finally{gE=!1,(Gu!==null||Qu!==null)&&(W2(),H2())}}function cp(t,e){var n=t.stateNode;if(n===null)return null;var r=J_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var ib=!1;if(Ho)try{var Hh={};Object.defineProperty(Hh,"passive",{get:function(){ib=!0}}),window.addEventListener("test",Hh,Hh),window.removeEventListener("test",Hh,Hh)}catch{ib=!1}function nq(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var If=!1,Wy=null,Ky=!1,sb=null,rq={onError:function(t){If=!0,Wy=t}};function iq(t,e,n,r,i,s,o,a,c){If=!1,Wy=null,nq.apply(rq,arguments)}function sq(t,e,n,r,i,s,o,a,c){if(iq.apply(this,arguments),If){if(If){var l=Wy;If=!1,Wy=null}else throw Error(oe(198));Ky||(Ky=!0,sb=l)}}function Ql(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WP(t){if(Ql(t)!==t)throw Error(oe(188))}function oq(t){var e=t.alternate;if(!e){if(e=Ql(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return WP(i),t;if(s===r)return WP(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function G2(t){return t=oq(t),t!==null?Q2(t):null}function Q2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q2(t);if(e!==null)return e;t=t.sibling}return null}var Y2=wi.unstable_scheduleCallback,KP=wi.unstable_cancelCallback,aq=wi.unstable_shouldYield,cq=wi.unstable_requestPaint,fn=wi.unstable_now,lq=wi.unstable_getCurrentPriorityLevel,JS=wi.unstable_ImmediatePriority,J2=wi.unstable_UserBlockingPriority,qy=wi.unstable_NormalPriority,uq=wi.unstable_LowPriority,X2=wi.unstable_IdlePriority,q_=null,Qs=null;function dq(t){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(q_,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:pq,hq=Math.log,fq=Math.LN2;function pq(t){return t>>>=0,t===0?32:31-(hq(t)/fq|0)|0}var Eg=64,Cg=4194304;function df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=df(a):(s&=o,s!==0&&(r=df(s)))}else o=n&~i,o!==0?r=df(o):s!==0&&(r=df(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-us(e),i=1<<n,r|=t[n],e&=~i;return r}function mq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-us(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=mq(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function ob(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z2(){var t=Eg;return Eg<<=1,!(Eg&4194240)&&(Eg=64),t}function yE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=n}function yq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-us(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function XS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-us(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var bt=0;function eF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tF,ZS,nF,rF,iF,ab=!1,bg=[],Ba=null,Ha=null,za=null,lp=new Map,up=new Map,Ea=[],vq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qP(t,e){switch(t){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":lp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":up.delete(e.pointerId)}}function zh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=vm(e),e!==null&&ZS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _q(t,e,n,r,i){switch(e){case"focusin":return Ba=zh(Ba,t,e,n,r,i),!0;case"dragenter":return Ha=zh(Ha,t,e,n,r,i),!0;case"mouseover":return za=zh(za,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return lp.set(s,zh(lp.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,up.set(s,zh(up.get(s)||null,t,e,n,r,i)),!0}return!1}function sF(t){var e=tl(t.target);if(e!==null){var n=Ql(e);if(n!==null){if(e=n.tag,e===13){if(e=q2(n),e!==null){t.blockedOn=e,iF(t.priority,function(){nF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ly(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nb=r,n.target.dispatchEvent(r),nb=null}else return e=vm(n),e!==null&&ZS(e),t.blockedOn=n,!1;e.shift()}return!0}function GP(t,e,n){ly(t)&&n.delete(e)}function wq(){ab=!1,Ba!==null&&ly(Ba)&&(Ba=null),Ha!==null&&ly(Ha)&&(Ha=null),za!==null&&ly(za)&&(za=null),lp.forEach(GP),up.forEach(GP)}function Wh(t,e){t.blockedOn===e&&(t.blockedOn=null,ab||(ab=!0,wi.unstable_scheduleCallback(wi.unstable_NormalPriority,wq)))}function dp(t){function e(i){return Wh(i,t)}if(0<bg.length){Wh(bg[0],t);for(var n=1;n<bg.length;n++){var r=bg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ba!==null&&Wh(Ba,t),Ha!==null&&Wh(Ha,t),za!==null&&Wh(za,t),lp.forEach(e),up.forEach(e),n=0;n<Ea.length;n++)r=Ea[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ea.length&&(n=Ea[0],n.blockedOn===null);)sF(n),n.blockedOn===null&&Ea.shift()}var Yu=sa.ReactCurrentBatchConfig,Qy=!0;function Tq(t,e,n,r){var i=bt,s=Yu.transition;Yu.transition=null;try{bt=1,eA(t,e,n,r)}finally{bt=i,Yu.transition=s}}function Eq(t,e,n,r){var i=bt,s=Yu.transition;Yu.transition=null;try{bt=4,eA(t,e,n,r)}finally{bt=i,Yu.transition=s}}function eA(t,e,n,r){if(Qy){var i=cb(t,e,n,r);if(i===null)AE(t,e,r,Yy,n),qP(t,r);else if(_q(i,t,e,n,r))r.stopPropagation();else if(qP(t,r),e&4&&-1<vq.indexOf(t)){for(;i!==null;){var s=vm(i);if(s!==null&&tF(s),s=cb(t,e,n,r),s===null&&AE(t,e,r,Yy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else AE(t,e,r,null,n)}}var Yy=null;function cb(t,e,n,r){if(Yy=null,t=YS(r),t=tl(t),t!==null)if(e=Ql(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yy=t,null}function oF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lq()){case JS:return 1;case J2:return 4;case qy:case uq:return 16;case X2:return 536870912;default:return 16}default:return 16}}var Ma=null,tA=null,uy=null;function aF(){if(uy)return uy;var t,e=tA,n=e.length,r,i="value"in Ma?Ma.value:Ma.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return uy=i.slice(t,1<r?1-r:void 0)}function dy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ig(){return!0}function QP(){return!1}function bi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ig:QP,this.isPropagationStopped=QP,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ig)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ig)},persist:function(){},isPersistent:Ig}),e}var rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nA=bi(rh),ym=Xt({},rh,{view:0,detail:0}),Cq=bi(ym),vE,_E,Kh,G_=Xt({},ym,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kh&&(Kh&&t.type==="mousemove"?(vE=t.screenX-Kh.screenX,_E=t.screenY-Kh.screenY):_E=vE=0,Kh=t),vE)},movementY:function(t){return"movementY"in t?t.movementY:_E}}),YP=bi(G_),bq=Xt({},G_,{dataTransfer:0}),Iq=bi(bq),Sq=Xt({},ym,{relatedTarget:0}),wE=bi(Sq),Aq=Xt({},rh,{animationName:0,elapsedTime:0,pseudoElement:0}),kq=bi(Aq),Rq=Xt({},rh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xq=bi(Rq),Pq=Xt({},rh,{data:0}),JP=bi(Pq),Nq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mq[t])?!!e[t]:!1}function rA(){return Dq}var Lq=Xt({},ym,{key:function(t){if(t.key){var e=Nq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Oq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rA,charCode:function(t){return t.type==="keypress"?dy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fq=bi(Lq),Uq=Xt({},G_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XP=bi(Uq),jq=Xt({},ym,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rA}),Vq=bi(jq),$q=Xt({},rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bq=bi($q),Hq=Xt({},G_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zq=bi(Hq),Wq=[9,13,27,32],iA=Ho&&"CompositionEvent"in window,Sf=null;Ho&&"documentMode"in document&&(Sf=document.documentMode);var Kq=Ho&&"TextEvent"in window&&!Sf,cF=Ho&&(!iA||Sf&&8<Sf&&11>=Sf),ZP=" ",eN=!1;function lF(t,e){switch(t){case"keyup":return Wq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lu=!1;function qq(t,e){switch(t){case"compositionend":return uF(e);case"keypress":return e.which!==32?null:(eN=!0,ZP);case"textInput":return t=e.data,t===ZP&&eN?null:t;default:return null}}function Gq(t,e){if(Lu)return t==="compositionend"||!iA&&lF(t,e)?(t=aF(),uy=tA=Ma=null,Lu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cF&&e.locale!=="ko"?null:e.data;default:return null}}var Qq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qq[t.type]:e==="textarea"}function dF(t,e,n,r){B2(r),e=Jy(e,"onChange"),0<e.length&&(n=new nA("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Af=null,hp=null;function Yq(t){EF(t,0)}function Q_(t){var e=ju(t);if(D2(e))return t}function Jq(t,e){if(t==="change")return e}var hF=!1;if(Ho){var TE;if(Ho){var EE="oninput"in document;if(!EE){var nN=document.createElement("div");nN.setAttribute("oninput","return;"),EE=typeof nN.oninput=="function"}TE=EE}else TE=!1;hF=TE&&(!document.documentMode||9<document.documentMode)}function rN(){Af&&(Af.detachEvent("onpropertychange",fF),hp=Af=null)}function fF(t){if(t.propertyName==="value"&&Q_(hp)){var e=[];dF(e,hp,t,YS(t)),K2(Yq,e)}}function Xq(t,e,n){t==="focusin"?(rN(),Af=e,hp=n,Af.attachEvent("onpropertychange",fF)):t==="focusout"&&rN()}function Zq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Q_(hp)}function eG(t,e){if(t==="click")return Q_(e)}function tG(t,e){if(t==="input"||t==="change")return Q_(e)}function nG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ps=typeof Object.is=="function"?Object.is:nG;function fp(t,e){if(ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zC.call(e,i)||!ps(t[i],e[i]))return!1}return!0}function iN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sN(t,e){var n=iN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iN(n)}}function pF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mF(){for(var t=window,e=zy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zy(t.document)}return e}function sA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rG(t){var e=mF(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pF(n.ownerDocument.documentElement,n)){if(r!==null&&sA(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sN(n,s);var o=sN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iG=Ho&&"documentMode"in document&&11>=document.documentMode,Fu=null,lb=null,kf=null,ub=!1;function oN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ub||Fu==null||Fu!==zy(r)||(r=Fu,"selectionStart"in r&&sA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kf&&fp(kf,r)||(kf=r,r=Jy(lb,"onSelect"),0<r.length&&(e=new nA("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fu)))}function Sg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uu={animationend:Sg("Animation","AnimationEnd"),animationiteration:Sg("Animation","AnimationIteration"),animationstart:Sg("Animation","AnimationStart"),transitionend:Sg("Transition","TransitionEnd")},CE={},gF={};Ho&&(gF=document.createElement("div").style,"AnimationEvent"in window||(delete Uu.animationend.animation,delete Uu.animationiteration.animation,delete Uu.animationstart.animation),"TransitionEvent"in window||delete Uu.transitionend.transition);function Y_(t){if(CE[t])return CE[t];if(!Uu[t])return t;var e=Uu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gF)return CE[t]=e[n];return t}var yF=Y_("animationend"),vF=Y_("animationiteration"),_F=Y_("animationstart"),wF=Y_("transitionend"),TF=new Map,aN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sc(t,e){TF.set(t,e),Gl(e,[t])}for(var bE=0;bE<aN.length;bE++){var IE=aN[bE],sG=IE.toLowerCase(),oG=IE[0].toUpperCase()+IE.slice(1);Sc(sG,"on"+oG)}Sc(yF,"onAnimationEnd");Sc(vF,"onAnimationIteration");Sc(_F,"onAnimationStart");Sc("dblclick","onDoubleClick");Sc("focusin","onFocus");Sc("focusout","onBlur");Sc(wF,"onTransitionEnd");Td("onMouseEnter",["mouseout","mouseover"]);Td("onMouseLeave",["mouseout","mouseover"]);Td("onPointerEnter",["pointerout","pointerover"]);Td("onPointerLeave",["pointerout","pointerover"]);Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aG=new Set("cancel close invalid load scroll toggle".split(" ").concat(hf));function cN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sq(r,e,void 0,t),t.currentTarget=null}function EF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;cN(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;cN(i,a,l),s=c}}}if(Ky)throw t=sb,Ky=!1,sb=null,t}function jt(t,e){var n=e[mb];n===void 0&&(n=e[mb]=new Set);var r=t+"__bubble";n.has(r)||(CF(e,t,2,!1),n.add(r))}function SE(t,e,n){var r=0;e&&(r|=4),CF(n,t,r,e)}var Ag="_reactListening"+Math.random().toString(36).slice(2);function pp(t){if(!t[Ag]){t[Ag]=!0,x2.forEach(function(n){n!=="selectionchange"&&(aG.has(n)||SE(n,!1,t),SE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ag]||(e[Ag]=!0,SE("selectionchange",!1,e))}}function CF(t,e,n,r){switch(oF(e)){case 1:var i=Tq;break;case 4:i=Eq;break;default:i=eA}n=i.bind(null,e,n,t),i=void 0,!ib||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function AE(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=tl(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}K2(function(){var l=s,u=YS(n),d=[];e:{var f=TF.get(t);if(f!==void 0){var m=nA,_=t;switch(t){case"keypress":if(dy(n)===0)break e;case"keydown":case"keyup":m=Fq;break;case"focusin":_="focus",m=wE;break;case"focusout":_="blur",m=wE;break;case"beforeblur":case"afterblur":m=wE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Iq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Vq;break;case yF:case vF:case _F:m=kq;break;case wF:m=Bq;break;case"scroll":m=Cq;break;case"wheel":m=zq;break;case"copy":case"cut":case"paste":m=xq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=XP}var y=(e&4)!==0,T=!y&&t==="scroll",E=y?f!==null?f+"Capture":null:f;y=[];for(var w=l,C;w!==null;){C=w;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,E!==null&&(S=cp(w,E),S!=null&&y.push(mp(w,S,C)))),T)break;w=w.return}0<y.length&&(f=new m(f,_,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==nb&&(_=n.relatedTarget||n.fromElement)&&(tl(_)||_[zo]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=l,_=_?tl(_):null,_!==null&&(T=Ql(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=l),m!==_)){if(y=YP,S="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=XP,S="onPointerLeave",E="onPointerEnter",w="pointer"),T=m==null?f:ju(m),C=_==null?f:ju(_),f=new y(S,w+"leave",m,n,u),f.target=T,f.relatedTarget=C,S=null,tl(u)===l&&(y=new y(E,w+"enter",_,n,u),y.target=C,y.relatedTarget=T,S=y),T=S,m&&_)t:{for(y=m,E=_,w=0,C=y;C;C=mu(C))w++;for(C=0,S=E;S;S=mu(S))C++;for(;0<w-C;)y=mu(y),w--;for(;0<C-w;)E=mu(E),C--;for(;w--;){if(y===E||E!==null&&y===E.alternate)break t;y=mu(y),E=mu(E)}y=null}else y=null;m!==null&&lN(d,f,m,y,!1),_!==null&&T!==null&&lN(d,T,_,y,!0)}}e:{if(f=l?ju(l):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=Jq;else if(tN(f))if(hF)M=tG;else{M=Zq;var D=Xq}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=eG);if(M&&(M=M(t,l))){dF(d,M,n,u);break e}D&&D(t,f,l),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&JC(f,"number",f.value)}switch(D=l?ju(l):window,t){case"focusin":(tN(D)||D.contentEditable==="true")&&(Fu=D,lb=l,kf=null);break;case"focusout":kf=lb=Fu=null;break;case"mousedown":ub=!0;break;case"contextmenu":case"mouseup":case"dragend":ub=!1,oN(d,n,u);break;case"selectionchange":if(iG)break;case"keydown":case"keyup":oN(d,n,u)}var A;if(iA)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Lu?lF(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(cF&&n.locale!=="ko"&&(Lu||I!=="onCompositionStart"?I==="onCompositionEnd"&&Lu&&(A=aF()):(Ma=u,tA="value"in Ma?Ma.value:Ma.textContent,Lu=!0)),D=Jy(l,I),0<D.length&&(I=new JP(I,t,null,n,u),d.push({event:I,listeners:D}),A?I.data=A:(A=uF(n),A!==null&&(I.data=A)))),(A=Kq?qq(t,n):Gq(t,n))&&(l=Jy(l,"onBeforeInput"),0<l.length&&(u=new JP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}EF(d,e)})}function mp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cp(t,n),s!=null&&r.unshift(mp(t,s,i)),s=cp(t,e),s!=null&&r.push(mp(t,s,i))),t=t.return}return r}function mu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lN(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=cp(n,s),c!=null&&o.unshift(mp(n,c,a))):i||(c=cp(n,s),c!=null&&o.push(mp(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cG=/\r\n?/g,lG=/\u0000|\uFFFD/g;function uN(t){return(typeof t=="string"?t:""+t).replace(cG,`
`).replace(lG,"")}function kg(t,e,n){if(e=uN(e),uN(t)!==e&&n)throw Error(oe(425))}function Xy(){}var db=null,hb=null;function fb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pb=typeof setTimeout=="function"?setTimeout:void 0,uG=typeof clearTimeout=="function"?clearTimeout:void 0,dN=typeof Promise=="function"?Promise:void 0,dG=typeof queueMicrotask=="function"?queueMicrotask:typeof dN<"u"?function(t){return dN.resolve(null).then(t).catch(hG)}:pb;function hG(t){setTimeout(function(){throw t})}function kE(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),dp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);dp(e)}function Wa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ih=Math.random().toString(36).slice(2),Us="__reactFiber$"+ih,gp="__reactProps$"+ih,zo="__reactContainer$"+ih,mb="__reactEvents$"+ih,fG="__reactListeners$"+ih,pG="__reactHandles$"+ih;function tl(t){var e=t[Us];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zo]||n[Us]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hN(t);t!==null;){if(n=t[Us])return n;t=hN(t)}return e}t=n,n=t.parentNode}return null}function vm(t){return t=t[Us]||t[zo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ju(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function J_(t){return t[gp]||null}var gb=[],Vu=-1;function Ac(t){return{current:t}}function $t(t){0>Vu||(t.current=gb[Vu],gb[Vu]=null,Vu--)}function Lt(t,e){Vu++,gb[Vu]=t.current,t.current=e}var uc={},mr=Ac(uc),Xr=Ac(!1),Cl=uc;function Ed(t,e){var n=t.type.contextTypes;if(!n)return uc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zr(t){return t=t.childContextTypes,t!=null}function Zy(){$t(Xr),$t(mr)}function fN(t,e,n){if(mr.current!==uc)throw Error(oe(168));Lt(mr,e),Lt(Xr,n)}function bF(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,XK(t)||"Unknown",i));return Xt({},n,r)}function ev(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uc,Cl=mr.current,Lt(mr,t),Lt(Xr,Xr.current),!0}function pN(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=bF(t,e,Cl),r.__reactInternalMemoizedMergedChildContext=t,$t(Xr),$t(mr),Lt(mr,t)):$t(Xr),Lt(Xr,n)}var Io=null,X_=!1,RE=!1;function IF(t){Io===null?Io=[t]:Io.push(t)}function mG(t){X_=!0,IF(t)}function kc(){if(!RE&&Io!==null){RE=!0;var t=0,e=bt;try{var n=Io;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Io=null,X_=!1}catch(i){throw Io!==null&&(Io=Io.slice(t+1)),Y2(JS,kc),i}finally{bt=e,RE=!1}}return null}var $u=[],Bu=0,tv=null,nv=0,Pi=[],Ni=0,bl=null,xo=1,Po="";function Hc(t,e){$u[Bu++]=nv,$u[Bu++]=tv,tv=t,nv=e}function SF(t,e,n){Pi[Ni++]=xo,Pi[Ni++]=Po,Pi[Ni++]=bl,bl=t;var r=xo;t=Po;var i=32-us(r)-1;r&=~(1<<i),n+=1;var s=32-us(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xo=1<<32-us(e)+i|n<<i|r,Po=s+t}else xo=1<<s|n<<i|r,Po=t}function oA(t){t.return!==null&&(Hc(t,1),SF(t,1,0))}function aA(t){for(;t===tv;)tv=$u[--Bu],$u[Bu]=null,nv=$u[--Bu],$u[Bu]=null;for(;t===bl;)bl=Pi[--Ni],Pi[Ni]=null,Po=Pi[--Ni],Pi[Ni]=null,xo=Pi[--Ni],Pi[Ni]=null}var pi=null,di=null,Wt=!1,ns=null;function AF(t,e){var n=Li(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pi=t,di=Wa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pi=t,di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bl!==null?{id:xo,overflow:Po}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Li(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pi=t,di=null,!0):!1;default:return!1}}function yb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vb(t){if(Wt){var e=di;if(e){var n=e;if(!mN(t,e)){if(yb(t))throw Error(oe(418));e=Wa(n.nextSibling);var r=pi;e&&mN(t,e)?AF(r,n):(t.flags=t.flags&-4097|2,Wt=!1,pi=t)}}else{if(yb(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Wt=!1,pi=t}}}function gN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pi=t}function Rg(t){if(t!==pi)return!1;if(!Wt)return gN(t),Wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fb(t.type,t.memoizedProps)),e&&(e=di)){if(yb(t))throw kF(),Error(oe(418));for(;e;)AF(t,e),e=Wa(e.nextSibling)}if(gN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){di=Wa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}di=null}}else di=pi?Wa(t.stateNode.nextSibling):null;return!0}function kF(){for(var t=di;t;)t=Wa(t.nextSibling)}function Cd(){di=pi=null,Wt=!1}function cA(t){ns===null?ns=[t]:ns.push(t)}var gG=sa.ReactCurrentBatchConfig;function qh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function xg(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yN(t){var e=t._init;return e(t._payload)}function RF(t){function e(E,w){if(t){var C=E.deletions;C===null?(E.deletions=[w],E.flags|=16):C.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=Qa(E,w),E.index=0,E.sibling=null,E}function s(E,w,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<w?(E.flags|=2,w):C):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,C,S){return w===null||w.tag!==6?(w=LE(C,E.mode,S),w.return=E,w):(w=i(w,C),w.return=E,w)}function c(E,w,C,S){var M=C.type;return M===Du?u(E,w,C.props.children,S,C.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===_a&&yN(M)===w.type)?(S=i(w,C.props),S.ref=qh(E,w,C),S.return=E,S):(S=vy(C.type,C.key,C.props,null,E.mode,S),S.ref=qh(E,w,C),S.return=E,S)}function l(E,w,C,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=FE(C,E.mode,S),w.return=E,w):(w=i(w,C.children||[]),w.return=E,w)}function u(E,w,C,S,M){return w===null||w.tag!==7?(w=yl(C,E.mode,S,M),w.return=E,w):(w=i(w,C),w.return=E,w)}function d(E,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=LE(""+w,E.mode,C),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _g:return C=vy(w.type,w.key,w.props,null,E.mode,C),C.ref=qh(E,null,w),C.return=E,C;case Mu:return w=FE(w,E.mode,C),w.return=E,w;case _a:var S=w._init;return d(E,S(w._payload),C)}if(uf(w)||Bh(w))return w=yl(w,E.mode,C,null),w.return=E,w;xg(E,w)}return null}function f(E,w,C,S){var M=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return M!==null?null:a(E,w,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case _g:return C.key===M?c(E,w,C,S):null;case Mu:return C.key===M?l(E,w,C,S):null;case _a:return M=C._init,f(E,w,M(C._payload),S)}if(uf(C)||Bh(C))return M!==null?null:u(E,w,C,S,null);xg(E,C)}return null}function m(E,w,C,S,M){if(typeof S=="string"&&S!==""||typeof S=="number")return E=E.get(C)||null,a(w,E,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _g:return E=E.get(S.key===null?C:S.key)||null,c(w,E,S,M);case Mu:return E=E.get(S.key===null?C:S.key)||null,l(w,E,S,M);case _a:var D=S._init;return m(E,w,C,D(S._payload),M)}if(uf(S)||Bh(S))return E=E.get(C)||null,u(w,E,S,M,null);xg(w,S)}return null}function _(E,w,C,S){for(var M=null,D=null,A=w,I=w=0,k=null;A!==null&&I<C.length;I++){A.index>I?(k=A,A=null):k=A.sibling;var x=f(E,A,C[I],S);if(x===null){A===null&&(A=k);break}t&&A&&x.alternate===null&&e(E,A),w=s(x,w,I),D===null?M=x:D.sibling=x,D=x,A=k}if(I===C.length)return n(E,A),Wt&&Hc(E,I),M;if(A===null){for(;I<C.length;I++)A=d(E,C[I],S),A!==null&&(w=s(A,w,I),D===null?M=A:D.sibling=A,D=A);return Wt&&Hc(E,I),M}for(A=r(E,A);I<C.length;I++)k=m(A,E,I,C[I],S),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?I:k.key),w=s(k,w,I),D===null?M=k:D.sibling=k,D=k);return t&&A.forEach(function(N){return e(E,N)}),Wt&&Hc(E,I),M}function y(E,w,C,S){var M=Bh(C);if(typeof M!="function")throw Error(oe(150));if(C=M.call(C),C==null)throw Error(oe(151));for(var D=M=null,A=w,I=w=0,k=null,x=C.next();A!==null&&!x.done;I++,x=C.next()){A.index>I?(k=A,A=null):k=A.sibling;var N=f(E,A,x.value,S);if(N===null){A===null&&(A=k);break}t&&A&&N.alternate===null&&e(E,A),w=s(N,w,I),D===null?M=N:D.sibling=N,D=N,A=k}if(x.done)return n(E,A),Wt&&Hc(E,I),M;if(A===null){for(;!x.done;I++,x=C.next())x=d(E,x.value,S),x!==null&&(w=s(x,w,I),D===null?M=x:D.sibling=x,D=x);return Wt&&Hc(E,I),M}for(A=r(E,A);!x.done;I++,x=C.next())x=m(A,E,I,x.value,S),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?I:x.key),w=s(x,w,I),D===null?M=x:D.sibling=x,D=x);return t&&A.forEach(function(P){return e(E,P)}),Wt&&Hc(E,I),M}function T(E,w,C,S){if(typeof C=="object"&&C!==null&&C.type===Du&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case _g:e:{for(var M=C.key,D=w;D!==null;){if(D.key===M){if(M=C.type,M===Du){if(D.tag===7){n(E,D.sibling),w=i(D,C.props.children),w.return=E,E=w;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===_a&&yN(M)===D.type){n(E,D.sibling),w=i(D,C.props),w.ref=qh(E,D,C),w.return=E,E=w;break e}n(E,D);break}else e(E,D);D=D.sibling}C.type===Du?(w=yl(C.props.children,E.mode,S,C.key),w.return=E,E=w):(S=vy(C.type,C.key,C.props,null,E.mode,S),S.ref=qh(E,w,C),S.return=E,E=S)}return o(E);case Mu:e:{for(D=C.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(E,w.sibling),w=i(w,C.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=FE(C,E.mode,S),w.return=E,E=w}return o(E);case _a:return D=C._init,T(E,w,D(C._payload),S)}if(uf(C))return _(E,w,C,S);if(Bh(C))return y(E,w,C,S);xg(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,C),w.return=E,E=w):(n(E,w),w=LE(C,E.mode,S),w.return=E,E=w),o(E)):n(E,w)}return T}var bd=RF(!0),xF=RF(!1),rv=Ac(null),iv=null,Hu=null,lA=null;function uA(){lA=Hu=iv=null}function dA(t){var e=rv.current;$t(rv),t._currentValue=e}function _b(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ju(t,e){iv=t,lA=Hu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qr=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(lA!==t)if(t={context:t,memoizedValue:e,next:null},Hu===null){if(iv===null)throw Error(oe(308));Hu=t,iv.dependencies={lanes:0,firstContext:t}}else Hu=Hu.next=t;return e}var nl=null;function hA(t){nl===null?nl=[t]:nl.push(t)}function PF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hA(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wo(t,r)}function Wo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wa=!1;function fA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Uo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wo(t,n)}return i=r.interleaved,i===null?(e.next=e,hA(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wo(t,n)}function hy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,XS(t,n)}}function vN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sv(t,e,n,r){var i=t.updateQueue;wa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,y=a;switch(f=e,m=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=Xt({},d,f);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Sl|=o,t.lanes=o,t.memoizedState=d}}function _N(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var _m={},Ys=Ac(_m),yp=Ac(_m),vp=Ac(_m);function rl(t){if(t===_m)throw Error(oe(174));return t}function pA(t,e){switch(Lt(vp,e),Lt(yp,t),Lt(Ys,_m),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ZC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ZC(e,t)}$t(Ys),Lt(Ys,e)}function Id(){$t(Ys),$t(yp),$t(vp)}function OF(t){rl(vp.current);var e=rl(Ys.current),n=ZC(e,t.type);e!==n&&(Lt(yp,t),Lt(Ys,n))}function mA(t){yp.current===t&&($t(Ys),$t(yp))}var Gt=Ac(0);function ov(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xE=[];function gA(){for(var t=0;t<xE.length;t++)xE[t]._workInProgressVersionPrimary=null;xE.length=0}var fy=sa.ReactCurrentDispatcher,PE=sa.ReactCurrentBatchConfig,Il=0,Jt=null,kn=null,Fn=null,av=!1,Rf=!1,_p=0,yG=0;function or(){throw Error(oe(321))}function yA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ps(t[n],e[n]))return!1;return!0}function vA(t,e,n,r,i,s){if(Il=s,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fy.current=t===null||t.memoizedState===null?TG:EG,t=n(r,i),Rf){s=0;do{if(Rf=!1,_p=0,25<=s)throw Error(oe(301));s+=1,Fn=kn=null,e.updateQueue=null,fy.current=CG,t=n(r,i)}while(Rf)}if(fy.current=cv,e=kn!==null&&kn.next!==null,Il=0,Fn=kn=Jt=null,av=!1,e)throw Error(oe(300));return t}function _A(){var t=_p!==0;return _p=0,t}function xs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Jt.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function $i(){if(kn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var e=Fn===null?Jt.memoizedState:Fn.next;if(e!==null)Fn=e,kn=t;else{if(t===null)throw Error(oe(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Fn===null?Jt.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function wp(t,e){return typeof e=="function"?e(t):e}function NE(t){var e=$i(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=kn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((Il&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Jt.lanes|=u,Sl|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,ps(r,e.memoizedState)||(qr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Jt.lanes|=s,Sl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function OE(t){var e=$i(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ps(s,e.memoizedState)||(qr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function MF(){}function DF(t,e){var n=Jt,r=$i(),i=e(),s=!ps(r.memoizedState,i);if(s&&(r.memoizedState=i,qr=!0),r=r.queue,wA(UF.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Fn!==null&&Fn.memoizedState.tag&1){if(n.flags|=2048,Tp(9,FF.bind(null,n,r,i,e),void 0,null),$n===null)throw Error(oe(349));Il&30||LF(n,e,i)}return i}function LF(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FF(t,e,n,r){e.value=n,e.getSnapshot=r,jF(e)&&VF(t)}function UF(t,e,n){return n(function(){jF(e)&&VF(t)})}function jF(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ps(t,n)}catch{return!0}}function VF(t){var e=Wo(t,1);e!==null&&ds(e,t,1,-1)}function wN(t){var e=xs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:t},e.queue=t,t=t.dispatch=wG.bind(null,Jt,t),[e.memoizedState,t]}function Tp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $F(){return $i().memoizedState}function py(t,e,n,r){var i=xs();Jt.flags|=t,i.memoizedState=Tp(1|e,n,void 0,r===void 0?null:r)}function Z_(t,e,n,r){var i=$i();r=r===void 0?null:r;var s=void 0;if(kn!==null){var o=kn.memoizedState;if(s=o.destroy,r!==null&&yA(r,o.deps)){i.memoizedState=Tp(e,n,s,r);return}}Jt.flags|=t,i.memoizedState=Tp(1|e,n,s,r)}function TN(t,e){return py(8390656,8,t,e)}function wA(t,e){return Z_(2048,8,t,e)}function BF(t,e){return Z_(4,2,t,e)}function HF(t,e){return Z_(4,4,t,e)}function zF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WF(t,e,n){return n=n!=null?n.concat([t]):null,Z_(4,4,zF.bind(null,e,t),n)}function TA(){}function KF(t,e){var n=$i();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qF(t,e){var n=$i();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GF(t,e,n){return Il&21?(ps(n,e)||(n=Z2(),Jt.lanes|=n,Sl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qr=!0),t.memoizedState=n)}function vG(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=PE.transition;PE.transition={};try{t(!1),e()}finally{bt=n,PE.transition=r}}function QF(){return $i().memoizedState}function _G(t,e,n){var r=Ga(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YF(t))JF(e,n);else if(n=PF(t,e,n,r),n!==null){var i=kr();ds(n,t,r,i),XF(n,e,r)}}function wG(t,e,n){var r=Ga(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YF(t))JF(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ps(a,o)){var c=e.interleaved;c===null?(i.next=i,hA(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=PF(t,e,i,r),n!==null&&(i=kr(),ds(n,t,r,i),XF(n,e,r))}}function YF(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function JF(t,e){Rf=av=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XF(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,XS(t,n)}}var cv={readContext:Vi,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},TG={readContext:Vi,useCallback:function(t,e){return xs().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:TN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,py(4194308,4,zF.bind(null,e,t),n)},useLayoutEffect:function(t,e){return py(4194308,4,t,e)},useInsertionEffect:function(t,e){return py(4,2,t,e)},useMemo:function(t,e){var n=xs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_G.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=xs();return t={current:t},e.memoizedState=t},useState:wN,useDebugValue:TA,useDeferredValue:function(t){return xs().memoizedState=t},useTransition:function(){var t=wN(!1),e=t[0];return t=vG.bind(null,t[1]),xs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,i=xs();if(Wt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),$n===null)throw Error(oe(349));Il&30||LF(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,TN(UF.bind(null,r,s,t),[t]),r.flags|=2048,Tp(9,FF.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xs(),e=$n.identifierPrefix;if(Wt){var n=Po,r=xo;n=(r&~(1<<32-us(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_p++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EG={readContext:Vi,useCallback:KF,useContext:Vi,useEffect:wA,useImperativeHandle:WF,useInsertionEffect:BF,useLayoutEffect:HF,useMemo:qF,useReducer:NE,useRef:$F,useState:function(){return NE(wp)},useDebugValue:TA,useDeferredValue:function(t){var e=$i();return GF(e,kn.memoizedState,t)},useTransition:function(){var t=NE(wp)[0],e=$i().memoizedState;return[t,e]},useMutableSource:MF,useSyncExternalStore:DF,useId:QF,unstable_isNewReconciler:!1},CG={readContext:Vi,useCallback:KF,useContext:Vi,useEffect:wA,useImperativeHandle:WF,useInsertionEffect:BF,useLayoutEffect:HF,useMemo:qF,useReducer:OE,useRef:$F,useState:function(){return OE(wp)},useDebugValue:TA,useDeferredValue:function(t){var e=$i();return kn===null?e.memoizedState=t:GF(e,kn.memoizedState,t)},useTransition:function(){var t=OE(wp)[0],e=$i().memoizedState;return[t,e]},useMutableSource:MF,useSyncExternalStore:DF,useId:QF,unstable_isNewReconciler:!1};function Yi(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ew={isMounted:function(t){return(t=t._reactInternals)?Ql(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kr(),i=Ga(t),s=Uo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ka(t,s,i),e!==null&&(ds(e,t,i,r),hy(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kr(),i=Ga(t),s=Uo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ka(t,s,i),e!==null&&(ds(e,t,i,r),hy(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kr(),r=Ga(t),i=Uo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ka(t,i,r),e!==null&&(ds(e,t,r,n),hy(e,t,r))}};function EN(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fp(n,r)||!fp(i,s):!0}function ZF(t,e,n){var r=!1,i=uc,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=Zr(e)?Cl:mr.current,r=e.contextTypes,s=(r=r!=null)?Ed(t,i):uc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ew,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function CN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ew.enqueueReplaceState(e,e.state,null)}function Tb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},fA(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=Zr(e)?Cl:mr.current,i.context=Ed(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wb(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ew.enqueueReplaceState(i,i.state,null),sv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sd(t,e){try{var n="",r=e;do n+=JK(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ME(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Eb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bG=typeof WeakMap=="function"?WeakMap:Map;function eU(t,e,n){n=Uo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uv||(uv=!0,Nb=r),Eb(t,e)},n}function tU(t,e,n){n=Uo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Eb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Eb(t,e),typeof r!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UG.bind(null,t,e,n),e.then(t,t))}function IN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function SN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Uo(-1,1),e.tag=2,Ka(n,e,1))),n.lanes|=1),t)}var IG=sa.ReactCurrentOwner,qr=!1;function Cr(t,e,n,r){e.child=t===null?xF(e,null,n,r):bd(e,t.child,n,r)}function AN(t,e,n,r,i){n=n.render;var s=e.ref;return Ju(e,i),r=vA(t,e,n,r,s,i),n=_A(),t!==null&&!qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i)):(Wt&&n&&oA(e),e.flags|=1,Cr(t,e,r,i),e.child)}function kN(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!RA(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,nU(t,e,s,r,i)):(t=vy(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fp,n(o,r)&&t.ref===e.ref)return Ko(t,e,i)}return e.flags|=1,t=Qa(s,r),t.ref=e.ref,t.return=e,e.child=t}function nU(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fp(s,r)&&t.ref===e.ref)if(qr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(qr=!0);else return e.lanes=t.lanes,Ko(t,e,i)}return Cb(t,e,n,r,i)}function rU(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Wu,ci),ci|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(Wu,ci),ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Lt(Wu,ci),ci|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Lt(Wu,ci),ci|=r;return Cr(t,e,i,n),e.child}function iU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cb(t,e,n,r,i){var s=Zr(n)?Cl:mr.current;return s=Ed(e,s),Ju(e,i),n=vA(t,e,n,r,s,i),r=_A(),t!==null&&!qr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i)):(Wt&&r&&oA(e),e.flags|=1,Cr(t,e,n,i),e.child)}function RN(t,e,n,r,i){if(Zr(n)){var s=!0;ev(e)}else s=!1;if(Ju(e,i),e.stateNode===null)my(t,e),ZF(e,n,r),Tb(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Vi(l):(l=Zr(n)?Cl:mr.current,l=Ed(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&CN(e,o,r,l),wa=!1;var f=e.memoizedState;o.state=f,sv(e,r,o,i),c=e.memoizedState,a!==r||f!==c||Xr.current||wa?(typeof u=="function"&&(wb(e,n,u,r),c=e.memoizedState),(a=wa||EN(e,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,NF(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Yi(e.type,a),o.props=l,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vi(c):(c=Zr(n)?Cl:mr.current,c=Ed(e,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&CN(e,o,r,c),wa=!1,f=e.memoizedState,o.state=f,sv(e,r,o,i);var _=e.memoizedState;a!==d||f!==_||Xr.current||wa?(typeof m=="function"&&(wb(e,n,m,r),_=e.memoizedState),(l=wa||EN(e,n,l,r,f,_,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return bb(t,e,n,r,s,i)}function bb(t,e,n,r,i,s){iU(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&pN(e,n,!1),Ko(t,e,s);r=e.stateNode,IG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bd(e,t.child,null,s),e.child=bd(e,null,a,s)):Cr(t,e,a,s),e.memoizedState=r.state,i&&pN(e,n,!0),e.child}function sU(t){var e=t.stateNode;e.pendingContext?fN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fN(t,e.context,!1),pA(t,e.containerInfo)}function xN(t,e,n,r,i){return Cd(),cA(i),e.flags|=256,Cr(t,e,n,r),e.child}var Ib={dehydrated:null,treeContext:null,retryLane:0};function Sb(t){return{baseLanes:t,cachePool:null,transitions:null}}function oU(t,e,n){var r=e.pendingProps,i=Gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Lt(Gt,i&1),t===null)return vb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rw(o,r,0,null),t=yl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sb(n),e.memoizedState=Ib,t):EA(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return SG(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Qa(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qa(a,s):(s=yl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ib,r}return s=t.child,t=s.sibling,r=Qa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function EA(t,e){return e=rw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pg(t,e,n,r){return r!==null&&cA(r),bd(e,t.child,null,n),t=EA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SG(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ME(Error(oe(422))),Pg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=rw({mode:"visible",children:r.children},i,0,null),s=yl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bd(e,t.child,null,o),e.child.memoizedState=Sb(o),e.memoizedState=Ib,s);if(!(e.mode&1))return Pg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=ME(s,r,void 0),Pg(t,e,o,r)}if(a=(o&t.childLanes)!==0,qr||a){if(r=$n,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wo(t,i),ds(r,t,i,-1))}return kA(),r=ME(Error(oe(421))),Pg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jG.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,di=Wa(i.nextSibling),pi=e,Wt=!0,ns=null,t!==null&&(Pi[Ni++]=xo,Pi[Ni++]=Po,Pi[Ni++]=bl,xo=t.id,Po=t.overflow,bl=e),e=EA(e,r.children),e.flags|=4096,e)}function PN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_b(t.return,e,n)}function DE(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function aU(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Cr(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PN(t,n,e);else if(t.tag===19)PN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Lt(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ov(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),DE(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ov(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}DE(e,!0,n,null,s);break;case"together":DE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function my(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ko(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Qa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AG(t,e,n){switch(e.tag){case 3:sU(e),Cd();break;case 5:OF(e);break;case 1:Zr(e.type)&&ev(e);break;case 4:pA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Lt(rv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Lt(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?oU(t,e,n):(Lt(Gt,Gt.current&1),t=Ko(t,e,n),t!==null?t.sibling:null);Lt(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return aU(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Lt(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,rU(t,e,n)}return Ko(t,e,n)}var cU,Ab,lU,uU;cU=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ab=function(){};lU=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rl(Ys.current);var s=null;switch(n){case"input":i=QC(t,i),r=QC(t,r),s=[];break;case"select":i=Xt({},i,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":i=XC(t,i),r=XC(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xy)}eb(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(op.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(op.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&jt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};uU=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gh(t,e){if(!Wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ar(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kG(t,e,n){var r=e.pendingProps;switch(aA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(e),null;case 1:return Zr(e.type)&&Zy(),ar(e),null;case 3:return r=e.stateNode,Id(),$t(Xr),$t(mr),gA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(Db(ns),ns=null))),Ab(t,e),ar(e),null;case 5:mA(e);var i=rl(vp.current);if(n=e.type,t!==null&&e.stateNode!=null)lU(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return ar(e),null}if(t=rl(Ys.current),Rg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Us]=e,r[gp]=s,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(i=0;i<hf.length;i++)jt(hf[i],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":VP(r,s),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jt("invalid",r);break;case"textarea":BP(r,s),jt("invalid",r)}eb(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&kg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kg(r.textContent,a,t),i=["children",""+a]):op.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":wg(r),$P(r,s,!0);break;case"textarea":wg(r),HP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Us]=e,t[gp]=r,cU(t,e,!1,!1),e.stateNode=t;e:{switch(o=tb(n,r),n){case"dialog":jt("cancel",t),jt("close",t),i=r;break;case"iframe":case"object":case"embed":jt("load",t),i=r;break;case"video":case"audio":for(i=0;i<hf.length;i++)jt(hf[i],t);i=r;break;case"source":jt("error",t),i=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),i=r;break;case"details":jt("toggle",t),i=r;break;case"input":VP(t,r),i=QC(t,r),jt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xt({},r,{value:void 0}),jt("invalid",t);break;case"textarea":BP(t,r),i=XC(t,r),jt("invalid",t);break;default:i=r}eb(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?$2(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&j2(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ap(t,c):typeof c=="number"&&ap(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(op.hasOwnProperty(s)?c!=null&&s==="onScroll"&&jt("scroll",t):c!=null&&KS(t,s,c,o))}switch(n){case"input":wg(t),$P(t,r,!1);break;case"textarea":wg(t),HP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qu(t,!!r.multiple,s,!1):r.defaultValue!=null&&qu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ar(e),null;case 6:if(t&&e.stateNode!=null)uU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=rl(vp.current),rl(Ys.current),Rg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Us]=e,(s=r.nodeValue!==n)&&(t=pi,t!==null))switch(t.tag){case 3:kg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Us]=e,e.stateNode=r}return ar(e),null;case 13:if($t(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wt&&di!==null&&e.mode&1&&!(e.flags&128))kF(),Cd(),e.flags|=98560,s=!1;else if(s=Rg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Us]=e}else Cd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ar(e),s=!1}else ns!==null&&(Db(ns),ns=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?Rn===0&&(Rn=3):kA())),e.updateQueue!==null&&(e.flags|=4),ar(e),null);case 4:return Id(),Ab(t,e),t===null&&pp(e.stateNode.containerInfo),ar(e),null;case 10:return dA(e.type._context),ar(e),null;case 17:return Zr(e.type)&&Zy(),ar(e),null;case 19:if($t(Gt),s=e.memoizedState,s===null)return ar(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Gh(s,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ov(t),o!==null){for(e.flags|=128,Gh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(Gt,Gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&fn()>Ad&&(e.flags|=128,r=!0,Gh(s,!1),e.lanes=4194304)}else{if(!r)if(t=ov(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Wt)return ar(e),null}else 2*fn()-s.renderingStartTime>Ad&&n!==1073741824&&(e.flags|=128,r=!0,Gh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,n=Gt.current,Lt(Gt,r?n&1|2:n&1),e):(ar(e),null);case 22:case 23:return AA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ci&1073741824&&(ar(e),e.subtreeFlags&6&&(e.flags|=8192)):ar(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function RG(t,e){switch(aA(e),e.tag){case 1:return Zr(e.type)&&Zy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Id(),$t(Xr),$t(mr),gA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mA(e),null;case 13:if($t(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Cd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(Gt),null;case 4:return Id(),null;case 10:return dA(e.type._context),null;case 22:case 23:return AA(),null;case 24:return null;default:return null}}var Ng=!1,hr=!1,xG=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function zu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rn(t,e,r)}else n.current=null}function kb(t,e,n){try{n()}catch(r){rn(t,e,r)}}var NN=!1;function PG(t,e){if(db=Qy,t=mF(),sA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hb={focusedElem:t,selectionRange:n},Qy=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,T=_.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?y:Yi(e.type,y),T);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(S){rn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return _=NN,NN=!1,_}function xf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kb(e,n,s)}i=i.next}while(i!==r)}}function tw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dU(t){var e=t.alternate;e!==null&&(t.alternate=null,dU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Us],delete e[gp],delete e[mb],delete e[fG],delete e[pG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hU(t){return t.tag===5||t.tag===3||t.tag===4}function ON(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xy));else if(r!==4&&(t=t.child,t!==null))for(xb(t,e,n),t=t.sibling;t!==null;)xb(t,e,n),t=t.sibling}function Pb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pb(t,e,n),t=t.sibling;t!==null;)Pb(t,e,n),t=t.sibling}var qn=null,es=!1;function ha(t,e,n){for(n=n.child;n!==null;)fU(t,e,n),n=n.sibling}function fU(t,e,n){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(q_,n)}catch{}switch(n.tag){case 5:hr||zu(n,e);case 6:var r=qn,i=es;qn=null,ha(t,e,n),qn=r,es=i,qn!==null&&(es?(t=qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qn.removeChild(n.stateNode));break;case 18:qn!==null&&(es?(t=qn,n=n.stateNode,t.nodeType===8?kE(t.parentNode,n):t.nodeType===1&&kE(t,n),dp(t)):kE(qn,n.stateNode));break;case 4:r=qn,i=es,qn=n.stateNode.containerInfo,es=!0,ha(t,e,n),qn=r,es=i;break;case 0:case 11:case 14:case 15:if(!hr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kb(n,e,o),i=i.next}while(i!==r)}ha(t,e,n);break;case 1:if(!hr&&(zu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rn(n,e,a)}ha(t,e,n);break;case 21:ha(t,e,n);break;case 22:n.mode&1?(hr=(r=hr)||n.memoizedState!==null,ha(t,e,n),hr=r):ha(t,e,n);break;default:ha(t,e,n)}}function MN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xG),e.forEach(function(r){var i=VG.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qn=a.stateNode,es=!1;break e;case 3:qn=a.stateNode.containerInfo,es=!0;break e;case 4:qn=a.stateNode.containerInfo,es=!0;break e}a=a.return}if(qn===null)throw Error(oe(160));fU(s,o,i),qn=null,es=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){rn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pU(e,t),e=e.sibling}function pU(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gi(e,t),As(t),r&4){try{xf(3,t,t.return),tw(3,t)}catch(y){rn(t,t.return,y)}try{xf(5,t,t.return)}catch(y){rn(t,t.return,y)}}break;case 1:Gi(e,t),As(t),r&512&&n!==null&&zu(n,n.return);break;case 5:if(Gi(e,t),As(t),r&512&&n!==null&&zu(n,n.return),t.flags&32){var i=t.stateNode;try{ap(i,"")}catch(y){rn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&L2(i,s),tb(a,o);var l=tb(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?$2(i,d):u==="dangerouslySetInnerHTML"?j2(i,d):u==="children"?ap(i,d):KS(i,u,d,l)}switch(a){case"input":YC(i,s);break;case"textarea":F2(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?qu(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?qu(i,!!s.multiple,s.defaultValue,!0):qu(i,!!s.multiple,s.multiple?[]:"",!1))}i[gp]=s}catch(y){rn(t,t.return,y)}}break;case 6:if(Gi(e,t),As(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){rn(t,t.return,y)}}break;case 3:if(Gi(e,t),As(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dp(e.containerInfo)}catch(y){rn(t,t.return,y)}break;case 4:Gi(e,t),As(t);break;case 13:Gi(e,t),As(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(IA=fn())),r&4&&MN(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(hr=(l=hr)||u,Gi(e,t),hr=l):Gi(e,t),As(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(f=Ie,m=f.child,f.tag){case 0:case 11:case 14:case 15:xf(4,f,f.return);break;case 1:zu(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){rn(r,n,y)}}break;case 5:zu(f,f.return);break;case 22:if(f.memoizedState!==null){LN(d);continue}}m!==null?(m.return=f,Ie=m):LN(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=V2("display",o))}catch(y){rn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(y){rn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gi(e,t),As(t),r&4&&MN(t);break;case 21:break;default:Gi(e,t),As(t)}}function As(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hU(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ap(i,""),r.flags&=-33);var s=ON(t);Pb(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ON(t);xb(t,a,o);break;default:throw Error(oe(161))}}catch(c){rn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NG(t,e,n){Ie=t,mU(t)}function mU(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ng;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||hr;a=Ng;var l=hr;if(Ng=o,(hr=c)&&!l)for(Ie=i;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?FN(i):c!==null?(c.return=o,Ie=c):FN(i);for(;s!==null;)Ie=s,mU(s),s=s.sibling;Ie=i,Ng=a,hr=l}DN(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):DN(t)}}function DN(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hr||tw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_N(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_N(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&dp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}hr||e.flags&512&&Rb(e)}catch(f){rn(e,e.return,f)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function LN(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function FN(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tw(4,e)}catch(c){rn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){rn(e,i,c)}}var s=e.return;try{Rb(e)}catch(c){rn(e,s,c)}break;case 5:var o=e.return;try{Rb(e)}catch(c){rn(e,o,c)}}}catch(c){rn(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var OG=Math.ceil,lv=sa.ReactCurrentDispatcher,CA=sa.ReactCurrentOwner,Ui=sa.ReactCurrentBatchConfig,ft=0,$n=null,En=null,Xn=0,ci=0,Wu=Ac(0),Rn=0,Ep=null,Sl=0,nw=0,bA=0,Pf=null,zr=null,IA=0,Ad=1/0,Eo=null,uv=!1,Nb=null,qa=null,Og=!1,Da=null,dv=0,Nf=0,Ob=null,gy=-1,yy=0;function kr(){return ft&6?fn():gy!==-1?gy:gy=fn()}function Ga(t){return t.mode&1?ft&2&&Xn!==0?Xn&-Xn:gG.transition!==null?(yy===0&&(yy=Z2()),yy):(t=bt,t!==0||(t=window.event,t=t===void 0?16:oF(t.type)),t):1}function ds(t,e,n,r){if(50<Nf)throw Nf=0,Ob=null,Error(oe(185));gm(t,n,r),(!(ft&2)||t!==$n)&&(t===$n&&(!(ft&2)&&(nw|=n),Rn===4&&Ca(t,Xn)),ei(t,r),n===1&&ft===0&&!(e.mode&1)&&(Ad=fn()+500,X_&&kc()))}function ei(t,e){var n=t.callbackNode;gq(t,e);var r=Gy(t,t===$n?Xn:0);if(r===0)n!==null&&KP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&KP(n),e===1)t.tag===0?mG(UN.bind(null,t)):IF(UN.bind(null,t)),dG(function(){!(ft&6)&&kc()}),n=null;else{switch(eF(r)){case 1:n=JS;break;case 4:n=J2;break;case 16:n=qy;break;case 536870912:n=X2;break;default:n=qy}n=CU(n,gU.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gU(t,e){if(gy=-1,yy=0,ft&6)throw Error(oe(327));var n=t.callbackNode;if(Xu()&&t.callbackNode!==n)return null;var r=Gy(t,t===$n?Xn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hv(t,r);else{e=r;var i=ft;ft|=2;var s=vU();($n!==t||Xn!==e)&&(Eo=null,Ad=fn()+500,gl(t,e));do try{LG();break}catch(a){yU(t,a)}while(!0);uA(),lv.current=s,ft=i,En!==null?e=0:($n=null,Xn=0,e=Rn)}if(e!==0){if(e===2&&(i=ob(t),i!==0&&(r=i,e=Mb(t,i))),e===1)throw n=Ep,gl(t,0),Ca(t,r),ei(t,fn()),n;if(e===6)Ca(t,r);else{if(i=t.current.alternate,!(r&30)&&!MG(i)&&(e=hv(t,r),e===2&&(s=ob(t),s!==0&&(r=s,e=Mb(t,s))),e===1))throw n=Ep,gl(t,0),Ca(t,r),ei(t,fn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:zc(t,zr,Eo);break;case 3:if(Ca(t,r),(r&130023424)===r&&(e=IA+500-fn(),10<e)){if(Gy(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pb(zc.bind(null,t,zr,Eo),e);break}zc(t,zr,Eo);break;case 4:if(Ca(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-us(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OG(r/1960))-r,10<r){t.timeoutHandle=pb(zc.bind(null,t,zr,Eo),r);break}zc(t,zr,Eo);break;case 5:zc(t,zr,Eo);break;default:throw Error(oe(329))}}}return ei(t,fn()),t.callbackNode===n?gU.bind(null,t):null}function Mb(t,e){var n=Pf;return t.current.memoizedState.isDehydrated&&(gl(t,e).flags|=256),t=hv(t,e),t!==2&&(e=zr,zr=n,e!==null&&Db(e)),t}function Db(t){zr===null?zr=t:zr.push.apply(zr,t)}function MG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ps(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ca(t,e){for(e&=~bA,e&=~nw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-us(e),r=1<<n;t[n]=-1,e&=~r}}function UN(t){if(ft&6)throw Error(oe(327));Xu();var e=Gy(t,0);if(!(e&1))return ei(t,fn()),null;var n=hv(t,e);if(t.tag!==0&&n===2){var r=ob(t);r!==0&&(e=r,n=Mb(t,r))}if(n===1)throw n=Ep,gl(t,0),Ca(t,e),ei(t,fn()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zc(t,zr,Eo),ei(t,fn()),null}function SA(t,e){var n=ft;ft|=1;try{return t(e)}finally{ft=n,ft===0&&(Ad=fn()+500,X_&&kc())}}function Al(t){Da!==null&&Da.tag===0&&!(ft&6)&&Xu();var e=ft;ft|=1;var n=Ui.transition,r=bt;try{if(Ui.transition=null,bt=1,t)return t()}finally{bt=r,Ui.transition=n,ft=e,!(ft&6)&&kc()}}function AA(){ci=Wu.current,$t(Wu)}function gl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uG(n)),En!==null)for(n=En.return;n!==null;){var r=n;switch(aA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zy();break;case 3:Id(),$t(Xr),$t(mr),gA();break;case 5:mA(r);break;case 4:Id();break;case 13:$t(Gt);break;case 19:$t(Gt);break;case 10:dA(r.type._context);break;case 22:case 23:AA()}n=n.return}if($n=t,En=t=Qa(t.current,null),Xn=ci=e,Rn=0,Ep=null,bA=nw=Sl=0,zr=Pf=null,nl!==null){for(e=0;e<nl.length;e++)if(n=nl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}nl=null}return t}function yU(t,e){do{var n=En;try{if(uA(),fy.current=cv,av){for(var r=Jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}av=!1}if(Il=0,Fn=kn=Jt=null,Rf=!1,_p=0,CA.current=null,n===null||n.return===null){Rn=1,Ep=e,En=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=Xn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=IN(o);if(m!==null){m.flags&=-257,SN(m,o,a,s,e),m.mode&1&&bN(s,l,e),e=m,c=l;var _=e.updateQueue;if(_===null){var y=new Set;y.add(c),e.updateQueue=y}else _.add(c);break e}else{if(!(e&1)){bN(s,l,e),kA();break e}c=Error(oe(426))}}else if(Wt&&a.mode&1){var T=IN(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),SN(T,o,a,s,e),cA(Sd(c,a));break e}}s=c=Sd(c,a),Rn!==4&&(Rn=2),Pf===null?Pf=[s]:Pf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=eU(s,c,e);vN(s,E);break e;case 1:a=c;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(qa===null||!qa.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=tU(s,a,e);vN(s,S);break e}}s=s.return}while(s!==null)}wU(n)}catch(M){e=M,En===n&&n!==null&&(En=n=n.return);continue}break}while(!0)}function vU(){var t=lv.current;return lv.current=cv,t===null?cv:t}function kA(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),$n===null||!(Sl&268435455)&&!(nw&268435455)||Ca($n,Xn)}function hv(t,e){var n=ft;ft|=2;var r=vU();($n!==t||Xn!==e)&&(Eo=null,gl(t,e));do try{DG();break}catch(i){yU(t,i)}while(!0);if(uA(),ft=n,lv.current=r,En!==null)throw Error(oe(261));return $n=null,Xn=0,Rn}function DG(){for(;En!==null;)_U(En)}function LG(){for(;En!==null&&!aq();)_U(En)}function _U(t){var e=EU(t.alternate,t,ci);t.memoizedProps=t.pendingProps,e===null?wU(t):En=e,CA.current=null}function wU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RG(n,e),n!==null){n.flags&=32767,En=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,En=null;return}}else if(n=kG(n,e,ci),n!==null){En=n;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);Rn===0&&(Rn=5)}function zc(t,e,n){var r=bt,i=Ui.transition;try{Ui.transition=null,bt=1,FG(t,e,n,r)}finally{Ui.transition=i,bt=r}return null}function FG(t,e,n,r){do Xu();while(Da!==null);if(ft&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yq(t,s),t===$n&&(En=$n=null,Xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Og||(Og=!0,CU(qy,function(){return Xu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ui.transition,Ui.transition=null;var o=bt;bt=1;var a=ft;ft|=4,CA.current=null,PG(t,n),pU(n,t),rG(hb),Qy=!!db,hb=db=null,t.current=n,NG(n),cq(),ft=a,bt=o,Ui.transition=s}else t.current=n;if(Og&&(Og=!1,Da=t,dv=i),s=t.pendingLanes,s===0&&(qa=null),dq(n.stateNode),ei(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uv)throw uv=!1,t=Nb,Nb=null,t;return dv&1&&t.tag!==0&&Xu(),s=t.pendingLanes,s&1?t===Ob?Nf++:(Nf=0,Ob=t):Nf=0,kc(),null}function Xu(){if(Da!==null){var t=eF(dv),e=Ui.transition,n=bt;try{if(Ui.transition=null,bt=16>t?16:t,Da===null)var r=!1;else{if(t=Da,Da=null,dv=0,ft&6)throw Error(oe(331));var i=ft;for(ft|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ie=l;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:xf(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var f=u.sibling,m=u.return;if(dU(u),u===l){Ie=null;break}if(f!==null){f.return=m,Ie=f;break}Ie=m}}}var _=s.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xf(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Ie=E;break e}Ie=s.return}}var w=t.current;for(Ie=w;Ie!==null;){o=Ie;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Ie=C;else e:for(o=w;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tw(9,a)}}catch(M){rn(a,a.return,M)}if(a===o){Ie=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ie=S;break e}Ie=a.return}}if(ft=i,kc(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(q_,t)}catch{}r=!0}return r}finally{bt=n,Ui.transition=e}}return!1}function jN(t,e,n){e=Sd(n,e),e=eU(t,e,1),t=Ka(t,e,1),e=kr(),t!==null&&(gm(t,1,e),ei(t,e))}function rn(t,e,n){if(t.tag===3)jN(t,t,n);else for(;e!==null;){if(e.tag===3){jN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qa===null||!qa.has(r))){t=Sd(n,t),t=tU(e,t,1),e=Ka(e,t,1),t=kr(),e!==null&&(gm(e,1,t),ei(e,t));break}}e=e.return}}function UG(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kr(),t.pingedLanes|=t.suspendedLanes&n,$n===t&&(Xn&n)===n&&(Rn===4||Rn===3&&(Xn&130023424)===Xn&&500>fn()-IA?gl(t,0):bA|=n),ei(t,e)}function TU(t,e){e===0&&(t.mode&1?(e=Cg,Cg<<=1,!(Cg&130023424)&&(Cg=4194304)):e=1);var n=kr();t=Wo(t,e),t!==null&&(gm(t,e,n),ei(t,n))}function jG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),TU(t,n)}function VG(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),TU(t,n)}var EU;EU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xr.current)qr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qr=!1,AG(t,e,n);qr=!!(t.flags&131072)}else qr=!1,Wt&&e.flags&1048576&&SF(e,nv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;my(t,e),t=e.pendingProps;var i=Ed(e,mr.current);Ju(e,n),i=vA(null,e,r,t,i,n);var s=_A();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zr(r)?(s=!0,ev(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fA(e),i.updater=ew,e.stateNode=i,i._reactInternals=e,Tb(e,r,t,n),e=bb(null,e,r,!0,s,n)):(e.tag=0,Wt&&s&&oA(e),Cr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(my(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BG(r),t=Yi(r,t),i){case 0:e=Cb(null,e,r,t,n);break e;case 1:e=RN(null,e,r,t,n);break e;case 11:e=AN(null,e,r,t,n);break e;case 14:e=kN(null,e,r,Yi(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),Cb(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),RN(t,e,r,i,n);case 3:e:{if(sU(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,NF(t,e),sv(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sd(Error(oe(423)),e),e=xN(t,e,r,n,i);break e}else if(r!==i){i=Sd(Error(oe(424)),e),e=xN(t,e,r,n,i);break e}else for(di=Wa(e.stateNode.containerInfo.firstChild),pi=e,Wt=!0,ns=null,n=xF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cd(),r===i){e=Ko(t,e,n);break e}Cr(t,e,r,n)}e=e.child}return e;case 5:return OF(e),t===null&&vb(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,fb(r,i)?o=null:s!==null&&fb(r,s)&&(e.flags|=32),iU(t,e),Cr(t,e,o,n),e.child;case 6:return t===null&&vb(e),null;case 13:return oU(t,e,n);case 4:return pA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bd(e,null,r,n):Cr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),AN(t,e,r,i,n);case 7:return Cr(t,e,e.pendingProps,n),e.child;case 8:return Cr(t,e,e.pendingProps.children,n),e.child;case 12:return Cr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Lt(rv,r._currentValue),r._currentValue=o,s!==null)if(ps(s.value,o)){if(s.children===i.children&&!Xr.current){e=Ko(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Uo(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),_b(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_b(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Cr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ju(e,n),i=Vi(i),r=r(i),e.flags|=1,Cr(t,e,r,n),e.child;case 14:return r=e.type,i=Yi(r,e.pendingProps),i=Yi(r.type,i),kN(t,e,r,i,n);case 15:return nU(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),my(t,e),e.tag=1,Zr(r)?(t=!0,ev(e)):t=!1,Ju(e,n),ZF(e,r,i),Tb(e,r,i,n),bb(null,e,r,!0,t,n);case 19:return aU(t,e,n);case 22:return rU(t,e,n)}throw Error(oe(156,e.tag))};function CU(t,e){return Y2(t,e)}function $G(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(t,e,n,r){return new $G(t,e,n,r)}function RA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BG(t){if(typeof t=="function")return RA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===GS)return 11;if(t===QS)return 14}return 2}function Qa(t,e){var n=t.alternate;return n===null?(n=Li(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vy(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")RA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Du:return yl(n.children,i,s,e);case qS:o=8,i|=8;break;case WC:return t=Li(12,n,e,i|2),t.elementType=WC,t.lanes=s,t;case KC:return t=Li(13,n,e,i),t.elementType=KC,t.lanes=s,t;case qC:return t=Li(19,n,e,i),t.elementType=qC,t.lanes=s,t;case O2:return rw(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P2:o=10;break e;case N2:o=9;break e;case GS:o=11;break e;case QS:o=14;break e;case _a:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Li(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function yl(t,e,n,r){return t=Li(7,t,r,e),t.lanes=n,t}function rw(t,e,n,r){return t=Li(22,t,r,e),t.elementType=O2,t.lanes=n,t.stateNode={isHidden:!1},t}function LE(t,e,n){return t=Li(6,t,null,e),t.lanes=n,t}function FE(t,e,n){return e=Li(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HG(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yE(0),this.expirationTimes=yE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xA(t,e,n,r,i,s,o,a,c){return t=new HG(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Li(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fA(s),t}function zG(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bU(t){if(!t)return uc;t=t._reactInternals;e:{if(Ql(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Zr(n))return bF(t,n,e)}return e}function IU(t,e,n,r,i,s,o,a,c){return t=xA(n,r,!0,t,i,s,o,a,c),t.context=bU(null),n=t.current,r=kr(),i=Ga(n),s=Uo(r,i),s.callback=e??null,Ka(n,s,i),t.current.lanes=i,gm(t,i,r),ei(t,r),t}function iw(t,e,n,r){var i=e.current,s=kr(),o=Ga(i);return n=bU(n),e.context===null?e.context=n:e.pendingContext=n,e=Uo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ka(i,e,o),t!==null&&(ds(t,i,o,s),hy(t,i,o)),o}function fv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function PA(t,e){VN(t,e),(t=t.alternate)&&VN(t,e)}function WG(){return null}var SU=typeof reportError=="function"?reportError:function(t){console.error(t)};function NA(t){this._internalRoot=t}sw.prototype.render=NA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));iw(t,e,null,null)};sw.prototype.unmount=NA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Al(function(){iw(null,t,null,null)}),e[zo]=null}};function sw(t){this._internalRoot=t}sw.prototype.unstable_scheduleHydration=function(t){if(t){var e=rF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ea.length&&e!==0&&e<Ea[n].priority;n++);Ea.splice(n,0,t),n===0&&sF(t)}};function OA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ow(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $N(){}function KG(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=fv(o);s.call(l)}}var o=IU(e,r,t,0,null,!1,!1,"",$N);return t._reactRootContainer=o,t[zo]=o.current,pp(t.nodeType===8?t.parentNode:t),Al(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=fv(c);a.call(l)}}var c=xA(t,0,!1,null,null,!1,!1,"",$N);return t._reactRootContainer=c,t[zo]=c.current,pp(t.nodeType===8?t.parentNode:t),Al(function(){iw(e,c,n,r)}),c}function aw(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=fv(o);a.call(c)}}iw(e,o,t,i)}else o=KG(n,e,t,i,r);return fv(o)}tF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=df(e.pendingLanes);n!==0&&(XS(e,n|1),ei(e,fn()),!(ft&6)&&(Ad=fn()+500,kc()))}break;case 13:Al(function(){var r=Wo(t,1);if(r!==null){var i=kr();ds(r,t,1,i)}}),PA(t,1)}};ZS=function(t){if(t.tag===13){var e=Wo(t,134217728);if(e!==null){var n=kr();ds(e,t,134217728,n)}PA(t,134217728)}};nF=function(t){if(t.tag===13){var e=Ga(t),n=Wo(t,e);if(n!==null){var r=kr();ds(n,t,e,r)}PA(t,e)}};rF=function(){return bt};iF=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};rb=function(t,e,n){switch(e){case"input":if(YC(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=J_(r);if(!i)throw Error(oe(90));D2(r),YC(r,i)}}}break;case"textarea":F2(t,n);break;case"select":e=n.value,e!=null&&qu(t,!!n.multiple,e,!1)}};z2=SA;W2=Al;var qG={usingClientEntryPoint:!1,Events:[vm,ju,J_,B2,H2,SA]},Qh={findFiberByHostInstance:tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GG={bundleType:Qh.bundleType,version:Qh.version,rendererPackageName:Qh.rendererPackageName,rendererConfig:Qh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=G2(t),t===null?null:t.stateNode},findFiberByHostInstance:Qh.findFiberByHostInstance||WG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{q_=Mg.inject(GG),Qs=Mg}catch{}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qG;Ci.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OA(e))throw Error(oe(200));return zG(t,e,null,n)};Ci.createRoot=function(t,e){if(!OA(t))throw Error(oe(299));var n=!1,r="",i=SU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xA(t,1,!1,null,null,n,!1,r,i),t[zo]=e.current,pp(t.nodeType===8?t.parentNode:t),new NA(e)};Ci.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=G2(e),t=t===null?null:t.stateNode,t};Ci.flushSync=function(t){return Al(t)};Ci.hydrate=function(t,e,n){if(!ow(e))throw Error(oe(200));return aw(null,t,e,!0,n)};Ci.hydrateRoot=function(t,e,n){if(!OA(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SU;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IU(e,null,t,1,n??null,i,!1,s,o),t[zo]=e.current,pp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new sw(e)};Ci.render=function(t,e,n){if(!ow(e))throw Error(oe(200));return aw(null,t,e,!1,n)};Ci.unmountComponentAtNode=function(t){if(!ow(t))throw Error(oe(40));return t._reactRootContainer?(Al(function(){aw(null,null,t,!1,function(){t._reactRootContainer=null,t[zo]=null})}),!0):!1};Ci.unstable_batchedUpdates=SA;Ci.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ow(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return aw(t,e,n,!1,r)};Ci.version="18.3.1-next-f1338f8080-20240426";function AU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AU)}catch(t){console.error(t)}}AU(),A2.exports=Ci;var wm=A2.exports;const kU=m2(wm);var RU,BN=wm;RU=BN.createRoot,BN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cp.apply(this,arguments)}var La;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(La||(La={}));const HN="popstate";function QG(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Lb("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:pv(i)}return JG(e,n,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xU(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YG(){return Math.random().toString(36).substr(2,8)}function zN(t,e){return{usr:t.state,key:t.key,idx:e}}function Lb(t,e,n,r){return n===void 0&&(n=null),Cp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sh(e):e,{state:n,key:e&&e.key||r||YG()})}function pv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function sh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JG(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=La.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Cp({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=La.Pop;let T=u(),E=T==null?null:T-l;l=T,c&&c({action:a,location:y.location,delta:E})}function f(T,E){a=La.Push;let w=Lb(y.location,T,E);l=u()+1;let C=zN(w,l),S=y.createHref(w);try{o.pushState(C,"",S)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(S)}s&&c&&c({action:a,location:y.location,delta:1})}function m(T,E){a=La.Replace;let w=Lb(y.location,T,E);l=u();let C=zN(w,l),S=y.createHref(w);o.replaceState(C,"",S),s&&c&&c({action:a,location:y.location,delta:0})}function _(T){let E=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof T=="string"?T:pv(T);return w=w.replace(/ $/,"%20"),an(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let y={get action(){return a},get location(){return t(i,o)},listen(T){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(HN,d),c=T,()=>{i.removeEventListener(HN,d),c=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let E=_(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(T){return o.go(T)}};return y}var WN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(WN||(WN={}));function XG(t,e,n){return n===void 0&&(n="/"),ZG(t,e,n,!1)}function ZG(t,e,n,r){let i=typeof e=="string"?sh(e):e,s=kd(i.pathname||"/",n);if(s==null)return null;let o=PU(t);e8(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=d8(s);a=l8(o[c],l,r)}return a}function PU(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(an(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Ya([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(an(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),PU(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:a8(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of NU(s.path))i(s,o,c)}),e}function NU(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=NU(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function e8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const t8=/^:[\w-]+$/,n8=3,r8=2,i8=1,s8=10,o8=-2,KN=t=>t==="*";function a8(t,e){let n=t.split("/"),r=n.length;return n.some(KN)&&(r+=o8),e&&(r+=r8),n.filter(i=>!KN(i)).reduce((i,s)=>i+(t8.test(s)?n8:s===""?i8:s8),r)}function c8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function l8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ya([s,d.pathname]),pathnameBase:m8(Ya([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ya([s,d.pathnameBase]))}return o}function mv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=u8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?l[f]=void 0:l[f]=(_||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function u8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xU(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function d8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xU(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function h8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?sh(t):t;return{pathname:n?n.startsWith("/")?n:f8(n,e):e,search:g8(r),hash:y8(i)}}function f8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function UE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function p8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function OU(t,e){let n=p8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function MU(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=sh(t):(i=Cp({},t),an(!i.pathname||!i.pathname.includes("?"),UE("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),UE("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),UE("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=h8(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Ya=t=>t.join("/").replace(/\/\/+/g,"/"),m8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),g8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,y8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function v8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DU=["post","put","patch","delete"];new Set(DU);const _8=["get",...DU];new Set(_8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bp(){return bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bp.apply(this,arguments)}const cw=g.createContext(null),LU=g.createContext(null),Rc=g.createContext(null),lw=g.createContext(null),Yl=g.createContext({outlet:null,matches:[],isDataRoute:!1}),FU=g.createContext(null);function w8(t,e){let{relative:n}=e===void 0?{}:e;Tm()||an(!1);let{basename:r,navigator:i}=g.useContext(Rc),{hash:s,pathname:o,search:a}=uw(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ya([r,o])),i.createHref({pathname:c,search:a,hash:s})}function Tm(){return g.useContext(lw)!=null}function xc(){return Tm()||an(!1),g.useContext(lw).location}function UU(t){g.useContext(Rc).static||g.useLayoutEffect(t)}function oh(){let{isDataRoute:t}=g.useContext(Yl);return t?O8():T8()}function T8(){Tm()||an(!1);let t=g.useContext(cw),{basename:e,future:n,navigator:r}=g.useContext(Rc),{matches:i}=g.useContext(Yl),{pathname:s}=xc(),o=JSON.stringify(OU(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return UU(()=>{a.current=!0}),g.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=MU(l,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ya([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function uw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(Rc),{matches:i}=g.useContext(Yl),{pathname:s}=xc(),o=JSON.stringify(OU(i,r.v7_relativeSplatPath));return g.useMemo(()=>MU(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function E8(t,e){return C8(t,e)}function C8(t,e,n,r){Tm()||an(!1);let{navigator:i}=g.useContext(Rc),{matches:s}=g.useContext(Yl),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=xc(),u;if(e){var d;let T=typeof e=="string"?sh(e):e;c==="/"||(d=T.pathname)!=null&&d.startsWith(c)||an(!1),u=T}else u=l;let f=u.pathname||"/",m=f;if(c!=="/"){let T=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=XG(t,{pathname:m}),y=k8(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Ya([c,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Ya([c,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&y?g.createElement(lw.Provider,{value:{location:bp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:La.Pop}},y):y}function b8(){let t=N8(),e=v8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const I8=g.createElement(b8,null);class S8 extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(Yl.Provider,{value:this.props.routeContext},g.createElement(FU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A8(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(cw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Yl.Provider,{value:e},r)}function k8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||an(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:m}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let m,_=!1,y=null,T=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||I8,c&&(l<0&&f===0?(_=!0,T=null):l===f&&(_=!0,T=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),w=()=>{let C;return m?C=y:_?C=T:d.route.Component?C=g.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,g.createElement(A8,{match:d,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?g.createElement(S8,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var jU=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jU||{}),gv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gv||{});function R8(t){let e=g.useContext(cw);return e||an(!1),e}function x8(t){let e=g.useContext(LU);return e||an(!1),e}function P8(t){let e=g.useContext(Yl);return e||an(!1),e}function VU(t){let e=P8(),n=e.matches[e.matches.length-1];return n.route.id||an(!1),n.route.id}function N8(){var t;let e=g.useContext(FU),n=x8(gv.UseRouteError),r=VU(gv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function O8(){let{router:t}=R8(jU.UseNavigateStable),e=VU(gv.UseNavigateStable),n=g.useRef(!1);return UU(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bp({fromRouteId:e},s)))},[t,e])}function M8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wr(t){an(!1)}function D8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=La.Pop,navigator:s,static:o=!1,future:a}=t;Tm()&&an(!1);let c=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:c,navigator:s,static:o,future:bp({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=sh(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:_="default"}=r,y=g.useMemo(()=>{let T=kd(u,c);return T==null?null:{location:{pathname:T,search:d,hash:f,state:m,key:_},navigationType:i}},[c,u,d,f,m,_,i]);return y==null?null:g.createElement(Rc.Provider,{value:l},g.createElement(lw.Provider,{children:n,value:y}))}function qN(t){let{children:e,location:n}=t;return E8(Fb(e),n)}new Promise(()=>{});function Fb(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let s=[...e,i];if(r.type===g.Fragment){n.push.apply(n,Fb(r.props.children,s));return}r.type!==wr&&an(!1),!r.props.index||!r.props.children||an(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fb(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yv(){return yv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yv.apply(this,arguments)}function $U(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function L8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function F8(t,e){return t.button===0&&(!e||e==="_self")&&!L8(t)}const U8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],j8=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],V8="6";try{window.__reactRouterVersion=V8}catch{}const $8=g.createContext({isTransitioning:!1}),B8="startTransition",GN=HS[B8];function H8(t){let{basename:e,children:n,future:r,window:i}=t,s=g.useRef();s.current==null&&(s.current=QG({window:i,v5Compat:!0}));let o=s.current,[a,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=g.useCallback(d=>{l&&GN?GN(()=>c(d)):c(d)},[c,l]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>M8(r),[r]),g.createElement(D8,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const z8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ip=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d}=e,f=$U(e,U8),{basename:m}=g.useContext(Rc),_,y=!1;if(typeof l=="string"&&W8.test(l)&&(_=l,z8))try{let C=new URL(window.location.href),S=l.startsWith("//")?new URL(C.protocol+l):new URL(l),M=kd(S.pathname,m);S.origin===C.origin&&M!=null?l=M+S.search+S.hash:y=!0}catch{}let T=w8(l,{relative:i}),E=q8(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function w(C){r&&r(C),C.defaultPrevented||E(C)}return g.createElement("a",yv({},f,{href:_||T,onClick:y||s?r:w,ref:n,target:c}))}),QN=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:c,viewTransition:l,children:u}=e,d=$U(e,j8),f=uw(c,{relative:d.relative}),m=xc(),_=g.useContext(LU),{navigator:y,basename:T}=g.useContext(Rc),E=_!=null&&G8(f)&&l===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,C=m.pathname,S=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;i||(C=C.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&T&&(S=kd(S,T)||S);const M=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let D=C===w||!o&&C.startsWith(w)&&C.charAt(M)==="/",A=S!=null&&(S===w||!o&&S.startsWith(w)&&S.charAt(w.length)==="/"),I={isActive:D,isPending:A,isTransitioning:E},k=D?r:void 0,x;typeof s=="function"?x=s(I):x=[s,D?"active":null,A?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(I):a;return g.createElement(Ip,yv({},d,{"aria-current":k,className:x,ref:n,style:N,to:c,viewTransition:l}),typeof u=="function"?u(I):u)});var Ub;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ub||(Ub={}));var YN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(YN||(YN={}));function K8(t){let e=g.useContext(cw);return e||an(!1),e}function q8(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=oh(),l=xc(),u=uw(t,{relative:o});return g.useCallback(d=>{if(F8(d,n)){d.preventDefault();let f=r!==void 0?r:pv(l)===pv(u);c(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[l,c,u,r,i,n,t,s,o,a])}function G8(t,e){e===void 0&&(e={});let n=g.useContext($8);n==null&&an(!1);let{basename:r}=K8(Ub.useViewTransitionState),i=uw(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=kd(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=kd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mv(i.pathname,o)!=null||mv(i.pathname,s)!=null}/*! @azure/msal-common v15.12.0 2025-08-19 */const Z={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Fa={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},il={GET:"GET",POST:"POST"},ah=[Z.OPENID_SCOPE,Z.PROFILE_SCOPE,Z.OFFLINE_ACCESS_SCOPE],JN=[...ah,Z.EMAIL_SCOPE],br={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},XN={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ja={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Dg={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Ar={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},MA={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},dw={QUERY:"query",FRAGMENT:"fragment"},Q8={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},BU={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Lg={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Sp={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Gn={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},DA="appmetadata",Y8="client_info",vv="1",_v={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ai={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Kn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ct={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Of={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},ZN={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},gu={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},jE={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Wc={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},J8={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},HU=300;/*! @azure/msal-common v15.12.0 2025-08-19 */const wv="unexpected_error",X8="post_request_failed";/*! @azure/msal-common v15.12.0 2025-08-19 */const e1={[wv]:"Unexpected error in authentication.",[X8]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class kt extends Error{constructor(e,n,r){const i=n?`${e}: ${n}`:e;super(i),Object.setPrototypeOf(this,kt.prototype),this.errorCode=e||Z.EMPTY_STRING,this.errorMessage=n||Z.EMPTY_STRING,this.subError=r||Z.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function jb(t,e){return new kt(t,e?`${e1[t]} ${e}`:e1[t])}/*! @azure/msal-common v15.12.0 2025-08-19 */const LA="client_info_decoding_error",zU="client_info_empty_error",FA="token_parsing_error",WU="null_or_empty_token",Co="endpoints_resolution_error",KU="network_error",qU="openid_config_error",GU="hash_not_deserialized",Rd="invalid_state",QU="state_mismatch",Vb="state_not_found",YU="nonce_mismatch",UA="auth_time_not_found",JU="max_age_transpired",Z8="multiple_matching_tokens",e7="multiple_matching_accounts",XU="multiple_matching_appMetadata",ZU="request_cannot_be_made",ej="cannot_remove_empty_scope",tj="cannot_append_scopeset",$b="empty_input_scopeset",t7="device_code_polling_cancelled",n7="device_code_expired",r7="device_code_unknown_error",jA="no_account_in_silent_request",nj="invalid_cache_record",VA="invalid_cache_environment",Bb="no_account_found",Hb="no_crypto_object",i7="unexpected_credential_type",s7="invalid_assertion",o7="invalid_client_credential",Xa="token_refresh_required",a7="user_timeout_reached",rj="token_claims_cnf_required_for_signedjwt",ij="authorization_code_missing_from_server_response",sj="binding_key_not_removed",oj="end_session_endpoint_not_supported",$A="key_id_missing",c7="no_network_connectivity",l7="user_canceled",u7="missing_tenant_id_error",Qe="method_not_implemented",d7="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.12.0 2025-08-19 */const t1={[LA]:"The client info could not be parsed/decoded correctly",[zU]:"The client info was empty",[FA]:"Token cannot be parsed",[WU]:"The token is null or empty",[Co]:"Endpoints cannot be resolved",[KU]:"Network request failed",[qU]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[GU]:"The hash parameters could not be deserialized",[Rd]:"State was not the expected format",[QU]:"State mismatch error",[Vb]:"State not found",[YU]:"Nonce mismatch error",[UA]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[JU]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Z8]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[e7]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[XU]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ZU]:"Token request cannot be made without authorization code or refresh token.",[ej]:"Cannot remove null or empty scope from ScopeSet",[tj]:"Cannot append ScopeSet",[$b]:"Empty input ScopeSet cannot be processed",[t7]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[n7]:"Device code is expired.",[r7]:"Device code stopped polling for unknown reasons.",[jA]:"Please pass an account object, silent flow is not supported without account information",[nj]:"Cache record object was null or undefined.",[VA]:"Invalid environment when attempting to create cache entry",[Bb]:"No account found in cache for given key.",[Hb]:"No crypto object detected.",[i7]:"Unexpected credential type.",[s7]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[o7]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Xa]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[a7]:"User defined timeout for device code polling reached",[rj]:"Cannot generate a POP jwt if the token_claims are not populated",[ij]:"Server response does not contain an authorization code to proceed",[sj]:"Could not remove the credential's binding key from storage.",[oj]:"The provided authority does not support logout",[$A]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[c7]:"No network connectivity. Check your internet connection.",[l7]:"User cancelled the flow.",[u7]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Qe]:"This method has not been implemented",[d7]:"The nested app auth bridge is disabled"};class BA extends kt{constructor(e,n){super(e,n?`${t1[e]}: ${n}`:t1[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,BA.prototype)}}function ie(t,e){return new BA(t,e)}/*! @azure/msal-common v15.12.0 2025-08-19 */const Tv={createNewGuid:()=>{throw ie(Qe)},base64Decode:()=>{throw ie(Qe)},base64Encode:()=>{throw ie(Qe)},base64UrlEncode:()=>{throw ie(Qe)},encodeKid:()=>{throw ie(Qe)},async getPublicKeyThumbprint(){throw ie(Qe)},async removeTokenBindingKey(){throw ie(Qe)},async clearKeystore(){throw ie(Qe)},async signJwt(){throw ie(Qe)},async hashString(){throw ie(Qe)}};/*! @azure/msal-common v15.12.0 2025-08-19 */var zt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(zt||(zt={}));let Em=class zb{constructor(e,n,r){this.level=zt.Info;const i=()=>{},s=e||zb.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:zt.Info,this.correlationId=s.correlationId||Z.EMPTY_STRING,this.packageName=n||Z.EMPTY_STRING,this.packageVersion=r||Z.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:zt.Info}}clone(e,n,r){return new zb({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const s=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${zt[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,s,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:zt.Error,containsPii:!1,correlationId:n||Z.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:zt.Error,containsPii:!0,correlationId:n||Z.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:zt.Warning,containsPii:!1,correlationId:n||Z.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:zt.Warning,containsPii:!0,correlationId:n||Z.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:zt.Info,containsPii:!1,correlationId:n||Z.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:zt.Info,containsPii:!0,correlationId:n||Z.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:zt.Verbose,containsPii:!1,correlationId:n||Z.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:zt.Verbose,containsPii:!0,correlationId:n||Z.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:zt.Trace,containsPii:!1,correlationId:n||Z.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:zt.Trace,containsPii:!0,correlationId:n||Z.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.12.0 2025-08-19 */const aj="@azure/msal-common",HA="15.12.0";/*! @azure/msal-common v15.12.0 2025-08-19 */const zA={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v15.12.0 2025-08-19 */const cj="redirect_uri_empty",h7="claims_request_parsing_error",lj="authority_uri_insecure",ff="url_parse_error",uj="empty_url_error",dj="empty_input_scopes_error",WA="invalid_claims",hj="token_request_empty",fj="logout_request_empty",f7="invalid_code_challenge_method",KA="pkce_params_missing",qA="invalid_cloud_discovery_metadata",pj="invalid_authority_metadata",mj="untrusted_authority",hw="missing_ssh_jwk",gj="missing_ssh_kid",p7="missing_nonce_authentication_header",m7="invalid_authentication_header",yj="cannot_set_OIDCOptions",vj="cannot_allow_platform_broker",_j="authority_mismatch",wj="invalid_request_method_for_EAR",Tj="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.12.0 2025-08-19 */const g7={[cj]:"A redirect URI is required for all calls, and none has been set.",[h7]:"Could not parse the given claims request object.",[lj]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[ff]:"URL could not be parsed into appropriate segments.",[uj]:"URL was empty or null.",[dj]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[WA]:"Given claims parameter must be a stringified JSON object.",[hj]:"Token request was empty and not found in cache.",[fj]:"The logout request was null or undefined.",[f7]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[KA]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[qA]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[pj]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[mj]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[hw]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[gj]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[p7]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[m7]:"Invalid authentication header provided",[yj]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[vj]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[_j]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Tj]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[wj]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class GA extends kt{constructor(e){super(e,g7[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,GA.prototype)}}function Nt(t){return new GA(t)}/*! @azure/msal-common v15.12.0 2025-08-19 */class mi{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return r.forEach(s=>{if(s.trim()){const[o,a]=s.split(/=(.+)/g,2);o&&a&&(n[i(o)]=i(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class xn{constructor(e){const n=e?mi.trimArrayEntries([...e]):[],r=n?mi.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw Nt(dj);this.scopes=new Set,r.forEach(i=>this.scopes.add(i))}static fromString(e){const r=(e||Z.EMPTY_STRING).split(" ");return new xn(r)}static createSearchScopes(e){const n=e&&e.length>0?e:[...ah],r=new xn(n);return r.containsOnlyOIDCScopes()?r.removeScope(Z.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new xn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return JN.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw ie(tj)}}removeScope(e){if(!e)throw ie(ej);this.scopes.delete(e.trim())}removeOIDCScopes(){JN.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ie($b);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw ie($b);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),i=this.getScopeCount();return n.size<i+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):Z.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.12.0 2025-08-19 */function n1(t,e){return!!t&&!!e&&t===e.split(".")[1]}function QA(t,e,n,r){if(r){const{oid:i,sub:s,tid:o,name:a,tfp:c,acr:l,preferred_username:u,upn:d,login_hint:f}=r,m=o||c||l||"";return{tenantId:m,localAccountId:i||s||"",name:a,username:u||d||"",loginHint:f,isHomeTenant:n1(m,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:n1(n,t)}}function YA(t,e,n,r){let i=t;if(e){const{isHomeTenant:s,...o}=e;i={...t,...o}}if(n){const{isHomeTenant:s,...o}=QA(t.homeAccountId,t.localAccountId,t.tenantId,n);return i={...i,...o,idTokenClaims:n,idToken:r},i}return i}/*! @azure/msal-common v15.12.0 2025-08-19 */function ch(t,e){const n=y7(t);try{const r=e(n);return JSON.parse(r)}catch{throw ie(FA)}}function y7(t){if(!t)throw ie(WU);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw ie(FA);return n[2]}function Ej(t,e){if(e===0||Date.now()-3e5>t+e)throw ie(JU)}/*! @azure/msal-common v15.12.0 2025-08-19 */function r1(t){if(!t)return t;let e=t.toLowerCase();return mi.endsWith(e,"?")?e=e.slice(0,-1):mi.endsWith(e,"?/")&&(e=e.slice(0,-2)),mi.endsWith(e,"/")||(e+="/"),e}function Cj(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Ev(t){if(!t||t.indexOf("=")<0)return null;try{const e=Cj(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw ie(GU)}return null}function Ap(t,e=!0,n){const r=new Array;return t.forEach((i,s)=>{!e&&n&&s in n?r.push(`${s}=${i}`):r.push(`${s}=${encodeURIComponent(i)}`)}),r.join("&")}function i1(t){if(!t)return t;const e=t.split("#")[0];try{const n=new URL(e),r=n.origin+n.pathname+n.search;return r1(r)}catch{return r1(e)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class yt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Nt(uj);e.includes("#")||(this._urlString=yt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return mi.endsWith(n,"?")?n=n.slice(0,-1):mi.endsWith(n,"?/")&&(n=n.slice(0,-2)),mi.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Nt(ff)}if(!e.HostNameAndPort||!e.PathSegments)throw Nt(ff);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Nt(lj)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return yt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===Ja.COMMON||r[0]===Ja.ORGANIZATIONS)&&(r[0]=e),yt.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Nt(ff);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let i=r.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),r.PathSegments=i,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Nt(ff);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===Z.FORWARD_SLASH){const i=new yt(n).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new yt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Ev(e)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const bj={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},s1=bj.endpointMetadata,JA=bj.instanceDiscoveryMetadata,Ij=new Set;JA.metadata.forEach(t=>{t.aliases.forEach(e=>{Ij.add(e)})});function v7(t,e){var i;let n;const r=t.canonicalAuthority;if(r){const s=new yt(r).getUrlComponents().HostNameAndPort;n=o1(s,(i=t.cloudDiscoveryMetadata)==null?void 0:i.metadata,ai.CONFIG,e)||o1(s,JA.metadata,ai.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function o1(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const i=Cv(e,t);if(i)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),i.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function _7(t){return Cv(JA.metadata,t)}function Cv(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.12.0 2025-08-19 */const bv="cache_quota_exceeded",XA="cache_error_unknown";/*! @azure/msal-common v15.12.0 2025-08-19 */const VE={[bv]:"Exceeded cache storage capacity.",[XA]:"Unexpected error occurred when using cache storage."};class Zu extends kt{constructor(e,n){const r=n||(VE[e]?VE[e]:VE[XA]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Zu.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Wb(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Zu(bv):new Zu(t.name,t.message):new Zu(XA)}/*! @azure/msal-common v15.12.0 2025-08-19 */class Kb{constructor(e,n,r,i,s){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(aj,HA),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(s=>s.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,n,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(r,s))return null;const c=this.getIdToken(e,i,n,r.tenantId);return c&&(a=ch(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=YA(e,r,a,c==null?void 0:c.secret),o)}getTenantProfilesFromAccountEntity(e,n,r,i){const s=e.getAccountInfo();let o=s.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=o.get(r);if(l)o=new Map([[r,l]]);else return[]}const c=[];return o.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(s,a,l,n,i);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var i;if(!e)throw ie(nj);try{e.account&&await this.setAccount(e.account,n),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(s){throw(i=this.commonLogger)==null||i.error("CacheManager.saveCacheRecord: failed"),s instanceof kt?s:Wb(s)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=xn.fromString(e.target);i.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,r,!1))return;const a=this.getAccessTokenCredential(o,n);a&&this.credentialMatchesFilter(a,r)&&xn.fromString(a.target).intersectingScopeSets(s)&&this.removeAccessToken(o,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),i=[];return r.forEach(s=>{var l;const o=this.getAccount(s,n);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const a={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},c=(l=o.tenantProfiles)==null?void 0:l.filter(u=>this.tenantProfileMatchesFilter(u,a));c&&c.length===0||i.push(o)}),i}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===Ct.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(r[i]=s))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;const s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(r=s)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.filter(i).forEach(s=>{this.removeItem(s,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.idToken.filter(i).forEach(s=>{this.removeIdToken(s,n)}),r.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,n)}),r.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Ct.POP)return;const i=r.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{var s;this.commonLogger.error(`Failed to remove token binding key ${i}`,n),(s=this.performanceClient)==null||s.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Gn.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!i){const u=new Map;a.forEach((f,m)=>{f.realm===e.tenantId&&u.set(m,f)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,n)}),s&&n&&s.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const i=r&&r.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(o,n);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,i){const s=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);const o=xn.createSearchScopes(n.scopes),a=n.authenticationScheme||Ct.BEARER,c=a&&a.toLowerCase()!==Ct.BEARER.toLowerCase()?Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME:Gn.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,l,!0)){const _=this.getAccessTokenCredential(m,s);_&&this.credentialMatchesFilter(_,l)&&d.push(_)}});const f=d.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(m=>{this.removeAccessToken(this.generateCredentialKey(m),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,n,r){const i=e.toLowerCase();if(n.clientId&&i.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&i.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&i.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&i.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const s=n.target.asArray();for(let o=0;o<s.length;o++){if(r&&!i.includes(s[o].toLowerCase()))return!1;if(!r&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),i=[];return r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;const o=this.getAccessTokenCredential(s,n);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=n?vv:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Gn.REFRESH_TOKEN,clientId:this.clientId,familyId:o},c=i&&i.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const f=this.getRefreshTokenCredential(d,r);f&&this.credentialMatchesFilter(f,a)&&l.push(f)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&s&&r&&s.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),i=Object.keys(r).map(o=>r[o]),s=i.length;if(s<1)return null;if(s>1)throw ie(XU);return i[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===vv)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const i=v7(this.staticAuthorityOptions,this.commonLogger);if(i.includes(n)&&i.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==Gn.ACCESS_TOKEN&&e.credentialType!==Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:xn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(DA)!==-1}isAuthorityMetadata(e){return e.indexOf(_v.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${_v.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class w7 extends Kb{async setAccount(){throw ie(Qe)}getAccount(){throw ie(Qe)}async setIdTokenCredential(){throw ie(Qe)}getIdTokenCredential(){throw ie(Qe)}async setAccessTokenCredential(){throw ie(Qe)}getAccessTokenCredential(){throw ie(Qe)}async setRefreshTokenCredential(){throw ie(Qe)}getRefreshTokenCredential(){throw ie(Qe)}setAppMetadata(){throw ie(Qe)}getAppMetadata(){throw ie(Qe)}setServerTelemetry(){throw ie(Qe)}getServerTelemetry(){throw ie(Qe)}setAuthorityMetadata(){throw ie(Qe)}getAuthorityMetadata(){throw ie(Qe)}getAuthorityMetadataKeys(){throw ie(Qe)}setThrottlingCache(){throw ie(Qe)}getThrottlingCache(){throw ie(Qe)}removeItem(){throw ie(Qe)}getKeys(){throw ie(Qe)}getAccountKeys(){throw ie(Qe)}getTokenKeys(){throw ie(Qe)}generateCredentialKey(){throw ie(Qe)}generateAccountKey(){throw ie(Qe)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const ti={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.12.0 2025-08-19 */const F={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},T7={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v15.12.0 2025-08-19 */class a1{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Sj{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:T7.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new a1}}startPerformanceMeasurement(){return new a1}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.12.0 2025-08-19 */const Aj={tokenRenewalOffsetSeconds:HU,preventCorsPreflight:!1},E7={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:zt.Info,correlationId:Z.EMPTY_STRING},C7={claimsBasedCachingEnabled:!1},b7={async sendGetRequestAsync(){throw ie(Qe)},async sendPostRequestAsync(){throw ie(Qe)}},I7={sku:Z.SKU,version:HA,cpu:Z.EMPTY_STRING,os:Z.EMPTY_STRING},S7={clientSecret:Z.EMPTY_STRING,clientAssertion:void 0},A7={azureCloudInstance:zA.None,tenant:`${Z.DEFAULT_COMMON_TENANT}`},k7={application:{appName:"",appVersion:""}};function R7({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:f}){const m={...E7,...n};return{authOptions:x7(t),systemOptions:{...Aj,...e},loggerOptions:m,cacheOptions:{...C7,...r},storageInterface:i||new w7(t.clientId,Tv,new Em(m),new Sj),networkInterface:s||b7,cryptoInterface:o||Tv,clientCredentials:a||S7,libraryInfo:{...I7,...c},telemetry:{...k7,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:f||null}}function x7(t){return{clientCapabilities:[],azureCloudOptions:A7,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function kj(t){return t.authOptions.authority.options.protocolMode===ti.OIDC}/*! @azure/msal-common v15.12.0 2025-08-19 */const os={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.12.0 2025-08-19 */function Iv(t,e){if(!t)throw ie(zU);try{const n=e(t);return JSON.parse(n)}catch{throw ie(LA)}}function ed(t){if(!t)throw ie(LA);const e=t.split(Sp.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Z.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.12.0 2025-08-19 */const kl="client_id",Rj="redirect_uri",P7="response_type",N7="response_mode",O7="grant_type",M7="claims",D7="scope",L7="refresh_token",F7="state",U7="nonce",j7="prompt",V7="code",$7="code_challenge",B7="code_challenge_method",H7="code_verifier",z7="client-request-id",W7="x-client-SKU",K7="x-client-VER",q7="x-client-OS",G7="x-client-CPU",Q7="x-client-current-telemetry",Y7="x-client-last-telemetry",J7="x-ms-lib-capability",X7="x-app-name",Z7="x-app-ver",eQ="post_logout_redirect_uri",tQ="id_token_hint",nQ="client_secret",rQ="client_assertion",iQ="client_assertion_type",xj="token_type",Pj="req_cnf",c1="return_spa_code",sQ="nativebroker",oQ="logout_hint",aQ="sid",cQ="login_hint",lQ="domain_hint",uQ="x-client-xtra-sku",Sv="brk_client_id",Av="brk_redirect_uri",qb="instance_aware",dQ="ear_jwk",hQ="ear_jwe_crypto";/*! @azure/msal-common v15.12.0 2025-08-19 */function fw(t,e,n){if(!e)return;const r=t.get(kl);r&&t.has(Sv)&&(n==null||n.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(Rj)},e))}function ZA(t,e){t.set(P7,e)}function fQ(t,e){t.set(N7,e||Q8.QUERY)}function pQ(t){t.set(sQ,"1")}function ek(t,e,n=!0,r=ah){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const i=n?[...e||[],...r]:e||[],s=new xn(i);t.set(D7,s.printScopes())}function tk(t,e){t.set(kl,e)}function nk(t,e){t.set(Rj,e)}function mQ(t,e){t.set(eQ,e)}function gQ(t,e){t.set(tQ,e)}function yQ(t,e){t.set(lQ,e)}function Fg(t,e){t.set(cQ,e)}function kv(t,e){t.set(br.CCS_HEADER,`UPN:${e}`)}function Mf(t,e){t.set(br.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function l1(t,e){t.set(aQ,e)}function rk(t,e,n){const r=CQ(e,n);try{JSON.parse(r)}catch{throw Nt(WA)}t.set(M7,r)}function ik(t,e){t.set(z7,e)}function sk(t,e){t.set(W7,e.sku),t.set(K7,e.version),e.os&&t.set(q7,e.os),e.cpu&&t.set(G7,e.cpu)}function ok(t,e){e!=null&&e.appName&&t.set(X7,e.appName),e!=null&&e.appVersion&&t.set(Z7,e.appVersion)}function vQ(t,e){t.set(j7,e)}function Nj(t,e){e&&t.set(F7,e)}function _Q(t,e){t.set(U7,e)}function Oj(t,e,n){if(e&&n)t.set($7,e),t.set(B7,n);else throw Nt(KA)}function wQ(t,e){t.set(V7,e)}function TQ(t,e){t.set(L7,e)}function EQ(t,e){t.set(H7,e)}function Mj(t,e){t.set(nQ,e)}function Dj(t,e){e&&t.set(rQ,e)}function Lj(t,e){e&&t.set(iQ,e)}function Fj(t,e){t.set(O7,e)}function ak(t){t.set(Y8,"1")}function Uj(t){t.has(qb)||t.set(qb,"true")}function Za(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function CQ(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw Nt(WA)}return e&&e.length>0&&(n.hasOwnProperty(Dg.ACCESS_TOKEN)||(n[Dg.ACCESS_TOKEN]={}),n[Dg.ACCESS_TOKEN][Dg.XMS_CC]={values:e}),JSON.stringify(n)}function ck(t,e){e&&(t.set(xj,Ct.POP),t.set(Pj,e))}function jj(t,e){e&&(t.set(xj,Ct.SSH),t.set(Pj,e))}function Vj(t,e){t.set(Q7,e.generateCurrentRequestHeaderValue()),t.set(Y7,e.generateLastRequestHeaderValue())}function $j(t){t.set(J7,Of.X_MS_LIB_CAPABILITY_VALUE)}function bQ(t,e){t.set(oQ,e)}function pw(t,e,n){t.has(Sv)||t.set(Sv,e),t.has(Av)||t.set(Av,n)}function IQ(t,e){t.set(dQ,encodeURIComponent(e)),t.set(hQ,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function SQ(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.12.0 2025-08-19 */const ts={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.12.0 2025-08-19 */function AQ(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.12.0 2025-08-19 */function kQ(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.12.0 2025-08-19 */function RQ(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.12.0 2025-08-19 */const gi=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}try{const a=t(...s);return o==null||o.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a}},J=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}return r==null||r.setPreQueueTime(e,i),t(...s).then(a=>(n.trace(`Returning result from ${e}`),o==null||o.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a})};/*! @azure/msal-common v15.12.0 2025-08-19 */class mw{constructor(e,n,r,i){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=i}async detectRegion(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=gu.ENVIRONMENT_VARIABLE;else{const s=mw.IMDS_OPTIONS;try{const o=await J(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Z.IMDS_VERSION,s);if(o.status===Fa.SUCCESS&&(r=o.body,n.region_source=gu.IMDS),o.status===Fa.BAD_REQUEST){const a=await J(this.getCurrentVersion.bind(this),F.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!a)return n.region_source=gu.FAILED_AUTO_DETECTION,null;const c=await J(this.getRegionFromIMDS.bind(this),F.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,s);c.status===Fa.SUCCESS&&(r=c.body,n.region_source=gu.IMDS)}}catch{return n.region_source=gu.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=gu.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(F.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Z.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,Z.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(F.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${Z.IMDS_ENDPOINT}?format=json`,e);return r.status===Fa.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}mw.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.12.0 2025-08-19 */function ii(){return Math.round(new Date().getTime()/1e3)}function u1(t){return t.getTime()/1e3}function td(t){return t?new Date(Number(t)*1e3):new Date}function Rv(t,e){const n=Number(t)||0;return ii()+e>n}function xQ(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function PQ(t){return Number(t)>ii()}/*! @azure/msal-common v15.12.0 2025-08-19 */function gw(t,e,n,r,i){return{credentialType:Gn.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:i,lastUpdatedAt:Date.now().toString()}}function yw(t,e,n,r,i,s,o,a,c,l,u,d,f,m,_){var T,E;const y={homeAccountId:t,credentialType:Gn.ACCESS_TOKEN,secret:n,cachedAt:ii().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:i,target:s,tokenType:u||Ct.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),m&&(y.requestedClaims=m,y.requestedClaimsHash=_),((T=y.tokenType)==null?void 0:T.toLowerCase())!==Ct.BEARER.toLowerCase())switch(y.credentialType=Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Ct.POP:const w=ch(n,c);if(!((E=w==null?void 0:w.cnf)!=null&&E.kid))throw ie(rj);y.keyId=w.cnf.kid;break;case Ct.SSH:y.keyId=f}return y}function Bj(t,e,n,r,i,s,o){const a={credentialType:Gn.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function lk(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function d1(t){return t?lk(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Gn.ACCESS_TOKEN||t.credentialType===Gn.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function NQ(t){return t?lk(t)&&t.hasOwnProperty("realm")&&t.credentialType===Gn.ID_TOKEN:!1}function h1(t){return t?lk(t)&&t.credentialType===Gn.REFRESH_TOKEN:!1}function OQ(t,e){const n=t.indexOf(Kn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function MQ(t,e){let n=!1;t&&(n=t.indexOf(Of.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function DQ({environment:t,clientId:e}){return[DA,t,e].join(Sp.CACHE_KEY_SEPARATOR).toLowerCase()}function LQ(t,e){return e?t.indexOf(DA)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function FQ(t,e){return e?t.indexOf(_v.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function f1(){return ii()+_v.REFRESH_TIME_SECONDS}function Ug(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function $E(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function p1(t){return t.expiresAt<=ii()}/*! @azure/msal-common v15.12.0 2025-08-19 */class ur{constructor(e,n,r,i,s,o,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=c||!1,this.regionDiscovery=new mw(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Z.CIAM_AUTH_URL))return ts.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case Z.ADFS:return ts.Adfs;case Z.DSTS:return ts.Dsts}return ts.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new yt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ie(Co)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ie(Co)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ie(Co)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ie(oj);return this.replacePath(this.metadata.end_session_endpoint)}else throw ie(Co)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ie(Co)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ie(Co)}canReplaceTenant(e){return e.PathSegments.length===1&&!ur.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ts.Default&&this.protocolMode!==ti.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const i=new yt(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=s[c];if(c===0&&this.canReplaceTenant(i)){const u=new yt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(n=n.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ts.Adfs||this.protocolMode===ti.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await J(this.updateCloudDiscoveryMetadata.bind(this),F.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await J(this.updateEndpointMetadata.bind(this),F.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(s=this.performanceClient)==null||s.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:f1(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==ai.CACHE&&(r==null?void 0:r.source)!==ai.CACHE&&(e.expiresAt=f1(),e.canonical_authority=this.canonicalAuthority);const i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){var i,s,o;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===ai.HARDCODED_VALUES&&(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&n.metadata){const a=await J(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);Ug(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await J(this.getEndpointMetadataFromNetwork.bind(this),F.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(o=this.authorityOptions.azureRegionConfiguration)!=null&&o.azureRegion&&(r=await J(this.updateMetadataWithRegionalInformation.bind(this),F.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Ug(e,r,!0),ai.NETWORK;throw ie(qU,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ug(e,n,!1),{source:ai.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const i=this.getEndpointMetadataFromHardcodedValues();if(i)return Ug(e,i,!1),{source:ai.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=p1(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ai.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new yt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Nt(pj)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const i=await this.networkInterface.sendGetRequestAsync(n,e);return AQ(i.body)?i.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(i){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${i}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in s1?s1[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.azureRegion;if(n){if(n!==Z.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=jE.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,ur.replaceWithRegionalInformation(e,n);const o=await J(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),F.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((s=this.authorityOptions.azureRegionConfiguration)==null?void 0:s.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=jE.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,ur.replaceWithRegionalInformation(e,o);this.regionDiscoveryMetadata.region_outcome=jE.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await J(this.getCloudDiscoveryMetadataFromNetwork.bind(this),F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return $E(e,r,!0),ai.NETWORK;throw Nt(mj)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Z.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Z.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Z.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),$E(e,n,!1),ai.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const i=_7(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),$E(e,i,!1),ai.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=p1(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),ai.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ts.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),ur.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Cv(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Nt(qA)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),ur.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Z.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(e,n);let o,a;if(kQ(s.body))o=s.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(RQ(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),o=s.body,o.error===Z.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Cv(a,this.hostnameAndPort)}catch(s){if(s instanceof kt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const o=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=ur.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&yt.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==zA.None){const i=n.tenant?n.tenant:Z.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${i}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Z.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ie(Co)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Ij.has(e)}static isPublicCloudAuthority(e){return Z.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const i=new yt(e);i.validateAsUri();const s=i.getUrlComponents();let o=`${n}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${n}.${Z.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=yt.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=ur.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=ur.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=ur.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const i=new yt(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(Z.CIAM_AUTH_URL)){const s=i.HostNameAndPort.split(".")[0];n=`${n}${s}${Z.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}ur.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ja.COMMON,Ja.CONSUMERS,Ja.ORGANIZATIONS]);function UQ(t){var i;const r=(i=new yt(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:i.toLowerCase();switch(r){case Ja.COMMON:case Ja.ORGANIZATIONS:case Ja.CONSUMERS:return;default:return r}}function Hj(t){return t.endsWith(Z.FORWARD_SLASH)?t:`${t}${Z.FORWARD_SLASH}`}function jQ(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Nt(qA)}return{canonicalAuthority:t.authority?Hj(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.12.0 2025-08-19 */async function zj(t,e,n,r,i,s,o){o==null||o.addQueueMeasurement(F.AuthorityFactoryCreateDiscoveredInstance,s);const a=ur.transformCIAMAuthority(Hj(t)),c=new ur(a,e,n,r,i,s,o);try{return await J(c.resolveEndpointsAsync.bind(c),F.AuthorityResolveEndpointsAsync,i,o,s)(),c}catch{throw ie(Co)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class Jl extends kt{constructor(e,n,r,i,s){super(e,n,r),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,Jl.prototype)}}/*! @azure/msal-common v15.12.0 2025-08-19 */function vw(t,e,n){var r;return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class js{static generateThrottlingStorageKey(e){return`${Of.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){var o;const i=js.generateThrottlingStorageKey(n),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,r);return}throw new Jl(((o=s.errorCodes)==null?void 0:o.join(" "))||Z.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,n,r,i){if(js.checkResponseStatus(r)||js.checkResponseForRetryAfter(r)){const s={throttleTime:js.calculateThrottleTime(parseInt(r.headers[br.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(js.generateThrottlingStorageKey(n),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(br.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Of.DEFAULT_THROTTLE_TIME_SECONDS),r+Of.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,i){const s=vw(n,r,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,r.correlationId)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class _w extends kt{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,_w.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function pf(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new _w(t,e,n)}/*! @azure/msal-common v15.12.0 2025-08-19 */class uk{constructor(e,n){this.config=R7(e),this.logger=new Em(this.config.loggerOptions,aj,HA),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[br.CONTENT_TYPE]=Z.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case os.HOME_ACCOUNT_ID:try{const r=ed(e.credential);n[br.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case os.UPN:n[br.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,i,s,o){var c;o&&((c=this.performanceClient)==null||c.addQueueMeasurement(o,s));const a=await this.sendPostRequest(i,e,{body:n,headers:r},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,n,r,i){var o,a,c;js.preProcess(this.cacheManager,e,i);let s;try{s=await J(this.networkClient.sendPostRequestAsync.bind(this.networkClient),F.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(n,r);const l=s.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((o=s.body.refresh_token)==null?void 0:o.length)||0,httpVerToken:l[br.X_MS_HTTP_VERSION]||"",requestId:l[br.X_MS_REQUEST_ID]||""},i)}catch(l){if(l instanceof _w){const u=l.responseHeaders;throw u&&((c=this.performanceClient)==null||c.addFields({httpVerToken:u[br.X_MS_HTTP_VERSION]||"",requestId:u[br.X_MS_REQUEST_ID]||"",contentTypeHeader:u[br.CONTENT_TYPE]||void 0,contentLengthHeader:u[br.CONTENT_LENGTH]||void 0,httpStatus:l.httpStatus},i)),l.error}throw l instanceof kt?l:ie(KU)}return js.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(F.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,i=await zj(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=i}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&pw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Za(n,e.tokenQueryParameters),ik(n,e.correlationId),fw(n,e.correlationId,this.performanceClient),Ap(n)}}/*! @azure/msal-common v15.12.0 2025-08-19 */function Wj(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.12.0 2025-08-19 */class ms{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){var l,u,d,f,m,_,y;const i=new ms;n.authorityType===ts.Adfs?i.authorityType=Lg.ADFS_ACCOUNT_TYPE:n.protocolMode===ti.OIDC?i.authorityType=Lg.GENERIC_ACCOUNT_TYPE:i.authorityType=Lg.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&r&&(s=Iv(e.clientInfo,r)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;const o=e.environment||n&&n.getPreferredCache();if(!o)throw ie(VA);i.environment=o,i.realm=(s==null?void 0:s.utid)||Wj(e.idTokenClaims)||"",i.localAccountId=(s==null?void 0:s.uid)||((l=e.idTokenClaims)==null?void 0:l.oid)||((u=e.idTokenClaims)==null?void 0:u.sub)||"";const a=((d=e.idTokenClaims)==null?void 0:d.preferred_username)||((f=e.idTokenClaims)==null?void 0:f.upn),c=(m=e.idTokenClaims)!=null&&m.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||c||"",i.loginHint=(_=e.idTokenClaims)==null?void 0:_.login_hint,i.name=((y=e.idTokenClaims)==null?void 0:y.name)||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{const T=QA(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[T]}return i}static createFromAccountInfo(e,n,r){var s;const i=new ms;return i.authorityType=e.authorityType||Lg.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=n,i.msGraphHost=r,i.tenantProfiles=Array.from(((s=e.tenantProfiles)==null?void 0:s.values())||[]),i}static generateHomeAccountId(e,n,r,i,s){if(!(n===ts.Adfs||n===ts.Dsts)){if(e)try{const o=Iv(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}r.warning("No client info in response")}return(s==null?void 0:s.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let i=!0;if(r){const s=e.idTokenClaims||{},o=n.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&i}}/*! @azure/msal-common v15.12.0 2025-08-19 */const xv="no_tokens_found",Kj="native_account_unavailable",dk="refresh_token_expired",hk="ux_not_allowed",VQ="interaction_required",$Q="consent_required",BQ="login_required",ww="bad_token";/*! @azure/msal-common v15.12.0 2025-08-19 */const m1=[VQ,$Q,BQ,ww,hk],HQ=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],zQ={[xv]:"No refresh token found in the cache. Please sign-in.",[Kj]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[dk]:"Refresh token has expired.",[ww]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[hk]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class gs extends kt{constructor(e,n,r,i,s,o,a,c){super(e,n,r),Object.setPrototypeOf(this,gs.prototype),this.timestamp=i||Z.EMPTY_STRING,this.traceId=s||Z.EMPTY_STRING,this.correlationId=o||Z.EMPTY_STRING,this.claims=a||Z.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function qj(t,e,n){const r=!!t&&m1.indexOf(t)>-1,i=!!n&&HQ.indexOf(n)>-1,s=!!e&&m1.some(o=>e.indexOf(o)>-1);return r||s||i}function Pv(t){return new gs(t,zQ[t])}/*! @azure/msal-common v15.12.0 2025-08-19 */class lh{static setRequestState(e,n,r){const i=lh.generateLibraryState(e,r);return n?`${i}${Z.RESOURCE_DELIM}${n}`:i}static generateLibraryState(e,n){if(!e)throw ie(Hb);const r={id:e.createNewGuid()};n&&(r.meta=n);const i=JSON.stringify(r);return e.base64Encode(i)}static parseRequestState(e,n){if(!e)throw ie(Hb);if(!n)throw ie(Rd);try{const r=n.split(Z.RESOURCE_DELIM),i=r[0],s=r.length>1?r.slice(1).join(Z.RESOURCE_DELIM):Z.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||Z.EMPTY_STRING,libraryState:a}}catch{throw ie(Rd)}}}/*! @azure/msal-common v15.12.0 2025-08-19 */const WQ={SW:"sw"};class xd{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(F.PopTokenGenerateCnf,e.correlationId);const r=await J(this.generateKid.bind(this),F.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(F.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:WQ.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,i){const{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:c,shrOptions:l}=r,u=o?new yt(o):void 0,d=u==null?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:ii(),m:s==null?void 0:s.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},n,l,r.correlationId)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class KQ{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.12.0 2025-08-19 */class Rl{constructor(e,n,r,i,s,o,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const i=`Error(s): ${e.error_codes||Z.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Z.NOT_AVAILABLE} - Description: ${e.error_description||Z.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Z.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Z.NOT_AVAILABLE}`,s=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,o=new Jl(e.error,i,e.suberror,s,e.status);if(n&&e.status&&e.status>=Fa.SERVER_ERROR_RANGE_START&&e.status<=Fa.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(n&&e.status&&e.status>=Fa.CLIENT_ERROR_RANGE_START&&e.status<=Fa.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw qj(e.error,e.error_description,e.suberror)?new gs(e.error,e.error_description,e.suberror,e.timestamp||Z.EMPTY_STRING,e.trace_id||Z.EMPTY_STRING,e.correlation_id||Z.EMPTY_STRING,e.claims||Z.EMPTY_STRING,s):o}}async handleServerTokenResponse(e,n,r,i,s,o,a,c,l){var _;(_=this.performanceClient)==null||_.addQueueMeasurement(F.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=ch(e.id_token||Z.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&u.nonce!==s.nonce)throw ie(YU);if(i.maxAge||i.maxAge===0){const y=u.auth_time;if(!y)throw ie(UA);Ej(y,i.maxAge)}}this.homeAccountIdentifier=ms.generateHomeAccountId(e.client_info||Z.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,u);let d;s&&s.state&&(d=lh.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;const f=this.generateCacheRecord(e,n,r,i,u,o,s);let m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new KQ(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),a&&!c&&f.account){const y=this.cacheStorage.generateAccountKey(f.account.getAccountInfo());if(!this.cacheStorage.getAccount(y,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Rl.generateAuthenticationResult(this.cryptoObj,n,f,!1,i,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(f,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return Rl.generateAuthenticationResult(this.cryptoObj,n,f,!1,i,u,d,e,l)}generateCacheRecord(e,n,r,i,s,o,a){const c=n.getPreferredCache();if(!c)throw ie(VA);const l=Wj(s);let u,d;e.id_token&&s&&(u=gw(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=fk(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,c,l,a,void 0,this.logger));let f=null;if(e.access_token){const y=e.scope?xn.fromString(e.scope):new xn(i.scopes||[]),T=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,E=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,w=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=r+T,S=C+E,M=w&&w>0?r+w:void 0;f=yw(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant||"",y.printScopes(),C,S,this.cryptoObj.base64Decode,M,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){const T=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=r+T}m=Bj(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,y)}let _=null;return e.foci&&(_={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:f,refreshToken:m,appMetadata:_}}static async generateAuthenticationResult(e,n,r,i,s,o,a,c,l){var C,S,M,D,A;let u=Z.EMPTY_STRING,d=[],f=null,m,_,y=Z.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Ct.POP&&!s.popKid){const I=new xd(e),{secret:k,keyId:x}=r.accessToken;if(!x)throw ie($A);u=await I.signPopToken(k,x,s)}else u=r.accessToken.secret;d=xn.fromString(r.accessToken.target).asArray(),f=td(r.accessToken.expiresOn),m=td(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(_=td(r.accessToken.refreshOn))}r.appMetadata&&(y=r.appMetadata.familyId===vv?vv:"");const T=(o==null?void 0:o.oid)||(o==null?void 0:o.sub)||"",E=(o==null?void 0:o.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const w=r.account?YA(r.account.getAccountInfo(),void 0,o,(C=r.idToken)==null?void 0:C.secret):null;return{authority:n.canonicalAuthority,uniqueId:T,tenantId:E,scopes:d,account:w,idToken:((S=r==null?void 0:r.idToken)==null?void 0:S.secret)||"",idTokenClaims:o||{},accessToken:u,fromCache:i,expiresOn:f,extExpiresOn:m,refreshOn:_,correlationId:s.correlationId,requestId:l||Z.EMPTY_STRING,familyId:y,tokenType:((M=r.accessToken)==null?void 0:M.tokenType)||Z.EMPTY_STRING,state:a?a.userRequestState:Z.EMPTY_STRING,cloudGraphHostName:((D=r.account)==null?void 0:D.cloudGraphHostName)||Z.EMPTY_STRING,msGraphHost:((A=r.account)==null?void 0:A.msGraphHost)||Z.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function fk(t,e,n,r,i,s,o,a,c,l,u,d){d==null||d.verbose("setCachedAccount called");const m=t.getAccountKeys().find(w=>w.startsWith(n));let _=null;m&&(_=t.getAccount(m,i));const y=_||ms.createAccount({homeAccountId:n,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:l==null?void 0:l.cloud_graph_host_name,msGraphHost:l==null?void 0:l.msgraph_host,nativeAccountId:u},e,r),T=y.tenantProfiles||[],E=c||y.realm;if(E&&!T.find(w=>w.tenantId===E)){const w=QA(n,y.localAccountId,E,s);T.push(w)}return y.tenantProfiles=T,y}/*! @azure/msal-common v15.12.0 2025-08-19 */async function Gj(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.12.0 2025-08-19 */class Qj extends uk{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(F.AuthClientAcquireToken,e.correlationId),!e.code)throw ie(ZU);const r=ii(),i=await J(this.executeTokenRequest.bind(this),F.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=(c=i.headers)==null?void 0:c[br.X_MS_REQUEST_ID],o=new Rl(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),J(o.handleServerTokenResponse.bind(o),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,n,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Nt(fj);const n=this.createLogoutUrlQueryString(e);return yt.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(F.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),i=yt.appendQueryString(e.tokenEndpoint,r),s=await J(this.createTokenRequestBody.bind(this),F.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let o;if(n.clientInfo)try{const u=Iv(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${u.uid}${Sp.CLIENT_INFO_SEPARATOR}${u.utid}`,type:os.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}const a=this.createTokenRequestHeaders(o||n.ccsCredential),c=vw(this.config.authOptions.clientId,n);return J(this.executePostToTokenEndpoint.bind(this),F.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(i,s,a,c,n.correlationId,F.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(F.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(tk(n,e.embeddedClientId||((s=e.tokenBodyParameters)==null?void 0:s[kl])||this.config.authOptions.clientId),this.includeRedirectUri)nk(n,e.redirectUri);else if(!e.redirectUri)throw Nt(cj);if(ek(n,e.scopes,!0,this.oidcDefaultScopes),wQ(n,e.code),sk(n,this.config.libraryInfo),ok(n,this.config.telemetry.application),$j(n),this.serverTelemetryManager&&!kj(this.config)&&Vj(n,this.serverTelemetryManager),e.codeVerifier&&EQ(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&Mj(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;Dj(n,await Gj(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Lj(n,o.assertionType)}if(Fj(n,BU.AUTHORIZATION_CODE_GRANT),ak(n),e.authenticationScheme===Ct.POP){const o=new xd(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await J(o.generateCnf.bind(o),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,ck(n,a)}else if(e.authenticationScheme===Ct.SSH)if(e.sshJwk)jj(n,e.sshJwk);else throw Nt(hw);(!mi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rk(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const o=Iv(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${Sp.CLIENT_INFO_SEPARATOR}${o.utid}`,type:os.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case os.HOME_ACCOUNT_ID:try{const o=ed(r.credential);Mf(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case os.UPN:kv(n,r.credential);break}return e.embeddedClientId&&pw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Za(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[c1])&&Za(n,{[c1]:"1"}),fw(n,e.correlationId,this.performanceClient),Ap(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&mQ(n,e.postLogoutRedirectUri),e.correlationId&&ik(n,e.correlationId),e.idTokenHint&&gQ(n,e.idTokenHint),e.state&&Nj(n,e.state),e.logoutHint&&bQ(n,e.logoutHint),e.extraQueryParameters&&Za(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&Uj(n),Ap(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const qQ=300;class GQ extends uk{constructor(e,n){super(e,n)}async acquireToken(e){var o,a;(o=this.performanceClient)==null||o.addQueueMeasurement(F.RefreshTokenClientAcquireToken,e.correlationId);const n=ii(),r=await J(this.executeTokenRequest.bind(this),F.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=(a=r.headers)==null?void 0:a[br.X_MS_REQUEST_ID],s=new Rl(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(r.body),J(s.handleServerTokenResponse.bind(s),F.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Nt(hj);if((r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw ie(jA);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await J(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(i){const s=i instanceof gs&&i.errorCode===xv,o=i instanceof Jl&&i.errorCode===ZN.INVALID_GRANT_ERROR&&i.subError===ZN.CLIENT_MISMATCH_ERROR;if(s||o)return J(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw i}return J(this.acquireTokenWithCachedRefreshToken.bind(this),F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var s,o,a;(s=this.performanceClient)==null||s.addQueueMeasurement(F.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=gi(this.cacheManager.getRefreshToken.bind(this.cacheManager),F.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw Pv(xv);if(r.expiresOn&&Rv(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||qQ))throw(o=this.performanceClient)==null||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Pv(dk);const i={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Ct.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:os.HOME_ACCOUNT_ID}};try{return await J(this.acquireToken.bind(this),F.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(c){if(c instanceof gs&&((a=this.performanceClient)==null||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===ww)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const l=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(l,e.correlationId)}throw c}}async executeTokenRequest(e,n){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(F.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),i=yt.appendQueryString(n.tokenEndpoint,r),s=await J(this.createTokenRequestBody.bind(this),F.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=vw(this.config.authOptions.clientId,e);return J(this.executePostToTokenEndpoint.bind(this),F.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,F.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(F.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(tk(n,e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[kl])||this.config.authOptions.clientId),e.redirectUri&&nk(n,e.redirectUri),ek(n,e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),Fj(n,BU.REFRESH_TOKEN_GRANT),ak(n),sk(n,this.config.libraryInfo),ok(n,this.config.telemetry.application),$j(n),this.serverTelemetryManager&&!kj(this.config)&&Vj(n,this.serverTelemetryManager),TQ(n,e.refreshToken),this.config.clientCredentials.clientSecret&&Mj(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;Dj(n,await Gj(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Lj(n,o.assertionType)}if(e.authenticationScheme===Ct.POP){const o=new xd(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await J(o.generateCnf.bind(o),F.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,ck(n,a)}else if(e.authenticationScheme===Ct.SSH)if(e.sshJwk)jj(n,e.sshJwk);else throw Nt(hw);if((!mi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rk(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case os.HOME_ACCOUNT_ID:try{const o=ed(e.ccsCredential.credential);Mf(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case os.UPN:kv(n,e.ccsCredential.credential);break}return e.embeddedClientId&&pw(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Za(n,e.tokenBodyParameters),fw(n,e.correlationId,this.performanceClient),Ap(n)}}/*! @azure/msal-common v15.12.0 2025-08-19 */class QQ extends uk{constructor(e,n){super(e,n)}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(F.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Wc.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!mi.isEmptyObj(e.claims))throw this.setCacheOutcome(Wc.FORCE_REFRESH_OR_CLAIMS,e.correlationId),ie(Xa);if(!e.account)throw ie(jA);const r=e.account.tenantId||UQ(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,r);if(s){if(PQ(s.cachedAt)||Rv(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Wc.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),ie(Xa);s.refreshOn&&Rv(s.refreshOn,0)&&(n=Wc.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Wc.NO_CACHED_ACCESS_TOKEN,e.correlationId),ie(Xa);const o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await J(this.generateResultFromCacheRecord.bind(this),F.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,i;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(i=this.performanceClient)==null||i.addFields({cacheOutcome:e},n),e!==Wc.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(F.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=ch(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const s=r==null?void 0:r.auth_time;if(!s)throw ie(UA);Ej(s,n.maxAge)}return Rl.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const YQ={sendGetRequestAsync:()=>Promise.reject(ie(Qe)),sendPostRequestAsync:()=>Promise.reject(ie(Qe))};/*! @azure/msal-common v15.12.0 2025-08-19 */function JQ(t,e,n,r){var a,c;const i=e.correlationId,s=new Map;tk(s,e.embeddedClientId||((a=e.extraQueryParameters)==null?void 0:a[kl])||t.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(ek(s,o,!0,(c=t.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),nk(s,e.redirectUri),ik(s,i),fQ(s,e.responseMode),ak(s),e.prompt&&(vQ(s,e.prompt),r==null||r.addFields({prompt:e.prompt},i)),e.domainHint&&(yQ(s,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},i)),e.prompt!==Ar.SELECT_ACCOUNT)if(e.sid&&e.prompt===Ar.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),l1(s,e.sid),r==null||r.addFields({sidFromRequest:!0},i);else if(e.account){const l=eY(e.account);let u=tY(e.account);if(u&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Fg(s,u),r==null||r.addFields({loginHintFromClaim:!0},i);try{const d=ed(e.account.homeAccountId);Mf(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&e.prompt===Ar.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),l1(s,l),r==null||r.addFields({sidFromClaim:!0},i);try{const d=ed(e.account.homeAccountId);Mf(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Fg(s,e.loginHint),kv(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Fg(s,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},i);try{const d=ed(e.account.homeAccountId);Mf(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Fg(s,e.loginHint),kv(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&_Q(s,e.nonce),e.state&&Nj(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&rk(s,e.claims,t.clientCapabilities),e.embeddedClientId&&pw(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(qb))&&Uj(s),s}function pk(t,e,n,r){const i=Ap(e,n,r);return yt.appendQueryString(t.authorizationEndpoint,i)}function XQ(t,e){if(Yj(t,e),!t.code)throw ie(ij);return t}function Yj(t,e){if(!t.state||!e)throw t.state?ie(Vb,"Cached State"):ie(Vb,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw ie(Rd,t.state)}try{r=decodeURIComponent(e)}catch{throw ie(Rd,t.state)}if(n!==r)throw ie(QU);if(t.error||t.error_description||t.suberror){const i=ZQ(t);throw qj(t.error,t.error_description,t.suberror)?new gs(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Jl(t.error||"",t.error_description,t.suberror,i)}}function ZQ(t){var r,i;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(i=t.error_uri)==null?void 0:i.substring(n+e.length):void 0}function eY(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}function tY(t){var e;return t.loginHint||((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.12.0 2025-08-19 */const g1=",",Jj="|";function nY(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[n,r]],[2,[i,s]]]);let a=[];if(e!=null&&e.length){if(a=e.split(g1),a.length<4)return e}else a=Array.from({length:4},()=>Jj);return o.forEach((c,l)=>{var u,d;c.length===2&&((u=c[0])!=null&&u.length)&&((d=c[1])!=null&&d.length)&&rY({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(g1)}function rY(t){const{skuArr:e,index:n,skuName:r,skuVersion:i}=t;n>=e.length||(e[n]=[r,i].join(Jj))}class kp{constructor(e,n){this.cacheOutcome=Wc.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Z.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Z.EMPTY_STRING,this.telemetryCacheKey=Kn.CACHE_KEY+Sp.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Kn.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const i=n.join(Kn.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(Kn.VALUE_SEPARATOR);return[Kn.SCHEMA_VERSION,o,i].join(Kn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=kp.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(Kn.VALUE_SEPARATOR),i=e.errors.slice(0,n).join(Kn.VALUE_SEPARATOR),s=e.errors.length,o=n<s?Kn.OVERFLOW_TRUE:Kn.OVERFLOW_FALSE,a=[s,o].join(Kn.VALUE_SEPARATOR);return[Kn.SCHEMA_VERSION,e.cacheHits,r,i,a].join(Kn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=Kn.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof kt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(Kn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=kp.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const i={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,i=0;const s=e.errors.length;for(n=0;n<s;n++){const o=e.failedRequests[2*n]||Z.EMPTY_STRING,a=e.failedRequests[2*n+1]||Z.EMPTY_STRING,c=e.errors[n]||Z.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+c.length+3,i<Kn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Z.EMPTY_STRING),e.push(this.regionSource||Z.EMPTY_STRING),e.push(this.regionOutcome||Z.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return nY(e)}}/*! @azure/msal-common v15.12.0 2025-08-19 */const Xj="missing_kid_error",Zj="missing_alg_error";/*! @azure/msal-common v15.12.0 2025-08-19 */const iY={[Xj]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Zj]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class mk extends kt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,mk.prototype)}}function y1(t){return new mk(t,iY[t])}/*! @azure/msal-common v15.12.0 2025-08-19 */class gk{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw y1(Xj);if(!e.alg)throw y1(Zj);const n=new gk({typ:e.typ||J8.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const yk="pkce_not_created",vk="ear_jwk_empty",eV="ear_jwe_empty",Gb="crypto_nonexistent",Tw="empty_navigate_uri",tV="hash_empty_error",_k="no_state_in_hash",nV="hash_does_not_contain_known_properties",rV="unable_to_parse_state",iV="state_interaction_type_mismatch",sV="interaction_in_progress",oV="popup_window_error",aV="empty_window_error",Rp="user_cancelled",sY="monitor_popup_timeout",cV="monitor_window_timeout",lV="redirect_in_iframe",uV="block_iframe_reload",dV="block_nested_popups",oY="iframe_closed_prematurely",Ew="silent_logout_unsupported",hV="no_account_error",aY="silent_prompt_value_error",fV="no_token_request_cache_error",pV="unable_to_parse_token_request_cache_error",cY="auth_request_not_set_error",lY="invalid_cache_type",Cw="non_browser_environment",bu="database_not_open",Nv="no_network_connectivity",mV="post_request_failed",gV="get_request_failed",Qb="failed_to_parse_response",yV="unable_to_load_token",wk="crypto_key_not_found",vV="auth_code_required",_V="auth_code_or_nativeAccountId_required",wV="spa_code_and_nativeAccountId_present",Tk="database_unavailable",TV="unable_to_acquire_token_from_native_platform",EV="native_handshake_timeout",CV="native_extension_not_installed",Ek="native_connection_not_established",Df="uninitialized_public_client_application",bV="native_prompt_not_supported",IV="invalid_base64_string",SV="invalid_pop_token_request",AV="failed_to_build_headers",kV="failed_to_parse_headers",_y="failed_to_decrypt_ear_response",Ov="timed_out";/*! @azure/msal-browser v4.21.1 2025-08-27 */const yo="For more visit: aka.ms/msaljs/browser-errors",uY={[yk]:"The PKCE code challenge and verifier could not be generated.",[vk]:"No EAR encryption key provided. This is unexpected.",[eV]:"Server response does not contain ear_jwe property. This is unexpected.",[Gb]:"The crypto object or function is not available.",[Tw]:"Navigation URI is empty. Please check stack trace for more info.",[tV]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${yo}`,[_k]:"Hash does not contain state. Please verify that the request originated from msal.",[nV]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${yo}`,[rV]:"Unable to parse state. Please verify that the request originated from msal.",[iV]:"Hash contains state but the interaction type does not match the caller.",[sV]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${yo}`,[oV]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[aV]:"window.open returned null or undefined window object.",[Rp]:"User cancelled the flow.",[sY]:`Token acquisition in popup failed due to timeout.  ${yo}`,[cV]:`Token acquisition in iframe failed due to timeout.  ${yo}`,[lV]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[uV]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${yo}`,[dV]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[oY]:"The iframe being monitored was closed prematurely.",[Ew]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[hV]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[aY]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[fV]:"No token request found in cache.",[pV]:"The cached token request could not be parsed.",[cY]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[lY]:"Invalid cache type",[Cw]:"Login and token requests are not supported in non-browser environments.",[bu]:"Database is not open!",[Nv]:"No network connectivity. Check your internet connection.",[mV]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[gV]:"Network request failed. Please check the network trace to determine root cause.",[Qb]:"Failed to parse network response. Check network trace.",[yV]:"Error loading token to cache.",[wk]:"Cryptographic Key or Keypair not found in browser storage.",[vV]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[_V]:"An authorization code or nativeAccountId must be provided to this flow.",[wV]:"Request cannot contain both spa code and native account id.",[Tk]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[TV]:`Unable to acquire token from native platform.  ${yo}`,[EV]:"Timed out while attempting to establish connection to browser extension",[CV]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Ek]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${yo}`,[Df]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${yo}`,[bV]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[IV]:"Invalid base64 encoded string.",[SV]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[AV]:"Failed to build request headers object.",[kV]:"Failed to parse response headers",[_y]:"Failed to decrypt ear response",[Ov]:"The request timed out."};class Cm extends kt{constructor(e,n){super(e,uY[e],n),Object.setPrototypeOf(this,Cm.prototype),this.name="BrowserAuthError"}}function _e(t,e){return new Cm(t,e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const Wr={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Oi={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Yh={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Pn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},v1={GET:"GET",POST:"POST"},ba={SIGNIN:"signin",SIGNOUT:"signout"},wn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},jg={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},At={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Me;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(Me||(Me={}));const _1={scopes:ah},RV="jwk",Yb="msal.db",dY=1,hY=`${Yb}.keys`,Er={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},fY=[Er.Default,Er.Skip,Er.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.21.1 2025-08-27 */function Vg(t){return encodeURIComponent(xp(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function dc(t){return xV(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xp(t){return xV(new TextEncoder().encode(t))}function xV(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */function hs(t){return new TextDecoder().decode(ec(t))}function ec(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw _e(IV)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const pY="RSASSA-PKCS1-v1_5",uh="AES-GCM",PV="HKDF",Ck="SHA-256",mY=2048,gY=new Uint8Array([1,0,1]),w1="0123456789abcdef",T1=new Uint32Array(1),bk="raw",NV="encrypt",Ik="decrypt",yY="deriveKey",vY="crypto_subtle_undefined",Sk={name:pY,hash:Ck,modulusLength:mY,publicExponent:gY};function _Y(t){if(!window)throw _e(Cw);if(!window.crypto)throw _e(Gb);if(!t&&!window.crypto.subtle)throw _e(Gb,vY)}async function OV(t,e,n){e==null||e.addQueueMeasurement(F.Sha256Digest,n);const i=new TextEncoder().encode(t);return window.crypto.subtle.digest(Ck,i)}function wY(t){return window.crypto.getRandomValues(t)}function BE(){return window.crypto.getRandomValues(T1),T1[0]}function ys(){const t=Date.now(),e=BE()*1024+(BE()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),i=e&2**30-1,s=BE();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=s>>>24,n[13]=s>>>16,n[14]=s>>>8,n[15]=s;let o="";for(let a=0;a<n.length;a++)o+=w1.charAt(n[a]>>>4),o+=w1.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(o+="-");return o}async function TY(t,e){return window.crypto.subtle.generateKey(Sk,t,e)}async function HE(t){return window.crypto.subtle.exportKey(RV,t)}async function EY(t,e,n){return window.crypto.subtle.importKey(RV,t,Sk,e,n)}async function CY(t,e){return window.crypto.subtle.sign(Sk,t,e)}async function Ak(){const t=await MV(),n={alg:"dir",kty:"oct",k:dc(new Uint8Array(t))};return xp(JSON.stringify(n))}async function bY(t){const e=hs(t),r=JSON.parse(e).k,i=ec(r);return window.crypto.subtle.importKey(bk,i,uh,!1,[Ik])}async function IY(t,e){const n=e.split(".");if(n.length!==5)throw _e(_y,"jwe_length");const r=await bY(t).catch(()=>{throw _e(_y,"import_key")});try{const i=new TextEncoder().encode(n[0]),s=ec(n[2]),o=ec(n[3]),a=ec(n[4]),c=a.byteLength*8,l=new Uint8Array(o.length+a.length);l.set(o),l.set(a,o.length);const u=await window.crypto.subtle.decrypt({name:uh,iv:s,tagLength:c,additionalData:i},r,l);return new TextDecoder().decode(u)}catch{throw _e(_y,"decrypt")}}async function MV(){const t=await window.crypto.subtle.generateKey({name:uh,length:256},!0,[NV,Ik]);return window.crypto.subtle.exportKey(bk,t)}async function E1(t){return window.crypto.subtle.importKey(bk,t,PV,!1,[yY])}async function DV(t,e,n){return window.crypto.subtle.deriveKey({name:PV,salt:e,hash:Ck,info:new TextEncoder().encode(n)},t,{name:uh,length:256},!1,[NV,Ik])}async function SY(t,e,n){const r=new TextEncoder().encode(e),i=window.crypto.getRandomValues(new Uint8Array(16)),s=await DV(t,i,n),o=await window.crypto.subtle.encrypt({name:uh,iv:new Uint8Array(12)},s,r);return{data:dc(new Uint8Array(o)),nonce:dc(i)}}async function C1(t,e,n,r){const i=ec(r),s=await DV(t,ec(e),n),o=await window.crypto.subtle.decrypt({name:uh,iv:new Uint8Array(12)},s,i);return new TextDecoder().decode(o)}async function LV(t){const e=await OV(t),n=new Uint8Array(e);return dc(n)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const Pp="storage_not_supported",Jb="stubbed_public_client_application_called",Mv="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.21.1 2025-08-27 */const wy={[Pp]:"Given storage configuration option was not supported.",[Jb]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Mv]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};wy[Pp],wy[Jb],wy[Mv];class kk extends kt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,kk.prototype)}}function Rk(t){return new kk(t,wy[t])}/*! @azure/msal-browser v4.21.1 2025-08-27 */function FV(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function AY(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function xk(){return window.parent!==window}function kY(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Wr.POPUP_NAME_PREFIX}.`)===0}function No(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function RY(){const e=new yt(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function xY(){if(yt.hashContainsKnownProperties(window.location.hash)&&xk())throw _e(uV)}function PY(t){if(xk()&&!t)throw _e(lV)}function NY(){if(kY())throw _e(dV)}function UV(){if(typeof window>"u")throw _e(Cw)}function jV(t){if(!t)throw _e(Df)}function Pk(t){UV(),xY(),NY(),jV(t)}function b1(t,e){if(Pk(t),PY(e.system.allowRedirectInIframe),e.cache.cacheLocation===Pn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Rk(Mv)}function VV(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function OY(){return ys()}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Dv{navigateInternal(e,n){return Dv.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Dv.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,i)=>{setTimeout(()=>{i(_e(Ov,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class MY{async sendGetRequestAsync(e,n){let r,i={},s=0;const o=I1(n);try{r=await fetch(e,{method:v1.GET,headers:o})}catch(a){throw pf(_e(window.navigator.onLine?gV:Nv),void 0,void 0,a)}i=S1(r.headers);try{return s=r.status,{headers:i,body:await r.json(),status:s}}catch(a){throw pf(_e(Qb),s,i,a)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",i=I1(n);let s,o=0,a={};try{s=await fetch(e,{method:v1.POST,headers:i,body:r})}catch(c){throw pf(_e(window.navigator.onLine?mV:Nv),void 0,void 0,c)}a=S1(s.headers);try{return o=s.status,{headers:a,body:await s.json(),status:o}}catch(c){throw pf(_e(Qb),o,a,c)}}}function I1(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,i])=>{e.append(r,i)}),e}catch(e){throw pf(_e(AV),void 0,void 0,e)}}function S1(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw _e(kV)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const DY=6e4,Xb=1e4,LY=3e4,$V=2e3;function FY({auth:t,cache:e,system:n,telemetry:r},i){const s={clientId:Z.EMPTY_STRING,authority:`${Z.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Z.EMPTY_STRING,authorityMetadata:Z.EMPTY_STRING,redirectUri:typeof window<"u"?No():"",postLogoutRedirectUri:Z.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ti.AAD,OIDCOptions:{serverResponseType:dw.FRAGMENT,defaultScopes:[Z.OPENID_SCOPE,Z.PROFILE_SCOPE,Z.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:zA.None,tenant:Z.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},o={cacheLocation:Pn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Pn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Pn.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:zt.Info,piiLoggingEnabled:!1},l={...{...Aj,loggerOptions:a,networkClient:i?new MY:YQ,navigationClient:new Dv,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||DY,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||Xb,navigateFrameWait:0,redirectNavigationTimeout:LY,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||$V,pollIntervalMilliseconds:Wr.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},u={application:{appName:Z.EMPTY_STRING,appVersion:Z.EMPTY_STRING},client:new Sj};if((t==null?void 0:t.protocolMode)!==ti.OIDC&&(t!=null&&t.OIDCOptions)&&new Em(l.loggerOptions).warning(JSON.stringify(Nt(yj))),t!=null&&t.protocolMode&&t.protocolMode===ti.OIDC&&(l!=null&&l.allowPlatformBroker))throw Nt(vj);return{auth:{...s,...t,OIDCOptions:{...s.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...o,...e},system:l,telemetry:{...u,...r}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const UY="@azure/msal-browser",xl="4.21.1";/*! @azure/msal-browser v4.21.1 2025-08-27 */const Dn="msal",Nk="browser",zE="-",ga=1,Zb=1,jY=`${Dn}.${Nk}.log.level`,VY=`${Dn}.${Nk}.log.pii`,$Y=`${Dn}.${Nk}.platform.auth.dom`,A1=`${Dn}.version`,k1="account.keys",R1="token.keys";function Os(t=Zb){return t<1?`${Dn}.${k1}`:`${Dn}.${t}.${k1}`}function sl(t,e=ga){return e<1?`${Dn}.${R1}.${t}`:`${Dn}.${e}.${R1}.${t}`}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Ok{static loggerCallback(e,n){switch(e){case zt.Error:console.error(n);return;case zt.Info:console.info(n);return;case zt.Verbose:console.debug(n);return;case zt.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=FY(e,this.browserEnvironment);let n;try{n=window[Pn.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(jY),i=(c=n==null?void 0:n.getItem(VY))==null?void 0:c.toLowerCase(),s=i==="true"?!0:i==="false"?!1:void 0,o={...this.config.system.loggerOptions},a=r&&Object.keys(zt).includes(r)?zt[r]:void 0;a&&(o.loggerCallback=Ok.loggerCallback,o.logLevel=a),s!==void 0&&(o.piiLoggingEnabled=s),this.logger=new Em(o,UY,xl),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Pl extends Ok{getModuleName(){return Pl.MODULE_NAME}getId(){return Pl.ID}async initialize(){return this.available=typeof window<"u",this.available}}Pl.MODULE_NAME="";Pl.ID="StandardOperatingContext";/*! @azure/msal-browser v4.21.1 2025-08-27 */class BY{constructor(){this.dbName=Yb,this.version=dY,this.tableName=hY,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",i=>{const s=i;this.db=s.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(_e(Tk)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(bu));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,i)=>{if(!this.db)return i(_e(bu));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),i(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(bu));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(_e(bu));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();s.addEventListener("success",o=>{const a=o;this.closeConnection(),e(a.target.result)}),s.addEventListener("error",o=>{this.closeConnection(),n(o)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(_e(bu));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(Yb),i=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(i),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(i),e(!0))),r.addEventListener("error",()=>(clearTimeout(i),n(!1)))})}}/*! @azure/msal-browser v4.21.1 2025-08-27 */let bw=class{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.21.1 2025-08-27 */class HY{constructor(e){this.inMemoryCache=new bw,this.indexedDBCache=new BY,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Cm&&e.errorCode===Tk)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class qo{constructor(e,n,r){this.logger=e,_Y(r??!1),this.cache=new HY(this.logger),this.performanceClient=n}createNewGuid(){return ys()}base64Encode(e){return xp(e)}base64Decode(e){return hs(e)}base64UrlEncode(e){return Vg(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var u;const n=(u=this.performanceClient)==null?void 0:u.startMeasurement(F.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await TY(qo.EXTRACTABLE,qo.POP_KEY_USAGES),i=await HE(r.publicKey),s={e:i.e,kty:i.kty,n:i.n},o=x1(s),a=await this.hashString(o),c=await HE(r.privateKey),l=await EY(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:l,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw ie(sj)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,i){var C;const s=(C=this.performanceClient)==null?void 0:C.startMeasurement(F.CryptoOptsSignJwt,i),o=await this.cache.getItem(n);if(!o)throw _e(wk);const a=await HE(o.publicKey),c=x1(a),l=Vg(JSON.stringify({kid:n})),u=gk.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:l}),d=Vg(u);e.cnf={jwk:JSON.parse(c)};const f=Vg(JSON.stringify(e)),m=`${d}.${f}`,y=new TextEncoder().encode(m),T=await CY(o.privateKey,y),E=dc(new Uint8Array(T)),w=`${m}.${E}`;return s&&s.end({success:!0}),w}async hashString(e){return LV(e)}}qo.POP_KEY_USAGES=["sign","verify"];qo.EXTRACTABLE=!0;function x1(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.21.1 2025-08-27 */const zY=24*60*60*1e3,eI={Lax:"Lax",None:"None"};class BV{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let i=0;i<r.length;i++){const s=r[i],[o,...a]=decodeURIComponent(s).trim().split("="),c=a.join("=");if(o===n)return c}return""}getUserData(){throw ie(Qe)}setItem(e,n,r,i=!0,s=eI.Lax){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${s};`;if(r){const a=WY(r);o+=`expires=${a};`}(i||s===eI.None)&&(o+="Secure;"),document.cookie=o}async setUserData(){return Promise.reject(ie(Qe))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const i=decodeURIComponent(r).trim().split("=");n.push(i[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function WY(t){const e=new Date;return new Date(e.getTime()+t*zY).toUTCString()}/*! @azure/msal-browser v4.21.1 2025-08-27 */function Lf(t,e){const n=t.getItem(Os(e));return n?JSON.parse(n):[]}function Ff(t,e,n){const r=e.getItem(sl(t,n));if(r){const i=JSON.parse(r);if(i&&i.hasOwnProperty("idToken")&&i.hasOwnProperty("accessToken")&&i.hasOwnProperty("refreshToken"))return i}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function tI(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.21.1 2025-08-27 */const P1="msal.cache.encryption",KY="msal.broadcast.cache";class qY{constructor(e,n,r){if(!window.localStorage)throw Rk(Pp);this.memoryStorage=new bw,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(KY)}async initialize(e){const n=new BV,r=n.getItem(P1);let i={key:"",id:""};if(r)try{i=JSON.parse(r)}catch{}if(i.key&&i.id){const s=gi(ec,F.Base64Decode,this.logger,this.performanceClient,e)(i.key);this.encryptionCookie={id:i.id,key:await J(E1,F.GenerateHKDF,this.logger,this.performanceClient,e)(s)}}else{const s=ys(),o=await J(MV,F.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=gi(dc,F.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(o));this.encryptionCookie={id:s,key:await J(E1,F.GenerateHKDF,this.logger,this.performanceClient,e)(o)};const c={id:s,key:a};n.setItem(P1,JSON.stringify(c),0,!0,eI.None)}await J(this.importExistingCache.bind(this),F.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw _e(Df);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw _e(Df);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=await J(C1,F.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!i)return null;try{return JSON.parse(i)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,i){if(!this.initialized||!this.encryptionCookie)throw _e(Df);const{data:s,nonce:o}=await J(SY,F.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:o,data:s,lastUpdatedAt:i};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Lf(this).forEach(r=>this.removeItem(r));const n=Ff(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Dn)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Lf(this);n=await this.importArray(n,e),n.length?this.setItem(Os(),JSON.stringify(n)):this.removeItem(Os());const r=Ff(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(sl(this.clientId),JSON.stringify(r)):this.removeItem(sl(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let i;try{i=JSON.parse(r)}catch{return null}return tI(i)?i.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):J(C1,F.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,i.nonce,this.getContext(e),i.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),i)}async importArray(e,n){const r=[],i=[];return e.forEach(s=>{const o=this.getItemFromEncryptedCache(s,n).then(a=>{a?(this.memoryStorage.setItem(s,a),r.push(s)):this.removeItem(s)});i.push(o)}),await Promise.all(i),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(F.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:i,context:s}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(s&&s!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${s}`),n.end({success:!1,errorCode:"contextMismatch"});return}i?(this.memoryStorage.setItem(r,i),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.21.1 2025-08-27 */let GY=class{constructor(){if(!window.sessionStorage)throw Rk(Pp)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.21.1 2025-08-27 */const Ne={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.21.1 2025-08-27 */function N1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class nI extends Kb{constructor(e,n,r,i,s,o,a){super(e,r,i,s,a),this.cacheConfig=n,this.logger=i,this.internalStorage=new bw,this.browserStorage=O1(e,n.cacheLocation,i,s),this.temporaryCacheStorage=O1(e,n.temporaryCacheLocation,i,s),this.cookieStorage=new BV,this.eventHandler=o}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=Lf(this.browserStorage,0),r=Ff(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const i=Lf(this.browserStorage,1),s=Ff(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:i.length,currAccessCount:s.accessToken.length,currIdCount:s.idToken.length,currRefreshCount:s.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(Zb,n,i,e),this.updateV0ToCurrent(ga,r.idToken,s.idToken,e),this.updateV0ToCurrent(ga,r.accessToken,s.accessToken,e),this.updateV0ToCurrent(ga,r.refreshToken,s.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Os(0),JSON.stringify(n)):this.browserStorage.removeItem(Os(0)),i.length>0?this.browserStorage.setItem(Os(1),JSON.stringify(i)):this.browserStorage.removeItem(Os(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(s,e,1)}async updateV0ToCurrent(e,n,r,i){const s=[];for(const o of[...n]){const a=this.browserStorage.getItem(o),c=this.validateAndParseJson(a||"");if(!c){N1(n,o);continue}c.lastUpdatedAt||(c.lastUpdatedAt=Date.now().toString(),this.setItem(o,JSON.stringify(c),i));const l=tI(c)?await this.browserStorage.decryptData(o,c,i):c;let u;if(l&&(d1(l)||h1(l))&&(u=l.expiresOn),!l||xQ(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||u&&Rv(u,HU)){this.browserStorage.removeItem(o),N1(n,o),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i);continue}if(this.cacheConfig.cacheLocation!==Pn.LocalStorage||tI(c)){const d=`${Dn}.${e}${zE}${o}`,f=this.browserStorage.getItem(d);if(f){const m=this.validateAndParseJson(f);if(Number(c.lastUpdatedAt)>Number(m.lastUpdatedAt)){s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},i)}));continue}}else{s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{r.push(d),this.performanceClient.incrementFields({upgradedCacheCount:1},i)}));continue}}}return Promise.all(s)}trackVersionChanges(e){const n=this.browserStorage.getItem(A1);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==xl&&this.setItem(A1,xl,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let i=0,s=[];const o=20;for(let a=0;a<=o;a++)try{this.browserStorage.setItem(e,n),a>0&&(a<=i?this.removeAccessTokenKeys(s.slice(0,a),r,0):(this.removeAccessTokenKeys(s.slice(0,i),r,0),this.removeAccessTokenKeys(s.slice(i,a),r)));break}catch(c){const l=Wb(c);if(l.errorCode===bv&&a<o){if(!s.length){const u=e===sl(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,d=e===sl(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;s=[...u,...d],i=u.length}if(s.length<=a)throw l;this.removeAccessToken(s[a],r,!1)}else throw l}}async setUserData(e,n,r,i){let s=0,o=[];const a=20;for(let c=0;c<=a;c++)try{await J(this.browserStorage.setUserData.bind(this.browserStorage),F.SetUserData,this.logger,this.performanceClient)(e,n,r,i),c>0&&(c<=s?this.removeAccessTokenKeys(o.slice(0,c),r,0):(this.removeAccessTokenKeys(o.slice(0,s),r,0),this.removeAccessTokenKeys(o.slice(s,c),r)));break}catch(l){const u=Wb(l);if(u.errorCode===bv&&c<a){if(!o.length){const d=this.getTokenKeys(0).accessToken,f=this.getTokenKeys().accessToken;o=[...d,...f],s=d.length}if(o.length<=c)throw u;this.removeAccessToken(o[c],r,!1)}else throw u}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const i=this.validateAndParseJson(r);return!i||!ms.isAccountEntity(i)?null:Kb.toObject(new ms,i)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===Pn.LocalStorage&&s&&this.eventHandler.emitEvent(Ne.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Lf(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Os(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),i=r.indexOf(e);if(i>-1){if(r.splice(i,1),r.length===0){this.removeItem(Os());return}else this.setItem(Os(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(i=>{i.includes(e.homeAccountId)&&i.includes(e.environment)&&this.browserStorage.removeItem(i)}),this.cacheConfig.cacheLocation===Pn.LocalStorage&&this.eventHandler.emitEvent(Ne.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),i=r.idToken.indexOf(e);i>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(i,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=ga){this.logger.trace("removeAccessTokenKey called");const i=this.getTokenKeys(r);let s=0;if(e.forEach(o=>{const a=i.accessToken.indexOf(o);a>-1&&(i.accessToken.splice(a,1),s++)}),s>0){this.logger.info(`removed ${s} accessToken keys from tokenKeys map`),this.setTokenKeys(i,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),i=r.refreshToken.indexOf(e);i>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(i,1),this.setTokenKeys(r,n))}getTokenKeys(e=ga){return Ff(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=ga){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(sl(this.clientId,r));return}else this.setItem(sl(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!NQ(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(r),this.setTokenKeys(s,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const i=this.validateAndParseJson(r);return!i||!d1(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys(),o=s.accessToken.indexOf(r);o!==-1&&s.accessToken.splice(o,1),this.logger.trace(`access token ${o===-1?"added to":"updated in"} map`),s.accessToken.push(r),this.setTokenKeys(s,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!h1(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(r),this.setTokenKeys(s,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!LQ(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=DQ(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!OQ(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&FQ(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(jg.WRAPPER_SKU,e),this.internalStorage.setItem(jg.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(jg.WRAPPER_SKU)||Z.EMPTY_STRING,n=this.internalStorage.getItem(jg.WRAPPER_VER)||Z.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(XN.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const i=this.validateAndParseJson(r);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(XN.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:ii().toString()};this.setItem(r,JSON.stringify(i),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Ne.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!MQ(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const s=this.cookieStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),s}const i=this.temporaryCacheStorage.getItem(r);if(!i){if(this.cacheConfig.cacheLocation===Pn.LocalStorage){const s=this.browserStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),s}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),i}setTemporaryCache(e,n,r){const i=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(i,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(i,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(Dn)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(Dn)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(F.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i,e);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(i,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return mi.startsWith(e,Dn)?e:`${Dn}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===Gn.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==Ct.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Dn}.${ga}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(zE).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${Dn}.${Zb}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(zE).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(wn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(wn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(wn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(wn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(wn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=xp(JSON.stringify(e));if(this.setTemporaryCache(wn.REQUEST_PARAMS,r,!0),n){const i=xp(n);this.setTemporaryCache(wn.VERIFIER,i,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(wn.REQUEST_PARAMS,!0);if(!e)throw _e(fV);const n=this.getTemporaryCache(wn.VERIFIER,!0);let r,i="";try{r=JSON.parse(hs(e)),n&&(i=hs(n))}catch(s){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${s}`),_e(pV)}return[r,i]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(wn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const n=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${Dn}.${wn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),FV(window),null}}setInteractionInProgress(e,n=ba.SIGNIN){var i;const r=`${Dn}.${wn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw _e(sV);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&((i=this.getInteractionInProgress())==null?void 0:i.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){var a,c,l;const r=gw((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let i;n.claims&&(i=await this.cryptoImpl.hashString(n.claims));const s=yw((l=e.account)==null?void 0:l.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?u1(e.expiresOn):0,e.extExpiresOn?u1(e.extExpiresOn):0,hs,void 0,e.tokenType,void 0,n.sshKid,n.claims,i),o={idToken:r,accessToken:s};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(i){if(i instanceof Zu&&this.performanceClient&&n)try{const s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},n)}catch{}throw i}}}function O1(t,e,n,r){try{switch(e){case Pn.LocalStorage:return new qY(t,n,r);case Pn.SessionStorage:return new GY;case Pn.MemoryStorage:default:break}}catch(i){n.error(i)}return new bw}const QY=(t,e,n,r)=>{const i={cacheLocation:Pn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Pn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new nI(t,i,Tv,e,n,r)};/*! @azure/msal-browser v4.21.1 2025-08-27 */function YY(t,e,n,r,i){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(i||{},r):[]}function JY(t,e,n,r){const i=n.getAccountInfoFilteredBy(t,r);return i?(e.verbose("getAccount: Account matching provided filter found, returning"),i):(e.verbose("getAccount: No matching account found, returning null"),null)}function XY(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const i=n.getAccountInfoFilteredBy({username:t},r);return i?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),i):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function ZY(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const i=n.getAccountInfoFilteredBy({homeAccountId:t},r);return i?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),i):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function eJ(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const i=n.getAccountInfoFilteredBy({localAccountId:t},r);return i?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),i):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function tJ(t,e,n){e.setActiveAccount(t,n)}function nJ(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const rJ="msal.broadcast.event";class iJ{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Em({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(rJ)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const i=r||OY();return this.eventCallbacks.has(i)?(this.logger.error(`Event callback with id: ${i} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(i,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${i}`),i)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,i){var o;const s={eventType:e,interactionType:n||null,payload:r||null,error:i||null,timestamp:Date.now()};switch(e){case Ne.ACCOUNT_ADDED:case Ne.ACCOUNT_REMOVED:case Ne.ACTIVE_ACCOUNT_CHANGED:(o=this.broadcastChannel)==null||o.postMessage(s);break;default:this.invokeCallbacks(s);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],i)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${i}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class HV{constructor(e,n,r,i,s,o,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=s,this.navigationClient=o,this.platformAuthProvider=c,this.correlationId=l||ys(),this.logger=i.clone(Wr.MSAL_SKU,xl,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return yt.getAbsoluteUrl(n,No())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new kp(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const i={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||this.config.auth.authority,o=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&o?this.config.auth.authority.replace(yt.getDomainFromUrl(s),n.environment):s,c=ur.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await J(zj,F.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,i,this.logger,this.correlationId,this.performanceClient);if(n&&!l.isAlias(n.environment))throw Nt(_j);return l}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function Mk(t,e,n,r){n.addQueueMeasurement(F.InitializeBaseRequest,t.correlationId);const i=t.authority||e.auth.authority,s=[...t&&t.scopes||[]],o={...t,correlationId:t.correlationId,authority:i,scopes:s};if(!o.authenticationScheme)o.authenticationScheme=Ct.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(o.authenticationScheme===Ct.SSH){if(!t.sshJwk)throw Nt(hw);if(!t.sshKid)throw Nt(gj)}r.verbose(`Authentication Scheme set to "${o.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!mi.isEmptyObj(t.claims)&&(o.requestedClaimsHash=await LV(t.claims)),o}async function sJ(t,e,n,r,i){r.addQueueMeasurement(F.InitializeSilentRequest,t.correlationId);const s=await J(Mk,F.InitializeBaseRequest,i,r,t.correlationId)(t,n,r,i);return{...t,...s,account:e,forceRefresh:t.forceRefresh||!1}}function zV(t,e){let n;const r=t.httpMethod;if(e===ti.EAR){if(n=r||il.POST,n!==il.POST)throw Nt(wj)}else n=r||il.GET;if(t.authorizePostBodyParameters&&n!==il.POST)throw Nt(Tj);return n}/*! @azure/msal-browser v4.21.1 2025-08-27 */class dh extends HV{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||ys(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=yt.getAbsoluteUrl(e.postLogoutRedirectUri,No())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=yt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,No())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=yt.getAbsoluteUrl(No(),No())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await J(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Qj(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}=e;this.performanceClient.addQueueMeasurement(F.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:Wr.MSAL_SKU,version:xl,cpu:Z.EMPTY_STRING,os:Z.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(F.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),i={interactionType:n},s=lh.setRequestState(this.browserCrypto,e&&e.state||Z.EMPTY_STRING,i),a={...await J(Mk,F.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:s,nonce:e.nonce||ys(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c={...a,httpMethod:zV(a,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return c;const l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function oJ(t,e){if(!e)return null;try{return lh.parseRequestState(t,e).libraryState.meta}catch{throw ie(Rd)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function Uf(t,e,n){const r=Ev(t);if(!r)throw Cj(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),_e(nV)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),_e(tV));return r}function aJ(t,e,n){if(!t.state)throw _e(_k);const r=oJ(e,t.state);if(!r)throw _e(rV);if(r.interactionType!==n)throw _e(iV)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class WV{constructor(e,n,r,i,s){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=i,this.performanceClient=s}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(F.HandleCodeResponse,n.correlationId);let r;try{r=XQ(e,n.state)}catch(i){throw i instanceof Jl&&i.subError===Rp?_e(Rp):i}return J(this.handleCodeResponseFromServer.bind(this),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(F.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await J(this.authModule.updateAuthority.bind(this.authModule),F.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const s=this.createCcsCredentials(n);s&&(this.authCodeRequest.ccsCredential=s)}return await J(this.authModule.acquireToken.bind(this.authModule),F.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:os.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:os.UPN}:null}}/*! @azure/msal-browser v4.21.1 2025-08-27 */const cJ="ContentError",KV="user_switch";/*! @azure/msal-browser v4.21.1 2025-08-27 */const lJ="USER_INTERACTION_REQUIRED",uJ="USER_CANCEL",dJ="NO_NETWORK",hJ="DISABLED",fJ="ACCOUNT_UNAVAILABLE",pJ="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.21.1 2025-08-27 */const mJ=-2147186943,gJ={[KV]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Vs extends kt{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,Vs.prototype),this.name="NativeAuthError",this.ext=r}}function Iu(t){if(t.ext&&t.ext.status&&t.ext.status===hJ||t.ext&&t.ext.error&&t.ext.error===mJ)return!0;switch(t.errorCode){case cJ:return!0;default:return!1}}function Lv(t,e,n){if(n&&n.status)switch(n.status){case fJ:return Pv(Kj);case lJ:return new gs(t,e);case uJ:return _e(Rp);case dJ:return _e(Nv);case pJ:return Pv(hk)}return new Vs(t,gJ[t]||e,n)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class qV extends dh{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(At.acquireTokenSilent_silentFlow),r=await J(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new QQ(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const o=(await J(i.acquireCachedToken.bind(i),F.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),o}catch(s){throw s instanceof Cm&&s.errorCode===wk&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n==null?void 0:n.account)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Ty extends HV{constructor(e,n,r,i,s,o,a,c,l,u,d,f){super(e,n,r,i,s,o,c,l,f),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=d,this.silentCacheClient=new qV(e,this.nativeStorageManager,r,i,s,o,c,l,f);const m=this.platformAuthProvider.getExtensionName();this.skus=kp.makeExtraSkuString({libraryName:Wr.MSAL_SKU,libraryVersion:xl,extensionName:m,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[uQ]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(F.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(F.NativeInteractionClientAcquireToken,this.correlationId),i=ii(),s=this.initializeServerTelemetryManager(this.apiId);try{const o=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,o);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(n===Er.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const a=await this.platformAuthProvider.sendMessage(o);return await this.handleNativeResponse(a,o,i).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),s.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(o){throw o instanceof Vs&&s.setNativeBrokerErrorCode(o.errorCode),r.end({success:!1}),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:xn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ie(Bb);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw ie(Bb);try{const i=this.createSilentCacheRequest(n,r),s=await this.silentCacheClient.acquireToken(i),o={...r,idTokenClaims:s==null?void 0:s.idTokenClaims,idToken:s==null?void 0:s.idToken};return{...s,account:o}}catch(i){throw i}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const i=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(i)}catch(a){if(a instanceof Vs&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),Iu(a)))throw a}this.browserStorage.setTemporaryCache(wn.NATIVE_REQUEST,JSON.stringify(i),!0);const s={apiId:At.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(o,s)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:i,...s}=r;i&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(wn.NATIVE_REQUEST));const o=ii();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const a=await this.platformAuthProvider.sendMessage(s),c=await this.handleNativeResponse(a,s,o);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),c}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var u,d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=ch(e.id_token,hs),s=this.createHomeAccountIdentifier(e,i),o=(u=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId))==null?void 0:u.homeAccountId;if((d=n.extraParameters)!=null&&d.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==o&&e.account.id!==n.accountId)throw Lv(KV);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=fk(this.browserStorage,a,s,hs,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const l=await this.generateAuthenticationResult(e,n,i,c,a.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId),await this.cacheNativeTokens(e,n,s,i,e.access_token,l.tenantId,r),l}createHomeAccountIdentifier(e,n){return ms.generateHomeAccountId(e.client_info||Z.EMPTY_STRING,ts.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?xn.fromString(n):xn.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===Ct.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new xd(this.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw ie($A);return r.signPopToken(e.access_token,n.keyId,i)}else return e.access_token}async generateAuthenticationResult(e,n,r,i,s,o){const a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(n.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||Z.EMPTY_STRING,d=l.TenantId||r.tid||Z.EMPTY_STRING,f=YA(i.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const m=await this.generatePopAccessToken(e,n),_=n.tokenType===Ct.POP?Ct.POP:Ct.BEARER;return{authority:s,uniqueId:u,tenantId:d,scopes:c.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:m,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:td(o+e.expires_in),tokenType:_,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,i,s,o,a){const c=gw(r,n.authority,e.id_token||"",n.clientId,i.tid||""),l=n.tokenType===Ct.POP?Z.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,d=this.generateScopes(e.scope,n.scope),f=yw(r,n.authority,s,n.clientId,i.tid||o,d.printScopes(),u,0,hs,void 0,n.tokenType,void 0,n.keyId),m={idToken:c,accessToken:f};return this.nativeStorageManager.saveCacheRecord(m,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===Ct.POP?Z.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...i}=e,s=new xn(r||[]);s.appendScopes(ah);const o={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(o.signPopToken&&e.popKid)throw _e(SV);if(this.handleExtraBrokerParams(o),o.extraParameters=o.extraParameters||{},o.extraParameters.telemetry=Oi.MATS_TELEMETRY,e.authenticationScheme===Ct.POP){const a={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},c=new xd(this.browserCrypto);let l;if(o.keyId)l=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:o.keyId})),o.signPopToken=!1;else{const u=await J(c.generateCnf.bind(c),F.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(a,this.logger);l=u.reqCnfString,o.keyId=u.kid,o.signPopToken=!0}o.reqCnf=l}return this.addRequestSKUs(o),o}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new yt(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case At.ssoSilent:case At.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Ar.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Ar.NONE:case Ar.CONSENT:case Ar.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),_e(bV)}}handleExtraBrokerParams(e){var s;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Sv)&&e.extraParameters.hasOwnProperty(Av)&&e.extraParameters.hasOwnProperty(kl);if(!e.embeddedClientId&&!n)return;let r="";const i=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Av],r=e.extraParameters[kl]),e.extraParameters={child_client_id:r,child_redirect_uri:i},(s=this.performanceClient)==null||s.addFields({embeddedClientId:r,embeddedRedirectUri:i},this.correlationId)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function Dk(t,e,n,r,i){const s=JQ({...t.auth,authority:e},n,r,i);if(sk(s,{sku:Wr.MSAL_SKU,version:xl,os:"",cpu:""}),t.auth.protocolMode!==ti.OIDC&&ok(s,t.telemetry.application),n.platformBroker&&(pQ(s),i.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===Ct.POP)){const o=new qo(r,i),a=new xd(o);let c;n.popKid?c=o.encodeKid(n.popKid):c=(await J(a.generateCnf.bind(a),F.PopTokenGenerateCnf,r,i,n.correlationId)(n,r)).reqCnfString,ck(s,c)}return fw(s,n.correlationId,i),s}async function Lk(t,e,n,r,i){if(!n.codeChallenge)throw Nt(KA);const s=await J(Dk,F.GetStandardParams,r,i,n.correlationId)(t,e,n,r,i);return ZA(s,MA.CODE),Oj(s,n.codeChallenge,Z.S256_CODE_CHALLENGE_METHOD),Za(s,n.extraQueryParameters||{}),pk(e,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function Fk(t,e,n,r,i,s){if(!r.earJwk)throw _e(vk);const o=await Dk(e,n,r,i,s);ZA(o,MA.IDTOKEN_TOKEN_REFRESHTOKEN),IQ(o,r.earJwk);const a=new Map;Za(a,r.extraQueryParameters||{});const c=pk(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return GV(t,c,o)}async function Uk(t,e,n,r,i,s){const o=await Dk(e,n,r,i,s);ZA(o,MA.CODE),Oj(o,r.codeChallenge,r.codeChallengeMethod||Z.S256_CODE_CHALLENGE_METHOD),SQ(o,r.authorizePostBodyParameters||{});const a=new Map;Za(a,r.extraQueryParameters||{});const c=pk(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return GV(t,c,o)}function GV(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((i,s)=>{const o=t.createElement("input");o.hidden=!0,o.name=s,o.value=i,r.appendChild(o)}),t.body.appendChild(r),r}async function QV(t,e,n,r,i,s,o,a,c,l){if(a.verbose("Account id found, calling WAM for token"),!l)throw _e(Ek);const u=new qo(a,c),d=new Ty(r,i,u,a,o,r.system.navigationClient,n,c,l,e,s,t.correlationId),{userRequestState:f}=lh.parseRequestState(u,t.state);return J(d.acquireToken.bind(d),F.NativeInteractionClientAcquireToken,a,c,t.correlationId)({...t,state:f,prompt:void 0})}async function Fv(t,e,n,r,i,s,o,a,c,l,u,d){if(js.removeThrottle(o,i.auth.clientId,t),e.accountId)return J(QV,F.HandleResponsePlatformBroker,l,u,t.correlationId)(t,e.accountId,r,i,o,a,c,l,u,d);const f={...t,code:e.code||"",codeVerifier:n},m=new WV(s,o,f,l,u);return await J(m.handleCodeResponse.bind(m),F.HandleCodeResponse,l,u,t.correlationId)(e,t)}async function jk(t,e,n,r,i,s,o,a,c,l,u){if(js.removeThrottle(s,r.auth.clientId,t),Yj(e,t.state),!e.ear_jwe)throw _e(eV);if(!t.earJwk)throw _e(vk);const d=JSON.parse(await J(IY,F.DecryptEarResponse,c,l,t.correlationId)(t.earJwk,e.ear_jwe));if(d.accountId)return J(QV,F.HandleResponsePlatformBroker,c,l,t.correlationId)(t,d.accountId,n,r,s,o,a,c,l,u);const f=new Rl(r.auth.clientId,s,new qo(c,l),c,null,null,l);f.validateTokenResponse(d);const m={code:"",state:t.state,nonce:t.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await J(f.handleServerTokenResponse.bind(f),F.HandleServerTokenResponse,c,l,t.correlationId)(d,i,ii(),t,m,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.21.1 2025-08-27 */const yJ=32;async function Iw(t,e,n){t.addQueueMeasurement(F.GeneratePkceCodes,n);const r=gi(vJ,F.GenerateCodeVerifier,e,t,n)(t,e,n),i=await J(_J,F.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:i}}function vJ(t,e,n){try{const r=new Uint8Array(yJ);return gi(wY,F.GetRandomValues,e,t,n)(r),dc(r)}catch{throw _e(yk)}}async function _J(t,e,n,r){e.addQueueMeasurement(F.GenerateCodeChallengeFromVerifier,r);try{const i=await J(OV,F.Sha256Digest,n,e,r)(t,e,r);return dc(new Uint8Array(i))}catch{throw _e(yk)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Uv{constructor(e,n,r,i){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=i,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(F.NativeMessageHandlerHandshake),this.platformAuthType=Oi.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:Yh.GetToken,request:e},r={channel:Oi.CHANNEL_ID,extensionId:this.extensionId,responseId:ys(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const i=await new Promise((o,a)=>{this.resolvers.set(r.responseId,{resolve:o,reject:a})});return this.validatePlatformBrokerResponse(i)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const i=new Uv(e,n,r,Oi.PREFERRED_EXTENSION_ID);return await i.sendHandshakeRequest(),i}catch{const s=new Uv(e,n,r);return await s.sendHandshakeRequest(),s}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Oi.CHANNEL_ID,extensionId:this.extensionId,responseId:ys(),body:{method:Yh.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(_e(EV)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==Oi.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===Yh.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(_e(CV))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),i=this.handshakeResolvers.get(n.responseId);try{const s=n.body.method;if(s===Yh.Response){if(!r)return;const o=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(o)}`),o.status!=="Success")r.reject(Lv(o.code,o.description,o.ext));else if(o.result)o.result.code&&o.result.description?r.reject(Lv(o.result.code,o.result.description,o.result.ext)):r.resolve(o.result);else throw jb(wv,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(s===Yh.HandshakeResponse){if(!i){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),i.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(s){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${s}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(s):i&&i.reject(s)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw jb(wv,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===Oi.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class Vk{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=Oi.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){var i;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(i=window.navigator)!=null&&i.platformAuthentication){const s=await window.navigator.platformAuthentication.getSupportedContracts(Oi.MICROSOFT_ENTRA_BROKERID);if(s!=null&&s.includes(Oi.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new Vk(e,n,r)}}getExtensionId(){return Oi.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Oi.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:i,scope:s,redirectUri:o,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:d,...f}=e,m=this.getDOMExtraParams(f);return{accountId:n,brokerId:this.getExtensionId(),authority:i,clientId:r,correlationId:a||this.correlationId,extraParameters:{...d,...m},isSecurityTokenService:!1,redirectUri:o,scope:s,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Lv(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw jb(wv,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((i,[s,o])=>(i[s]=String(o),i),{})}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function wJ(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const i=TJ();t.trace("Has client allowed platform auth via DOM API: "+i);let s;try{i&&(s=await Vk.createProvider(t,e,n)),s||(t.trace("Platform auth via DOM API not available, checking for extension"),s=await Uv.createProvider(t,r||$V,e))}catch(o){t.trace("Platform auth not available",o)}return s}function TJ(){let t;try{return t=window[Pn.SessionStorage],(t==null?void 0:t.getItem($Y))==="true"}catch{return!1}}function Np(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Ct.BEARER:case Ct.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.21.1 2025-08-27 */class EJ extends dh{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=s}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||ah,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const s={...e,httpMethod:zV(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(s,r,n)}}catch(i){return Promise.reject(i)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},i=e&&e.authority,s=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,i,s)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,i,s))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const i=await J(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Me.Popup);n.popup&&VV(i.authority);const s=Np(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return i.platformBroker=s,this.config.auth.protocolMode===ti.EAR?this.executeEarFlow(i,n):this.executeCodeFlow(i,n,r)}async executeCodeFlow(e,n,r){var c;const i=e.correlationId,s=this.initializeServerTelemetryManager(At.acquireTokenPopup),o=r||await J(Iw,F.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),a={...e,codeChallenge:o.challenge};try{const l=await J(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i)({serverTelemetryManager:s,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===il.POST)return await this.executeCodeFlowWithPost(a,n,l,o.verifier);{const u=await J(Lk,F.GetAuthCodeUrl,this.logger,this.performanceClient,i)(this.config,l.authority,a,this.logger,this.performanceClient),d=this.initiateAuthRequest(u,n);this.eventHandler.emitEvent(Ne.POPUP_OPENED,Me.Popup,{popupWindow:d},null);const f=await this.monitorPopupForHash(d,n.popupWindowParent),m=gi(Uf,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await J(Fv,F.HandleResponseCode,this.logger,this.performanceClient,i)(e,m,o.verifier,At.acquireTokenPopup,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(l){throw(c=n.popup)==null||c.close(),l instanceof kt&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),l}}async executeEarFlow(e,n){const r=e.correlationId,i=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await J(Ak,F.GenerateEarKey,this.logger,this.performanceClient,r)(),o={...e,earJwk:s},a=n.popup||this.openPopup("about:blank",n);(await Fk(a.document,this.config,i,o,this.logger,this.performanceClient)).submit();const l=await J(this.monitorPopupForHash.bind(this),F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,n.popupWindowParent),u=gi(Uf,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return J(jk,F.HandleResponseEar,this.logger,this.performanceClient,r)(o,u,At.acquireTokenPopup,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,i){const s=e.correlationId,o=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,s)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=n.popup||this.openPopup("about:blank",n);(await Uk(a.document,this.config,o,e,this.logger,this.performanceClient)).submit();const l=await J(this.monitorPopupForHash.bind(this),F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(a,n.popupWindowParent),u=gi(Uf,F.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return J(Fv,F.HandleResponseCode,this.logger,this.performanceClient,s)(e,u,i,At.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,i){var o,a,c;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Ne.LOGOUT_START,Me.Popup,e);const s=this.initializeServerTelemetryManager(At.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const l=await J(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0});try{l.authority.endSessionEndpoint}catch{if((o=e.account)!=null&&o.homeAccountId&&e.postLogoutRedirectUri&&l.authority.protocolMode===ti.OIDC){if(this.eventHandler.emitEvent(Ne.LOGOUT_SUCCESS,Me.Popup,e),i){const f={apiId:At.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=yt.getAbsoluteUrl(i,No());await this.navigationClient.navigateInternal(m,f)}(a=n.popup)==null||a.close();return}}const u=l.getLogoutUri(e);this.eventHandler.emitEvent(Ne.LOGOUT_SUCCESS,Me.Popup,e);const d=this.openPopup(u,n);if(this.eventHandler.emitEvent(Ne.POPUP_OPENED,Me.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,n.popupWindowParent).catch(()=>{}),i){const f={apiId:At.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=yt.getAbsoluteUrl(i,No());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${m}`),await this.navigationClient.navigateInternal(m,f)}else this.logger.verbose("No main window navigation requested")}catch(l){throw(c=n.popup)==null||c.close(),l instanceof kt&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),this.eventHandler.emitEvent(Ne.LOGOUT_FAILURE,Me.Popup,null,l),this.eventHandler.emitEvent(Ne.LOGOUT_END,Me.Popup),l}this.eventHandler.emitEvent(Ne.LOGOUT_END,Me.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),_e(Tw)}monitorPopupForHash(e,n){return new Promise((r,i)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const s=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(s),i(_e(Rp));return}let o="";try{o=e.location.href}catch{}if(!o||o==="about:blank")return;clearInterval(s);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===dw.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw _e(aV);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),_e(oV)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:i}){var m,_,y,T;const s=i.screenLeft?i.screenLeft:i.screenX,o=i.screenTop?i.screenTop:i.screenY,a=i.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=i.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=(m=r.popupSize)==null?void 0:m.width,u=(_=r.popupSize)==null?void 0:_.height,d=(y=r.popupPosition)==null?void 0:y.top,f=(T=r.popupPosition)==null?void 0:T.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Wr.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Wr.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Wr.POPUP_HEIGHT/2+o)),(!f||f<0||f>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,a/2-Wr.POPUP_WIDTH/2+s)),i.open(e,n,`width=${l}, height=${u}, top=${d}, left=${f}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${Wr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${Wr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function CJ(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class bJ extends dh{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.nativeStorage=c}async acquireToken(e){const n=await J(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Me.Redirect);n.platformBroker=Np(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=s=>{s.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Ne.RESTORE_FROM_BFCACHE,Me.Redirect))},i=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${i}`),this.browserStorage.setTemporaryCache(wn.ORIGIN_URI,i,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ti.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(s){throw s instanceof kt&&s.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),s}}async executeCodeFlow(e,n){const r=e.correlationId,i=this.initializeServerTelemetryManager(At.acquireTokenRedirect),s=await J(Iw,F.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),o={...e,codeChallenge:s.challenge};this.browserStorage.cacheAuthorizeRequest(o,s.verifier);try{if(o.httpMethod===il.POST)return await this.executeCodeFlowWithPost(o);{const a=await J(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=await J(Lk,F.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,o,this.logger,this.performanceClient);return await this.initiateAuthRequest(c,n)}}catch(a){throw a instanceof kt&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}}async executeEarFlow(e){const n=e.correlationId,r=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await J(Ak,F.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i};return this.browserStorage.cacheAuthorizeRequest(s),(await Fk(document,this.config,r,s,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(_e(Ov,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await Uk(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((s,o)=>{setTimeout(()=>{o(_e(Ov,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,i){const s=this.initializeServerTelemetryManager(At.handleRedirectPromise);try{const[o,a]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),CJ()!=="back_forward"?i.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(wn.ORIGIN_URI,!0)||Z.EMPTY_STRING,l=i1(c),u=i1(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&AY(c),await this.handleResponse(o,n,r,s);if(this.config.auth.navigateToLoginRequestUrl){if(!xk()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(wn.URL_HASH,a,!0);const d={apiId:At.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let f=!0;if(!c||c==="null"){const m=RY();this.browserStorage.setTemporaryCache(wn.ORIGIN_URI,m,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),f=await this.navigationClient.navigateInternal(m,d)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),f=await this.navigationClient.navigateInternal(c,d);if(!f)return await this.handleResponse(o,n,r,s)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,n,r,s);return null}catch(o){throw o instanceof kt&&(o.setCorrelationId(this.correlationId),s.cacheFailedRequest(o)),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===dw.QUERY?n=window.location.search:n=window.location.hash);let r=Ev(n);if(r){try{aJ(r,this.browserCrypto,Me.Redirect)}catch(s){return s instanceof kt&&this.logger.error(`Interaction type validation failed due to ${s.errorCode}: ${s.errorMessage}`),[null,""]}return FV(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const i=this.browserStorage.getTemporaryCache(wn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(wn.URL_HASH)),i&&(r=Ev(i),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,i]):[null,""]}async handleResponse(e,n,r,i){if(!e.state)throw _e(_k);if(e.ear_jwe){const a=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return J(jk,F.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,At.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await J(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:n.authority});return J(Fv,F.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,At.acquireTokenRedirect,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:At.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=n||this.config.auth.onRedirectNavigate;if(typeof i=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),i(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),_e(Tw)}async logout(e){var i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(At.logout);try{this.eventHandler.emitEvent(Ne.LOGOUT_START,Me.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const s={apiId:At.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await J(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===ti.OIDC)try{o.authority.endSessionEndpoint}catch{if((i=n.account)!=null&&i.homeAccountId){this.eventHandler.emitEvent(Ne.LOGOUT_SUCCESS,Me.Redirect,n);return}}const a=o.getLogoutUri(n);if(this.eventHandler.emitEvent(Ne.LOGOUT_SUCCESS,Me.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(a)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ba.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ba.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}}catch(s){throw s instanceof kt&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(Ne.LOGOUT_FAILURE,Me.Redirect,null,s),this.eventHandler.emitEvent(Ne.LOGOUT_END,Me.Redirect),s}this.eventHandler.emitEvent(Ne.LOGOUT_END,Me.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return yt.getAbsoluteUrl(n,No())}}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function IJ(t,e,n,r,i){if(e.addQueueMeasurement(F.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),_e(Tw);return i?J(kJ,F.SilentHandlerLoadFrame,n,e,r)(t,i,e,r):gi(RJ,F.SilentHandlerLoadFrameSync,n,e,r)(t)}async function SJ(t,e,n,r,i){const s=Sw();if(!s.contentDocument)throw"No document associated with iframe!";return(await Uk(s.contentDocument,t,e,n,r,i)).submit(),s}async function AJ(t,e,n,r,i){const s=Sw();if(!s.contentDocument)throw"No document associated with iframe!";return(await Fk(s.contentDocument,t,e,n,r,i)).submit(),s}async function M1(t,e,n,r,i,s,o){return r.addQueueMeasurement(F.SilentHandlerMonitorIframeForHash,s),new Promise((a,c)=>{e<Xb&&i.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Xb}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(_e(cV))},e),u=window.setInterval(()=>{let d="";const f=t.contentWindow;try{d=f?f.location.href:""}catch{}if(!d||d==="about:blank")return;let m="";f&&(o===dw.QUERY?m=f.location.search:m=f.location.hash),window.clearTimeout(l),window.clearInterval(u),a(m)},n)}).finally(()=>{gi(xJ,F.RemoveHiddenIframe,i,r,s)(t)})}function kJ(t,e,n,r){return n.addQueueMeasurement(F.SilentHandlerLoadFrame,r),new Promise((i,s)=>{const o=Sw();window.setTimeout(()=>{if(!o){s("Unable to load iframe");return}o.src=t,i(o)},e)})}function RJ(t){const e=Sw();return e.src=t,e}function Sw(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function xJ(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class PJ extends dh{constructor(e,n,r,i,s,o,a,c,l,u,d){super(e,n,r,i,s,o,c,u,d),this.apiId=a,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==Ar.NONE&&n.prompt!==Ar.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${Ar.NONE}`),n.prompt=Ar.NONE):n.prompt=Ar.NONE;const r=await J(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Me.Silent);return r.platformBroker=Np(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),VV(r.authority),this.config.auth.protocolMode===ti.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await J(this.createAuthCodeClient.bind(this),F.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await J(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(i){if(i instanceof kt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),!n||!(i instanceof kt)||i.errorCode!==Wr.INVALID_GRANT_ERROR)throw i;return this.performanceClient.addFields({retryError:i.errorCode},this.correlationId),await J(this.silentTokenHelper.bind(this),F.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await J(this.getDiscoveredAuthority.bind(this),F.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await J(Ak,F.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i},o=await J(AJ,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,s,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=await J(M1,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,a),l=gi(Uf,F.DeserializeResponse,this.logger,this.performanceClient,n)(c,a,this.logger);return J(jk,F.HandleResponseEar,this.logger,this.performanceClient,n)(s,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(_e(Ew))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(F.SilentIframeClientTokenHelper,r);const i=await J(Iw,F.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s={...n,codeChallenge:i.challenge};let o;if(n.httpMethod===il.POST)o=await J(SJ,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);else{const u=await J(Lk,F.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);o=await J(IJ,F.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const a=this.config.auth.OIDCOptions.serverResponseType,c=await J(M1,F.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=gi(Uf,F.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return J(Fv,F.HandleResponseCode,this.logger,this.performanceClient,r)(n,l,i.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class NJ extends dh{async acquireToken(e){this.performanceClient.addQueueMeasurement(F.SilentRefreshClientAcquireToken,e.correlationId);const n=await J(Mk,F.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const i=this.initializeServerTelemetryManager(At.acquireTokenSilent_silentFlow),s=await this.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return J(s.acquireTokenByRefreshToken.bind(s),F.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(o=>{throw o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o),o})}logout(){return Promise.reject(_e(Ew))}async createRefreshTokenClient(e){const n=await J(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new GQ(n,this.performanceClient)}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class OJ{constructor(e,n,r,i){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=i}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw _e(Cw);const i=e.correlationId||ys(),s=n.id_token?ch(n.id_token,hs):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new ur(ur.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||ys()):void 0,c=await this.loadAccount(e,r.clientInfo||n.client_info||"",i,s,a),l=await this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,i),u=await this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,i),d=await this.loadRefreshToken(n,c.homeAccountId,c.environment,i);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},s,a)}async loadAccount(e,n,r,i,s){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=ms.createFromAccountInfo(e.account);return await this.storage.setAccount(l,r),l}else if(!s||!n&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),_e(yV);const o=ms.generateHomeAccountId(n,s.authorityType,this.logger,this.cryptoObj,i),a=i==null?void 0:i.tid,c=fk(this.storage,s,o,hs,r,i,n,s.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r),c}async loadIdToken(e,n,r,i,s){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=gw(n,r,e.id_token,this.config.auth.clientId,i);return await this.storage.setIdTokenCredential(o,s),o}async loadAccessToken(e,n,r,i,s,o,a){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?xn.fromString(n.scope):new xn(e.scopes),l=o.expiresOn||n.expires_in+ii(),u=o.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+ii(),d=yw(r,i,n.access_token,this.config.auth.clientId,s,c.printScopes(),l,u,hs);return await this.storage.setAccessTokenCredential(d,a),d}async loadRefreshToken(e,n,r,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const s=Bj(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(s,i),s}generateAuthenticationResult(e,n,r,i){var u,d,f;let s="",o=[],a=null,c;n!=null&&n.accessToken&&(s=n.accessToken.secret,o=xn.fromString(n.accessToken.target).asArray(),a=td(n.accessToken.expiresOn),c=td(n.accessToken.extendedExpiresOn));const l=n.account;return{authority:i?i.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:o,account:l.getAccountInfo(),idToken:((u=n.idToken)==null?void 0:u.secret)||"",idTokenClaims:r||{},accessToken:s,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((d=n.refreshToken)==null?void 0:d.familyId)||"",tokenType:((f=n==null?void 0:n.accessToken)==null?void 0:f.tokenType)||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class MJ extends Qj{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.21.1 2025-08-27 */class DJ extends dh{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,c,l,u),this.apiId=a}async acquireToken(e){if(!e.code)throw _e(vV);const n=await J(this.initializeAuthorizationRequest.bind(this),F.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Me.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const i={...n,code:e.code},s=await J(this.getClientConfiguration.bind(this),F.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),o=new MJ(s);this.logger.verbose("Auth code client created");const a=new WV(o,this.browserStorage,i,this.logger,this.performanceClient);return await J(a.handleCodeResponseFromServer.bind(a),F.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(i){throw i instanceof kt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}}logout(){return Promise.reject(_e(Ew))}}/*! @azure/msal-browser v4.21.1 2025-08-27 */function LJ(t,e,n){var o;const r=((o=window.msal)==null?void 0:o.clientIds)||[],i=r.length,s=r.filter(a=>a===t).length;s>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:i,sameClientIdInstanceCount:s})}/*! @azure/msal-browser v4.21.1 2025-08-27 */function ks(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function $g(t,e){try{Pk(t)}catch(n){throw e.end({success:!1},n),n}}class Aw{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new qo(this.logger,this.performanceClient):Tv,this.eventHandler=new iJ(this.logger),this.browserStorage=this.isBrowserEnvironment?new nI(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,jQ(this.config.auth)):QY(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:Pn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Pn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new nI(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new OJ(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new Aw(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Ne.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),i=this.config.system.allowPlatformBroker,s=this.performanceClient.startMeasurement(F.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Ne.INITIALIZE_START),!n)try{this.logMultipleInstances(s)}catch{}if(await J(this.browserStorage.initialize.bind(this.browserStorage),F.InitializeCache,this.logger,this.performanceClient,r)(r),i)try{this.platformAuthProvider=await wJ(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),gi(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),F.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Ne.INITIALIZE_END),s.end({allowPlatformBroker:i,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),jV(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var c;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((c=this.browserStorage.getInteractionInProgress())==null?void 0:c.type)===ba.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),s=i&&this.platformAuthProvider&&!e;let o;this.eventHandler.emitEvent(Ne.HANDLE_REDIRECT_START,Me.Redirect);let a;try{if(s&&this.platformAuthProvider){o=this.performanceClient.startMeasurement(F.AcquireTokenRedirect,(i==null?void 0:i.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),o.add({isPlatformBrokerRequest:!0});const l=new Ty(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,At.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,i.accountId,this.nativeInternalStorage,i.correlationId);a=J(l.handleRedirectPromise.bind(l),F.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(this.performanceClient,o.event.correlationId)}else{const[l,u]=this.browserStorage.getCachedRequest(),d=l.correlationId;o=this.performanceClient.startMeasurement(F.AcquireTokenRedirect,d),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const f=this.createRedirectClient(d);a=J(f.handleRedirectPromise.bind(f),F.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(e,l,u,o)}}catch(l){throw this.browserStorage.resetRequestCache(),l}return a.then(l=>(l?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Ne.LOGIN_SUCCESS,Me.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_SUCCESS,Me.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),o.end({success:!0,accountType:ks(l.account)})):o.event.errorCode?o.end({success:!1}):o.discard(),this.eventHandler.emitEvent(Ne.HANDLE_REDIRECT_END,Me.Redirect),l)).catch(l=>{this.browserStorage.resetRequestCache();const u=l;throw r.length>0?this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_FAILURE,Me.Redirect,null,u):this.eventHandler.emitEvent(Ne.LOGIN_FAILURE,Me.Redirect,null,u),this.eventHandler.emitEvent(Ne.HANDLE_REDIRECT_END,Me.Redirect),o.end({success:!1},u),l})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(F.AcquireTokenPreRedirect,n);r.add({accountType:ks(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=o=>{const a=typeof i=="function"?i(o):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0})||r.event,a};else{const o=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof o=="function"?o(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0})||r.event,c}}const s=this.getAllAccounts().length>0;try{b1(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ba.SIGNIN),s?this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_START,Me.Redirect,e):this.eventHandler.emitEvent(Ne.LOGIN_START,Me.Redirect,e);let o;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?o=new Ty(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,At.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof Vs&&Iu(c))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof gs)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw c}):o=this.createRedirectClient(n).acquireToken(e),await o}catch(o){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(F.AcquireTokenRedirect,n).end({success:!1},o):r.end({success:!1},o),s?this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_FAILURE,Me.Redirect,null,o):this.eventHandler.emitEvent(Ne.LOGIN_FAILURE,Me.Redirect,null,o),o}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(F.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:ks(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),$g(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,ba.SIGNIN)}catch(a){return Promise.reject(a)}const i=this.getAllAccounts();i.length>0?this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_START,Me.Popup,e):this.eventHandler.emitEvent(Ne.LOGIN_START,Me.Popup,e);let s;const o=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative({...e,correlationId:n},At.acquireTokenPopup).then(a=>(r.end({success:!0,accountType:ks(a.account)}),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof Vs&&Iu(a))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,o);if(a instanceof gs)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,o);throw a})):s=this.createPopupClient(n).acquireToken(e,o),s.then(a=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Ne.LOGIN_SUCCESS,Me.Popup,a):this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_SUCCESS,Me.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:ks(a.account)}),a)).catch(a=>(i.length>0?this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_FAILURE,Me.Popup,null,a):this.eventHandler.emitEvent(Ne.LOGIN_FAILURE,Me.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var s,o,a;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(F.SsoSilent,n),(s=this.ssoSilentMeasurement)==null||s.add({scenarioId:e.scenarioId,accountType:ks(e.account)}),$g(this.initialized,this.ssoSilentMeasurement),(o=this.ssoSilentMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Ne.SSO_SILENT_START,Me.Silent,r);let i;return this.canUsePlatformBroker(r)?((a=this.ssoSilentMeasurement)==null||a.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(r,At.ssoSilent).catch(c=>{var l;if((l=this.ssoSilentMeasurement)==null||l.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof Vs&&Iu(c))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c})):i=this.createSilentIframeClient(r.correlationId).acquireToken(r),i.then(c=>{var l;return this.eventHandler.emitEvent(Ne.SSO_SILENT_SUCCESS,Me.Silent,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length,accountType:ks(c.account)}),c}).catch(c=>{var l;throw this.eventHandler.emitEvent(Ne.SSO_SILENT_FAILURE,Me.Silent,null,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!1},c),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(F.AcquireTokenByCode,n);$g(this.initialized,r),this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_BY_CODE_START,Me.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw _e(wV);if(e.code){const i=e.code;let s=this.hybridAuthCodeResponses.get(i);return s?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),s=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(o=>(this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Me.Silent,o),this.hybridAuthCodeResponses.delete(i),r.end({success:!0,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,accountType:ks(o.account)}),o)).catch(o=>{throw this.hybridAuthCodeResponses.delete(i),this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_BY_CODE_FAILURE,Me.Silent,null,o),r.end({success:!1},o),o}),this.hybridAuthCodeResponses.set(i,s)),await s}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const i=await this.acquireTokenNative({...e,correlationId:n},At.acquireTokenByCode,e.nativeAccountId).catch(s=>{throw s instanceof Vs&&Iu(s)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s});return r.end({accountType:ks(i.account),success:!0}),i}else throw _e(TV);else throw _e(_V)}catch(i){throw this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_BY_CODE_FAILURE,Me.Silent,null,i),r.end({success:!1},i),i}}async acquireTokenByCodeAsync(e){var i;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(F.AcquireTokenByCodeAsync,e.correlationId),(i=this.acquireTokenByCodeAsyncMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(s=>{var o;return(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!0,fromCache:s.fromCache}),s}).catch(s=>{var o;throw(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenFromCache,e.correlationId),n){case Er.Default:case Er.AccessToken:case Er.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return J(r.acquireToken.bind(r),F.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ie(Xa)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(F.AcquireTokenByRefreshToken,e.correlationId),n){case Er.Default:case Er.AccessTokenAndRefreshToken:case Er.RefreshToken:case Er.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return J(r.acquireToken.bind(r),F.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ie(Xa)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(F.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return J(n.acquireToken.bind(n),F.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return b1(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ba.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return Pk(this.initialized),this.browserStorage.setInteractionInProgress(!0,ba.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return YY(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return JY(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return XY(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return ZY(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return eJ(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();tJ(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return nJ(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=ms.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,i){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw _e(Ek);return new Ty(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,i)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Np(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Ar.NONE:case Ar.CONSENT:case Ar.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new EJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new bJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new PJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,At.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new qV(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new NJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new DJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,At.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return UV(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Pn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Pn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?ys():Z.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||_1})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||_1})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(F.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),$g(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const i=e.account||this.getActiveAccount();if(!i)throw _e(hV);return r.add({accountType:ks(i)}),this.acquireTokenSilentDeduped(e,i,n).then(s=>(r.end({success:!0,fromCache:s.fromCache,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length}),{...s,state:e.state,correlationId:n})).catch(s=>{throw s instanceof kt&&s.setCorrelationId(n),r.end({success:!1},s),s})}async acquireTokenSilentDeduped(e,n,r){const i=vw(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:r},n.homeAccountId),s=JSON.stringify(i),o=this.activeSilentTokenRequests.get(s);if(typeof o>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const a=J(this.acquireTokenSilentAsync.bind(this),F.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(s,a),a.finally(()=>{this.activeSilentTokenRequests.delete(s)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),o}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(F.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_START,Me.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const i=await J(sJ,F.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),s=e.cacheLookupPolicy||Er.Default;return this.acquireTokenSilentNoIframe(i,s).catch(async a=>{if(FJ(a,s))if(this.activeIframeRequest)if(s!==Er.Skip){const[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,i.correlationId);const d=this.performanceClient.startMeasurement(F.AwaitConcurrentIframe,i.correlationId);d.add({awaitIframeCorrelationId:u});const f=await l;if(d.end({success:f}),f)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,i.correlationId),this.acquireTokenSilentNoIframe(i,s);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),J(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),i.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),J(this.acquireTokenBySilentIframe.bind(this),F.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_SUCCESS,Me.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_FAILURE,Me.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return Np(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,At.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof Vs&&Iu(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ie(Xa)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===Er.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),J(this.acquireTokenFromCache.bind(this),F.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Er.AccessToken)throw r;return this.eventHandler.emitEvent(Ne.ACQUIRE_TOKEN_NETWORK_START,Me.Silent,e),J(this.acquireTokenByRefreshToken.bind(this),F.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await J(Iw,F.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),LJ(n,e,this.logger)}}function FJ(t,e){const n=!(t instanceof gs&&t.subError!==ww),r=t.errorCode===Wr.INVALID_GRANT_ERROR||t.errorCode===Xa,i=n&&r||t.errorCode===xv||t.errorCode===dk,s=fY.includes(e);return i&&s}/*! @azure/msal-browser v4.21.1 2025-08-27 */async function UJ(t,e){const n=new Pl(t);return await n.initialize(),Aw.createController(n,e)}/*! @azure/msal-browser v4.21.1 2025-08-27 */class $k{static async createPublicClientApplication(e){const n=await UJ(e);return new $k(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new Aw(new Pl(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const jJ={auth:{clientId:"34cf9dc4-f837-4136-98c1-f66e913b4f95",authority:"https://login.microsoftonline.com/common",redirectUri:"https://zp1v56uxy8rdx5ypatb0ockcb9tr6a-oci3--8080--96435430.local-credentialless.webcontainer-api.io"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},Su=new $k(jJ),WE={scopes:["User.Read","Notes.Read"]},VJ=()=>{Su.initialize()},rIe=async()=>{try{const t=Su.getAllAccounts()[0];if(t){const n={...WE,account:t};return(await Su.acquireTokenSilent(n)).accessToken}const e=await Su.loginPopup(WE);return Su.setActiveAccount(e.account),e.accessToken}catch(t){if(console.error("MSAL login or token acquisition failed:",t),t.name==="InteractionRequiredAuthError")return(await Su.acquireTokenPopup(WE)).accessToken;throw t}},$J=1,BJ=1e6;let KE=0;function HJ(){return KE=(KE+1)%Number.MAX_SAFE_INTEGER,KE.toString()}const qE=new Map,D1=t=>{if(qE.has(t))return;const e=setTimeout(()=>{qE.delete(t),jf({type:"REMOVE_TOAST",toastId:t})},BJ);qE.set(t,e)},zJ=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,$J)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?D1(n):t.toasts.forEach(r=>{D1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ey=[];let Cy={toasts:[]};function jf(t){Cy=zJ(Cy,t),Ey.forEach(e=>{e(Cy)})}function WJ({...t}){const e=HJ(),n=i=>jf({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>jf({type:"DISMISS_TOAST",toastId:e});return jf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Xl(){const[t,e]=g.useState(Cy);return g.useEffect(()=>(Ey.push(e),()=>{const n=Ey.indexOf(e);n>-1&&Ey.splice(n,1)}),[t]),{...t,toast:WJ,dismiss:n=>jf({type:"DISMISS_TOAST",toastId:n})}}function Ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function L1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function kw(...t){return e=>{let n=!1;const r=t.map(i=>{const s=L1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():L1(t[i],null)}}}}function It(...t){return g.useCallback(kw(...t),t)}function KJ(t,e){const n=g.createContext(e),r=s=>{const{children:o,...a}=s,c=g.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Ii(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),c=n.length;n=[...n,o];const l=d=>{var E;const{scope:f,children:m,..._}=d,y=((E=f==null?void 0:f[t])==null?void 0:E[c])||a,T=g.useMemo(()=>_,Object.values(_));return p.jsx(y.Provider,{value:T,children:m})};l.displayName=s+"Provider";function u(d,f){var y;const m=((y=f==null?void 0:f[t])==null?void 0:y[c])||a,_=g.useContext(m);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const c=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,qJ(i,...e)]}function qJ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(s)[`__scope${l}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Nl(t){const e=GJ(t),n=g.forwardRef((r,i)=>{const{children:s,...o}=r,a=g.Children.toArray(s),c=a.find(YJ);if(c){const l=c.props.children,u=a.map(d=>d===c?g.Children.count(l)>1?g.Children.only(null):g.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...o,ref:i,children:g.isValidElement(l)?g.cloneElement(l,void 0,u):null})}return p.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var Zl=Nl("Slot");function GJ(t){const e=g.forwardRef((n,r)=>{const{children:i,...s}=n;if(g.isValidElement(i)){const o=XJ(i),a=JJ(s,i.props);return i.type!==g.Fragment&&(a.ref=r?kw(r,o):o),g.cloneElement(i,a)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var YV=Symbol("radix.slottable");function QJ(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=YV,e}function YJ(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===YV}function JJ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function XJ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Bk(t){const e=t+"CollectionProvider",[n,r]=Ii(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:T,children:E}=y,w=Q.useRef(null),C=Q.useRef(new Map).current;return p.jsx(i,{scope:T,itemMap:C,collectionRef:w,children:E})};o.displayName=e;const a=t+"CollectionSlot",c=Nl(a),l=Q.forwardRef((y,T)=>{const{scope:E,children:w}=y,C=s(a,E),S=It(T,C.collectionRef);return p.jsx(c,{ref:S,children:w})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Nl(u),m=Q.forwardRef((y,T)=>{const{scope:E,children:w,...C}=y,S=Q.useRef(null),M=It(T,S),D=s(u,E);return Q.useEffect(()=>(D.itemMap.set(S,{ref:S,...C}),()=>void D.itemMap.delete(S))),p.jsx(f,{[d]:"",ref:M,children:w})});m.displayName=u;function _(y){const T=s(t+"CollectionConsumer",y);return Q.useCallback(()=>{const w=T.collectionRef.current;if(!w)return[];const C=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(T.itemMap.values()).sort((D,A)=>C.indexOf(D.ref.current)-C.indexOf(A.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:l,ItemSlot:m},_,r]}var ZJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=ZJ.reduce((t,e)=>{const n=Nl(`Primitive.${e}`),r=g.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Hk(t,e){t&&wm.flushSync(()=>t.dispatchEvent(e))}function pn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function eX(t,e=globalThis==null?void 0:globalThis.document){const n=pn(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var tX="DismissableLayer",rI="dismissableLayer.update",nX="dismissableLayer.pointerDownOutside",rX="dismissableLayer.focusOutside",F1,JV=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hh=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,l=g.useContext(JV),[u,d]=g.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),_=It(e,A=>d(A)),y=Array.from(l.layers),[T]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),E=y.indexOf(T),w=u?y.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,S=w>=E,M=sX(A=>{const I=A.target,k=[...l.branches].some(x=>x.contains(I));!S||k||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},f),D=oX(A=>{const I=A.target;[...l.branches].some(x=>x.contains(I))||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},f);return eX(A=>{w===l.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},f),g.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(F1=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),U1(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=F1)}},[u,f,n,l]),g.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),U1())},[u,l]),g.useEffect(()=>{const A=()=>m({});return document.addEventListener(rI,A),()=>document.removeEventListener(rI,A)},[]),p.jsx(je.div,{...c,ref:_,style:{pointerEvents:C?S?"auto":"none":void 0,...t.style},onFocusCapture:Ce(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Ce(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Ce(t.onPointerDownCapture,M.onPointerDownCapture)})});hh.displayName=tX;var iX="DismissableLayerBranch",XV=g.forwardRef((t,e)=>{const n=g.useContext(JV),r=g.useRef(null),i=It(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(je.div,{...t,ref:i})});XV.displayName=iX;function sX(t,e=globalThis==null?void 0:globalThis.document){const n=pn(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){ZV(nX,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function oX(t,e=globalThis==null?void 0:globalThis.document){const n=pn(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&ZV(rX,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function U1(){const t=new CustomEvent(rI);document.dispatchEvent(t)}function ZV(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Hk(i,s):i.dispatchEvent(s)}var aX=hh,cX=XV,Ti=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},lX="Portal",bm=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=g.useState(!1);Ti(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?kU.createPortal(p.jsx(je.div,{...r,ref:e}),o):null});bm.displayName=lX;function uX(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var nr=t=>{const{present:e,children:n}=t,r=dX(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=It(r.ref,hX(i));return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};nr.displayName="Presence";function dX(t){const[e,n]=g.useState(),r=g.useRef(null),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,c]=uX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const l=Bg(r.current);s.current=a==="mounted"?l:"none"},[a]),Ti(()=>{const l=r.current,u=i.current;if(u!==t){const f=s.current,m=Bg(l);t?c("MOUNT"):m==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Ti(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,d=m=>{const y=Bg(r.current).includes(m.animationName);if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},f=m=>{m.target===e&&(s.current=Bg(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function Bg(t){return(t==null?void 0:t.animationName)||"none"}function hX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fX=HS[" useInsertionEffect ".trim().toString()]||Ti;function eu({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=pX({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const u=g.useRef(t!==void 0);g.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const l=g.useCallback(u=>{var d;if(a){const f=mX(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[c,l]}function pX({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),i=g.useRef(n),s=g.useRef(e);return fX(()=>{s.current=e},[e]),g.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function mX(t){return typeof t=="function"}var gX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yX="VisuallyHidden",Rw=g.forwardRef((t,e)=>p.jsx(je.span,{...t,ref:e,style:{...gX,...t.style}}));Rw.displayName=yX;var vX=Rw,zk="ToastProvider",[Wk,_X,wX]=Bk("Toast"),[e4,iIe]=Ii("Toast",[wX]),[TX,xw]=e4(zk),t4=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,c]=g.useState(null),[l,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${zk}\`. Expected non-empty \`string\`.`),p.jsx(Wk.Provider,{scope:e,children:p.jsx(TX,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:a,onViewportChange:c,onToastAdd:g.useCallback(()=>u(m=>m+1),[]),onToastRemove:g.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};t4.displayName=zk;var n4="ToastViewport",EX=["F8"],iI="toast.viewportPause",sI="toast.viewportResume",r4=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=EX,label:i="Notifications ({hotkey})",...s}=t,o=xw(n4,n),a=_X(n),c=g.useRef(null),l=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=It(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;g.useEffect(()=>{const T=E=>{var C;r.length!==0&&r.every(S=>E[S]||E.code===S)&&((C=d.current)==null||C.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),g.useEffect(()=>{const T=c.current,E=d.current;if(_&&T&&E){const w=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(iI);E.dispatchEvent(D),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(sI);E.dispatchEvent(D),o.isClosePausedRef.current=!1}},S=D=>{!T.contains(D.relatedTarget)&&C()},M=()=>{T.contains(document.activeElement)||C()};return T.addEventListener("focusin",w),T.addEventListener("focusout",S),T.addEventListener("pointermove",w),T.addEventListener("pointerleave",M),window.addEventListener("blur",w),window.addEventListener("focus",C),()=>{T.removeEventListener("focusin",w),T.removeEventListener("focusout",S),T.removeEventListener("pointermove",w),T.removeEventListener("pointerleave",M),window.removeEventListener("blur",w),window.removeEventListener("focus",C)}}},[_,o.isClosePausedRef]);const y=g.useCallback(({tabbingDirection:T})=>{const w=a().map(C=>{const S=C.ref.current,M=[S,...DX(S)];return T==="forwards"?M:M.reverse()});return(T==="forwards"?w.reverse():w).flat()},[a]);return g.useEffect(()=>{const T=d.current;if(T){const E=w=>{var M,D,A;const C=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!C){const I=document.activeElement,k=w.shiftKey;if(w.target===T&&k){(M=l.current)==null||M.focus();return}const P=y({tabbingDirection:k?"backwards":"forwards"}),R=P.findIndex(B=>B===I);GE(P.slice(R+1))?w.preventDefault():k?(D=l.current)==null||D.focus():(A=u.current)==null||A.focus()}};return T.addEventListener("keydown",E),()=>T.removeEventListener("keydown",E)}},[a,y]),p.jsxs(cX,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&p.jsx(oI,{ref:l,onFocusFromOutsideViewport:()=>{const T=y({tabbingDirection:"forwards"});GE(T)}}),p.jsx(Wk.Slot,{scope:n,children:p.jsx(je.ol,{tabIndex:-1,...s,ref:f})}),_&&p.jsx(oI,{ref:u,onFocusFromOutsideViewport:()=>{const T=y({tabbingDirection:"backwards"});GE(T)}})]})});r4.displayName=n4;var i4="ToastFocusProxy",oI=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=xw(i4,n);return p.jsx(Rw,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var l;const a=o.relatedTarget;!((l=s.viewport)!=null&&l.contains(a))&&r()}})});oI.displayName=i4;var Im="Toast",CX="toast.swipeStart",bX="toast.swipeMove",IX="toast.swipeCancel",SX="toast.swipeEnd",s4=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,c]=eu({prop:r,defaultProp:i??!0,onChange:s,caller:Im});return p.jsx(nr,{present:n||a,children:p.jsx(RX,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:pn(t.onPause),onResume:pn(t.onResume),onSwipeStart:Ce(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ce(t.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ce(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ce(t.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});s4.displayName=Im;var[AX,kX]=e4(Im,{onClose(){}}),RX=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:m,..._}=t,y=xw(Im,n),[T,E]=g.useState(null),w=It(e,B=>E(B)),C=g.useRef(null),S=g.useRef(null),M=i||y.duration,D=g.useRef(0),A=g.useRef(M),I=g.useRef(0),{onToastAdd:k,onToastRemove:x}=y,N=pn(()=>{var he;(T==null?void 0:T.contains(document.activeElement))&&((he=y.viewport)==null||he.focus()),o()}),P=g.useCallback(B=>{!B||B===1/0||(window.clearTimeout(I.current),D.current=new Date().getTime(),I.current=window.setTimeout(N,B))},[N]);g.useEffect(()=>{const B=y.viewport;if(B){const he=()=>{P(A.current),l==null||l()},fe=()=>{const ye=new Date().getTime()-D.current;A.current=A.current-ye,window.clearTimeout(I.current),c==null||c()};return B.addEventListener(iI,fe),B.addEventListener(sI,he),()=>{B.removeEventListener(iI,fe),B.removeEventListener(sI,he)}}},[y.viewport,M,c,l,P]),g.useEffect(()=>{s&&!y.isClosePausedRef.current&&P(M)},[s,M,y.isClosePausedRef,P]),g.useEffect(()=>(k(),()=>x()),[k,x]);const R=g.useMemo(()=>T?h4(T):null,[T]);return y.viewport?p.jsxs(p.Fragment,{children:[R&&p.jsx(xX,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),p.jsx(AX,{scope:n,onClose:N,children:wm.createPortal(p.jsx(Wk.ItemSlot,{scope:n,children:p.jsx(aX,{asChild:!0,onEscapeKeyDown:Ce(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||N(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,..._,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ce(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Ce(t.onPointerDown,B=>{B.button===0&&(C.current={x:B.clientX,y:B.clientY})}),onPointerMove:Ce(t.onPointerMove,B=>{if(!C.current)return;const he=B.clientX-C.current.x,fe=B.clientY-C.current.y,ye=!!S.current,z=["left","right"].includes(y.swipeDirection),j=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,U=z?j(0,he):0,G=z?0:j(0,fe),H=B.pointerType==="touch"?10:2,W={x:U,y:G},re={originalEvent:B,delta:W};ye?(S.current=W,Hg(bX,d,re,{discrete:!1})):j1(W,y.swipeDirection,H)?(S.current=W,Hg(CX,u,re,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(he)>H||Math.abs(fe)>H)&&(C.current=null)}),onPointerUp:Ce(t.onPointerUp,B=>{const he=S.current,fe=B.target;if(fe.hasPointerCapture(B.pointerId)&&fe.releasePointerCapture(B.pointerId),S.current=null,C.current=null,he){const ye=B.currentTarget,z={originalEvent:B,delta:he};j1(he,y.swipeDirection,y.swipeThreshold)?Hg(SX,m,z,{discrete:!0}):Hg(IX,f,z,{discrete:!0}),ye.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),xX=t=>{const{__scopeToast:e,children:n,...r}=t,i=xw(Im,e),[s,o]=g.useState(!1),[a,c]=g.useState(!1);return OX(()=>o(!0)),g.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),a?null:p.jsx(bm,{asChild:!0,children:p.jsx(Rw,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},PX="ToastTitle",o4=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(je.div,{...r,ref:e})});o4.displayName=PX;var NX="ToastDescription",a4=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(je.div,{...r,ref:e})});a4.displayName=NX;var c4="ToastAction",l4=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(d4,{altText:n,asChild:!0,children:p.jsx(Kk,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${c4}\`. Expected non-empty \`string\`.`),null)});l4.displayName=c4;var u4="ToastClose",Kk=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=kX(u4,n);return p.jsx(d4,{asChild:!0,children:p.jsx(je.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,i.onClose)})})});Kk.displayName=u4;var d4=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function h4(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),MX(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...h4(r))}}),e}function Hg(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Hk(i,s):i.dispatchEvent(s)}var j1=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function OX(t=()=>{}){const e=pn(t);Ti(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function MX(t){return t.nodeType===t.ELEMENT_NODE}function DX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function GE(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var LX=t4,f4=r4,p4=s4,m4=o4,g4=a4,y4=l4,v4=Kk;function _4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=_4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function w4(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=_4(t))&&(r&&(r+=" "),r+=e);return r}const V1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$1=w4,fh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],d=s==null?void 0:s[l];if(u===null)return null;const f=V1(u)||V1(d);return i[l][f]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:f,...m}=u;return Object.entries(m).every(_=>{let[y,T]=_;return Array.isArray(T)?T.includes({...s,...a}[y]):{...s,...a}[y]===T})?[...l,d,f]:l},[]);return $1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UX=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),B1=t=>{const e=UX(t);return e.charAt(0).toUpperCase()+e.slice(1)},T4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),jX=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>g.createElement("svg",{ref:c,...VX,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:T4("lucide",i),...!s&&!jX(a)&&{"aria-hidden":"true"},...a},[...o.map(([l,u])=>g.createElement(l,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const n=g.forwardRef(({className:r,...i},s)=>g.createElement($X,{ref:s,iconNode:e,className:T4(`lucide-${FX(B1(t))}`,`lucide-${t}`,r),...i}));return n.displayName=B1(t),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],HX=We("arrow-left",BX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],H1=We("bell",zX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],E4=We("calendar",WX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],aI=We("chart-column",KX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],GX=We("check-check",qX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],C4=We("check",QX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],JX=We("chevron-right",YX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],b4=We("chrome",XX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],eZ=We("circle-check-big",ZX);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nZ=We("circle",tZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qk=We("clock",rZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],sZ=We("cloud-off",iZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],aZ=We("command",oZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],lZ=We("dot",cZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dZ=We("file-text",uZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tc=We("loader-circle",hZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],I4=We("log-out",fZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],z1=We("mail",pZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],gZ=We("maximize",mZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],vZ=We("menu",yZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],wZ=We("message-square",_Z);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],S4=We("mic",TZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],CZ=We("minimize",EZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],IZ=We("moon",bZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],AZ=We("notebook-text",SZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],RZ=We("panel-left",kZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],cI=We("pause",xZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],A4=We("phone",PZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],lI=We("play",NZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],k4=We("refresh-cw",OZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DZ=We("rotate-ccw",MZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],W1=We("search",LZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UZ=We("settings",FZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Pd=We("square-check-big",jZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],$Z=We("square",VZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],HZ=We("sun",BZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],WZ=We("timer",zZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qZ=We("trash-2",KZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vf=We("triangle-alert",GZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pw=We("user",QZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],R4=We("users",YZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],XZ=We("wifi-off",JZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],eee=We("wifi",ZZ);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tu=We("x",tee),Gk="-",nee=t=>{const e=iee(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Gk);return a[0]===""&&a.length!==1&&a.shift(),x4(a,e)||ree(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},x4=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?x4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Gk);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},K1=/^\[(.+)\]$/,ree=t=>{if(K1.test(t)){const e=K1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},iee=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return oee(Object.entries(t.classGroups),n).forEach(([s,o])=>{uI(o,r,s,e)}),r},uI=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:q1(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(see(i)){uI(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{uI(o,q1(e,s),n,r)})})},q1=(t,e)=>{let n=t;return e.split(Gk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},see=t=>t.isThemeGetter,oee=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,aee=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},P4="!",cee=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let l=0,u=0,d;for(let T=0;T<a.length;T++){let E=a[T];if(l===0){if(E===i&&(r||a.slice(T,T+s)===e)){c.push(a.slice(u,T)),u=T+s;continue}if(E==="/"){d=T;continue}}E==="["?l++:E==="]"&&l--}const f=c.length===0?a:a.substring(u),m=f.startsWith(P4),_=m?f.substring(1):f,y=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},lee=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},uee=t=>({cache:aee(t.cacheSize),parseClassName:cee(t),...nee(t)}),dee=/\s+/,hee=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(dee);let a="";for(let c=o.length-1;c>=0;c-=1){const l=o[c],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:m}=n(l);let _=!!m,y=r(_?f.substring(0,m):f);if(!y){if(!_){a=l+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=l+(a.length>0?" "+a:a);continue}_=!1}const T=lee(u).join(":"),E=d?T+P4:T,w=E+y;if(s.includes(w))continue;s.push(w);const C=i(y,_);for(let S=0;S<C.length;++S){const M=C[S];s.push(E+M)}a=l+(a.length>0?" "+a:a)}return a};function fee(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=N4(e))&&(r&&(r+=" "),r+=n);return r}const N4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=N4(t[r]))&&(n&&(n+=" "),n+=e);return n};function pee(t,...e){let n,r,i,s=o;function o(c){const l=e.reduce((u,d)=>d(u),t());return n=uee(l),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=hee(c,n);return i(c,u),u}return function(){return s(fee.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},O4=/^\[(?:([a-z-]+):)?(.+)\]$/i,mee=/^\d+\/\d+$/,gee=new Set(["px","full","screen"]),yee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_ee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vo=t=>nd(t)||gee.has(t)||mee.test(t),fa=t=>ph(t,"length",Ree),nd=t=>!!t&&!Number.isNaN(Number(t)),QE=t=>ph(t,"number",nd),Jh=t=>!!t&&Number.isInteger(Number(t)),Eee=t=>t.endsWith("%")&&nd(t.slice(0,-1)),Ge=t=>O4.test(t),pa=t=>yee.test(t),Cee=new Set(["length","size","percentage"]),bee=t=>ph(t,Cee,M4),Iee=t=>ph(t,"position",M4),See=new Set(["image","url"]),Aee=t=>ph(t,See,Pee),kee=t=>ph(t,"",xee),Xh=()=>!0,ph=(t,e,n)=>{const r=O4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Ree=t=>vee.test(t)&&!_ee.test(t),M4=()=>!1,xee=t=>wee.test(t),Pee=t=>Tee.test(t),Nee=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),i=Ut("borderColor"),s=Ut("borderRadius"),o=Ut("borderSpacing"),a=Ut("borderWidth"),c=Ut("contrast"),l=Ut("grayscale"),u=Ut("hueRotate"),d=Ut("invert"),f=Ut("gap"),m=Ut("gradientColorStops"),_=Ut("gradientColorStopPositions"),y=Ut("inset"),T=Ut("margin"),E=Ut("opacity"),w=Ut("padding"),C=Ut("saturate"),S=Ut("scale"),M=Ut("sepia"),D=Ut("skew"),A=Ut("space"),I=Ut("translate"),k=()=>["auto","contain","none"],x=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Ge,e],P=()=>[Ge,e],R=()=>["",vo,fa],B=()=>["auto",nd,Ge],he=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Ge],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[nd,Ge];return{cacheSize:500,separator:":",theme:{colors:[Xh],spacing:[vo,fa],blur:["none","",pa,Ge],brightness:G(),borderColor:[t],borderRadius:["none","","full",pa,Ge],borderSpacing:P(),borderWidth:R(),contrast:G(),grayscale:j(),hueRotate:G(),invert:j(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[Eee,fa],inset:N(),margin:N(),opacity:G(),padding:P(),saturate:G(),scale:G(),sepia:j(),skew:G(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[pa]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...he(),Ge]}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jh,Ge]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",Jh,Ge]}],"grid-cols":[{"grid-cols":[Xh]}],"col-start-end":[{col:["auto",{span:["full",Jh,Ge]},Ge]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Xh]}],"row-start-end":[{row:["auto",{span:[Jh,Ge]},Ge]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ge,e]}],"min-w":[{"min-w":[Ge,e,"min","max","fit"]}],"max-w":[{"max-w":[Ge,e,"none","full","min","max","fit","prose",{screen:[pa]},pa]}],h:[{h:[Ge,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ge,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ge,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ge,e,"auto","min","max","fit"]}],"font-size":[{text:["base",pa,fa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",QE]}],"font-family":[{font:[Xh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",nd,QE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vo,Ge]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vo,fa]}],"underline-offset":[{"underline-offset":["auto",vo,Ge]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...he(),Iee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Aee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:fe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[vo,Ge]}],"outline-w":[{outline:[vo,fa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[vo,fa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",pa,kee]}],"shadow-color":[{shadow:[Xh]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ye(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ye()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pa,Ge]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[C]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Jh,Ge]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[vo,fa,QE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Oee=pee(Nee);function te(...t){return Oee(w4(t))}const G1="/sounds/iphone_ding.mp3",Q1="/sounds/ting.mp3";async function Y1(t){try{const e=new Audio(t);e.addEventListener("error",n=>{console.warn(`Sound file not found: ${t}. Skipping audio playback.`)}),await e.play()}catch{console.warn(`Could not play sound: ${t}. This is likely due to missing audio files.`)}}const Mee=LX,D4=g.forwardRef(({className:t,...e},n)=>p.jsx(f4,{ref:n,className:te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));D4.displayName=f4.displayName;const Dee=fh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),L4=g.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(p4,{ref:r,className:te(Dee({variant:e}),t),...n}));L4.displayName=p4.displayName;const Lee=g.forwardRef(({className:t,...e},n)=>p.jsx(y4,{ref:n,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Lee.displayName=y4.displayName;const F4=g.forwardRef(({className:t,...e},n)=>p.jsx(v4,{ref:n,className:te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(tu,{className:"h-4 w-4"})}));F4.displayName=v4.displayName;const U4=g.forwardRef(({className:t,...e},n)=>p.jsx(m4,{ref:n,className:te("text-sm font-semibold",t),...e}));U4.displayName=m4.displayName;const j4=g.forwardRef(({className:t,...e},n)=>p.jsx(g4,{ref:n,className:te("text-sm opacity-90",t),...e}));j4.displayName=g4.displayName;function Fee(){const{toasts:t}=Xl();return p.jsxs(Mee,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return p.jsxs(L4,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(U4,{children:n}),r&&p.jsx(j4,{children:r})]}),i,p.jsx(F4,{})]},e)}),p.jsx(D4,{})]})}var jv=["light","dark"],Qk="(prefers-color-scheme: dark)",Uee=typeof window>"u",Yk=g.createContext(void 0),jee={setTheme:t=>{},themes:[]},V4=()=>{var t;return(t=g.useContext(Yk))!=null?t:jee},Vee=t=>g.useContext(Yk)?t.children:g.createElement(Bee,{...t}),$ee=["light","dark"],Bee=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=$ee,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:c,children:l,nonce:u})=>{let[d,f]=g.useState(()=>J1(i,o)),[m,_]=g.useState(()=>J1(i)),y=c?Object.values(c):s,T=g.useCallback(S=>{let M=S;if(!M)return;S==="system"&&n&&(M=X1());let D=c?c[M]:M,A=e?zee():null,I=document.documentElement;if(a==="class"?(I.classList.remove(...y),D&&I.classList.add(D)):D?I.setAttribute(a,D):I.removeAttribute(a),r){let k=jv.includes(o)?o:null,x=jv.includes(M)?M:k;I.style.colorScheme=x}A==null||A()},[]),E=g.useCallback(S=>{let M=typeof S=="function"?S(S):S;f(M);try{localStorage.setItem(i,M)}catch{}},[t]),w=g.useCallback(S=>{let M=X1(S);_(M),d==="system"&&n&&!t&&T("system")},[d,t]);g.useEffect(()=>{let S=window.matchMedia(Qk);return S.addListener(w),w(S),()=>S.removeListener(w)},[w]),g.useEffect(()=>{let S=M=>{if(M.key!==i)return;let D=M.newValue||o;E(D)};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[E]),g.useEffect(()=>{T(t??d)},[t,d]);let C=g.useMemo(()=>({theme:d,setTheme:E,forcedTheme:t,resolvedTheme:d==="system"?m:d,themes:n?[...s,"system"]:s,systemTheme:n?m:void 0}),[d,E,t,m,n,s]);return g.createElement(Yk.Provider,{value:C},g.createElement(Hee,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:c,children:l,attrs:y,nonce:u}),l)},Hee=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:c})=>{let l=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?jv.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(_,y=!1,T=!0)=>{let E=o?o[_]:_,w=y?_+"|| ''":`'${E}'`,C="";return i&&T&&!y&&jv.includes(_)&&(C+=`d.style.colorScheme = '${_}';`),n==="class"?y||E?C+=`c.add(${w})`:C+="null":E&&(C+=`d[s](n,${w})`),C},m=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${Qk}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${l?"":"else{"+f(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${d}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})}),J1=(t,e)=>{if(Uee)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},zee=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},X1=t=>(t||(t=window.matchMedia(Qk)),t.matches?"dark":"light"),Wee=t=>{switch(t){case"success":return Gee;case"info":return Yee;case"warning":return Qee;case"error":return Jee;default:return null}},Kee=Array(12).fill(0),qee=({visible:t,className:e})=>Q.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Q.createElement("div",{className:"sonner-spinner"},Kee.map((n,r)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Gee=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Qee=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Yee=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Jee=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Xee=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Zee=()=>{let[t,e]=Q.useState(document.hidden);return Q.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},dI=1,ete=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:dI++,o=this.toasts.find(c=>c.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:a,title:r}):c):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async l=>{if(o=["resolve",l],Q.isValidElement(l))s=!1,this.create({id:r,type:"default",message:l});else if(nte(l)&&!l.ok){s=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,d=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:r,type:"error",message:u,description:d})}else if(n.success!==void 0){s=!1;let u=typeof n.success=="function"?await n.success(l):n.success,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async l=>{if(o=["reject",l],n.error!==void 0){s=!1;let u=typeof n.error=="function"?await n.error(l):n.error,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var l;s&&(this.dismiss(r),r=void 0),(l=n.finally)==null||l.call(n)}),c=()=>new Promise((l,u)=>a.then(()=>o[0]==="reject"?u(o[1]):l(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||dI++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Br=new ete,tte=(t,e)=>{let n=(e==null?void 0:e.id)||dI++;return Br.addToast({title:t,...e,id:n}),n},nte=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",rte=tte,ite=()=>Br.toasts,ste=()=>Br.getActiveToasts(),yu=Object.assign(rte,{success:Br.success,info:Br.info,warning:Br.warning,error:Br.error,custom:Br.custom,message:Br.message,promise:Br.promise,dismiss:Br.dismiss,loading:Br.loading},{getHistory:ite,getToasts:ste});function ote(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}ote(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zg(t){return t.label!==void 0}var ate=3,cte="32px",lte="16px",Z1=4e3,ute=356,dte=14,hte=20,fte=200;function Qi(...t){return t.filter(Boolean).join(" ")}function pte(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var mte=t=>{var e,n,r,i,s,o,a,c,l,u,d;let{invert:f,toast:m,unstyled:_,interacting:y,setHeights:T,visibleToasts:E,heights:w,index:C,toasts:S,expanded:M,removeToast:D,defaultRichColors:A,closeButton:I,style:k,cancelButtonStyle:x,actionButtonStyle:N,className:P="",descriptionClassName:R="",duration:B,position:he,gap:fe,loadingIcon:ye,expandByDefault:z,classNames:j,icons:U,closeButtonAriaLabel:G="Close toast",pauseWhenPageIsHidden:H}=t,[W,re]=Q.useState(null),[ae,ve]=Q.useState(null),[we,et]=Q.useState(!1),[Fe,qe]=Q.useState(!1),[dt,Tt]=Q.useState(!1),[Kt,Re]=Q.useState(!1),[Pe,Rt]=Q.useState(!1),[qt,un]=Q.useState(0),[it,L]=Q.useState(0),$=Q.useRef(m.duration||B||Z1),K=Q.useRef(null),le=Q.useRef(null),ce=C===0,ne=C+1<=E,se=m.type,Ae=m.dismissible!==!1,st=m.className||"",yn=m.descriptionClassName||"",Fr=Q.useMemo(()=>w.findIndex(Ue=>Ue.toastId===m.id)||0,[w,m.id]),Ur=Q.useMemo(()=>{var Ue;return(Ue=m.closeButton)!=null?Ue:I},[m.closeButton,I]),Ai=Q.useMemo(()=>m.duration||B||Z1,[m.duration,B]),On=Q.useRef(0),Bn=Q.useRef(0),Is=Q.useRef(0),Ki=Q.useRef(null),[Ph,ca]=he.split("-"),Nh=Q.useMemo(()=>w.reduce((Ue,ht,xt)=>xt>=Fr?Ue:Ue+ht.height,0),[w,Fr]),Oh=Zee(),Uc=m.invert||f,jc=se==="loading";Bn.current=Q.useMemo(()=>Fr*fe+Nh,[Fr,Nh]),Q.useEffect(()=>{$.current=Ai},[Ai]),Q.useEffect(()=>{et(!0)},[]),Q.useEffect(()=>{let Ue=le.current;if(Ue){let ht=Ue.getBoundingClientRect().height;return L(ht),T(xt=>[{toastId:m.id,height:ht,position:m.position},...xt]),()=>T(xt=>xt.filter(Hn=>Hn.toastId!==m.id))}},[T,m.id]),Q.useLayoutEffect(()=>{if(!we)return;let Ue=le.current,ht=Ue.style.height;Ue.style.height="auto";let xt=Ue.getBoundingClientRect().height;Ue.style.height=ht,L(xt),T(Hn=>Hn.find(jr=>jr.toastId===m.id)?Hn.map(jr=>jr.toastId===m.id?{...jr,height:xt}:jr):[{toastId:m.id,height:xt,position:m.position},...Hn])},[we,m.title,m.description,T,m.id]);let ki=Q.useCallback(()=>{qe(!0),un(Bn.current),T(Ue=>Ue.filter(ht=>ht.toastId!==m.id)),setTimeout(()=>{D(m)},fte)},[m,D,T,Bn]);Q.useEffect(()=>{if(m.promise&&se==="loading"||m.duration===1/0||m.type==="loading")return;let Ue;return M||y||H&&Oh?(()=>{if(Is.current<On.current){let ht=new Date().getTime()-On.current;$.current=$.current-ht}Is.current=new Date().getTime()})():$.current!==1/0&&(On.current=new Date().getTime(),Ue=setTimeout(()=>{var ht;(ht=m.onAutoClose)==null||ht.call(m,m),ki()},$.current)),()=>clearTimeout(Ue)},[M,y,m,se,H,Oh,ki]),Q.useEffect(()=>{m.delete&&ki()},[ki,m.delete]);function po(){var Ue,ht,xt;return U!=null&&U.loading?Q.createElement("div",{className:Qi(j==null?void 0:j.loader,(Ue=m==null?void 0:m.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":se==="loading"},U.loading):ye?Q.createElement("div",{className:Qi(j==null?void 0:j.loader,(ht=m==null?void 0:m.classNames)==null?void 0:ht.loader,"sonner-loader"),"data-visible":se==="loading"},ye):Q.createElement(qee,{className:Qi(j==null?void 0:j.loader,(xt=m==null?void 0:m.classNames)==null?void 0:xt.loader),visible:se==="loading"})}return Q.createElement("li",{tabIndex:0,ref:le,className:Qi(P,st,j==null?void 0:j.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[se],(n=m==null?void 0:m.classNames)==null?void 0:n[se]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||_),"data-mounted":we,"data-promise":!!m.promise,"data-swiped":Pe,"data-removed":Fe,"data-visible":ne,"data-y-position":Ph,"data-x-position":ca,"data-index":C,"data-front":ce,"data-swiping":dt,"data-dismissible":Ae,"data-type":se,"data-invert":Uc,"data-swipe-out":Kt,"data-swipe-direction":ae,"data-expanded":!!(M||z&&we),style:{"--index":C,"--toasts-before":C,"--z-index":S.length-C,"--offset":`${Fe?qt:Bn.current}px`,"--initial-height":z?"auto":`${it}px`,...k,...m.style},onDragEnd:()=>{Tt(!1),re(null),Ki.current=null},onPointerDown:Ue=>{jc||!Ae||(K.current=new Date,un(Bn.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(Tt(!0),Ki.current={x:Ue.clientX,y:Ue.clientY}))},onPointerUp:()=>{var Ue,ht,xt,Hn;if(Kt||!Ae)return;Ki.current=null;let jr=Number(((Ue=le.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Bt=Number(((ht=le.current)==null?void 0:ht.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ss=new Date().getTime()-((xt=K.current)==null?void 0:xt.getTime()),zn=W==="x"?jr:Bt,Vr=Math.abs(zn)/Ss;if(Math.abs(zn)>=hte||Vr>.11){un(Bn.current),(Hn=m.onDismiss)==null||Hn.call(m,m),ve(W==="x"?jr>0?"right":"left":Bt>0?"down":"up"),ki(),Re(!0),Rt(!1);return}Tt(!1),re(null)},onPointerMove:Ue=>{var ht,xt,Hn,jr;if(!Ki.current||!Ae||((ht=window.getSelection())==null?void 0:ht.toString().length)>0)return;let Bt=Ue.clientY-Ki.current.y,Ss=Ue.clientX-Ki.current.x,zn=(xt=t.swipeDirections)!=null?xt:pte(he);!W&&(Math.abs(Ss)>1||Math.abs(Bt)>1)&&re(Math.abs(Ss)>Math.abs(Bt)?"x":"y");let Vr={x:0,y:0};W==="y"?(zn.includes("top")||zn.includes("bottom"))&&(zn.includes("top")&&Bt<0||zn.includes("bottom")&&Bt>0)&&(Vr.y=Bt):W==="x"&&(zn.includes("left")||zn.includes("right"))&&(zn.includes("left")&&Ss<0||zn.includes("right")&&Ss>0)&&(Vr.x=Ss),(Math.abs(Vr.x)>0||Math.abs(Vr.y)>0)&&Rt(!0),(Hn=le.current)==null||Hn.style.setProperty("--swipe-amount-x",`${Vr.x}px`),(jr=le.current)==null||jr.style.setProperty("--swipe-amount-y",`${Vr.y}px`)}},Ur&&!m.jsx?Q.createElement("button",{"aria-label":G,"data-disabled":jc,"data-close-button":!0,onClick:jc||!Ae?()=>{}:()=>{var Ue;ki(),(Ue=m.onDismiss)==null||Ue.call(m,m)},className:Qi(j==null?void 0:j.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=U==null?void 0:U.close)!=null?s:Xee):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Q.createElement(Q.Fragment,null,se||m.icon||m.promise?Q.createElement("div",{"data-icon":"",className:Qi(j==null?void 0:j.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||po():null,m.type!=="loading"?m.icon||(U==null?void 0:U[se])||Wee(se):null):null,Q.createElement("div",{"data-content":"",className:Qi(j==null?void 0:j.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Q.createElement("div",{"data-title":"",className:Qi(j==null?void 0:j.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Q.createElement("div",{"data-description":"",className:Qi(R,yn,j==null?void 0:j.description,(l=m==null?void 0:m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&zg(m.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||x,onClick:Ue=>{var ht,xt;zg(m.cancel)&&Ae&&((xt=(ht=m.cancel).onClick)==null||xt.call(ht,Ue),ki())},className:Qi(j==null?void 0:j.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&zg(m.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:Ue=>{var ht,xt;zg(m.action)&&((xt=(ht=m.action).onClick)==null||xt.call(ht,Ue),!Ue.defaultPrevented&&ki())},className:Qi(j==null?void 0:j.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function eO(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function gte(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?lte:cte;function c(l){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof l=="number"?`${l}px`:l})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(l=>{r[l]===void 0?n[`${o}-${l}`]=a:n[`${o}-${l}`]=typeof r[l]=="number"?`${r[l]}px`:r[l]}):c(a)}),n}var yte=g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:c,mobileOffset:l,theme:u="light",richColors:d,duration:f,style:m,visibleToasts:_=ate,toastOptions:y,dir:T=eO(),gap:E=dte,loadingIcon:w,icons:C,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:M}=t,[D,A]=Q.useState([]),I=Q.useMemo(()=>Array.from(new Set([r].concat(D.filter(H=>H.position).map(H=>H.position)))),[D,r]),[k,x]=Q.useState([]),[N,P]=Q.useState(!1),[R,B]=Q.useState(!1),[he,fe]=Q.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ye=Q.useRef(null),z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=Q.useRef(null),U=Q.useRef(!1),G=Q.useCallback(H=>{A(W=>{var re;return(re=W.find(ae=>ae.id===H.id))!=null&&re.delete||Br.dismiss(H.id),W.filter(({id:ae})=>ae!==H.id)})},[]);return Q.useEffect(()=>Br.subscribe(H=>{if(H.dismiss){A(W=>W.map(re=>re.id===H.id?{...re,delete:!0}:re));return}setTimeout(()=>{kU.flushSync(()=>{A(W=>{let re=W.findIndex(ae=>ae.id===H.id);return re!==-1?[...W.slice(0,re),{...W[re],...H},...W.slice(re+1)]:[H,...W]})})})}),[]),Q.useEffect(()=>{if(u!=="system"){fe(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?fe("dark"):fe("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:W})=>{fe(W?"dark":"light")})}catch{H.addListener(({matches:re})=>{try{fe(re?"dark":"light")}catch(ae){console.error(ae)}})}},[u]),Q.useEffect(()=>{D.length<=1&&P(!1)},[D]),Q.useEffect(()=>{let H=W=>{var re,ae;i.every(ve=>W[ve]||W.code===ve)&&(P(!0),(re=ye.current)==null||re.focus()),W.code==="Escape"&&(document.activeElement===ye.current||(ae=ye.current)!=null&&ae.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[i]),Q.useEffect(()=>{if(ye.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,U.current=!1)}},[ye.current]),Q.createElement("section",{ref:e,"aria-label":`${S} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((H,W)=>{var re;let[ae,ve]=H.split("-");return D.length?Q.createElement("ol",{key:H,dir:T==="auto"?eO():T,tabIndex:-1,ref:ye,className:a,"data-sonner-toaster":!0,"data-theme":he,"data-y-position":ae,"data-lifted":N&&D.length>1&&!s,"data-x-position":ve,style:{"--front-toast-height":`${((re=k[0])==null?void 0:re.height)||0}px`,"--width":`${ute}px`,"--gap":`${E}px`,...m,...gte(c,l)},onBlur:we=>{U.current&&!we.currentTarget.contains(we.relatedTarget)&&(U.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||U.current||(U.current=!0,j.current=we.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{R||P(!1)},onDragEnd:()=>P(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},D.filter(we=>!we.position&&W===0||we.position===H).map((we,et)=>{var Fe,qe;return Q.createElement(mte,{key:we.id,icons:C,index:et,toast:we,defaultRichColors:d,duration:(Fe=y==null?void 0:y.duration)!=null?Fe:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:_,closeButton:(qe=y==null?void 0:y.closeButton)!=null?qe:o,interacting:R,position:H,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:G,toasts:D.filter(dt=>dt.position==we.position),heights:k.filter(dt=>dt.position==we.position),setHeights:x,expandByDefault:s,gap:E,loadingIcon:w,expanded:N,pauseWhenPageIsHidden:M,swipeDirections:t.swipeDirections})})):null}))});const vte=({...t})=>{const{theme:e="system"}=V4();return p.jsx(yte,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var _te=HS[" useId ".trim().toString()]||(()=>{}),wte=0;function jo(t){const[e,n]=g.useState(_te());return Ti(()=>{t||n(r=>r??String(wte++))},[t]),t||(e?`radix-${e}`:"")}const Tte=["top","right","bottom","left"],hc=Math.min,ui=Math.max,Vv=Math.round,Wg=Math.floor,Js=t=>({x:t,y:t}),Ete={left:"right",right:"left",bottom:"top",top:"bottom"},Cte={start:"end",end:"start"};function hI(t,e,n){return ui(t,hc(e,n))}function Go(t,e){return typeof t=="function"?t(e):t}function Qo(t){return t.split("-")[0]}function mh(t){return t.split("-")[1]}function Jk(t){return t==="x"?"y":"x"}function Xk(t){return t==="y"?"height":"width"}const bte=new Set(["top","bottom"]);function Bs(t){return bte.has(Qo(t))?"y":"x"}function Zk(t){return Jk(Bs(t))}function Ite(t,e,n){n===void 0&&(n=!1);const r=mh(t),i=Zk(t),s=Xk(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=$v(o)),[o,$v(o)]}function Ste(t){const e=$v(t);return[fI(t),e,fI(e)]}function fI(t){return t.replace(/start|end/g,e=>Cte[e])}const tO=["left","right"],nO=["right","left"],Ate=["top","bottom"],kte=["bottom","top"];function Rte(t,e,n){switch(t){case"top":case"bottom":return n?e?nO:tO:e?tO:nO;case"left":case"right":return e?Ate:kte;default:return[]}}function xte(t,e,n,r){const i=mh(t);let s=Rte(Qo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(fI)))),s}function $v(t){return t.replace(/left|right|bottom|top/g,e=>Ete[e])}function Pte(t){return{top:0,right:0,bottom:0,left:0,...t}}function $4(t){return typeof t!="number"?Pte(t):{top:t,right:t,bottom:t,left:t}}function Bv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function rO(t,e,n){let{reference:r,floating:i}=t;const s=Bs(e),o=Zk(e),a=Xk(o),c=Qo(e),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(mh(e)){case"start":m[o]-=f*(n&&l?-1:1);break;case"end":m[o]+=f*(n&&l?-1:1);break}return m}const Nte=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=rO(l,r,c),f=r,m={},_=0;for(let y=0;y<a.length;y++){const{name:T,fn:E}=a[y],{x:w,y:C,data:S,reset:M}=await E({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:l,platform:o,elements:{reference:t,floating:e}});u=w??u,d=C??d,m={...m,[T]:{...m[T],...S}},M&&_<=50&&(_++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(l=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):M.rects),{x:u,y:d}=rO(l,f,c)),y=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:m}};async function Op(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=Go(e,t),_=$4(m),T=a[f?d==="floating"?"reference":"floating":d],E=Bv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(T)))==null||n?T:T.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},M=Bv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:C,strategy:c}):w);return{top:(E.top-M.top+_.top)/S.y,bottom:(M.bottom-E.bottom+_.bottom)/S.y,left:(E.left-M.left+_.left)/S.x,right:(M.right-E.right+_.right)/S.x}}const Ote=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=Go(t,e)||{};if(l==null)return{};const d=$4(u),f={x:n,y:r},m=Zk(i),_=Xk(m),y=await o.getDimensions(l),T=m==="y",E=T?"top":"left",w=T?"bottom":"right",C=T?"clientHeight":"clientWidth",S=s.reference[_]+s.reference[m]-f[m]-s.floating[_],M=f[m]-s.reference[m],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=D?D[C]:0;(!A||!await(o.isElement==null?void 0:o.isElement(D)))&&(A=a.floating[C]||s.floating[_]);const I=S/2-M/2,k=A/2-y[_]/2-1,x=hc(d[E],k),N=hc(d[w],k),P=x,R=A-y[_]-N,B=A/2-y[_]/2+I,he=hI(P,B,R),fe=!c.arrow&&mh(i)!=null&&B!==he&&s.reference[_]/2-(B<P?x:N)-y[_]/2<0,ye=fe?B<P?B-P:B-R:0;return{[m]:f[m]+ye,data:{[m]:he,centerOffset:B-he-ye,...fe&&{alignmentOffset:ye}},reset:fe}}}),Mte=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:y=!0,...T}=Go(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=Qo(i),w=Bs(a),C=Qo(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),M=f||(C||!y?[$v(a)]:Ste(a)),D=_!=="none";!f&&D&&M.push(...xte(a,y,_,S));const A=[a,...M],I=await Op(e,T),k=[];let x=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&k.push(I[E]),d){const B=Ite(i,o,S);k.push(I[B[0]],I[B[1]])}if(x=[...x,{placement:i,overflows:k}],!k.every(B=>B<=0)){var N,P;const B=(((N=s.flip)==null?void 0:N.index)||0)+1,he=A[B];if(he&&(!(d==="alignment"?w!==Bs(he):!1)||x.every(z=>z.overflows[0]>0&&Bs(z.placement)===w)))return{data:{index:B,overflows:x},reset:{placement:he}};let fe=(P=x.filter(ye=>ye.overflows[0]<=0).sort((ye,z)=>ye.overflows[1]-z.overflows[1])[0])==null?void 0:P.placement;if(!fe)switch(m){case"bestFit":{var R;const ye=(R=x.filter(z=>{if(D){const j=Bs(z.placement);return j===w||j==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(j=>j>0).reduce((j,U)=>j+U,0)]).sort((z,j)=>z[1]-j[1])[0])==null?void 0:R[0];ye&&(fe=ye);break}case"initialPlacement":fe=a;break}if(i!==fe)return{reset:{placement:fe}}}return{}}}};function iO(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sO(t){return Tte.some(e=>t[e]>=0)}const Dte=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Go(t,e);switch(r){case"referenceHidden":{const s=await Op(e,{...i,elementContext:"reference"}),o=iO(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:sO(o)}}}case"escaped":{const s=await Op(e,{...i,altBoundary:!0}),o=iO(s,n.floating);return{data:{escapedOffsets:o,escaped:sO(o)}}}default:return{}}}}},B4=new Set(["left","top"]);async function Lte(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qo(n),a=mh(n),c=Bs(n)==="y",l=B4.has(o)?-1:1,u=s&&c?-1:1,d=Go(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof _=="number"&&(m=a==="end"?_*-1:_),c?{x:m*u,y:f*l}:{x:f*l,y:m*u}}const Fte=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await Lte(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Ute=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:E,y:w}=T;return{x:E,y:w}}},...c}=Go(t,e),l={x:n,y:r},u=await Op(e,c),d=Bs(Qo(i)),f=Jk(d);let m=l[f],_=l[d];if(s){const T=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=m+u[T],C=m-u[E];m=hI(w,m,C)}if(o){const T=d==="y"?"top":"left",E=d==="y"?"bottom":"right",w=_+u[T],C=_-u[E];_=hI(w,_,C)}const y=a.fn({...e,[f]:m,[d]:_});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:s,[d]:o}}}}}},jte=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Go(t,e),u={x:n,y:r},d=Bs(i),f=Jk(d);let m=u[f],_=u[d];const y=Go(a,e),T=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const C=f==="y"?"height":"width",S=s.reference[f]-s.floating[C]+T.mainAxis,M=s.reference[f]+s.reference[C]-T.mainAxis;m<S?m=S:m>M&&(m=M)}if(l){var E,w;const C=f==="y"?"width":"height",S=B4.has(Qo(i)),M=s.reference[d]-s.floating[C]+(S&&((E=o.offset)==null?void 0:E[d])||0)+(S?0:T.crossAxis),D=s.reference[d]+s.reference[C]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?T.crossAxis:0);_<M?_=M:_>D&&(_=D)}return{[f]:m,[d]:_}}}},Vte=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=Go(t,e),u=await Op(e,l),d=Qo(i),f=mh(i),m=Bs(i)==="y",{width:_,height:y}=s.floating;let T,E;d==="top"||d==="bottom"?(T=d,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=d,T=f==="end"?"top":"bottom");const w=y-u.top-u.bottom,C=_-u.left-u.right,S=hc(y-u[T],w),M=hc(_-u[E],C),D=!e.middlewareData.shift;let A=S,I=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=w),D&&!f){const x=ui(u.left,0),N=ui(u.right,0),P=ui(u.top,0),R=ui(u.bottom,0);m?I=_-2*(x!==0||N!==0?x+N:ui(u.left,u.right)):A=y-2*(P!==0||R!==0?P+R:ui(u.top,u.bottom))}await c({...e,availableWidth:I,availableHeight:A});const k=await o.getDimensions(a.floating);return _!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function Nw(){return typeof window<"u"}function gh(t){return H4(t)?(t.nodeName||"").toLowerCase():"#document"}function yi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function uo(t){var e;return(e=(H4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function H4(t){return Nw()?t instanceof Node||t instanceof yi(t).Node:!1}function vs(t){return Nw()?t instanceof Element||t instanceof yi(t).Element:!1}function io(t){return Nw()?t instanceof HTMLElement||t instanceof yi(t).HTMLElement:!1}function oO(t){return!Nw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yi(t).ShadowRoot}const $te=new Set(["inline","contents"]);function Sm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=_s(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!$te.has(i)}const Bte=new Set(["table","td","th"]);function Hte(t){return Bte.has(gh(t))}const zte=[":popover-open",":modal"];function Ow(t){return zte.some(e=>{try{return t.matches(e)}catch{return!1}})}const Wte=["transform","translate","scale","rotate","perspective"],Kte=["transform","translate","scale","rotate","perspective","filter"],qte=["paint","layout","strict","content"];function e0(t){const e=t0(),n=vs(t)?_s(t):t;return Wte.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Kte.some(r=>(n.willChange||"").includes(r))||qte.some(r=>(n.contain||"").includes(r))}function Gte(t){let e=fc(t);for(;io(e)&&!Nd(e);){if(e0(e))return e;if(Ow(e))return null;e=fc(e)}return null}function t0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Qte=new Set(["html","body","#document"]);function Nd(t){return Qte.has(gh(t))}function _s(t){return yi(t).getComputedStyle(t)}function Mw(t){return vs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fc(t){if(gh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||oO(t)&&t.host||uo(t);return oO(e)?e.host:e}function z4(t){const e=fc(t);return Nd(e)?t.ownerDocument?t.ownerDocument.body:t.body:io(e)&&Sm(e)?e:z4(e)}function Mp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=z4(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=yi(i);if(s){const a=pI(o);return e.concat(o,o.visualViewport||[],Sm(i)?i:[],a&&n?Mp(a):[])}return e.concat(i,Mp(i,[],n))}function pI(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function W4(t){const e=_s(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=io(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Vv(n)!==s||Vv(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function n0(t){return vs(t)?t:t.contextElement}function rd(t){const e=n0(t);if(!io(e))return Js(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=W4(e);let o=(s?Vv(n.width):n.width)/r,a=(s?Vv(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Yte=Js(0);function K4(t){const e=yi(t);return!t0()||!e.visualViewport?Yte:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Jte(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yi(t)?!1:e}function Ol(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=n0(t);let o=Js(1);e&&(r?vs(r)&&(o=rd(r)):o=rd(t));const a=Jte(s,n,r)?K4(s):Js(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=yi(s),m=r&&vs(r)?yi(r):r;let _=f,y=pI(_);for(;y&&r&&m!==_;){const T=rd(y),E=y.getBoundingClientRect(),w=_s(y),C=E.left+(y.clientLeft+parseFloat(w.paddingLeft))*T.x,S=E.top+(y.clientTop+parseFloat(w.paddingTop))*T.y;c*=T.x,l*=T.y,u*=T.x,d*=T.y,c+=C,l+=S,_=yi(y),y=pI(_)}}return Bv({width:u,height:d,x:c,y:l})}function r0(t,e){const n=Mw(t).scrollLeft;return e?e.left+n:Ol(uo(t)).left+n}function q4(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:r0(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Xte(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=uo(r),a=e?Ow(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=Js(1);const u=Js(0),d=io(r);if((d||!d&&!s)&&((gh(r)!=="body"||Sm(o))&&(c=Mw(r)),io(r))){const m=Ol(r);l=rd(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const f=o&&!d&&!s?q4(o,c,!0):Js(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Zte(t){return Array.from(t.getClientRects())}function ene(t){const e=uo(t),n=Mw(t),r=t.ownerDocument.body,i=ui(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ui(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+r0(t);const a=-n.scrollTop;return _s(r).direction==="rtl"&&(o+=ui(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function tne(t,e){const n=yi(t),r=uo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=t0();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}const nne=new Set(["absolute","fixed"]);function rne(t,e){const n=Ol(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=io(t)?rd(t):Js(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function aO(t,e,n){let r;if(e==="viewport")r=tne(t,n);else if(e==="document")r=ene(uo(t));else if(vs(e))r=rne(e,n);else{const i=K4(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Bv(r)}function G4(t,e){const n=fc(t);return n===e||!vs(n)||Nd(n)?!1:_s(n).position==="fixed"||G4(n,e)}function ine(t,e){const n=e.get(t);if(n)return n;let r=Mp(t,[],!1).filter(a=>vs(a)&&gh(a)!=="body"),i=null;const s=_s(t).position==="fixed";let o=s?fc(t):t;for(;vs(o)&&!Nd(o);){const a=_s(o),c=e0(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&nne.has(i.position)||Sm(o)&&!c&&G4(t,o))?r=r.filter(u=>u!==o):i=a,o=fc(o)}return e.set(t,r),r}function sne(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Ow(e)?[]:ine(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=aO(e,u,i);return l.top=ui(d.top,l.top),l.right=hc(d.right,l.right),l.bottom=hc(d.bottom,l.bottom),l.left=ui(d.left,l.left),l},aO(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function one(t){const{width:e,height:n}=W4(t);return{width:e,height:n}}function ane(t,e,n){const r=io(e),i=uo(e),s=n==="fixed",o=Ol(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=Js(0);function l(){c.x=r0(i)}if(r||!r&&!s)if((gh(e)!=="body"||Sm(i))&&(a=Mw(e)),r){const m=Ol(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&l();s&&!r&&i&&l();const u=i&&!r&&!s?q4(i,a):Js(0),d=o.left+a.scrollLeft-c.x-u.x,f=o.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function YE(t){return _s(t).position==="static"}function cO(t,e){if(!io(t)||_s(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return uo(t)===n&&(n=n.ownerDocument.body),n}function Q4(t,e){const n=yi(t);if(Ow(t))return n;if(!io(t)){let i=fc(t);for(;i&&!Nd(i);){if(vs(i)&&!YE(i))return i;i=fc(i)}return n}let r=cO(t,e);for(;r&&Hte(r)&&YE(r);)r=cO(r,e);return r&&Nd(r)&&YE(r)&&!e0(r)?n:r||Gte(t)||n}const cne=async function(t){const e=this.getOffsetParent||Q4,n=this.getDimensions,r=await n(t.floating);return{reference:ane(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lne(t){return _s(t).direction==="rtl"}const une={convertOffsetParentRelativeRectToViewportRelativeRect:Xte,getDocumentElement:uo,getClippingRect:sne,getOffsetParent:Q4,getElementRects:cne,getClientRects:Zte,getDimensions:one,getScale:rd,isElement:vs,isRTL:lne};function Y4(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function dne(t,e){let n=null,r;const i=uo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=t.getBoundingClientRect(),{left:u,top:d,width:f,height:m}=l;if(a||e(),!f||!m)return;const _=Wg(d),y=Wg(i.clientWidth-(u+f)),T=Wg(i.clientHeight-(d+m)),E=Wg(u),C={rootMargin:-_+"px "+-y+"px "+-T+"px "+-E+"px",threshold:ui(0,hc(1,c))||1};let S=!0;function M(D){const A=D[0].intersectionRatio;if(A!==c){if(!S)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!Y4(l,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(M,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,C)}n.observe(t)}return o(!0),s}function hne(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=n0(t),u=i||s?[...l?Mp(l):[],...Mp(e)]:[];u.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const d=l&&a?dne(l,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(E=>{let[w]=E;w&&w.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),n()}),l&&!c&&m.observe(l),m.observe(e));let _,y=c?Ol(t):null;c&&T();function T(){const E=Ol(t);y&&!Y4(y,E)&&n(),y=E,_=requestAnimationFrame(T)}return n(),()=>{var E;u.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(E=m)==null||E.disconnect(),m=null,c&&cancelAnimationFrame(_)}}const fne=Fte,pne=Ute,mne=Mte,gne=Vte,yne=Dte,lO=Ote,vne=jte,_ne=(t,e,n)=>{const r=new Map,i={platform:une,...n},s={...i.platform,_c:r};return Nte(t,e,{...i,platform:s})};var wne=typeof document<"u",Tne=function(){},by=wne?g.useLayoutEffect:Tne;function Hv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Hv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Hv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function J4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function uO(t,e){const n=J4(t);return Math.round(e*n)/n}function JE(t){const e=g.useRef(t);return by(()=>{e.current=t}),e}function Ene(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=g.useState(r);Hv(f,r)||m(r);const[_,y]=g.useState(null),[T,E]=g.useState(null),w=g.useCallback(z=>{z!==D.current&&(D.current=z,y(z))},[]),C=g.useCallback(z=>{z!==A.current&&(A.current=z,E(z))},[]),S=s||_,M=o||T,D=g.useRef(null),A=g.useRef(null),I=g.useRef(u),k=c!=null,x=JE(c),N=JE(i),P=JE(l),R=g.useCallback(()=>{if(!D.current||!A.current)return;const z={placement:e,strategy:n,middleware:f};N.current&&(z.platform=N.current),_ne(D.current,A.current,z).then(j=>{const U={...j,isPositioned:P.current!==!1};B.current&&!Hv(I.current,U)&&(I.current=U,wm.flushSync(()=>{d(U)}))})},[f,e,n,N,P]);by(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[l]);const B=g.useRef(!1);by(()=>(B.current=!0,()=>{B.current=!1}),[]),by(()=>{if(S&&(D.current=S),M&&(A.current=M),S&&M){if(x.current)return x.current(S,M,R);R()}},[S,M,R,x,k]);const he=g.useMemo(()=>({reference:D,floating:A,setReference:w,setFloating:C}),[w,C]),fe=g.useMemo(()=>({reference:S,floating:M}),[S,M]),ye=g.useMemo(()=>{const z={position:n,left:0,top:0};if(!fe.floating)return z;const j=uO(fe.floating,u.x),U=uO(fe.floating,u.y);return a?{...z,transform:"translate("+j+"px, "+U+"px)",...J4(fe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:U}},[n,a,fe.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:he,elements:fe,floatingStyles:ye}),[u,R,he,fe,ye])}const Cne=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?lO({element:r.current,padding:i}).fn(n):{}:r?lO({element:r,padding:i}).fn(n):{}}}},bne=(t,e)=>({...fne(t),options:[t,e]}),Ine=(t,e)=>({...pne(t),options:[t,e]}),Sne=(t,e)=>({...vne(t),options:[t,e]}),Ane=(t,e)=>({...mne(t),options:[t,e]}),kne=(t,e)=>({...gne(t),options:[t,e]}),Rne=(t,e)=>({...yne(t),options:[t,e]}),xne=(t,e)=>({...Cne(t),options:[t,e]});var Pne="Arrow",X4=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(je.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});X4.displayName=Pne;var Nne=X4;function One(t){const[e,n]=g.useState(void 0);return Ti(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var i0="Popper",[Z4,yh]=Ii(i0),[Mne,e$]=Z4(i0),t$=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return p.jsx(Mne,{scope:e,anchor:r,onAnchorChange:i,children:n})};t$.displayName=i0;var n$="PopperAnchor",r$=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=e$(n$,n),o=g.useRef(null),a=It(e,o);return g.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(je.div,{...i,ref:a})});r$.displayName=n$;var s0="PopperContent",[Dne,Lne]=Z4(s0),i$=g.forwardRef((t,e)=>{var we,et,Fe,qe,dt,Tt;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:_,...y}=t,T=e$(s0,n),[E,w]=g.useState(null),C=It(e,Kt=>w(Kt)),[S,M]=g.useState(null),D=One(S),A=(D==null?void 0:D.width)??0,I=(D==null?void 0:D.height)??0,k=r+(s!=="center"?"-"+s:""),x=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(l)?l:[l],P=N.length>0,R={padding:x,boundary:N.filter(Une),altBoundary:P},{refs:B,floatingStyles:he,placement:fe,isPositioned:ye,middlewareData:z}=Ene({strategy:"fixed",placement:k,whileElementsMounted:(...Kt)=>hne(...Kt,{animationFrame:m==="always"}),elements:{reference:T.anchor},middleware:[bne({mainAxis:i+I,alignmentAxis:o}),c&&Ine({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Sne():void 0,...R}),c&&Ane({...R}),kne({...R,apply:({elements:Kt,rects:Re,availableWidth:Pe,availableHeight:Rt})=>{const{width:qt,height:un}=Re.reference,it=Kt.floating.style;it.setProperty("--radix-popper-available-width",`${Pe}px`),it.setProperty("--radix-popper-available-height",`${Rt}px`),it.setProperty("--radix-popper-anchor-width",`${qt}px`),it.setProperty("--radix-popper-anchor-height",`${un}px`)}}),S&&xne({element:S,padding:a}),jne({arrowWidth:A,arrowHeight:I}),f&&Rne({strategy:"referenceHidden",...R})]}),[j,U]=a$(fe),G=pn(_);Ti(()=>{ye&&(G==null||G())},[ye,G]);const H=(we=z.arrow)==null?void 0:we.x,W=(et=z.arrow)==null?void 0:et.y,re=((Fe=z.arrow)==null?void 0:Fe.centerOffset)!==0,[ae,ve]=g.useState();return Ti(()=>{E&&ve(window.getComputedStyle(E).zIndex)},[E]),p.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...he,transform:ye?he.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(qe=z.transformOrigin)==null?void 0:qe.x,(dt=z.transformOrigin)==null?void 0:dt.y].join(" "),...((Tt=z.hide)==null?void 0:Tt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(Dne,{scope:n,placedSide:j,onArrowChange:M,arrowX:H,arrowY:W,shouldHideArrow:re,children:p.jsx(je.div,{"data-side":j,"data-align":U,...y,ref:C,style:{...y.style,animation:ye?void 0:"none"}})})})});i$.displayName=s0;var s$="PopperArrow",Fne={top:"bottom",right:"left",bottom:"top",left:"right"},o$=g.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Lne(s$,r),o=Fne[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(Nne,{...i,ref:n,style:{...i.style,display:"block"}})})});o$.displayName=s$;function Une(t){return t!==null}var jne=t=>({name:"transformOrigin",options:t,fn(e){var T,E,w;const{placement:n,rects:r,middlewareData:i}=e,o=((T=i.arrow)==null?void 0:T.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[l,u]=a$(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((E=i.arrow)==null?void 0:E.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+c/2;let _="",y="";return l==="bottom"?(_=o?d:`${f}px`,y=`${-c}px`):l==="top"?(_=o?d:`${f}px`,y=`${r.floating.height+c}px`):l==="right"?(_=`${-c}px`,y=o?d:`${m}px`):l==="left"&&(_=`${r.floating.width+c}px`,y=o?d:`${m}px`),{data:{x:_,y}}}});function a$(t){const[e,n="center"]=t.split("-");return[e,n]}var o0=t$,Dw=r$,a0=i$,c0=o$,[Lw,oIe]=Ii("Tooltip",[yh]),Fw=yh(),c$="TooltipProvider",Vne=700,mI="tooltip.open",[$ne,l0]=Lw(c$),l$=t=>{const{__scopeTooltip:e,delayDuration:n=Vne,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=g.useRef(!0),a=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),p.jsx($ne,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:g.useCallback(l=>{a.current=l},[]),disableHoverableContent:i,children:s})};l$.displayName=c$;var Dp="Tooltip",[Bne,Uw]=Lw(Dp),u$=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=l0(Dp,t.__scopeTooltip),l=Fw(e),[u,d]=g.useState(null),f=jo(),m=g.useRef(0),_=o??c.disableHoverableContent,y=a??c.delayDuration,T=g.useRef(!1),[E,w]=eu({prop:r,defaultProp:i??!1,onChange:A=>{A?(c.onOpen(),document.dispatchEvent(new CustomEvent(mI))):c.onClose(),s==null||s(A)},caller:Dp}),C=g.useMemo(()=>E?T.current?"delayed-open":"instant-open":"closed",[E]),S=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,T.current=!1,w(!0)},[w]),M=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),D=g.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{T.current=!0,w(!0),m.current=0},y)},[y,w]);return g.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(o0,{...l,children:p.jsx(Bne,{scope:e,contentId:f,open:E,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?D():S()},[c.isOpenDelayedRef,D,S]),onTriggerLeave:g.useCallback(()=>{_?M():(window.clearTimeout(m.current),m.current=0)},[M,_]),onOpen:S,onClose:M,disableHoverableContent:_,children:n})})};u$.displayName=Dp;var gI="TooltipTrigger",d$=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Uw(gI,n),s=l0(gI,n),o=Fw(n),a=g.useRef(null),c=It(e,a,i.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(Dw,{asChild:!0,...o,children:p.jsx(je.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Ce(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ce(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Ce(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ce(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:Ce(t.onBlur,i.onClose),onClick:Ce(t.onClick,i.onClose)})})});d$.displayName=gI;var Hne="TooltipPortal",[aIe,zne]=Lw(Hne,{forceMount:void 0}),Od="TooltipContent",h$=g.forwardRef((t,e)=>{const n=zne(Od,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Uw(Od,t.__scopeTooltip);return p.jsx(nr,{present:r||o.open,children:o.disableHoverableContent?p.jsx(f$,{side:i,...s,ref:e}):p.jsx(Wne,{side:i,...s,ref:e})})}),Wne=g.forwardRef((t,e)=>{const n=Uw(Od,t.__scopeTooltip),r=l0(Od,t.__scopeTooltip),i=g.useRef(null),s=It(e,i),[o,a]=g.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:d}=r,f=g.useCallback(()=>{a(null),d(!1)},[d]),m=g.useCallback((_,y)=>{const T=_.currentTarget,E={x:_.clientX,y:_.clientY},w=Yne(E,T.getBoundingClientRect()),C=Jne(E,w),S=Xne(y.getBoundingClientRect()),M=ere([...C,...S]);a(M),d(!0)},[d]);return g.useEffect(()=>()=>f(),[f]),g.useEffect(()=>{if(c&&u){const _=T=>m(T,u),y=T=>m(T,c);return c.addEventListener("pointerleave",_),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",y)}}},[c,u,m,f]),g.useEffect(()=>{if(o){const _=y=>{const T=y.target,E={x:y.clientX,y:y.clientY},w=(c==null?void 0:c.contains(T))||(u==null?void 0:u.contains(T)),C=!Zne(E,o);w?f():C&&(f(),l())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,u,o,l,f]),p.jsx(f$,{...t,ref:s})}),[Kne,qne]=Lw(Dp,{isInside:!1}),Gne=QJ("TooltipContent"),f$=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=Uw(Od,n),l=Fw(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(mI,u),()=>document.removeEventListener(mI,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(hh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(a0,{"data-state":c.stateAttribute,...l,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(Gne,{children:r}),p.jsx(Kne,{scope:n,isInside:!0,children:p.jsx(vX,{id:c.contentId,role:"tooltip",children:i||r})})]})})});h$.displayName=Od;var p$="TooltipArrow",Qne=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Fw(n);return qne(p$,n).isInside?null:p.jsx(c0,{...i,...r,ref:e})});Qne.displayName=p$;function Yne(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Jne(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Xne(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Zne(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,f=c.y;u>r!=f>r&&n<(d-l)*(r-u)/(f-u)+l&&(i=!i)}return i}function ere(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),tre(e)}function tre(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var nre=l$,rre=u$,ire=d$,m$=h$;const u0=nre,g$=rre,y$=ire,d0=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(m$,{ref:r,sideOffset:e,className:te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));d0.displayName=m$.displayName;var jw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vw=typeof window>"u"||"Deno"in globalThis;function Ji(){}function sre(t,e){return typeof t=="function"?t(e):t}function ore(t){return typeof t=="number"&&t>=0&&t!==1/0}function are(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yI(t,e){return typeof t=="function"?t(e):t}function cre(t,e){return typeof t=="function"?t(e):t}function dO(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==h0(o,e.options))return!1}else if(!Fp(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function hO(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Lp(e.options.mutationKey)!==Lp(s))return!1}else if(!Fp(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function h0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Lp)(t)}function Lp(t){return JSON.stringify(t,(e,n)=>vI(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Fp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Fp(t[n],e[n])):!1}function v$(t,e){if(t===e)return t;const n=fO(t)&&fO(e);if(n||vI(t)&&vI(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:s[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=v$(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return i===o&&l===i?t:a}return e}function fO(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function vI(t){if(!pO(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!pO(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function pO(t){return Object.prototype.toString.call(t)==="[object Object]"}function lre(t){return new Promise(e=>{setTimeout(e,t)})}function ure(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?v$(t,e):e}function dre(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function hre(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var f0=Symbol();function _$(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===f0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ul,Ra,fd,a2,fre=(a2=class extends jw{constructor(){super();gt(this,ul);gt(this,Ra);gt(this,fd);Ke(this,fd,e=>{if(!Vw&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Ra)||this.setEventListener(X(this,fd))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Ra))==null||e.call(this),Ke(this,Ra,void 0))}setEventListener(e){var n;Ke(this,fd,e),(n=X(this,Ra))==null||n.call(this),Ke(this,Ra,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,ul)!==e&&(Ke(this,ul,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,ul)=="boolean"?X(this,ul):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ul=new WeakMap,Ra=new WeakMap,fd=new WeakMap,a2),w$=new fre,pd,xa,md,c2,pre=(c2=class extends jw{constructor(){super();gt(this,pd,!0);gt(this,xa);gt(this,md);Ke(this,md,e=>{if(!Vw&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,xa)||this.setEventListener(X(this,md))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,xa))==null||e.call(this),Ke(this,xa,void 0))}setEventListener(e){var n;Ke(this,md,e),(n=X(this,xa))==null||n.call(this),Ke(this,xa,e(this.setOnline.bind(this)))}setOnline(e){X(this,pd)!==e&&(Ke(this,pd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,pd)}},pd=new WeakMap,xa=new WeakMap,md=new WeakMap,c2),zv=new pre;function mre(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function gre(t){return Math.min(1e3*2**t,3e4)}function T$(t){return(t??"online")==="online"?zv.isOnline():!0}var E$=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function XE(t){return t instanceof E$}function C$(t){let e=!1,n=0,r=!1,i;const s=mre(),o=y=>{var T;r||(f(new E$(y)),(T=t.abort)==null||T.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>w$.isFocused()&&(t.networkMode==="always"||zv.isOnline())&&t.canRun(),u=()=>T$(t.networkMode)&&t.canRun(),d=y=>{var T;r||(r=!0,(T=t.onSuccess)==null||T.call(t,y),i==null||i(),s.resolve(y))},f=y=>{var T;r||(r=!0,(T=t.onError)==null||T.call(t,y),i==null||i(),s.reject(y))},m=()=>new Promise(y=>{var T;i=E=>{(r||l())&&y(E)},(T=t.onPause)==null||T.call(t)}).then(()=>{var y;i=void 0,r||(y=t.onContinue)==null||y.call(t)}),_=()=>{if(r)return;let y;const T=n===0?t.initialPromise:void 0;try{y=T??t.fn()}catch(E){y=Promise.reject(E)}Promise.resolve(y).then(d).catch(E=>{var D;if(r)return;const w=t.retry??(Vw?0:3),C=t.retryDelay??gre,S=typeof C=="function"?C(n,E):C,M=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,E);if(e||!M){f(E);return}n++,(D=t.onFail)==null||D.call(t,n,E),lre(S).then(()=>l()?void 0:m()).then(()=>{e?f(E):_()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?_():m().then(_),s)}}var yre=t=>setTimeout(t,0);function vre(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=yre;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Sr=vre(),dl,l2,b$=(l2=class{constructor(){gt(this,dl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ore(this.gcTime)&&Ke(this,dl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vw?1/0:5*60*1e3))}clearGcTimeout(){X(this,dl)&&(clearTimeout(X(this,dl)),Ke(this,dl,void 0))}},dl=new WeakMap,l2),gd,hl,xi,fl,lr,fm,pl,Xi,wo,u2,_re=(u2=class extends b${constructor(n){super();gt(this,Xi);gt(this,gd);gt(this,hl);gt(this,xi);gt(this,fl);gt(this,lr);gt(this,fm);gt(this,pl);Ke(this,pl,!1),Ke(this,fm,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ke(this,fl,n.client),Ke(this,xi,X(this,fl).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ke(this,gd,Tre(this.options)),this.state=n.state??X(this,gd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=X(this,lr))==null?void 0:n.promise}setOptions(n){this.options={...X(this,fm),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,xi).remove(this)}setData(n,r){const i=ure(this.state.data,n,this.options);return sr(this,Xi,wo).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){sr(this,Xi,wo).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=X(this,lr))==null?void 0:i.promise;return(s=X(this,lr))==null||s.cancel(n),r?r.then(Ji).catch(Ji):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,gd))}isActive(){return this.observers.some(n=>cre(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===f0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>yI(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!are(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,lr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,lr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),X(this,xi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(X(this,lr)&&(X(this,pl)?X(this,lr).cancel({revert:!0}):X(this,lr).cancelRetry()),this.scheduleGc()),X(this,xi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||sr(this,Xi,wo).call(this,{type:"invalidate"})}fetch(n,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(X(this,lr))return X(this,lr).continueRetry(),X(this,lr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(_=>_.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ke(this,pl,!0),i.signal)})},o=()=>{const m=_$(this.options,r),y=(()=>{const T={client:X(this,fl),queryKey:this.queryKey,meta:this.meta};return s(T),T})();return Ke(this,pl,!1),this.options.persister?this.options.persister(m,y,this):m(y)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:X(this,fl),state:this.state,fetchFn:o};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(c,this),Ke(this,hl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&sr(this,Xi,wo).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const l=m=>{var _,y,T,E;XE(m)&&m.silent||sr(this,Xi,wo).call(this,{type:"error",error:m}),XE(m)||((y=(_=X(this,xi).config).onError)==null||y.call(_,m,this),(E=(T=X(this,xi).config).onSettled)==null||E.call(T,this.state.data,m,this)),this.scheduleGc()};return Ke(this,lr,C$({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var _,y,T,E;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(w){l(w);return}(y=(_=X(this,xi).config).onSuccess)==null||y.call(_,m,this),(E=(T=X(this,xi).config).onSettled)==null||E.call(T,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,_)=>{sr(this,Xi,wo).call(this,{type:"failed",failureCount:m,error:_})},onPause:()=>{sr(this,Xi,wo).call(this,{type:"pause"})},onContinue:()=>{sr(this,Xi,wo).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),X(this,lr).start()}},gd=new WeakMap,hl=new WeakMap,xi=new WeakMap,fl=new WeakMap,lr=new WeakMap,fm=new WeakMap,pl=new WeakMap,Xi=new WeakSet,wo=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...wre(i.data,this.options),fetchMeta:n.meta??null};case"success":return Ke(this,hl,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=n.error;return XE(s)&&s.revert&&X(this,hl)?{...X(this,hl),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Sr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),X(this,xi).notify({query:this,type:"updated",action:n})})},u2);function wre(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T$(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Tre(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ds,d2,Ere=(d2=class extends jw{constructor(e={}){super();gt(this,Ds);this.config=e,Ke(this,Ds,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??h0(i,n);let o=this.get(s);return o||(o=new _re({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){X(this,Ds).has(e.queryHash)||(X(this,Ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,Ds).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,Ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,Ds).get(e)}getAll(){return[...X(this,Ds).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>dO(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>dO(e,r)):n}notify(e){Sr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Sr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ds=new WeakMap,d2),Ls,Tr,ml,Fs,ya,h2,Cre=(h2=class extends b${constructor(n){super();gt(this,Fs);gt(this,Ls);gt(this,Tr);gt(this,ml);this.mutationId=n.mutationId,Ke(this,Tr,n.mutationCache),Ke(this,Ls,[]),this.state=n.state||bre(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){X(this,Ls).includes(n)||(X(this,Ls).push(n),this.clearGcTimeout(),X(this,Tr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ke(this,Ls,X(this,Ls).filter(r=>r!==n)),this.scheduleGc(),X(this,Tr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){X(this,Ls).length||(this.state.status==="pending"?this.scheduleGc():X(this,Tr).remove(this))}continue(){var n;return((n=X(this,ml))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,c,l,u,d,f,m,_,y,T,E,w,C,S,M,D,A,I,k;const r=()=>{sr(this,Fs,ya).call(this,{type:"continue"})};Ke(this,ml,C$({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(x,N)=>{sr(this,Fs,ya).call(this,{type:"failed",failureCount:x,error:N})},onPause:()=>{sr(this,Fs,ya).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,Tr).canRun(this)}));const i=this.state.status==="pending",s=!X(this,ml).canStart();try{if(i)r();else{sr(this,Fs,ya).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(o=X(this,Tr).config).onMutate)==null?void 0:a.call(o,n,this));const N=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,n));N!==this.state.context&&sr(this,Fs,ya).call(this,{type:"pending",context:N,variables:n,isPaused:s})}const x=await X(this,ml).start();return await((d=(u=X(this,Tr).config).onSuccess)==null?void 0:d.call(u,x,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,x,n,this.state.context)),await((y=(_=X(this,Tr).config).onSettled)==null?void 0:y.call(_,x,null,this.state.variables,this.state.context,this)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,x,null,n,this.state.context)),sr(this,Fs,ya).call(this,{type:"success",data:x}),x}catch(x){try{throw await((C=(w=X(this,Tr).config).onError)==null?void 0:C.call(w,x,n,this.state.context,this)),await((M=(S=this.options).onError)==null?void 0:M.call(S,x,n,this.state.context)),await((A=(D=X(this,Tr).config).onSettled)==null?void 0:A.call(D,void 0,x,this.state.variables,this.state.context,this)),await((k=(I=this.options).onSettled)==null?void 0:k.call(I,void 0,x,n,this.state.context)),x}finally{sr(this,Fs,ya).call(this,{type:"error",error:x})}}finally{X(this,Tr).runNext(this)}}},Ls=new WeakMap,Tr=new WeakMap,ml=new WeakMap,Fs=new WeakSet,ya=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Sr.batch(()=>{X(this,Ls).forEach(i=>{i.onMutationUpdate(n)}),X(this,Tr).notify({mutation:this,type:"updated",action:n})})},h2);function bre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var So,Zi,pm,f2,Ire=(f2=class extends jw{constructor(e={}){super();gt(this,So);gt(this,Zi);gt(this,pm);this.config=e,Ke(this,So,new Set),Ke(this,Zi,new Map),Ke(this,pm,0)}build(e,n,r){const i=new Cre({mutationCache:this,mutationId:++yg(this,pm)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){X(this,So).add(e);const n=Kg(e);if(typeof n=="string"){const r=X(this,Zi).get(n);r?r.push(e):X(this,Zi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,So).delete(e)){const n=Kg(e);if(typeof n=="string"){const r=X(this,Zi).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&X(this,Zi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Kg(e);if(typeof n=="string"){const r=X(this,Zi).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Kg(e);if(typeof n=="string"){const i=(r=X(this,Zi).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Sr.batch(()=>{X(this,So).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,So).clear(),X(this,Zi).clear()})}getAll(){return Array.from(X(this,So))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>hO(n,r))}findAll(e={}){return this.getAll().filter(n=>hO(e,n))}notify(e){Sr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Sr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ji))))}},So=new WeakMap,Zi=new WeakMap,pm=new WeakMap,f2);function Kg(t){var e;return(e=t.options.scope)==null?void 0:e.id}function mO(t){return{onFetch:(e,n)=>{var u,d,f,m,_;const r=e.options,i=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let y=!1;const T=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},E=_$(e.options,e.fetchOptions),w=async(C,S,M)=>{if(y)return Promise.reject();if(S==null&&C.pages.length)return Promise.resolve(C);const A=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:S,direction:M?"backward":"forward",meta:e.options.meta};return T(N),N})(),I=await E(A),{maxPages:k}=e.options,x=M?hre:dre;return{pages:x(C.pages,I,k),pageParams:x(C.pageParams,S,k)}};if(i&&s.length){const C=i==="backward",S=C?Sre:gO,M={pages:s,pageParams:o},D=S(r,M);a=await w(M,D,C)}else{const C=t??s.length;do{const S=c===0?o[0]??r.initialPageParam:gO(r,a);if(c>0&&S==null)break;a=await w(a,S),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var y,T;return(T=(y=e.options).persister)==null?void 0:T.call(y,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function gO(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Sre(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var en,Pa,Na,yd,vd,Oa,_d,wd,p2,Are=(p2=class{constructor(t={}){gt(this,en);gt(this,Pa);gt(this,Na);gt(this,yd);gt(this,vd);gt(this,Oa);gt(this,_d);gt(this,wd);Ke(this,en,t.queryCache||new Ere),Ke(this,Pa,t.mutationCache||new Ire),Ke(this,Na,t.defaultOptions||{}),Ke(this,yd,new Map),Ke(this,vd,new Map),Ke(this,Oa,0)}mount(){yg(this,Oa)._++,X(this,Oa)===1&&(Ke(this,_d,w$.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,en).onFocus())})),Ke(this,wd,zv.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,en).onOnline())})))}unmount(){var t,e;yg(this,Oa)._--,X(this,Oa)===0&&((t=X(this,_d))==null||t.call(this),Ke(this,_d,void 0),(e=X(this,wd))==null||e.call(this),Ke(this,wd,void 0))}isFetching(t){return X(this,en).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Pa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,en).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,en).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yI(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,en).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=X(this,en).get(r.queryHash),s=i==null?void 0:i.state.data,o=sre(e,s);if(o!==void 0)return X(this,en).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Sr.batch(()=>X(this,en).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,en).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,en);Sr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,en);return Sr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Sr.batch(()=>X(this,en).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Ji).catch(Ji)}invalidateQueries(t,e={}){return Sr.batch(()=>(X(this,en).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Sr.batch(()=>X(this,en).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ji)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ji)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,en).build(this,e);return n.isStaleByTime(yI(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ji).catch(Ji)}fetchInfiniteQuery(t){return t.behavior=mO(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ji).catch(Ji)}ensureInfiniteQueryData(t){return t.behavior=mO(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zv.isOnline()?X(this,Pa).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,en)}getMutationCache(){return X(this,Pa)}getDefaultOptions(){return X(this,Na)}setDefaultOptions(t){Ke(this,Na,t)}setQueryDefaults(t,e){X(this,yd).set(Lp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,yd).values()],n={};return e.forEach(r=>{Fp(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,vd).set(Lp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,vd).values()],n={};return e.forEach(r=>{Fp(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,Na).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=h0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===f0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,Na).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,en).clear(),X(this,Pa).clear()}},en=new WeakMap,Pa=new WeakMap,Na=new WeakMap,yd=new WeakMap,vd=new WeakMap,Oa=new WeakMap,_d=new WeakMap,wd=new WeakMap,p2),kre=g.createContext(void 0),Rre=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(kre.Provider,{value:t,children:e}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ml;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ml||(Ml={}));class Iy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const xre=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Pre=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:xre(t),s=()=>i()!=="web",o=d=>{const f=l.get(d);return!!(f!=null&&f.platforms.has(i())||a(d))},a=d=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===d)},c=d=>t.console.error(d),l=new Map,u=(d,f={})=>{const m=l.get(d);if(m)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),m.proxy;const _=i(),y=a(d);let T;const E=async()=>(!T&&_ in f?T=typeof f[_]=="function"?T=await f[_]():T=f[_]:e!==null&&!T&&"web"in f&&(T=typeof f.web=="function"?T=await f.web():T=f.web),T),w=(I,k)=>{var x,N;if(y){const P=y==null?void 0:y.methods.find(R=>k===R.name);if(P)return P.rtype==="promise"?R=>n.nativePromise(d,k.toString(),R):(R,B)=>n.nativeCallback(d,k.toString(),R,B);if(I)return(x=I[k])===null||x===void 0?void 0:x.bind(I)}else{if(I)return(N=I[k])===null||N===void 0?void 0:N.bind(I);throw new Iy(`"${d}" plugin is not implemented on ${_}`,Ml.Unimplemented)}},C=I=>{let k;const x=(...N)=>{const P=E().then(R=>{const B=w(R,I);if(B){const he=B(...N);return k=he==null?void 0:he.remove,he}else throw new Iy(`"${d}.${I}()" is not implemented on ${_}`,Ml.Unimplemented)});return I==="addListener"&&(P.remove=async()=>k()),P};return x.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(x,"name",{value:I,writable:!1,configurable:!1}),x},S=C("addListener"),M=C("removeListener"),D=(I,k)=>{const x=S({eventName:I},k),N=async()=>{const R=await x;M({eventName:I,callbackId:R},k)},P=new Promise(R=>x.then(()=>R({remove:N})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},P},A=new Proxy({},{get(I,k){switch(k){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?D:S;case"removeListener":return M;default:return C(k)}}});return r[d]=A,l.set(d,{name:d,proxy:A,platforms:new Set([...Object.keys(f),...y?[_]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=i,n.handleError=c,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=u,n.Exception=Iy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Nre=t=>t.Capacitor=Pre(t),Qt=Nre(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vh=Qt.registerPlugin;class p0{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Qt.Exception(e,Ml.Unimplemented)}unavailable(e="not available"){return new Qt.Exception(e,Ml.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const yO=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),vO=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ore extends p0{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=vO(i).trim(),s=vO(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=yO(e.key),r=yO(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}vh("CapacitorCookies",{web:()=>new Ore});const Mre=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),Dre=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},Lre=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,c;return Array.isArray(o)?(c="",o.forEach(l=>{a=e?encodeURIComponent(l):l,c+=`${s}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${s}=${a}`),`${r}&${c}`},"").substr(1):null,I$=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=Dre(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{s.append(c,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Fre extends p0{async request(e){const n=I$(e,e.webFetchExtra),r=Lre(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await s.blob(),c=await Mre(l);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const u={};return s.headers.forEach((d,f)=>{u[f]=d}),{data:c,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}vh("CapacitorHttp",{web:()=>new Fre});const uIe=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Qt,CapacitorException:Iy,get ExceptionCode(){return Ml},WebPlugin:p0,buildRequestInit:I$,registerPlugin:vh},Symbol.toStringTag,{value:"Module"})),Ri=vh("PushNotifications",{});var _I;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(_I||(_I={}));const tn=vh("LocalNotifications",{web:()=>mn(()=>import("./web-BnjU3Yf-.js"),[]).then(t=>new t.LocalNotificationsWeb)}),Ure=Object.freeze(Object.defineProperty({__proto__:null,LocalNotifications:tn,get Weekday(){return _I}},Symbol.toStringTag,{value:"Module"})),jre=()=>{};var _O={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(t,e){if(!t)throw _h(e)},_h=function(t){return new Error("Firebase Database ("+S$.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},m0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(f=64)),r.push(n[u],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(A$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new $re;const f=s<<2|a>>4;if(r.push(f),l!==64){const m=a<<4&240|l>>2;if(r.push(m),d!==64){const _=l<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k$=function(t){const e=A$(t);return m0.encodeByteArray(e,!0)},Wv=function(t){return k$(t).replace(/\./g,"")},Kv=function(t){try{return m0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bre(t){return R$(void 0,t)}function R$(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Hre(n)||(t[n]=R$(t[n],e[n]));return t}function Hre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wre=()=>zre().__FIREBASE_DEFAULTS__,Kre=()=>{if(typeof process>"u"||typeof _O>"u")return;const t=_O.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kv(t[1]);return e&&JSON.parse(e)},$w=()=>{try{return jre()||Wre()||Kre()||qre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x$=t=>{var e,n;return(n=(e=$w())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Bw=t=>{const e=x$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},P$=()=>{var t;return(t=$w())==null?void 0:t.config},N$=t=>{var e;return(e=$w())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function km(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wv(JSON.stringify(n)),Wv(JSON.stringify(o)),""].join(".")}const $f={};function Gre(){const t={prod:[],emulator:[]};for(const e of Object.keys($f))$f[e]?t.emulator.push(e):t.prod.push(e);return t}function Qre(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wO=!1;function Rm(t,e){if(typeof window>"u"||typeof document>"u"||!Es(window.location.host)||$f[t]===e||$f[t]||wO)return;$f[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=Gre().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{wO=!0,o()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Qre(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),y=n("learnmore"),T=document.getElementById(y)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;a(C),u(T,y);const S=l();c(w,E),C.append(w,_,T,S),document.body.appendChild(C)}s?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function Yre(){var e;const t=(e=$w())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function M$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xre(){const t=gr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D$(){return S$.NODE_ADMIN===!0}function Zre(){return!Yre()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v0(){try{return typeof indexedDB=="object"}catch{return!1}}function _0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function L$(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eie="FirebaseError";class Si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eie,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tie(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Si(i,a,r)}}function tie(t,e){return t.replace(nie,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nie=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t){return JSON.parse(t)}function Vn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Up(Kv(s[0])||""),n=Up(Kv(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},rie=function(t){const e=F$(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iie=function(t){const e=F$(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Md(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function wI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qv(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function so(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(TO(s)&&TO(o)){if(!so(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function TO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function gf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sie{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function oie(t,e){const n=new aie(t,e);return n.subscribe.bind(n)}class aie{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cie(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ZE),i.error===void 0&&(i.error=ZE),i.complete===void 0&&(i.complete=ZE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cie(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ZE(){}function Hw(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lie=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ue(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zw=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uie=1e3,die=2,hie=4*60*60*1e3,fie=.5;function EO(t,e=uie,n=die){const r=e*Math.pow(n,t),i=Math.round(fie*r*(Math.random()-.5)*2);return Math.min(hie,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Am;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gie(e))try{this.getOrInitializeService({instanceIdentifier:Kc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kc){return this.instances.has(e)}getOptions(e=Kc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mie(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kc){return this.component?this.component.multipleInstances?e:Kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mie(t){return t===Kc?void 0:t}function gie(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pie(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const vie={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},_ie=nt.INFO,wie={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},Tie=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wie[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=_ie,this._logHandler=Tie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const Eie=(t,e)=>e.some(n=>t instanceof n);let CO,bO;function Cie(){return CO||(CO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bie(){return bO||(bO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U$=new WeakMap,TI=new WeakMap,j$=new WeakMap,eC=new WeakMap,w0=new WeakMap;function Iie(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&U$.set(n,t)}).catch(()=>{}),w0.set(e,t),e}function Sie(t){if(TI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});TI.set(t,e)}let EI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return TI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Aie(t){EI=t(EI)}function kie(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tC(this),e,...n);return j$.set(r,e.sort?e.sort():[e]),Vo(r)}:bie().includes(t)?function(...e){return t.apply(tC(this),e),Vo(U$.get(this))}:function(...e){return Vo(t.apply(tC(this),e))}}function Rie(t){return typeof t=="function"?kie(t):(t instanceof IDBTransaction&&Sie(t),Eie(t,Cie())?new Proxy(t,EI):t)}function Vo(t){if(t instanceof IDBRequest)return Iie(t);if(eC.has(t))return eC.get(t);const e=Rie(t);return e!==t&&(eC.set(t,e),w0.set(e,t)),e}const tC=t=>w0.get(t);function Ww(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Vo(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Vo(o.result),c.oldVersion,c.newVersion,Vo(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function nC(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Vo(n).then(()=>{})}const xie=["get","getKey","getAll","getAllKeys","count"],Pie=["put","add","delete","clear"],rC=new Map;function IO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rC.get(e))return rC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Pie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xie.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return rC.set(e,s),s}Aie(t=>({...t,get:(e,n,r)=>IO(e,n)||t.get(e,n,r),has:(e,n)=>!!IO(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Oie(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Oie(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const CI="@firebase/app",SO="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new xm("@firebase/app"),Mie="@firebase/app-compat",Die="@firebase/analytics-compat",Lie="@firebase/analytics",Fie="@firebase/app-check-compat",Uie="@firebase/app-check",jie="@firebase/auth",Vie="@firebase/auth-compat",$ie="@firebase/database",Bie="@firebase/data-connect",Hie="@firebase/database-compat",zie="@firebase/functions",Wie="@firebase/functions-compat",Kie="@firebase/installations",qie="@firebase/installations-compat",Gie="@firebase/messaging",Qie="@firebase/messaging-compat",Yie="@firebase/performance",Jie="@firebase/performance-compat",Xie="@firebase/remote-config",Zie="@firebase/remote-config-compat",ese="@firebase/storage",tse="@firebase/storage-compat",nse="@firebase/firestore",rse="@firebase/ai",ise="@firebase/firestore-compat",sse="firebase",ose="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="[DEFAULT]",ase={[CI]:"fire-core",[Mie]:"fire-core-compat",[Lie]:"fire-analytics",[Die]:"fire-analytics-compat",[Uie]:"fire-app-check",[Fie]:"fire-app-check-compat",[jie]:"fire-auth",[Vie]:"fire-auth-compat",[$ie]:"fire-rtdb",[Bie]:"fire-data-connect",[Hie]:"fire-rtdb-compat",[zie]:"fire-fn",[Wie]:"fire-fn-compat",[Kie]:"fire-iid",[qie]:"fire-iid-compat",[Gie]:"fire-fcm",[Qie]:"fire-fcm-compat",[Yie]:"fire-perf",[Jie]:"fire-perf-compat",[Xie]:"fire-rc",[Zie]:"fire-rc-compat",[ese]:"fire-gcs",[tse]:"fire-gcs-compat",[nse]:"fire-fst",[ise]:"fire-fst-compat",[rse]:"fire-vertex","fire-js":"fire-js",[sse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=new Map,cse=new Map,II=new Map;function AO(t,e){try{t.container.addComponent(e)}catch(n){Yo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nr(t){const e=t.name;if(II.has(e))return Yo.debug(`There were multiple attempts to register component ${e}.`),!1;II.set(e,t);for(const n of jp.values())AO(n,t);for(const n of cse.values())AO(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nc=new Pc("app","Firebase",lse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class use{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=ose;function V$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:bI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw nc.create("bad-app-name",{appName:String(i)});if(n||(n=P$()),!n)throw nc.create("no-options");const s=jp.get(i);if(s){if(so(n,s.options)&&so(r,s.config))return s;throw nc.create("duplicate-app",{appName:i})}const o=new yie(i);for(const c of II.values())o.addComponent(c);const a=new use(n,r,o);return jp.set(i,a),a}function Oc(t=bI){const e=jp.get(t);if(!e&&t===bI&&P$())return V$();if(!e)throw nc.create("no-app",{appName:t});return e}function dse(){return Array.from(jp.values())}function In(t,e,n){let r=ase[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yo.warn(o.join(" "));return}Nr(new yr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hse="firebase-heartbeat-database",fse=1,Vp="firebase-heartbeat-store";let iC=null;function $$(){return iC||(iC=Ww(hse,fse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vp)}catch(n){console.warn(n)}}}}).catch(t=>{throw nc.create("idb-open",{originalErrorMessage:t.message})})),iC}async function pse(t){try{const n=(await $$()).transaction(Vp),r=await n.objectStore(Vp).get(B$(t));return await n.done,r}catch(e){if(e instanceof Si)Yo.warn(e.message);else{const n=nc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yo.warn(n.message)}}}async function kO(t,e){try{const r=(await $$()).transaction(Vp,"readwrite");await r.objectStore(Vp).put(e,B$(t)),await r.done}catch(n){if(n instanceof Si)Yo.warn(n.message);else{const r=nc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yo.warn(r.message)}}}function B$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mse=1024,gse=30;class yse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _se(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=RO();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>gse){const o=wse(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=RO(),{heartbeatsToSend:r,unsentEntries:i}=vse(this._heartbeatsCache.heartbeats),s=Wv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yo.warn(n),""}}}function RO(){return new Date().toISOString().substring(0,10)}function vse(t,e=mse){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xO(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v0()?_0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xO(t){return Wv(JSON.stringify({version:2,heartbeats:t})).length}function wse(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tse(t){Nr(new yr("platform-logger",e=>new Nie(e),"PRIVATE")),Nr(new yr("heartbeat",e=>new yse(e),"PRIVATE")),In(CI,SO,t),In(CI,SO,"esm2020"),In("fire-js","")}Tse("");var PO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rc,H$;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function k(){}k.prototype=I.prototype,A.D=I.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(x,N,P){for(var R=Array(arguments.length-2),B=2;B<arguments.length;B++)R[B-2]=arguments[B];return I.prototype[N].apply(x,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,I,k){k||(k=0);var x=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)x[N]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(N=0;16>N;++N)x[N]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=A.g[0],k=A.g[1],N=A.g[2];var P=A.g[3],R=I+(P^k&(N^P))+x[0]+3614090360&4294967295;I=k+(R<<7&4294967295|R>>>25),R=P+(N^I&(k^N))+x[1]+3905402710&4294967295,P=I+(R<<12&4294967295|R>>>20),R=N+(k^P&(I^k))+x[2]+606105819&4294967295,N=P+(R<<17&4294967295|R>>>15),R=k+(I^N&(P^I))+x[3]+3250441966&4294967295,k=N+(R<<22&4294967295|R>>>10),R=I+(P^k&(N^P))+x[4]+4118548399&4294967295,I=k+(R<<7&4294967295|R>>>25),R=P+(N^I&(k^N))+x[5]+1200080426&4294967295,P=I+(R<<12&4294967295|R>>>20),R=N+(k^P&(I^k))+x[6]+2821735955&4294967295,N=P+(R<<17&4294967295|R>>>15),R=k+(I^N&(P^I))+x[7]+4249261313&4294967295,k=N+(R<<22&4294967295|R>>>10),R=I+(P^k&(N^P))+x[8]+1770035416&4294967295,I=k+(R<<7&4294967295|R>>>25),R=P+(N^I&(k^N))+x[9]+2336552879&4294967295,P=I+(R<<12&4294967295|R>>>20),R=N+(k^P&(I^k))+x[10]+4294925233&4294967295,N=P+(R<<17&4294967295|R>>>15),R=k+(I^N&(P^I))+x[11]+2304563134&4294967295,k=N+(R<<22&4294967295|R>>>10),R=I+(P^k&(N^P))+x[12]+1804603682&4294967295,I=k+(R<<7&4294967295|R>>>25),R=P+(N^I&(k^N))+x[13]+4254626195&4294967295,P=I+(R<<12&4294967295|R>>>20),R=N+(k^P&(I^k))+x[14]+2792965006&4294967295,N=P+(R<<17&4294967295|R>>>15),R=k+(I^N&(P^I))+x[15]+1236535329&4294967295,k=N+(R<<22&4294967295|R>>>10),R=I+(N^P&(k^N))+x[1]+4129170786&4294967295,I=k+(R<<5&4294967295|R>>>27),R=P+(k^N&(I^k))+x[6]+3225465664&4294967295,P=I+(R<<9&4294967295|R>>>23),R=N+(I^k&(P^I))+x[11]+643717713&4294967295,N=P+(R<<14&4294967295|R>>>18),R=k+(P^I&(N^P))+x[0]+3921069994&4294967295,k=N+(R<<20&4294967295|R>>>12),R=I+(N^P&(k^N))+x[5]+3593408605&4294967295,I=k+(R<<5&4294967295|R>>>27),R=P+(k^N&(I^k))+x[10]+38016083&4294967295,P=I+(R<<9&4294967295|R>>>23),R=N+(I^k&(P^I))+x[15]+3634488961&4294967295,N=P+(R<<14&4294967295|R>>>18),R=k+(P^I&(N^P))+x[4]+3889429448&4294967295,k=N+(R<<20&4294967295|R>>>12),R=I+(N^P&(k^N))+x[9]+568446438&4294967295,I=k+(R<<5&4294967295|R>>>27),R=P+(k^N&(I^k))+x[14]+3275163606&4294967295,P=I+(R<<9&4294967295|R>>>23),R=N+(I^k&(P^I))+x[3]+4107603335&4294967295,N=P+(R<<14&4294967295|R>>>18),R=k+(P^I&(N^P))+x[8]+1163531501&4294967295,k=N+(R<<20&4294967295|R>>>12),R=I+(N^P&(k^N))+x[13]+2850285829&4294967295,I=k+(R<<5&4294967295|R>>>27),R=P+(k^N&(I^k))+x[2]+4243563512&4294967295,P=I+(R<<9&4294967295|R>>>23),R=N+(I^k&(P^I))+x[7]+1735328473&4294967295,N=P+(R<<14&4294967295|R>>>18),R=k+(P^I&(N^P))+x[12]+2368359562&4294967295,k=N+(R<<20&4294967295|R>>>12),R=I+(k^N^P)+x[5]+4294588738&4294967295,I=k+(R<<4&4294967295|R>>>28),R=P+(I^k^N)+x[8]+2272392833&4294967295,P=I+(R<<11&4294967295|R>>>21),R=N+(P^I^k)+x[11]+1839030562&4294967295,N=P+(R<<16&4294967295|R>>>16),R=k+(N^P^I)+x[14]+4259657740&4294967295,k=N+(R<<23&4294967295|R>>>9),R=I+(k^N^P)+x[1]+2763975236&4294967295,I=k+(R<<4&4294967295|R>>>28),R=P+(I^k^N)+x[4]+1272893353&4294967295,P=I+(R<<11&4294967295|R>>>21),R=N+(P^I^k)+x[7]+4139469664&4294967295,N=P+(R<<16&4294967295|R>>>16),R=k+(N^P^I)+x[10]+3200236656&4294967295,k=N+(R<<23&4294967295|R>>>9),R=I+(k^N^P)+x[13]+681279174&4294967295,I=k+(R<<4&4294967295|R>>>28),R=P+(I^k^N)+x[0]+3936430074&4294967295,P=I+(R<<11&4294967295|R>>>21),R=N+(P^I^k)+x[3]+3572445317&4294967295,N=P+(R<<16&4294967295|R>>>16),R=k+(N^P^I)+x[6]+76029189&4294967295,k=N+(R<<23&4294967295|R>>>9),R=I+(k^N^P)+x[9]+3654602809&4294967295,I=k+(R<<4&4294967295|R>>>28),R=P+(I^k^N)+x[12]+3873151461&4294967295,P=I+(R<<11&4294967295|R>>>21),R=N+(P^I^k)+x[15]+530742520&4294967295,N=P+(R<<16&4294967295|R>>>16),R=k+(N^P^I)+x[2]+3299628645&4294967295,k=N+(R<<23&4294967295|R>>>9),R=I+(N^(k|~P))+x[0]+4096336452&4294967295,I=k+(R<<6&4294967295|R>>>26),R=P+(k^(I|~N))+x[7]+1126891415&4294967295,P=I+(R<<10&4294967295|R>>>22),R=N+(I^(P|~k))+x[14]+2878612391&4294967295,N=P+(R<<15&4294967295|R>>>17),R=k+(P^(N|~I))+x[5]+4237533241&4294967295,k=N+(R<<21&4294967295|R>>>11),R=I+(N^(k|~P))+x[12]+1700485571&4294967295,I=k+(R<<6&4294967295|R>>>26),R=P+(k^(I|~N))+x[3]+2399980690&4294967295,P=I+(R<<10&4294967295|R>>>22),R=N+(I^(P|~k))+x[10]+4293915773&4294967295,N=P+(R<<15&4294967295|R>>>17),R=k+(P^(N|~I))+x[1]+2240044497&4294967295,k=N+(R<<21&4294967295|R>>>11),R=I+(N^(k|~P))+x[8]+1873313359&4294967295,I=k+(R<<6&4294967295|R>>>26),R=P+(k^(I|~N))+x[15]+4264355552&4294967295,P=I+(R<<10&4294967295|R>>>22),R=N+(I^(P|~k))+x[6]+2734768916&4294967295,N=P+(R<<15&4294967295|R>>>17),R=k+(P^(N|~I))+x[13]+1309151649&4294967295,k=N+(R<<21&4294967295|R>>>11),R=I+(N^(k|~P))+x[4]+4149444226&4294967295,I=k+(R<<6&4294967295|R>>>26),R=P+(k^(I|~N))+x[11]+3174756917&4294967295,P=I+(R<<10&4294967295|R>>>22),R=N+(I^(P|~k))+x[2]+718787259&4294967295,N=P+(R<<15&4294967295|R>>>17),R=k+(P^(N|~I))+x[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+P&4294967295}r.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var k=I-this.blockSize,x=this.B,N=this.h,P=0;P<I;){if(N==0)for(;P<=k;)i(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<I;)if(x[N++]=A.charCodeAt(P++),N==this.blockSize){i(this,x),N=0;break}}else for(;P<I;)if(x[N++]=A[P++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var k=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=k&255,k/=256;for(this.u(A),A=Array(16),I=k=0;4>I;++I)for(var x=0;32>x;x+=8)A[k++]=this.g[I]>>>x&255;return A};function s(A,I){var k=a;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=I(A)}function o(A,I){this.h=I;for(var k=[],x=!0,N=A.length-1;0<=N;N--){var P=A[N]|0;x&&P==I||(k[N]=P,x=!1)}this.g=k}var a={};function c(A){return-128<=A&&128>A?s(A,function(I){return new o([I|0],0>I?-1:0)}):new o([A|0],0>A?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return T(l(-A));for(var I=[],k=1,x=0;A>=k;x++)I[x]=A/k|0,k*=4294967296;return new o(I,0)}function u(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return T(u(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(I,8)),x=d,N=0;N<A.length;N+=8){var P=Math.min(8,A.length-N),R=parseInt(A.substring(N,N+P),I);8>P?(P=l(Math.pow(I,P)),x=x.j(P).add(l(R))):(x=x.j(k),x=x.add(l(R)))}return x}var d=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-T(this).m();for(var A=0,I=1,k=0;k<this.g.length;k++){var x=this.i(k);A+=(0<=x?x:4294967296+x)*I,I*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(y(this))return"-"+T(this).toString(A);for(var I=l(Math.pow(A,6)),k=this,x="";;){var N=S(k,I).g;k=E(k,N.j(I));var P=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=N,_(k))return P+x;for(;6>P.length;)P="0"+P;x=P+x}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function y(A){return A.h==-1}t.l=function(A){return A=E(this,A),y(A)?-1:_(A)?0:1};function T(A){for(var I=A.g.length,k=[],x=0;x<I;x++)k[x]=~A.g[x];return new o(k,~A.h).add(f)}t.abs=function(){return y(this)?T(this):this},t.add=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],x=0,N=0;N<=I;N++){var P=x+(this.i(N)&65535)+(A.i(N)&65535),R=(P>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);x=R>>>16,P&=65535,R&=65535,k[N]=R<<16|P}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(A,I){return A.add(T(I))}t.j=function(A){if(_(this)||_(A))return d;if(y(this))return y(A)?T(this).j(T(A)):T(T(this).j(A));if(y(A))return T(this.j(T(A)));if(0>this.l(m)&&0>A.l(m))return l(this.m()*A.m());for(var I=this.g.length+A.g.length,k=[],x=0;x<2*I;x++)k[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<A.g.length;N++){var P=this.i(x)>>>16,R=this.i(x)&65535,B=A.i(N)>>>16,he=A.i(N)&65535;k[2*x+2*N]+=R*he,w(k,2*x+2*N),k[2*x+2*N+1]+=P*he,w(k,2*x+2*N+1),k[2*x+2*N+1]+=R*B,w(k,2*x+2*N+1),k[2*x+2*N+2]+=P*B,w(k,2*x+2*N+2)}for(x=0;x<I;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=I;x<2*I;x++)k[x]=0;return new o(k,0)};function w(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function C(A,I){this.g=A,this.h=I}function S(A,I){if(_(I))throw Error("division by zero");if(_(A))return new C(d,d);if(y(A))return I=S(T(A),I),new C(T(I.g),T(I.h));if(y(I))return I=S(A,T(I)),new C(T(I.g),I.h);if(30<A.g.length){if(y(A)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var k=f,x=I;0>=x.l(A);)k=M(k),x=M(x);var N=D(k,1),P=D(x,1);for(x=D(x,2),k=D(k,2);!_(x);){var R=P.add(x);0>=R.l(A)&&(N=N.add(k),P=R),x=D(x,1),k=D(k,1)}return I=E(A,N.j(I)),new C(N,I)}for(N=d;0<=A.l(I);){for(k=Math.max(1,Math.floor(A.m()/I.m())),x=Math.ceil(Math.log(k)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),P=l(k),R=P.j(I);y(R)||0<R.l(A);)k-=x,P=l(k),R=P.j(I);_(P)&&(P=f),N=N.add(P),A=E(A,R)}return new C(N,A)}t.A=function(A){return S(this,A).h},t.and=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],x=0;x<I;x++)k[x]=this.i(x)&A.i(x);return new o(k,this.h&A.h)},t.or=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],x=0;x<I;x++)k[x]=this.i(x)|A.i(x);return new o(k,this.h|A.h)},t.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],x=0;x<I;x++)k[x]=this.i(x)^A.i(x);return new o(k,this.h^A.h)};function M(A){for(var I=A.g.length+1,k=[],x=0;x<I;x++)k[x]=A.i(x)<<1|A.i(x-1)>>>31;return new o(k,A.h)}function D(A,I){var k=I>>5;I%=32;for(var x=A.g.length-k,N=[],P=0;P<x;P++)N[P]=0<I?A.i(P+k)>>>I|A.i(P+k+1)<<32-I:A.i(P+k);return new o(N,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,H$=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,rc=o}).apply(typeof PO<"u"?PO:typeof self<"u"?self:typeof window<"u"?window:{});var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z$,yf,W$,Sy,SI,K$,q$,G$;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof qg=="object"&&qg];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(h,v){if(v)e:{var b=r;h=h.split(".");for(var O=0;O<h.length-1;O++){var V=h[O];if(!(V in b))break e;b=b[V]}h=h[h.length-1],O=b[h],v=v(O),v!=O&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function s(h,v){h instanceof String&&(h+="");var b=0,O=!1,V={next:function(){if(!O&&b<h.length){var q=b++;return{value:v(q,h[q]),done:!1}}return O=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(h){return h||function(){return s(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function l(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function u(h,v,b){return h.call.apply(h.bind,arguments)}function d(h,v,b){if(!h)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,O),h.apply(v,V)}}return function(){return h.apply(v,arguments)}}function f(h,v,b){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function m(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var O=b.slice();return O.push.apply(O,arguments),h.apply(this,O)}}function _(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(O,V,q){for(var pe=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)pe[Pt-2]=arguments[Pt];return v.prototype[V].apply(O,pe)}}function y(h){const v=h.length;if(0<v){const b=Array(v);for(let O=0;O<v;O++)b[O]=h[O];return b}return[]}function T(h,v){for(let b=1;b<arguments.length;b++){const O=arguments[b];if(c(O)){const V=h.length||0,q=O.length||0;h.length=V+q;for(let pe=0;pe<q;pe++)h[V+pe]=O[pe]}else h.push(O)}}class E{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function w(h){return/^[\s\xa0]*$/.test(h)}function C(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function S(h){return S[" "](h),h}S[" "]=function(){};var M=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function D(h,v,b){for(const O in h)v.call(b,h[O],O,h)}function A(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function I(h){const v={};for(const b in h)v[b]=h[b];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(h,v){let b,O;for(let V=1;V<arguments.length;V++){O=arguments[V];for(b in O)h[b]=O[b];for(let q=0;q<k.length;q++)b=k[q],Object.prototype.hasOwnProperty.call(O,b)&&(h[b]=O[b])}}function N(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function P(h){a.setTimeout(()=>{throw h},0)}function R(){var h=j;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class B{constructor(){this.h=this.g=null}add(v,b){const O=he.get();O.set(v,b),this.h?this.h.next=O:this.g=O,this.h=O}}var he=new E(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,z=!1,j=new B,U=()=>{const h=a.Promise.resolve(void 0);ye=()=>{h.then(G)}};var G=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(b){P(b)}var v=he;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}z=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};a.addEventListener("test",b,v),a.removeEventListener("test",b,v)}catch{}return h}();function ae(h,v){if(W.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,O=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(M){e:{try{S(v.nodeName);var V=!0;break e}catch{}V=!1}V||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ae.aa.h.call(this)}}_(ae,W);var ve={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),et=0;function Fe(h,v,b,O,V){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!O,this.ha=V,this.key=++et,this.da=this.fa=!1}function qe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function dt(h){this.src=h,this.g={},this.h=0}dt.prototype.add=function(h,v,b,O,V){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var pe=Kt(h,v,O,V);return-1<pe?(v=h[pe],b||(v.fa=!1)):(v=new Fe(v,this.src,q,!!O,V),v.fa=b,h.push(v)),v};function Tt(h,v){var b=v.type;if(b in h.g){var O=h.g[b],V=Array.prototype.indexOf.call(O,v,void 0),q;(q=0<=V)&&Array.prototype.splice.call(O,V,1),q&&(qe(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Kt(h,v,b,O){for(var V=0;V<h.length;++V){var q=h[V];if(!q.da&&q.listener==v&&q.capture==!!b&&q.ha==O)return V}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Pe={};function Rt(h,v,b,O,V){if(Array.isArray(v)){for(var q=0;q<v.length;q++)Rt(h,v[q],b,O,V);return null}return b=ne(b),h&&h[we]?h.K(v,b,l(O)?!!O.capture:!!O,V):qt(h,v,b,!1,O,V)}function qt(h,v,b,O,V,q){if(!v)throw Error("Invalid event type");var pe=l(V)?!!V.capture:!!V,Pt=le(h);if(Pt||(h[Re]=Pt=new dt(h)),b=Pt.add(v,b,O,pe,q),b.proxy)return b;if(O=un(),b.proxy=O,O.src=h,O.listener=b,h.addEventListener)re||(V=pe),V===void 0&&(V=!1),h.addEventListener(v.toString(),O,V);else if(h.attachEvent)h.attachEvent($(v.toString()),O);else if(h.addListener&&h.removeListener)h.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return b}function un(){function h(b){return v.call(h.src,h.listener,b)}const v=K;return h}function it(h,v,b,O,V){if(Array.isArray(v))for(var q=0;q<v.length;q++)it(h,v[q],b,O,V);else O=l(O)?!!O.capture:!!O,b=ne(b),h&&h[we]?(h=h.i,v=String(v).toString(),v in h.g&&(q=h.g[v],b=Kt(q,b,O,V),-1<b&&(qe(q[b]),Array.prototype.splice.call(q,b,1),q.length==0&&(delete h.g[v],h.h--)))):h&&(h=le(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Kt(v,b,O,V)),(b=-1<h?v[h]:null)&&L(b))}function L(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[we])Tt(v.i,h);else{var b=h.type,O=h.proxy;v.removeEventListener?v.removeEventListener(b,O,h.capture):v.detachEvent?v.detachEvent($(b),O):v.addListener&&v.removeListener&&v.removeListener(O),(b=le(v))?(Tt(b,h),b.h==0&&(b.src=null,v[Re]=null)):qe(h)}}}function $(h){return h in Pe?Pe[h]:Pe[h]="on"+h}function K(h,v){if(h.da)h=!0;else{v=new ae(v,this);var b=h.listener,O=h.ha||h.src;h.fa&&L(h),h=b.call(O,v)}return h}function le(h){return h=h[Re],h instanceof dt?h:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function ne(h){return typeof h=="function"?h:(h[ce]||(h[ce]=function(v){return h.handleEvent(v)}),h[ce])}function se(){H.call(this),this.i=new dt(this),this.M=this,this.F=null}_(se,H),se.prototype[we]=!0,se.prototype.removeEventListener=function(h,v,b,O){it(this,h,v,b,O)};function Ae(h,v){var b,O=h.F;if(O)for(b=[];O;O=O.F)b.push(O);if(h=h.M,O=v.type||v,typeof v=="string")v=new W(v,h);else if(v instanceof W)v.target=v.target||h;else{var V=v;v=new W(O,h),x(v,V)}if(V=!0,b)for(var q=b.length-1;0<=q;q--){var pe=v.g=b[q];V=st(pe,O,!0,v)&&V}if(pe=v.g=h,V=st(pe,O,!0,v)&&V,V=st(pe,O,!1,v)&&V,b)for(q=0;q<b.length;q++)pe=v.g=b[q],V=st(pe,O,!1,v)&&V}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],O=0;O<b.length;O++)qe(b[O]);delete h.g[v],h.h--}}this.F=null},se.prototype.K=function(h,v,b,O){return this.i.add(String(h),v,!1,b,O)},se.prototype.L=function(h,v,b,O){return this.i.add(String(h),v,!0,b,O)};function st(h,v,b,O){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var V=!0,q=0;q<v.length;++q){var pe=v[q];if(pe&&!pe.da&&pe.capture==b){var Pt=pe.listener,Wn=pe.ha||pe.src;pe.fa&&Tt(h.i,pe),V=Pt.call(Wn,O)!==!1&&V}}return V&&!O.defaultPrevented}function yn(h,v,b){if(typeof h=="function")b&&(h=f(h,b));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(h,v||0)}function Fr(h){h.g=yn(()=>{h.g=null,h.i&&(h.i=!1,Fr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ur extends H{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(h){H.call(this),this.h=h,this.g={}}_(Ai,H);var On=[];function Bn(h){D(h.g,function(v,b){this.g.hasOwnProperty(b)&&L(v)},h),h.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),Bn(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=a.JSON.stringify,Ki=a.JSON.parse,Ph=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function ca(){}ca.prototype.h=null;function Nh(h){return h.h||(h.h=h.i())}function Oh(){}var Uc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jc(){W.call(this,"d")}_(jc,W);function ki(){W.call(this,"c")}_(ki,W);var po={},Ue=null;function ht(){return Ue=Ue||new se}po.La="serverreachability";function xt(h){W.call(this,po.La,h)}_(xt,W);function Hn(h){const v=ht();Ae(v,new xt(v))}po.STAT_EVENT="statevent";function jr(h,v){W.call(this,po.STAT_EVENT,h),this.stat=v}_(jr,W);function Bt(h){const v=ht();Ae(v,new jr(v,h))}po.Ma="timingevent";function Ss(h,v){W.call(this,po.Ma,h),this.size=v}_(Ss,W);function zn(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},v)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function YW(h,v,b,O,V,q){h.info(function(){if(h.g)if(q)for(var pe="",Pt=q.split("&"),Wn=0;Wn<Pt.length;Wn++){var mt=Pt[Wn].split("=");if(1<mt.length){var rr=mt[0];mt=mt[1];var ir=rr.split("_");pe=2<=ir.length&&ir[1]=="type"?pe+(rr+"="+mt+"&"):pe+(rr+"=redacted&")}}else pe=null;else pe=q;return"XMLHTTP REQ ("+O+") [attempt "+V+"]: "+v+`
`+b+`
`+pe})}function JW(h,v,b,O,V,q,pe){h.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+V+"]: "+v+`
`+b+`
`+q+" "+pe})}function du(h,v,b,O){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ZW(h,b)+(O?" "+O:"")})}function XW(h,v){h.info(function(){return"TIMEOUT: "+v})}Vr.prototype.info=function(){};function ZW(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var O=b[h];if(!(2>O.length)){var V=O[1];if(Array.isArray(V)&&!(1>V.length)){var q=V[0];if(q!="noop"&&q!="stop"&&q!="close")for(var pe=1;pe<V.length;pe++)V[pe]=""}}}}return Is(b)}catch{return v}}var rg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ZT;function ig(){}_(ig,ca),ig.prototype.g=function(){return new XMLHttpRequest},ig.prototype.i=function(){return{}},ZT=new ig;function la(h,v,b,O){this.j=h,this.i=v,this.l=b,this.R=O||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gx}function Gx(){this.i=null,this.g="",this.h=!1}var Qx={},eE={};function tE(h,v,b){h.L=1,h.v=cg(mo(v)),h.m=b,h.P=!0,Yx(h,null)}function Yx(h,v){h.F=Date.now(),sg(h),h.A=mo(h.v);var b=h.A,O=h.R;Array.isArray(O)||(O=[String(O)]),uP(b.i,"t",O),h.C=0,b=h.j.J,h.h=new Gx,h.g=kP(h.j,b?v:null,!h.m),0<h.O&&(h.M=new Ur(f(h.Y,h,h.g),h.O)),v=h.U,b=h.g,O=h.ca;var V="readystatechange";Array.isArray(V)||(V&&(On[0]=V.toString()),V=On);for(var q=0;q<V.length;q++){var pe=Rt(b,V[q],O||v.handleEvent,!1,v.h||v);if(!pe)break;v.g[pe.key]=pe}v=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Hn(),YW(h.i,h.u,h.A,h.l,h.R,h.m)}la.prototype.ca=function(h){h=h.target;const v=this.M;v&&go(h)==3?v.j():this.Y(h)},la.prototype.Y=function(h){try{if(h==this.g)e:{const ir=go(this.g);var v=this.g.Ba();const pu=this.g.Z();if(!(3>ir)&&(ir!=3||this.g&&(this.h.h||this.g.oa()||yP(this.g)))){this.J||ir!=4||v==7||(v==8||0>=pu?Hn(3):Hn(2)),nE(this);var b=this.g.Z();this.X=b;t:if(Jx(this)){var O=yP(this.g);h="";var V=O.length,q=go(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vc(this),Mh(this);var pe="";break t}this.h.i=new a.TextDecoder}for(v=0;v<V;v++)this.h.h=!0,h+=this.h.i.decode(O[v],{stream:!(q&&v==V-1)});O.length=0,this.h.g+=h,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=b==200,JW(this.i,this.u,this.A,this.l,this.R,ir,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,Wn=this.g;if((Pt=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Pt)){var mt=Pt;break t}}mt=null}if(b=mt)du(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rE(this,b);else{this.o=!1,this.s=3,Bt(12),Vc(this),Mh(this);break e}}if(this.P){b=!0;let qi;for(;!this.J&&this.C<pe.length;)if(qi=eK(this,pe),qi==eE){ir==4&&(this.s=4,Bt(14),b=!1),du(this.i,this.l,null,"[Incomplete Response]");break}else if(qi==Qx){this.s=4,Bt(15),du(this.i,this.l,pe,"[Invalid Chunk]"),b=!1;break}else du(this.i,this.l,qi,null),rE(this,qi);if(Jx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ir!=4||pe.length!=0||this.h.h||(this.s=1,Bt(16),b=!1),this.o=this.o&&b,!b)du(this.i,this.l,pe,"[Invalid Chunked Response]"),Vc(this),Mh(this);else if(0<pe.length&&!this.W){this.W=!0;var rr=this.j;rr.g==this&&rr.ba&&!rr.M&&(rr.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),lE(rr),rr.M=!0,Bt(11))}}else du(this.i,this.l,pe,null),rE(this,pe);ir==4&&Vc(this),this.o&&!this.J&&(ir==4?bP(this.j,this):(this.o=!1,sg(this)))}else yK(this.g),b==400&&0<pe.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Vc(this),Mh(this)}}}catch{}finally{}};function Jx(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function eK(h,v){var b=h.C,O=v.indexOf(`
`,b);return O==-1?eE:(b=Number(v.substring(b,O)),isNaN(b)?Qx:(O+=1,O+b>v.length?eE:(v=v.slice(O,O+b),h.C=O+b,v)))}la.prototype.cancel=function(){this.J=!0,Vc(this)};function sg(h){h.S=Date.now()+h.I,Xx(h,h.I)}function Xx(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=zn(f(h.ba,h),v)}function nE(h){h.B&&(a.clearTimeout(h.B),h.B=null)}la.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(XW(this.i,this.A),this.L!=2&&(Hn(),Bt(17)),Vc(this),this.s=2,Mh(this)):Xx(this,this.S-h)};function Mh(h){h.j.G==0||h.J||bP(h.j,h)}function Vc(h){nE(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Bn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function rE(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||iE(b.h,h))){if(!h.K&&iE(b.h,h)&&b.G==3){try{var O=b.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var V=O;if(V[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)pg(b),hg(b);else break e;cE(b),Bt(18)}}else b.za=V[1],0<b.za-b.T&&37500>V[2]&&b.F&&b.v==0&&!b.C&&(b.C=zn(f(b.Za,b),6e3));if(1>=tP(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Bc(b,11)}else if((h.K||b.g==h)&&pg(b),!w(v))for(V=b.Da.g.parse(v),v=0;v<V.length;v++){let mt=V[v];if(b.T=mt[0],mt=mt[1],b.G==2)if(mt[0]=="c"){b.K=mt[1],b.ia=mt[2];const rr=mt[3];rr!=null&&(b.la=rr,b.j.info("VER="+b.la));const ir=mt[4];ir!=null&&(b.Aa=ir,b.j.info("SVER="+b.Aa));const pu=mt[5];pu!=null&&typeof pu=="number"&&0<pu&&(O=1.5*pu,b.L=O,b.j.info("backChannelRequestTimeoutMs_="+O)),O=b;const qi=h.g;if(qi){const gg=qi.g?qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gg){var q=O.h;q.g||gg.indexOf("spdy")==-1&&gg.indexOf("quic")==-1&&gg.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(sE(q,q.h),q.h=null))}if(O.D){const uE=qi.g?qi.g.getResponseHeader("X-HTTP-Session-Id"):null;uE&&(O.ya=uE,Ft(O.I,O.D,uE))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),O=b;var pe=h;if(O.qa=AP(O,O.J?O.ia:null,O.W),pe.K){nP(O.h,pe);var Pt=pe,Wn=O.L;Wn&&(Pt.I=Wn),Pt.B&&(nE(Pt),sg(Pt)),O.g=pe}else EP(O);0<b.i.length&&fg(b)}else mt[0]!="stop"&&mt[0]!="close"||Bc(b,7);else b.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Bc(b,7):aE(b):mt[0]!="noop"&&b.l&&b.l.ta(mt),b.v=0)}}Hn(4)}catch{}}var tK=class{constructor(h,v){this.g=h,this.map=v}};function Zx(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eP(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function tP(h){return h.h?1:h.g?h.g.size:0}function iE(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function sE(h,v){h.g?h.g.add(v):h.h=v}function nP(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Zx.prototype.cancel=function(){if(this.i=rP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function rP(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return y(h.i)}function nK(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var v=[],b=h.length,O=0;O<b;O++)v.push(h[O]);return v}v=[],b=0;for(O in h)v[b++]=h[O];return v}function rK(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const O in h)v[b++]=O;return v}}}function iP(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=rK(h),O=nK(h),V=O.length,q=0;q<V;q++)v.call(void 0,O[q],b&&b[q],h)}var sP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iK(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var O=h[b].indexOf("="),V=null;if(0<=O){var q=h[b].substring(0,O);V=h[b].substring(O+1)}else q=h[b];v(q,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function $c(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof $c){this.h=h.h,og(this,h.j),this.o=h.o,this.g=h.g,ag(this,h.s),this.l=h.l;var v=h.i,b=new Fh;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),oP(this,b),this.m=h.m}else h&&(v=String(h).match(sP))?(this.h=!1,og(this,v[1]||"",!0),this.o=Dh(v[2]||""),this.g=Dh(v[3]||"",!0),ag(this,v[4]),this.l=Dh(v[5]||"",!0),oP(this,v[6]||"",!0),this.m=Dh(v[7]||"")):(this.h=!1,this.i=new Fh(null,this.h))}$c.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Lh(v,aP,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Lh(v,aP,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Lh(b,b.charAt(0)=="/"?aK:oK,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Lh(b,lK)),h.join("")};function mo(h){return new $c(h)}function og(h,v,b){h.j=b?Dh(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ag(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function oP(h,v,b){v instanceof Fh?(h.i=v,uK(h.i,h.h)):(b||(v=Lh(v,cK)),h.i=new Fh(v,h.h))}function Ft(h,v,b){h.i.set(v,b)}function cg(h){return Ft(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Dh(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Lh(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,sK),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sK(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var aP=/[#\/\?@]/g,oK=/[#\?:]/g,aK=/[#\?]/g,cK=/[#\?@]/g,lK=/#/g;function Fh(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function ua(h){h.g||(h.g=new Map,h.h=0,h.i&&iK(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=Fh.prototype,t.add=function(h,v){ua(this),this.i=null,h=hu(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function cP(h,v){ua(h),v=hu(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function lP(h,v){return ua(h),v=hu(h,v),h.g.has(v)}t.forEach=function(h,v){ua(this),this.g.forEach(function(b,O){b.forEach(function(V){h.call(v,V,O,this)},this)},this)},t.na=function(){ua(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let O=0;O<v.length;O++){const V=h[O];for(let q=0;q<V.length;q++)b.push(v[O])}return b},t.V=function(h){ua(this);let v=[];if(typeof h=="string")lP(this,h)&&(v=v.concat(this.g.get(hu(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},t.set=function(h,v){return ua(this),this.i=null,h=hu(this,h),lP(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function uP(h,v,b){cP(h,v),0<b.length&&(h.i=null,h.g.set(hu(h,v),y(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var O=v[b];const q=encodeURIComponent(String(O)),pe=this.V(O);for(O=0;O<pe.length;O++){var V=q;pe[O]!==""&&(V+="="+encodeURIComponent(String(pe[O]))),h.push(V)}}return this.i=h.join("&")};function hu(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function uK(h,v){v&&!h.j&&(ua(h),h.i=null,h.g.forEach(function(b,O){var V=O.toLowerCase();O!=V&&(cP(this,O),uP(this,V,b))},h)),h.j=v}function dK(h,v){const b=new Vr;if(a.Image){const O=new Image;O.onload=m(da,b,"TestLoadImage: loaded",!0,v,O),O.onerror=m(da,b,"TestLoadImage: error",!1,v,O),O.onabort=m(da,b,"TestLoadImage: abort",!1,v,O),O.ontimeout=m(da,b,"TestLoadImage: timeout",!1,v,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=h}else v(!1)}function hK(h,v){const b=new Vr,O=new AbortController,V=setTimeout(()=>{O.abort(),da(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:O.signal}).then(q=>{clearTimeout(V),q.ok?da(b,"TestPingServer: ok",!0,v):da(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(V),da(b,"TestPingServer: error",!1,v)})}function da(h,v,b,O,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),O(b)}catch{}}function fK(){this.g=new Ph}function pK(h,v,b){const O=b||"";try{iP(h,function(V,q){let pe=V;l(V)&&(pe=Is(V)),v.push(O+q+"="+encodeURIComponent(pe))})}catch(V){throw v.push(O+"type="+encodeURIComponent("_badmap")),V}}function lg(h){this.l=h.Ub||null,this.j=h.eb||!1}_(lg,ca),lg.prototype.g=function(){return new ug(this.l,this.j)},lg.prototype.i=function(h){return function(){return h}}({});function ug(h,v){se.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ug,se),t=ug.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,jh(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uh(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,jh(this)),this.g&&(this.readyState=3,jh(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dP(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function dP(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Uh(this):jh(this),this.readyState==3&&dP(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Uh(this))},t.Qa=function(h){this.g&&(this.response=h,Uh(this))},t.ga=function(){this.g&&Uh(this)};function Uh(h){h.readyState=4,h.l=null,h.j=null,h.v=null,jh(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function jh(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ug.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function hP(h){let v="";return D(h,function(b,O){v+=O,v+=":",v+=b,v+=`\r
`}),v}function oE(h,v,b){e:{for(O in b){var O=!1;break e}O=!0}O||(b=hP(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):Ft(h,v,b))}function Zt(h){se.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Zt,se);var mK=/^https?$/i,gK=["POST","PUT"];t=Zt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,b,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ZT.g(),this.v=this.o?Nh(this.o):Nh(ZT),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(q){fP(this,q);return}if(h=b||"",b=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var V in O)b.set(V,O[V]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const q of O.keys())b.set(q,O.get(q));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(b.keys()).find(q=>q.toLowerCase()=="content-type"),V=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gK,v,void 0))||O||V||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,pe]of b)this.g.setRequestHeader(q,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gP(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){fP(this,q)}};function fP(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,pP(h),dg(h)}function pP(h){h.A||(h.A=!0,Ae(h,"complete"),Ae(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ae(this,"complete"),Ae(this,"abort"),dg(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dg(this,!0)),Zt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mP(this):this.bb())},t.bb=function(){mP(this)};function mP(h){if(h.h&&typeof o<"u"&&(!h.v[1]||go(h)!=4||h.Z()!=2)){if(h.u&&go(h)==4)yn(h.Ea,0,h);else if(Ae(h,"readystatechange"),go(h)==4){h.h=!1;try{const pe=h.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var O;if(O=pe===0){var V=String(h.D).match(sP)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),O=!mK.test(V?V.toLowerCase():"")}b=O}if(b)Ae(h,"complete"),Ae(h,"success");else{h.m=6;try{var q=2<go(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",pP(h)}}finally{dg(h)}}}}function dg(h,v){if(h.g){gP(h);const b=h.g,O=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Ae(h,"ready");try{b.onreadystatechange=O}catch{}}}function gP(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function go(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<go(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ki(v)}};function yP(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function yK(h){const v={};h=(h.g&&2<=go(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<h.length;O++){if(w(h[O]))continue;var b=N(h[O]);const V=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const q=v[V]||[];v[V]=q,q.push(b)}A(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vh(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function vP(h){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vh("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vh("baseRetryDelayMs",5e3,h),this.cb=Vh("retryDelaySeedMs",1e4,h),this.Wa=Vh("forwardChannelMaxRetries",2,h),this.wa=Vh("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Zx(h&&h.concurrentRequestLimit),this.Da=new fK,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vP.prototype,t.la=8,t.G=1,t.connect=function(h,v,b,O){Bt(0),this.W=h,this.H=v||{},b&&O!==void 0&&(this.H.OSID=b,this.H.OAID=O),this.F=this.X,this.I=AP(this,null,this.W),fg(this)};function aE(h){if(_P(h),h.G==3){var v=h.U++,b=mo(h.I);if(Ft(b,"SID",h.K),Ft(b,"RID",v),Ft(b,"TYPE","terminate"),$h(h,b),v=new la(h,h.j,v),v.L=2,v.v=cg(mo(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=v.v,b=!0),b||(v.g=kP(v.j,null),v.g.ea(v.v)),v.F=Date.now(),sg(v)}SP(h)}function hg(h){h.g&&(lE(h),h.g.cancel(),h.g=null)}function _P(h){hg(h),h.u&&(a.clearTimeout(h.u),h.u=null),pg(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function fg(h){if(!eP(h.h)&&!h.s){h.s=!0;var v=h.Ga;ye||U(),z||(ye(),z=!0),j.add(v,h),h.B=0}}function vK(h,v){return tP(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=zn(f(h.Ga,h,v),IP(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const V=new la(this,this.j,h);let q=this.o;if(this.S&&(q?(q=I(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(V.H=q,q=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var O=this.i[b];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=TP(this,V,v),b=mo(this.I),Ft(b,"RID",h),Ft(b,"CVER",22),this.D&&Ft(b,"X-HTTP-Session-Id",this.D),$h(this,b),q&&(this.O?v="headers="+encodeURIComponent(String(hP(q)))+"&"+v:this.m&&oE(b,this.m,q)),sE(this.h,V),this.Ua&&Ft(b,"TYPE","init"),this.P?(Ft(b,"$req",v),Ft(b,"SID","null"),V.T=!0,tE(V,b,null)):tE(V,b,v),this.G=2}}else this.G==3&&(h?wP(this,h):this.i.length==0||eP(this.h)||wP(this))};function wP(h,v){var b;v?b=v.l:b=h.U++;const O=mo(h.I);Ft(O,"SID",h.K),Ft(O,"RID",b),Ft(O,"AID",h.T),$h(h,O),h.m&&h.o&&oE(O,h.m,h.o),b=new la(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=TP(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),sE(h.h,b),tE(b,O,v)}function $h(h,v){h.H&&D(h.H,function(b,O){Ft(v,O,b)}),h.l&&iP({},function(b,O){Ft(v,O,b)})}function TP(h,v,b){b=Math.min(h.i.length,b);var O=h.l?f(h.l.Na,h.l,h):null;e:{var V=h.i;let q=-1;for(;;){const pe=["count="+b];q==-1?0<b?(q=V[0].g,pe.push("ofs="+q)):q=0:pe.push("ofs="+q);let Pt=!0;for(let Wn=0;Wn<b;Wn++){let mt=V[Wn].g;const rr=V[Wn].map;if(mt-=q,0>mt)q=Math.max(0,V[Wn].g-100),Pt=!1;else try{pK(rr,pe,"req"+mt+"_")}catch{O&&O(rr)}}if(Pt){O=pe.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,O}function EP(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ye||U(),z||(ye(),z=!0),j.add(v,h),h.v=0}}function cE(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=zn(f(h.Fa,h),IP(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,CP(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=zn(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),hg(this),CP(this))};function lE(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function CP(h){h.g=new la(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=mo(h.qa);Ft(v,"RID","rpc"),Ft(v,"SID",h.K),Ft(v,"AID",h.T),Ft(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ft(v,"TO",h.ja),Ft(v,"TYPE","xmlhttp"),$h(h,v),h.m&&h.o&&oE(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=cg(mo(v)),b.m=null,b.P=!0,Yx(b,h)}t.Za=function(){this.C!=null&&(this.C=null,hg(this),cE(this),Bt(19))};function pg(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function bP(h,v){var b=null;if(h.g==v){pg(h),lE(h),h.g=null;var O=2}else if(iE(h.h,v))b=v.D,nP(h.h,v),O=1;else return;if(h.G!=0){if(v.o)if(O==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var V=h.B;O=ht(),Ae(O,new Ss(O,b)),fg(h)}else EP(h);else if(V=v.s,V==3||V==0&&0<v.X||!(O==1&&vK(h,v)||O==2&&cE(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),V){case 1:Bc(h,5);break;case 4:Bc(h,10);break;case 3:Bc(h,6);break;default:Bc(h,2)}}}function IP(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function Bc(h,v){if(h.j.info("Error code "+v),v==2){var b=f(h.fb,h),O=h.Xa;const V=!O;O=new $c(O||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||og(O,"https"),cg(O),V?dK(O.toString(),b):hK(O.toString(),b)}else Bt(2);h.G=0,h.l&&h.l.sa(v),SP(h),_P(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function SP(h){if(h.G=0,h.ka=[],h.l){const v=rP(h.h);(v.length!=0||h.i.length!=0)&&(T(h.ka,v),T(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function AP(h,v,b){var O=b instanceof $c?mo(b):new $c(b);if(O.g!="")v&&(O.g=v+"."+O.g),ag(O,O.s);else{var V=a.location;O=V.protocol,v=v?v+"."+V.hostname:V.hostname,V=+V.port;var q=new $c(null);O&&og(q,O),v&&(q.g=v),V&&ag(q,V),b&&(q.l=b),O=q}return b=h.D,v=h.ya,b&&v&&Ft(O,b,v),Ft(O,"VER",h.la),$h(h,O),O}function kP(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Zt(new lg({eb:b})):new Zt(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function RP(){}t=RP.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mg(){}mg.prototype.g=function(h,v){return new oi(h,v)};function oi(h,v){se.call(this),this.g=new vP(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!w(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!w(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new fu(this)}_(oi,se),oi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},oi.prototype.close=function(){aE(this.g)},oi.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Is(h),h=b);v.i.push(new tK(v.Ya++,h)),v.G==3&&fg(v)},oi.prototype.N=function(){this.g.l=null,delete this.j,aE(this.g),delete this.g,oi.aa.N.call(this)};function xP(h){jc.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}_(xP,jc);function PP(){ki.call(this),this.status=1}_(PP,ki);function fu(h){this.g=h}_(fu,RP),fu.prototype.ua=function(){Ae(this.g,"a")},fu.prototype.ta=function(h){Ae(this.g,new xP(h))},fu.prototype.sa=function(h){Ae(this.g,new PP)},fu.prototype.ra=function(){Ae(this.g,"b")},mg.prototype.createWebChannel=mg.prototype.g,oi.prototype.send=oi.prototype.o,oi.prototype.open=oi.prototype.m,oi.prototype.close=oi.prototype.close,G$=function(){return new mg},q$=function(){return ht()},K$=po,SI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rg.NO_ERROR=0,rg.TIMEOUT=8,rg.HTTP_ERROR=6,Sy=rg,qx.COMPLETE="complete",W$=qx,Oh.EventType=Uc,Uc.OPEN="a",Uc.CLOSE="b",Uc.ERROR="c",Uc.MESSAGE="d",se.prototype.listen=se.prototype.K,yf=Oh,Zt.prototype.listenOnce=Zt.prototype.L,Zt.prototype.getLastError=Zt.prototype.Ka,Zt.prototype.getLastErrorCode=Zt.prototype.Ba,Zt.prototype.getStatus=Zt.prototype.Z,Zt.prototype.getResponseJson=Zt.prototype.Oa,Zt.prototype.getResponseText=Zt.prototype.oa,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Ha,z$=Zt}).apply(typeof qg<"u"?qg:typeof self<"u"?self:typeof window<"u"?window:{});const NO="@firebase/firestore",OO="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new xm("@firebase/firestore");function Au(){return Dl.logLevel}function be(t,...e){if(Dl.logLevel<=nt.DEBUG){const n=e.map(T0);Dl.debug(`Firestore (${wh}): ${t}`,...n)}}function Jo(t,...e){if(Dl.logLevel<=nt.ERROR){const n=e.map(T0);Dl.error(`Firestore (${wh}): ${t}`,...n)}}function Dd(t,...e){if(Dl.logLevel<=nt.WARN){const n=e.map(T0);Dl.warn(`Firestore (${wh}): ${t}`,...n)}}function T0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Q$(t,r,n)}function Q$(t,e,n){let r=`FIRESTORE (${wh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jo(r),new Error(r)}function wt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Q$(e,i,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ese{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dr.UNAUTHENTICATED))}shutdown(){}}class Cse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bse{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new $o;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $o,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $o)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new Y$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new dr(e)}}class Ise{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sse{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ise(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ase{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const r=s=>{s.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new MO(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new MO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=kse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function AI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return sC(i)===sC(s)?ot(i,s):sC(i)?1:-1}return ot(t.length,e.length)}const Rse=55296,xse=57343;function sC(t){const e=t.charCodeAt(0);return e>=Rse&&e<=xse}function Ld(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&De(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ms.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ot(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),i=Ms.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):AI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rc.fromString(e.substring(4,e.length-2))}}class Dt extends Ms{construct(e,n,r){return new Dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Dt(n)}static emptyPath(){return new Dt([])}}const Pse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Ms{construct(e,n,r){return new Jn(e,n,r)}static isValidIdentifier(e){return Pse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DO}static keyField(){return new Jn([DO])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(n)}static emptyPath(){return new Jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Dt.fromString(e))}static fromName(e){return new xe(Dt.fromString(e).popFirst(5))}static empty(){return new xe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t,e,n){if(!n)throw new ge(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Nse(t,e,n,r){if(e===!0&&r===!0)throw new ge(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LO(t){if(!xe.isDocumentKey(t))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FO(t){if(xe.isDocumentKey(t))throw new ge(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function X$(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kw(t);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Pm(t,e){if(!X$(t))throw new ge(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ge(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=-62135596800,jO=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jO);return new Vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<UO)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jO}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pm(e,Vt._jsonSchema))return new Vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:bn("string",Vt._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Vt(0,0))}static max(){return new Ve(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=-1;function Ose(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new pc(i,xe.empty(),e)}function Mse(t){return new pc(t.readTime,t.key,$p)}class pc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pc(Ve.min(),xe.empty(),$p)}static max(){return new pc(Ve.max(),xe.empty(),$p)}}function Dse(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lse="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fse{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==Lse)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(i=>i?ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new ee((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Use(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qw.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=-1;function Gw(t){return t==null}function Gv(t){return t===0&&1/t==-1/0}function jse(t){return typeof t=="number"&&Number.isInteger(t)&&!Gv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="";function Vse(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=VO(e)),e=$se(t.get(n),e);return VO(e)}function $se(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Z$:n+="";break;default:n+=s}}return n}function VO(t){return t+Z$+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=class kI{constructor(e,n){this.comparator=e,this.root=n||ic.EMPTY}insert(e,n){return new kI(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ic.BLACK,null,null))}remove(e){return new kI(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ic.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gg(this.root,e,this.comparator,!0)}},Gg=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ic=class To{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new To(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}};ic.EMPTY=null,ic.RED=!0,ic.BLACK=!1;ic.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ic(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.comparator=e,this.data=new Sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new BO(this.data.getIterator())}getIteratorFrom(e){return new BO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nn(this.comparator);return n.data=e,n}}class BO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Nn(Jn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ld(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tB("Invalid base64 string: "+s):s}}(e);return new er(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new er(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}er.EMPTY_BYTE_STRING=new er("");const Bse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mc(t){if(wt(!!t,39018),typeof t=="string"){let e=0;const n=Bse.exec(t);if(wt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gc(t){return typeof t=="string"?er.fromBase64String(t):er.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="server_timestamp",rB="__type__",iB="__previous_value__",sB="__local_write_time__";function b0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rB])==null?void 0:r.stringValue)===nB}function Qw(t){const e=t.mapValue.fields[iB];return b0(e)?Qw(e):e}function Bp(t){const e=mc(t.mapValue.fields[sB].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e,n,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}}const Qv="(default)";class Hp{constructor(e,n){this.projectId=e,this.database=n||Qv}static empty(){return new Hp("","")}get isDefaultDatabase(){return this.database===Qv}isEqual(e){return e instanceof Hp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB="__type__",aB="__max__",Qg={mapValue:{fields:{__type__:{stringValue:aB}}}},cB="__vector__",Yv="value";function yc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b0(t)?4:Wse(t)?9007199254740991:zse(t)?10:11:De(28295,{value:t})}function oo(t,e){if(t===e)return!0;const n=yc(t);if(n!==yc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bp(t).isEqual(Bp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=mc(i.timestampValue),a=mc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gc(i.bytesValue).isEqual(gc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dn(i.geoPointValue.latitude)===dn(s.geoPointValue.latitude)&&dn(i.geoPointValue.longitude)===dn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dn(i.integerValue)===dn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dn(i.doubleValue),a=dn(s.doubleValue);return o===a?Gv(o)===Gv(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ld(t.arrayValue.values||[],e.arrayValue.values||[],oo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($O(o)!==$O(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!oo(o[c],a[c])))return!1;return!0}(t,e);default:return De(52216,{left:t})}}function zp(t,e){return(t.values||[]).find(n=>oo(n,e))!==void 0}function Fd(t,e){if(t===e)return 0;const n=yc(t),r=yc(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dn(s.integerValue||s.doubleValue),c=dn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return HO(t.timestampValue,e.timestampValue);case 4:return HO(Bp(t),Bp(e));case 5:return AI(t.stringValue,e.stringValue);case 6:return function(s,o){const a=gc(s),c=gc(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ot(a[l],c[l]);if(u!==0)return u}return ot(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ot(dn(s.latitude),dn(o.latitude));return a!==0?a:ot(dn(s.longitude),dn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zO(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,m,_,y;const a=s.fields||{},c=o.fields||{},l=(f=a[Yv])==null?void 0:f.arrayValue,u=(m=c[Yv])==null?void 0:m.arrayValue,d=ot(((_=l==null?void 0:l.values)==null?void 0:_.length)||0,((y=u==null?void 0:u.values)==null?void 0:y.length)||0);return d!==0?d:zO(l,u)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Qg.mapValue&&o===Qg.mapValue)return 0;if(s===Qg.mapValue)return 1;if(o===Qg.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){const f=AI(c[d],u[d]);if(f!==0)return f;const m=Fd(a[c[d]],l[u[d]]);if(m!==0)return m}return ot(c.length,u.length)}(t.mapValue,e.mapValue);default:throw De(23264,{he:n})}}function HO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=mc(t),r=mc(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function zO(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Fd(n[i],r[i]);if(s)return s}return ot(n.length,r.length)}function Ud(t){return RI(t)}function RI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=mc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=RI(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${RI(n.fields[o])}`;return i+"}"}(t.mapValue):De(61005,{value:t})}function Ay(t){switch(yc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qw(t);return e?16+Ay(e):16;case 5:return 2*t.stringValue.length;case 6:return gc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ay(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Mc(r.fields,(s,o)=>{i+=s.length+Ay(o)}),i}(t.mapValue);default:throw De(13486,{value:t})}}function WO(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xI(t){return!!t&&"integerValue"in t}function I0(t){return!!t&&"arrayValue"in t}function KO(t){return!!t&&"nullValue"in t}function qO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ky(t){return!!t&&"mapValue"in t}function zse(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oB])==null?void 0:r.stringValue)===cB}function Bf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bf(t.arrayValue.values[n]);return e}return{...t}}function Wse(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ky(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bf(n)}setAll(e){let n=Jn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Bf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ky(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ky(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mc(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kr(Bf(this.value))}}function lB(t){const e=[];return Mc(t.fields,(n,r)=>{const i=new Jn([n]);if(ky(r)){const s=lB(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new fr(e,0,Ve.min(),Ve.min(),Ve.min(),Kr.empty(),0)}static newFoundDocument(e,n,r,i){return new fr(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new fr(e,2,n,Ve.min(),Ve.min(),Kr.empty(),0)}static newUnknownDocument(e,n){return new fr(e,3,n,Ve.min(),Ve.min(),Kr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n){this.position=e,this.inclusive=n}}function GO(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=xe.comparator(xe.fromName(o.referenceValue),n.key):r=Fd(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function QO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n="asc"){this.field=e,this.dir=n}}function Kse(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{}class Cn extends uB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gse(e,n,r):n==="array-contains"?new Jse(e,r):n==="in"?new Xse(e,r):n==="not-in"?new Zse(e,r):n==="array-contains-any"?new eoe(e,r):new Cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qse(e,r):new Yse(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fd(n,this.value)):n!==null&&yc(this.value)===yc(n)&&this.matchesComparison(Fd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ws extends uB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ws(e,n)}matches(e){return dB(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dB(t){return t.op==="and"}function hB(t){return qse(t)&&dB(t)}function qse(t){for(const e of t.filters)if(e instanceof ws)return!1;return!0}function PI(t){if(t instanceof Cn)return t.field.canonicalString()+t.op.toString()+Ud(t.value);if(hB(t))return t.filters.map(e=>PI(e)).join(",");{const e=t.filters.map(n=>PI(n)).join(",");return`${t.op}(${e})`}}function fB(t,e){return t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.field.isEqual(i.field)&&oo(r.value,i.value)}(t,e):t instanceof ws?function(r,i){return i instanceof ws&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&fB(o,i.filters[a]),!0):!1}(t,e):void De(19439)}function pB(t){return t instanceof Cn?function(n){return`${n.field.canonicalString()} ${n.op} ${Ud(n.value)}`}(t):t instanceof ws?function(n){return n.op.toString()+" {"+n.getFilters().map(pB).join(" ,")+"}"}(t):"Filter"}class Gse extends Cn{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Qse extends Cn{constructor(e,n){super(e,"in",n),this.keys=mB("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Yse extends Cn{constructor(e,n){super(e,"not-in",n),this.keys=mB("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mB(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>xe.fromName(r.referenceValue))}class Jse extends Cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return I0(n)&&zp(n.arrayValue,this.value)}}class Xse extends Cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zp(this.value.arrayValue,n)}}class Zse extends Cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zp(this.value.arrayValue,n)}}class eoe extends Cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!I0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class toe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function YO(t,e=null,n=[],r=[],i=null,s=null,o=null){return new toe(t,e,n,r,i,s,o)}function S0(t){const e=ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>PI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gw(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ud(r)).join(",")),e.Te=n}return e.Te}function A0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Kse(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QO(t.startAt,e.startAt)&&QO(t.endAt,e.endAt)}function NI(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function noe(t,e,n,r,i,s,o,a){return new Ch(t,e,n,r,i,s,o,a)}function Yw(t){return new Ch(t)}function JO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gB(t){return t.collectionGroup!==null}function Hf(t){const e=ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nn(Jn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Wp(s,r))}),n.has(Jn.keyField().canonicalString())||e.Ie.push(new Wp(Jn.keyField(),r))}return e.Ie}function Xs(t){const e=ze(t);return e.Ee||(e.Ee=roe(e,Hf(t))),e.Ee}function roe(t,e){if(t.limitType==="F")return YO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wp(i.field,s)});const n=t.endAt?new Jv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jv(t.startAt.position,t.startAt.inclusive):null;return YO(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function OI(t,e){const n=t.filters.concat([e]);return new Ch(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xv(t,e,n){return new Ch(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jw(t,e){return A0(Xs(t),Xs(e))&&t.limitType===e.limitType}function yB(t){return`${S0(Xs(t))}|lt:${t.limitType}`}function ku(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pB(i)).join(", ")}]`),Gw(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ud(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ud(i)).join(",")),`Target(${r})`}(Xs(t))}; limitType=${t.limitType})`}function Xw(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Hf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const l=GO(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Hf(r),i)||r.endAt&&!function(o,a,c){const l=GO(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Hf(r),i))}(t,e)}function ioe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vB(t){return(e,n)=>{let r=!1;for(const i of Hf(t)){const s=soe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function soe(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Fd(c,l):De(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mc(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ooe=new Sn(xe.comparator);function Xo(){return ooe}const _B=new Sn(xe.comparator);function vf(...t){let e=_B;for(const n of t)e=e.insert(n.key,n);return e}function wB(t){let e=_B;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ol(){return zf()}function TB(){return zf()}function zf(){return new ru(t=>t.toString(),(t,e)=>t.isEqual(e))}const aoe=new Sn(xe.comparator),coe=new Nn(xe.comparator);function ct(...t){let e=coe;for(const n of t)e=e.add(n);return e}const loe=new Nn(ot);function uoe(){return loe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gv(e)?"-0":e}}function EB(t){return{integerValue:""+t}}function doe(t,e){return jse(e)?EB(e):k0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this._=void 0}}function hoe(t,e,n){return t instanceof Kp?function(i,s){const o={fields:{[rB]:{stringValue:nB},[sB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&b0(s)&&(s=Qw(s)),s&&(o.fields[iB]=s),{mapValue:o}}(n,e):t instanceof jd?bB(t,e):t instanceof qp?IB(t,e):function(i,s){const o=CB(i,s),a=XO(o)+XO(i.Ae);return xI(o)&&xI(i.Ae)?EB(a):k0(i.serializer,a)}(t,e)}function foe(t,e,n){return t instanceof jd?bB(t,e):t instanceof qp?IB(t,e):n}function CB(t,e){return t instanceof Zv?function(r){return xI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kp extends Zw{}class jd extends Zw{constructor(e){super(),this.elements=e}}function bB(t,e){const n=SB(e);for(const r of t.elements)n.some(i=>oo(i,r))||n.push(r);return{arrayValue:{values:n}}}class qp extends Zw{constructor(e){super(),this.elements=e}}function IB(t,e){let n=SB(e);for(const r of t.elements)n=n.filter(i=>!oo(i,r));return{arrayValue:{values:n}}}class Zv extends Zw{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function XO(t){return dn(t.integerValue||t.doubleValue)}function SB(t){return I0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,n){this.field=e,this.transform=n}}function poe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof jd&&i instanceof jd||r instanceof qp&&i instanceof qp?Ld(r.elements,i.elements,oo):r instanceof Zv&&i instanceof Zv?oo(r.Ae,i.Ae):r instanceof Kp&&i instanceof Kp}(t.transform,e.transform)}class moe{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ry(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class eT{}function kB(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tT(t.key,xr.none()):new Nm(t.key,t.data,xr.none());{const n=t.data,r=Kr.empty();let i=new Nn(Jn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dc(t.key,r,new hi(i.toArray()),xr.none())}}function goe(t,e,n){t instanceof Nm?function(i,s,o){const a=i.value.clone(),c=eM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Dc?function(i,s,o){if(!Ry(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=eM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(RB(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wf(t,e,n,r){return t instanceof Nm?function(s,o,a,c){if(!Ry(s.precondition,o))return a;const l=s.value.clone(),u=tM(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dc?function(s,o,a,c){if(!Ry(s.precondition,o))return a;const l=tM(s.fieldTransforms,c,o),u=o.data;return u.setAll(RB(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ry(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function yoe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=CB(r.transform,i||null);s!=null&&(n===null&&(n=Kr.empty()),n.set(r.field,s))}return n||null}function ZO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ld(r,i,(s,o)=>poe(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nm extends eT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dc extends eT{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eM(t,e,n){const r=new Map;wt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,foe(o,a,n[i]))}return r}function tM(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hoe(s,o,e))}return r}class tT extends eT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class voe extends eT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&goe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TB();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=kB(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ct())}isEqual(e){return this.batchId===e.batchId&&Ld(this.mutations,e.mutations,(n,r)=>ZO(n,r))&&Ld(this.baseMutations,e.baseMutations,(n,r)=>ZO(n,r))}}class R0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){wt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return aoe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new R0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let woe=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,lt;function Eoe(t){switch(t){case Y.OK:return De(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return De(15467,{code:t})}}function xB(t){if(t===void 0)return Jo("GRPC error has no .code"),Y.UNKNOWN;switch(t){case _n.OK:return Y.OK;case _n.CANCELLED:return Y.CANCELLED;case _n.UNKNOWN:return Y.UNKNOWN;case _n.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case _n.INTERNAL:return Y.INTERNAL;case _n.UNAVAILABLE:return Y.UNAVAILABLE;case _n.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case _n.NOT_FOUND:return Y.NOT_FOUND;case _n.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case _n.ABORTED:return Y.ABORTED;case _n.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case _n.DATA_LOSS:return Y.DATA_LOSS;default:return De(39323,{code:t})}}(lt=_n||(_n={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Coe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const boe=new rc([4294967295,4294967295],0);function nM(t){const e=Coe().encode(t),n=new H$;return n.update(e),new Uint8Array(n.digest())}function rM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rc([n,r],0),new rc([i,s],0)]}class x0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _f(`Invalid padding: ${n}`);if(r<0)throw new _f(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _f(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _f(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(rc.fromNumber(r)));return i.compare(boe)===1&&(i=new rc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nM(e),[r,i]=rM(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new x0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=nM(e),[r,i]=rM(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _f extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Om.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nT(Ve.min(),i,new Sn(ot),Xo(),ct())}}class Om{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Om(r,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class PB{constructor(e,n){this.targetId=e,this.Ce=n}}class NB{constructor(e,n,r=er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class iM{constructor(){this.ve=0,this.Fe=sM(),this.Me=er.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),n=ct(),r=ct();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:s})}}),new Om(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=sM()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ioe{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xo(),this.Je=Yg(),this.He=Yg(),this.Ye=new Sn(ot)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(NI(s))if(r===0){const o=new xe(s.path);this.et(n,o,fr.newNoDocument(o,Ve.min()))}else wt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=gc(r).toUint8Array()}catch(c){if(c instanceof tB)return Dd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new x0(o,i,s)}catch(c){return Dd(c instanceof _f?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&NI(a.target)){const c=new xe(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,fr.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ct();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new nT(e,n,this.Ye,this.je,r);return this.je=Xo(),this.Je=Yg(),this.He=Yg(),this.Ye=new Sn(ot),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iM,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nn(ot),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nn(ot),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iM),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yg(){return new Sn(xe.comparator)}function sM(){return new Sn(xe.comparator)}const Soe={asc:"ASCENDING",desc:"DESCENDING"},Aoe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},koe={and:"AND",or:"OR"};class Roe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function MI(t,e){return t.useProto3Json||Gw(e)?e:{value:e}}function e_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xoe(t,e){return e_(t,e.toTimestamp())}function Zs(t){return wt(!!t,49232),Ve.fromTimestamp(function(n){const r=mc(n);return new Vt(r.seconds,r.nanos)}(t))}function P0(t,e){return DI(t,e).canonicalString()}function DI(t,e){const n=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MB(t){const e=Dt.fromString(t);return wt(jB(e),10190,{key:e.toString()}),e}function LI(t,e){return P0(t.databaseId,e.path)}function oC(t,e){const n=MB(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(LB(n))}function DB(t,e){return P0(t.databaseId,e)}function Poe(t){const e=MB(t);return e.length===4?Dt.emptyPath():LB(e)}function FI(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LB(t){return wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oM(t,e,n){return{name:LI(t,e),fields:n.value.mapValue.fields}}function Noe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:De(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(wt(u===void 0||typeof u=="string",58123),er.fromBase64String(u||"")):(wt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),er.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?Y.UNKNOWN:xB(l.code);return new ge(u,l.message||"")}(o);n=new NB(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=oC(t,r.document.name),s=Zs(r.document.updateTime),o=r.document.createTime?Zs(r.document.createTime):Ve.min(),a=new Kr({mapValue:{fields:r.document.fields}}),c=fr.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new xy(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=oC(t,r.document),s=r.readTime?Zs(r.readTime):Ve.min(),o=fr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xy([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=oC(t,r.document),s=r.removedTargetIds||[];n=new xy([],s,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Toe(i,s),a=r.targetId;n=new PB(a,o)}}return n}function Ooe(t,e){let n;if(e instanceof Nm)n={update:oM(t,e.key,e.value)};else if(e instanceof tT)n={delete:LI(t,e.key)};else if(e instanceof Dc)n={update:oM(t,e.key,e.data),updateMask:Boe(e.fieldMask)};else{if(!(e instanceof voe))return De(16599,{Vt:e.type});n={verify:LI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zv)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw De(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:xoe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:De(27497)}(t,e.precondition)),n}function Moe(t,e){return t&&t.length>0?(wt(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Zs(i.updateTime):Zs(s);return o.isEqual(Ve.min())&&(o=Zs(s)),new moe(o,i.transformResults||[])}(n,e))):[]}function Doe(t,e){return{documents:[DB(t,e.path)]}}function Loe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DB(t,i);const s=function(l){if(l.length!==0)return UB(ws.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:Ru(f.field),direction:joe(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=MI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function Foe(t){let e=Poe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wt(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=FB(d);return f instanceof ws&&hB(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new Wp(xu(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Gw(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(d){const f=!!d.before,m=d.values||[];return new Jv(m,f)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const f=!d.before,m=d.values||[];return new Jv(m,f)}(n.endAt)),noe(e,i,o,s,a,"F",c,l)}function Uoe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FB(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xu(n.unaryFilter.field);return Cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xu(n.unaryFilter.field);return Cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xu(n.unaryFilter.field);return Cn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xu(n.unaryFilter.field);return Cn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(t):t.fieldFilter!==void 0?function(n){return Cn.create(xu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ws.create(n.compositeFilter.filters.map(r=>FB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(n.compositeFilter.op))}(t):De(30097,{filter:t})}function joe(t){return Soe[t]}function Voe(t){return Aoe[t]}function $oe(t){return koe[t]}function Ru(t){return{fieldPath:t.canonicalString()}}function xu(t){return Jn.fromServerFormat(t.fieldPath)}function UB(t){return t instanceof Cn?function(n){if(n.op==="=="){if(qO(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NAN"}};if(KO(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qO(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NOT_NAN"}};if(KO(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ru(n.field),op:Voe(n.op),value:n.value}}}(t):t instanceof ws?function(n){const r=n.getFilters().map(i=>UB(i));return r.length===1?r[0]:{compositeFilter:{op:$oe(n.op),filters:r}}}(t):De(54877,{filter:t})}function Boe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jB(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,r,i,s=Ve.min(),o=Ve.min(),a=er.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(e){this.yt=e}}function zoe(t){const e=Foe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe{constructor(){this.Cn=new Koe}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(pc.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(pc.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class Koe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nn(Dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VB=41943040;class Hr{static withCacheSize(e){return new Hr(e,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(VB,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vd(0)}static cr(){return new Vd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="LruGarbageCollector",qoe=1048576;function lM([t,e],[n,r]){const i=ot(t,n);return i===0?ot(e,r):i}class Goe{constructor(e){this.Ir=e,this.buffer=new Nn(lM),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();lM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Qoe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(cM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eh(n)?be(cM,"Ignoring IndexedDB error during garbage collection: ",n):await Th(n)}await this.Vr(3e5)})}}class Yoe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(qw.ce);const r=new Goe(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(aM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aM):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),Au()<=nt.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function Joe(t,e){return new Yoe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xoe{constructor(){this.changes=new ru(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zoe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wf(r.mutation,i,hi.empty(),Vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ct()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ct()){const i=ol();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ol();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ct()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Xo();const o=zf(),a=function(){return zf()}();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Dc)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Wf(u.mutation,l,u.mutation.getFieldMask(),Vt.now())):o.set(l.key,hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>a.set(l,new Zoe(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){const r=zf();let i=new Sn((o,a)=>o-a),s=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||hi.empty();u=a.applyToLocalView(l,u),r.set(c,u);const d=(i.get(a.batchId)||ct()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=TB();u.forEach(f=>{if(!s.has(f)){const m=kB(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return ee.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return xe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ee.resolve(ol());let a=$p,c=s;return o.next(l=>ee.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ee.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ct())).next(u=>({batchId:a,changes:wB(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(r=>{let i=vf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=vf();return this.indexManager.getCollectionParents(e,s).next(a=>ee.forEach(a,c=>{const l=function(d,f){return new Ch(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,fr.newInvalidDocument(u)))});let a=vf();return o.forEach((c,l)=>{const u=s.get(c);u!==void 0&&Wf(u.mutation,l,hi.empty(),Vt.now()),Xw(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tae{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zs(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:zoe(i.bundledQuery),readTime:Zs(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{constructor(){this.overlays=new Sn(xe.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ol();return ee.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const i=ol(),s=n.length+1,o=new xe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Sn((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=ol(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=ol(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return ee.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new woe(n,r));let s=this.qr.get(n);s===void 0&&(s=ct(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae{constructor(){this.sessionToken=er.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.Qr=new Nn(Ln.$r),this.Ur=new Nn(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ln(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ln(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new xe(new Dt([])),r=new Ln(n,e),i=new Ln(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new xe(new Dt([])),r=new Ln(n,e),i=new Ln(n,e+1);let s=ct();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ln(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return xe.comparator(e.key,n.key)||ot(e.Yr,n.Yr)}static Kr(e,n){return ot(e.Yr,n.Yr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(Ln.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _oe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Ln(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?C0:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ln(n,0),i=new Ln(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nn(ot);return n.forEach(i=>{const s=new Ln(i,0),o=new Ln(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),ee.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;xe.isDocumentKey(s)||(s=s.child(""));const o=new Ln(new xe(s),0);let a=new Nn(ot);return this.Zr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),ee.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){wt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ee.forEach(n.mutations,i=>{const s=new Ln(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ln(n,0),i=this.Zr.firstAfterOrEqual(r);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sae{constructor(e){this.ri=e,this.docs=function(){return new Sn(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(n))}getEntries(e,n){let r=Xo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fr.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Xo();const o=n.path,a=new xe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Dse(Mse(u),r)<=0||(i.has(u.key)||Xw(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,n,r,i){De(9500)}ii(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oae(this)}getSize(e){return ee.resolve(this.size)}}class oae extends Xoe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(e){this.persistence=e,this.si=new ru(n=>S0(n),A0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new N0,this.targetCount=0,this.ai=Vd.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n){this.ui={},this.overlays={},this.ci=new qw(0),this.li=!1,this.li=!0,this.hi=new rae,this.referenceDelegate=e(this),this.Pi=new aae(this),this.indexManager=new Woe,this.remoteDocumentCache=function(i){return new sae(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Hoe(n),this.Ii=new tae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nae,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new iae(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const i=new cae(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return ee.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class cae extends Fse{constructor(e){super(),this.currentSequenceNumber=e}}class O0{constructor(e){this.persistence=e,this.Ri=new N0,this.Vi=null}static mi(e){return new O0(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,r=>{const i=xe.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class t_{constructor(e,n){this.persistence=e,this.pi=new ru(r=>Vse(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Joe(this,n)}static mi(e,n){return new t_(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ee.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?ee.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Ve.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ay(e.data.value)),n}br(e,n,r){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ct(),i=ct();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new M0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Zre()?8:Use(gr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lae;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Au()<=nt.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",ku(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(Au()<=nt.DEBUG&&be("QueryEngine","Query:",ku(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Au()<=nt.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",ku(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(n))):ee.resolve())}ys(e,n){if(JO(n))return ee.resolve(null);let r=Xs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xv(n,null,"F"),r=Xs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ct(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,Xv(n,null,"F")):this.vs(e,l,n,c)}))})))}ws(e,n,r,i){return JO(n)||i.isEqual(Ve.min())?ee.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?ee.resolve(null):(Au()<=nt.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ku(n)),this.vs(e,o,n,Ose(i,$p)).next(a=>a))})}Ds(e,n){let r=new Nn(vB(e));return n.forEach((i,s)=>{Xw(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Au()<=nt.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",ku(n)),this.ps.getDocumentsMatchingQuery(e,n,pc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="LocalStore",dae=3e8;class hae{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Sn(ot),this.xs=new ru(s=>S0(s),A0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eae(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function fae(t,e,n,r){return new hae(t,e,n,r)}async function BB(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=ct();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function pae(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const d=l.batch,f=d.keys();let m=ee.resolve();return f.forEach(_=>{m=m.next(()=>u.getEntry(c,_)).next(y=>{const T=l.docVersions.get(_);wt(T!==null,48541),y.version.compareTo(T)<0&&(d.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),u.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ct();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HB(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function mae(t,e){const n=ze(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(er.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(y,T,E){return y.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=dae?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,u)&&a.push(n.Pi.updateTargetData(s,m))});let c=Xo(),l=ct();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(gae(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!r.isEqual(Ve.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ee.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Ms=i,s))}function gae(t,e,n){let r=ct(),i=ct();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Xo();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):be(D0,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function yae(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=C0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vae(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ua(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function UI(t,e,n){const r=ze(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Eh(o))throw o;be(D0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function uM(t,e,n){const r=ze(t);let i=Ve.min(),s=ct();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const d=ze(c),f=d.xs.get(u);return f!==void 0?ee.resolve(d.Ms.get(f)):d.Pi.getTargetData(l,u)}(r,o,Xs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Ve.min(),n?s:ct())).next(a=>(_ae(r,ioe(e),a),{documents:a,Qs:s})))}function _ae(t,e,n){let r=t.Os.get(e)||Ve.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class dM{constructor(){this.activeTargetIds=uoe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wae{constructor(){this.Mo=new dM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="ConnectivityMonitor";class fM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(hM,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(hM,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jg=null;function jI(){return Jg===null?Jg=function(){return 268435456+Math.round(2147483648*Math.random())}():Jg++,"0x"+Jg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="RestConnection",Eae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cae{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Qv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=jI(),a=this.zo(e,n.toUriEncodedString());be(aC,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:l}=new URL(a),u=Es(l);return this.Jo(e,a,c,r,u).then(d=>(be(aC,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Dd(aC,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Eae[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="WebChannelConnection";class Iae extends Cae{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=jI();return new Promise((a,c)=>{const l=new z$;l.setWithCredentials(!0),l.listenOnce(W$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sy.NO_ERROR:const d=l.getResponseJson();be(cr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Sy.TIMEOUT:be(cr,`RPC '${e}' ${o} timed out`),c(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Sy.HTTP_ERROR:const f=l.getStatus();if(be(cr,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const y=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(w)>=0?w:Y.UNKNOWN}(_.status);c(new ge(y,_.message))}else c(new ge(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{be(cr,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);be(cr,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}T_(e,n,r){const i=jI(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=G$(),a=q$(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=s.join("");be(cr,`Creating RPC '${e}' stream ${i}: ${u}`,c);const d=o.createWebChannel(u,c);this.I_(d);let f=!1,m=!1;const _=new bae({Yo:T=>{m?be(cr,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(be(cr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),be(cr,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},Zo:()=>d.close()}),y=(T,E,w)=>{T.listen(E,C=>{try{w(C)}catch(S){setTimeout(()=>{throw S},0)}})};return y(d,yf.EventType.OPEN,()=>{m||(be(cr,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),y(d,yf.EventType.CLOSE,()=>{m||(m=!0,be(cr,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(d))}),y(d,yf.EventType.ERROR,T=>{m||(m=!0,Dd(cr,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.a_(new ge(Y.UNAVAILABLE,"The operation could not be completed")))}),y(d,yf.EventType.MESSAGE,T=>{var E;if(!m){const w=T.data[0];wt(!!w,16349);const C=w,S=(C==null?void 0:C.error)||((E=C[0])==null?void 0:E.error);if(S){be(cr,`RPC '${e}' stream ${i} received error:`,S);const M=S.status;let D=function(k){const x=_n[k];if(x!==void 0)return xB(x)}(M),A=S.message;D===void 0&&(D=Y.INTERNAL,A="Unknown error status: "+M+" with message "+S.message),m=!0,_.a_(new ge(D,A)),d.close()}else be(cr,`RPC '${e}' stream ${i} received:`,w),_.u_(w)}}),y(a,K$.STAT_EVENT,T=>{T.stat===SI.PROXY?be(cr,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===SI.NOPROXY&&be(cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function cC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){return new Roe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="PersistentStream";class WB{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zB(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Jo(n.toString()),Jo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ge(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return be(pM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(be(pM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sae extends WB{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Noe(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?Zs(o.readTime):Ve.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=FI(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=NI(c)?{documents:Doe(s,c)}:{query:Loe(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OB(s,o.resumeToken);const l=MI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=e_(s,o.snapshotVersion.toTimestamp());const l=MI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=Uoe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=FI(this.serializer),n.removeTarget=e,this.q_(n)}}class Aae extends WB{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Moe(e.writeResults,e.commitTime),r=Zs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=FI(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ooe(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{}class Rae extends kae{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,DI(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(Y.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,DI(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Y.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xae{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jo(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll="RemoteStore";class Pae{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{iu(this)&&(be(Ll,"Restarting streams for network reachability change."),await async function(c){const l=ze(c);l.Ea.add(4),await Mm(l),l.Ra.set("Unknown"),l.Ea.delete(4),await iT(l)}(this))})}),this.Ra=new xae(r,i)}}async function iT(t){if(iu(t))for(const e of t.da)await e(!0)}async function Mm(t){for(const e of t.da)await e(!1)}function KB(t,e){const n=ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),j0(n)?U0(n):bh(n).O_()&&F0(n,e))}function L0(t,e){const n=ze(t),r=bh(n);n.Ia.delete(e),r.O_()&&qB(n,e),n.Ia.size===0&&(r.O_()?r.L_():iu(n)&&n.Ra.set("Unknown"))}function F0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bh(t).Y_(e)}function qB(t,e){t.Va.Ue(e),bh(t).Z_(e)}function U0(t){t.Va=new Ioe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bh(t).start(),t.Ra.ua()}function j0(t){return iu(t)&&!bh(t).x_()&&t.Ia.size>0}function iu(t){return ze(t).Ea.size===0}function GB(t){t.Va=void 0}async function Nae(t){t.Ra.set("Online")}async function Oae(t){t.Ia.forEach((e,n)=>{F0(t,e)})}async function Mae(t,e){GB(t),j0(t)?(t.Ra.ha(e),U0(t)):t.Ra.set("Unknown")}async function Dae(t,e,n){if(t.Ra.set("Online"),e instanceof NB&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){be(Ll,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await n_(t,r)}else if(e instanceof xy?t.Va.Ze(e):e instanceof PB?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ve.min()))try{const r=await HB(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(er.EMPTY_BYTE_STRING,u.snapshotVersion)),qB(s,c);const d=new Ua(u.target,c,l,u.sequenceNumber);F0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){be(Ll,"Failed to raise snapshot:",r),await n_(t,r)}}async function n_(t,e,n){if(!Eh(e))throw e;t.Ea.add(1),await Mm(t),t.Ra.set("Offline"),n||(n=()=>HB(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{be(Ll,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await iT(t)})}function QB(t,e){return e().catch(n=>n_(t,n,e))}async function sT(t){const e=ze(t),n=vc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:C0;for(;Lae(e);)try{const i=await yae(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Fae(e,i)}catch(i){await n_(e,i)}YB(e)&&JB(e)}function Lae(t){return iu(t)&&t.Ta.length<10}function Fae(t,e){t.Ta.push(e);const n=vc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function YB(t){return iu(t)&&!vc(t).x_()&&t.Ta.length>0}function JB(t){vc(t).start()}async function Uae(t){vc(t).ra()}async function jae(t){const e=vc(t);for(const n of t.Ta)e.ea(n.mutations)}async function Vae(t,e,n){const r=t.Ta.shift(),i=R0.from(r,e,n);await QB(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await sT(t)}async function $ae(t,e){e&&vc(t).X_&&await async function(r,i){if(function(o){return Eoe(o)&&o!==Y.ABORTED}(i.code)){const s=r.Ta.shift();vc(r).B_(),await QB(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await sT(r)}}(t,e),YB(t)&&JB(t)}async function mM(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),be(Ll,"RemoteStore received new credentials");const r=iu(n);n.Ea.add(3),await Mm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await iT(n)}async function Bae(t,e){const n=ze(t);e?(n.Ea.delete(2),await iT(n)):e||(n.Ea.add(2),await Mm(n),n.Ra.set("Unknown"))}function bh(t){return t.ma||(t.ma=function(n,r,i){const s=ze(n);return s.sa(),new Sae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Nae.bind(null,t),t_:Oae.bind(null,t),r_:Mae.bind(null,t),H_:Dae.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),j0(t)?U0(t):t.Ra.set("Unknown")):(await t.ma.stop(),GB(t))})),t.ma}function vc(t){return t.fa||(t.fa=function(n,r,i){const s=ze(n);return s.sa(),new Aae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Uae.bind(null,t),r_:$ae.bind(null,t),ta:jae.bind(null,t),na:Vae.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await sT(t)):(await t.fa.stop(),t.Ta.length>0&&(be(Ll,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new V0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $0(t,e){if(Jo("AsyncQueue",`${e}: ${t}`),Eh(t))return new ge(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{static emptySet(e){return new id(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=vf(),this.sortedSet=new Sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof id)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new id;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.ga=new Sn(xe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $d{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $d(e,n,id.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hae{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zae{constructor(){this.queries=yM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ze(n),s=i.queries;i.queries=yM(),s.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function yM(){return new ru(t=>yB(t),Jw)}async function B0(t,e){const n=ze(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Hae,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$0(o,`Initialization of query '${ku(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&z0(n)}async function H0(t,e){const n=ze(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wae(t,e){const n=ze(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&z0(n)}function Kae(t,e,n){const r=ze(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function z0(t){t.Ca.forEach(e=>{e.next()})}var VI,vM;(vM=VI||(VI={})).Ma="default",vM.Cache="cache";class W0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==VI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.key=e}}class ZB{constructor(e){this.key=e}}class qae{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=vB(e),this.tu=new id(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new gM,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),m=Xw(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?_!==y&&(r.track({type:3,doc:m}),T=!0):this.su(f,m)||(r.track({type:2,doc:m}),T=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),T=!0):f&&!m&&(r.track({type:1,doc:f}),T=!0,(c||l)&&(a=!0)),T&&(m?(o=o.add(m),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(m,_){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:T})}};return y(m)-y(_)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new $d(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gM,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ct(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ZB(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new XB(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ct();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $d.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const K0="SyncEngine";class Gae{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Qae{constructor(e){this.key=e,this.hu=!1}}class Yae{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ru(a=>yB(a),Jw),this.Iu=new Map,this.Eu=new Set,this.du=new Sn(xe.comparator),this.Au=new Map,this.Ru=new N0,this.Vu={},this.mu=new Map,this.fu=Vd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Jae(t,e,n=!0){const r=sH(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await eH(r,e,n,!0),i}async function Xae(t,e){const n=sH(t);await eH(n,e,!0,!1)}async function eH(t,e,n,r){const i=await vae(t.localStore,Xs(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Zae(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&KB(t.remoteStore,i),a}async function Zae(t,e,n,r,i){t.pu=(d,f,m)=>async function(y,T,E,w){let C=T.view.ru(E);C.Cs&&(C=await uM(y.localStore,T.query,!1).then(({documents:A})=>T.view.ru(A,C)));const S=w&&w.targetChanges.get(T.targetId),M=w&&w.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(C,y.isPrimaryClient,S,M);return wM(y,T.targetId,D.au),D.snapshot}(t,d,f,m);const s=await uM(t.localStore,e,!0),o=new qae(e,s.Qs),a=o.ru(s.documents),c=Om.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);wM(t,n,l.au);const u=new Gae(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function ece(t,e,n){const r=ze(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Jw(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await UI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&L0(r.remoteStore,i.targetId),$I(r,i.targetId)}).catch(Th)):($I(r,i.targetId),await UI(r.localStore,i.targetId,!0))}async function tce(t,e){const n=ze(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),L0(n.remoteStore,r.targetId))}async function nce(t,e,n){const r=lce(t);try{const i=await function(o,a){const c=ze(o),l=Vt.now(),u=a.reduce((m,_)=>m.add(_.key),ct());let d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Xo(),y=ct();return c.Ns.getEntries(m,u).next(T=>{_=T,_.forEach((E,w)=>{w.isValidDocument()||(y=y.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(T=>{d=T;const E=[];for(const w of a){const C=yoe(w,d.get(w.key).overlayedDocument);C!=null&&E.push(new Dc(w.key,C,lB(C.value.mapValue),xr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,E,a)}).next(T=>{f=T;const E=T.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(m,T.batchId,E)})}).then(()=>({batchId:f.batchId,changes:wB(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new Sn(ot)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l}(r,i.batchId,n),await Dm(r,i.changes),await sT(r.remoteStore)}catch(i){const s=$0(i,"Failed to persist write");n.reject(s)}}async function tH(t,e){const n=ze(t);try{const r=await mae(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?wt(o.hu,14607):i.removedDocuments.size>0&&(wt(o.hu,42227),o.hu=!1))}),await Dm(n,r,e)}catch(r){await Th(r)}}function _M(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=ze(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(const f of d.Sa)f.va(a)&&(l=!0)}),l&&z0(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rce(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Sn(xe.comparator);o=o.insert(s,fr.newNoDocument(s,Ve.min()));const a=ct().add(s),c=new nT(Ve.min(),new Map,new Sn(ot),o,a);await tH(r,c),r.du=r.du.remove(s),r.Au.delete(e),q0(r)}else await UI(r.localStore,e,!1).then(()=>$I(r,e,n)).catch(Th)}async function ice(t,e){const n=ze(t),r=e.batch.batchId;try{const i=await pae(n.localStore,e);rH(n,r,null),nH(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dm(n,i)}catch(i){await Th(i)}}async function sce(t,e,n){const r=ze(t);try{const i=await function(o,a){const c=ze(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(wt(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);rH(r,e,n),nH(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Dm(r,i)}catch(i){await Th(i)}}function nH(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rH(t,e,n){const r=ze(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function $I(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||iH(t,r)})}function iH(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(L0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),q0(t))}function wM(t,e,n){for(const r of n)r instanceof XB?(t.Ru.addReference(r.key,e),oce(t,r)):r instanceof ZB?(be(K0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||iH(t,r.key)):De(19791,{wu:r})}function oce(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(be(K0,"New document in limbo: "+n),t.Eu.add(r),q0(t))}function q0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new xe(Dt.fromString(e)),r=t.fu.next();t.Au.set(r,new Qae(n)),t.du=t.du.insert(n,r),KB(t.remoteStore,new Ua(Xs(Yw(n.path)),r,"TargetPurposeLimboResolution",qw.ce))}}async function Dm(t,e,n){const r=ze(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(l=>{var u;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(u=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);const d=M0.As(c.targetId,l);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,l){const u=ze(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ee.forEach(l,f=>ee.forEach(f.Es,m=>u.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>ee.forEach(f.ds,m=>u.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Eh(d))throw d;be(D0,"Failed to update sequence numbers: "+d)}for(const d of l){const f=d.targetId;if(!d.fromCache){const m=u.Ms.get(f),_=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(f,y)}}}(r.localStore,s))}async function ace(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){be(K0,"User change. New user:",e.toKey());const r=await BB(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ge(Y.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dm(n,r.Ls)}}function cce(t,e){const n=ze(t),r=n.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let i=ct();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function sH(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rce.bind(null,e),e.Pu.H_=Wae.bind(null,e.eventManager),e.Pu.yu=Kae.bind(null,e.eventManager),e}function lce(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ice.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sce.bind(null,e),e}class r_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fae(this.persistence,new uae,e.initialUser,this.serializer)}Cu(e){return new $B(O0.mi,this.serializer)}Du(e){return new wae}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}r_.provider={build:()=>new r_};class uce extends r_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){wt(this.persistence.referenceDelegate instanceof t_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Qoe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new $B(r=>t_.mi(r,n),this.serializer)}}class BI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_M(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ace.bind(null,this.syncEngine),await Bae(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zae}()}createDatastore(e){const n=rT(e.databaseInfo.databaseId),r=function(s){return new Iae(s)}(e.databaseInfo);return function(s,o,a,c){return new Rae(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Pae(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_M(this.syncEngine,n,0),function(){return fM.v()?new fM:new Tae}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){const d=new Yae(i,s,o,a,c,l);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ze(i);be(Ll,"RemoteStore shutting down."),s.Ea.add(5),await Mm(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}BI.provider={build:()=>new BI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="FirestoreClient";class dce{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dr.UNAUTHENTICATED,this.clientId=E0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{be(_c,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(be(_c,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lC(t,e){t.asyncQueue.verifyOperationInProgress(),be(_c,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BB(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function TM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hce(t);be(_c,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mM(e.remoteStore,i)),t._onlineComponents=e}async function hce(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(_c,"Using user provided OfflineComponentProvider");try{await lC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Y.FAILED_PRECONDITION||i.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Dd("Error using user provided cache. Falling back to memory cache: "+n),await lC(t,new r_)}}else be(_c,"Using default OfflineComponentProvider"),await lC(t,new uce(void 0));return t._offlineComponents}async function oH(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(_c,"Using user provided OnlineComponentProvider"),await TM(t,t._uninitializedComponentsProvider._online)):(be(_c,"Using default OnlineComponentProvider"),await TM(t,new BI))),t._onlineComponents}function fce(t){return oH(t).then(e=>e.syncEngine)}async function i_(t){const e=await oH(t),n=e.eventManager;return n.onListen=Jae.bind(null,e.syncEngine),n.onUnlisten=ece.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xae.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tce.bind(null,e.syncEngine),n}function pce(t,e,n={}){const r=new $o;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new G0({next:f=>{u.Nu(),o.enqueueAndForget(()=>H0(s,d));const m=f.docs.has(a);!m&&f.fromCache?l.reject(new ge(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?l.reject(new ge(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new W0(Yw(a.path),u,{includeMetadataChanges:!0,qa:!0});return B0(s,d)}(await i_(t),t.asyncQueue,e,n,r)),r.promise}function mce(t,e,n={}){const r=new $o;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new G0({next:f=>{u.Nu(),o.enqueueAndForget(()=>H0(s,d)),f.fromCache&&c.source==="server"?l.reject(new ge(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new W0(a,u,{includeMetadataChanges:!0,qa:!0});return B0(s,d)}(await i_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="firestore.googleapis.com",CM=!0;class bM{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cH,this.ssl=CM}else this.host=e.host,this.ssl=e.ssl??CM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qoe)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nse("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aH(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oT{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bM({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bM(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ese;switch(r.type){case"firstParty":return new Sse(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=EM.get(n);r&&(be("ComponentProvider","Removing Datastore"),EM.delete(n),r.terminate())}(this),Promise.resolve()}}function gce(t,e,n,r={}){var l;t=Rr(t,oT);const i=Es(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(km(`https://${a}`),Rm("Firestore",!0)),s.host!==cH&&s.host!==a&&Dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!so(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=dr.MOCK_USER;else{u=g0(r.mockUserToken,(l=t._app)==null?void 0:l.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new dr(f)}t._authCredentials=new Cse(new Y$(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class on{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Pm(n,on._jsonSchema))return new on(e,r||null,new xe(Dt.fromString(n.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:bn("string",on._jsonSchemaVersion),referencePath:bn("string")};class sc extends oa{constructor(e,n,r){super(e,n,Yw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new xe(e))}withConverter(e){return new sc(this.firestore,e,this._path)}}function Gr(t,e,...n){if(t=$e(t),J$("collection","path",e),t instanceof oT){const r=Dt.fromString(e,...n);return FO(r),new sc(t,null,r)}{if(!(t instanceof on||t instanceof sc))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return FO(r),new sc(t.firestore,null,r)}}function tt(t,e,...n){if(t=$e(t),arguments.length===1&&(e=E0.newId()),J$("doc","path",e),t instanceof oT){const r=Dt.fromString(e,...n);return LO(r),new on(t,null,new xe(r))}{if(!(t instanceof on||t instanceof sc))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return LO(r),new on(t.firestore,t instanceof sc?t.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="AsyncQueue";class SM{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zB(this,"async_queue_retry"),this._c=()=>{const r=cC();r&&be(IM,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=cC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=cC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new $o;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Eh(e))throw e;be(IM,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Jo("INTERNAL UNHANDLED ERROR: ",AM(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=V0.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:AM(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ao extends oT{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new SM,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SM(e),this._firestoreClient=void 0,await e}}}function yce(t,e){const n=typeof t=="object"?t:Oc(),r=typeof t=="string"?t:Qv,i=Cs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Bw("firestore");s&&gce(i,...s)}return i}function Lm(t){if(t._terminated)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vce(t),t._firestoreClient}function vce(t){var r,i,s;const e=t._freezeSettings(),n=function(a,c,l,u){return new Hse(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aH(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dce(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(er.fromBase64String(e))}catch(n){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mi(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pm(e,Mi._jsonSchema))return Mi.fromBase64String(e.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:bn("string",Mi._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:eo._jsonSchemaVersion}}static fromJSON(e){if(Pm(e,eo._jsonSchema))return new eo(e.latitude,e.longitude)}}eo._jsonSchemaVersion="firestore/geoPoint/1.0",eo._jsonSchema={type:bn("string",eo._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:to._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pm(e,to._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new to(e.vectorValues);throw new ge(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}to._jsonSchemaVersion="firestore/vectorValue/1.0",to._jsonSchema={type:bn("string",to._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ce=/^__.*__$/;class wce{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nm(e,this.data,n,this.fieldTransforms)}}class lH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:t})}}class aT{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new aT({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return s_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uH(this.Ac)&&_ce.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Tce{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rT(e)}Cc(e,n,r,i=!1){return new aT({Ac:e,methodName:n,Dc:r,path:Jn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jm(t){const e=t._freezeSettings(),n=rT(t._databaseId);return new Tce(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q0(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);X0("Data must be an object, but it was:",o,r);const a=fH(r,o);let c,l;if(s.merge)c=new hi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=HI(e,d,n);if(!o.contains(f))throw new ge(Y.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);mH(u,f)||u.push(f)}c=new hi(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new wce(new Kr(a),c,l)}class Vm extends Um{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vm}}function Ece(t,e,n){return new aT({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Y0 extends Um{_toFieldTransform(e){return new AB(e.path,new Kp)}isEqual(e){return e instanceof Y0}}class J0 extends Um{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Ece(this,e,!0),r=this.vc.map(s=>Ih(s,n)),i=new jd(r);return new AB(e.path,i)}isEqual(e){return e instanceof J0&&so(this.vc,e.vc)}}function dH(t,e,n,r){const i=t.Cc(1,e,n);X0("Data must be an object, but it was:",i,r);const s=[],o=Kr.empty();Mc(r,(c,l)=>{const u=Z0(e,c,n);l=$e(l);const d=i.yc(u);if(l instanceof Vm)s.push(u);else{const f=Ih(l,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new hi(s);return new lH(o,a,i.fieldTransforms)}function hH(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[HI(e,r,n)],c=[i];if(s.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(HI(e,s[f])),c.push(s[f+1]);const l=[],u=Kr.empty();for(let f=a.length-1;f>=0;--f)if(!mH(l,a[f])){const m=a[f];let _=c[f];_=$e(_);const y=o.yc(m);if(_ instanceof Vm)l.push(m);else{const T=Ih(_,y);T!=null&&(l.push(m),u.set(m,T))}}const d=new hi(l);return new lH(u,d,o.fieldTransforms)}function Cce(t,e,n,r=!1){return Ih(n,t.Cc(r?4:3,e))}function Ih(t,e){if(pH(t=$e(t)))return X0("Unsupported field value:",e,t),fH(t,e);if(t instanceof Um)return function(r,i){if(!uH(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Ih(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return doe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vt.fromDate(r);return{timestampValue:e_(i.serializer,s)}}if(r instanceof Vt){const s=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:e_(i.serializer,s)}}if(r instanceof eo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:OB(i.serializer,r._byteString)};if(r instanceof on){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:P0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof to)return function(o,a){return{mapValue:{fields:{[oB]:{stringValue:cB},[Yv]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return k0(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Kw(r)}`)}(t,e)}function fH(t,e){const n={};return eB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mc(t,(r,i)=>{const s=Ih(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function pH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof eo||t instanceof Mi||t instanceof on||t instanceof Um||t instanceof to)}function X0(t,e,n){if(!pH(n)||!X$(n)){const r=Kw(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function HI(t,e,n){if((e=$e(e))instanceof Fm)return e._internalPath;if(typeof e=="string")return Z0(t,e);throw s_("Field path arguments must be of type string or ",t,!1,void 0,n)}const bce=new RegExp("[~\\*/\\[\\]]");function Z0(t,e,n){if(e.search(bce)>=0)throw s_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fm(...e.split("."))._internalPath}catch{throw s_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function s_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ge(Y.INVALID_ARGUMENT,a+t+c)}function mH(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ice(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ice extends gH{data(){return super.data()}}function cT(t,e){return typeof e=="string"?Z0(t,e):e instanceof Fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eR{}let tR=class extends eR{};function Fl(t,e,...n){let r=[];e instanceof eR&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof nR).length,a=s.filter(c=>c instanceof lT).length;if(o>1||o>0&&a>0)throw new ge(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class lT extends tR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lT(e,n,r)}_apply(e){const n=this._parse(e);return vH(e._query,n),new oa(e.firestore,e.converter,OI(e._query,n))}_parse(e){const n=jm(e.firestore);return function(s,o,a,c,l,u,d){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ge(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){xM(d,u);const _=[];for(const y of d)_.push(RM(c,s,y));f={arrayValue:{values:_}}}else f=RM(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||xM(d,u),f=Cce(a,o,d,u==="in"||u==="not-in");return Cn.create(l,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sd(t,e,n){const r=e,i=cT("where",t);return lT._create(i,r,n)}class nR extends eR{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nR(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ws.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)vH(o,c),o=OI(o,c)}(e._query,n),new oa(e.firestore,e.converter,OI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rR extends tR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rR(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wp(s,o)}(e._query,this._field,this._direction);return new oa(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ch(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Gp(t,e="asc"){const n=e,r=cT("orderBy",t);return rR._create(r,n)}class iR extends tR{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new iR(e,n,r)}_apply(e){return new oa(e.firestore,e.converter,Xv(e._query,this._limit,this._limitType))}}function Sce(t){return iR._create("limit",t,"F")}function RM(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gB(e)&&n.indexOf("/")!==-1)throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dt.fromString(n));if(!xe.isDocumentKey(r))throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return WO(t,new xe(r))}if(n instanceof on)return WO(t,n._key);throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kw(n)}.`)}function xM(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vH(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ace{convertValue(e,n="none"){switch(yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Mc(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Yv].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>dn(o.doubleValue));return new to(n)}convertGeoPoint(e){return new eo(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bp(e));default:return null}}convertTimestamp(e){const n=mc(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dt.fromString(e);wt(jB(r),9688,{name:e});const i=new Hp(r.get(1),r.get(3)),s=new xe(r.popFirst(5));return i.isEqual(n)||Jo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vl extends gH{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Py(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vl._jsonSchemaVersion="firestore/documentSnapshot/1.0",vl._jsonSchema={type:bn("string",vl._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class Py extends vl{data(e={}){return super.data(e)}}class _l{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Py(this._firestore,this._userDataWriter,r.key,r,new wf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Py(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Py(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:kce(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=E0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kce(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){t=Rr(t,on);const e=Rr(t.firestore,ao);return pce(Lm(e),t._key).then(n=>_H(e,t,n))}_l._jsonSchemaVersion="firestore/querySnapshot/1.0",_l._jsonSchema={type:bn("string",_l._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class oR extends Ace{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function PM(t){t=Rr(t,oa);const e=Rr(t.firestore,ao),n=Lm(e),r=new oR(e);return yH(t._query),mce(n,t._query).then(i=>new _l(e,r,t,i))}function Kf(t,e,n){t=Rr(t,on);const r=Rr(t.firestore,ao),i=sR(t.converter,e,n);return Bm(r,[Q0(jm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xr.none())])}function Di(t,e,n,...r){t=Rr(t,on);const i=Rr(t.firestore,ao),s=jm(i);let o;return o=typeof(e=$e(e))=="string"||e instanceof Fm?hH(s,"updateDoc",t._key,e,n,r):dH(s,"updateDoc",t._key,e),Bm(i,[o.toMutation(t._key,xr.exists(!0))])}function wc(t){return Bm(Rr(t.firestore,ao),[new tT(t._key,xr.none())])}function $m(t,e){const n=Rr(t.firestore,ao),r=tt(t),i=sR(t.converter,e);return Bm(n,[Q0(jm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}function oc(t,...e){var c,l,u;t=$e(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||kM(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(kM(e[r])){const d=e[r];e[r]=(c=d.next)==null?void 0:c.bind(d),e[r+1]=(l=d.error)==null?void 0:l.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(t instanceof on)o=Rr(t.firestore,ao),a=Yw(t._key.path),s={next:d=>{e[r]&&e[r](_H(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Rr(t,oa);o=Rr(d.firestore,ao),a=d._query;const f=new oR(o);s={next:m=>{e[r]&&e[r](new _l(o,f,d,m))},error:e[r+1],complete:e[r+2]},yH(t._query)}return function(f,m,_,y){const T=new G0(y),E=new W0(m,T,_);return f.asyncQueue.enqueueAndForget(async()=>B0(await i_(f),E)),()=>{T.Nu(),f.asyncQueue.enqueueAndForget(async()=>H0(await i_(f),E))}}(Lm(o),a,i,s)}function Bm(t,e){return function(r,i){const s=new $o;return r.asyncQueue.enqueueAndForget(async()=>nce(await fce(r),i,s)),s.promise}(Lm(t),e)}function _H(t,e,n){const r=n.docs.get(e._key),i=new oR(t);return new vl(t,i,e._key,r,new wf(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rce{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jm(e)}set(e,n,r){this._verifyNotCommitted();const i=uC(e,this._firestore),s=sR(i.converter,n,r),o=Q0(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,xr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=uC(e,this._firestore);let o;return o=typeof(n=$e(n))=="string"||n instanceof Fm?hH(this._dataReader,"WriteBatch.update",s._key,n,r,i):dH(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=uC(e,this._firestore);return this._mutations=this._mutations.concat(new tT(n._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uC(t,e){if((t=$e(t)).firestore!==e)throw new ge(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){return new Vm("deleteField")}function zI(){return new Y0("serverTimestamp")}function xce(...t){return new J0("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){return Lm(t=Rr(t,ao)),new Rce(t,e=>Bm(t,e))}(function(e,n=!0){(function(i){wh=i})(Nc),Nr(new yr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ao(new bse(r.getProvider("auth-internal")),new Ase(o,r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hp(l.options.projectId,u)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),In(NO,OO,e),In(NO,OO,"esm2020")})();var Pce="firebase",Nce="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(Pce,Nce,"app");function wH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oce=wH,TH=new Pc("auth","Firebase",wH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new xm("@firebase/auth");function Mce(t,...e){o_.logLevel<=nt.WARN&&o_.warn(`Auth (${Nc}): ${t}`,...e)}function Ny(t,...e){o_.logLevel<=nt.ERROR&&o_.error(`Auth (${Nc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,...e){throw cR(t,...e)}function ni(t,...e){return cR(t,...e)}function aR(t,e,n){const r={...Oce(),[e]:n};return new Pc("auth","Firebase",r).create(e,{appName:t.name})}function no(t){return aR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EH(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bi(t,"argument-error"),aR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TH.create(t,...e)}function Ee(t,e,...n){if(!t)throw cR(e,...n)}function Oo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ny(e),new Error(e)}function Zo(t,e){t||Oo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function CH(){return NM()==="http:"||NM()==="https:"}function NM(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dce(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CH()||O$()||"connection"in navigator)?navigator.onLine:!0}function Lce(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zo(n>e,"Short delay should be less than long delay!"),this.isMobile=y0()||M$()}get(){return Dce()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e){Zo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jce=new Hm(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function si(t,e,n,r,i={}){return IH(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=nu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:c,...s};return Jre()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Es(t.emulatorConfig.host)&&(l.credentials="include"),bH.fetch()(await SH(t,t.config.apiHost,n,a),l)})}async function IH(t,e,n){t._canInitEmulator=!1;const r={...Fce,...e};try{const i=new $ce(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Tf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Tf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Tf(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw aR(t,u,l);Bi(t,u)}}catch(i){if(i instanceof Si)throw i;Bi(t,"network-request-failed",{message:String(i)})}}async function Lc(t,e,n,r,i={}){const s=await si(t,e,n,r,i);return"mfaPendingCredential"in s&&Bi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function SH(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?lR(t.config,i):`${t.config.apiScheme}://${i}`;return Uce.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Vce(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $ce{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),jce.get())})}}function Tf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ni(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){return t!==void 0&&t.getResponse!==void 0}function MM(t){return t!==void 0&&t.enterprise!==void 0}class AH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Vce(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bce(t){return(await si(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function kH(t,e){return si(t,"GET","/v2/recaptchaConfig",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hce(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function a_(t,e){return si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zce(t,e=!1){const n=$e(t),r=await n.getIdToken(e),i=uR(r);Ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:qf(hC(i.auth_time)),issuedAtTime:qf(hC(i.iat)),expirationTime:qf(hC(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hC(t){return Number(t)*1e3}function uR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ny("JWT malformed, contained fewer than 3 sections"),null;try{const i=Kv(n);return i?JSON.parse(i):(Ny("Failed to decode base64 JWT payload"),null)}catch(i){return Ny("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function DM(t){const e=uR(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Si&&Wce(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Wce({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kce{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qf(this.lastLoginAt),this.creationTime=qf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Bd(t,a_(e,{idToken:n}));Ee(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?RH(i.providerUserInfo):[],o=Gce(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qI(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,u)}async function qce(t){const e=$e(t);await c_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gce(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RH(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qce(t,e){const n=await IH(t,{},async()=>{const r=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await SH(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Es(t.emulatorConfig.host)&&(c.credentials="include"),bH.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Yce(t,e){return si(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=DM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Qce(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new od;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new od,this.toJSON())}_performRefresh(){return Oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class as{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Kce(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Bd(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zce(this,e)}reload(){return qce(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new as({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await c_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(no(this.auth));const e=await this.getIdToken();return await Bd(this,Hce(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:_,stsTokenManager:y}=n;Ee(d&&y,e,"internal-error");const T=od.fromJSON(this.name,y);Ee(typeof d=="string",e,"internal-error"),ma(r,e.name),ma(i,e.name),Ee(typeof f=="boolean",e,"internal-error"),Ee(typeof m=="boolean",e,"internal-error"),ma(s,e.name),ma(o,e.name),ma(a,e.name),ma(c,e.name),ma(l,e.name),ma(u,e.name);const E=new as({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:T,createdAt:l,lastLoginAt:u});return _&&Array.isArray(_)&&(E.providerData=_.map(w=>({...w}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new od;i.updateFromServerResponse(n);const s=new as({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await c_(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?RH(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new od;a.updateFromIdToken(r);const c=new as({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Map;function Mo(t){Zo(t instanceof Function,"Expected a class definition");let e=LM.get(t);return e?(Zo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xH.type="NONE";const FM=xH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e,n){return`firebase:${t}:${e}:${n}`}class ad{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oy("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await a_(this.auth,{idToken:e}).catch(()=>{});return n?as._fromGetAccountInfoResponse(this.auth,n,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ad(Mo(FM),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Mo(FM);const o=Oy(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){let d;if(typeof u=="string"){const f=await a_(e,{idToken:u}).catch(()=>{});if(!f)break;d=await as._fromGetAccountInfoResponse(e,f,u)}else d=as._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ad(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new ad(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LH(e))return"Blackberry";if(FH(e))return"Webos";if(NH(e))return"Safari";if((e.includes("chrome/")||OH(e))&&!e.includes("edge/"))return"Chrome";if(DH(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PH(t=gr()){return/firefox\//i.test(t)}function NH(t=gr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OH(t=gr()){return/crios\//i.test(t)}function MH(t=gr()){return/iemobile/i.test(t)}function DH(t=gr()){return/android/i.test(t)}function LH(t=gr()){return/blackberry/i.test(t)}function FH(t=gr()){return/webos/i.test(t)}function dR(t=gr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Jce(t=gr()){var e;return dR(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Xce(){return Xre()&&document.documentMode===10}function UH(t=gr()){return dR(t)||DH(t)||FH(t)||LH(t)||/windows phone/i.test(t)||MH(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t,e=[]){let n;switch(t){case"Browser":n=UM(gr());break;case"Worker":n=`${UM(gr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ele(t,e={}){return si(t,"GET","/v2/passwordPolicy",Dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tle=6;class nle{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tle,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rle{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jM(this),this.idTokenSubscription=new jM(this),this.beforeStateQueue=new Zce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mo(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ad.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await a_(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await c_(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lce()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(no(this));const n=e?$e(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(no(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(no(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ele(this),n=new nle(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yce(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mo(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await ad.create(this,[Mo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Mce(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hi(t){return $e(t)}class jM{constructor(e){this.auth=e,this.observer=null,this.addObserver=oie(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ile(t){zm=t}function hR(t){return zm.loadJS(t)}function sle(){return zm.recaptchaV2Script}function ole(){return zm.recaptchaEnterpriseScript}function ale(){return zm.gapiScript}function VH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cle=500,lle=6e4,Xg=1e12;class ule{constructor(e){this.auth=e,this.counter=Xg,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new fle(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Xg;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Xg;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Xg;return(r=this._widgets.get(n))==null||r.execute(),""}}class dle{constructor(){this.enterprise=new hle}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hle{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fle{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ee(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ple(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},lle)},cle))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ple(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const mle="recaptcha-enterprise",Gf="NO_RECAPTCHA";class $H{constructor(e){this.type=mle,this.auth=Hi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{kH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new AH(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;MM(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Gf)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dle().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&MM(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ole();c.length!==0&&(c+=a),hR(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Zh(t,e,n,r=!1,i=!1){const s=new $H(t);let o;if(i)o=Gf;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function wl(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Zh(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Zh(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Zh(t,e,n);return r(t,a).catch(async c=>{var l;if(((l=t._getRecaptchaConfig())==null?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Zh(t,e,n,!1,!0);return r(t,u)}return Promise.reject(c)})}else{const a=await Zh(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function gle(t){const e=Hi(t),n=await kH(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new AH(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new $H(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yle(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(so(s,e??{}))return i;Bi(i,"already-initialized")}return n.initialize({options:e})}function vle(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _le(t,e,n){const r=Hi(t);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=BH(e),{host:o,port:a}=wle(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(so(l,r.config.emulator)&&so(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Es(o)?(km(`${s}//${o}${c}`),Rm("Auth",!0)):Tle()}function BH(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wle(t){const e=BH(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:VM(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:VM(o)}}}function VM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Tle(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oo("not implemented")}_getIdTokenResponse(e){return Oo("not implemented")}_linkToIdToken(e,n){return Oo("not implemented")}_getReauthenticationResolver(e){return Oo("not implemented")}}async function Ele(t,e){return si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cle(t,e){return Lc(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}async function HH(t,e){return si(t,"POST","/v1/accounts:sendOobCode",Dr(t,e))}async function ble(t,e){return HH(t,e)}async function Ile(t,e){return HH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sle(t,e){return Lc(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function Ale(t,e){return Lc(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends uT{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Qp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wl(e,n,"signInWithPassword",Cle,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Sle(e,{email:this._email,oobCode:this._password});default:Bi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wl(e,r,"signUpPassword",Ele,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Ale(e,{idToken:n,email:this._email,oobCode:this._password});default:Bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t,e){return Lc(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kle="http://localhost";class ea extends uT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ea(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return cd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cd(e,n)}buildRequest(){const e={requestUri:kle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){return si(t,"POST","/v1/accounts:sendVerificationCode",Dr(t,e))}async function Rle(t,e){return Lc(t,"POST","/v1/accounts:signInWithPhoneNumber",Dr(t,e))}async function xle(t,e){const n=await Lc(t,"POST","/v1/accounts:signInWithPhoneNumber",Dr(t,e));if(n.temporaryProof)throw Tf(t,"account-exists-with-different-credential",n);return n}const Ple={USER_NOT_FOUND:"user-not-found"};async function Nle(t,e){const n={...e,operation:"REAUTH"};return Lc(t,"POST","/v1/accounts:signInWithPhoneNumber",Dr(t,n),Ple)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends uT{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Qf({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Qf({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Rle(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return xle(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Nle(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Qf({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ole(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mle(t){const e=mf(gf(t)).link,n=e?mf(gf(e)).deep_link_id:null,r=mf(gf(t)).deep_link_id;return(r?mf(gf(r)).link:null)||r||n||e||t}class fR{constructor(e){const n=mf(gf(e)),r=n.apiKey??null,i=n.oobCode??null,s=Ole(n.mode??null);Ee(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Mle(e);try{return new fR(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this.providerId=Sh.PROVIDER_ID}static credential(e,n){return Qp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fR.parseLink(n);return Ee(r,"argument-error"),Qp._fromEmailAndCode(e,r.code,r.tenantId)}}Sh.PROVIDER_ID="password";Sh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends dT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ld extends Ah{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Ee("providerId"in n&&"signInMethod"in n,"argument-error"),ea._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Ee(e.idToken||e.accessToken,"argument-error"),ea._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return ld.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ld.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new ld(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Ah{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ia.credential(e.oauthAccessToken)}catch{return null}}}Ia.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ia.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ko.credential(n,r)}catch{return null}}}ko.GOOGLE_SIGN_IN_METHOD="google.com";ko.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Ah{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sa.credential(e.oauthAccessToken)}catch{return null}}}Sa.GITHUB_SIGN_IN_METHOD="github.com";Sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Ah{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Aa.credential(n,r)}catch{return null}}}Aa.TWITTER_SIGN_IN_METHOD="twitter.com";Aa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dle(t,e){return Lc(t,"POST","/v1/accounts:signUp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await as._fromIdTokenResponse(e,r,i),o=BM(r);return new Ul({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=BM(r);return new Ul({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function BM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends Si{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,l_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new l_(e,n,r,i)}}function zH(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?l_._fromErrorAndOperation(t,s,e,r):s})}async function Lle(t,e,n=!1){const r=await Bd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fle(t,e,n=!1){const{auth:r}=t;if(Yn(r.app))return Promise.reject(no(r));const i="reauthenticate";try{const s=await Bd(t,zH(r,i,e,t),n);Ee(s.idToken,r,"internal-error");const o=uR(s.idToken);Ee(o,r,"internal-error");const{sub:a}=o;return Ee(t.uid===a,r,"user-mismatch"),Ul._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WH(t,e,n=!1){if(Yn(t.app))return Promise.reject(no(t));const r="signIn",i=await zH(t,r,e),s=await Ul._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function KH(t,e){return WH(Hi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qH(t){const e=Hi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ule(t,e,n){const r=Hi(t);await wl(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Ile,"EMAIL_PASSWORD_PROVIDER")}async function jle(t,e,n){if(Yn(t.app))return Promise.reject(no(t));const r=Hi(t),o=await wl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dle,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qH(t),c}),a=await Ul._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Vle(t,e,n){return Yn(t.app)?Promise.reject(no(t)):KH($e(t),Sh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qH(t),r})}async function HM(t,e){const n=$e(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await ble(n.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $le(t,e){return si(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ble(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$e(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Bd(r,$le(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Hle(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function zle(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function Wle(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function Kle(t){return $e(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t,e){return si(t,"POST","/v2/accounts/mfaEnrollment:start",Dr(t,e))}const u_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(u_,"1"),this.storage.removeItem(u_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qle=1e3,Gle=10;class QH extends GH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Xce()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Gle):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QH.type="LOCAL";const Qle=QH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH extends GH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YH.type="SESSION";const JH=YH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yle(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),c=await Yle(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=pR("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function Xle(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function Zle(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eue(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tue(){return mR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="firebaseLocalStorageDb",nue=1,d_="firebaseLocalStorage",ZH="fbase_key";class Wm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fT(t,e){return t.transaction([d_],e?"readwrite":"readonly").objectStore(d_)}function rue(){const t=indexedDB.deleteDatabase(XH);return new Wm(t).toPromise()}function GI(){const t=indexedDB.open(XH,nue);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(d_,{keyPath:ZH})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(d_)?e(r):(r.close(),await rue(),e(await GI()))})})}async function WM(t,e,n){const r=fT(t,!0).put({[ZH]:e,value:n});return new Wm(r).toPromise()}async function iue(t,e){const n=fT(t,!1).get(e),r=await new Wm(n).toPromise();return r===void 0?null:r.value}function KM(t,e){const n=fT(t,!0).delete(e);return new Wm(n).toPromise()}const sue=800,oue=3;class e3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await GI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oue)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hT._getInstance(tue()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Zle(),!this.activeServiceWorker)return;this.sender=new Jle(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eue()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await GI();return await WM(e,u_,"1"),await KM(e,u_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WM(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iue(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KM(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=fT(i,!1).getAll();return new Wm(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e3.type="LOCAL";const aue=e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t,e){return si(t,"POST","/v2/accounts/mfaSignIn:start",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=VH("rcb"),cue=new Hm(3e4,6e4);class lue{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Tn().grecaptcha)!=null&&e.render)}load(e,n=""){return Ee(uue(n),e,"argument-error"),this.shouldResolveImmediately(n)&&OM(Tn().grecaptcha)?Promise.resolve(Tn().grecaptcha):new Promise((r,i)=>{const s=Tn().setTimeout(()=>{i(ni(e,"network-request-failed"))},cue.get());Tn()[fC]=()=>{Tn().clearTimeout(s),delete Tn()[fC];const a=Tn().grecaptcha;if(!a||!OM(a)){i(ni(e,"internal-error"));return}const c=a.render;a.render=(l,u)=>{const d=c(l,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${sle()}?${nu({onload:fC,render:"explicit",hl:n})}`;hR(o).catch(()=>{clearTimeout(s),i(ni(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Tn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function uue(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class due{async load(e){return new ule(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="recaptcha",hue={theme:"light",type:"image"};class fue{constructor(e,n,r={...hue}){this.parameters=r,this.type=Yf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hi(e),this.isInvisible=this.parameters.size==="invisible",Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Ee(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new due:new lue,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Tn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ee(CH()&&!mR(),this.auth,"internal-error"),await pue(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Bce(this.auth);Ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function pue(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mue{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Qf._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function gue(t,e,n){if(Yn(t.app))return Promise.reject(no(t));const r=Hi(t),i=await yue(r,e,$e(n));return new mue(i,s=>KH(r,s))}async function yue(t,e,n){var r;if(!t._getRecaptchaConfig())try{await gle(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){Ee(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await wl(t,o,"mfaSmsEnrollment",async(u,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Gf){Ee((n==null?void 0:n.type)===Yf,u,"argument-error");const f=await pC(u,d,n);return zM(u,f)}return zM(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{Ee(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Ee(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await wl(t,a,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===Gf){Ee((n==null?void 0:n.type)===Yf,d,"argument-error");const m=await pC(d,f,n);return qM(d,m)}return qM(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await wl(t,s,"sendVerificationCode",async(l,u)=>{if(u.captchaResponse===Gf){Ee((n==null?void 0:n.type)===Yf,l,"argument-error");const d=await pC(l,u,n);return $M(l,d)}return $M(l,u)},"PHONE_PROVIDER").catch(l=>Promise.reject(l))).sessionInfo}}finally{n==null||n._reset()}}async function pC(t,e,n){Ee(n.type===Yf,t,"argument-error");const r=await n.verify();Ee(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t,e){return e?Mo(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR extends uT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vue(t){return WH(t.auth,new yR(t),t.bypassAuthState)}function _ue(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),Fle(n,new yR(t),t.bypassAuthState)}async function wue(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),Lle(n,new yR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vue;case"linkViaPopup":case"linkViaRedirect":return wue;case"reauthViaPopup":case"reauthViaRedirect":return _ue;default:Bi(this.auth,"internal-error")}}resolve(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tue=new Hm(2e3,1e4);async function Eue(t,e,n){if(Yn(t.app))return Promise.reject(ni(t,"operation-not-supported-in-this-environment"));const r=Hi(t);EH(t,e,dT);const i=gR(r,n);return new ja(r,"signInViaPopup",e,i).executeNotNull()}async function Cue(t,e,n){const r=$e(t);EH(r.auth,e,dT);const i=gR(r.auth,n);return new ja(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ja extends t3{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Zo(this.filter.length===1,"Popup operations only handle one event");const e=pR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tue.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bue="pendingRedirect",My=new Map;class Iue extends t3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=My.get(this.auth._key());if(!e){try{const r=await Sue(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}My.set(this.auth._key(),e)}return this.bypassAuthState||My.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sue(t,e){const n=Rue(e),r=kue(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Aue(t,e){My.set(t._key(),e)}function kue(t){return Mo(t._redirectPersistence)}function Rue(t){return Oy(bue,t.config.apiKey,t.name)}async function xue(t,e,n=!1){if(Yn(t.app))return Promise.reject(no(t));const r=Hi(t),i=gR(r,e),o=await new Iue(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pue=10*60*1e3;class Nue{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Oue(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!n3(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pue&&this.cachedEventUids.clear(),this.cachedEventUids.has(GM(e))}saveEventToCache(e){this.cachedEventUids.add(GM(e)),this.lastProcessedEventTime=Date.now()}}function GM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Oue(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mue(t,e={}){return si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Due=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lue=/^https?/;async function Fue(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Mue(t);for(const n of e)try{if(Uue(n))return}catch{}Bi(t,"unauthorized-domain")}function Uue(t){const e=KI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Lue.test(n))return!1;if(Due.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jue=new Hm(3e4,6e4);function QM(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Vue(t){return new Promise((e,n)=>{var i,s,o;function r(){QM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QM(),n(ni(t,"network-request-failed"))},timeout:jue.get()})}if((s=(i=Tn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Tn().gapi)!=null&&o.load)r();else{const a=VH("iframefcb");return Tn()[a]=()=>{gapi.load?r():n(ni(t,"network-request-failed"))},hR(`${ale()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Dy=null,e})}let Dy=null;function $ue(t){return Dy=Dy||Vue(t),Dy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bue=new Hm(5e3,15e3),Hue="__/auth/iframe",zue="emulator/auth/iframe",Wue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function que(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lR(e,zue):`https://${t.config.authDomain}/${Hue}`,r={apiKey:e.apiKey,appName:t.name,v:Nc},i=Kue.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nu(r).slice(1)}`}async function Gue(t){const e=await $ue(t),n=Tn().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:que(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wue,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ni(t,"network-request-failed"),a=Tn().setTimeout(()=>{s(o)},Bue.get());function c(){Tn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Que={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yue=500,Jue=600,Xue="_blank",Zue="http://localhost";class YM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ede(t,e,n,r=Yue,i=Jue){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...Que,width:r.toString(),height:i.toString(),top:s,left:o},l=gr().toLowerCase();n&&(a=OH(l)?Xue:n),PH(l)&&(e=e||Zue,c.scrollbars="yes");const u=Object.entries(c).reduce((f,[m,_])=>`${f}${m}=${_},`,"");if(Jce(l)&&a!=="_self")return tde(e||"",a),new YM(null);const d=window.open(e||"",a,u);Ee(d,t,"popup-blocked");try{d.focus()}catch{}return new YM(d)}function tde(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nde="__/auth/handler",rde="emulator/auth/handler",ide=encodeURIComponent("fac");async function JM(t,e,n,r,i,s){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Nc,eventId:i};if(e instanceof dT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Ah){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${ide}=${encodeURIComponent(c)}`:"";return`${sde(t)}?${nu(a).slice(1)}${l}`}function sde({config:t}){return t.emulator?lR(t,rde):`https://${t.authDomain}/${nde}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="webStorageSupport";class ode{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JH,this._completeRedirectFn=xue,this._overrideRedirectResult=Aue}async _openPopup(e,n,r,i){var o;Zo((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await JM(e,n,r,KI(),i);return ede(e,s,pR())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await JM(e,n,r,KI(),i);return Xle(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Gue(e),r=new Nue(e);return n.register("authEvent",i=>(Ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mC,{type:mC},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[mC];s!==void 0&&n(!!s),Bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Fue(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UH()||NH()||dR()}}const ade=ode;var XM="@firebase/auth",ZM="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cde{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lde(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ude(t){Nr(new yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jH(t)},l=new rle(r,i,s,c);return vle(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Nr(new yr("auth-internal",e=>{const n=Hi(e.getProvider("auth").getImmediate());return(r=>new cde(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),In(XM,ZM,lde(t)),In(XM,ZM,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dde=5*60,hde=N$("authIdTokenMaxAge")||dde;let eD=null;const fde=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hde)return;const i=n==null?void 0:n.token;eD!==i&&(eD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pde(t=Oc()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yle(t,{popupRedirectResolver:ade,persistence:[aue,Qle,JH]}),r=N$("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=fde(s.toString());zle(n,o,()=>o(n.currentUser)),Hle(n,a=>o(a))}}const i=x$("auth");return i&&_le(n,`http://${i}`),n}function mde(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ile({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ni("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mde().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ude("Browser");var tD={};const nD="@firebase/database",rD="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r3="";function gde(t){r3=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yde{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Vn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Up(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vde{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ho(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yde(e)}}catch{}return new vde},al=i3("localStorage"),_de=i3("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=new xm("@firebase/database"),wde=function(){let t=1;return function(){return t++}}(),s3=function(t){const e=lie(t),n=new sie;n.update(e);const r=n.digest();return m0.encodeByteArray(r)},Km=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Km.apply(null,r):typeof r=="object"?e+=Vn(r):e+=r,e+=" "}return e};let Jf=null,iD=!0;const Tde=function(t,e){ue(!e,"Can't turn on custom loggers persistently."),ud.logLevel=nt.VERBOSE,Jf=ud.log.bind(ud)},Qn=function(...t){if(iD===!0&&(iD=!1,Jf===null&&_de.get("logging_enabled")===!0&&Tde()),Jf){const e=Km.apply(null,t);Jf(e)}},qm=function(t){return function(...e){Qn(t,...e)}},QI=function(...t){const e="FIREBASE INTERNAL ERROR: "+Km(...t);ud.error(e)},ta=function(...t){const e=`FIREBASE FATAL ERROR: ${Km(...t)}`;throw ud.error(e),new Error(e)},Pr=function(...t){const e="FIREBASE WARNING: "+Km(...t);ud.warn(e)},Ede=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Cde=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},jl="[MIN_NAME]",Tc="[MAX_NAME]",su=function(t,e){if(t===e)return 0;if(t===jl||e===Tc)return-1;if(e===jl||t===Tc)return 1;{const n=sD(t),r=sD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bde=function(t,e){return t===e?0:t<e?-1:1},ef=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Vn(e))},_R=function(t){if(typeof t!="object"||t===null)return Vn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Vn(e[r]),n+=":",n+=_R(t[e[r]]);return n+="}",n},o3=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function tr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const a3=function(t){ue(!vR(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Ide=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Sde=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ade(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const kde=new RegExp("^-?(0*)\\d{1,10}$"),Rde=-2147483648,xde=2147483647,sD=function(t){if(kde.test(t)){const e=Number(t);if(e>=Rde&&e<=xde)return e}return null},kh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Pr("Exception was thrown by user callback.",n),e},Math.floor(0))}},Pde=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xf=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nde{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Pr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ode{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Qn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pr(e)}}class Ly{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ly.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="5",c3="v",l3="s",u3="r",d3="f",h3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,f3="ls",p3="p",YI="ac",m3="websocket",g3="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=al.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&al.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Mde(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function v3(t,e,n){ue(typeof e=="string","typeof type must == string"),ue(typeof n=="object","typeof params must == object");let r;if(e===m3)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===g3)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Mde(t)&&(n.ns=t.namespace);const i=[];return tr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dde{constructor(){this.counters_={}}incrementCounter(e,n=1){ho(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Bre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={},yC={};function TR(t){const e=t.toString();return gC[e]||(gC[e]=new Dde),gC[e]}function Lde(t,e){const n=t.toString();return yC[n]||(yC[n]=e()),yC[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fde{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&kh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="start",Ude="close",jde="pLPCommand",Vde="pRTLPCB",_3="id",w3="pw",T3="ser",$de="cb",Bde="seg",Hde="ts",zde="d",Wde="dframe",E3=1870,C3=30,Kde=E3-C3,qde=25e3,Gde=3e4;class Ku{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qm(e),this.stats_=TR(n),this.urlFn=c=>(this.appCheckToken&&(c[YI]=this.appCheckToken),v3(n,g3,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fde(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Gde)),Cde(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ER((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===oD)this.id=a,this.password=c;else if(o===Ude)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[oD]="t",r[T3]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$de]=this.scriptTagHolder.uniqueCallbackIdentifier),r[c3]=wR,this.transportSessionId&&(r[l3]=this.transportSessionId),this.lastSessionId&&(r[f3]=this.lastSessionId),this.applicationId&&(r[p3]=this.applicationId),this.appCheckToken&&(r[YI]=this.appCheckToken),typeof location<"u"&&location.hostname&&h3.test(location.hostname)&&(r[u3]=d3);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ku.forceAllow_=!0}static forceDisallow(){Ku.forceDisallow_=!0}static isAvailable(){return Ku.forceAllow_?!0:!Ku.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ide()&&!Sde()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Vn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=k$(n),i=o3(r,Kde);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Wde]="t",r[_3]=e,r[w3]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Vn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ER{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=wde(),window[jde+this.uniqueCallbackIdentifier]=e,window[Vde+this.uniqueCallbackIdentifier]=n,this.myIFrame=ER.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qn("frame writing exception"),a.stack&&Qn(a.stack),Qn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Qn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[_3]=this.myID,e[w3]=this.myPW,e[T3]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C3+r.length<=E3;){const o=this.pendingSegs.shift();r=r+"&"+Bde+i+"="+o.seg+"&"+Hde+i+"="+o.ts+"&"+zde+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(qde)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Qn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qde=16384,Yde=45e3;let h_=null;typeof MozWebSocket<"u"?h_=MozWebSocket:typeof WebSocket<"u"&&(h_=WebSocket);class rs{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qm(this.connId),this.stats_=TR(n),this.connURL=rs.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[c3]=wR,typeof location<"u"&&location.hostname&&h3.test(location.hostname)&&(o[u3]=d3),n&&(o[l3]=n),r&&(o[f3]=r),i&&(o[YI]=i),s&&(o[p3]=s),v3(e,m3,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,al.set("previous_websocket_failure",!0);try{let r;D$(),this.mySock=new h_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){rs.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&h_!==null&&!rs.forceDisallow_}static previouslyFailed(){return al.isInMemoryStorage||al.get("previous_websocket_failure")===!0}markConnectionHealthy(){al.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Up(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Vn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=o3(n,Qde);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Yde))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rs.responsesRequiredToBeHealthy=2;rs.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{static get ALL_TRANSPORTS(){return[Ku,rs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=rs&&rs.isAvailable();let r=n&&!rs.previouslyFailed();if(e.webSocketOnly&&(n||Pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rs];else{const i=this.transports_=[];for(const s of Yp.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Yp.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yp.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jde=6e4,Xde=5e3,Zde=10*1024,ehe=100*1024,vC="t",aD="d",the="s",cD="r",nhe="e",lD="o",uD="a",dD="n",hD="p",rhe="h";class ihe{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qm("c:"+this.id+":"),this.transportManager_=new Yp(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ehe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Zde?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vC in e){const n=e[vC];n===uD?this.upgradeIfSecondaryHealthy_():n===cD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===lD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ef("t",e),r=ef("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ef("t",e),r=ef("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ef(vC,e);if(aD in e){const r=e[aD];if(n===rhe){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===dD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===the?this.onConnectionShutdown_(r):n===cD?this.onReset_(r):n===nhe?QI("Server Error: "+r):n===lD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QI("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wR!==r&&Pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Xf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jde))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Xde))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hD,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(al.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends I3{static getInstance(){return new f_}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!y0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=32,pD=768;class St{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function _t(){return new St("")}function Ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ec(t){return t.pieces_.length-t.pieceNum_}function Mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new St(t.pieces_,e)}function CR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function she(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Jp(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function S3(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new St(e,0)}function sn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof St)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new St(n,0)}function Je(t){return t.pieceNum_>=t.pieces_.length}function Qr(t,e){const n=Ye(t),r=Ye(e);if(n===null)return e;if(n===r)return Qr(Mt(t),Mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ohe(t,e){const n=Jp(t,0),r=Jp(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=su(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function bR(t,e){if(Ec(t)!==Ec(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Fi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ec(t)>Ec(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class ahe{constructor(e,n){this.errorPrefix_=n,this.parts_=Jp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zw(this.parts_[r]);A3(this)}}function che(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zw(e),A3(t)}function lhe(t){const e=t.parts_.pop();t.byteLength_-=zw(e),t.parts_.length>0&&(t.byteLength_-=1)}function A3(t){if(t.byteLength_>pD)throw new Error(t.errorPrefix_+"has a key path longer than "+pD+" bytes ("+t.byteLength_+").");if(t.parts_.length>fD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fD+") or object contains a cycle "+qc(t))}function qc(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR extends I3{static getInstance(){return new IR}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=1e3,uhe=60*5*1e3,mD=30*1e3,dhe=1.3,hhe=3e4,fhe="server_kill",gD=3;class Bo extends b3{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Bo.nextPersistentConnectionId_++,this.log_=qm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tf,this.maxReconnectDelay_=uhe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!D$())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IR.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&f_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Vn(s)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Am,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;Bo.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ho(e,"w")){const r=Md(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Pr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iie(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mD)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rie(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Vn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):QI("Unrecognized action received from server: "+Vn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hhe&&(this.reconnectDelay_=tf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dhe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Bo.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){ue(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Qn("getToken() completed but was canceled"):(Qn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new ihe(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Pr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(fhe)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Pr(d),c())}}}interrupt(e){Qn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Qn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],wI(this.interruptReasons_)&&(this.reconnectDelay_=tf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>_R(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new St(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Qn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gD&&(this.reconnectDelay_=mD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Qn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+r3.replace(/\./g,"-")]=1,y0()?e["framework.cordova"]=1:M$()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=f_.getInstance().currentlyOnline();return wI(this.interruptReasons_)&&e}}Bo.nextPersistentConnectionId_=0;Bo.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Xe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Xe(jl,e),i=new Xe(jl,n);return this.compare(r,i)!==0}minPost(){return Xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg;class k3 extends pT{static get __EMPTY_NODE(){return Zg}static set __EMPTY_NODE(e){Zg=e}compare(e,n){return su(e.name,n.name)}isDefinedOn(e){throw _h("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(Tc,Zg)}makePost(e,n){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,Zg)}toString(){return".key"}}const Tl=new k3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Un{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Un.RED,this.left=i??Yr.EMPTY_NODE,this.right=s??Yr.EMPTY_NODE}copy(e,n,r,i,s){return new Un(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Yr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Un.RED=!0;Un.BLACK=!1;class phe{copy(e,n,r,i,s){return this}insert(e,n,r){return new Un(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yr{constructor(e,n=Yr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Yr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Un.BLACK,null,null))}remove(e){return new Yr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Un.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ey(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ey(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ey(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ey(this.root_,null,this.comparator_,!0,e)}}Yr.EMPTY_NODE=new phe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mhe(t,e){return su(t.name,e.name)}function SR(t,e){return su(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JI;function ghe(t){JI=t}const R3=function(t){return typeof t=="number"?"number:"+a3(t):"string:"+t},x3=function(t){if(t.isLeafNode()){const e=t.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ho(e,".sv"),"Priority must be a string or number.")}else ue(t===JI||t.isEmpty(),"priority of unexpected type.");ue(t===JI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yD;class Mn{static set __childrenNodeConstructor(e){yD=e}static get __childrenNodeConstructor(){return yD}constructor(e,n=Mn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),x3(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:Ye(e)===".priority"?this.priorityNode_:Mn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Mn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ye(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ue(r!==".priority"||Ec(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Mn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+R3(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=a3(this.value_):e+=this.value_,this.lazyHash_=s3(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mn.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Mn.VALUE_TYPE_ORDER.indexOf(n),s=Mn.VALUE_TYPE_ORDER.indexOf(r);return ue(i>=0,"Unknown leaf type: "+n),ue(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Mn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P3,N3;function yhe(t){P3=t}function vhe(t){N3=t}class _he extends pT{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?su(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(Tc,new Mn("[PRIORITY-POST]",N3))}makePost(e,n){const r=P3(e);return new Xe(n,new Mn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Yt=new _he;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const whe=Math.log(2);class The{constructor(e){const n=s=>parseInt(Math.log(s)/whe,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const p_=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new Un(f,d.node,Un.BLACK,null,null);{const m=parseInt(u/2,10)+c,_=i(c,m),y=i(m+1,l);return d=t[m],f=n?n(d):d,new Un(f,d.node,Un.BLACK,_,y)}},s=function(c){let l=null,u=null,d=t.length;const f=function(_,y){const T=d-_,E=d;d-=_;const w=i(T+1,E),C=t[T],S=n?n(C):C;m(new Un(S,C.node,y,null,w))},m=function(_){l?(l.left=_,l=_):(u=_,l=_)};for(let _=0;_<c.count;++_){const y=c.nextBitIsOne(),T=Math.pow(2,c.count-(_+1));y?f(T,Un.BLACK):(f(T,Un.BLACK),f(T,Un.RED))}return u},o=new The(t.length),a=s(o);return new Yr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _C;const vu={};class Do{static get Default(){return ue(vu&&Yt,"ChildrenNode.ts has not been loaded"),_C=_C||new Do({".priority":vu},{".priority":Yt}),_C}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Md(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Yr?n:null}hasIndex(e){return ho(this.indexSet_,e.toString())}addIndex(e,n){ue(e!==Tl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Xe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=p_(r,e.getCompare()):a=vu;const c=e.toString(),l={...this.indexSet_};l[c]=e;const u={...this.indexes_};return u[c]=a,new Do(u,l)}addToIndexes(e,n){const r=qv(this.indexes_,(i,s)=>{const o=Md(this.indexSet_,s);if(ue(o,"Missing index implementation for "+s),i===vu)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Xe.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),p_(a,o.getCompare())}else return vu;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new Xe(e.name,a))),c.insert(e,e.node)}});return new Do(r,this.indexSet_)}removeFromIndexes(e,n){const r=qv(this.indexes_,i=>{if(i===vu)return i;{const s=n.get(e.name);return s?i.remove(new Xe(e.name,s)):i}});return new Do(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf;class Le{static get EMPTY_NODE(){return nf||(nf=new Le(new Yr(SR),null,Do.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&x3(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nf}updatePriority(e){return this.children_.isEmpty()?this:new Le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?nf:n}}getChild(e){const n=Ye(e);return n===null?this:this.getImmediateChild(n).getChild(Mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ue(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Xe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?nf:this.priorityNode_;return new Le(i,o,s)}}updateChild(e,n){const r=Ye(e);if(r===null)return n;{ue(Ye(e)!==".priority"||Ec(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Mt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Yt,(o,a)=>{n[o]=a.val(e),r++,s&&Le.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+R3(this.getPriority().val())+":"),this.forEachChild(Yt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":s3(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Xe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Xe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Xe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Xe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gm?-1:0}withIndex(e){if(e===Tl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Le(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Tl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Yt),i=n.getIterator(Yt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Tl?null:this.indexMap_.get(e.toString())}}Le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ehe extends Le{constructor(){super(new Yr(SR),Le.EMPTY_NODE,Do.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Le.EMPTY_NODE}isEmpty(){return!1}}const Gm=new Ehe;Object.defineProperties(Xe,{MIN:{value:new Xe(jl,Le.EMPTY_NODE)},MAX:{value:new Xe(Tc,Gm)}});k3.__EMPTY_NODE=Le.EMPTY_NODE;Mn.__childrenNodeConstructor=Le;ghe(Gm);vhe(Gm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Che=!0;function jn(t,e=null){if(t===null)return Le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Mn(n,jn(e))}if(!(t instanceof Array)&&Che){const n=[];let r=!1;if(tr(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=jn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Xe(o,c)))}}),n.length===0)return Le.EMPTY_NODE;const s=p_(n,mhe,o=>o.name,SR);if(r){const o=p_(n,Yt.getCompare());return new Le(s,jn(e),new Do({".priority":o},{".priority":Yt}))}else return new Le(s,jn(e),Do.Default)}else{let n=Le.EMPTY_NODE;return tr(t,(r,i)=>{if(ho(t,r)&&r.substring(0,1)!=="."){const s=jn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(jn(e))}}yhe(jn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR extends pT{constructor(e){super(),this.indexPath_=e,ue(!Je(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?su(e.name,n.name):s}makePost(e,n){const r=jn(e),i=Le.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xe(n,i)}maxPost(){const e=Le.EMPTY_NODE.updateChild(this.indexPath_,Gm);return new Xe(Tc,e)}toString(){return Jp(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bhe extends pT{compare(e,n){const r=e.node.compareTo(n.node);return r===0?su(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,n){const r=jn(e);return new Xe(n,r)}toString(){return".value"}}const O3=new bhe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){return{type:"value",snapshotNode:t}}function Hd(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Xp(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zp(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ihe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Xp(n,a)):ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Hd(n,r)):o.trackChildChange(Zp(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Yt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Xp(i,s))}),n.isLeafNode()||n.forEachChild(Yt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Zp(i,s,o))}else r.trackChildChange(Hd(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Le.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.indexedFilter_=new kR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=em.getStartPost_(e),this.endPost_=em.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Xe(n,r))||(r=Le.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Le.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Le.EMPTY_NODE);const s=this;return n.forEachChild(Yt,(o,a)=>{s.matches(new Xe(o,a))||(i=i.updateImmediateChild(o,Le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class She{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new em(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Xe(n,r))||(r=Le.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Le.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Le.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,m)=>d(m,f)}else o=this.index_.getCompare();const a=e;ue(a.numChildren()===this.limit_,"");const c=new Xe(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,c);if(u&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(Zp(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Xp(n,d));const y=a.updateImmediateChild(n,Le.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Hd(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Xp(l.name,l.node)),s.trackChildChange(Hd(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Le.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jl}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Tc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yt}copy(){const e=new RR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ahe(t){return t.loadsAllData()?new kR(t.getIndex()):t.hasLimit()?new She(t):new em(t)}function khe(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Rhe(t,e){const n=t.copy();return n.index_=e,n}function vD(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Yt?n="$priority":t.index_===O3?n="$value":t.index_===Tl?n="$key":(ue(t.index_ instanceof AR,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Vn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Vn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Vn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Vn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Vn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _D(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_ extends b3{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=qm("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=m_.getListenId_(e,r),a={};this.listens_[o]=a;const c=vD(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Md(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){const r=m_.getListenId_(e,n);delete this.listens_[r]}get(e){const n=vD(e._queryParams),r=e._path.toString(),i=new Am;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+nu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Up(a.responseText)}catch{Pr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Pr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(){this.rootNode_=Le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){return{value:null,children:new Map}}function D3(t,e,n){if(Je(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ye(e);t.children.has(r)||t.children.set(r,g_());const i=t.children.get(r);e=Mt(e),D3(i,e,n)}}function XI(t,e,n){t.value!==null?n(e,t.value):Phe(t,(r,i)=>{const s=new St(e.toString()+"/"+r);XI(i,s,n)})}function Phe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nhe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&tr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=10*1e3,Ohe=30*1e3,Mhe=5*60*1e3;class Dhe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nhe(e);const r=wD+(Ohe-wD)*Math.random();Xf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;tr(e,(i,s)=>{s>0&&ho(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Xf(this.reportStats_.bind(this),Math.floor(Math.random()*2*Mhe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cs;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cs||(cs={}));function xR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function PR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function NR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=cs.ACK_USER_WRITE,this.source=xR()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new St(e));return new y_(_t(),n,this.revert)}}else return ue(Ye(this.path)===e,"operationForChild called for unrelated child."),new y_(Mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.source=e,this.path=n,this.type=cs.LISTEN_COMPLETE}operationForChild(e){return Je(this.path)?new tm(this.source,_t()):new tm(this.source,Mt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=cs.OVERWRITE}operationForChild(e){return Je(this.path)?new Vl(this.source,_t(),this.snap.getImmediateChild(e)):new Vl(this.source,Mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=cs.MERGE}operationForChild(e){if(Je(this.path)){const n=this.children.subtree(new St(e));return n.isEmpty()?null:n.value?new Vl(this.source,_t(),n.value):new zd(this.source,_t(),n)}else return ue(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zd(this.source,Mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lhe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Fhe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Ihe(o.childName,o.snapshotNode))}),rf(t,i,"child_removed",e,r,n),rf(t,i,"child_added",e,r,n),rf(t,i,"child_moved",s,r,n),rf(t,i,"child_changed",e,r,n),rf(t,i,"value",e,r,n),i}function rf(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>jhe(t,a,c)),o.forEach(a=>{const c=Uhe(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Uhe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function jhe(t,e,n){if(e.childName==null||n.childName==null)throw _h("Should only compare child_ events.");const r=new Xe(e.childName,e.snapshotNode),i=new Xe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t,e){return{eventCache:t,serverCache:e}}function Zf(t,e,n,r){return mT(new $l(e,n,r),t.serverCache)}function L3(t,e,n,r){return mT(t.eventCache,new $l(e,n,r))}function ZI(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wC;const Vhe=()=>(wC||(wC=new Yr(bde)),wC);class Ot{static fromObject(e){let n=new Ot(null);return tr(e,(r,i)=>{n=n.set(new St(r),i)}),n}constructor(e,n=Vhe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:_t(),value:this.value};if(Je(e))return null;{const r=Ye(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Mt(e),n);return s!=null?{path:sn(new St(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const n=Ye(e),r=this.children.get(n);return r!==null?r.subtree(Mt(e)):new Ot(null)}}set(e,n){if(Je(e))return new Ot(n,this.children);{const r=Ye(e),s=(this.children.get(r)||new Ot(null)).set(Mt(e),n),o=this.children.insert(r,s);return new Ot(this.value,o)}}remove(e){if(Je(e))return this.children.isEmpty()?new Ot(null):new Ot(null,this.children);{const n=Ye(e),r=this.children.get(n);if(r){const i=r.remove(Mt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ot(null):new Ot(this.value,s)}else return this}}get(e){if(Je(e))return this.value;{const n=Ye(e),r=this.children.get(n);return r?r.get(Mt(e)):null}}setTree(e,n){if(Je(e))return n;{const r=Ye(e),s=(this.children.get(r)||new Ot(null)).setTree(Mt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ot(this.value,o)}}fold(e){return this.fold_(_t(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(sn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,_t(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Je(e))return null;{const s=Ye(e),o=this.children.get(s);return o?o.findOnPath_(Mt(e),sn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,_t(),n)}foreachOnPath_(e,n,r){if(Je(e))return this;{this.value&&r(n,this.value);const i=Ye(e),s=this.children.get(i);return s?s.foreachOnPath_(Mt(e),sn(n,i),r):new Ot(null)}}foreach(e){this.foreach_(_t(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(sn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.writeTree_=e}static empty(){return new fs(new Ot(null))}}function ep(t,e,n){if(Je(e))return new fs(new Ot(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Qr(i,e);return s=s.updateChild(o,n),new fs(t.writeTree_.set(i,s))}else{const i=new Ot(n),s=t.writeTree_.setTree(e,i);return new fs(s)}}}function eS(t,e,n){let r=t;return tr(n,(i,s)=>{r=ep(r,sn(e,i),s)}),r}function TD(t,e){if(Je(e))return fs.empty();{const n=t.writeTree_.setTree(e,new Ot(null));return new fs(n)}}function tS(t,e){return ou(t,e)!=null}function ou(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qr(n.path,e)):null}function ED(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Yt,(r,i)=>{e.push(new Xe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Xe(r,i.value))}),e}function ac(t,e){if(Je(e))return t;{const n=ou(t,e);return n!=null?new fs(new Ot(n)):new fs(t.writeTree_.subtree(e))}}function nS(t){return t.writeTree_.isEmpty()}function Wd(t,e){return F3(_t(),t.writeTree_,e)}function F3(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ue(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=F3(sn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(sn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e){return $3(e,t)}function $he(t,e,n,r,i){ue(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ep(t.visibleWrites,e,n)),t.lastWriteId=r}function Bhe(t,e,n,r){ue(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=eS(t.visibleWrites,e,n),t.lastWriteId=r}function Hhe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function zhe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ue(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Whe(a,r.path)?i=!1:Fi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Khe(t),!0;if(r.snap)t.visibleWrites=TD(t.visibleWrites,r.path);else{const a=r.children;tr(a,c=>{t.visibleWrites=TD(t.visibleWrites,sn(r.path,c))})}return!0}else return!1}function Whe(t,e){if(t.snap)return Fi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Fi(sn(t.path,n),e))return!0;return!1}function Khe(t){t.visibleWrites=U3(t.allWrites,qhe,_t()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qhe(t){return t.visible}function U3(t,e,n){let r=fs.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Fi(n,o)?(a=Qr(n,o),r=ep(r,a,s.snap)):Fi(o,n)&&(a=Qr(o,n),r=ep(r,_t(),s.snap.getChild(a)));else if(s.children){if(Fi(n,o))a=Qr(n,o),r=eS(r,a,s.children);else if(Fi(o,n))if(a=Qr(o,n),Je(a))r=eS(r,_t(),s.children);else{const c=Md(s.children,Ye(a));if(c){const l=c.getChild(Mt(a));r=ep(r,_t(),l)}}}else throw _h("WriteRecord should have .snap or .children")}}return r}function j3(t,e,n,r,i){if(!r&&!i){const s=ou(t.visibleWrites,e);if(s!=null)return s;{const o=ac(t.visibleWrites,e);if(nS(o))return n;if(n==null&&!tS(o,_t()))return null;{const a=n||Le.EMPTY_NODE;return Wd(o,a)}}}else{const s=ac(t.visibleWrites,e);if(!i&&nS(s))return n;if(!i&&n==null&&!tS(s,_t()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Fi(l.path,e)||Fi(e,l.path))},a=U3(t.allWrites,o,e),c=n||Le.EMPTY_NODE;return Wd(a,c)}}}function Ghe(t,e,n){let r=Le.EMPTY_NODE;const i=ou(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ac(t.visibleWrites,e);return n.forEachChild(Yt,(o,a)=>{const c=Wd(ac(s,new St(o)),a);r=r.updateImmediateChild(o,c)}),ED(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ac(t.visibleWrites,e);return ED(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Qhe(t,e,n,r,i){ue(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=sn(e,n);if(tS(t.visibleWrites,s))return null;{const o=ac(t.visibleWrites,s);return nS(o)?i.getChild(n):Wd(o,i.getChild(n))}}function Yhe(t,e,n,r){const i=sn(e,n),s=ou(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ac(t.visibleWrites,i);return Wd(o,r.getNode().getImmediateChild(n))}else return null}function Jhe(t,e){return ou(t.visibleWrites,e)}function Xhe(t,e,n,r,i,s,o){let a;const c=ac(t.visibleWrites,e),l=ou(c,_t());if(l!=null)a=l;else if(n!=null)a=Wd(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&u.length<i;)d(m,r)!==0&&u.push(m),m=f.getNext();return u}else return[]}function Zhe(){return{visibleWrites:fs.empty(),allWrites:[],lastWriteId:-1}}function v_(t,e,n,r){return j3(t.writeTree,t.treePath,e,n,r)}function MR(t,e){return Ghe(t.writeTree,t.treePath,e)}function CD(t,e,n,r){return Qhe(t.writeTree,t.treePath,e,n,r)}function __(t,e){return Jhe(t.writeTree,sn(t.treePath,e))}function efe(t,e,n,r,i,s){return Xhe(t.writeTree,t.treePath,e,n,r,i,s)}function DR(t,e,n){return Yhe(t.writeTree,t.treePath,e,n)}function V3(t,e){return $3(sn(t.treePath,e),t.writeTree)}function $3(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tfe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ue(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ue(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Zp(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Xp(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Hd(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Zp(r,e.snapshotNode,i.oldSnap));else throw _h("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nfe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const B3=new nfe;class LR{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new $l(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DR(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bl(this.viewCache_),s=efe(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rfe(t){return{filter:t}}function ife(t,e){ue(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function sfe(t,e,n,r,i){const s=new tfe;let o,a;if(n.type===cs.OVERWRITE){const l=n;l.source.fromUser?o=rS(t,e,l.path,l.snap,r,i,s):(ue(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Je(l.path),o=w_(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===cs.MERGE){const l=n;l.source.fromUser?o=afe(t,e,l.path,l.children,r,i,s):(ue(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=iS(t,e,l.path,l.children,r,i,a,s))}else if(n.type===cs.ACK_USER_WRITE){const l=n;l.revert?o=ufe(t,e,l.path,r,i,s):o=cfe(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===cs.LISTEN_COMPLETE)o=lfe(t,e,n.path,r,s);else throw _h("Unknown operation type: "+n.type);const c=s.getChanges();return ofe(e,o,c),{viewCache:o,changes:c}}function ofe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ZI(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(M3(ZI(e)))}}function H3(t,e,n,r,i,s){const o=e.eventCache;if(__(r,n)!=null)return e;{let a,c;if(Je(n))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Bl(e),u=l instanceof Le?l:Le.EMPTY_NODE,d=MR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=v_(r,Bl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Ye(n);if(l===".priority"){ue(Ec(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=CD(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Mt(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const f=CD(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=DR(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Zf(e,a,o.isFullyInitialized()||Je(n),t.filter.filtersNodes())}}function w_(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Je(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),m,null)}else{const m=Ye(n);if(!c.isCompleteForPath(n)&&Ec(n)>1)return e;const _=Mt(n),T=c.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),m,T,_,B3,null)}const d=L3(e,l,c.isFullyInitialized()||Je(n),u.filtersNodes()),f=new LR(i,d,s);return H3(t,d,n,i,f,a)}function rS(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new LR(i,e,s);if(Je(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Zf(e,l,!0,t.filter.filtersNodes());else{const d=Ye(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Zf(e,l,a.isFullyInitialized(),a.isFiltered());else{const f=Mt(n),m=a.getNode().getImmediateChild(d);let _;if(Je(f))_=r;else{const y=u.getCompleteChild(d);y!=null?CR(f)===".priority"&&y.getChild(S3(f)).isEmpty()?_=y:_=y.updateChild(f,r):_=Le.EMPTY_NODE}if(m.equals(_))c=e;else{const y=t.filter.updateChild(a.getNode(),d,_,f,u,o);c=Zf(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function bD(t,e){return t.eventCache.isCompleteForChild(e)}function afe(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=sn(n,c);bD(e,Ye(u))&&(a=rS(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=sn(n,c);bD(e,Ye(u))||(a=rS(t,a,u,l,i,s,o))}),a}function ID(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function iS(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Je(n)?l=r:l=new Ot(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),_=ID(t,m,f);c=w_(t,c,new St(d),_,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!m){const _=e.serverCache.getNode().getImmediateChild(d),y=ID(t,_,f);c=w_(t,c,new St(d),y,i,s,o,a)}}),c}function cfe(t,e,n,r,i,s,o){if(__(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Je(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return w_(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Je(n)){let l=new Ot(null);return c.getNode().forEachChild(Tl,(u,d)=>{l=l.set(new St(u),d)}),iS(t,e,n,l,i,s,a,o)}else return e}else{let l=new Ot(null);return r.foreach((u,d)=>{const f=sn(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),iS(t,e,n,l,i,s,a,o)}}function lfe(t,e,n,r,i){const s=e.serverCache,o=L3(e,s.getNode(),s.isFullyInitialized()||Je(n),s.isFiltered());return H3(t,o,n,r,B3,i)}function ufe(t,e,n,r,i,s){let o;if(__(r,n)!=null)return e;{const a=new LR(r,e,i),c=e.eventCache.getNode();let l;if(Je(n)||Ye(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=v_(r,Bl(e));else{const d=e.serverCache.getNode();ue(d instanceof Le,"serverChildren would be complete if leaf node"),u=MR(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{const u=Ye(n);let d=DR(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Mt(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Le.EMPTY_NODE,Mt(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=v_(r,Bl(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||__(r,_t())!=null,Zf(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dfe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kR(r.getIndex()),s=Ahe(r);this.processor_=rfe(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(Le.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(Le.EMPTY_NODE,a.getNode(),null),u=new $l(c,o.isFullyInitialized(),i.filtersNodes()),d=new $l(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=mT(d,u),this.eventGenerator_=new Lhe(this.query_)}get query(){return this.query_}}function hfe(t){return t.viewCache_.serverCache.getNode()}function ffe(t,e){const n=Bl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Je(e)&&!n.getImmediateChild(Ye(e)).isEmpty())?n.getChild(e):null}function SD(t){return t.eventRegistrations_.length===0}function pfe(t,e){t.eventRegistrations_.push(e)}function AD(t,e,n){const r=[];if(n){ue(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function kD(t,e,n,r){e.type===cs.MERGE&&e.source.queryId!==null&&(ue(Bl(t.viewCache_),"We should always have a full cache before handling merges"),ue(ZI(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=sfe(t.processor_,i,e,n,r);return ife(t.processor_,s.viewCache),ue(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,z3(t,s.changes,s.viewCache.eventCache.getNode(),null)}function mfe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,(s,o)=>{r.push(Hd(s,o))}),n.isFullyInitialized()&&r.push(M3(n.getNode())),z3(t,r,n.getNode(),e)}function z3(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Fhe(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T_;class gfe{constructor(){this.views=new Map}}function yfe(t){ue(!T_,"__referenceConstructor has already been defined"),T_=t}function vfe(){return ue(T_,"Reference.ts has not been loaded"),T_}function _fe(t){return t.views.size===0}function FR(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ue(s!=null,"SyncTree gave us an op for an invalid query."),kD(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(kD(o,e,n,r));return s}}function wfe(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=v_(n,i?r:null),c=!1;a?c=!0:r instanceof Le?(a=MR(n,r),c=!1):(a=Le.EMPTY_NODE,c=!1);const l=mT(new $l(a,c,!1),new $l(r,i,!1));return new dfe(e,l)}return o}function Tfe(t,e,n,r,i,s){const o=wfe(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),pfe(o,n),mfe(o,n)}function Efe(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Cc(t);if(i==="default")for(const[c,l]of t.views.entries())o=o.concat(AD(l,n,r)),SD(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=t.views.get(i);c&&(o=o.concat(AD(c,n,r)),SD(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Cc(t)&&s.push(new(vfe())(e._repo,e._path)),{removed:s,events:o}}function W3(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function dd(t,e){let n=null;for(const r of t.views.values())n=n||ffe(r,e);return n}function K3(t,e){if(e._queryParams.loadsAllData())return gT(t);{const r=e._queryIdentifier;return t.views.get(r)}}function q3(t,e){return K3(t,e)!=null}function Cc(t){return gT(t)!=null}function gT(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E_;function Cfe(t){ue(!E_,"__referenceConstructor has already been defined"),E_=t}function bfe(){return ue(E_,"Reference.ts has not been loaded"),E_}let Ife=1;class RD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ot(null),this.pendingWriteTree_=Zhe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function G3(t,e,n,r,i){return $he(t.pendingWriteTree_,e,n,r,i),i?Rh(t,new Vl(xR(),e,n)):[]}function Sfe(t,e,n,r){Bhe(t.pendingWriteTree_,e,n,r);const i=Ot.fromObject(n);return Rh(t,new zd(xR(),e,i))}function Va(t,e,n=!1){const r=Hhe(t.pendingWriteTree_,e);if(zhe(t.pendingWriteTree_,e)){let s=new Ot(null);return r.snap!=null?s=s.set(_t(),!0):tr(r.children,o=>{s=s.set(new St(o),!0)}),Rh(t,new y_(r.path,s,n))}else return[]}function yT(t,e,n){return Rh(t,new Vl(PR(),e,n))}function Afe(t,e,n){const r=Ot.fromObject(n);return Rh(t,new zd(PR(),e,r))}function kfe(t,e){return Rh(t,new tm(PR(),e))}function Rfe(t,e,n){const r=jR(t,n);if(r){const i=VR(r),s=i.path,o=i.queryId,a=Qr(s,e),c=new tm(NR(o),a);return $R(t,s,c)}else return[]}function sS(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||q3(o,e))){const c=Efe(o,e,n,r);_fe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,m)=>Cc(m));if(u&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const m=Nfe(f);for(let _=0;_<m.length;++_){const y=m[_],T=y.query,E=J3(t,y);t.listenProvider_.startListening(tp(T),C_(t,T),E.hashFn,E.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(tp(e),null):l.forEach(f=>{const m=t.queryToTagMap.get(vT(f));t.listenProvider_.stopListening(tp(f),m)}))}Ofe(t,l)}return a}function xfe(t,e,n,r){const i=jR(t,r);if(i!=null){const s=VR(i),o=s.path,a=s.queryId,c=Qr(o,e),l=new Vl(NR(a),c,n);return $R(t,o,l)}else return[]}function Pfe(t,e,n,r){const i=jR(t,r);if(i){const s=VR(i),o=s.path,a=s.queryId,c=Qr(o,e),l=Ot.fromObject(n),u=new zd(NR(a),c,l);return $R(t,o,u)}else return[]}function xD(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,m)=>{const _=Qr(f,i);s=s||dd(m,_),o=o||Cc(m)});let a=t.syncPointTree_.get(i);a?(o=o||Cc(a),s=s||dd(a,_t())):(a=new gfe,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=Le.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,_)=>{const y=dd(_,_t());y&&(s=s.updateImmediateChild(m,y))}));const l=q3(a,e);if(!l&&!e._queryParams.loadsAllData()){const f=vT(e);ue(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=Mfe();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const u=OR(t.pendingWriteTree_,i);let d=Tfe(a,e,n,u,s,c);if(!l&&!o&&!r){const f=K3(a,e);d=d.concat(Dfe(t,e,f))}return d}function UR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Qr(o,e),l=dd(a,c);if(l)return l});return j3(i,e,s,n,!0)}function Rh(t,e){return Q3(e,t.syncPointTree_,null,OR(t.pendingWriteTree_,_t()))}function Q3(t,e,n,r){if(Je(t.path))return Y3(t,e,n,r);{const i=e.get(_t());n==null&&i!=null&&(n=dd(i,_t()));let s=[];const o=Ye(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=V3(r,o);s=s.concat(Q3(a,c,l,u))}return i&&(s=s.concat(FR(i,t,r,n))),s}}function Y3(t,e,n,r){const i=e.get(_t());n==null&&i!=null&&(n=dd(i,_t()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=V3(r,o),u=t.operationForChild(o);u&&(s=s.concat(Y3(u,a,c,l)))}),i&&(s=s.concat(FR(i,t,r,n))),s}function J3(t,e){const n=e.query,r=C_(t,n);return{hashFn:()=>(hfe(e)||Le.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Rfe(t,n._path,r):kfe(t,n._path);{const s=Ade(i,n);return sS(t,n,null,s)}}}}function C_(t,e){const n=vT(e);return t.queryToTagMap.get(n)}function vT(t){return t._path.toString()+"$"+t._queryIdentifier}function jR(t,e){return t.tagToQueryMap.get(e)}function VR(t){const e=t.indexOf("$");return ue(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new St(t.substr(0,e))}}function $R(t,e,n){const r=t.syncPointTree_.get(e);ue(r,"Missing sync point for query tag that we're tracking");const i=OR(t.pendingWriteTree_,e);return FR(r,n,i,null)}function Nfe(t){return t.fold((e,n,r)=>{if(n&&Cc(n))return[gT(n)];{let i=[];return n&&(i=W3(n)),tr(r,(s,o)=>{i=i.concat(o)}),i}})}function tp(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(bfe())(t._repo,t._path):t}function Ofe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=vT(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Mfe(){return Ife++}function Dfe(t,e,n){const r=e._path,i=C_(t,e),s=J3(t,n),o=t.listenProvider_.startListening(tp(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)ue(!Cc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Je(l)&&u&&Cc(u))return[gT(u).query];{let f=[];return u&&(f=f.concat(W3(u).map(m=>m.query))),tr(d,(m,_)=>{f=f.concat(_)}),f}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(tp(u),C_(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new BR(n)}node(){return this.node_}}class HR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=sn(this.path_,e);return new HR(this.syncTree_,n)}node(){return UR(this.syncTree_,this.path_)}}const Lfe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},PD=function(t,e,n){if(!t||typeof t!="object")return t;if(ue(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Ffe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Ufe(t[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Ffe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ue(!1,"Unexpected server value: "+t)}},Ufe=function(t,e,n){t.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ue(!1,"Unexpected increment value: "+r);const i=e.node();if(ue(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},X3=function(t,e,n,r){return zR(e,new HR(n,t),r)},Z3=function(t,e,n){return zR(t,new BR(e),n)};function zR(t,e,n){const r=t.getPriority().val(),i=PD(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=PD(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Mn(a,jn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Mn(i))),o.forEachChild(Yt,(a,c)=>{const l=zR(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function KR(t,e){let n=e instanceof St?e:new St(e),r=t,i=Ye(n);for(;i!==null;){const s=Md(r.node.children,i)||{children:{},childCount:0};r=new WR(i,r,s),n=Mt(n),i=Ye(n)}return r}function xh(t){return t.node.value}function e6(t,e){t.node.value=e,oS(t)}function t6(t){return t.node.childCount>0}function jfe(t){return xh(t)===void 0&&!t6(t)}function _T(t,e){tr(t.node.children,(n,r)=>{e(new WR(n,t,r))})}function n6(t,e,n,r){n&&!r&&e(t),_T(t,i=>{n6(i,e,!0,r)}),n&&r&&e(t)}function Vfe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Qm(t){return new St(t.parent===null?t.name:Qm(t.parent)+"/"+t.name)}function oS(t){t.parent!==null&&$fe(t.parent,t.name,t)}function $fe(t,e,n){const r=jfe(n),i=ho(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,oS(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,oS(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bfe=/[\[\].#$\/\u0000-\u001F\u007F]/,Hfe=/[\[\].#$\u0000-\u001F\u007F]/,TC=10*1024*1024,qR=function(t){return typeof t=="string"&&t.length!==0&&!Bfe.test(t)},r6=function(t){return typeof t=="string"&&t.length!==0&&!Hfe.test(t)},zfe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),r6(t)},aS=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!vR(t)||t&&typeof t=="object"&&ho(t,".sv")},i6=function(t,e,n,r){r&&e===void 0||wT(Hw(t,"value"),e,n)},wT=function(t,e,n){const r=n instanceof St?new ahe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qc(r));if(typeof e=="function")throw new Error(t+"contains a function "+qc(r)+" with contents = "+e.toString());if(vR(e))throw new Error(t+"contains "+e.toString()+" "+qc(r));if(typeof e=="string"&&e.length>TC/3&&zw(e)>TC)throw new Error(t+"contains a string greater than "+TC+" utf8 bytes "+qc(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(tr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qR(o)))throw new Error(t+" contains an invalid key ("+o+") "+qc(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);che(r,o),wT(t,a,r),lhe(r)}),i&&s)throw new Error(t+' contains ".value" child '+qc(r)+" in addition to actual children.")}},Wfe=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Jp(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!qR(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(ohe);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Fi(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Kfe=function(t,e,n,r){const i=Hw(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];tr(e,(o,a)=>{const c=new St(o);if(wT(i,a,sn(n,c)),CR(c)===".priority"&&!aS(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),Wfe(i,s)},GR=function(t,e,n,r){if(!r6(n))throw new Error(Hw(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},qfe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GR(t,e,n)},s6=function(t,e){if(Ye(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Gfe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zfe(n))throw new Error(Hw(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function TT(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!bR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function o6(t,e,n){TT(t,n),a6(t,r=>bR(r,e))}function Ts(t,e,n){TT(t,n),a6(t,r=>Fi(r,e)||Fi(e,r))}function a6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Yfe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Yfe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Jf&&Qn("event: "+n.toString()),kh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jfe="repo_interrupt",Xfe=25;class Zfe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qfe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=g_(),this.transactionQueueTree_=new WR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function epe(t,e,n){if(t.stats_=TR(t.repoInfo_),t.forceRestClient_||Pde())t.server_=new m_(t.repoInfo_,(r,i,s,o)=>{ND(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>OD(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Vn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Bo(t.repoInfo_,e,(r,i,s,o)=>{ND(t,r,i,s,o)},r=>{OD(t,r)},r=>{tpe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Lde(t.repoInfo_,()=>new Dhe(t.stats_,t.server_)),t.infoData_=new xhe,t.infoSyncTree_=new RD({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=yT(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),QR(t,"connected",!1),t.serverSyncTree_=new RD({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);Ts(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function c6(t){const n=t.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ET(t){return Lfe({timestamp:c6(t)})}function ND(t,e,n,r,i){t.dataUpdateCount++;const s=new St(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=qv(n,l=>jn(l));o=Pfe(t.serverSyncTree_,s,c,i)}else{const c=jn(n);o=xfe(t.serverSyncTree_,s,c,i)}else if(r){const c=qv(n,l=>jn(l));o=Afe(t.serverSyncTree_,s,c)}else{const c=jn(n);o=yT(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Kd(t,s)),Ts(t.eventQueue_,a,o)}function OD(t,e){QR(t,"connected",e),e===!1&&ipe(t)}function tpe(t,e){tr(e,(n,r)=>{QR(t,n,r)})}function QR(t,e,n){const r=new St("/.info/"+e),i=jn(n);t.infoData_.updateSnapshot(r,i);const s=yT(t.infoSyncTree_,r,i);Ts(t.eventQueue_,r,s)}function YR(t){return t.nextWriteId_++}function npe(t,e,n,r,i){CT(t,"set",{path:e.toString(),value:n,priority:r});const s=ET(t),o=jn(n,r),a=UR(t.serverSyncTree_,e),c=Z3(o,a,s),l=YR(t),u=G3(t.serverSyncTree_,e,c,l,!0);TT(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const _=f==="ok";_||Pr("set at "+e+" failed: "+f);const y=Va(t.serverSyncTree_,l,!_);Ts(t.eventQueue_,e,y),lS(t,i,f,m)});const d=XR(t,e);Kd(t,d),Ts(t.eventQueue_,d,[])}function rpe(t,e,n,r){CT(t,"update",{path:e.toString(),value:n});let i=!0;const s=ET(t),o={};if(tr(n,(a,c)=>{i=!1,o[a]=X3(sn(e,a),jn(c),t.serverSyncTree_,s)}),i)Qn("update() called with empty data.  Don't do anything."),lS(t,r,"ok",void 0);else{const a=YR(t),c=Sfe(t.serverSyncTree_,e,o,a);TT(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||Pr("update at "+e+" failed: "+l);const f=Va(t.serverSyncTree_,a,!d),m=f.length>0?Kd(t,e):e;Ts(t.eventQueue_,m,f),lS(t,r,l,u)}),tr(n,l=>{const u=XR(t,sn(e,l));Kd(t,u)}),Ts(t.eventQueue_,e,[])}}function ipe(t){CT(t,"onDisconnectEvents");const e=ET(t),n=g_();XI(t.onDisconnect_,_t(),(i,s)=>{const o=X3(i,s,t.serverSyncTree_,e);D3(n,i,o)});let r=[];XI(n,_t(),(i,s)=>{r=r.concat(yT(t.serverSyncTree_,i,s));const o=XR(t,i);Kd(t,o)}),t.onDisconnect_=g_(),Ts(t.eventQueue_,_t(),r)}function spe(t,e,n){let r;Ye(e._path)===".info"?r=xD(t.infoSyncTree_,e,n):r=xD(t.serverSyncTree_,e,n),o6(t.eventQueue_,e._path,r)}function cS(t,e,n){let r;Ye(e._path)===".info"?r=sS(t.infoSyncTree_,e,n):r=sS(t.serverSyncTree_,e,n),o6(t.eventQueue_,e._path,r)}function ope(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Jfe)}function CT(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Qn(n,...e)}function lS(t,e,n,r){e&&kh(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function l6(t,e,n){return UR(t.serverSyncTree_,e,n)||Le.EMPTY_NODE}function JR(t,e=t.transactionQueueTree_){if(e||bT(t,e),xh(e)){const n=d6(t,e);ue(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&ape(t,Qm(e),n)}else t6(e)&&_T(e,n=>{JR(t,n)})}function ape(t,e,n){const r=n.map(l=>l.currentWriteId),i=l6(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];ue(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Qr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{CT(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Va(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();bT(t,KR(t.transactionQueueTree_,e)),JR(t,t.transactionQueueTree_),Ts(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)kh(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Pr("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Kd(t,e)}},o)}function Kd(t,e){const n=u6(t,e),r=Qm(n),i=d6(t,n);return cpe(t,i,r),r}function cpe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Qr(n,c.path);let u=!1,d;if(ue(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Va(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Xfe)u=!0,d="maxretry",i=i.concat(Va(t.serverSyncTree_,c.currentWriteId,!0));else{const f=l6(t,c.path,o);c.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){wT("transaction failed: Data returned ",m,c.path);let _=jn(m);typeof m=="object"&&m!=null&&ho(m,".priority")||(_=_.updatePriority(f.getPriority()));const T=c.currentWriteId,E=ET(t),w=Z3(_,f,E);c.currentOutputSnapshotRaw=_,c.currentOutputSnapshotResolved=w,c.currentWriteId=YR(t),o.splice(o.indexOf(T),1),i=i.concat(G3(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),i=i.concat(Va(t.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(Va(t.serverSyncTree_,c.currentWriteId,!0))}Ts(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}bT(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)kh(r[a]);JR(t,t.transactionQueueTree_)}function u6(t,e){let n,r=t.transactionQueueTree_;for(n=Ye(e);n!==null&&xh(r)===void 0;)r=KR(r,n),e=Mt(e),n=Ye(e);return r}function d6(t,e){const n=[];return h6(t,e,n),n.sort((r,i)=>r.order-i.order),n}function h6(t,e,n){const r=xh(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);_T(e,i=>{h6(t,i,n)})}function bT(t,e){const n=xh(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,e6(e,n.length>0?n:void 0)}_T(e,r=>{bT(t,r)})}function XR(t,e){const n=Qm(u6(t,e)),r=KR(t.transactionQueueTree_,e);return Vfe(r,i=>{EC(t,i)}),EC(t,r),n6(r,i=>{EC(t,i)}),n}function EC(t,e){const n=xh(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ue(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ue(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Va(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?e6(e,void 0):n.length=s+1,Ts(t.eventQueue_,Qm(e),i);for(let o=0;o<r.length;o++)kh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function upe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pr(`Invalid query segment '${n}' in query '${t}'`)}return e}const MD=function(t,e){const n=dpe(t),r=n.namespace;n.domain==="firebase.com"&&ta(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ta("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ede();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new y3(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new St(n.pathString)}},dpe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=lpe(t.substring(u,d)));const f=upe(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const m=e.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hpe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=DD.charAt(n%64),n=Math.floor(n/64);ue(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=DD.charAt(e[i]);return ue(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Vn(this.snapshot.exportVal())}}class p6{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Je(this._path)?null:CR(this._path)}get ref(){return new aa(this._repo,this._path)}get _queryIdentifier(){const e=_D(this._queryParams),n=_R(e);return n==="{}"?"default":n}get _queryObject(){return _D(this._queryParams)}isEqual(e){if(e=$e(e),!(e instanceof Ym))return!1;const n=this._repo===e._repo,r=bR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+she(this._path)}}function fpe(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ppe(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Tl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==jl)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Tc)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Yt){if(e!=null&&!aS(e)||n!=null&&!aS(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ue(t.getIndex()instanceof AR||t.getIndex()===O3,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class aa extends Ym{constructor(e,n){super(e,n,new RR,!1)}get parent(){const e=S3(this._path);return e===null?null:new aa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class nm{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new St(e),r=qd(this.ref,e);return new nm(this._node.getChild(n),r,Yt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new nm(i,qd(this.ref,r),Yt)))}hasChild(e){const n=new St(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pu(t,e){return t=$e(t),t._checkNotDeleted("ref"),e!==void 0?qd(t._root,e):t._root}function qd(t,e){return t=$e(t),Ye(t._path)===null?qfe("child","path",e):GR("child","path",e),new aa(t._repo,sn(t._path,e))}function mIe(t,e){t=$e(t),s6("push",t._path),i6("push",e,t._path,!0);const n=c6(t._repo),r=hpe(n),i=qd(t,r),s=qd(t,r);let o;return e!=null?o=uS(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function uS(t,e){t=$e(t),s6("set",t._path),i6("set",e,t._path,!1);const n=new Am;return npe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function mpe(t,e){Kfe("update",e,t._path);const n=new Am;return rpe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class IT{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new f6("value",this,new nm(e.snapshotNode,new aa(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new p6(this,e,n):null}matches(e){return e instanceof IT?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class ST{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new p6(this,e,n):null}createEvent(e,n){ue(e.childName!=null,"Child events should have a childName.");const r=qd(new aa(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new f6(e.type,this,new nm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ST?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function g6(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,l=(u,d)=>{cS(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}const o=new m6(n,s||void 0),a=e==="value"?new IT(o):new ST(e,o);return spe(t._repo,t,a),()=>cS(t._repo,t,a)}function LD(t,e,n,r){return g6(t,"value",e,n,r)}function gpe(t,e,n,r){return g6(t,"child_added",e,n,r)}function y6(t,e,n){let r=null;const i=n?new m6(n):null;e==="value"?r=new IT(i):e&&(r=new ST(e,i)),cS(t._repo,t,r)}class v6{}class ype extends v6{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ym(e._repo,e._path,khe(e._queryParams,this._limit),e._orderByCalled)}}function vpe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ype(t)}class _pe extends v6{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){fpe(e,"orderByChild");const n=new St(this._path);if(Je(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new AR(n),i=Rhe(e._queryParams,r);return ppe(i),new Ym(e._repo,e._path,i,!0)}}function wpe(t){return GR("orderByChild","path",t),new _pe(t)}function FD(t,...e){let n=$e(t);for(const r of e)n=r._apply(n);return n}yfe(aa);Cfe(aa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tpe="FIREBASE_DATABASE_EMULATOR_HOST",dS={};let Epe=!1;function Cpe(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=Es(s);t.repoInfo_=new y3(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function bpe(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ta("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=MD(s,i),a=o.repoInfo,c;typeof process<"u"&&tD&&(c=tD[Tpe]),c?(s=`http://${c}?ns=${a.namespace}`,o=MD(s,i),a=o.repoInfo):o.repoInfo.secure;const l=new Ode(t.name,t.options,e);Gfe("Invalid Firebase Database URL",o),Je(o.path)||ta("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Spe(a,t,l,new Nde(t,n));return new Ape(u,t)}function Ipe(t,e){const n=dS[e];(!n||n[t.key]!==t)&&ta(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ope(t),delete n[t.key]}function Spe(t,e,n,r){let i=dS[e.name];i||(i={},dS[e.name]=i);let s=i[t.toURLString()];return s&&ta("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Zfe(t,Epe,n,r),i[t.toURLString()]=s,s}class Ape{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(epe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new aa(this._repo,_t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ipe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ta("Cannot call "+e+" on a deleted database.")}}function kpe(t=Oc(),e){const n=Cs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Bw("database");r&&Rpe(n,...r)}return n}function Rpe(t,e,n,r={}){t=$e(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&so(r,s.repoInfo_.emulatorOptions))return;ta("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&ta('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ly(Ly.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:g0(r.mockUserToken,t.app.options.projectId);o=new Ly(a)}Es(e)&&(km(e),Rm("Database",!0)),Cpe(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xpe(t){gde(Nc),Nr(new yr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return bpe(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),In(nD,rD,t),In(nD,rD,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ppe={".sv":"timestamp"};function gIe(){return Ppe}Bo.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bo.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};xpe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="firebasestorage.googleapis.com",w6="storageBucket",Npe=2*60*1e3,Ope=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends Si{constructor(e,n,r=0){super(CC(e),`Firebase Storage: ${n} (${CC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return CC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cn||(cn={}));function CC(t){return"storage/"+t}function ZR(){const t="An unknown error occurred, please check the error payload for server response.";return new ln(cn.UNKNOWN,t)}function Mpe(t){return new ln(cn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Dpe(t){return new ln(cn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Lpe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ln(cn.UNAUTHENTICATED,t)}function Fpe(){return new ln(cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Upe(t){return new ln(cn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jpe(){return new ln(cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vpe(){return new ln(cn.CANCELED,"User canceled the upload/download.")}function $pe(t){return new ln(cn.INVALID_URL,"Invalid URL '"+t+"'.")}function Bpe(t){return new ln(cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hpe(){return new ln(cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+w6+"' property when initializing the app?")}function zpe(){return new ln(cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wpe(){return new ln(cn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Kpe(t){return new ln(cn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hS(t){return new ln(cn.INVALID_ARGUMENT,t)}function T6(){return new ln(cn.APP_DELETED,"The Firebase app was deleted.")}function qpe(t){return new ln(cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function np(t,e){return new ln(cn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function sf(t){throw new ln(cn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fi.makeFromUrl(e,n)}catch{return new fi(e,"")}if(r.path==="")return r;throw Bpe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),_={bucket:1,path:3},y=n===_6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",E=new RegExp(`^https?://${y}/${i}/${T}`,"i"),C=[{regex:a,indices:c,postModify:s},{regex:m,indices:_,postModify:l},{regex:E,indices:{bucket:1,path:2},postModify:l}];for(let S=0;S<C.length;S++){const M=C[S],D=M.regex.exec(e);if(D){const A=D[M.indices.bucket];let I=D[M.indices.path];I||(I=""),r=new fi(A,I),M.postModify(r);break}}if(r==null)throw $pe(e);return r}}class Gpe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qpe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...T){l||(l=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(m,c())},T)}function f(){s&&clearTimeout(s)}function m(T,...E){if(l){f();return}if(T){f(),u.call(null,T,...E);return}if(c()||o){f(),u.call(null,T,...E);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,d(C)}let _=!1;function y(T){_||(_=!0,f(),!l&&(i!==null?(T||(a=2),clearTimeout(i),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function Ype(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jpe(t){return t!==void 0}function Xpe(t){return typeof t=="object"&&!Array.isArray(t)}function ex(t){return typeof t=="string"||t instanceof String}function UD(t){return tx()&&t instanceof Blob}function tx(){return typeof Blob<"u"}function jD(t,e,n,r){if(r<e)throw hS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hS(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function E6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var El;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(El||(El={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zpe(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eme{constructor(e,n,r,i,s,o,a,c,l,u,d,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ty(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===El.NO_ERROR,c=s.getStatus();if(!a||Zpe(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===El.ABORT;r(!1,new ty(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new ty(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());Jpe(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=ZR();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?T6():Vpe();o(c)}else{const c=jpe();o(c)}};this.canceled_?n(!1,new ty(!1,null,!0)):this.backoffId_=Qpe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ype(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ty{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tme(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nme(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rme(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ime(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sme(t,e,n,r,i,s,o=!0,a=!1){const c=E6(t.urlParams),l=t.url+c,u=Object.assign({},t.headers);return rme(u,e),tme(u,n),nme(u,s),ime(u,r),new eme(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ome(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ame(...t){const e=ome();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(tx())return new Blob(t);throw new ln(cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cme(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lme(t){if(typeof atob>"u")throw Kpe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bC{constructor(e,n){this.data=e,this.contentType=n||null}}function ume(t,e){switch(t){case Hs.RAW:return new bC(C6(e));case Hs.BASE64:case Hs.BASE64URL:return new bC(b6(t,e));case Hs.DATA_URL:return new bC(hme(e),fme(e))}throw ZR()}function C6(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dme(t){let e;try{e=decodeURIComponent(t)}catch{throw np(Hs.DATA_URL,"Malformed data URL.")}return C6(e)}function b6(t,e){switch(t){case Hs.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw np(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hs.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw np(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lme(e)}catch(i){throw i.message.includes("polyfill")?i:np(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class I6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw np(Hs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pme(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hme(t){const e=new I6(t);return e.base64?b6(Hs.BASE64,e.rest):dme(e.rest)}function fme(t){return new I6(t).contentType}function pme(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){let r=0,i="";UD(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(UD(this.data_)){const r=this.data_,i=cme(r,e,n);return i===null?null:new ka(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ka(r,!0)}}static getBlob(...e){if(tx()){const n=e.map(r=>r instanceof ka?r.data_:r);return new ka(ame.apply(null,n))}else{const n=e.map(o=>ex(o)?ume(Hs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ka(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){let e;try{e=JSON.parse(t)}catch{return null}return Xpe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mme(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gme(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function A6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yme(t,e){return e}class _r{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||yme}}let ny=null;function vme(t){return!ex(t)||t.length<2?t:A6(t)}function k6(){if(ny)return ny;const t=[];t.push(new _r("bucket")),t.push(new _r("generation")),t.push(new _r("metageneration")),t.push(new _r("name","fullPath",!0));function e(s,o){return vme(o)}const n=new _r("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new _r("size");return i.xform=r,t.push(i),t.push(new _r("timeCreated")),t.push(new _r("updated")),t.push(new _r("md5Hash",null,!0)),t.push(new _r("cacheControl",null,!0)),t.push(new _r("contentDisposition",null,!0)),t.push(new _r("contentEncoding",null,!0)),t.push(new _r("contentLanguage",null,!0)),t.push(new _r("contentType",null,!0)),t.push(new _r("metadata","customMetadata",!0)),ny=t,ny}function _me(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new fi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function wme(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return _me(r,t),r}function R6(t,e,n){const r=S6(e);return r===null?null:wme(t,r,n)}function Tme(t,e,n,r){const i=S6(e);if(i===null||!ex(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),m=AT(f,n,r),_=E6({alt:"media",token:l});return m+_})[0]}function Eme(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class nx{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){if(!t)throw ZR()}function Cme(t,e){function n(r,i){const s=R6(t,i,e);return x6(s!==null),s}return n}function bme(t,e){function n(r,i){const s=R6(t,i,e);return x6(s!==null),Tme(s,i,t.host,t._protocol)}return n}function P6(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Fpe():i=Lpe():n.getStatus()===402?i=Dpe(t.bucket):n.getStatus()===403?i=Upe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function N6(t){const e=P6(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Mpe(t.path)),s.serverResponse=i.serverResponse,s}return n}function Ime(t,e,n){const r=e.fullServerUrl(),i=AT(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new nx(i,s,bme(t,n),o);return a.errorHandler=N6(e),a}function Sme(t,e){const n=e.fullServerUrl(),r=AT(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(c,l){}const a=new nx(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=N6(e),a}function Ame(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function kme(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Ame(null,e)),r}function Rme(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let S=0;S<2;S++)C=C+Math.random().toString().slice(2);return C}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=kme(e,r,i),u=Eme(l,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=ka.getBlob(d,r,f);if(m===null)throw zpe();const _={name:l.fullPath},y=AT(s,t.host,t._protocol),T="POST",E=t.maxUploadRetryTime,w=new nx(y,T,Cme(t,n),E);return w.urlParams=_,w.headers=o,w.body=m.uploadData(),w.errorHandler=P6(e),w}class xme{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=El.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=El.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=El.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw sf("cannot .send() more than once");if(Es(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Pme extends xme{initXhr(){this.xhr_.responseType="text"}}function rx(){return new Pme}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this._service=e,n instanceof fi?this._location=n:this._location=fi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Hl(e,n)}get root(){const e=new fi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A6(this._location.path)}get storage(){return this._service}get parent(){const e=mme(this._location.path);if(e===null)return null;const n=new fi(this._location.bucket,e);return new Hl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qpe(e)}}function Nme(t,e,n){t._throwIfRoot("uploadBytes");const r=Rme(t.storage,t._location,k6(),new ka(e,!0),n);return t.storage.makeRequestWithTokens(r,rx).then(i=>({metadata:i,ref:t}))}function Ome(t){t._throwIfRoot("getDownloadURL");const e=Ime(t.storage,t._location,k6());return t.storage.makeRequestWithTokens(e,rx).then(n=>{if(n===null)throw Wpe();return n})}function Mme(t){t._throwIfRoot("deleteObject");const e=Sme(t.storage,t._location);return t.storage.makeRequestWithTokens(e,rx)}function Dme(t,e){const n=gme(t._location.path,e),r=new fi(t._location.bucket,n);return new Hl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lme(t){return/^[A-Za-z]+:\/\//.test(t)}function Fme(t,e){return new Hl(t,e)}function O6(t,e){if(t instanceof ix){const n=t;if(n._bucket==null)throw Hpe();const r=new Hl(n,n._bucket);return e!=null?O6(r,e):r}else return e!==void 0?Dme(t,e):t}function Ume(t,e){if(e&&Lme(e)){if(t instanceof ix)return Fme(t,e);throw hS("To use ref(service, url), the first argument must be a Storage instance.")}else return O6(t,e)}function VD(t,e){const n=e==null?void 0:e[w6];return n==null?null:fi.makeFromBucketSpec(n,t)}function jme(t,e,n,r={}){t.host=`${e}:${n}`;const i=Es(e);i&&(km(`https://${t.host}/b`),Rm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:g0(s,t.app.options.projectId))}class ix{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=_6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Npe,this._maxUploadRetryTime=Ope,this._requests=new Set,i!=null?this._bucket=fi.makeFromBucketSpec(i,this._host):this._bucket=VD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fi.makeFromBucketSpec(this._url,e):this._bucket=VD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Gpe(T6());{const o=sme(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const $D="@firebase/storage",BD="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6="storage";function Vme(t,e,n){return t=$e(t),Nme(t,e,n)}function $me(t){return t=$e(t),Ome(t)}function Bme(t){return t=$e(t),Mme(t)}function HD(t,e){return t=$e(t),Ume(t,e)}function Hme(t=Oc(),e){t=$e(t);const r=Cs(t,M6).getImmediate({identifier:e}),i=Bw("storage");return i&&zme(r,...i),r}function zme(t,e,n,r={}){jme(t,e,n,r)}function Wme(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ix(n,r,i,e,Nc)}function Kme(){Nr(new yr(M6,Wme,"PUBLIC").setMultipleInstances(!0)),In($D,BD,""),In($D,BD,"esm2020")}Kme();const D6="@firebase/installations",sx="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=1e4,F6=`w:${sx}`,U6="FIS_v2",qme="https://firebaseinstallations.googleapis.com/v1",Gme=60*60*1e3,Qme="installations",Yme="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zl=new Pc(Qme,Yme,Jme);function j6(t){return t instanceof Si&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6({projectId:t}){return`${qme}/projects/${t}/installations`}function $6(t){return{token:t.token,requestStatus:2,expiresIn:Zme(t.expiresIn),creationTime:Date.now()}}async function B6(t,e){const r=(await e.json()).error;return zl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function H6({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Xme(t,{refreshToken:e}){const n=H6(t);return n.append("Authorization",ege(e)),n}async function z6(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Zme(t){return Number(t.replace("s","000"))}function ege(t){return`${U6} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tge({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=V6(t),i=H6(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={fid:n,authVersion:U6,appId:t.appId,sdkVersion:F6},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await z6(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:$6(l.authToken)}}else throw await B6("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nge(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rge=/^[cdef][\w-]{21}$/,fS="";function ige(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=sge(t);return rge.test(n)?n:fS}catch{return fS}}function sge(t){return nge(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=new Map;function q6(t,e){const n=kT(t);G6(n,e),oge(n,e)}function G6(t,e){const n=K6.get(t);if(n)for(const r of n)r(e)}function oge(t,e){const n=age();n&&n.postMessage({key:t,fid:e}),cge()}let cl=null;function age(){return!cl&&"BroadcastChannel"in self&&(cl=new BroadcastChannel("[Firebase] FID Change"),cl.onmessage=t=>{G6(t.data.key,t.data.fid)}),cl}function cge(){K6.size===0&&cl&&(cl.close(),cl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lge="firebase-installations-database",uge=1,Wl="firebase-installations-store";let IC=null;function ox(){return IC||(IC=Ww(lge,uge,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wl)}}})),IC}async function b_(t,e){const n=kT(t),i=(await ox()).transaction(Wl,"readwrite"),s=i.objectStore(Wl),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&q6(t,e.fid),e}async function Q6(t){const e=kT(t),r=(await ox()).transaction(Wl,"readwrite");await r.objectStore(Wl).delete(e),await r.done}async function RT(t,e){const n=kT(t),i=(await ox()).transaction(Wl,"readwrite"),s=i.objectStore(Wl),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&q6(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(t){let e;const n=await RT(t.appConfig,r=>{const i=dge(r),s=hge(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===fS?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function dge(t){const e=t||{fid:ige(),registrationStatus:0};return Y6(e)}function hge(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(zl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fge(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pge(t)}:{installationEntry:e}}async function fge(t,e){try{const n=await tge(t,e);return b_(t.appConfig,n)}catch(n){throw j6(n)&&n.customData.serverCode===409?await Q6(t.appConfig):await b_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function pge(t){let e=await zD(t.appConfig);for(;e.registrationStatus===1;)await W6(100),e=await zD(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ax(t);return r||n}return e}function zD(t){return RT(t,e=>{if(!e)throw zl.create("installation-not-found");return Y6(e)})}function Y6(t){return mge(t)?{fid:t.fid,registrationStatus:0}:t}function mge(t){return t.registrationStatus===1&&t.registrationTime+L6<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gge({appConfig:t,heartbeatServiceProvider:e},n){const r=yge(t,n),i=Xme(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={installation:{sdkVersion:F6,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await z6(()=>fetch(r,a));if(c.ok){const l=await c.json();return $6(l)}else throw await B6("Generate Auth Token",c)}function yge(t,{fid:e}){return`${V6(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t,e=!1){let n;const r=await RT(t.appConfig,s=>{if(!J6(s))throw zl.create("not-registered");const o=s.authToken;if(!e&&wge(o))return s;if(o.requestStatus===1)return n=vge(t,e),s;{if(!navigator.onLine)throw zl.create("app-offline");const a=Ege(s);return n=_ge(t,a),a}});return n?await n:r.authToken}async function vge(t,e){let n=await WD(t.appConfig);for(;n.authToken.requestStatus===1;)await W6(100),n=await WD(t.appConfig);const r=n.authToken;return r.requestStatus===0?cx(t,e):r}function WD(t){return RT(t,e=>{if(!J6(e))throw zl.create("not-registered");const n=e.authToken;return Cge(n)?{...e,authToken:{requestStatus:0}}:e})}async function _ge(t,e){try{const n=await gge(t,e),r={...e,authToken:n};return await b_(t.appConfig,r),n}catch(n){if(j6(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Q6(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await b_(t.appConfig,r)}throw n}}function J6(t){return t!==void 0&&t.registrationStatus===2}function wge(t){return t.requestStatus===2&&!Tge(t)}function Tge(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Gme}function Ege(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Cge(t){return t.requestStatus===1&&t.requestTime+L6<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bge(t){const e=t,{installationEntry:n,registrationPromise:r}=await ax(e);return r?r.catch(console.error):cx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ige(t,e=!1){const n=t;return await Sge(n),(await cx(n,e)).token}async function Sge(t){const{registrationPromise:e}=await ax(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Age(t){if(!t||!t.options)throw SC("App Configuration");if(!t.name)throw SC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw SC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function SC(t){return zl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="installations",kge="installations-internal",Rge=t=>{const e=t.getProvider("app").getImmediate(),n=Age(e),r=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xge=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,X6).getImmediate();return{getId:()=>bge(n),getToken:i=>Ige(n,i)}};function Pge(){Nr(new yr(X6,Rge,"PUBLIC")),Nr(new yr(kge,xge,"PRIVATE"))}Pge();In(D6,sx);In(D6,sx,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="analytics",Nge="firebase_id",Oge="origin",Mge=60*1e3,Dge="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new xm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},vi=new Pc("analytics","Analytics",Lge);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fge(t){if(!t.startsWith(lx)){const e=vi.create("invalid-gtag-resource",{gtagURL:t});return ri.warn(e.message),""}return t}function Z6(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Uge(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jge(t,e){const n=Uge("firebase-js-sdk-policy",{createScriptURL:Fge}),r=document.createElement("script"),i=`${lx}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Vge(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function $ge(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await Z6(n)).find(l=>l.measurementId===i);c&&await e[c.appId]}}catch(a){ri.error(a)}t("config",i,s)}async function Bge(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await Z6(n);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){ri.error(s)}}function Hge(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await Bge(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await $ge(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){ri.error(a)}}return i}function zge(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Hge(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Wge(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(lx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kge=30,qge=1e3;class Gge{constructor(e={},n=qge){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ez=new Gge;function Qge(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Yge(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:Qge(n)},i=Dge.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw vi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function Jge(t,e=ez,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw vi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw vi.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new eye;return setTimeout(async()=>{a.abort()},Mge),tz({appId:r,apiKey:i,measurementId:s},o,a,e)}async function tz(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ez){var a;const{appId:s,measurementId:o}=t;try{await Xge(r,e)}catch(c){if(o)return ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await Yge(t);return i.deleteThrottleMetadata(s),c}catch(c){const l=c;if(!Zge(l)){if(i.deleteThrottleMetadata(s),o)return ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw c}const u=Number((a=l==null?void 0:l.customData)==null?void 0:a.httpStatus)===503?EO(n,i.intervalMillis,Kge):EO(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,d),ri.debug(`Calling attemptFetch again in ${u} millis`),tz(t,d,r,i)}}function Xge(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(vi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Zge(t){if(!(t instanceof Si)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class eye{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function tye(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nye(){if(v0())try{await _0()}catch(t){return ri.warn(vi.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ri.warn(vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function rye(t,e,n,r,i,s,o){const a=Jge(t);a.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&ri.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ri.error(f)),e.push(a);const c=nye().then(f=>{if(f)return r.getId()}),[l,u]=await Promise.all([a,c]);Wge(s)||jge(s,l.measurementId),i("js",new Date);const d=(o==null?void 0:o.config)??{};return d[Oge]="firebase",d.update=!0,u!=null&&(d[Nge]=u),i("config",l.measurementId,d),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iye{constructor(e){this.app=e}_delete(){return delete rp[this.app.options.appId],Promise.resolve()}}let rp={},KD=[];const qD={};let AC="dataLayer",sye="gtag",GD,nz,QD=!1;function oye(){const t=[];if(O$()&&t.push("This is a browser extension environment."),L$()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=vi.create("invalid-analytics-context",{errorInfo:e});ri.warn(n.message)}}function aye(t,e,n){oye();const r=t.options.appId;if(!r)throw vi.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw vi.create("no-api-key");if(rp[r]!=null)throw vi.create("already-exists",{id:r});if(!QD){Vge(AC);const{wrappedGtag:s,gtagCore:o}=zge(rp,KD,qD,AC,sye);nz=s,GD=o,QD=!0}return rp[r]=rye(t,KD,qD,e,GD,AC,n),new iye(t)}function cye(t=Oc()){t=$e(t);const e=Cs(t,I_);return e.isInitialized()?e.getImmediate():lye(t)}function lye(t,e={}){const n=Cs(t,I_);if(n.isInitialized()){const i=n.getImmediate();if(so(e,n.getOptions()))return i;throw vi.create("already-initialized")}return n.initialize({options:e})}function uye(t,e,n,r){t=$e(t),tye(nz,rp[t.app.options.appId],e,n,r).catch(i=>ri.error(i))}const YD="@firebase/analytics",JD="0.10.18";function dye(){Nr(new yr(I_,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return aye(r,i,n)},"PUBLIC")),Nr(new yr("analytics-internal",t,"PRIVATE")),In(YD,JD),In(YD,JD,"esm2020");function t(e){try{const n=e.getProvider(I_).getImmediate();return{logEvent:(r,i,s)=>uye(n,r,i,s)}}catch(n){throw vi.create("interop-component-reg-failed",{reason:n})}}}dye();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hye="/firebase-messaging-sw.js",fye="/firebase-cloud-messaging-push-scope",rz="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pye="https://fcmregistrations.googleapis.com/v1",iz="google.c.a.c_id",mye="google.c.a.c_l",gye="google.c.a.ts",yye="google.c.a.e",XD=1e4;var ZD;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ZD||(ZD={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var rm;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(rm||(rm={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vye(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="fcm_token_details_db",_ye=5,eL="fcm_token_object_Store";async function wye(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(kC))return null;let e=null;return(await Ww(kC,_ye,{upgrade:async(r,i,s,o)=>{if(i<2||!r.objectStoreNames.contains(eL))return;const a=o.objectStore(eL),c=await a.index("fcmSenderId").get(t);if(await a.clear(),!!c){if(i===2){const l=c;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:l.createTime??Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:bo(l.vapidKey)}}}else if(i===3){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:bo(l.auth),p256dh:bo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:bo(l.vapidKey)}}}else if(i===4){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:bo(l.auth),p256dh:bo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:bo(l.vapidKey)}}}}}})).close(),await nC(kC),await nC("fcm_vapid_details_db"),await nC("undefined"),Tye(e)?e:null}function Tye(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eye="firebase-messaging-database",Cye=1,im="firebase-messaging-store";let RC=null;function sz(){return RC||(RC=Ww(Eye,Cye,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(im)}}})),RC}async function bye(t){const e=oz(t),r=await(await sz()).transaction(im).objectStore(im).get(e);if(r)return r;{const i=await wye(t.appConfig.senderId);if(i)return await ux(t,i),i}}async function ux(t,e){const n=oz(t),i=(await sz()).transaction(im,"readwrite");return await i.objectStore(im).put(e,n),await i.done,e}function oz({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iye={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},pr=new Pc("messaging","Messaging",Iye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sye(t,e){const n=await hx(t),r=az(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(dx(t.appConfig),i)).json()}catch(o){throw pr.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw pr.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw pr.create("token-subscribe-no-token");return s.token}async function Aye(t,e){const n=await hx(t),r=az(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${dx(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw pr.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw pr.create("token-update-failed",{errorInfo:o})}if(!s.token)throw pr.create("token-update-no-token");return s.token}async function kye(t,e){const r={method:"DELETE",headers:await hx(t)};try{const s=await(await fetch(`${dx(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw pr.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw pr.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function dx({projectId:t}){return`${pye}/projects/${t}/registrations`}async function hx({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function az({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==rz&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rye=7*24*60*60*1e3;async function xye(t){const e=await Nye(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:bo(e.getKey("auth")),p256dh:bo(e.getKey("p256dh"))},r=await bye(t.firebaseDependencies);if(r){if(Oye(r.subscriptionOptions,n))return Date.now()>=r.createTime+Rye?Pye(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await kye(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return tL(t.firebaseDependencies,n)}else return tL(t.firebaseDependencies,n)}async function Pye(t,e){try{const n=await Aye(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await ux(t.firebaseDependencies,r),n}catch(n){throw n}}async function tL(t,e){const r={token:await Sye(t,e),createTime:Date.now(),subscriptionOptions:e};return await ux(t,r),r.token}async function Nye(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vye(e)})}function Oye(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Mye(e,t),Dye(e,t),Lye(e,t),e}function Mye(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function Dye(t,e){e.data&&(t.data=e.data)}function Lye(t,e){var i,s,o,a;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;t.fcmOptions={};const n=((s=e.fcmOptions)==null?void 0:s.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fye(t){return typeof t=="object"&&!!t&&iz in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uye(t){if(!t||!t.options)throw xC("App Configuration Object");if(!t.name)throw xC("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw xC(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function xC(t){return pr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jye{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Uye(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vye(t){try{t.swRegistration=await navigator.serviceWorker.register(hye,{scope:fye}),t.swRegistration.update().catch(()=>{}),await $ye(t.swRegistration)}catch(e){throw pr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function $ye(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${XD} ms`)),XD),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var o;((o=s.target)==null?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bye(t,e){if(!e&&!t.swRegistration&&await Vye(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw pr.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hye(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=rz)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(t,e){if(!navigator)throw pr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw pr.create("permission-blocked");return await Hye(t,e==null?void 0:e.vapidKey),await Bye(t,e==null?void 0:e.serviceWorkerRegistration),xye(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zye(t,e,n){const r=Wye(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[iz],message_name:n[mye],message_time:n[gye],message_device_time:Math.floor(Date.now()/1e3)})}function Wye(t){switch(t){case rm.NOTIFICATION_CLICKED:return"notification_open";case rm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kye(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===rm.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(nL(n)):t.onMessageHandler.next(nL(n)));const r=n.data;Fye(r)&&r[yye]==="1"&&await zye(t,n.messageType,r)}const rL="@firebase/messaging",iL="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qye=t=>{const e=new jye(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Kye(e,n)),e},Gye=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>cz(e,r)}};function Qye(){Nr(new yr("messaging",qye,"PUBLIC")),Nr(new yr("messaging-internal",Gye,"PRIVATE")),In(rL,iL),In(rL,iL,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yye(){try{await _0()}catch{return!1}return typeof window<"u"&&v0()&&L$()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jye(t,e){if(!navigator)throw pr.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xye(t=Oc()){return Yye().then(e=>{if(!e)throw pr.create("unsupported-browser")},e=>{throw pr.create("indexed-db-unsupported")}),Cs($e(t),"messaging").getImmediate()}async function sL(t,e){return t=$e(t),cz(t,e)}function Zye(t,e){return t=$e(t),Jye(t,e)}Qye();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eve="type.googleapis.com/google.protobuf.Int64Value",tve="type.googleapis.com/google.protobuf.UInt64Value";function lz(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function S_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>S_(e));if(typeof t=="function"||typeof t=="object")return lz(t,e=>S_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Gd(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case eve:case tve:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Gd(e)):typeof t=="function"||typeof t=="object"?lz(t,e=>Gd(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jr extends Si{constructor(e,n,r){super(`${fx}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Jr.prototype)}}function nve(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function A_(t,e){let n=nve(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!oL[o])return new Jr("internal","internal");n=oL[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=Gd(i))}}catch{}return n==="ok"?null:new Jr(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rve{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="us-central1",ive=/^data: (.*?)(?:\n|$)/;function sve(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Jr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class ove{constructor(e,n,r,i,s=pS,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new rve(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=pS}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ave(t,e,n){const r=Es(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(km(t.emulatorOrigin),Rm("Functions",!0))}function cve(t,e,n){const r=i=>uve(t,e,i,{});return r.stream=(i,s)=>hve(t,e,i,s),r}async function lve(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}async function uz(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function uve(t,e,n,r){const i=t._url(e);return dve(t,i,n,r)}async function dve(t,e,n,r){n=S_(n);const i={data:n},s=await uz(t,r),o=r.timeout||7e4,a=sve(o),c=await Promise.race([lve(e,i,s,t.fetchImpl),a.promise,t.cancelAllRequests]);if(a.cancel(),!c)throw new Jr("cancelled","Firebase Functions instance was deleted.");const l=A_(c.status,c.json);if(l)throw l;if(!c.json)throw new Jr("internal","Response is not valid JSON object.");let u=c.json.data;if(typeof u>"u"&&(u=c.json.result),typeof u>"u")throw new Jr("internal","Response is missing data field.");return{data:Gd(u)}}function hve(t,e,n,r){const i=t._url(e);return fve(t,i,n,r||{})}async function fve(t,e,n,r){var f;n=S_(n);const i={data:n},s=await uz(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const y=new Jr("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const _=A_(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,c;const l=new Promise((m,_)=>{a=m,c=_});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Jr("cancelled","Request was cancelled.");c(m)});const u=o.body.getReader(),d=pve(u,a,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=d.getReader();return{async next(){const{value:_,done:y}=await m.read();return{value:_,done:y}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:l}}function pve(t,e,n,r){const i=(o,a)=>{const c=o.match(ive);if(!c)return;const l=c[1];try{const u=JSON.parse(l);if("result"in u){e(Gd(u.result));return}if("message"in u){a.enqueue(Gd(u.message));return}if("error"in u){const d=A_(0,u);a.error(d),n(d);return}}catch(u){if(u instanceof Jr){a.error(u),n(u);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return c();async function c(){if(r!=null&&r.aborted){const l=new Jr("cancelled","Request was cancelled");return o.error(l),n(l),Promise.resolve()}try{const{value:l,done:u}=await t.read();if(u){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Jr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=s.decode(l,{stream:!0});const d=a.split(`
`);a=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),o);return c()}catch(l){const u=l instanceof Jr?l:A_(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const aL="@firebase/functions",cL="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mve="auth-internal",gve="app-check-internal",yve="messaging-internal";function vve(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(mve),o=n.getProvider(yve),a=n.getProvider(gve);return new ove(i,s,o,a,r)};Nr(new yr(fx,e,"PUBLIC").setMultipleInstances(!0)),In(aL,cL,t),In(aL,cL,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ve(t=Oc(),e=pS){const r=Cs($e(t),fx).getImmediate({identifier:e}),i=Bw("functions");return i&&wve(r,...i),r}function wve(t,e,n){ave($e(t),e,n)}function yIe(t,e,n){return cve($e(t),e)}vve();const Tve={apiKey:"AIzaSyCmioywtCMDFJjDvq8bF0_NBZJC5nyVPYo",authDomain:"huddlely.firebaseapp.com",projectId:"huddlely",storageBucket:"huddlely.firebasestorage.app",messagingSenderId:"788189911710",appId:"1:788189911710:web:3fd75fade0c56164d5b98f",measurementId:"G-8ZE8GCXPRX"},au=dse().length===0?V$(Tve):Oc(),Ps=pde(au),Oe=yce(au),Nu=kpe(au),lL=Hme(au);cye(au);const xT=new ko,vIe=_ve(au,"us-central1");let dz=null;if(typeof window<"u")try{dz=Xye(au)}catch(t){console.log("Messaging not available:",t)}xT.addScope("https://www.googleapis.com/auth/calendar");xT.addScope("https://www.googleapis.com/auth/userinfo.profile");xT.addScope("https://www.googleapis.com/auth/userinfo.email");const uL=t=>new fue(Ps,t,{size:"normal",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),Eve=async(t,e)=>{try{return await gue(Ps,t,e)}catch(n){throw console.error("Error sending OTP:",n),n}},Cve=async(t,e)=>{try{return await t.confirm(e)}catch(n){throw console.error("Error verifying OTP:",n),n}},PC=768;function PT(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${PC-1}px)`),r=()=>{e(window.innerWidth<PC)};return n.addEventListener("change",r),e(window.innerWidth<PC),()=>n.removeEventListener("change",r)},[]),!!t}const bve=fh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-elegant transition-smooth",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",focus:"gradient-primary text-focus-foreground hover:shadow-glow transition-smooth",break:"gradient-secondary text-break-foreground hover:shadow-elegant transition-smooth",success:"bg-success text-success-foreground hover:bg-success/90 transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),at=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Zl:"button";return p.jsx(o,{className:te(bve({variant:e,size:n,className:t})),ref:s,...i})});at.displayName="Button";const ls=g.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ls.displayName="Input";var Ive="Separator",dL="horizontal",Sve=["horizontal","vertical"],hz=g.forwardRef((t,e)=>{const{decorative:n,orientation:r=dL,...i}=t,s=Ave(r)?r:dL,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return p.jsx(je.div,{"data-orientation":s,...a,...i,ref:e})});hz.displayName=Ive;function Ave(t){return Sve.includes(t)}var fz=hz;const pz=g.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>p.jsx(fz,{ref:i,decorative:n,orientation:e,className:te("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));pz.displayName=fz.displayName;var NC="focusScope.autoFocusOnMount",OC="focusScope.autoFocusOnUnmount",hL={bubbles:!1,cancelable:!0},kve="FocusScope",NT=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=g.useState(null),l=pn(i),u=pn(s),d=g.useRef(null),f=It(e,y=>c(y)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(C){if(m.paused||!a)return;const S=C.target;a.contains(S)?d.current=S:va(d.current,{select:!0})},T=function(C){if(m.paused||!a)return;const S=C.relatedTarget;S!==null&&(a.contains(S)||va(d.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const M of C)M.removedNodes.length>0&&va(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",T);const w=new MutationObserver(E);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",T),w.disconnect()}}},[r,a,m.paused]),g.useEffect(()=>{if(a){pL.add(m);const y=document.activeElement;if(!a.contains(y)){const E=new CustomEvent(NC,hL);a.addEventListener(NC,l),a.dispatchEvent(E),E.defaultPrevented||(Rve(Mve(mz(a)),{select:!0}),document.activeElement===y&&va(a))}return()=>{a.removeEventListener(NC,l),setTimeout(()=>{const E=new CustomEvent(OC,hL);a.addEventListener(OC,u),a.dispatchEvent(E),E.defaultPrevented||va(y??document.body,{select:!0}),a.removeEventListener(OC,u),pL.remove(m)},0)}}},[a,l,u,m]);const _=g.useCallback(y=>{if(!n&&!r||m.paused)return;const T=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,E=document.activeElement;if(T&&E){const w=y.currentTarget,[C,S]=xve(w);C&&S?!y.shiftKey&&E===S?(y.preventDefault(),n&&va(C,{select:!0})):y.shiftKey&&E===C&&(y.preventDefault(),n&&va(S,{select:!0})):E===w&&y.preventDefault()}},[n,r,m.paused]);return p.jsx(je.div,{tabIndex:-1,...o,ref:f,onKeyDown:_})});NT.displayName=kve;function Rve(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(va(r,{select:e}),document.activeElement!==n)return}function xve(t){const e=mz(t),n=fL(e,t),r=fL(e.reverse(),t);return[n,r]}function mz(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function fL(t,e){for(const n of t)if(!Pve(n,{upTo:e}))return n}function Pve(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Nve(t){return t instanceof HTMLInputElement&&"select"in t}function va(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Nve(t)&&e&&t.select()}}var pL=Ove();function Ove(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=mL(t,e),t.unshift(e)},remove(e){var n;t=mL(t,e),(n=t[0])==null||n.resume()}}}function mL(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Mve(t){return t.filter(e=>e.tagName!=="A")}var MC=0;function px(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??gL()),document.body.insertAdjacentElement("beforeend",t[1]??gL()),MC++,()=>{MC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),MC--}},[])}function gL(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $s=function(){return $s=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$s.apply(this,arguments)};function gz(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Dve(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Fy="right-scroll-bar-position",Uy="width-before-scroll-bar",Lve="with-scroll-bars-hidden",Fve="--removed-body-scroll-bar-size";function DC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Uve(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var jve=typeof window<"u"?g.useLayoutEffect:g.useEffect,yL=new WeakMap;function Vve(t,e){var n=Uve(null,function(r){return t.forEach(function(i){return DC(i,r)})});return jve(function(){var r=yL.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||DC(a,null)}),s.forEach(function(a){i.has(a)||DC(a,o)})}yL.set(n,t)},[t]),n}function $ve(t){return t}function Bve(t,e){e===void 0&&(e=$ve);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function Hve(t){t===void 0&&(t={});var e=Bve(null);return e.options=$s({async:!0,ssr:!1},t),e}var yz=function(t){var e=t.sideCar,n=gz(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,$s({},n))};yz.isSideCarExport=!0;function zve(t,e){return t.useMedium(e),yz}var vz=Hve(),LC=function(){},OT=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:LC,onWheelCapture:LC,onTouchMoveCapture:LC}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,m=t.noRelative,_=t.noIsolation,y=t.inert,T=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,C=t.gapMode,S=gz(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=f,D=Vve([n,e]),A=$s($s({},S),i);return g.createElement(g.Fragment,null,u&&g.createElement(M,{sideCar:vz,removeScrollBar:l,shards:d,noRelative:m,noIsolation:_,inert:y,setCallbacks:s,allowPinchZoom:!!T,lockRef:n,gapMode:C}),o?g.cloneElement(g.Children.only(a),$s($s({},A),{ref:D})):g.createElement(w,$s({},A,{className:c,ref:D}),a))});OT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};OT.classNames={fullWidth:Uy,zeroRight:Fy};var Wve=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Kve(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Wve();return e&&t.setAttribute("nonce",e),t}function qve(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Gve(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Qve=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Kve())&&(qve(e,n),Gve(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Yve=function(){var t=Qve();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_z=function(){var t=Yve(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Jve={left:0,top:0,right:0,gap:0},FC=function(t){return parseInt(t||"",10)||0},Xve=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[FC(n),FC(r),FC(i)]},Zve=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Jve;var e=Xve(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},e_e=_z(),hd="data-scroll-locked",t_e=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Lve,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(hd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fy,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Uy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fy," .").concat(Fy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Uy," .").concat(Uy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hd,`] {
    `).concat(Fve,": ").concat(a,`px;
  }
`)},vL=function(){var t=parseInt(document.body.getAttribute(hd)||"0",10);return isFinite(t)?t:0},n_e=function(){g.useEffect(function(){return document.body.setAttribute(hd,(vL()+1).toString()),function(){var t=vL()-1;t<=0?document.body.removeAttribute(hd):document.body.setAttribute(hd,t.toString())}},[])},r_e=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;n_e();var s=g.useMemo(function(){return Zve(i)},[i]);return g.createElement(e_e,{styles:t_e(s,!e,i,n?"":"!important")})},mS=!1;if(typeof window<"u")try{var ry=Object.defineProperty({},"passive",{get:function(){return mS=!0,!0}});window.addEventListener("test",ry,ry),window.removeEventListener("test",ry,ry)}catch{mS=!1}var _u=mS?{passive:!1}:!1,i_e=function(t){return t.tagName==="TEXTAREA"},wz=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!i_e(t)&&n[e]==="visible")},s_e=function(t){return wz(t,"overflowY")},o_e=function(t){return wz(t,"overflowX")},_L=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Tz(t,r);if(i){var s=Ez(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},a_e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},c_e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Tz=function(t,e){return t==="v"?s_e(e):o_e(e)},Ez=function(t,e){return t==="v"?a_e(e):c_e(e)},l_e=function(t,e){return t==="h"&&e==="rtl"?-1:1},u_e=function(t,e,n,r,i){var s=l_e(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),l=!1,u=o>0,d=0,f=0;do{if(!a)break;var m=Ez(t,a),_=m[0],y=m[1],T=m[2],E=y-T-s*_;(_||E)&&Tz(t,a)&&(d+=E,f+=_);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!i)||!u&&(Math.abs(f)<1||!i))&&(l=!0),l},iy=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},wL=function(t){return[t.deltaX,t.deltaY]},TL=function(t){return t&&"current"in t?t.current:t},d_e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},h_e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},f_e=0,wu=[];function p_e(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(f_e++)[0],s=g.useState(_z)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Dve([t.lockRef.current],(t.shards||[]).map(TL),!0).filter(Boolean);return y.forEach(function(T){return T.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(y,T){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var E=iy(y),w=n.current,C="deltaX"in y?y.deltaX:w[0]-E[0],S="deltaY"in y?y.deltaY:w[1]-E[1],M,D=y.target,A=Math.abs(C)>Math.abs(S)?"h":"v";if("touches"in y&&A==="h"&&D.type==="range")return!1;var I=_L(A,D);if(!I)return!0;if(I?M=A:(M=A==="v"?"h":"v",I=_L(A,D)),!I)return!1;if(!r.current&&"changedTouches"in y&&(C||S)&&(r.current=M),!M)return!0;var k=r.current||M;return u_e(k,T,y,k==="h"?C:S,!0)},[]),c=g.useCallback(function(y){var T=y;if(!(!wu.length||wu[wu.length-1]!==s)){var E="deltaY"in T?wL(T):iy(T),w=e.current.filter(function(M){return M.name===T.type&&(M.target===T.target||T.target===M.shadowParent)&&d_e(M.delta,E)})[0];if(w&&w.should){T.cancelable&&T.preventDefault();return}if(!w){var C=(o.current.shards||[]).map(TL).filter(Boolean).filter(function(M){return M.contains(T.target)}),S=C.length>0?a(T,C[0]):!o.current.noIsolation;S&&T.cancelable&&T.preventDefault()}}},[]),l=g.useCallback(function(y,T,E,w){var C={name:y,delta:T,target:E,should:w,shadowParent:m_e(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(S){return S!==C})},1)},[]),u=g.useCallback(function(y){n.current=iy(y),r.current=void 0},[]),d=g.useCallback(function(y){l(y.type,wL(y),y.target,a(y,t.lockRef.current))},[]),f=g.useCallback(function(y){l(y.type,iy(y),y.target,a(y,t.lockRef.current))},[]);g.useEffect(function(){return wu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,_u),document.addEventListener("touchmove",c,_u),document.addEventListener("touchstart",u,_u),function(){wu=wu.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,_u),document.removeEventListener("touchmove",c,_u),document.removeEventListener("touchstart",u,_u)}},[]);var m=t.removeScrollBar,_=t.inert;return g.createElement(g.Fragment,null,_?g.createElement(s,{styles:h_e(i)}):null,m?g.createElement(r_e,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function m_e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const g_e=zve(vz,p_e);var MT=g.forwardRef(function(t,e){return g.createElement(OT,$s({},t,{ref:e,sideCar:g_e}))});MT.classNames=OT.classNames;var y_e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Tu=new WeakMap,sy=new WeakMap,oy={},UC=0,Cz=function(t){return t&&(t.host||Cz(t.parentNode))},v_e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Cz(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},__e=function(t,e,n,r){var i=v_e(e,Array.isArray(t)?t:[t]);oy[n]||(oy[n]=new WeakMap);var s=oy[n],o=[],a=new Set,c=new Set(i),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var m=f.getAttribute(r),_=m!==null&&m!=="false",y=(Tu.get(f)||0)+1,T=(s.get(f)||0)+1;Tu.set(f,y),s.set(f,T),o.push(f),y===1&&_&&sy.set(f,!0),T===1&&f.setAttribute(n,"true"),_||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(e),a.clear(),UC++,function(){o.forEach(function(d){var f=Tu.get(d)-1,m=s.get(d)-1;Tu.set(d,f),s.set(d,m),f||(sy.has(d)||d.removeAttribute(r),sy.delete(d)),m||d.removeAttribute(n)}),UC--,UC||(Tu=new WeakMap,Tu=new WeakMap,sy=new WeakMap,oy={})}},mx=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=y_e(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),__e(r,i,n,"aria-hidden")):function(){return null}},DT="Dialog",[bz,_Ie]=Ii(DT),[w_e,bs]=bz(DT),Iz=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=g.useRef(null),c=g.useRef(null),[l,u]=eu({prop:r,defaultProp:i??!1,onChange:s,caller:DT});return p.jsx(w_e,{scope:e,triggerRef:a,contentRef:c,contentId:jo(),titleId:jo(),descriptionId:jo(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};Iz.displayName=DT;var Sz="DialogTrigger",Az=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=bs(Sz,n),s=It(e,i.triggerRef);return p.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vx(i.open),...r,ref:s,onClick:Ce(t.onClick,i.onOpenToggle)})});Az.displayName=Sz;var gx="DialogPortal",[T_e,kz]=bz(gx,{forceMount:void 0}),Rz=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=bs(gx,e);return p.jsx(T_e,{scope:e,forceMount:n,children:g.Children.map(r,o=>p.jsx(nr,{present:n||s.open,children:p.jsx(bm,{asChild:!0,container:i,children:o})}))})};Rz.displayName=gx;var k_="DialogOverlay",xz=g.forwardRef((t,e)=>{const n=kz(k_,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=bs(k_,t.__scopeDialog);return s.modal?p.jsx(nr,{present:r||s.open,children:p.jsx(C_e,{...i,ref:e})}):null});xz.displayName=k_;var E_e=Nl("DialogOverlay.RemoveScroll"),C_e=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=bs(k_,n);return p.jsx(MT,{as:E_e,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(je.div,{"data-state":vx(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Kl="DialogContent",Pz=g.forwardRef((t,e)=>{const n=kz(Kl,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=bs(Kl,t.__scopeDialog);return p.jsx(nr,{present:r||s.open,children:s.modal?p.jsx(b_e,{...i,ref:e}):p.jsx(I_e,{...i,ref:e})})});Pz.displayName=Kl;var b_e=g.forwardRef((t,e)=>{const n=bs(Kl,t.__scopeDialog),r=g.useRef(null),i=It(e,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return mx(s)},[]),p.jsx(Nz,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ce(t.onFocusOutside,s=>s.preventDefault())})}),I_e=g.forwardRef((t,e)=>{const n=bs(Kl,t.__scopeDialog),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(Nz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Nz=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=bs(Kl,n),c=g.useRef(null),l=It(e,c);return px(),p.jsxs(p.Fragment,{children:[p.jsx(NT,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(hh,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":vx(a.open),...o,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(S_e,{titleId:a.titleId}),p.jsx(k_e,{contentRef:c,descriptionId:a.descriptionId})]})]})}),yx="DialogTitle",Oz=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=bs(yx,n);return p.jsx(je.h2,{id:i.titleId,...r,ref:e})});Oz.displayName=yx;var Mz="DialogDescription",Dz=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=bs(Mz,n);return p.jsx(je.p,{id:i.descriptionId,...r,ref:e})});Dz.displayName=Mz;var Lz="DialogClose",Fz=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=bs(Lz,n);return p.jsx(je.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>i.onOpenChange(!1))})});Fz.displayName=Lz;function vx(t){return t?"open":"closed"}var Uz="DialogTitleWarning",[wIe,jz]=KJ(Uz,{contentName:Kl,titleName:yx,docsSlug:"dialog"}),S_e=({titleId:t})=>{const e=jz(Uz),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},A_e="DialogDescriptionWarning",k_e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jz(A_e).contentName}}.`;return g.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Vz=Iz,R_e=Az,$z=Rz,LT=xz,FT=Pz,UT=Oz,jT=Dz,Bz=Fz;const x_e=Vz,P_e=$z,Hz=g.forwardRef(({className:t,...e},n)=>p.jsx(LT,{className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Hz.displayName=LT.displayName;const N_e=fh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),zz=g.forwardRef(({side:t="right",className:e,children:n,...r},i)=>p.jsxs(P_e,{children:[p.jsx(Hz,{}),p.jsxs(FT,{ref:i,className:te(N_e({side:t}),e),...r,children:[n,p.jsxs(Bz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(tu,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zz.displayName=FT.displayName;const O_e=g.forwardRef(({className:t,...e},n)=>p.jsx(UT,{ref:n,className:te("text-lg font-semibold text-foreground",t),...e}));O_e.displayName=UT.displayName;const M_e=g.forwardRef(({className:t,...e},n)=>p.jsx(jT,{ref:n,className:te("text-sm text-muted-foreground",t),...e}));M_e.displayName=jT.displayName;function EL({className:t,...e}){return p.jsx("div",{className:te("animate-pulse rounded-md bg-muted",t),...e})}const D_e="sidebar:state",L_e=60*60*24*7,F_e="16rem",U_e="18rem",j_e="3rem",V_e="b",Wz=g.createContext(null);function cu(){const t=g.useContext(Wz);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const Kz=g.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:i,children:s,...o},a)=>{const c=PT(),[l,u]=g.useState(!1),[d,f]=g.useState(!1),[m,_]=g.useState(t),y=e??m,T=g.useCallback(S=>{const M=typeof S=="function"?S(y):S;n?n(M):_(M),document.cookie=`${D_e}=${M}; path=/; max-age=${L_e}`},[n,y]),E=g.useCallback(()=>c?u(S=>!S):T(S=>!S),[c,T,u]);g.useEffect(()=>{const S=M=>{M.key===V_e&&(M.metaKey||M.ctrlKey)&&(M.preventDefault(),E())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[E]);const w=y?"expanded":"collapsed",C=g.useMemo(()=>({state:w,open:y,setOpen:T,isMobile:c,openMobile:l,setOpenMobile:u,toggleSidebar:E,isChatOpenMobile:d,setChatOpenMobile:f}),[w,y,T,c,l,u,E,d]);return p.jsx(Wz.Provider,{value:C,children:p.jsx(u0,{delayDuration:0,children:p.jsx("div",{style:{"--sidebar-width":F_e,"--sidebar-width-icon":j_e,...i},className:te("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...o,children:s})})})});Kz.displayName="SidebarProvider";const qz=g.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:i,...s},o)=>{const{isMobile:a,state:c,openMobile:l,setOpenMobile:u}=cu();return n==="none"?p.jsx("div",{className:te("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...s,children:i}):a?p.jsx(x_e,{open:l,onOpenChange:u,...s,children:p.jsx(zz,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":U_e},side:t,children:p.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):p.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[p.jsx("div",{className:te("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),p.jsx("div",{className:te("duration-200 fixed z-10 hidden w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),style:{top:"var(--app-header-offset, 0px)",height:"calc(100vh - var(--app-header-offset, 0px))"},...s,children:p.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});qz.displayName="Sidebar";const Gz=g.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:i}=cu();return p.jsxs(at,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:te("h-7 w-7",t),onClick:s=>{e==null||e(s),i()},...n,children:[p.jsx(RZ,{}),p.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Gz.displayName="SidebarTrigger";const $_e=g.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=cu();return p.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:te("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});$_e.displayName="SidebarRail";const B_e=g.forwardRef(({className:t,...e},n)=>p.jsx("main",{ref:n,className:te("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));B_e.displayName="SidebarInset";const H_e=g.forwardRef(({className:t,...e},n)=>p.jsx(ls,{ref:n,"data-sidebar":"input",className:te("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));H_e.displayName="SidebarInput";const z_e=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,"data-sidebar":"header",className:te("flex flex-col gap-2 p-2",t),...e}));z_e.displayName="SidebarHeader";const W_e=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,"data-sidebar":"footer",className:te("flex flex-col gap-2 p-2",t),...e}));W_e.displayName="SidebarFooter";const Qz=g.forwardRef(({className:t,...e},n)=>p.jsx(pz,{ref:n,"data-sidebar":"separator",className:te("mx-2 w-auto bg-sidebar-border",t),...e}));Qz.displayName="SidebarSeparator";const Yz=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,"data-sidebar":"content",className:te("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));Yz.displayName="SidebarContent";const gS=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,"data-sidebar":"group",className:te("relative flex w-full min-w-0 flex-col p-2",t),...e}));gS.displayName="SidebarGroup";const yS=g.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const i=e?Zl:"div";return p.jsx(i,{ref:r,"data-sidebar":"group-label",className:te("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});yS.displayName="SidebarGroupLabel";const K_e=g.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const i=e?Zl:"button";return p.jsx(i,{ref:r,"data-sidebar":"group-action",className:te("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});K_e.displayName="SidebarGroupAction";const vS=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,"data-sidebar":"group-content",className:te("w-full text-sm",t),...e}));vS.displayName="SidebarGroupContent";const _S=g.forwardRef(({className:t,...e},n)=>p.jsx("ul",{ref:n,"data-sidebar":"menu",className:te("flex w-full min-w-0 flex-col gap-1",t),...e}));_S.displayName="SidebarMenu";const jy=g.forwardRef(({className:t,...e},n)=>p.jsx("li",{ref:n,"data-sidebar":"menu-item",className:te("group/menu-item relative",t),...e}));jy.displayName="SidebarMenuItem";const q_e=fh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Vy=g.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:i,className:s,...o},a)=>{const c=t?Zl:"button",{isMobile:l,state:u}=cu(),d=p.jsx(c,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:te(q_e({variant:n,size:r}),s),...o});return i?(typeof i=="string"&&(i={children:i}),p.jsxs(g$,{children:[p.jsx(y$,{asChild:!0,children:d}),p.jsx(d0,{side:"right",align:"center",hidden:u!=="collapsed"||l,...i})]})):d});Vy.displayName="SidebarMenuButton";const G_e=g.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},i)=>{const s=e?Zl:"button";return p.jsx(s,{ref:i,"data-sidebar":"menu-action",className:te("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});G_e.displayName="SidebarMenuAction";const Q_e=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:te("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));Q_e.displayName="SidebarMenuBadge";const Y_e=g.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const i=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return p.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:te("rounded-md h-8 flex gap-2 px-2 items-center",t),...n,children:[e&&p.jsx(EL,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),p.jsx(EL,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});Y_e.displayName="SidebarMenuSkeleton";const J_e=g.forwardRef(({className:t,...e},n)=>p.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:te("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));J_e.displayName="SidebarMenuSub";const X_e=g.forwardRef(({...t},e)=>p.jsx("li",{ref:e,...t}));X_e.displayName="SidebarMenuSubItem";const Z_e=g.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...i},s)=>{const o=t?Zl:"a";return p.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:te("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})});Z_e.displayName="SidebarMenuSubButton";const ewe=fh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _i({className:t,variant:e,...n}){return p.jsx("div",{className:te(ewe({variant:e}),t),...n})}const Jz=g.createContext(void 0);function twe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(null),[s,o]=g.useState(!0),{toast:a}=Xl();g.useEffect(()=>{const N=Wle(Ps,async P=>{n(P),P?await l(P):i(null),o(!1)});return()=>N()},[]);const c=async N=>{const P=tt(Oe,"users",N),R=await Ao(P);R.exists()&&i(R.data())},l=async N=>{const P=tt(Oe,"users",N.uid),R=await Ao(P);if(R.exists()){const B=R.data();i(B),await Di(P,{lastLoginAt:new Date().toISOString()})}else{const B={uid:N.uid,email:N.email||"",displayName:N.displayName||"",photoURL:N.photoURL||"",phoneNumber:N.phoneNumber||"",emailVerified:N.emailVerified,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),preferences:{notifications:!0,theme:"system",language:"en"},teamId:null};await Kf(P,B),i(B)}},x={user:e,userProfile:r,loading:s,signIn:async(N,P)=>{await Vle(Ps,N,P)},signUp:async(N,P,R)=>{const B=await jle(Ps,N,P);B.user&&R&&await Ble(B.user,{displayName:R}),B.user&&await HM(B.user)},signInWithGoogle:async()=>{try{const{UniversalGoogleAuth:N}=await mn(async()=>{const{UniversalGoogleAuth:P}=await import("./universalAuth-BbqpKWVG.js");return{UniversalGoogleAuth:P}},[]);await N.signIn()}catch(N){console.error("Google Sign-In failed:",N),await Eue(Ps,xT)}},signInWithMicrosoft:async()=>{const N=new ld("microsoft.com");try{if(!Ps.currentUser)throw new Error("You must be logged in with Google/Email before linking Microsoft.");const P=await Cue(Ps.currentUser,N);a({title:"Microsoft Linked ✅",description:`Connected as ${P.user.displayName||P.user.email}`});const R=ld.credentialFromResult(P),B=R==null?void 0:R.accessToken;console.log("Microsoft Access Token:",B)}catch(P){P.code==="auth/credential-already-in-use"?a({title:"Already Linked",description:"This Microsoft account is already linked with another user.",variant:"destructive"}):(console.error("Microsoft linking error:",P),a({title:"Microsoft Link Failed",description:P.message,variant:"destructive"}))}},signInWithPhone:async N=>{const P=uL("recaptcha-container");return await Eve(N,P)},verifyPhoneOTP:async(N,P)=>{await Cve(N,P)},signOutUser:async()=>{await Kle(Ps)},updateUserProfile:async N=>{if(!e||!r)return;const P=tt(Oe,"users",e.uid);await Di(P,N),i({...r,...N}),a({title:"Profile Updated! ✨"})},sendVerificationEmail:async()=>{e&&await HM(e)},resetPassword:async N=>{await Ule(Ps,N),a({title:"Password reset email sent!",description:"Check your inbox for reset instructions."})},setupPhoneAuth:N=>uL(N),sendTeamRequest:async N=>{if(!e||!r)throw new Error("Authentication required.");if(e.email===N)throw new Error("You cannot send a request to yourself.");const P=Gr(Oe,"users"),R=Fl(P,sd("email","==",N)),B=await PM(R);if(B.empty)throw new Error("No user found with this email address.");const he=B.docs[0];await $m(Gr(Oe,"teamRequests"),{senderId:e.uid,senderName:r.displayName||e.email,senderEmail:e.email,receiverId:he.id,receiverEmail:he.data().email,status:"pending",createdAt:zI()}),a({title:"Team request sent! 🚀"})},fetchReceivedTeamRequests:async()=>{if(!e)return[];const N=Gr(Oe,"teamRequests"),P=Fl(N,sd("receiverId","==",e.uid),sd("status","==","pending"));return(await PM(P)).docs.map(B=>({id:B.id,...B.data()}))},acceptTeamRequest:async(N,P)=>{if(!e)throw new Error("You must be logged in to accept a request.");o(!0);const R=WI(Oe);try{const B=tt(Oe,"users",P),he=await Ao(B);if(!he.exists())throw new Error("The user who sent the invite no longer exists.");const ye=he.data().teamId,z=tt(Oe,"users",e.uid),j=tt(Oe,"teamRequests",N);if(ye){const U=tt(Oe,"teams",ye);R.update(U,{memberIds:xce(e.uid)}),R.update(z,{teamId:ye})}else{const U=tt(Gr(Oe,"teams"));R.set(U,{memberIds:[P,e.uid],createdAt:zI(),createdBy:P}),R.update(B,{teamId:U.id}),R.update(z,{teamId:U.id})}R.delete(j),await R.commit(),await c(e.uid),a({title:"Team request accepted! 🎉",description:"You are now part of the team."})}catch(B){throw console.error("Error accepting team request:",B),a({title:"Failed to accept request",description:B.message,variant:"destructive"}),B}finally{o(!1)}},declineTeamRequest:async N=>{const P=tt(Oe,"teamRequests",N);await wc(P),a({title:"Team request declined"})},fetchTeamMembers:async()=>{if(!(r!=null&&r.teamId))return[];const N=tt(Oe,"teams",r.teamId),P=await Ao(N);if(!P.exists())return await Di(tt(Oe,"users",r.uid),{teamId:null}),i(he=>he?{...he,teamId:null}:null),[];const R=P.data(),B=[];for(const he of R.memberIds){const fe=tt(Oe,"users",he),ye=await Ao(fe);ye.exists()&&B.push(ye.data())}return B}};return p.jsx(Jz.Provider,{value:x,children:!s&&t})}function vr(){const t=g.useContext(Jz);if(t===void 0)throw new Error("useAuth must be used within an AuthContextProvider");return t}let wS=null;const CL=t=>{wS=t},Qc=class Qc{constructor(){Ht(this,"permission","default");Ht(this,"scheduledNotifications",new Map);Ht(this,"pendingAssignments",new Map);this.checkPermission(),this.setupServiceWorker()}static getInstance(){return Qc.instance||(Qc.instance=new Qc),Qc.instance}async addInAppNotification(e,n,r,i,s){if(wS)try{await wS({title:n,body:r,type:i,read:!1,data:s||{}},e),console.log("In-app notification added:",{title:n,body:r,type:i})}catch(o){console.error("Failed to add in-app notification:",o)}else console.warn("Global addNotification function not available")}checkPermission(){"Notification"in window&&(this.permission=Notification.permission)}async setupServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}catch(e){console.warn("Service Worker registration failed:",e)}}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.permission==="granted")return!0;const e=await Notification.requestPermission();return this.permission=e,e==="granted"}async showNotification(e,n){if(this.permission!=="granted")return console.warn("Notification permission not granted"),null;const r={icon:"/favicon.ico",badge:"/favicon.ico",tag:"mindmeld-notification",requireInteraction:!1,silent:!1,...n};try{if("serviceWorker"in navigator&&"actions"in Notification.prototype&&r.actions&&r.actions.length>0)if("serviceWorker"in navigator)try{return await(await navigator.serviceWorker.ready).showNotification(e,r),null}catch(s){console.warn("Service Worker notification failed, falling back to basic notification:",s);const{actions:o,...a}=r,c=new Notification(e,a);return a.requireInteraction||setTimeout(()=>{c.close()},5e3),c}else{const{actions:s,...o}=r,a=new Notification(e,o);return o.requireInteraction||setTimeout(()=>{a.close()},5e3),a}else{const s=new Notification(e,r);return r.requireInteraction||setTimeout(()=>{s.close()},5e3),s}}catch(i){return console.error("Failed to show notification:",i),null}}scheduleTaskReminder(e,n=15){if(!e.dueDate)return;const r=new Date(e.dueDate),i=new Date(r.getTime()-n*60*1e3),s=new Date;if(i<=s)return;const o=i.getTime()-s.getTime(),a=`task-reminder-${e.id}`;this.clearScheduledNotification(a);const c=setTimeout(()=>{this.showNotification(`📋 Task Reminder: ${e.title}`,{body:`Due in ${n} minutes: ${e.description||"No description"}`,icon:"/favicon.ico",tag:a,data:{taskId:e.id,type:"reminder"},..."serviceWorker"in navigator&&{actions:[{action:"start",title:"▶️ Start Now"},{action:"snooze",title:"⏰ Snooze 5min"}]}}),this.scheduledNotifications.delete(a),mn(async()=>{const{alexaNotifications:l}=await Promise.resolve().then(()=>HC);return{alexaNotifications:l}},void 0).then(({alexaNotifications:l})=>{l.send({title:"Task Reminder",body:`${e.title} is due in ${n} minutes`,type:"reminder",data:{taskId:e.id}})})},o);this.scheduledNotifications.set(a,c)}scheduleTaskDueNotification(e){if(!e.dueDate)return;const n=new Date(e.dueDate),r=new Date;if(n<=r)return;const i=n.getTime()-r.getTime(),s=`task-due-${e.id}`;this.clearScheduledNotification(s);const o=setTimeout(()=>{this.showNotification(`🚨 Task Due Now: ${e.title}`,{body:`This task is now due: ${e.description||"No description"}`,icon:"/favicon.ico",tag:s,data:{taskId:e.id,type:"due"},requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"complete",title:"✅ Mark Complete"},{action:"extend",title:"⏰ Extend Deadline"}]}}),this.scheduledNotifications.delete(s),mn(async()=>{const{alexaNotifications:a}=await Promise.resolve().then(()=>HC);return{alexaNotifications:a}},void 0).then(({alexaNotifications:a})=>{a.send({title:"Task Due Now",body:`${e.title} is due now`,type:"reminder",data:{taskId:e.id}})})},i);this.scheduledNotifications.set(s,o)}showPomodoroNotification(e,n){const i={"focus-complete":{title:"🎉 Focus Session Complete!",body:`Great work! Time for a well-deserved break. Sessions completed: ${n||0}`,actions:[{action:"start-break",title:"☕ Start Break"},{action:"continue",title:"🔄 Continue Working"}]},"break-complete":{title:"⚡ Break Time Over!",body:"Ready to focus again? Let's get back to work!",actions:[{action:"start-focus",title:"🎯 Start Focus"},{action:"extend-break",title:"⏰ Extend Break"}]}}[e];this.showNotification(i.title,{body:i.body,tag:`pomodoro-${e}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:i.actions}})}showTaskCompleteNotification(e){this.showNotification("🎯 Task Completed!",{body:`Great job completing "${e}"!`,tag:"task-complete",..."serviceWorker"in navigator&&{actions:[{action:"view-stats",title:"📊 View Stats"},{action:"next-task",title:"➡️ Next Task"}]}})}showTaskAssignmentNotification(e,n,r){if(!e.assignedTo||!e.assignedTo.includes(r))return;this.addInAppNotification(r,"New Task Assignment",`${n} assigned "${e.title}" to you`,"task-assignment",{taskId:e.id,taskTitle:e.title,assignerName:n,priority:e.priority});const i=e.priority==="high"?"🔥":e.priority==="medium"?"⚡":"📝",s=e.dueDate?` (Due: ${new Date(e.dueDate).toLocaleDateString()})`:"";this.showNotification(`${i} New Task Assignment`,{body:`${n} assigned "${e.title}" to you${s}`,tag:`task-assignment-${e.id}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"start-task",title:"▶️ Start Now"},{action:"view-task",title:"👁️ View Details"},{action:"mark-progress",title:"🔄 Mark In Progress"}]},data:{taskId:e.id,type:"assignment",priority:e.priority,assignerName:n}}),mn(async()=>{const{alexaNotifications:o}=await Promise.resolve().then(()=>HC);return{alexaNotifications:o}},void 0).then(({alexaNotifications:o})=>{o.send({title:"New Task Assignment",body:`${n} assigned ${e.title} to you${s?", due "+new Date(e.dueDate).toLocaleString():""}`,type:"assignment",data:{taskId:e.id,priority:e.priority}})})}showBulkAssignmentNotification(e,n){this.showNotification("📋 Multiple Task Assignments",{body:`${n} assigned ${e} tasks to you`,tag:"bulk-assignment",requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"view-all-tasks",title:"📋 View All Tasks"},{action:"prioritize",title:"🎯 Help Me Prioritize"}]},data:{type:"bulk-assignment",taskCount:e,assignerName:n}})}showSmartTaskSuggestion(e,n){this.showNotification("🤖 AI Task Suggestion",{body:`Based on your schedule, I suggest working on "${e.title}" now. ${n}`,tag:`ai-suggestion-${e.id}`,..."serviceWorker"in navigator&&{actions:[{action:"start-suggested",title:"🚀 Start Now"},{action:"schedule-later",title:"⏰ Schedule Later"},{action:"dismiss-suggestion",title:"❌ Not Now"}]},data:{taskId:e.id,type:"ai-suggestion",reason:n}})}showTeamCollaborationUpdate(e,n,r){const i={started:"▶️",completed:"✅",commented:"💬",updated:"📝"};this.showNotification(`${i[n]||"📋"} Team Update`,{body:`${e} ${n} "${r}"`,tag:`team-update-${Date.now()}`,..."serviceWorker"in navigator&&{actions:[{action:"view-task",title:"👁️ View Task"},{action:"send-message",title:"💬 Send Message"}]},data:{type:"team-collaboration",action:n,teamMemberName:e}})}showWorkloadBalanceAlert(e,n){this.showNotification("⚖️ Workload Balance Alert",{body:`You have ${e} active tasks. ${n}`,tag:"workload-balance",..."serviceWorker"in navigator&&{actions:[{action:"auto-prioritize",title:"🤖 Auto-Prioritize"},{action:"delegate-tasks",title:"👥 Delegate Tasks"},{action:"schedule-break",title:"☕ Schedule Break"}]},data:{type:"workload-balance",currentTasks:e}})}handleTaskAssignment(e,n,r){if(console.log("=== ASSIGNMENT NOTIFICATION DEBUG ==="),console.log("Task assignedTo:",e.assignedTo),console.log("Current user ID:",r),console.log("Assigner name:",n),!e.assignedTo||!e.assignedTo.includes(r))return console.log("Current user not assigned to this task"),"none";console.log("Current user IS assigned to this task");const i=`${n}-${r}`;if(this.pendingAssignments.has(i)){const s=this.pendingAssignments.get(i);clearTimeout(s.timeout);const o=s.count+1;if(o>=3)return console.log("Showing bulk assignment notification for",o,"tasks"),this.showBulkAssignmentNotification(o,n),this.pendingAssignments.delete(i),"bulk";const a=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:o,timeout:a})}else{const s=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:1,timeout:s})}return console.log("Showing single assignment notification"),this.showTaskAssignmentNotification(e,n,r),"single"}showDailyMotivation(){const e=["Ready to crush your goals today? 💪","Every small step counts towards your success! 🌟","Focus on progress, not perfection! 🎯","You've got this! Let's make today productive! 🚀","Time to turn your dreams into achievements! ✨"],n=e[Math.floor(Math.random()*e.length)];this.showNotification("🌅 Good Morning!",{body:n,tag:"daily-motivation"})}scheduleRecurringReminders(e){this.clearAllScheduledNotifications(),e.forEach(n=>{n.dueDate&&n.status!=="completed"&&(this.scheduleTaskReminder(n,15),this.scheduleTaskReminder(n,60),this.scheduleTaskDueNotification(n))})}clearScheduledNotification(e){const n=this.scheduledNotifications.get(e);n&&(clearTimeout(n),this.scheduledNotifications.delete(e))}clearAllScheduledNotifications(){this.scheduledNotifications.forEach(e=>{clearTimeout(e)}),this.scheduledNotifications.clear()}getScheduledNotificationsCount(){return this.scheduledNotifications.size}isPermissionGranted(){return this.permission==="granted"}showDailySummary(e){const{tasksCompleted:n,focusTime:r,sessionsCompleted:i}=e;this.showNotification("📊 Daily Summary",{body:`Today: ${n} tasks completed, ${r}min focused, ${i} sessions`,tag:"daily-summary",requireInteraction:!1})}showWeeklyGoalReminder(){this.showNotification("🎯 Weekly Goals Check-in",{body:"How are you progressing with your weekly goals? Take a moment to review!",tag:"weekly-goals",..."serviceWorker"in navigator&&{actions:[{action:"review-goals",title:"📋 Review Goals"},{action:"update-goals",title:"✏️ Update Goals"}]}})}};Ht(Qc,"instance");let TS=Qc;const Ns=TS.getInstance();"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{const{action:e,data:n}=t.data;switch(e){case"notification-click":console.log("Notification clicked:",n);break;case"notification-action":console.log("Notification action:",n);break}});function nwe(){const t=g.useRef({}),e=g.useCallback(i=>{if(!t.current[i]){const s=new Audio(i);s.preload="auto",s.addEventListener("error",()=>{console.warn(`Sound file not found: ${i}. Skipping audio playback.`)}),t.current[i]=s}return t.current[i]},[]),n=g.useCallback(async i=>{try{const s=e(i);s.currentTime=0;const o=s.play();o!==void 0&&await o}catch{console.warn(`Could not play sound: ${i}. This is likely due to missing audio files or browser restrictions.`)}},[e]),r=g.useCallback(()=>{e("/sounds/iphone_ding.mp3"),e("/sounds/ting.mp3")},[e]);return{playSound:n,preloadSound:e,preloadCommonSounds:r}}const Xz=g.createContext(void 0);function rwe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),{user:s}=vr(),{toast:o}=Xl();g.useEffect(()=>{s?a():n([])},[s]);const a=()=>{if(!s)return;console.log("Setting up notifications real-time listener for user:",s.uid),i(!0);const y=Fl(Gr(Oe,"users",s.uid,"notifications"),Gp("timestamp","desc")),T=oc(y,E=>{console.log("Notifications snapshot received, size:",E.size);const w=[];E.forEach(C=>{w.push({id:C.id,...C.data()})}),n(w),i(!1)},E=>{console.error("Error in notifications listener:",E),o({title:"Connection error",description:"Lost connection to notifications. Retrying...",variant:"destructive"}),i(!1)});return()=>{console.log("Cleaning up notifications listener"),T()}},c=async(y,T)=>{const E=T||(s==null?void 0:s.uid);if(!E){console.warn("Cannot add notification: no target user specified and current user not authenticated");return}try{const w=Gr(Oe,"users",E,"notifications"),C={...y,userId:E,timestamp:new Date().toISOString()};console.log("Adding notification for user:",E,C),await $m(w,C),console.log("Notification added successfully")}catch(w){console.error("Error adding notification:",w),o({title:"Failed to save notification",description:"Could not save the notification.",variant:"destructive"})}},l=async y=>{if(s)try{const T=tt(Oe,"users",s.uid,"notifications",y);await Di(T,{read:!0}),console.log("Notification marked as read:",y)}catch(T){console.error("Error marking notification as read:",T)}},u=async()=>{if(s)try{const y=WI(Oe);e.filter(E=>!E.read).forEach(E=>{const w=tt(Oe,"users",s.uid,"notifications",E.id);y.update(w,{read:!0})}),await y.commit(),console.log("All notifications marked as read"),o({title:"All notifications marked as read",description:"Your notification list has been cleared."})}catch(y){console.error("Error marking all notifications as read:",y),o({title:"Failed to mark notifications as read",description:"Could not update notifications.",variant:"destructive"})}},d=async y=>{if(s)try{const T=tt(Oe,"users",s.uid,"notifications",y);await wc(T),console.log("Notification deleted:",y)}catch(T){console.error("Error deleting notification:",T),o({title:"Failed to delete notification",description:"Could not delete the notification.",variant:"destructive"})}},f=async()=>{if(s)try{const y=WI(Oe);e.forEach(T=>{const E=tt(Oe,"users",s.uid,"notifications",T.id);y.delete(E)}),await y.commit(),console.log("All notifications cleared"),o({title:"All notifications cleared",description:"Your notification history has been cleared."})}catch(y){console.error("Error clearing all notifications:",y),o({title:"Failed to clear notifications",description:"Could not clear notifications.",variant:"destructive"})}},m=e.filter(y=>!y.read).length,_={notifications:e,unreadCount:m,loading:r,addNotification:c,markAsRead:l,markAllAsRead:u,deleteNotification:d,clearAllNotifications:f};return p.jsx(Xz.Provider,{value:_,children:t})}function _x(){const t=g.useContext(Xz);if(t===void 0)throw new Error("useNotifications must be used within a NotificationsContextProvider");return t}const Zz=g.createContext(void 0);function iwe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState([]),[s,o]=g.useState(!0),[a,c]=g.useState(!1),{user:l,userProfile:u}=vr();_x();const{toast:d}=Xl(),{playSound:f,preloadCommonSounds:m}=nwe(),_=U=>U.sort((G,H)=>{const W=G.lastCommentedAt?new Date(G.lastCommentedAt).getTime():0,re=H.lastCommentedAt?new Date(H.lastCommentedAt).getTime():0;if(W!==re)return re-W;const ae={high:3,medium:2,low:1};return ae[G.priority]!==ae[H.priority]?ae[H.priority]-ae[G.priority]:new Date(H.createdAt).getTime()-new Date(G.createdAt).getTime()});g.useEffect(()=>{let U;return l&&u?(U=y(),m()):(n([]),i([]),o(!1)),()=>{U&&(console.log("Cleaning up all real-time listeners."),U())}},[l,u,m]);const y=()=>{if(!l||!u)return;o(!0);const U=[],G=Fl(Gr(Oe,"users",l.uid,"tasks"),Gp("createdAt","desc")),H=oc(G,W=>{const re=W.docs.map(ae=>({id:ae.id,...ae.data()}));n(ae=>{const ve=ae.filter(et=>et.teamId),we=[...re,...ve];return _(we)}),o(!1)},W=>{console.error("Error in personal tasks listener:",W),d({title:"Connection error",description:"Lost connection to personal tasks.",variant:"destructive"}),o(!1)});if(U.push(H),u.teamId){const W=Fl(Gr(Oe,"teams",u.teamId,"tasks"),sd("assignedTo","array-contains",l.uid),Gp("createdAt","desc")),re=oc(W,we=>{const et=we.docs.map(Fe=>({id:Fe.id,...Fe.data()}));n(Fe=>{const dt=[...Fe.filter(Tt=>!Tt.teamId),...et];return _(dt)})},we=>{console.error("Error in team tasks listener:",we),d({title:"Team connection error",description:"Lost connection to team tasks.",variant:"destructive"})});U.push(re);const ae=tt(Oe,"teams",u.teamId),ve=oc(ae,async we=>{if(we.exists()){const Fe=we.data().memberIds||[];if(Fe.length>0){const qe=Fe.map(Kt=>Ao(tt(Oe,"users",Kt))),Tt=(await Promise.all(qe)).filter(Kt=>Kt.exists()).map(Kt=>Kt.data());i(Tt)}else i([])}else i([])},we=>{console.error("Error in team members listener:",we),i([])});U.push(ve)}else i([]);return()=>{U.forEach(W=>W())}},T=async U=>{if(!l||!u)return;const G=`temp-${Date.now()}`,H=!!(u.teamId&&U.assignedTo&&U.assignedTo.length>0),W={...U,id:G,assignedTo:U.assignedTo||[],teamId:H?u.teamId:void 0,createdBy:l.uid,createdAt:new Date().toISOString(),status:"todo",priority:U.priority||"medium",subtasks:U.subtasks||[]};n(re=>_([W,...re])),d({title:"Task created",description:"Your task is being saved..."});try{const{id:re,...ae}=W;ae.teamId||delete ae.teamId;const ve=H?`teams/${u.teamId}/tasks`:`users/${l.uid}/tasks`,we=await $m(Gr(Oe,ve),ae),et={...W,id:we.id};if(n(Fe=>_(Fe.map(qe=>qe.id===G?et:qe))),et.dueDate&&(Ns.scheduleTaskReminder(et,15),Ns.scheduleTaskDueNotification(et)),et.assignedTo&&et.assignedTo.length>0){const Fe=u.displayName||l.email||"Someone";for(const qe of et.assignedTo)qe!==l.uid&&(console.log("Sending task assignment notification to user:",qe),Ns.handleTaskAssignment(et,Fe,qe))}}catch(re){n(ae=>_(ae.filter(ve=>ve.id!==G))),console.error("Error adding task:",re),d({title:"Failed to create task",variant:"destructive"})}},E=async(U,G)=>{if(!l||!u){d({title:"Authentication required",variant:"destructive"});return}const H=e.find(Fe=>Fe.id===U);if(!H){d({title:"Task not found",variant:"destructive"});return}const W=H.assignedTo||[],re=G.assignedTo||W,ve=!!(u.teamId&&re.length>0)?u.teamId:null,we=(H.teamId||null)!==ve,et={...H,...G,teamId:ve||void 0};et.teamId||delete et.teamId,n(Fe=>_(Fe.map(qe=>qe.id===U?et:qe)));try{const Fe=re.filter(dt=>!W.includes(dt));if(Fe.length>0){const dt=u.displayName||l.email||"Someone";for(const Tt of Fe)Tt!==l.uid&&(console.log("Sending task assignment notification to user:",Tt),Ns.handleTaskAssignment(et,dt,Tt))}const qe={...G};if(Object.entries(qe).forEach(([dt,Tt])=>{Tt===void 0&&(qe[dt]=dC())}),qe.teamId=ve||dC(),we){const dt=tt(Oe,H.teamId?`teams/${H.teamId}/tasks`:`users/${l.uid}/tasks`,U);await wc(dt);const Tt=tt(Oe,ve?`teams/${ve}/tasks`:`users/${l.uid}/tasks`,U),{id:Kt,...Re}=et,Pe={};Object.entries(Re).forEach(([Rt,qt])=>{qt!==void 0&&(Pe[Rt]=qt)}),await Kf(Tt,Pe)}else{const dt=tt(Oe,H.teamId?`teams/${H.teamId}/tasks`:`users/${l.uid}/tasks`,U);await Di(dt,qe)}d({title:"Task updated",description:"Your changes have been saved."})}catch(Fe){n(qe=>_(qe.map(dt=>dt.id===U?H:dt))),console.error("Error updating task:",Fe),d({title:"Failed to update task",variant:"destructive"})}},w=async U=>{if(!l)return;const G=e.find(H=>H.id===U);if(G){n(H=>_(H.filter(W=>W.id!==U)));try{const H=G.teamId?`teams/${G.teamId}/tasks/${U}`:`users/${l.uid}/tasks/${U}`;await wc(tt(Oe,H)),Ns.clearScheduledNotification(`task-reminder-${U}`),Ns.clearScheduledNotification(`task-due-${U}`),d({title:"Task deleted",variant:"destructive"})}catch(H){n(W=>_([...W,G])),console.error("Error deleting task:",H),d({title:"Failed to delete task",variant:"destructive"})}}},C=async U=>{if(!l)return;const G=e.find(ae=>ae.id===U);if(!G)return;const H={...G},W=G.status==="completed"?"todo":"completed",re={...G,status:W};W==="completed"?re.completedAt=new Date().toISOString():delete re.completedAt,n(ae=>_(ae.map(ve=>ve.id===U?re:ve)));try{W==="completed"&&(f(G1),Ns.showTaskCompleteNotification(G.title),await Ns.addInAppNotification(l.uid,"Task completed! 🎯",`Great job completing "${G.title}"!`,"task-complete",{taskId:U,taskTitle:G.title}));const ae=G.teamId?`teams/${G.teamId}/tasks/${U}`:`users/${l.uid}/tasks/${U}`,ve={status:W,completedAt:W==="completed"?re.completedAt:dC()};await Di(tt(Oe,ae),ve)}catch(ae){n(ve=>_(ve.map(we=>we.id===U?H:we))),console.error("Error toggling task status:",ae),d({title:"Failed to update task",variant:"destructive"})}},S=async U=>{if(!l)return;const G=e.find(W=>W.id===U);if(!G)return;const H=G.priority==="high"?"medium":"high";n(W=>_(W.map(re=>re.id===U?{...re,priority:H}:re)));try{const W=G.teamId?`teams/${G.teamId}/tasks/${U}`:`users/${l.uid}/tasks/${U}`;await Di(tt(Oe,W),{priority:H})}catch(W){n(re=>_(re.map(ae=>ae.id===U?{...ae,priority:G.priority}:ae))),console.error("Error toggling task priority:",W),d({title:"Failed to update priority",variant:"destructive"})}},M=async(U,G)=>{if(!l)return;const H=e.find(ae=>ae.id===U);if(!H)return;const W={...H},re=(H.timeSpent||0)+G;n(ae=>_(ae.map(ve=>ve.id===U?{...ve,timeSpent:re}:ve)));try{const ae=H.teamId?`teams/${H.teamId}/tasks/${U}`:`users/${l.uid}/tasks/${U}`;await Di(tt(Oe,ae),{timeSpent:re})}catch(ae){throw n(ve=>_(ve.map(we=>we.id===U?W:we))),console.error("Error updating task time:",ae),ae}},D=async(U,G)=>{if(!l)return;const H=e.find(ae=>ae.id===U);if(!H)return;const W={id:`sub-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,title:G,isCompleted:!1,createdAt:new Date().toISOString()},re=[...H.subtasks||[],W];await E(U,{subtasks:re}),d({title:"Subtask added!"})},A=async(U,G)=>{if(!l)return;const H=e.find(ve=>ve.id===U);if(!H||!H.subtasks)return;const W=H.subtasks.map(ve=>ve.id===G?{...ve,isCompleted:!ve.isCompleted}:ve),re=W.find(ve=>ve.id===G);re!=null&&re.isCompleted&&f(G1);const ae=W.every(ve=>ve.isCompleted);ae&&H.status!=="completed"?(await E(U,{subtasks:W}),await C(U),d({title:"Subtask updated!",description:"All subtasks completed! Parent task marked as complete."})):!ae&&H.status==="completed"?(await E(U,{subtasks:W}),await C(U),d({title:"Subtask updated!",description:"Parent task status reverted to 'todo'."})):(await E(U,{subtasks:W}),d({title:"Subtask updated!"}))},I=async(U,G)=>{if(!l)return;const H=e.find(re=>re.id===U);if(!H||!H.subtasks)return;const W=H.subtasks.filter(re=>re.id!==G);await E(U,{subtasks:W}),d({title:"Subtask deleted!",variant:"destructive"})},k=async(U,G)=>{if(!l)return;const H=e.find(ae=>ae.id===U);if(!H)return;const W=H.lastCommentedAt?new Date(H.lastCommentedAt).getTime():0;if(new Date(G).getTime()>W){n(ae=>_(ae.map(ve=>ve.id===U?{...ve,lastCommentedAt:G}:ve)));try{const ae=H.teamId?`teams/${H.teamId}/tasks/${U}`:`users/${l.uid}/tasks/${U}`;await Di(tt(Oe,ae),{lastCommentedAt:G})}catch(ae){console.error("Error updating task lastCommentedAt:",ae)}}},x=(U,G)=>e.filter(H=>{const W=new Date(H.createdAt);return W>=U&&W<=G}),N=U=>e.filter(G=>G.status===U),P=U=>e.filter(G=>G.priority===U),R=U=>{const G=new Date(U);G.setHours(0,0,0,0);const H=new Date(U);return H.setHours(23,59,59,999),e.filter(W=>{if(W.status!=="completed"||!W.completedAt)return!1;const re=new Date(W.completedAt);return re>=G&&re<=H})},j={tasks:e,teamMembers:r,loading:s,isTaskFormActive:a,setTaskFormActive:c,addTask:T,updateTask:E,deleteTask:w,toggleTaskStatus:C,toggleTaskPriority:S,updateTaskTimeSpent:M,addSubtask:D,toggleSubtaskStatus:A,deleteSubtask:I,updateTaskLastCommentedAt:k,getTasksByDateRange:x,getTasksByStatus:N,getTasksByPriority:P,getTasksCompletedOnDate:R,getTotalTasksCount:()=>e.length,getCompletedTasksCount:()=>e.filter(U=>U.status==="completed").length,getActiveTasksCount:()=>e.filter(U=>U.status!=="completed").length,getCurrentStreak:()=>{if(e.length===0)return 0;let U=0,G=new Date;for(;R(G).length>0;)U++,G.setDate(G.getDate()-1);return U},getLongestStreak:()=>{if(e.length===0)return 0;const U=[...new Set(e.filter(W=>W.status==="completed"&&W.completedAt).map(W=>new Date(W.completedAt).setHours(0,0,0,0)))].sort((W,re)=>W-re);if(U.length===0)return 0;let G=0,H=1;for(let W=1;W<U.length;W++)U[W]-U[W-1]===864e5?H++:(G=Math.max(G,H),H=1);return Math.max(G,H)}};return p.jsx(Zz.Provider,{value:j,children:t})}function VT(){const t=g.useContext(Zz);if(t===void 0)throw new Error("useTasks must be used within a TasksContextProvider");return t}const e5=g.createContext(void 0);function t5({children:t}){const{user:e}=vr(),{teamMembers:n}=VT(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),l=async y=>{if(e)try{const T=Pu(Nu,`presence/${e.uid}`);await uS(T,{online:y,lastSeen:Date.now()})}catch(T){console.error("Error updating online status:",T)}};g.useEffect(()=>{if(!e)return;l(!0);const y=()=>{l(!1)};window.addEventListener("beforeunload",y);const T=()=>{l(!document.hidden)};return document.addEventListener("visibilitychange",T),()=>{l(!1),window.removeEventListener("beforeunload",y),document.removeEventListener("visibilitychange",T)}},[e]),g.useEffect(()=>{if(!n.length)return;const y=[];return n.forEach(T=>{const E=Pu(Nu,`presence/${T.uid}`);LD(E,w=>{const C=w.val();C&&i(S=>({...S,[T.uid]:{online:C.online||!1,lastSeen:C.lastSeen||Date.now()}}))}),y.push(()=>y6(E))}),()=>{y.forEach(T=>T())}},[n]);const u=Object.values(s).reduce((y,T)=>y+T,0),d=async(y,T)=>{if(e)try{const E=Pu(Nu,`messageStatus/${y}/${T}/${e.uid}`);await uS(E,{read:!0,readAt:Date.now()})}catch(E){console.error("Error marking message as read:",E)}},f=async(y,T)=>{if(!(!e||T.length===0))try{const E={},w={read:!0,readAt:Date.now()};T.forEach(C=>{E[`messageStatus/${y}/${C}/${e.uid}`]=w}),await mpe(Pu(Nu),E)}catch(E){console.error("Error marking messages as read:",E)}},_={onlineStatus:r,unreadCounts:s,messageStatus:a,totalUnreadCount:u,markMessageAsRead:d,markChatAsRead:async y=>{if(e)try{o(E=>({...E,[y]:0}));const T=Pu(Nu,`chats/${y}/messages`);LD(T,async E=>{const w=E.val();if(w){const C=Object.keys(w);await f(y,C)}},{onlyOnce:!0})}catch(T){console.error("Error marking chat as read:",T)}},markMessagesAsReadBatch:f,updateOnlineStatus:l};return p.jsx(e5.Provider,{value:_,children:t})}function swe(){const t=g.useContext(e5);if(t===void 0)throw new Error("useTeamChat must be used within a TeamChatProvider");return t}const owe=[{title:"Dashboard",url:"/",icon:aI},{title:"Tasks",url:"/tasks",icon:Pd},{title:"Team Chat",url:"/team-chat",icon:R4},{title:"Meetly",url:"/meetly",icon:S4},{title:"Focus Timer",url:"/timer",icon:WZ},{title:"AI Assistant",url:"/chat",icon:wZ},{title:"Calendar",url:"/calendar",icon:E4},{title:"Notes",url:"/notes",icon:dZ},{title:"Analytics",url:"/analytics",icon:aI}],awe=t=>[{title:"Profile",url:"/profile",icon:Pw,auth:!0}];function cwe({className:t}){const{state:e,toggleSidebar:n}=cu(),{theme:r,setTheme:i}=V4(),{totalUnreadCount:s}=swe(),a=xc().pathname,c=e==="collapsed",l=_=>!!(_==="/"&&a==="/"||_!=="/"&&a.startsWith(_)),u=_=>{const y="transition-smooth hover-lift relative group rounded-lg font-medium";return l(_)?te(y,"bg-gradient-to-r from-primary/10 to-primary/5 text-primary shadow-elegant border border-primary/20"):te(y,"hover:bg-muted/60 hover:shadow-medium text-muted-foreground hover:text-foreground")},{user:d,signOutUser:f}=vr(),m=()=>{i(r==="dark"?"light":"dark")};return p.jsxs(qz,{className:te("border-r border-border/50 bg-card/50 backdrop-blur-sm transition-smooth shadow-elegant",c?"w-16":"w-72",t),children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50 bg-gradient-to-r from-background to-muted/20",children:[!c&&p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"gradient-primary h-10 w-10 rounded-xl flex items-center justify-center shadow-glow animate-pulse-glow",children:p.jsx(Pd,{className:"h-5 w-5 text-white"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-bold text-gradient tracking-tight",children:"Taskly"}),p.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Premium Task Management"})]})]}),c&&p.jsx("div",{className:"flex items-center justify-center",children:p.jsx("div",{className:"gradient-primary h-8 w-8 rounded-lg flex items-center justify-center shadow-glow",children:p.jsx(Pd,{className:"h-4 w-4 text-white"})})}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(at,{variant:"ghost",size:"icon",onClick:m,className:"hover-scale h-8 w-8",title:`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?p.jsx(HZ,{className:"h-4 w-4"}):p.jsx(IZ,{className:"h-4 w-4"})}),p.jsx(at,{variant:"ghost",size:"icon",onClick:n,className:"hover-scale h-8 w-8",children:p.jsx(tu,{className:"h-4 w-4"})})]})]}),p.jsxs(Yz,{className:"px-2",children:[p.jsxs(gS,{children:[p.jsx(yS,{className:c?"sr-only":"",children:"Main Navigation"}),p.jsx(vS,{children:p.jsx(_S,{children:owe.map(_=>p.jsx(jy,{children:p.jsx(Vy,{asChild:!0,children:p.jsxs(QN,{to:_.url,className:u(_.url),children:[p.jsx(_.icon,{className:"h-4 w-4"}),!c&&p.jsx("span",{children:_.title}),_.url==="/team-chat"&&s>0&&!c&&p.jsx(_i,{variant:"destructive",className:"ml-auto h-5 w-5 flex items-center justify-center p-0 text-xs",children:s>99?"99+":s})]})})},_.title))})})]}),p.jsxs(gS,{className:"mt-auto",children:[p.jsx(yS,{className:c?"sr-only":"",children:"Account"}),p.jsx(vS,{children:p.jsxs(_S,{children:[awe().map(_=>p.jsx(jy,{children:p.jsx(Vy,{asChild:!0,children:p.jsxs(QN,{to:_.url,className:u(_.url),children:[p.jsx(_.icon,{className:"h-4 w-4"}),!c&&p.jsx("span",{children:_.title})]})})},_.title)),p.jsx(Qz,{}),p.jsx(jy,{children:p.jsxs(Vy,{onClick:f,className:te("transition-smooth hover-scale","hover:bg-destructive/10 hover:text-destructive"),children:[p.jsx(I4,{className:"h-4 w-4"}),!c&&p.jsx("span",{children:"Sign Out"})]})})]})})]})]})]})}var n5={exports:{}},r5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=g;function lwe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uwe=typeof Object.is=="function"?Object.is:lwe,dwe=Qd.useState,hwe=Qd.useEffect,fwe=Qd.useLayoutEffect,pwe=Qd.useDebugValue;function mwe(t,e){var n=e(),r=dwe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return fwe(function(){i.value=n,i.getSnapshot=e,jC(i)&&s({inst:i})},[t,n,e]),hwe(function(){return jC(i)&&s({inst:i}),t(function(){jC(i)&&s({inst:i})})},[t]),pwe(n),n}function jC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uwe(t,n)}catch{return!0}}function gwe(t,e){return e()}var ywe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gwe:mwe;r5.useSyncExternalStore=Qd.useSyncExternalStore!==void 0?Qd.useSyncExternalStore:ywe;n5.exports=r5;var vwe=n5.exports;function _we(){return vwe.useSyncExternalStore(wwe,()=>!0,()=>!1)}function wwe(){return()=>{}}var wx="Avatar",[Twe,TIe]=Ii(wx),[Ewe,i5]=Twe(wx),s5=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=g.useState("idle");return p.jsx(Ewe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:p.jsx(je.span,{...r,ref:e})})});s5.displayName=wx;var o5="AvatarImage",a5=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=i5(o5,n),a=Cwe(r,s),c=pn(l=>{i(l),o.onImageLoadingStatusChange(l)});return Ti(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?p.jsx(je.img,{...s,ref:e,src:r}):null});a5.displayName=o5;var c5="AvatarFallback",l5=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=i5(c5,n),[o,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?p.jsx(je.span,{...i,ref:e}):null});l5.displayName=c5;function bL(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Cwe(t,{referrerPolicy:e,crossOrigin:n}){const r=_we(),i=g.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=g.useState(()=>bL(s,t));return Ti(()=>{a(bL(s,t))},[s,t]),Ti(()=>{const c=d=>()=>{a(d)};if(!s)return;const l=c("loaded"),u=c("error");return s.addEventListener("load",l),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",l),s.removeEventListener("error",u)}},[s,n,e]),o}var u5=s5,d5=a5,h5=l5;const f5=g.forwardRef(({className:t,...e},n)=>p.jsx(u5,{ref:n,className:te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));f5.displayName=u5.displayName;const p5=g.forwardRef(({className:t,...e},n)=>p.jsx(d5,{ref:n,className:te("aspect-square h-full w-full",t),...e}));p5.displayName=d5.displayName;const m5=g.forwardRef(({className:t,...e},n)=>p.jsx(h5,{ref:n,className:te("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));m5.displayName=h5.displayName;var bwe=g.createContext(void 0);function $T(t){const e=g.useContext(bwe);return t||e||"ltr"}var VC="rovingFocusGroup.onEntryFocus",Iwe={bubbles:!1,cancelable:!0},Jm="RovingFocusGroup",[ES,g5,Swe]=Bk(Jm),[Awe,BT]=Ii(Jm,[Swe]),[kwe,Rwe]=Awe(Jm),y5=g.forwardRef((t,e)=>p.jsx(ES.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(ES.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(xwe,{...t,ref:e})})}));y5.displayName=Jm;var xwe=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=t,f=g.useRef(null),m=It(e,f),_=$T(s),[y,T]=eu({prop:o,defaultProp:a??null,onChange:c,caller:Jm}),[E,w]=g.useState(!1),C=pn(l),S=g5(n),M=g.useRef(!1),[D,A]=g.useState(0);return g.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(VC,C),()=>I.removeEventListener(VC,C)},[C]),p.jsx(kwe,{scope:n,orientation:r,dir:_,loop:i,currentTabStopId:y,onItemFocus:g.useCallback(I=>T(I),[T]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>A(I=>I+1),[]),onFocusableItemRemove:g.useCallback(()=>A(I=>I-1),[]),children:p.jsx(je.div,{tabIndex:E||D===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:Ce(t.onMouseDown,()=>{M.current=!0}),onFocus:Ce(t.onFocus,I=>{const k=!M.current;if(I.target===I.currentTarget&&k&&!E){const x=new CustomEvent(VC,Iwe);if(I.currentTarget.dispatchEvent(x),!x.defaultPrevented){const N=S().filter(fe=>fe.focusable),P=N.find(fe=>fe.active),R=N.find(fe=>fe.id===y),he=[P,R,...N].filter(Boolean).map(fe=>fe.ref.current);w5(he,u)}}M.current=!1}),onBlur:Ce(t.onBlur,()=>w(!1))})})}),v5="RovingFocusGroupItem",_5=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=jo(),l=s||c,u=Rwe(v5,n),d=u.currentTabStopId===l,f=g5(n),{onFocusableItemAdd:m,onFocusableItemRemove:_,currentTabStopId:y}=u;return g.useEffect(()=>{if(r)return m(),()=>_()},[r,m,_]),p.jsx(ES.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:p.jsx(je.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Ce(t.onMouseDown,T=>{r?u.onItemFocus(l):T.preventDefault()}),onFocus:Ce(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:Ce(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){u.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const E=Owe(T,u.orientation,u.dir);if(E!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let C=f().filter(S=>S.focusable).map(S=>S.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const S=C.indexOf(T.currentTarget);C=u.loop?Mwe(C,S+1):C.slice(S+1)}setTimeout(()=>w5(C))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:y!=null}):o})})});_5.displayName=v5;var Pwe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Nwe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Owe(t,e,n){const r=Nwe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Pwe[r]}function w5(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Mwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var T5=y5,E5=_5,CS=["Enter"," "],Dwe=["ArrowDown","PageUp","Home"],C5=["ArrowUp","PageDown","End"],Lwe=[...Dwe,...C5],Fwe={ltr:[...CS,"ArrowRight"],rtl:[...CS,"ArrowLeft"]},Uwe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xm="Menu",[sm,jwe,Vwe]=Bk(Xm),[lu,b5]=Ii(Xm,[Vwe,yh,BT]),HT=yh(),I5=BT(),[$we,uu]=lu(Xm),[Bwe,Zm]=lu(Xm),S5=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=HT(e),[c,l]=g.useState(null),u=g.useRef(!1),d=pn(s),f=$T(i);return g.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),p.jsx(o0,{...a,children:p.jsx($we,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:l,children:p.jsx(Bwe,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};S5.displayName=Xm;var Hwe="MenuAnchor",Tx=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=HT(n);return p.jsx(Dw,{...i,...r,ref:e})});Tx.displayName=Hwe;var Ex="MenuPortal",[zwe,A5]=lu(Ex,{forceMount:void 0}),k5=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=uu(Ex,e);return p.jsx(zwe,{scope:e,forceMount:n,children:p.jsx(nr,{present:n||s.open,children:p.jsx(bm,{asChild:!0,container:i,children:r})})})};k5.displayName=Ex;var ji="MenuContent",[Wwe,Cx]=lu(ji),R5=g.forwardRef((t,e)=>{const n=A5(ji,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=uu(ji,t.__scopeMenu),o=Zm(ji,t.__scopeMenu);return p.jsx(sm.Provider,{scope:t.__scopeMenu,children:p.jsx(nr,{present:r||s.open,children:p.jsx(sm.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(Kwe,{...i,ref:e}):p.jsx(qwe,{...i,ref:e})})})})}),Kwe=g.forwardRef((t,e)=>{const n=uu(ji,t.__scopeMenu),r=g.useRef(null),i=It(e,r);return g.useEffect(()=>{const s=r.current;if(s)return mx(s)},[]),p.jsx(bx,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ce(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),qwe=g.forwardRef((t,e)=>{const n=uu(ji,t.__scopeMenu);return p.jsx(bx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Gwe=Nl("MenuContent.ScrollLock"),bx=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:m,disableOutsideScroll:_,...y}=t,T=uu(ji,n),E=Zm(ji,n),w=HT(n),C=I5(n),S=jwe(n),[M,D]=g.useState(null),A=g.useRef(null),I=It(e,A,T.onContentChange),k=g.useRef(0),x=g.useRef(""),N=g.useRef(0),P=g.useRef(null),R=g.useRef("right"),B=g.useRef(0),he=_?MT:g.Fragment,fe=_?{as:Gwe,allowPinchZoom:!0}:void 0,ye=j=>{var we,et;const U=x.current+j,G=S().filter(Fe=>!Fe.disabled),H=document.activeElement,W=(we=G.find(Fe=>Fe.ref.current===H))==null?void 0:we.textValue,re=G.map(Fe=>Fe.textValue),ae=oTe(re,U,W),ve=(et=G.find(Fe=>Fe.textValue===ae))==null?void 0:et.ref.current;(function Fe(qe){x.current=qe,window.clearTimeout(k.current),qe!==""&&(k.current=window.setTimeout(()=>Fe(""),1e3))})(U),ve&&setTimeout(()=>ve.focus())};g.useEffect(()=>()=>window.clearTimeout(k.current),[]),px();const z=g.useCallback(j=>{var G,H;return R.current===((G=P.current)==null?void 0:G.side)&&cTe(j,(H=P.current)==null?void 0:H.area)},[]);return p.jsx(Wwe,{scope:n,searchRef:x,onItemEnter:g.useCallback(j=>{z(j)&&j.preventDefault()},[z]),onItemLeave:g.useCallback(j=>{var U;z(j)||((U=A.current)==null||U.focus(),D(null))},[z]),onTriggerLeave:g.useCallback(j=>{z(j)&&j.preventDefault()},[z]),pointerGraceTimerRef:N,onPointerGraceIntentChange:g.useCallback(j=>{P.current=j},[]),children:p.jsx(he,{...fe,children:p.jsx(NT,{asChild:!0,trapped:i,onMountAutoFocus:Ce(s,j=>{var U;j.preventDefault(),(U=A.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(hh,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:m,children:p.jsx(T5,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:D,onEntryFocus:Ce(c,j=>{E.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(a0,{role:"menu","aria-orientation":"vertical","data-state":W5(T.open),"data-radix-menu-content":"",dir:E.dir,...w,...y,ref:I,style:{outline:"none",...y.style},onKeyDown:Ce(y.onKeyDown,j=>{const G=j.target.closest("[data-radix-menu-content]")===j.currentTarget,H=j.ctrlKey||j.altKey||j.metaKey,W=j.key.length===1;G&&(j.key==="Tab"&&j.preventDefault(),!H&&W&&ye(j.key));const re=A.current;if(j.target!==re||!Lwe.includes(j.key))return;j.preventDefault();const ve=S().filter(we=>!we.disabled).map(we=>we.ref.current);C5.includes(j.key)&&ve.reverse(),iTe(ve)}),onBlur:Ce(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(k.current),x.current="")}),onPointerMove:Ce(t.onPointerMove,om(j=>{const U=j.target,G=B.current!==j.clientX;if(j.currentTarget.contains(U)&&G){const H=j.clientX>B.current?"right":"left";R.current=H,B.current=j.clientX}}))})})})})})})});R5.displayName=ji;var Qwe="MenuGroup",Ix=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(je.div,{role:"group",...r,ref:e})});Ix.displayName=Qwe;var Ywe="MenuLabel",x5=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(je.div,{...r,ref:e})});x5.displayName=Ywe;var R_="MenuItem",IL="menu.itemSelect",zT=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=Zm(R_,t.__scopeMenu),a=Cx(R_,t.__scopeMenu),c=It(e,s),l=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(IL,{bubbles:!0,cancelable:!0});d.addEventListener(IL,m=>r==null?void 0:r(m),{once:!0}),Hk(d,f),f.defaultPrevented?l.current=!1:o.onClose()}};return p.jsx(P5,{...i,ref:c,disabled:n,onClick:Ce(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),l.current=!0},onPointerUp:Ce(t.onPointerUp,d=>{var f;l.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:Ce(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||CS.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});zT.displayName=R_;var P5=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=Cx(R_,n),a=I5(n),c=g.useRef(null),l=It(e,c),[u,d]=g.useState(!1),[f,m]=g.useState("");return g.useEffect(()=>{const _=c.current;_&&m((_.textContent??"").trim())},[s.children]),p.jsx(sm.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:p.jsx(E5,{asChild:!0,...a,focusable:!r,children:p.jsx(je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:l,onPointerMove:Ce(t.onPointerMove,om(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ce(t.onPointerLeave,om(_=>o.onItemLeave(_))),onFocus:Ce(t.onFocus,()=>d(!0)),onBlur:Ce(t.onBlur,()=>d(!1))})})})}),Jwe="MenuCheckboxItem",N5=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(F5,{scope:t.__scopeMenu,checked:n,children:p.jsx(zT,{role:"menuitemcheckbox","aria-checked":x_(n)?"mixed":n,...i,ref:e,"data-state":Ax(n),onSelect:Ce(i.onSelect,()=>r==null?void 0:r(x_(n)?!0:!n),{checkForDefaultPrevented:!1})})})});N5.displayName=Jwe;var O5="MenuRadioGroup",[Xwe,Zwe]=lu(O5,{value:void 0,onValueChange:()=>{}}),M5=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=pn(r);return p.jsx(Xwe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(Ix,{...i,ref:e})})});M5.displayName=O5;var D5="MenuRadioItem",L5=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=Zwe(D5,t.__scopeMenu),s=n===i.value;return p.jsx(F5,{scope:t.__scopeMenu,checked:s,children:p.jsx(zT,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Ax(s),onSelect:Ce(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});L5.displayName=D5;var Sx="MenuItemIndicator",[F5,eTe]=lu(Sx,{checked:!1}),U5=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=eTe(Sx,n);return p.jsx(nr,{present:r||x_(s.checked)||s.checked===!0,children:p.jsx(je.span,{...i,ref:e,"data-state":Ax(s.checked)})})});U5.displayName=Sx;var tTe="MenuSeparator",j5=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});j5.displayName=tTe;var nTe="MenuArrow",V5=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=HT(n);return p.jsx(c0,{...i,...r,ref:e})});V5.displayName=nTe;var rTe="MenuSub",[EIe,$5]=lu(rTe),Ef="MenuSubTrigger",B5=g.forwardRef((t,e)=>{const n=uu(Ef,t.__scopeMenu),r=Zm(Ef,t.__scopeMenu),i=$5(Ef,t.__scopeMenu),s=Cx(Ef,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,l={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),p.jsx(Tx,{asChild:!0,...l,children:p.jsx(P5,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":W5(n.open),...t,ref:kw(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ce(t.onPointerMove,om(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ce(t.onPointerLeave,om(d=>{var m,_;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const y=(_=n.content)==null?void 0:_.dataset.side,T=y==="right",E=T?-5:5,w=f[T?"left":"right"],C=f[T?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+E,y:d.clientY},{x:w,y:f.top},{x:C,y:f.top},{x:C,y:f.bottom},{x:w,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ce(t.onKeyDown,d=>{var m;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Fwe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});B5.displayName=Ef;var H5="MenuSubContent",z5=g.forwardRef((t,e)=>{const n=A5(ji,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=uu(ji,t.__scopeMenu),o=Zm(ji,t.__scopeMenu),a=$5(H5,t.__scopeMenu),c=g.useRef(null),l=It(e,c);return p.jsx(sm.Provider,{scope:t.__scopeMenu,children:p.jsx(nr,{present:r||s.open,children:p.jsx(sm.Slot,{scope:t.__scopeMenu,children:p.jsx(bx,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ce(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ce(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Ce(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),f=Uwe[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});z5.displayName=H5;function W5(t){return t?"open":"closed"}function x_(t){return t==="indeterminate"}function Ax(t){return x_(t)?"indeterminate":t?"checked":"unchecked"}function iTe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function sTe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function oTe(t,e,n){const i=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=sTe(t,Math.max(s,0));i.length===1&&(o=o.filter(l=>l!==n));const c=o.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function aTe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,f=c.y;u>r!=f>r&&n<(d-l)*(r-u)/(f-u)+l&&(i=!i)}return i}function cTe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return aTe(n,e)}function om(t){return e=>e.pointerType==="mouse"?t(e):void 0}var lTe=S5,uTe=Tx,dTe=k5,hTe=R5,fTe=Ix,pTe=x5,mTe=zT,gTe=N5,yTe=M5,vTe=L5,_Te=U5,wTe=j5,TTe=V5,ETe=B5,CTe=z5,WT="DropdownMenu",[bTe,CIe]=Ii(WT,[b5]),Lr=b5(),[ITe,K5]=bTe(WT),q5=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Lr(e),l=g.useRef(null),[u,d]=eu({prop:i,defaultProp:s??!1,onChange:o,caller:WT});return p.jsx(ITe,{scope:e,triggerId:jo(),triggerRef:l,contentId:jo(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a,children:p.jsx(lTe,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};q5.displayName=WT;var G5="DropdownMenuTrigger",Q5=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=K5(G5,n),o=Lr(n);return p.jsx(uTe,{asChild:!0,...o,children:p.jsx(je.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:kw(e,s.triggerRef),onPointerDown:Ce(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Ce(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Q5.displayName=G5;var STe="DropdownMenuPortal",Y5=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Lr(e);return p.jsx(dTe,{...r,...n})};Y5.displayName=STe;var J5="DropdownMenuContent",X5=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=K5(J5,n),s=Lr(n),o=g.useRef(!1);return p.jsx(hTe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Ce(t.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ce(t.onInteractOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});X5.displayName=J5;var ATe="DropdownMenuGroup",kTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(fTe,{...i,...r,ref:e})});kTe.displayName=ATe;var RTe="DropdownMenuLabel",Z5=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(pTe,{...i,...r,ref:e})});Z5.displayName=RTe;var xTe="DropdownMenuItem",e9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(mTe,{...i,...r,ref:e})});e9.displayName=xTe;var PTe="DropdownMenuCheckboxItem",t9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(gTe,{...i,...r,ref:e})});t9.displayName=PTe;var NTe="DropdownMenuRadioGroup",OTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(yTe,{...i,...r,ref:e})});OTe.displayName=NTe;var MTe="DropdownMenuRadioItem",n9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(vTe,{...i,...r,ref:e})});n9.displayName=MTe;var DTe="DropdownMenuItemIndicator",r9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(_Te,{...i,...r,ref:e})});r9.displayName=DTe;var LTe="DropdownMenuSeparator",i9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(wTe,{...i,...r,ref:e})});i9.displayName=LTe;var FTe="DropdownMenuArrow",UTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(TTe,{...i,...r,ref:e})});UTe.displayName=FTe;var jTe="DropdownMenuSubTrigger",s9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(ETe,{...i,...r,ref:e})});s9.displayName=jTe;var VTe="DropdownMenuSubContent",o9=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lr(n);return p.jsx(CTe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});o9.displayName=VTe;var $Te=q5,BTe=Q5,HTe=Y5,a9=X5,c9=Z5,l9=e9,u9=t9,d9=n9,h9=r9,f9=i9,p9=s9,m9=o9;const zTe=$Te,WTe=BTe,KTe=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(p9,{ref:i,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,p.jsx(JX,{className:"ml-auto h-4 w-4"})]}));KTe.displayName=p9.displayName;const qTe=g.forwardRef(({className:t,...e},n)=>p.jsx(m9,{ref:n,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));qTe.displayName=m9.displayName;const g9=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(HTe,{children:p.jsx(a9,{ref:r,sideOffset:e,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));g9.displayName=a9.displayName;const $y=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(l9,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));$y.displayName=l9.displayName;const GTe=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(u9,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(h9,{children:p.jsx(C4,{className:"h-4 w-4"})})}),e]}));GTe.displayName=u9.displayName;const QTe=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(d9,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(h9,{children:p.jsx(nZ,{className:"h-2 w-2 fill-current"})})}),e]}));QTe.displayName=d9.displayName;const YTe=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(c9,{ref:r,className:te("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));YTe.displayName=c9.displayName;const bS=g.forwardRef(({className:t,...e},n)=>p.jsx(f9,{ref:n,className:te("-mx-1 my-1 h-px bg-muted",t),...e}));bS.displayName=f9.displayName;var KT="Popover",[y9,bIe]=Ii(KT,[yh]),eg=yh(),[JTe,Fc]=y9(KT),v9=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=eg(e),c=g.useRef(null),[l,u]=g.useState(!1),[d,f]=eu({prop:r,defaultProp:i??!1,onChange:s,caller:KT});return p.jsx(o0,{...a,children:p.jsx(JTe,{scope:e,contentId:jo(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:n})})};v9.displayName=KT;var _9="PopoverAnchor",XTe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Fc(_9,n),s=eg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return g.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(Dw,{...s,...r,ref:e})});XTe.displayName=_9;var w9="PopoverTrigger",T9=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Fc(w9,n),s=eg(n),o=It(e,i.triggerRef),a=p.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":S9(i.open),...r,ref:o,onClick:Ce(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(Dw,{asChild:!0,...s,children:a})});T9.displayName=w9;var kx="PopoverPortal",[ZTe,eEe]=y9(kx,{forceMount:void 0}),E9=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Fc(kx,e);return p.jsx(ZTe,{scope:e,forceMount:n,children:p.jsx(nr,{present:n||s.open,children:p.jsx(bm,{asChild:!0,container:i,children:r})})})};E9.displayName=kx;var Yd="PopoverContent",C9=g.forwardRef((t,e)=>{const n=eEe(Yd,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Fc(Yd,t.__scopePopover);return p.jsx(nr,{present:r||s.open,children:s.modal?p.jsx(nEe,{...i,ref:e}):p.jsx(rEe,{...i,ref:e})})});C9.displayName=Yd;var tEe=Nl("PopoverContent.RemoveScroll"),nEe=g.forwardRef((t,e)=>{const n=Fc(Yd,t.__scopePopover),r=g.useRef(null),i=It(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return mx(o)},[]),p.jsx(MT,{as:tEe,allowPinchZoom:!0,children:p.jsx(b9,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,l=a.button===2||c;s.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:Ce(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),rEe=g.forwardRef((t,e)=>{const n=Fc(Yd,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(b9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),b9=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=t,f=Fc(Yd,n),m=eg(n);return px(),p.jsx(NT,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(hh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:p.jsx(a0,{"data-state":S9(f.open),role:"dialog",id:f.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),I9="PopoverClose",iEe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Fc(I9,n);return p.jsx(je.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>i.onOpenChange(!1))})});iEe.displayName=I9;var sEe="PopoverArrow",oEe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=eg(n);return p.jsx(c0,{...i,...r,ref:e})});oEe.displayName=sEe;function S9(t){return t?"open":"closed"}var aEe=v9,cEe=T9,lEe=E9,A9=C9;const k9=aEe,R9=cEe,Rx=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(lEe,{children:p.jsx(A9,{ref:i,align:e,sideOffset:n,className:te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Rx.displayName=A9.displayName;function uEe(t,[e,n]){return Math.min(n,Math.max(e,t))}function dEe(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var xx="ScrollArea",[x9,IIe]=Ii(xx),[hEe,zi]=x9(xx),P9=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,c]=g.useState(null),[l,u]=g.useState(null),[d,f]=g.useState(null),[m,_]=g.useState(null),[y,T]=g.useState(null),[E,w]=g.useState(0),[C,S]=g.useState(0),[M,D]=g.useState(!1),[A,I]=g.useState(!1),k=It(e,N=>c(N)),x=$T(i);return p.jsx(hEe,{scope:n,type:r,dir:x,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:u,content:d,onContentChange:f,scrollbarX:m,onScrollbarXChange:_,scrollbarXEnabled:M,onScrollbarXEnabledChange:D,scrollbarY:y,onScrollbarYChange:T,scrollbarYEnabled:A,onScrollbarYEnabledChange:I,onCornerWidthChange:w,onCornerHeightChange:S,children:p.jsx(je.div,{dir:x,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});P9.displayName=xx;var N9="ScrollAreaViewport",O9=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=zi(N9,n),a=g.useRef(null),c=It(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(je.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});O9.displayName=N9;var fo="ScrollAreaScrollbar",Px=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=zi(fo,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return g.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?p.jsx(fEe,{...r,ref:e,forceMount:n}):i.type==="scroll"?p.jsx(pEe,{...r,ref:e,forceMount:n}):i.type==="auto"?p.jsx(M9,{...r,ref:e,forceMount:n}):i.type==="always"?p.jsx(Nx,{...r,ref:e}):null});Px.displayName=fo;var fEe=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=zi(fo,t.__scopeScrollArea),[s,o]=g.useState(!1);return g.useEffect(()=>{const a=i.scrollArea;let c=0;if(a){const l=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(nr,{present:n||s,children:p.jsx(M9,{"data-state":s?"visible":"hidden",...r,ref:e})})}),pEe=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=zi(fo,t.__scopeScrollArea),s=t.orientation==="horizontal",o=GT(()=>c("SCROLL_END"),100),[a,c]=dEe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,c]),g.useEffect(()=>{const l=i.viewport,u=s?"scrollLeft":"scrollTop";if(l){let d=l[u];const f=()=>{const m=l[u];d!==m&&(c("SCROLL"),o()),d=m};return l.addEventListener("scroll",f),()=>l.removeEventListener("scroll",f)}},[i.viewport,s,c,o]),p.jsx(nr,{present:n||a!=="hidden",children:p.jsx(Nx,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ce(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ce(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),M9=g.forwardRef((t,e)=>{const n=zi(fo,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=g.useState(!1),a=t.orientation==="horizontal",c=GT(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:u)}},10);return Jd(n.viewport,c),Jd(n.content,c),p.jsx(nr,{present:r||s,children:p.jsx(Nx,{"data-state":s?"visible":"hidden",...i,ref:e})})}),Nx=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=zi(fo,t.__scopeScrollArea),s=g.useRef(null),o=g.useRef(0),[a,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=j9(a.viewport,a.content),u={...r,sizes:a,onSizesChange:c,hasThumb:l>0&&l<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function d(f,m){return wEe(f,o.current,a,m)}return n==="horizontal"?p.jsx(mEe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollLeft,m=SL(f,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=d(f,i.dir))}}):n==="vertical"?p.jsx(gEe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollTop,m=SL(f,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=d(f))}}):null}),mEe=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=zi(fo,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=It(e,c,s.onScrollbarXChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(L9,{"data-orientation":"horizontal",...i,ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qT(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const f=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),$9(f,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:N_(o.paddingLeft),paddingEnd:N_(o.paddingRight)}})}})}),gEe=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=zi(fo,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=It(e,c,s.onScrollbarYChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(L9,{"data-orientation":"vertical",...i,ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qT(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const f=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),$9(f,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:N_(o.paddingTop),paddingEnd:N_(o.paddingBottom)}})}})}),[yEe,D9]=x9(fo),L9=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:l,onWheelScroll:u,onResize:d,...f}=t,m=zi(fo,n),[_,y]=g.useState(null),T=It(e,k=>y(k)),E=g.useRef(null),w=g.useRef(""),C=m.viewport,S=r.content-r.viewport,M=pn(u),D=pn(c),A=GT(d,10);function I(k){if(E.current){const x=k.clientX-E.current.left,N=k.clientY-E.current.top;l({x,y:N})}}return g.useEffect(()=>{const k=x=>{const N=x.target;(_==null?void 0:_.contains(N))&&M(x,S)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,_,S,M]),g.useEffect(D,[r,D]),Jd(_,A),Jd(m.content,A),p.jsx(yEe,{scope:n,scrollbar:_,hasThumb:i,onThumbChange:pn(s),onThumbPointerUp:pn(o),onThumbPositionChange:D,onThumbPointerDown:pn(a),children:p.jsx(je.div,{...f,ref:T,style:{position:"absolute",...f.style},onPointerDown:Ce(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),E.current=_.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),I(k))}),onPointerMove:Ce(t.onPointerMove,I),onPointerUp:Ce(t.onPointerUp,k=>{const x=k.target;x.hasPointerCapture(k.pointerId)&&x.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),E.current=null})})})}),P_="ScrollAreaThumb",F9=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=D9(P_,t.__scopeScrollArea);return p.jsx(nr,{present:n||i.hasThumb,children:p.jsx(vEe,{ref:e,...r})})}),vEe=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=zi(P_,n),o=D9(P_,n),{onThumbPositionChange:a}=o,c=It(e,d=>o.onThumbChange(d)),l=g.useRef(void 0),u=GT(()=>{l.current&&(l.current(),l.current=void 0)},100);return g.useEffect(()=>{const d=s.viewport;if(d){const f=()=>{if(u(),!l.current){const m=TEe(d,a);l.current=m,a()}};return a(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[s.viewport,u,a]),p.jsx(je.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ce(t.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),_=d.clientX-m.left,y=d.clientY-m.top;o.onThumbPointerDown({x:_,y})}),onPointerUp:Ce(t.onPointerUp,o.onThumbPointerUp)})});F9.displayName=P_;var Ox="ScrollAreaCorner",U9=g.forwardRef((t,e)=>{const n=zi(Ox,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(_Ee,{...t,ref:e}):null});U9.displayName=Ox;var _Ee=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=zi(Ox,n),[s,o]=g.useState(0),[a,c]=g.useState(0),l=!!(s&&a);return Jd(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Jd(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),l?p.jsx(je.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function N_(t){return t?parseInt(t,10):0}function j9(t,e){const n=t/e;return isNaN(n)?0:n}function qT(t){const e=j9(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function wEe(t,e,n,r="ltr"){const i=qT(n),s=i/2,o=e||s,a=i-o,c=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return V9([c,l],d)(t)}function SL(t,e,n="ltr"){const r=qT(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,c=n==="ltr"?[0,o]:[o*-1,0],l=uEe(t,c);return V9([0,o],[0,a])(l)}function V9(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function $9(t,e){return t>0&&t<e}var TEe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function GT(t,e){const n=pn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Jd(t,e){const n=pn(e);Ti(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var B9=P9,EEe=O9,CEe=U9;const H9=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(B9,{ref:r,className:te("relative overflow-hidden",t),...n,children:[p.jsx(EEe,{className:"h-full w-full rounded-[inherit] touch-pan-y scrollbar-hide",children:e}),p.jsx(z9,{}),p.jsx(CEe,{})]}));H9.displayName=B9.displayName;const z9=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(Px,{ref:r,orientation:e,className:te("flex touch-none select-none transition-colors hidden md:flex",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:p.jsx(F9,{className:"relative flex-1 rounded-full bg-border"})}));z9.displayName=Px.displayName;function bEe(){const{notifications:t,unreadCount:e,markAsRead:n,markAllAsRead:r,deleteNotification:i,clearAllNotifications:s}=_x(),[o,a]=g.useState(!1),c=m=>{const _=new Date(m),T=Math.floor((new Date().getTime()-_.getTime())/(1e3*60));return T<1?"Just now":T<60?`${T}m ago`:T<1440?`${Math.floor(T/60)}h ago`:_.toLocaleDateString()},l=m=>{switch(m){case"task-assignment":return"📋";case"task-complete":return"✅";case"pomodoro-complete":return"🍅";case"team-request":return"👥";default:return"🔔"}},u=async m=>{m.read||await n(m.id)},d=async()=>{await r()},f=async()=>{await s(),a(!1)};return p.jsxs(k9,{open:o,onOpenChange:a,children:[p.jsx(R9,{asChild:!0,children:p.jsxs(at,{variant:"ghost",size:"icon",className:te("relative hover-scale transition-smooth h-9 w-9",e>0&&"text-primary"),children:[p.jsx(H1,{className:"h-4 w-4"}),e>0&&p.jsx(_i,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs font-bold animate-pulse",children:e>99?"99+":e})]})}),p.jsxs(Rx,{className:"w-80 p-0 shadow-elegant",align:"end",children:[p.jsxs("div",{className:"p-4 border-b",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"font-semibold",children:"Notifications"}),p.jsxs("div",{className:"flex items-center gap-2",children:[e>0&&p.jsxs(at,{variant:"ghost",size:"sm",onClick:d,className:"text-xs hover-scale",children:[p.jsx(GX,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.length>0&&p.jsx(at,{variant:"ghost",size:"sm",onClick:f,className:"text-xs hover-scale text-destructive hover:bg-destructive/10",children:p.jsx(qZ,{className:"h-3 w-3"})})]})]}),e>0&&p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e," unread notification",e!==1?"s":""]})]}),p.jsx(H9,{className:"h-[400px]",children:t.length===0?p.jsxs("div",{className:"text-center py-8 px-4",children:[p.jsx(H1,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll see updates about tasks and activities here"})]}):p.jsx("div",{className:"divide-y",children:t.map(m=>p.jsx("div",{className:te("p-4 hover:bg-muted/30 transition-smooth cursor-pointer group",!m.read&&"bg-primary/5 border-l-2 border-l-primary"),onClick:()=>u(m),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"text-lg shrink-0 mt-0.5",children:l(m.type)}),p.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h4",{className:te("text-sm font-medium leading-tight",!m.read&&"font-semibold"),children:m.title}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!m.read&&p.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"}),p.jsx(at,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:_=>{_.stopPropagation(),i(m.id)},children:p.jsx(tu,{className:"h-3 w-3"})})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed line-clamp-2",children:m.body}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:c(m.timestamp)}),!m.read&&p.jsxs(at,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),n(m.id)},className:"text-xs hover-scale opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(C4,{className:"h-3 w-3 mr-1"}),"Mark read"]})]})]})]})},m.id))})})]})]})}const IEe=[{href:"/tasks",label:"Tasks",icon:p.jsx(Pd,{className:"h-5 w-5"})},{href:"/team-chat",label:"Team Chat",icon:p.jsx(R4,{className:"h-5 w-5"})},{href:"/meetly",label:"Meetly",icon:p.jsx(S4,{className:"h-5 w-5"})},{href:"/calendar",label:"Calendar",icon:p.jsx(E4,{className:"h-5 w-5"})},{href:"/notes",label:"Notes",icon:p.jsx(AZ,{className:"h-5 w-5"})},{href:"/analytics",label:"Analytics",icon:p.jsx(aI,{className:"h-5 w-5"})}];function SEe(){const{user:t,userProfile:e,signOutUser:n}=vr(),{state:r}=cu(),i=xc(),s=oh(),[o,a]=g.useState(!1),[c,l]=g.useState(""),u=()=>{const m=i.pathname;return{"/":"Dashboard","/tasks":"Tasks","/timer":"Timer","/chat":"AI Coach","/team-chat":"Team Chat","/meetly":"Meetly","/calendar":"Calendar","/notes":"Notes","/analytics":"Analytics","/profile":"Profile"}[m]||"Dashboard"},d=m=>{m.preventDefault(),c.trim()&&console.log("Searching for:",c)},f=(m,_)=>m&&m.trim()?m.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):_?_.split("@")[0].slice(0,2).toUpperCase():"U";return p.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 pt-safe",children:p.jsxs("div",{className:"flex h-14 items-center px-4",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(Gz,{className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:r==="expanded"?p.jsx(tu,{className:"h-4 w-4"}):p.jsx(vZ,{className:"h-4 w-4"})}),p.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[p.jsx(Ip,{to:"/",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Workspace"}),p.jsx("span",{className:"text-muted-foreground",children:"/"}),p.jsx("span",{className:"font-medium",children:u()})]})]}),p.jsx(u0,{delayDuration:0,children:p.jsx("nav",{className:"hidden md:flex items-center gap-1 ml-6",children:IEe.map(m=>p.jsxs(g$,{children:[p.jsx(y$,{asChild:!0,children:p.jsx(Ip,{to:m.href,"aria-label":m.label,className:te("flex h-9 w-9 items-center justify-center rounded-lg transition-colors hover:bg-accent",i.pathname.startsWith(m.href)?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:m.icon})}),p.jsx(d0,{children:p.jsx("p",{children:m.label})})]},m.href))})}),p.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[p.jsx("div",{className:"w-full max-w-xs",children:p.jsxs(k9,{open:o,onOpenChange:a,children:[p.jsx(R9,{asChild:!0,children:p.jsxs(at,{variant:"outline",className:"w-full justify-start text-sm text-muted-foreground hover:bg-muted",children:[p.jsx(W1,{className:"mr-2 h-4 w-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Search everything..."}),p.jsx("span",{className:"sm:hidden",children:"Search..."}),p.jsx("div",{className:"ml-auto hidden sm:flex items-center gap-1",children:p.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground opacity-100",children:[p.jsx(aZ,{className:"h-3 w-3"}),"K"]})})]})}),p.jsx(Rx,{className:"w-96 p-0",align:"center",children:p.jsx("form",{onSubmit:d,className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(W1,{className:"h-4 w-4 text-muted-foreground"}),p.jsx(ls,{value:c,onChange:m=>l(m.target.value),placeholder:"Search tasks, notes, messages...",className:"border-0 shadow-none focus-visible:ring-0",autoFocus:!0})]})})})]})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(bEe,{}),p.jsxs(zTe,{children:[p.jsx(WTe,{asChild:!0,children:p.jsx(at,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:p.jsxs(f5,{className:"h-8 w-8",children:[p.jsx(p5,{src:(e==null?void 0:e.photoURL)||(t==null?void 0:t.photoURL)||""}),p.jsx(m5,{className:"text-xs bg-primary/10 text-primary",children:f(e==null?void 0:e.displayName,t==null?void 0:t.email)})]})})}),p.jsxs(g9,{className:"w-56",align:"end",forceMount:!0,children:[p.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:p.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[(e==null?void 0:e.displayName)&&p.jsx("p",{className:"font-medium",children:e.displayName}),(t==null?void 0:t.email)&&p.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:t.email})]})}),p.jsx(bS,{}),p.jsxs($y,{onClick:()=>s("/profile"),children:[p.jsx(Pw,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Profile"})]}),p.jsxs($y,{onClick:()=>s("/profile"),children:[p.jsx(UZ,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsx(bS,{}),p.jsxs($y,{onClick:n,className:"text-destructive focus:text-destructive",children:[p.jsx(I4,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Log out"})]})]})]})]})]})]})})}const W9=g.createContext(void 0);function AEe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(!1),[s,o]=g.useState(!0),a=u=>{n(u),i(!0),o(!0)},c=()=>{n(null),i(!1),o(!1)},l=()=>{o(!s)};return p.jsx(W9.Provider,{value:{activeTask:e,isTimerRunning:r,isTimerExpanded:s,startTaskTimer:a,stopTimer:c,toggleTimerSize:l},children:t})}function K9(){const t=g.useContext(W9);if(t===void 0)throw new Error("useTimer must be used within a TimerProvider");return t}const co=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));co.displayName="Card";const na=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:te("flex flex-col space-y-1.5 p-6",t),...e}));na.displayName="CardHeader";const ra=g.forwardRef(({className:t,...e},n)=>p.jsx("h3",{ref:n,className:te("text-2xl font-semibold leading-none tracking-tight",t),...e}));ra.displayName="CardTitle";const Mx=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:te("text-sm text-muted-foreground",t),...e}));Mx.displayName="CardDescription";const lo=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:te("p-6 pt-0",t),...e}));lo.displayName="CardContent";const kEe=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:te("flex items-center p-6 pt-0",t),...e}));kEe.displayName="CardFooter";var Dx="Progress",Lx=100,[REe,SIe]=Ii(Dx),[xEe,PEe]=REe(Dx),q9=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=NEe,...o}=t;(i||i===0)&&!AL(i)&&console.error(OEe(`${i}`,"Progress"));const a=AL(i)?i:Lx;r!==null&&!kL(r,a)&&console.error(MEe(`${r}`,"Progress"));const c=kL(r,a)?r:null,l=O_(c)?s(c,a):void 0;return p.jsx(xEe,{scope:n,value:c,max:a,children:p.jsx(je.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":O_(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":Y9(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});q9.displayName=Dx;var G9="ProgressIndicator",Q9=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=PEe(G9,n);return p.jsx(je.div,{"data-state":Y9(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});Q9.displayName=G9;function NEe(t,e){return`${Math.round(t/e*100)}%`}function Y9(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function O_(t){return typeof t=="number"}function AL(t){return O_(t)&&!isNaN(t)&&t>0}function kL(t,e){return O_(t)&&!isNaN(t)&&t<=e&&t>=0}function OEe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Lx}\`.`}function MEe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Lx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var J9=q9,DEe=Q9;const Fx=g.forwardRef(({className:t,value:e,...n},r)=>p.jsx(J9,{ref:r,className:te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:p.jsx(DEe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Fx.displayName=J9.displayName;function LEe(){const{activeTask:t,isTimerExpanded:e,toggleTimerSize:n,stopTimer:r}=K9(),[i,s]=g.useState("focus"),[o,a]=g.useState(0),[c,l]=g.useState(!1),[u,d]=g.useState(0),{toast:f}=Xl(),m=g.useRef(),_={shortBreak:5,longBreak:15,sessionsUntilLongBreak:4};g.useEffect(()=>{if(t&&i==="focus"){const M=t.estimatedTime||25;a(M*60)}else if(i==="break"){const M=u%_.sessionsUntilLongBreak===0&&u>0;a(M?_.longBreak*60:_.shortBreak*60)}},[t,i,u]);const y=i==="focus"?((t==null?void 0:t.estimatedTime)||25)*60:u%_.sessionsUntilLongBreak===0&&u>0?_.longBreak*60:_.shortBreak*60,T=(y-o)/y*100;g.useEffect(()=>(c&&o>0?m.current=setInterval(()=>{a(M=>M-1)},1e3):(clearInterval(m.current),o===0&&c&&(l(!1),i==="focus"?(d(M=>M+1),s("break"),Y1(Q1),Ns.showPomodoroNotification("focus-complete",u+1),f({title:"Focus session completed! 🎉",description:"Time for a break. Great work!"})):(s("focus"),Y1(Q1),Ns.showPomodoroNotification("break-complete"),f({title:"Break time over! ⚡",description:"Ready to focus again?"})))),()=>clearInterval(m.current)),[c,o,i,u,f]);const E=M=>{const D=Math.floor(M/60),A=M%60;return`${D.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},w=()=>{l(!c)},C=()=>{l(!1);const M=(t==null?void 0:t.estimatedTime)||25;a(i==="focus"?M*60:_.shortBreak*60)},S=()=>{f({title:"Task completed! 🎯",description:`"${t==null?void 0:t.title}" has been marked as complete.`}),r()};return t?p.jsx("div",{className:te("fixed bottom-6 right-6 z-50 transition-all duration-300 ease-in-out",e?"w-96 h-auto":"w-72 h-20"),children:p.jsx(co,{className:te("shadow-elegant border-2 backdrop-blur-sm transition-all duration-300",i==="focus"?"border-focus/30 bg-card/95":"border-break/30 bg-card/95",e&&"shadow-glow"),children:p.jsx(lo,{className:"p-4",children:e?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(qk,{className:"h-4 w-4 text-focus"}),p.jsx(_i,{variant:i==="focus"?"default":"secondary",children:i==="focus"?"Focus":"Break"})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(at,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(CZ,{className:"h-3 w-3"})}),p.jsx(at,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",onClick:r,children:p.jsx(tu,{className:"h-3 w-3"})})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"font-semibold text-sm mb-1",children:t.title}),p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:te("text-4xl font-mono font-bold transition-colors",i==="focus"?"text-focus":"text-break"),children:E(o)}),p.jsx(Fx,{value:T,className:te("h-2 transition-colors",i==="focus"?"[&>div]:bg-focus":"[&>div]:bg-break")})]}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsxs(at,{variant:i==="focus"?"focus":"break",size:"sm",onClick:w,className:"hover-scale flex-1",children:[c?p.jsx(cI,{className:"h-4 w-4 mr-2"}):p.jsx(lI,{className:"h-4 w-4 mr-2"}),c?"Pause":"Start"]}),p.jsx(at,{variant:"outline",size:"sm",onClick:C,className:"hover-scale",children:p.jsx(DZ,{className:"h-4 w-4"})}),i==="focus"&&p.jsx(at,{variant:"outline",size:"sm",onClick:S,className:"hover-scale text-success hover:text-success",children:p.jsx(eZ,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center text-xs",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-focus",children:"Sessions"}),p.jsx("div",{className:"text-lg font-bold",children:u})]}),p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-break",children:"Next Break"}),p.jsx("div",{className:"text-lg font-bold",children:_.sessionsUntilLongBreak-u%_.sessionsUntilLongBreak})]})]})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:te("text-lg font-mono font-bold",i==="focus"?"text-focus":"text-break"),children:E(o)}),p.jsxs(_i,{variant:"secondary",className:"text-xs",children:[t.title.slice(0,12),"..."]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(at,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:w,children:c?p.jsx(cI,{className:"h-3 w-3"}):p.jsx(lI,{className:"h-3 w-3"})}),p.jsx(at,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(gZ,{className:"h-3 w-3"})})]})]})})})}):null}const X9=g.createContext(void 0);function FEe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(0),[s,o]=g.useState(!1),[a,c]=g.useState(null),{user:l}=vr(),{updateTaskTimeSpent:u}=VT(),{toast:d}=Xl();g.useEffect(()=>{if(!l)return;const w=tt(Oe,"users",l.uid,"activeTracking","currentSession"),C=oc(w,S=>{if(S.exists()){const M=S.data();if((!e||e.id!==M.taskId)&&n({id:M.taskId,title:M.taskTitle}),o(!M.isPaused),M.isPaused&&M.pausedAt)i(M.accumulatedSeconds),c(null);else{c(M.startTime);const D=Math.floor((Date.now()-M.startTime)/1e3);i(M.accumulatedSeconds+D)}}});return()=>C()},[l]),g.useEffect(()=>{let w;return s&&e&&(w=setInterval(()=>{i(C=>C+1)},1e3)),()=>{w&&clearInterval(w)}},[s,e]);const f=async w=>{if(!l)return;e&&e.id!==w.id&&await y();const C=Date.now(),S={taskId:w.id,taskTitle:w.title,startTime:C,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const M=tt(Oe,"users",l.uid,"activeTracking","currentSession");await Kf(M,S),n(w),i(0),o(!0),c(C),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_TIME_TRACKING",session:S}),d({title:"Time tracking started",description:`Now tracking time for "${w.title}"`})}catch(M){console.error("Error starting tracking:",M),d({title:"Failed to start tracking",variant:"destructive"})}},m=async()=>{if(!(!e||!l||!a))try{const w=Date.now(),C=Math.floor((w-a)/1e3),S=r,M=tt(Oe,"users",l.uid,"activeTracking","currentSession"),D=await Ao(M);D.exists()&&await Kf(M,{...D.data(),pausedAt:w,isPaused:!0,accumulatedSeconds:S}),o(!1),c(null),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_TIME_TRACKING"}),d({title:"Time tracking paused",description:`Paused tracking for "${e.title}"`})}catch(w){console.error("Error pausing tracking:",w),d({title:"Failed to pause tracking",variant:"destructive"})}},_=async()=>{if(!(!e||!l))try{const w=Date.now(),C=tt(Oe,"users",l.uid,"activeTracking","currentSession"),S=await Ao(C);S.exists()&&await Kf(C,{...S.data(),startTime:w,pausedAt:null,isPaused:!1}),o(!0),c(w),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_TIME_TRACKING"}),d({title:"Time tracking resumed",description:`Resumed tracking for "${e.title}"`})}catch(w){console.error("Error resuming tracking:",w),d({title:"Failed to resume tracking",variant:"destructive"})}},y=async()=>{if(!e||!l){n(null),i(0),o(!1),c(null);return}try{const w=tt(Oe,"users",l.uid,"activeTracking","currentSession"),C=await Ao(w);let S=r;if(C.exists()&&!s)S=C.data().accumulatedSeconds;else if(a&&s){const M=Math.floor((Date.now()-a)/1e3),D=C.exists()?C.data():null;S=((D==null?void 0:D.accumulatedSeconds)||0)+M}if(S>0){await u(e.id,S);const M=T(S);d({title:"Time tracking stopped",description:`Saved ${M} for "${e.title}"`})}await wc(w),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_TIME_TRACKING"})}catch(w){console.error("Error stopping tracking:",w),d({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{n(null),i(0),o(!1),c(null)}},T=w=>{if(typeof w!="number"||isNaN(w)||w<0)return"0s";const C=Math.floor(w/3600),S=Math.floor(w%3600/60),M=Math.floor(w%60);return C>0?`${C}h ${S.toString().padStart(2,"0")}m`:S>0?`${S}m ${M.toString().padStart(2,"0")}s`:`${M}s`},E={trackingTask:e,currentSessionElapsedSeconds:r,isTracking:s,startTracking:f,pauseTracking:m,resumeTracking:_,stopTracking:y,getFormattedTime:T};return p.jsx(X9.Provider,{value:E,children:t})}function UEe(){const t=g.useContext(X9);if(t===void 0)throw new Error("useTaskTimeTracker must be used within a TaskTimeTrackerProvider");return t}function jEe(){const{trackingTask:t,currentSessionElapsedSeconds:e,isTracking:n,pauseTracking:r,resumeTracking:i,stopTracking:s,getFormattedTime:o}=UEe();if(!t)return null;const a=(t.estimatedTime||0)*60,c=a>0?Math.min(e/a*100,100):0,l=a>0&&e>a;return p.jsxs(co,{className:te("fixed bottom-6 left-6 z-50 w-80 shadow-elegant border-2 backdrop-blur-sm transition-all duration-300","border-focus/30 bg-card/95 shadow-glow animate-slide-in-right"),children:[p.jsx(na,{className:"pb-3",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(ra,{className:"text-sm flex items-center gap-2",children:[p.jsx(qk,{className:"h-4 w-4 text-focus"}),"Time Tracking"]}),p.jsx(_i,{variant:n?"default":"secondary",className:"text-xs",children:n?"Active":"Paused"})]})}),p.jsxs(lo,{className:"space-y-4",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-1",children:t.title}),t.description&&p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:te("text-3xl font-mono font-bold transition-colors",l?"text-break":"text-focus"),children:o(e)}),t.estimatedTime&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fx,{value:c,className:te("h-2 transition-colors",l?"[&>div]:bg-break":"[&>div]:bg-focus")}),p.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[p.jsx("span",{children:"0m"}),p.jsx("span",{className:te("font-medium",l&&"text-break"),children:l?"Over estimate":`Target: ${t.estimatedTime}m`}),p.jsxs("span",{children:[t.estimatedTime,"m"]})]})]}),t.timeSpent&&t.timeSpent>0&&p.jsxs("div",{className:"text-center p-2 bg-muted/30 rounded-lg",children:[p.jsx("div",{className:"text-xs text-muted-foreground",children:"Total time spent"}),p.jsx("div",{className:"text-sm font-semibold text-success",children:o(t.timeSpent)})]})]}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsxs(at,{variant:n?"outline":"focus",size:"sm",onClick:n?r:i,className:"hover-scale flex-1",children:[n?p.jsx(cI,{className:"h-4 w-4 mr-2"}):p.jsx(lI,{className:"h-4 w-4 mr-2"}),n?"Pause":"Resume"]}),p.jsx(at,{variant:"outline",size:"sm",onClick:s,className:"hover-scale text-destructive hover:text-destructive hover:bg-destructive/10",children:p.jsx($Z,{className:"h-4 w-4"})})]})]})]})}const Yc=class Yc{constructor(){Ht(this,"db",null);Ht(this,"dbName","TasklyOfflineDB");Ht(this,"version",1)}static getInstance(){return Yc.instance||(Yc.instance=new Yc),Yc.instance}async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(!s.objectStoreNames.contains("tasks")){const o=s.createObjectStore("tasks",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("priority","priority",{unique:!1}),o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("notes")){const o=s.createObjectStore("notes",{keyPath:"id"});o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("offlineActions")){const o=s.createObjectStore("offlineActions",{keyPath:"id"});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("type","type",{unique:!1})}if(s.objectStoreNames.contains("userData")||s.createObjectStore("userData",{keyPath:"key"}),!s.objectStoreNames.contains("scheduledNotifications")){const o=s.createObjectStore("scheduledNotifications",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("scheduledTime","scheduledTime",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1})}}})}async getStore(e,n="readonly"){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize IndexedDB");if(!this.db.objectStoreNames.contains(e))throw new Error(`Object store '${e}' does not exist`);return this.db.transaction([e],n).objectStore(e)}async saveTasks(e){const n=await this.getStore("tasks","readwrite"),r=e.map(i=>new Promise((s,o)=>{const a=n.put({...i,lastModified:Date.now()});a.onsuccess=()=>s(),a.onerror=()=>o(a.error)}));await Promise.all(r)}async saveTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getTasks(){const e=await this.getStore("tasks");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async getTask(e){const n=await this.getStore("tasks");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}async deleteTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async saveNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getNotes(){const e=await this.getStore("notes");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async deleteNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async queueAction(e){const n=await this.getStore("offlineActions","readwrite"),r={...e,id:crypto.randomUUID(),retryCount:0};return new Promise((i,s)=>{const o=n.put(r);o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getQueuedActions(){const e=await this.getStore("offlineActions");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>{const s=i.result.sort((o,a)=>o.timestamp-a.timestamp);n(s)},i.onerror=()=>r(i.error)})}async removeAction(e){const n=await this.getStore("offlineActions","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async updateActionRetryCount(e,n){const r=await this.getStore("offlineActions","readwrite");return new Promise((i,s)=>{const o=r.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.retryCount=n;const c=r.put(a);c.onsuccess=()=>i(),c.onerror=()=>s(c.error)}else i()},o.onerror=()=>s(o.error)})}async clearAllActions(){const e=await this.getStore("offlineActions","readwrite");return new Promise((n,r)=>{const i=e.clear();i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})}async setUserData(e,n){const r=await this.getStore("userData","readwrite");return new Promise((i,s)=>{const o=r.put({key:e,value:n,timestamp:Date.now()});o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getUserData(e){const n=await this.getStore("userData");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>{var o;return r((o=s.result)==null?void 0:o.value)},s.onerror=()=>i(s.error)})}async getTasksByStatus(e){const r=(await this.getStore("tasks")).index("status");return new Promise((i,s)=>{const o=r.getAll(e);o.onsuccess=()=>i(o.result),o.onerror=()=>s(o.error)})}async getUnsyncedItems(){const[e,n,r]=await Promise.all([this.getTasks(),this.getNotes(),this.getQueuedActions()]);return{tasks:e.filter(i=>i.syncStatus!=="synced"),notes:n.filter(i=>i.syncStatus!=="synced"),actions:r}}async clearDatabase(){const n=["tasks","notes","offlineActions","userData"].map(async r=>{const i=await this.getStore(r,"readwrite");return new Promise((s,o)=>{const a=i.clear();a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})});await Promise.all(n)}};Ht(Yc,"instance");let IS=Yc;const ut=IS.getInstance(),RL="taskly_sync_status",VEe=3,Jc=class Jc{constructor(){Ht(this,"syncInProgress",!1);Ht(this,"syncCallbacks",[])}static getInstance(){return Jc.instance||(Jc.instance=new Jc),Jc.instance}async initialize(){await ut.init()}async queueAction(e){await ut.queueAction({...e,timestamp:Date.now()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{"sync"in n&&n.sync.register("background-sync").catch(r=>{console.log("Background sync registration failed:",r)})})}async storeTaskLocally(e,n="pending"){const r={...e,lastModified:Date.now(),syncStatus:n};await ut.saveTask(r)}async getLocalTasks(){return ut.getTasks()}async deleteTaskLocally(e){await ut.deleteTask(e)}async getQueuedActions(){return ut.getQueuedActions()}async clearQueuedActions(){await ut.clearAllActions()}async getSyncStatus(){const e=localStorage.getItem(RL),n=e?JSON.parse(e):{lastSync:0,pending:0},r=await this.getQueuedActions(),i=await ut.getUnsyncedItems();return{...n,pending:r.length+i.tasks.length+i.notes.length,conflicted:i.tasks.filter(s=>s.syncStatus==="conflict").length+i.notes.filter(s=>s.syncStatus==="conflict").length}}async updateSyncStatus(e){const n=await this.getQueuedActions(),r={lastSync:e,pending:n.length};localStorage.setItem(RL,JSON.stringify(r))}isOnline(){return navigator.onLine}async syncWhenOnline(){if(!this.isOnline()||this.syncInProgress)return{success:!1,syncedCount:0,failedCount:0};this.syncInProgress=!0;let e=0,n=0;try{const r=await this.getQueuedActions(),i=await ut.getUnsyncedItems();if(r.length===0&&i.tasks.length===0&&i.notes.length===0)return this.syncInProgress=!1,{success:!0,syncedCount:0,failedCount:0};for(const s of r)try{await this.processAction(s),await ut.removeAction(s.id),e++}catch(o){console.error("Failed to process action:",s,o);const a=s.retryCount+1;a>=VEe?(await ut.removeAction(s.id),n++):await ut.updateActionRetryCount(s.id,a)}for(const s of i.tasks)try{await this.syncTask(s),e++}catch(o){console.error("Failed to sync task:",s,o),await ut.saveTask({...s,syncStatus:"conflict"}),n++}for(const s of i.notes)try{await this.syncNote(s),e++}catch(o){console.error("Failed to sync note:",s,o),await ut.saveNote({...s,syncStatus:"conflict"}),n++}return await this.updateSyncStatus(Date.now()),this.syncCallbacks.forEach(s=>s(n===0)),(e>0||n>0)&&this.showSyncNotification(n===0?"success":"warning",`Synced ${e} items${n>0?`, ${n} failed`:""}`),{success:n===0,syncedCount:e,failedCount:n}}catch(r){return console.error("Sync failed:",r),this.showSyncNotification("error","Sync failed - will retry later"),{success:!1,syncedCount:e,failedCount:n+1}}finally{this.syncInProgress=!1}}async processAction(e){switch(console.log("Processing offline action:",e),e.type){case"CREATE_TASK":break;case"UPDATE_TASK":break;case"DELETE_TASK":break;case"CREATE_NOTE":break;case"UPDATE_NOTE":break;case"DELETE_NOTE":break;default:throw new Error(`Unknown action type: ${e.type}`)}}async syncTask(e){console.log("Syncing task:",e),await ut.saveTask({...e,syncStatus:"synced"})}async syncNote(e){console.log("Syncing note:",e),await ut.saveNote({...e,syncStatus:"synced"})}showSyncNotification(e,n){"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly Sync",{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png"})}onSyncComplete(e){this.syncCallbacks.push(e)}async getConflicts(){const e=await ut.getUnsyncedItems();return{tasks:e.tasks.filter(n=>n.syncStatus==="conflict"),notes:e.notes.filter(n=>n.syncStatus==="conflict")}}async resolveTaskConflict(e,n){const r=await ut.getTask(e);r&&(n?await ut.saveTask({...r,syncStatus:"pending"}):await ut.saveTask({...r,syncStatus:"synced"}))}async init(){await this.initialize(),window.addEventListener("online",()=>{console.log("Back online - starting sync..."),this.syncWhenOnline()}),window.addEventListener("offline",()=>{console.log("Gone offline - actions will be queued")}),this.isOnline()&&this.syncWhenOnline()}};Ht(Jc,"instance");let M_=Jc;const Rs=M_.getInstance(),$Ee=Object.freeze(Object.defineProperty({__proto__:null,OfflineSync:M_,offlineSync:Rs},Symbol.toStringTag,{value:"Module"}));function Z9(){const[t,e]=g.useState({isOnline:navigator.onLine,isSyncing:!1,lastSync:0,pending:0,conflicted:0}),n=g.useCallback(async()=>{const d=await Rs.getSyncStatus();e(f=>({...f,...d}))},[]);g.useEffect(()=>{let d=!0;const f=async()=>{d&&(e(y=>({...y,isOnline:!0})),await n())},m=()=>{d&&e(y=>({...y,isOnline:!1}))};n(),window.addEventListener("online",f),window.addEventListener("offline",m);const _=setInterval(n,5e3);return()=>{d=!1,window.removeEventListener("online",f),window.removeEventListener("offline",m),clearInterval(_)}},[n]);const r=g.useCallback(async()=>{if(!(!t.isOnline||t.isSyncing)){e(d=>({...d,isSyncing:!0}));try{const d=await Rs.syncWhenOnline();return await n(),d}finally{e(d=>({...d,isSyncing:!1}))}}},[t.isOnline,t.isSyncing,n]),i=g.useCallback(async(d,f)=>{const m={...d,id:crypto.randomUUID(),createdAt:new Date().toISOString(),subtasks:d.subtasks||[]};return await Rs.storeTaskLocally(m,"pending"),t.isOnline||await Rs.queueAction({type:"CREATE_TASK",data:m,userId:f}),await n(),m},[t.isOnline,n]),s=g.useCallback(async(d,f,m)=>{const _=await ut.getTask(d);if(!_)return null;const y={..._,...f,lastModified:Date.now(),syncStatus:"pending"};return await ut.saveTask(y),t.isOnline||await Rs.queueAction({type:"UPDATE_TASK",data:{id:d,updates:f},userId:m}),await n(),y},[t.isOnline,n]),o=g.useCallback(async(d,f)=>{await ut.deleteTask(d),t.isOnline||await Rs.queueAction({type:"DELETE_TASK",data:{id:d},userId:f}),await n()},[t.isOnline,n]),a=g.useCallback(async(d,f)=>{const m=await ut.getTask(d);if(!m)return null;const _=m.status==="completed"?"todo":"completed",y={...m,status:_,completedAt:_==="completed"?new Date().toISOString():void 0,lastModified:Date.now(),syncStatus:"pending"};return await ut.saveTask(y),t.isOnline||await Rs.queueAction({type:"TOGGLE_STATUS",data:{id:d,status:_},userId:f}),await n(),y},[t.isOnline,n]),c=g.useCallback(async()=>ut.getTasks(),[]),l=g.useCallback(async()=>Rs.getConflicts(),[]),u=g.useCallback(async(d,f)=>{await Rs.resolveTaskConflict(d,f),await n()},[n]);return{syncStatus:t,manualSync:r,createTaskOffline:i,updateTaskOffline:s,deleteTaskOffline:o,toggleTaskStatusOffline:a,getLocalTasks:c,getConflicts:l,resolveConflict:u,updateSyncStatus:n}}const BEe=Vz,AIe=R_e,HEe=$z,eW=g.forwardRef(({className:t,...e},n)=>p.jsx(LT,{ref:n,className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));eW.displayName=LT.displayName;const tW=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(HEe,{children:[p.jsx(eW,{}),p.jsxs(FT,{ref:r,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,p.jsxs(Bz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(tu,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tW.displayName=FT.displayName;const nW=({className:t,...e})=>p.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});nW.displayName="DialogHeader";const zEe=({className:t,...e})=>p.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});zEe.displayName="DialogFooter";const rW=g.forwardRef(({className:t,...e},n)=>p.jsx(UT,{ref:n,className:te("text-lg font-semibold leading-none tracking-tight",t),...e}));rW.displayName=UT.displayName;const iW=g.forwardRef(({className:t,...e},n)=>p.jsx(jT,{ref:n,className:te("text-sm text-muted-foreground",t),...e}));iW.displayName=jT.displayName;function WEe({open:t,onOpenChange:e,conflicts:n}){const{resolveConflict:r}=Z9(),[i,s]=g.useState(null),o=async(c,l)=>{s(c);try{await r(c,l),n.tasks=n.tasks.filter(u=>u.id!==c),n.tasks.length===0&&n.notes.length===0&&e(!1)}finally{s(null)}},a=c=>new Date(c).toLocaleString();return p.jsx(BEe,{open:t,onOpenChange:e,children:p.jsxs(tW,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[p.jsxs(nW,{children:[p.jsxs(rW,{className:"flex items-center gap-2",children:[p.jsx(Vf,{className:"h-5 w-5 text-warning"}),"Sync Conflicts Detected"]}),p.jsx(iW,{children:"The following items have conflicts between your local changes and server data. Choose which version to keep."})]}),p.jsxs("div",{className:"space-y-4",children:[n.tasks.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Task Conflicts"}),p.jsx("div",{className:"space-y-3",children:n.tasks.map(c=>p.jsxs(co,{className:"border-warning/20",children:[p.jsxs(na,{className:"pb-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(ra,{className:"text-base",children:c.title}),p.jsx(_i,{variant:"outline",className:"text-warning border-warning",children:"Conflict"})]}),c.description&&p.jsx(Mx,{children:c.description})]}),p.jsx(lo,{className:"space-y-4",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(Pw,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Your Changes"})]}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Status:"}),p.jsx(_i,{variant:c.status==="completed"?"default":"secondary",children:c.status})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Priority:"}),p.jsx(_i,{variant:c.priority==="high"?"destructive":"outline",children:c.priority})]}),p.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[p.jsx(qk,{className:"h-3 w-3"}),p.jsxs("span",{children:["Modified: ",a(new Date(c.lastModified).toISOString())]})]})]}),p.jsx(at,{onClick:()=>o(c.id,!0),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Keep My Changes"})]}),p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(Vf,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Server Version"})]}),p.jsx("div",{className:"space-y-2 text-sm",children:p.jsx("div",{className:"text-muted-foreground",children:"Server data would be displayed here in a real implementation"})}),p.jsx(at,{onClick:()=>o(c.id,!1),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Use Server Version"})]})]})})]},c.id))})]}),n.notes.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Note Conflicts"}),p.jsx("div",{className:"text-muted-foreground",children:"Note conflict resolution would be implemented here"})]}),n.tasks.length===0&&n.notes.length===0&&p.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[p.jsx(Vf,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),p.jsx("p",{children:"No conflicts to resolve"})]})]}),p.jsx("div",{className:"flex justify-end gap-2 mt-6",children:p.jsx(at,{variant:"outline",onClick:()=>e(!1),children:"Close"})})]})})}function KEe(){const{syncStatus:t,manualSync:e,getConflicts:n}=Z9(),[r,i]=g.useState(!1),[s,o]=g.useState({tasks:[],notes:[]}),a=async()=>{!t.isOnline||t.isSyncing||await e()},c=async()=>{const l=await n();o(l),i(!0)};return t.isOnline&&t.pending===0&&t.conflicted===0?null:p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2",children:[p.jsx(_i,{variant:t.isOnline?"default":"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:t.isOnline?p.jsxs(p.Fragment,{children:[t.isSyncing?p.jsx(k4,{className:"h-3 w-3 animate-spin"}):p.jsx(eee,{className:"h-3 w-3"}),t.pending>0&&p.jsxs("span",{children:["Syncing ",t.pending," items"]})]}):p.jsxs(p.Fragment,{children:[p.jsx(XZ,{className:"h-3 w-3"}),p.jsx("span",{children:"Offline"}),t.pending>0&&p.jsxs(p.Fragment,{children:[p.jsx(sZ,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.pending," pending"]})]})]})}),t.conflicted>0&&p.jsxs(_i,{variant:"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:c,children:[p.jsx(Vf,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.conflicted," conflicts"]})]})]}),p.jsx(WEe,{open:r,onOpenChange:i,conflicts:s})]})}function qEe(){const t=g.useRef(Date.now()),e=g.useRef(0);g.useEffect(()=>{e.current+=1});const n=g.useCallback(i=>{const s=Date.now(),o=s-t.current;o>16&&console.warn(`${i} render time: ${o}ms (render #${e.current})`),t.current=s},[]),r=g.useCallback((i,s)=>{const o=performance.now();i();const a=performance.now();console.log(`${s} took ${a-o} milliseconds`)},[]);return{logRenderTime:n,measurePerformance:r,renderCount:e.current}}function GEe(){const[t,e]=g.useState({fps:0,memoryUsage:0,loadTime:0,renderTime:0}),[n,r]=g.useState(!1);if(qEe(),g.useEffect(()=>{let o=0,a=performance.now(),c;const l=()=>{o++;const u=performance.now();if(u>=a+1e3){const d=Math.round(o*1e3/(u-a));e(f=>{var m;return{...f,fps:d,loadTime:Math.round(performance.now()),memoryUsage:((m=performance.memory)==null?void 0:m.usedJSHeapSize)||0}}),o=0,a=u}c=requestAnimationFrame(l)};return n&&(c=requestAnimationFrame(l)),()=>{c&&cancelAnimationFrame(c)}},[n]),!n)return null;const i=o=>{if(o===0)return"0 Bytes";const a=1024,c=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(a));return parseFloat((o/Math.pow(a,l)).toFixed(2))+" "+c[l]},s=o=>o>=55?"bg-green-500":o>=45?"bg-yellow-500":"bg-red-500";return p.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:p.jsxs(co,{className:"w-64 bg-background/90 backdrop-blur-sm border shadow-lg",children:[p.jsx(na,{className:"pb-2",children:p.jsx(ra,{className:"text-sm font-medium",children:"Performance"})}),p.jsxs(lo,{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS:"}),p.jsx(_i,{variant:"outline",className:`${s(t.fps)} text-white border-none`,children:t.fps})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Memory:"}),p.jsx(_i,{variant:"outline",children:i(t.memoryUsage)})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Load:"}),p.jsxs(_i,{variant:"outline",children:[t.loadTime,"ms"]})]})]})]})})}function QEe({children:t}){const{isTimerRunning:e}=K9(),{isChatOpenMobile:n}=cu(),r=xc(),i=PT();return console.log("AppLayout - isChatOpenMobile:",n,"isMobile:",i),p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(SEe,{}),p.jsx(KEe,{}),p.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[p.jsx(cwe,{className:te("transition-all duration-300",e&&"hidden md:flex",!i&&n&&"hidden lg:flex")}),p.jsx("main",{className:te("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0","pt-0",e&&"md:ml-0",i&&r.pathname==="/"&&"scrollbar-hide"),children:t})]}),p.jsx(LEe,{}),p.jsx(jEe,{}),p.jsx(GEe,{})]})}function YEe({children:t}){return p.jsx(AEe,{children:p.jsx(t5,{children:p.jsx(Kz,{children:p.jsx(QEe,{children:t})})})})}class sW extends g.Component{constructor(){super(...arguments);Ht(this,"state",{hasError:!1});Ht(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:p.jsxs(co,{className:"w-full max-w-md",children:[p.jsxs(na,{className:"text-center",children:[p.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center",children:p.jsx(Vf,{className:"w-6 h-6 text-destructive"})}),p.jsx(ra,{children:"Something went wrong"}),p.jsx(Mx,{children:"We're sorry, but something unexpected happened. Please try again."})]}),p.jsxs(lo,{className:"text-center space-y-4",children:[this.state.error&&p.jsxs("details",{className:"text-sm text-muted-foreground",children:[p.jsx("summary",{className:"cursor-pointer",children:"Error details"}),p.jsx("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-auto",children:this.state.error.message})]}),p.jsxs("div",{className:"flex gap-2 justify-center",children:[p.jsxs(at,{onClick:this.handleRetry,className:"gap-2",children:[p.jsx(k4,{className:"w-4 h-4"}),"Try Again"]}),p.jsx(at,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})]})}):this.props.children}}function JEe({size:t="default",className:e}){const n={sm:"w-4 h-4",default:"w-6 h-6",lg:"w-8 h-8"};return p.jsx("div",{className:te("animate-spin rounded-full border-2 border-primary border-t-transparent",n[t],e)})}function XEe(){return p.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx(JEe,{size:"lg"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}var tg=t=>t.type==="checkbox",ll=t=>t instanceof Date,Ir=t=>t==null;const oW=t=>typeof t=="object";var gn=t=>!Ir(t)&&!Array.isArray(t)&&oW(t)&&!ll(t),aW=t=>gn(t)&&t.target?tg(t.target)?t.target.checked:t.target.value:t,ZEe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,cW=(t,e)=>t.has(ZEe(e)),eCe=t=>{const e=t.constructor&&t.constructor.prototype;return gn(e)&&e.hasOwnProperty("isPrototypeOf")},Ux=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function An(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Ux&&(t instanceof Blob||r))&&(n||gn(t)))if(e=n?[]:{},!n&&!eCe(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=An(t[i]));else return t;return e}var QT=t=>/^\w*$/.test(t),hn=t=>t===void 0,jx=t=>Array.isArray(t)?t.filter(Boolean):[],Vx=t=>jx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),me=(t,e,n)=>{if(!e||!gn(t))return n;const r=(QT(e)?[e]:Vx(e)).reduce((i,s)=>Ir(i)?i:i[s],t);return hn(r)||r===t?hn(t[e])?n:t[e]:r},li=t=>typeof t=="boolean",Et=(t,e,n)=>{let r=-1;const i=QT(e)?[e]:Vx(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=n;if(r!==o){const l=t[a];c=gn(l)||Array.isArray(l)?l:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const D_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},is={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_o={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$x=Q.createContext(null);$x.displayName="HookFormContext";const YT=()=>Q.useContext($x),tCe=t=>{const{children:e,...n}=t;return Q.createElement($x.Provider,{value:n},e)};var lW=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==is.all&&(e._proxyFormState[o]=!r||is.all),n&&(n[o]=!0),t[o]}});return i};const Bx=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function nCe(t){const e=YT(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Q.useState(n._formState),c=Q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Bx(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:l=>{!r&&a({...n._formState,...l})}}),[i,r,s]),Q.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Q.useMemo(()=>lW(o,n,c.current,!1),[o,n])}var zs=t=>typeof t=="string",uW=(t,e,n,r,i)=>zs(t)?(r&&e.watch.add(t),me(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),me(n,s))):(r&&(e.watchAll=!0),n),SS=t=>Ir(t)||!oW(t);function Ro(t,e,n=new WeakSet){if(SS(t)||SS(e))return t===e;if(ll(t)&&ll(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(ll(o)&&ll(a)||gn(o)&&gn(a)||Array.isArray(o)&&Array.isArray(a)?!Ro(o,a,n):o!==a)return!1}}return!0}function rCe(t){const e=YT(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},c=Q.useRef(i),l=Q.useRef(a),u=Q.useRef(void 0);l.current=a;const d=Q.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=Q.useState(l.current?l.current(d):d);return Bx(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:_=>{if(!s){const y=uW(r,n._names,_.values||n._formValues,!1,c.current);if(l.current){const T=l.current(y);Ro(T,u.current)||(m(T),u.current=T)}else m(y)}}}),[n,s,r,o]),Q.useEffect(()=>n._removeUnmounted()),f}function iCe(t){const e=YT(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,a=cW(i._names.array,n),c=Q.useMemo(()=>me(i._formValues,n,me(i._defaultValues,n,o)),[i,n,o]),l=rCe({control:i,name:n,defaultValue:c,exact:!0}),u=nCe({control:i,name:n,exact:!0}),d=Q.useRef(t),f=Q.useRef(i.register(n,{...t.rules,value:l,...li(t.disabled)?{disabled:t.disabled}:{}}));d.current=t;const m=Q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!me(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!me(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!me(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!me(u.validatingFields,n)},error:{enumerable:!0,get:()=>me(u.errors,n)}}),[u,n]),_=Q.useCallback(w=>f.current.onChange({target:{value:aW(w),name:n},type:D_.CHANGE}),[n]),y=Q.useCallback(()=>f.current.onBlur({target:{value:me(i._formValues,n),name:n},type:D_.BLUR}),[n,i._formValues]),T=Q.useCallback(w=>{const C=me(i._fields,n);C&&w&&(C._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:S=>w.setCustomValidity(S),reportValidity:()=>w.reportValidity()})},[i._fields,n]),E=Q.useMemo(()=>({name:n,value:l,...li(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:_,onBlur:y,ref:T}),[n,r,u.disabled,_,y,T,l]);return Q.useEffect(()=>{const w=i._options.shouldUnregister||s;i.register(n,{...d.current.rules,...li(d.current.disabled)?{disabled:d.current.disabled}:{}});const C=(S,M)=>{const D=me(i._fields,S);D&&D._f&&(D._f.mount=M)};if(C(n,!0),w){const S=An(me(i._options.defaultValues,n));Et(i._defaultValues,n,S),hn(me(i._formValues,n))&&Et(i._formValues,n,S)}return!a&&i.register(n),()=>{(a?w&&!i._state.action:w)?i.unregister(n):C(n,!1)}},[n,i,a,s]),Q.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Q.useMemo(()=>({field:E,formState:u,fieldState:m}),[E,u,m])}const sCe=t=>t.render(iCe(t));var dW=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},ip=t=>Array.isArray(t)?t:[t],xL=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},$r=t=>gn(t)&&!Object.keys(t).length,Hx=t=>t.type==="file",ss=t=>typeof t=="function",L_=t=>{if(!Ux)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},hW=t=>t.type==="select-multiple",zx=t=>t.type==="radio",oCe=t=>zx(t)||tg(t),$C=t=>L_(t)&&t.isConnected;function aCe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=hn(t)?r++:t[e[r++]];return t}function cCe(t){for(const e in t)if(t.hasOwnProperty(e)&&!hn(t[e]))return!1;return!0}function vn(t,e){const n=Array.isArray(e)?e:QT(e)?[e]:Vx(e),r=n.length===1?t:aCe(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(gn(r)&&$r(r)||Array.isArray(r)&&cCe(r))&&vn(t,n.slice(0,-1)),t}var fW=t=>{for(const e in t)if(ss(t[e]))return!0;return!1};function F_(t,e={}){const n=Array.isArray(t);if(gn(t)||n)for(const r in t)Array.isArray(t[r])||gn(t[r])&&!fW(t[r])?(e[r]=Array.isArray(t[r])?[]:{},F_(t[r],e[r])):Ir(t[r])||(e[r]=!0);return e}function pW(t,e,n){const r=Array.isArray(t);if(gn(t)||r)for(const i in t)Array.isArray(t[i])||gn(t[i])&&!fW(t[i])?hn(e)||SS(n[i])?n[i]=Array.isArray(t[i])?F_(t[i],[]):{...F_(t[i])}:pW(t[i],Ir(e)?{}:e[i],n[i]):n[i]=!Ro(t[i],e[i]);return n}var of=(t,e)=>pW(t,e,F_(e));const PL={value:!1,isValid:!1},NL={value:!0,isValid:!0};var mW=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!hn(t[0].attributes.value)?hn(t[0].value)||t[0].value===""?NL:{value:t[0].value,isValid:!0}:NL:PL}return PL},gW=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>hn(t)?t:e?t===""?NaN:t&&+t:n&&zs(t)?new Date(t):r?r(t):t;const OL={isValid:!1,value:null};var yW=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,OL):OL;function ML(t){const e=t.ref;return Hx(e)?e.files:zx(e)?yW(t.refs).value:hW(e)?[...e.selectedOptions].map(({value:n})=>n):tg(e)?mW(t.refs).value:gW(hn(e.value)?t.ref.value:e.value,t)}var lCe=(t,e,n,r)=>{const i={};for(const s of t){const o=me(e,s);o&&Et(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},U_=t=>t instanceof RegExp,af=t=>hn(t)?t:U_(t)?t.source:gn(t)?U_(t.value)?t.value.source:t.value:t,DL=t=>({isOnSubmit:!t||t===is.onSubmit,isOnBlur:t===is.onBlur,isOnChange:t===is.onChange,isOnAll:t===is.all,isOnTouch:t===is.onTouched});const LL="AsyncFunction";var uCe=t=>!!t&&!!t.validate&&!!(ss(t.validate)&&t.validate.constructor.name===LL||gn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===LL)),dCe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),FL=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const sp=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=me(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(sp(a,e))break}else if(gn(a)&&sp(a,e))break}}};function UL(t,e,n){const r=me(t,n);if(r||QT(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=me(e,s),a=me(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var hCe=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return $r(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||is.all))},fCe=(t,e,n)=>!t||!e||t===e||ip(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),pCe=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,mCe=(t,e)=>!jx(me(t,e)).length&&vn(t,e),gCe=(t,e,n)=>{const r=ip(me(t,n));return Et(r,"root",e[n]),Et(t,n,r),t},By=t=>zs(t);function jL(t,e,n="validate"){if(By(t)||Array.isArray(t)&&t.every(By)||li(t)&&!t)return{type:n,message:By(t)?t:"",ref:e}}var Eu=t=>gn(t)&&!U_(t)?t:{value:t,message:""},VL=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:l,minLength:u,min:d,max:f,pattern:m,validate:_,name:y,valueAsNumber:T,mount:E}=t._f,w=me(n,y);if(!E||e.has(y))return{};const C=a?a[0]:o,S=P=>{i&&C.reportValidity&&(C.setCustomValidity(li(P)?"":P||""),C.reportValidity())},M={},D=zx(o),A=tg(o),I=D||A,k=(T||Hx(o))&&hn(o.value)&&hn(w)||L_(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,x=dW.bind(null,y,r,M),N=(P,R,B,he=_o.maxLength,fe=_o.minLength)=>{const ye=P?R:B;M[y]={type:P?he:fe,message:ye,ref:o,...x(P?he:fe,ye)}};if(s?!Array.isArray(w)||!w.length:c&&(!I&&(k||Ir(w))||li(w)&&!w||A&&!mW(a).isValid||D&&!yW(a).isValid)){const{value:P,message:R}=By(c)?{value:!!c,message:c}:Eu(c);if(P&&(M[y]={type:_o.required,message:R,ref:C,...x(_o.required,R)},!r))return S(R),M}if(!k&&(!Ir(d)||!Ir(f))){let P,R;const B=Eu(f),he=Eu(d);if(!Ir(w)&&!isNaN(w)){const fe=o.valueAsNumber||w&&+w;Ir(B.value)||(P=fe>B.value),Ir(he.value)||(R=fe<he.value)}else{const fe=o.valueAsDate||new Date(w),ye=U=>new Date(new Date().toDateString()+" "+U),z=o.type=="time",j=o.type=="week";zs(B.value)&&w&&(P=z?ye(w)>ye(B.value):j?w>B.value:fe>new Date(B.value)),zs(he.value)&&w&&(R=z?ye(w)<ye(he.value):j?w<he.value:fe<new Date(he.value))}if((P||R)&&(N(!!P,B.message,he.message,_o.max,_o.min),!r))return S(M[y].message),M}if((l||u)&&!k&&(zs(w)||s&&Array.isArray(w))){const P=Eu(l),R=Eu(u),B=!Ir(P.value)&&w.length>+P.value,he=!Ir(R.value)&&w.length<+R.value;if((B||he)&&(N(B,P.message,R.message),!r))return S(M[y].message),M}if(m&&!k&&zs(w)){const{value:P,message:R}=Eu(m);if(U_(P)&&!w.match(P)&&(M[y]={type:_o.pattern,message:R,ref:o,...x(_o.pattern,R)},!r))return S(R),M}if(_){if(ss(_)){const P=await _(w,n),R=jL(P,C);if(R&&(M[y]={...R,...x(_o.validate,R.message)},!r))return S(R.message),M}else if(gn(_)){let P={};for(const R in _){if(!$r(P)&&!r)break;const B=jL(await _[R](w,n),C,R);B&&(P={...B,...x(R,B.message)},S(B.message),r&&(M[y]=P))}if(!$r(P)&&(M[y]={ref:C,...P},!r))return M}}return S(!0),M};const yCe={mode:is.onSubmit,reValidateMode:is.onChange,shouldFocusError:!0};function vCe(t={}){let e={...yCe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:ss(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=gn(e.defaultValues)||gn(e.values)?An(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:An(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const f={array:xL(),state:xL()},m=e.criteriaMode===is.all,_=L=>$=>{clearTimeout(l),l=setTimeout(L,$)},y=async L=>{if(!e.disabled&&(u.isValid||d.isValid||L)){const $=e.resolver?$r((await A()).errors):await k(r,!0);$!==n.isValid&&f.state.next({isValid:$})}},T=(L,$)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((L||Array.from(a.mount)).forEach(K=>{K&&($?Et(n.validatingFields,K,$):vn(n.validatingFields,K))}),f.state.next({validatingFields:n.validatingFields,isValidating:!$r(n.validatingFields)}))},E=(L,$=[],K,le,ce=!0,ne=!0)=>{if(le&&K&&!e.disabled){if(o.action=!0,ne&&Array.isArray(me(r,L))){const se=K(me(r,L),le.argA,le.argB);ce&&Et(r,L,se)}if(ne&&Array.isArray(me(n.errors,L))){const se=K(me(n.errors,L),le.argA,le.argB);ce&&Et(n.errors,L,se),mCe(n.errors,L)}if((u.touchedFields||d.touchedFields)&&ne&&Array.isArray(me(n.touchedFields,L))){const se=K(me(n.touchedFields,L),le.argA,le.argB);ce&&Et(n.touchedFields,L,se)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=of(i,s)),f.state.next({name:L,isDirty:N(L,$),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Et(s,L,$)},w=(L,$)=>{Et(n.errors,L,$),f.state.next({errors:n.errors})},C=L=>{n.errors=L,f.state.next({errors:n.errors,isValid:!1})},S=(L,$,K,le)=>{const ce=me(r,L);if(ce){const ne=me(s,L,hn(K)?me(i,L):K);hn(ne)||le&&le.defaultChecked||$?Et(s,L,$?ne:ML(ce._f)):B(L,ne),o.mount&&y()}},M=(L,$,K,le,ce)=>{let ne=!1,se=!1;const Ae={name:L};if(!e.disabled){if(!K||le){(u.isDirty||d.isDirty)&&(se=n.isDirty,n.isDirty=Ae.isDirty=N(),ne=se!==Ae.isDirty);const st=Ro(me(i,L),$);se=!!me(n.dirtyFields,L),st?vn(n.dirtyFields,L):Et(n.dirtyFields,L,!0),Ae.dirtyFields=n.dirtyFields,ne=ne||(u.dirtyFields||d.dirtyFields)&&se!==!st}if(K){const st=me(n.touchedFields,L);st||(Et(n.touchedFields,L,K),Ae.touchedFields=n.touchedFields,ne=ne||(u.touchedFields||d.touchedFields)&&st!==K)}ne&&ce&&f.state.next(Ae)}return ne?Ae:{}},D=(L,$,K,le)=>{const ce=me(n.errors,L),ne=(u.isValid||d.isValid)&&li($)&&n.isValid!==$;if(e.delayError&&K?(c=_(()=>w(L,K)),c(e.delayError)):(clearTimeout(l),c=null,K?Et(n.errors,L,K):vn(n.errors,L)),(K?!Ro(ce,K):ce)||!$r(le)||ne){const se={...le,...ne&&li($)?{isValid:$}:{},errors:n.errors,name:L};n={...n,...se},f.state.next(se)}},A=async L=>{T(L,!0);const $=await e.resolver(s,e.context,lCe(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(L),$},I=async L=>{const{errors:$}=await A(L);if(L)for(const K of L){const le=me($,K);le?Et(n.errors,K,le):vn(n.errors,K)}else n.errors=$;return $},k=async(L,$,K={valid:!0})=>{for(const le in L){const ce=L[le];if(ce){const{_f:ne,...se}=ce;if(ne){const Ae=a.array.has(ne.name),st=ce._f&&uCe(ce._f);st&&u.validatingFields&&T([le],!0);const yn=await VL(ce,a.disabled,s,m,e.shouldUseNativeValidation&&!$,Ae);if(st&&u.validatingFields&&T([le]),yn[ne.name]&&(K.valid=!1,$))break;!$&&(me(yn,ne.name)?Ae?gCe(n.errors,yn,ne.name):Et(n.errors,ne.name,yn[ne.name]):vn(n.errors,ne.name))}!$r(se)&&await k(se,$,K)}}return K.valid},x=()=>{for(const L of a.unMount){const $=me(r,L);$&&($._f.refs?$._f.refs.every(K=>!$C(K)):!$C($._f.ref))&&we(L)}a.unMount=new Set},N=(L,$)=>!e.disabled&&(L&&$&&Et(s,L,$),!Ro(U(),i)),P=(L,$,K)=>uW(L,a,{...o.mount?s:hn($)?i:zs(L)?{[L]:$}:$},K,$),R=L=>jx(me(o.mount?s:i,L,e.shouldUnregister?me(i,L,[]):[])),B=(L,$,K={})=>{const le=me(r,L);let ce=$;if(le){const ne=le._f;ne&&(!ne.disabled&&Et(s,L,gW($,ne)),ce=L_(ne.ref)&&Ir($)?"":$,hW(ne.ref)?[...ne.ref.options].forEach(se=>se.selected=ce.includes(se.value)):ne.refs?tg(ne.ref)?ne.refs.forEach(se=>{(!se.defaultChecked||!se.disabled)&&(Array.isArray(ce)?se.checked=!!ce.find(Ae=>Ae===se.value):se.checked=ce===se.value||!!ce)}):ne.refs.forEach(se=>se.checked=se.value===ce):Hx(ne.ref)?ne.ref.value="":(ne.ref.value=ce,ne.ref.type||f.state.next({name:L,values:An(s)})))}(K.shouldDirty||K.shouldTouch)&&M(L,ce,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&j(L)},he=(L,$,K)=>{for(const le in $){if(!$.hasOwnProperty(le))return;const ce=$[le],ne=L+"."+le,se=me(r,ne);(a.array.has(L)||gn(ce)||se&&!se._f)&&!ll(ce)?he(ne,ce,K):B(ne,ce,K)}},fe=(L,$,K={})=>{const le=me(r,L),ce=a.array.has(L),ne=An($);Et(s,L,ne),ce?(f.array.next({name:L,values:An(s)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&K.shouldDirty&&f.state.next({name:L,dirtyFields:of(i,s),isDirty:N(L,ne)})):le&&!le._f&&!Ir(ne)?he(L,ne,K):B(L,ne,K),FL(L,a)&&f.state.next({...n,name:L}),f.state.next({name:o.mount?L:void 0,values:An(s)})},ye=async L=>{o.mount=!0;const $=L.target;let K=$.name,le=!0;const ce=me(r,K),ne=st=>{le=Number.isNaN(st)||ll(st)&&isNaN(st.getTime())||Ro(st,me(s,K,st))},se=DL(e.mode),Ae=DL(e.reValidateMode);if(ce){let st,yn;const Fr=$.type?ML(ce._f):aW(L),Ur=L.type===D_.BLUR||L.type===D_.FOCUS_OUT,Ai=!dCe(ce._f)&&!e.resolver&&!me(n.errors,K)&&!ce._f.deps||pCe(Ur,me(n.touchedFields,K),n.isSubmitted,Ae,se),On=FL(K,a,Ur);Et(s,K,Fr),Ur?(ce._f.onBlur&&ce._f.onBlur(L),c&&c(0)):ce._f.onChange&&ce._f.onChange(L);const Bn=M(K,Fr,Ur),Is=!$r(Bn)||On;if(!Ur&&f.state.next({name:K,type:L.type,values:An(s)}),Ai)return(u.isValid||d.isValid)&&(e.mode==="onBlur"?Ur&&y():Ur||y()),Is&&f.state.next({name:K,...On?{}:Bn});if(!Ur&&On&&f.state.next({...n}),e.resolver){const{errors:Ki}=await A([K]);if(ne(Fr),le){const Ph=UL(n.errors,r,K),ca=UL(Ki,r,Ph.name||K);st=ca.error,K=ca.name,yn=$r(Ki)}}else T([K],!0),st=(await VL(ce,a.disabled,s,m,e.shouldUseNativeValidation))[K],T([K]),ne(Fr),le&&(st?yn=!1:(u.isValid||d.isValid)&&(yn=await k(r,!0)));le&&(ce._f.deps&&j(ce._f.deps),D(K,yn,st,Bn))}},z=(L,$)=>{if(me(n.errors,$)&&L.focus)return L.focus(),1},j=async(L,$={})=>{let K,le;const ce=ip(L);if(e.resolver){const ne=await I(hn(L)?L:ce);K=$r(ne),le=L?!ce.some(se=>me(ne,se)):K}else L?(le=(await Promise.all(ce.map(async ne=>{const se=me(r,ne);return await k(se&&se._f?{[ne]:se}:se)}))).every(Boolean),!(!le&&!n.isValid)&&y()):le=K=await k(r);return f.state.next({...!zs(L)||(u.isValid||d.isValid)&&K!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:K}:{},errors:n.errors}),$.shouldFocus&&!le&&sp(r,z,L?ce:a.mount),le},U=L=>{const $={...o.mount?s:i};return hn(L)?$:zs(L)?me($,L):L.map(K=>me($,K))},G=(L,$)=>({invalid:!!me(($||n).errors,L),isDirty:!!me(($||n).dirtyFields,L),error:me(($||n).errors,L),isValidating:!!me(n.validatingFields,L),isTouched:!!me(($||n).touchedFields,L)}),H=L=>{L&&ip(L).forEach($=>vn(n.errors,$)),f.state.next({errors:L?n.errors:{}})},W=(L,$,K)=>{const le=(me(r,L,{_f:{}})._f||{}).ref,ce=me(n.errors,L)||{},{ref:ne,message:se,type:Ae,...st}=ce;Et(n.errors,L,{...st,...$,ref:le}),f.state.next({name:L,errors:n.errors,isValid:!1}),K&&K.shouldFocus&&le&&le.focus&&le.focus()},re=(L,$)=>ss(L)?f.state.subscribe({next:K=>"values"in K&&L(P(void 0,$),K)}):P(L,$,!0),ae=L=>f.state.subscribe({next:$=>{fCe(L.name,$.name,L.exact)&&hCe($,L.formState||u,qt,L.reRenderRoot)&&L.callback({values:{...s},...n,...$,defaultValues:i})}}).unsubscribe,ve=L=>(o.mount=!0,d={...d,...L.formState},ae({...L,formState:d})),we=(L,$={})=>{for(const K of L?ip(L):a.mount)a.mount.delete(K),a.array.delete(K),$.keepValue||(vn(r,K),vn(s,K)),!$.keepError&&vn(n.errors,K),!$.keepDirty&&vn(n.dirtyFields,K),!$.keepTouched&&vn(n.touchedFields,K),!$.keepIsValidating&&vn(n.validatingFields,K),!e.shouldUnregister&&!$.keepDefaultValue&&vn(i,K);f.state.next({values:An(s)}),f.state.next({...n,...$.keepDirty?{isDirty:N()}:{}}),!$.keepIsValid&&y()},et=({disabled:L,name:$})=>{(li(L)&&o.mount||L||a.disabled.has($))&&(L?a.disabled.add($):a.disabled.delete($))},Fe=(L,$={})=>{let K=me(r,L);const le=li($.disabled)||li(e.disabled);return Et(r,L,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:L}},name:L,mount:!0,...$}}),a.mount.add(L),K?et({disabled:li($.disabled)?$.disabled:e.disabled,name:L}):S(L,!0,$.value),{...le?{disabled:$.disabled||e.disabled}:{},...e.progressive?{required:!!$.required,min:af($.min),max:af($.max),minLength:af($.minLength),maxLength:af($.maxLength),pattern:af($.pattern)}:{},name:L,onChange:ye,onBlur:ye,ref:ce=>{if(ce){Fe(L,$),K=me(r,L);const ne=hn(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,se=oCe(ne),Ae=K._f.refs||[];if(se?Ae.find(st=>st===ne):ne===K._f.ref)return;Et(r,L,{_f:{...K._f,...se?{refs:[...Ae.filter($C),ne,...Array.isArray(me(i,L))?[{}]:[]],ref:{type:ne.type,name:L}}:{ref:ne}}}),S(L,!1,void 0,ne)}else K=me(r,L,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(cW(a.array,L)&&o.action)&&a.unMount.add(L)}}},qe=()=>e.shouldFocusError&&sp(r,z,a.mount),dt=L=>{li(L)&&(f.state.next({disabled:L}),sp(r,($,K)=>{const le=me(r,K);le&&($.disabled=le._f.disabled||L,Array.isArray(le._f.refs)&&le._f.refs.forEach(ce=>{ce.disabled=le._f.disabled||L}))},0,!1))},Tt=(L,$)=>async K=>{let le;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let ce=An(s);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:ne,values:se}=await A();n.errors=ne,ce=An(se)}else await k(r);if(a.disabled.size)for(const ne of a.disabled)vn(ce,ne);if(vn(n.errors,"root"),$r(n.errors)){f.state.next({errors:{}});try{await L(ce,K)}catch(ne){le=ne}}else $&&await $({...n.errors},K),qe(),setTimeout(qe);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$r(n.errors)&&!le,submitCount:n.submitCount+1,errors:n.errors}),le)throw le},Kt=(L,$={})=>{me(r,L)&&(hn($.defaultValue)?fe(L,An(me(i,L))):(fe(L,$.defaultValue),Et(i,L,An($.defaultValue))),$.keepTouched||vn(n.touchedFields,L),$.keepDirty||(vn(n.dirtyFields,L),n.isDirty=$.defaultValue?N(L,An(me(i,L))):N()),$.keepError||(vn(n.errors,L),u.isValid&&y()),f.state.next({...n}))},Re=(L,$={})=>{const K=L?An(L):i,le=An(K),ce=$r(L),ne=ce?i:le;if($.keepDefaultValues||(i=K),!$.keepValues){if($.keepDirtyValues){const se=new Set([...a.mount,...Object.keys(of(i,s))]);for(const Ae of Array.from(se))me(n.dirtyFields,Ae)?Et(ne,Ae,me(s,Ae)):fe(Ae,me(ne,Ae))}else{if(Ux&&hn(L))for(const se of a.mount){const Ae=me(r,se);if(Ae&&Ae._f){const st=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(L_(st)){const yn=st.closest("form");if(yn){yn.reset();break}}}}if($.keepFieldsRef)for(const se of a.mount)fe(se,me(ne,se));else r={}}s=e.shouldUnregister?$.keepDefaultValues?An(i):{}:An(ne),f.array.next({values:{...ne}}),f.state.next({values:{...ne}})}a={mount:$.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!$.keepIsValid||!!$.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:$.keepSubmitCount?n.submitCount:0,isDirty:ce?!1:$.keepDirty?n.isDirty:!!($.keepDefaultValues&&!Ro(L,i)),isSubmitted:$.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ce?{}:$.keepDirtyValues?$.keepDefaultValues&&s?of(i,s):n.dirtyFields:$.keepDefaultValues&&L?of(i,L):$.keepDirty?n.dirtyFields:{},touchedFields:$.keepTouched?n.touchedFields:{},errors:$.keepErrors?n.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Pe=(L,$)=>Re(ss(L)?L(s):L,$),Rt=(L,$={})=>{const K=me(r,L),le=K&&K._f;if(le){const ce=le.refs?le.refs[0]:le.ref;ce.focus&&(ce.focus(),$.shouldSelect&&ss(ce.select)&&ce.select())}},qt=L=>{n={...n,...L}},it={control:{register:Fe,unregister:we,getFieldState:G,handleSubmit:Tt,setError:W,_subscribe:ae,_runSchema:A,_focusError:qe,_getWatch:P,_getDirty:N,_setValid:y,_setFieldArray:E,_setDisabledField:et,_setErrors:C,_getFieldArray:R,_reset:Re,_resetDefaultValues:()=>ss(e.defaultValues)&&e.defaultValues().then(L=>{Pe(L,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:x,_disableForm:dt,_subjects:f,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return a},set _names(L){a=L},get _formState(){return n},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:ve,trigger:j,register:Fe,handleSubmit:Tt,watch:re,setValue:fe,getValues:U,reset:Pe,resetField:Kt,clearErrors:H,unregister:we,setError:W,setFocus:Rt,getFieldState:G};return{...it,formControl:it}}function am(t={}){const e=Q.useRef(void 0),n=Q.useRef(void 0),[r,i]=Q.useState({isDirty:!1,isValidating:!1,isLoading:ss(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ss(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!ss(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=vCe(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,Bx(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Q.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Q.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Q.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Q.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Q.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Q.useEffect(()=>{t.values&&!Ro(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Q.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=lW(r,s),e.current}const $L=(t,e,n)=>{if(t&&"reportValidity"in t){const r=me(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},vW=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?$L(r.ref,n,t):r.refs&&r.refs.forEach(i=>$L(i,n,t))}},_Ce=(t,e)=>{e.shouldUseNativeValidation&&vW(t,e);const n={};for(const r in t){const i=me(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(wCe(e.names||Object.keys(t),r)){const o=Object.assign({},me(n,r));Et(o,"root",s),Et(n,r,o)}else Et(n,r,s)}return n},wCe=(t,e)=>t.some(n=>n.startsWith(e+"."));var TCe=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var c=n[o].types,l=c&&c[r.code];n[o]=dW(o,e,n,i,l?[].concat(l,r.message):r.message)}t.shift()}return n},cm=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(l){return s.shouldUseNativeValidation&&vW({},s),{errors:{},values:n.raw?r:l}})}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:_Ce(TCe(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},vt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(vt||(vt={}));var BL;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(BL||(BL={}));const Se=vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ta=t=>{switch(typeof t){case"undefined":return Se.undefined;case"string":return Se.string;case"number":return Number.isNaN(t)?Se.nan:Se.number;case"boolean":return Se.boolean;case"function":return Se.function;case"bigint":return Se.bigint;case"symbol":return Se.symbol;case"object":return Array.isArray(t)?Se.array:t===null?Se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Se.promise:typeof Map<"u"&&t instanceof Map?Se.map:typeof Set<"u"&&t instanceof Set?Se.set:typeof Date<"u"&&t instanceof Date?Se.date:Se.object;default:return Se.unknown}},de=vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ia extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}static assert(e){if(!(e instanceof ia))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ia.create=t=>new ia(t);const AS=(t,e)=>{let n;switch(t.code){case de.invalid_type:t.received===Se.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,vt.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${vt.joinValues(t.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${vt.joinValues(t.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${vt.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:vt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case de.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case de.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=e.defaultError,vt.assertNever(t)}return{message:n}};let ECe=AS;function CCe(){return ECe}const bCe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function Te(t,e){const n=CCe(),r=bCe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===AS?void 0:AS].filter(i=>!!i)});t.common.issues.push(r)}class Ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Ei.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),Cf=t=>({status:"dirty",value:t}),Wi=t=>({status:"valid",value:t}),HL=t=>t.status==="aborted",zL=t=>t.status==="dirty",Xd=t=>t.status==="valid",j_=t=>typeof Promise<"u"&&t instanceof Promise;var ke;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ke||(ke={}));class bc{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const WL=(t,e)=>{if(Xd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ia(t.common.issues);return this._error=n,this._error}}};function Ze(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}class pt{get description(){return this._def.description}_getType(e){return Ta(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ei,ctx:{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(j_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},i=this._parseSync({data:e,path:r.path,parent:r});return WL(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Xd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Xd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(j_(i)?i:Promise.resolve(i));return WL(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:de.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new eh({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return cc.create(this,this._def)}nullable(){return th.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ro.create(this)}promise(){return H_.create(this,this._def)}or(e){return $_.create([this,e],this._def)}and(e){return B_.create(this,e,this._def)}transform(e){return new eh({...Ze(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new RS({...Ze(this._def),innerType:this,defaultValue:n,typeName:He.ZodDefault})}brand(){return new qCe({typeName:He.ZodBranded,type:this,...Ze(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new xS({...Ze(this._def),innerType:this,catchValue:n,typeName:He.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Wx.create(this,e)}readonly(){return PS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ICe=/^c[^\s-]{8,}$/i,SCe=/^[0-9a-z]+$/,ACe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RCe=/^[a-z0-9_-]{21}$/i,xCe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PCe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,NCe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,OCe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let BC;const MCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,LCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UCe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,jCe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_W="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VCe=new RegExp(`^${_W}$`);function wW(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function $Ce(t){return new RegExp(`^${wW(t)}$`)}function BCe(t){let e=`${_W}T${wW(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function HCe(t,e){return!!((e==="v4"||!e)&&MCe.test(t)||(e==="v6"||!e)&&LCe.test(t))}function zCe(t,e){if(!xCe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function WCe(t,e){return!!((e==="v4"||!e)&&DCe.test(t)||(e==="v6"||!e)&&FCe.test(t))}class $a extends pt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Se.string){const s=this._getOrReturnCtx(e);return Te(s,{code:de.invalid_type,expected:Se.string,received:s.parsedType}),Be}const r=new Ei;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:de.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:de.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Te(i,{code:de.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Te(i,{code:de.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")NCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"email",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")BC||(BC=new RegExp(OCe,"u")),BC.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"emoji",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")kCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"uuid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")RCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"nanoid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")ICe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")SCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid2",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")ACe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ulid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Te(i,{validation:"url",code:de.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"regex",code:de.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Te(i,{code:de.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:de.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:de.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?BCe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:de.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?VCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:de.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?$Ce(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:de.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?PCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"duration",code:de.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?HCe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ip",code:de.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?zCe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"jwt",code:de.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?WCe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cidr",code:de.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?UCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64",code:de.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?jCe.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64url",code:de.invalid_string,message:s.message}),r.dirty()):vt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:de.invalid_string,...ke.errToObj(r)})}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ke.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ke.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ke.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ke.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ke.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ke.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ke.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ke.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ke.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ke.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ke.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ke.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ke.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ke.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ke.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ke.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ke.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ke.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ke.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ke.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ke.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ke.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ke.errToObj(n)})}nonempty(e){return this.min(1,ke.errToObj(e))}trim(){return new $a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$a.create=t=>new $a({checks:[],typeName:He.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ze(t)});function KCe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class lm extends pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Se.number){const s=this._getOrReturnCtx(e);return Te(s,{code:de.invalid_type,expected:Se.number,received:s.parsedType}),Be}let r;const i=new Ei;for(const s of this._def.checks)s.kind==="int"?vt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:de.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?KCe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:de.not_finite,message:s.message}),i.dirty()):vt.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ke.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ke.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ke.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ke.toString(n))}setLimit(e,n,r,i){return new lm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ke.toString(i)}]})}_addCheck(e){return new lm({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ke.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ke.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ke.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ke.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ke.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&vt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}lm.create=t=>new lm({checks:[],typeName:He.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ze(t)});class um extends pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Se.bigint)return this._getInvalidInput(e);let r;const i=new Ei;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):vt.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Te(n,{code:de.invalid_type,expected:Se.bigint,received:n.parsedType}),Be}gte(e,n){return this.setLimit("min",e,!0,ke.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ke.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ke.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ke.toString(n))}setLimit(e,n,r,i){return new um({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ke.toString(i)}]})}_addCheck(e){return new um({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}um.create=t=>new um({checks:[],typeName:He.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ze(t)});class KL extends pt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Se.boolean){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Se.boolean,received:r.parsedType}),Be}return Wi(e.data)}}KL.create=t=>new KL({typeName:He.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ze(t)});class V_ extends pt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Se.date){const s=this._getOrReturnCtx(e);return Te(s,{code:de.invalid_type,expected:Se.date,received:s.parsedType}),Be}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Te(s,{code:de.invalid_date}),Be}const r=new Ei;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:de.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:de.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):vt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new V_({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ke.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ke.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}V_.create=t=>new V_({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:He.ZodDate,...Ze(t)});class qL extends pt{_parse(e){if(this._getType(e)!==Se.symbol){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Se.symbol,received:r.parsedType}),Be}return Wi(e.data)}}qL.create=t=>new qL({typeName:He.ZodSymbol,...Ze(t)});class GL extends pt{_parse(e){if(this._getType(e)!==Se.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Se.undefined,received:r.parsedType}),Be}return Wi(e.data)}}GL.create=t=>new GL({typeName:He.ZodUndefined,...Ze(t)});class QL extends pt{_parse(e){if(this._getType(e)!==Se.null){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Se.null,received:r.parsedType}),Be}return Wi(e.data)}}QL.create=t=>new QL({typeName:He.ZodNull,...Ze(t)});class YL extends pt{constructor(){super(...arguments),this._any=!0}_parse(e){return Wi(e.data)}}YL.create=t=>new YL({typeName:He.ZodAny,...Ze(t)});class JL extends pt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wi(e.data)}}JL.create=t=>new JL({typeName:He.ZodUnknown,...Ze(t)});class Ic extends pt{_parse(e){const n=this._getOrReturnCtx(e);return Te(n,{code:de.invalid_type,expected:Se.never,received:n.parsedType}),Be}}Ic.create=t=>new Ic({typeName:He.ZodNever,...Ze(t)});class XL extends pt{_parse(e){if(this._getType(e)!==Se.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Se.void,received:r.parsedType}),Be}return Wi(e.data)}}XL.create=t=>new XL({typeName:He.ZodVoid,...Ze(t)});class ro extends pt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Se.array)return Te(n,{code:de.invalid_type,expected:Se.array,received:n.parsedType}),Be;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Te(n,{code:o?de.too_big:de.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Te(n,{code:de.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Te(n,{code:de.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new bc(n,o,n.path,a)))).then(o=>Ei.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new bc(n,o,n.path,a)));return Ei.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new ro({...this._def,minLength:{value:e,message:ke.toString(n)}})}max(e,n){return new ro({...this._def,maxLength:{value:e,message:ke.toString(n)}})}length(e,n){return new ro({...this._def,exactLength:{value:e,message:ke.toString(n)}})}nonempty(e){return this.min(1,e)}}ro.create=(t,e)=>new ro({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...Ze(e)});function Ou(t){if(t instanceof nn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=cc.create(Ou(r))}return new nn({...t._def,shape:()=>e})}else return t instanceof ro?new ro({...t._def,type:Ou(t.element)}):t instanceof cc?cc.create(Ou(t.unwrap())):t instanceof th?th.create(Ou(t.unwrap())):t instanceof ql?ql.create(t.items.map(e=>Ou(e))):t}class nn extends pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=vt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Se.object){const l=this._getOrReturnCtx(e);return Te(l,{code:de.invalid_type,expected:Se.object,received:l.parsedType}),Be}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ic&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],d=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new bc(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Ic){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Te(i,{code:de.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new bc(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,f=await u.value;l.push({key:d,value:f,alwaysSet:u.alwaysSet})}return l}).then(l=>Ei.mergeObjectSync(r,l)):Ei.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ke.errToObj,new nn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ke.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new nn({...this._def,unknownKeys:"strip"})}passthrough(){return new nn({...this._def,unknownKeys:"passthrough"})}extend(e){return new nn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nn({...this._def,catchall:e})}pick(e){const n={};for(const r of vt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new nn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of vt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new nn({...this._def,shape:()=>n})}deepPartial(){return Ou(this)}partial(e){const n={};for(const r of vt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new nn({...this._def,shape:()=>n})}required(e){const n={};for(const r of vt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof cc;)s=s._def.innerType;n[r]=s}return new nn({...this._def,shape:()=>n})}keyof(){return TW(vt.objectKeys(this.shape))}}nn.create=(t,e)=>new nn({shape:()=>t,unknownKeys:"strip",catchall:Ic.create(),typeName:He.ZodObject,...Ze(e)});nn.strictCreate=(t,e)=>new nn({shape:()=>t,unknownKeys:"strict",catchall:Ic.create(),typeName:He.ZodObject,...Ze(e)});nn.lazycreate=(t,e)=>new nn({shape:t,unknownKeys:"strip",catchall:Ic.create(),typeName:He.ZodObject,...Ze(e)});class $_ extends pt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ia(a.ctx.common.issues));return Te(n,{code:de.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new ia(c));return Te(n,{code:de.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}$_.create=(t,e)=>new $_({options:t,typeName:He.ZodUnion,...Ze(e)});function kS(t,e){const n=Ta(t),r=Ta(e);if(t===e)return{valid:!0,data:t};if(n===Se.object&&r===Se.object){const i=vt.objectKeys(e),s=vt.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=kS(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Se.array&&r===Se.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=kS(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Se.date&&r===Se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class B_ extends pt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(HL(s)||HL(o))return Be;const a=kS(s.value,o.value);return a.valid?((zL(s)||zL(o))&&n.dirty(),{status:n.value,value:a.data}):(Te(r,{code:de.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}B_.create=(t,e,n)=>new B_({left:t,right:e,typeName:He.ZodIntersection,...Ze(n)});class ql extends pt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.array)return Te(r,{code:de.invalid_type,expected:Se.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return Te(r,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(Te(r,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new bc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Ei.mergeArray(n,o)):Ei.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ql({...this._def,rest:e})}}ql.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ql({items:t,typeName:He.ZodTuple,rest:null,...Ze(e)})};class ZL extends pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.map)return Te(r,{code:de.invalid_type,expected:Se.map,received:r.parsedType}),Be;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new bc(r,a,r.path,[l,"key"])),value:s._parse(new bc(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}ZL.create=(t,e,n)=>new ZL({valueType:e,keyType:t,typeName:He.ZodMap,...Ze(n)});class dm extends pt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.set)return Te(r,{code:de.invalid_type,expected:Se.set,received:r.parsedType}),Be;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Te(r,{code:de.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Te(r,{code:de.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new bc(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new dm({...this._def,minSize:{value:e,message:ke.toString(n)}})}max(e,n){return new dm({...this._def,maxSize:{value:e,message:ke.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}dm.create=(t,e)=>new dm({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...Ze(e)});class e2 extends pt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}e2.create=(t,e)=>new e2({getter:t,typeName:He.ZodLazy,...Ze(e)});class t2 extends pt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Te(n,{received:n.data,code:de.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}t2.create=(t,e)=>new t2({value:t,typeName:He.ZodLiteral,...Ze(e)});function TW(t,e){return new Zd({values:t,typeName:He.ZodEnum,...Ze(e)})}class Zd extends pt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{expected:vt.joinValues(r),received:n.parsedType,code:de.invalid_type}),Be}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{received:n.data,code:de.invalid_enum_value,options:r}),Be}return Wi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Zd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Zd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Zd.create=TW;class n2 extends pt{_parse(e){const n=vt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Se.string&&r.parsedType!==Se.number){const i=vt.objectValues(n);return Te(r,{expected:vt.joinValues(i),received:r.parsedType,code:de.invalid_type}),Be}if(this._cache||(this._cache=new Set(vt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=vt.objectValues(n);return Te(r,{received:r.data,code:de.invalid_enum_value,options:i}),Be}return Wi(e.data)}get enum(){return this._def.values}}n2.create=(t,e)=>new n2({values:t,typeName:He.ZodNativeEnum,...Ze(e)});class H_ extends pt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.promise&&n.common.async===!1)return Te(n,{code:de.invalid_type,expected:Se.promise,received:n.parsedType}),Be;const r=n.parsedType===Se.promise?n.data:Promise.resolve(n.data);return Wi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}H_.create=(t,e)=>new H_({type:t,typeName:He.ZodPromise,...Ze(e)});class eh extends pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Te(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Be;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Be:c.status==="dirty"||n.value==="dirty"?Cf(c.value):c});{if(n.value==="aborted")return Be;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Be:a.status==="dirty"||n.value==="dirty"?Cf(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xd(o))return Be;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Xd(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):Be);vt.assertNever(i)}}eh.create=(t,e,n)=>new eh({schema:t,typeName:He.ZodEffects,effect:e,...Ze(n)});eh.createWithPreprocess=(t,e,n)=>new eh({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...Ze(n)});class cc extends pt{_parse(e){return this._getType(e)===Se.undefined?Wi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}cc.create=(t,e)=>new cc({innerType:t,typeName:He.ZodOptional,...Ze(e)});class th extends pt{_parse(e){return this._getType(e)===Se.null?Wi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}th.create=(t,e)=>new th({innerType:t,typeName:He.ZodNullable,...Ze(e)});class RS extends pt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Se.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}RS.create=(t,e)=>new RS({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ze(e)});class xS extends pt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return j_(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xS.create=(t,e)=>new xS({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ze(e)});class r2 extends pt{_parse(e){if(this._getType(e)!==Se.nan){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Se.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}r2.create=t=>new r2({typeName:He.ZodNaN,...Ze(t)});class qCe extends pt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Wx extends pt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),Cf(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Wx({in:e,out:n,typeName:He.ZodPipeline})}}class PS extends pt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Xd(i)&&(i.value=Object.freeze(i.value)),i);return j_(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}PS.create=(t,e)=>new PS({innerType:t,typeName:He.ZodReadonly,...Ze(e)});nn.lazycreate;var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const Lo=$a.create;Ic.create;ro.create;const ng=nn.create;nn.strictCreate;$_.create;B_.create;ql.create;Zd.create;H_.create;cc.create;th.create;var GCe=Object.defineProperty,QCe=Object.defineProperties,YCe=Object.getOwnPropertyDescriptors,z_=Object.getOwnPropertySymbols,EW=Object.prototype.hasOwnProperty,CW=Object.prototype.propertyIsEnumerable,i2=(t,e,n)=>e in t?GCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JCe=(t,e)=>{for(var n in e||(e={}))EW.call(e,n)&&i2(t,n,e[n]);if(z_)for(var n of z_(e))CW.call(e,n)&&i2(t,n,e[n]);return t},XCe=(t,e)=>QCe(t,YCe(e)),ZCe=(t,e)=>{var n={};for(var r in t)EW.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&z_)for(var r of z_(t))e.indexOf(r)<0&&CW.call(t,r)&&(n[r]=t[r]);return n};function ebe(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function tbe(t){let e=g.useRef();return g.useEffect(()=>{e.current=t}),e.current}var nbe=18,bW=40,rbe=`${bW}px`,ibe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function sbe({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[i,s]=g.useState(!1),[o,a]=g.useState(!1),[c,l]=g.useState(!1),u=g.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&i&&o,[i,o,n]),d=g.useCallback(()=>{let f=t.current,m=e.current;if(!f||!m||c||n==="none")return;let _=f,y=_.getBoundingClientRect().left+_.offsetWidth,T=_.getBoundingClientRect().top+_.offsetHeight/2,E=y-nbe,w=T;document.querySelectorAll(ibe).length===0&&document.elementFromPoint(E,w)===f||(s(!0),l(!0))},[t,e,c,n]);return g.useEffect(()=>{let f=t.current;if(!f||n==="none")return;function m(){let y=window.innerWidth-f.getBoundingClientRect().right;a(y>=bW)}m();let _=setInterval(m,1e3);return()=>{clearInterval(_)}},[t,n]),g.useEffect(()=>{let f=r||document.activeElement===e.current;if(n==="none"||!f)return;let m=setTimeout(d,0),_=setTimeout(d,2e3),y=setTimeout(d,5e3),T=setTimeout(()=>{l(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(_),clearTimeout(y),clearTimeout(T)}},[e,r,n,d]),{hasPWMBadge:i,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:rbe}}var IW=g.createContext({}),SW=g.forwardRef((t,e)=>{var n=t,{value:r,onChange:i,maxLength:s,textAlign:o="left",pattern:a,placeholder:c,inputMode:l="numeric",onComplete:u,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:f,containerClassName:m,noScriptCSSFallback:_=obe,render:y,children:T}=n,E=ZCe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),w,C,S,M,D;let[A,I]=g.useState(typeof E.defaultValue=="string"?E.defaultValue:""),k=r??A,x=tbe(k),N=g.useCallback(Re=>{i==null||i(Re),I(Re)},[i]),P=g.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),R=g.useRef(null),B=g.useRef(null),he=g.useRef({value:k,onChange:N,isIOS:typeof window<"u"&&((C=(w=window==null?void 0:window.CSS)==null?void 0:w.supports)==null?void 0:C.call(w,"-webkit-touch-callout","none"))}),fe=g.useRef({prev:[(S=R.current)==null?void 0:S.selectionStart,(M=R.current)==null?void 0:M.selectionEnd,(D=R.current)==null?void 0:D.selectionDirection]});g.useImperativeHandle(e,()=>R.current,[]),g.useEffect(()=>{let Re=R.current,Pe=B.current;if(!Re||!Pe)return;he.current.value!==Re.value&&he.current.onChange(Re.value),fe.current.prev=[Re.selectionStart,Re.selectionEnd,Re.selectionDirection];function Rt(){if(document.activeElement!==Re){H(null),re(null);return}let it=Re.selectionStart,L=Re.selectionEnd,$=Re.selectionDirection,K=Re.maxLength,le=Re.value,ce=fe.current.prev,ne=-1,se=-1,Ae;if(le.length!==0&&it!==null&&L!==null){let Ur=it===L,Ai=it===le.length&&le.length<K;if(Ur&&!Ai){let On=it;if(On===0)ne=0,se=1,Ae="forward";else if(On===K)ne=On-1,se=On,Ae="backward";else if(K>1&&le.length>1){let Bn=0;if(ce[0]!==null&&ce[1]!==null){Ae=On<ce[1]?"backward":"forward";let Is=ce[0]===ce[1]&&ce[0]<K;Ae==="backward"&&!Is&&(Bn=-1)}ne=Bn+On,se=Bn+On+1}}ne!==-1&&se!==-1&&ne!==se&&R.current.setSelectionRange(ne,se,Ae)}let st=ne!==-1?ne:it,yn=se!==-1?se:L,Fr=Ae??$;H(st),re(yn),fe.current.prev=[st,yn,Fr]}if(document.addEventListener("selectionchange",Rt,{capture:!0}),Rt(),document.activeElement===Re&&U(!0),!document.getElementById("input-otp-style")){let it=document.createElement("style");if(it.id="input-otp-style",document.head.appendChild(it),it.sheet){let L="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";cf(it.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),cf(it.sheet,`[data-input-otp]:autofill { ${L} }`),cf(it.sheet,`[data-input-otp]:-webkit-autofill { ${L} }`),cf(it.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),cf(it.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let qt=()=>{Pe&&Pe.style.setProperty("--root-height",`${Re.clientHeight}px`)};qt();let un=new ResizeObserver(qt);return un.observe(Re),()=>{document.removeEventListener("selectionchange",Rt,{capture:!0}),un.disconnect()}},[]);let[ye,z]=g.useState(!1),[j,U]=g.useState(!1),[G,H]=g.useState(null),[W,re]=g.useState(null);g.useEffect(()=>{ebe(()=>{var Re,Pe,Rt,qt;(Re=R.current)==null||Re.dispatchEvent(new Event("input"));let un=(Pe=R.current)==null?void 0:Pe.selectionStart,it=(Rt=R.current)==null?void 0:Rt.selectionEnd,L=(qt=R.current)==null?void 0:qt.selectionDirection;un!==null&&it!==null&&(H(un),re(it),fe.current.prev=[un,it,L])})},[k,j]),g.useEffect(()=>{x!==void 0&&k!==x&&x.length<s&&k.length===s&&(u==null||u(k))},[s,u,x,k]);let ae=sbe({containerRef:B,inputRef:R,pushPasswordManagerStrategy:d,isFocused:j}),ve=g.useCallback(Re=>{let Pe=Re.currentTarget.value.slice(0,s);if(Pe.length>0&&P&&!P.test(Pe)){Re.preventDefault();return}typeof x=="string"&&Pe.length<x.length&&document.dispatchEvent(new Event("selectionchange")),N(Pe)},[s,N,x,P]),we=g.useCallback(()=>{var Re;if(R.current){let Pe=Math.min(R.current.value.length,s-1),Rt=R.current.value.length;(Re=R.current)==null||Re.setSelectionRange(Pe,Rt),H(Pe),re(Rt)}U(!0)},[s]),et=g.useCallback(Re=>{var Pe,Rt;let qt=R.current;if(!f&&(!he.current.isIOS||!Re.clipboardData||!qt))return;let un=Re.clipboardData.getData("text/plain"),it=f?f(un):un;Re.preventDefault();let L=(Pe=R.current)==null?void 0:Pe.selectionStart,$=(Rt=R.current)==null?void 0:Rt.selectionEnd,K=(L!==$?k.slice(0,L)+it+k.slice($):k.slice(0,L)+it+k.slice(L)).slice(0,s);if(K.length>0&&P&&!P.test(K))return;qt.value=K,N(K);let le=Math.min(K.length,s-1),ce=K.length;qt.setSelectionRange(le,ce),H(le),re(ce)},[s,N,P,k]),Fe=g.useMemo(()=>({position:"relative",cursor:E.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[E.disabled]),qe=g.useMemo(()=>({position:"absolute",inset:0,width:ae.willPushPWMBadge?`calc(100% + ${ae.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:ae.willPushPWMBadge?`inset(0 ${ae.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[ae.PWM_BADGE_SPACE_WIDTH,ae.willPushPWMBadge,o]),dt=g.useMemo(()=>g.createElement("input",XCe(JCe({autoComplete:E.autoComplete||"one-time-code"},E),{"data-input-otp":!0,"data-input-otp-placeholder-shown":k.length===0||void 0,"data-input-otp-mss":G,"data-input-otp-mse":W,inputMode:l,pattern:P==null?void 0:P.source,"aria-placeholder":c,style:qe,maxLength:s,value:k,ref:R,onPaste:Re=>{var Pe;et(Re),(Pe=E.onPaste)==null||Pe.call(E,Re)},onChange:ve,onMouseOver:Re=>{var Pe;z(!0),(Pe=E.onMouseOver)==null||Pe.call(E,Re)},onMouseLeave:Re=>{var Pe;z(!1),(Pe=E.onMouseLeave)==null||Pe.call(E,Re)},onFocus:Re=>{var Pe;we(),(Pe=E.onFocus)==null||Pe.call(E,Re)},onBlur:Re=>{var Pe;U(!1),(Pe=E.onBlur)==null||Pe.call(E,Re)}})),[ve,we,et,l,qe,s,W,G,E,P==null?void 0:P.source,k]),Tt=g.useMemo(()=>({slots:Array.from({length:s}).map((Re,Pe)=>{var Rt;let qt=j&&G!==null&&W!==null&&(G===W&&Pe===G||Pe>=G&&Pe<W),un=k[Pe]!==void 0?k[Pe]:null,it=k[0]!==void 0?null:(Rt=c==null?void 0:c[Pe])!=null?Rt:null;return{char:un,placeholderChar:it,isActive:qt,hasFakeCaret:qt&&un===null}}),isFocused:j,isHovering:!E.disabled&&ye}),[j,ye,s,W,G,E.disabled,k]),Kt=g.useMemo(()=>y?y(Tt):g.createElement(IW.Provider,{value:Tt},T),[T,Tt,y]);return g.createElement(g.Fragment,null,_!==null&&g.createElement("noscript",null,g.createElement("style",null,_)),g.createElement("div",{ref:B,"data-input-otp-container":!0,style:Fe,className:m},Kt,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},dt)))});SW.displayName="Input";function cf(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var obe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const AW=g.forwardRef(({className:t,containerClassName:e,...n},r)=>p.jsx(SW,{ref:r,containerClassName:te("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:te("disabled:cursor-not-allowed",t),...n}));AW.displayName="InputOTP";const kW=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:te("flex items-center",t),...e}));kW.displayName="InputOTPGroup";const Gc=g.forwardRef(({index:t,className:e,...n},r)=>{const i=g.useContext(IW),{char:s,hasFakeCaret:o,isActive:a}=i.slots[t];return p.jsxs("div",{ref:r,className:te("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",a&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[s,o&&p.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:p.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Gc.displayName="InputOTPSlot";const abe=g.forwardRef(({...t},e)=>p.jsx("div",{ref:e,role:"separator",...t,children:p.jsx(lZ,{})}));abe.displayName="InputOTPSeparator";var cbe="Label",RW=g.forwardRef((t,e)=>p.jsx(je.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));RW.displayName=cbe;var xW=RW;const lbe=fh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),PW=g.forwardRef(({className:t,...e},n)=>p.jsx(xW,{ref:n,className:te(lbe(),t),...e}));PW.displayName=xW.displayName;const hm=tCe,NW=g.createContext({}),Fo=({...t})=>p.jsx(NW.Provider,{value:{name:t.name},children:p.jsx(sCe,{...t})}),JT=()=>{const t=g.useContext(NW),e=g.useContext(OW),{getFieldState:n,formState:r}=YT(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},OW=g.createContext({}),Ws=g.forwardRef(({className:t,...e},n)=>{const r=g.useId();return p.jsx(OW.Provider,{value:{id:r},children:p.jsx("div",{ref:n,className:te("space-y-2",t),...e})})});Ws.displayName="FormItem";const Ks=g.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=JT();return p.jsx(PW,{ref:n,className:te(r&&"text-destructive",t),htmlFor:i,...e})});Ks.displayName="FormLabel";const qs=g.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=JT();return p.jsx(Zl,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});qs.displayName="FormControl";const ube=g.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=JT();return p.jsx("p",{ref:n,id:r,className:te("text-sm text-muted-foreground",t),...e})});ube.displayName="FormDescription";const Gs=g.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=JT(),o=i?String(i==null?void 0:i.message):e;return o?p.jsx("p",{ref:r,id:s,className:te("text-sm font-medium text-destructive",t),...n,children:o}):null});Gs.displayName="FormMessage";const dbe=ng({phoneNumber:Lo().min(10,"Phone number must be at least 10 digits").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number with country code")}),hbe=ng({otp:Lo().min(6,"OTP must be 6 digits").max(6,"OTP must be 6 digits")});function fbe({onBack:t,className:e}){const{signInWithPhone:n,verifyPhoneOTP:r,loading:i}=vr(),[s,o]=g.useState("phone"),[a,c]=g.useState(null),[l,u]=g.useState(""),d=am({resolver:cm(dbe),defaultValues:{phoneNumber:""}}),f=am({resolver:cm(hbe),defaultValues:{otp:""}}),m=async E=>{try{const w=E.phoneNumber.startsWith("+")?E.phoneNumber:`+${E.phoneNumber}`,C=await n(w);c(C),u(w),o("otp")}catch(w){console.error("Error sending OTP:",w)}},_=async E=>{if(a)try{await r(a,E.otp)}catch(w){console.error("Error verifying OTP:",w),f.setError("otp",{message:"Invalid OTP. Please try again."})}},y=async()=>{if(l)try{const E=await n(l);c(E)}catch(E){console.error("Error resending OTP:",E)}},T=()=>{o("phone"),c(null),f.reset()};return p.jsxs(co,{className:te("w-full max-w-md animate-fade-in",e),children:[p.jsx(na,{children:p.jsxs("div",{className:"flex items-center gap-3",children:[(s==="otp"||t)&&p.jsx(at,{variant:"ghost",size:"icon",onClick:s==="otp"?T:t,className:"h-8 w-8",children:p.jsx(HX,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(A4,{className:"h-5 w-5 text-primary"}),p.jsx(ra,{className:"text-xl",children:s==="phone"?"Sign in with Phone":"Enter Verification Code"})]})]})}),p.jsx(lo,{className:"space-y-6",children:s==="phone"?p.jsxs(p.Fragment,{children:[p.jsx("div",{id:"recaptcha-container",className:"flex justify-center"}),p.jsx(hm,{...d,children:p.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-4",children:[p.jsx(Fo,{control:d.control,name:"phoneNumber",render:({field:E})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Phone Number"}),p.jsx(qs,{children:p.jsx(ls,{placeholder:"+1234567890",...E,className:"text-center font-mono"})}),p.jsx(Gs,{}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +1 for US, +91 for India)"})]})}),p.jsx(at,{type:"submit",className:"w-full",disabled:i,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})})]}):p.jsx(hm,{...f,children:p.jsxs("form",{onSubmit:f.handleSubmit(_),className:"space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"We've sent a 6-digit code to"}),p.jsx("p",{className:"font-medium",children:l})]}),p.jsx(Fo,{control:f.control,name:"otp",render:({field:E})=>p.jsxs(Ws,{children:[p.jsx(Ks,{className:"sr-only",children:"Verification Code"}),p.jsx(qs,{children:p.jsx("div",{className:"flex justify-center",children:p.jsx(AW,{maxLength:6,value:E.value,onChange:E.onChange,children:p.jsxs(kW,{children:[p.jsx(Gc,{index:0}),p.jsx(Gc,{index:1}),p.jsx(Gc,{index:2}),p.jsx(Gc,{index:3}),p.jsx(Gc,{index:4}),p.jsx(Gc,{index:5})]})})})}),p.jsx(Gs,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(at,{type:"submit",className:"w-full",disabled:i||f.watch("otp").length!==6,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Sign In"}),p.jsx(at,{type:"button",variant:"ghost",className:"w-full",onClick:y,disabled:i,children:"Resend OTP"})]})]})})})]})}var XT="Tabs",[pbe,kIe]=Ii(XT,[BT]),MW=BT(),[mbe,Kx]=pbe(XT),DW=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...l}=t,u=$T(a),[d,f]=eu({prop:r,onChange:i,defaultProp:s??"",caller:XT});return p.jsx(mbe,{scope:n,baseId:jo(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:c,children:p.jsx(je.div,{dir:u,"data-orientation":o,...l,ref:e})})});DW.displayName=XT;var LW="TabsList",FW=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Kx(LW,n),o=MW(n);return p.jsx(T5,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(je.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});FW.displayName=LW;var UW="TabsTrigger",jW=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=Kx(UW,n),a=MW(n),c=BW(o.baseId,r),l=HW(o.baseId,r),u=r===o.value;return p.jsx(E5,{asChild:!0,...a,focusable:!i,active:u,children:p.jsx(je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:Ce(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ce(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});jW.displayName=UW;var VW="TabsContent",$W=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=Kx(VW,n),c=BW(a.baseId,r),l=HW(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(nr,{present:i||u,children:({present:f})=>p.jsx(je.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});$W.displayName=VW;function BW(t,e){return`${t}-trigger-${e}`}function HW(t,e){return`${t}-content-${e}`}var gbe=DW,zW=FW,WW=jW,KW=$W;const ybe=gbe,qW=g.forwardRef(({className:t,...e},n)=>p.jsx(zW,{ref:n,className:te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));qW.displayName=zW.displayName;const NS=g.forwardRef(({className:t,...e},n)=>p.jsx(WW,{ref:n,className:te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));NS.displayName=WW.displayName;const OS=g.forwardRef(({className:t,...e},n)=>p.jsx(KW,{ref:n,className:te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));OS.displayName=KW.displayName;const vbe=ng({email:Lo().email({message:"Invalid email address."}),password:Lo().min(6,{message:"Password must be at least 6 characters."})}),_be=ng({email:Lo().email({message:"Invalid email address."})});function wbe(){const{signIn:t,signInWithGoogle:e,resetPassword:n,loading:r}=vr(),i=oh(),[s,o]=g.useState(!1),a=PT(),c=am({resolver:cm(vbe),defaultValues:{email:"",password:""}}),l=am({resolver:cm(_be),defaultValues:{email:""}});async function u(m){try{await t(m.email,m.password),i("/")}catch{}}async function d(){try{await e(),i("/")}catch{}}async function f(m){try{await n(m.email),o(!1),l.reset()}catch{}}return s?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs(co,{className:"w-full max-w-md shadow-elegant animate-scale-in",children:[p.jsx(na,{children:p.jsxs(ra,{className:"text-center text-2xl flex items-center justify-center gap-2",children:[p.jsx(z1,{className:"h-6 w-6 text-primary"}),"Reset Password"]})}),p.jsx(lo,{children:p.jsx(hm,{...l,children:p.jsxs("form",{onSubmit:l.handleSubmit(f),className:"space-y-4",children:[p.jsx(Fo,{control:l.control,name:"email",render:({field:m})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Email Address"}),p.jsx(qs,{children:p.jsx(ls,{placeholder:"m@example.com",...m})}),p.jsx(Gs,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(at,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}):"Send Reset Email"}),p.jsx(at,{type:"button",variant:"ghost",className:"w-full",onClick:()=>o(!1),children:"Back to Sign In"})]})]})})})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(Pd,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Smart Task Management"})]}),p.jsxs(co,{className:"shadow-elegant animate-scale-in",children:[p.jsx(na,{children:p.jsx(ra,{className:"text-center text-xl",children:"Welcome Back"})}),p.jsxs(lo,{children:[p.jsxs(ybe,{defaultValue:"email",className:"w-full",children:[a?p.jsx("div",{className:"mb-6"}):p.jsxs(qW,{className:"grid w-full grid-cols-2 mb-6",children:[p.jsxs(NS,{value:"email",className:"flex items-center gap-2",children:[p.jsx(z1,{className:"h-4 w-4"}),"Email"]}),p.jsxs(NS,{value:"phone",className:"flex items-center gap-2",children:[p.jsx(A4,{className:"h-4 w-4"}),"Phone"]})]}),p.jsx(OS,{value:"email",className:"space-y-4",children:p.jsx(hm,{...c,children:p.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[p.jsx(Fo,{control:c.control,name:"email",render:({field:m})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Email"}),p.jsx(qs,{children:p.jsx(ls,{placeholder:"m@example.com",...m})}),p.jsx(Gs,{})]})}),p.jsx(Fo,{control:c.control,name:"password",render:({field:m})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Password"}),p.jsx(qs,{children:p.jsx(ls,{type:"password",placeholder:"••••••••",...m})}),p.jsx(Gs,{})]})}),p.jsx("div",{className:"flex justify-end",children:p.jsx(at,{type:"button",variant:"link",className:"px-0 text-sm",onClick:()=>o(!0),children:"Forgot password?"})}),p.jsx(at,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}):"Sign In"})]})})}),!a&&p.jsx(OS,{value:"phone",children:p.jsx(fbe,{})})]}),!a&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(at,{variant:"outline",className:"w-full hover-scale",onClick:d,disabled:r,children:[r?p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(b4,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",p.jsx(Ip,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign Up"})]})]})]})]})})}const Tbe=ng({displayName:Lo().min(2,{message:"Name must be at least 2 characters."}),email:Lo().email({message:"Invalid email address."}),password:Lo().min(8,{message:"Password must be at least 8 characters."}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,{message:"Password must contain at least one uppercase letter, one lowercase letter, and one number."}),confirmPassword:Lo()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Ebe(){const{signUp:t,signInWithGoogle:e,loading:n}=vr(),r=oh(),i=PT(),s=am({resolver:cm(Tbe),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""}});async function o(c){try{await t(c.email,c.password,c.displayName),r("/")}catch{}}async function a(){try{await e(),r("/")}catch{}}return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(Pd,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Start your Taskly journey"})]}),p.jsxs(co,{className:"shadow-elegant animate-scale-in",children:[p.jsx(na,{children:p.jsxs(ra,{className:"text-center text-xl flex items-center justify-center gap-2",children:[p.jsx(Pw,{className:"h-5 w-5 text-primary"}),"Create Your Account"]})}),p.jsxs(lo,{children:[p.jsx(hm,{...s,children:p.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[p.jsx(Fo,{control:s.control,name:"displayName",render:({field:c})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Full Name"}),p.jsx(qs,{children:p.jsx(ls,{placeholder:"John Doe",...c})}),p.jsx(Gs,{})]})}),p.jsx(Fo,{control:s.control,name:"email",render:({field:c})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Email"}),p.jsx(qs,{children:p.jsx(ls,{placeholder:"m@example.com",...c})}),p.jsx(Gs,{})]})}),p.jsx(Fo,{control:s.control,name:"password",render:({field:c})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Password"}),p.jsx(qs,{children:p.jsx(ls,{type:"password",placeholder:"••••••••",...c})}),p.jsx(Gs,{})]})}),p.jsx(Fo,{control:s.control,name:"confirmPassword",render:({field:c})=>p.jsxs(Ws,{children:[p.jsx(Ks,{children:"Confirm Password"}),p.jsx(qs,{children:p.jsx(ls,{type:"password",placeholder:"••••••••",...c})}),p.jsx(Gs,{})]})}),p.jsx(at,{type:"submit",className:"w-full",disabled:n,variant:"focus",children:n?p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}):"Create Account"})]})}),!i&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(at,{variant:"outline",className:"w-full hover-scale",onClick:a,disabled:n,children:[n?p.jsx(tc,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(b4,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",p.jsx(Ip,{to:"/signin",className:"text-primary hover:underline font-medium",children:"Sign In"})]}),p.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})]})]})})}const Cbe=({children:t})=>{const{user:e,loading:n}=vr(),r=oh();return g.useEffect(()=>{!n&&!e&&r("/signin")},[e,n,r]),n?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(tc,{className:"h-10 w-10 animate-spin text-primary"})}):e?p.jsx(p.Fragment,{children:t}):null};function bbe(){const{tasks:t}=VT(),{user:e}=vr(),[n,r]=g.useState(new Set);return g.useEffect(()=>{(async()=>{if(!e)return;if(Qt.isNativePlatform()&&(await tn.checkPermissions()).display!=="granted"){console.log("Native notification permission not granted, skipping native assignment check.");return}const s=t.filter(o=>{var u;const a=(u=o.assignedTo)==null?void 0:u.includes(e.uid),c=o.createdAt&&Date.now()-new Date(o.createdAt).getTime()<3e5,l=!n.has(o.id);return a&&c&&l});if(s.length!==0){if(console.log(`Found ${s.length} new task(s) to notify about.`),Qt.isNativePlatform()){const o=s.map(a=>({id:Math.floor(Math.random()*1e6),title:"New Task Assigned",body:`You have been assigned: "${a.title}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{taskId:a.id,type:"task_assignment"}}));try{await tn.schedule({notifications:o}),console.log("Native task assignment notifications scheduled successfully")}catch(a){console.error("Failed to schedule native notifications:",a)}}else for(const o of s)try{"Notification"in window&&Notification.permission==="granted"&&new Notification("New Task Assigned",{body:`You have been assigned: "${o.title}"`,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`task-assignment-${o.id}`,data:{taskId:o.id,type:"task_assignment"},requireInteraction:!0,vibrate:[200,100,200]})}catch(a){console.error("Failed to show web notification:",a)}r(o=>{const a=new Set(o);return s.forEach(c=>a.add(c.id)),a})}})()},[t,e,n]),null}class Ibe{constructor(){Ht(this,"messaging",null);Ht(this,"vapidKey")}async init(){try{if(!("serviceWorker"in navigator)||!("Notification"in window)){console.warn("FCM not supported in this browser");return}this.messaging=dz,await this.requestPermission(),this.setupMessageListener()}catch(e){console.error("Failed to initialize FCM:",e)}}async requestPermission(){try{if(await Notification.requestPermission()==="granted"){const n=await navigator.serviceWorker.ready,r=await sL(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:n});return r?(console.log("FCM token received:",r),r):(console.warn("No FCM token available"),null)}else return console.warn("Notification permission denied"),null}catch(e){throw console.error("Failed to get FCM token:",e),e}}setupMessageListener(){this.messaging&&Zye(this.messaging,e=>{if(console.log("Message received:",e),e.notification){const{title:n,body:r,icon:i}=e.notification;"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(s=>{s.showNotification(n||"New Message",{body:r||"",icon:i||"/icon-192x192.png",badge:"/icon-192x192.png",tag:"fcm-message",requireInteraction:!1,silent:!1})})}})}async getToken(){this.messaging||await this.init();try{const e=await navigator.serviceWorker.ready;return await sL(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}catch(e){return console.error("Failed to get FCM token:",e),null}}}const Sbe=new Ibe,Abe=vh("App",{web:()=>mn(()=>import("./web-D1MVS7Wk.js"),[]).then(t=>new t.AppWeb)}),Xc=class Xc{constructor(){Ht(this,"isInitialized",!1)}static getInstance(){return Xc.instance||(Xc.instance=new Xc),Xc.instance}async init(){if(!Qt.isNativePlatform()){console.log("Not running on native platform, skipping Capacitor notifications");return}try{if((await tn.requestPermissions()).display!=="granted"){console.warn("Notification permissions not granted");return}Qt.getPlatform()==="android"&&(await tn.createChannel({id:"task-reminders",name:"Task Reminders",description:"Notifications for task reminders",importance:4,visibility:1,sound:"beep.wav",vibration:!0,lights:!0,lightColor:"#488AFF"}),await tn.createChannel({id:"pomodoro",name:"Pomodoro Timer",description:"Notifications for pomodoro sessions",importance:4,visibility:1,sound:"ding.wav",vibration:!0,lights:!0,lightColor:"#FF6B6B"})),await tn.addListener("localNotificationActionPerformed",n=>{this.handleNotificationAction(n)}),await tn.addListener("localNotificationReceived",n=>{console.log("Notification received:",n)}),Abe.addListener("appStateChange",({isActive:n})=>{n&&this.handleAppResumed()}),this.isInitialized=!0,console.log("Capacitor notifications initialized")}catch(e){console.error("Failed to initialize Capacitor notifications:",e)}}handleNotificationAction(e){const{actionId:n,notification:r}=e;console.log("Notification action:",n,r),window.dispatchEvent(new CustomEvent("capacitor-notification-action",{detail:{actionId:n,notificationId:r.id,data:r.extra}}))}async handleAppResumed(){try{const e=await tn.getPending();console.log("Pending notifications:",e.notifications.length);const n=await tn.getDeliveredNotifications();console.log("Delivered notifications:",n.notifications.length)}catch(e){console.error("Error checking notifications on resume:",e)}}async scheduleNotification(e){if(!this.isInitialized||!Qt.isNativePlatform()){console.warn("Capacitor notifications not available, falling back to web notifications");return}try{await tn.schedule({notifications:[e]}),console.log("Notification scheduled:",e.id)}catch(n){console.error("Failed to schedule notification:",n)}}async cancelNotification(e){if(!(!this.isInitialized||!Qt.isNativePlatform()))try{await tn.cancel({notifications:[{id:e}]}),console.log("Notification cancelled:",e)}catch(n){console.error("Failed to cancel notification:",n)}}async cancelAllNotifications(){if(!(!this.isInitialized||!Qt.isNativePlatform()))try{const e=await tn.getPending();e.notifications.length>0&&await tn.cancel({notifications:e.notifications.map(n=>({id:n.id}))}),console.log("All notifications cancelled")}catch(e){console.error("Failed to cancel all notifications:",e)}}async getPendingNotifications(){if(!this.isInitialized||!Qt.isNativePlatform())return[];try{return(await tn.getPending()).notifications}catch(e){return console.error("Failed to get pending notifications:",e),[]}}async scheduleTaskReminder(e,n,r,i){const s=this.generateNotificationId(e);await this.scheduleNotification({id:s,title:n,body:r,schedule:{at:i,allowWhileIdle:!0},channelId:"task-reminders",iconColor:"#488AFF",extra:{taskId:e,type:"task-reminder"}})}async schedulePomodoroComplete(e){const n=Date.now();await this.scheduleNotification({id:n,title:`${e==="work"?"Work":"Break"} Session Complete`,body:`Great job! Time for your ${e==="work"?"break":"next work session"}.`,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"pomodoro",iconColor:"#FF6B6B",extra:{type:"pomodoro-complete",sessionType:e}})}async cancelTaskReminder(e){const n=this.generateNotificationId(e);await this.cancelNotification(n)}generateNotificationId(e){let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n)}isNativeNotificationsAvailable(){return this.isInitialized&&Qt.isNativePlatform()}};Ht(Xc,"instance");let MS=Xc;const s2=MS.getInstance(),Zc=class Zc{constructor(){Ht(this,"checkInterval",null)}static getInstance(){return Zc.instance||(Zc.instance=new Zc),Zc.instance}async init(){await ut.init(),this.startScheduleChecker(),await this.checkMissedNotifications()}async scheduleNotification(e){const n={...e,id:crypto.randomUUID(),createdAt:Date.now(),status:"pending"};await this.saveScheduledNotification(n);const r=e.scheduledTime-Date.now();return r<=5*60*1e3&&r>0&&setTimeout(()=>this.deliverNotification(n.id),r),n.id}async cancelNotification(e){const n=await this.getScheduledNotification(e);n&&(n.status="expired",await this.saveScheduledNotification(n))}async saveScheduledNotification(e){const n=await ut.getStore("scheduledNotifications","readwrite");return new Promise((r,i)=>{const s=n.put(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getScheduledNotification(e){const n=await ut.getStore("scheduledNotifications");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result||null),s.onerror=()=>i(s.error)})}async getAllPendingNotifications(){const n=(await ut.getStore("scheduledNotifications")).index("status");return new Promise((r,i)=>{const s=n.getAll("pending");s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}startScheduleChecker(){this.checkInterval=window.setInterval(()=>this.checkDueNotifications(),3e4)}async checkDueNotifications(){if(!this.isDatabaseReady())return;const e=await this.getAllPendingNotifications(),n=Date.now();for(const r of e)r.scheduledTime<=n&&await this.deliverNotification(r.id)}isDatabaseReady(){try{return ut&&typeof ut.getStore=="function"}catch{return!1}}async checkMissedNotifications(){const e=await this.getAllPendingNotifications(),n=Date.now();let r=0;for(const i of e)i.scheduledTime<=n&&(await this.deliverNotification(i.id),r++);r>0&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly - Missed Notifications",{body:`You had ${r} missed notification${r>1?"s":""} while the app was closed.`,icon:"/icon-192x192.png",tag:"missed-notifications"})}async deliverNotification(e){const n=await this.getScheduledNotification(e);if(!n||n.status!=="pending")return;if(Date.now()-n.scheduledTime>60*60*1e3){n.status="expired",await this.saveScheduledNotification(n);return}"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",options:{title:n.title,body:n.body,icon:n.icon||"/icon-192x192.png",badge:n.badge||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent,vibrate:n.vibrate||[200,100,200],actions:n.actions}}):"Notification"in window&&Notification.permission==="granted"&&new Notification(n.title,{body:n.body,icon:n.icon||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent}),n.status="delivered",await this.saveScheduledNotification(n)}async getNotificationHistory(){const e=await ut.getStore("scheduledNotifications");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result.sort((s,o)=>o.createdAt-s.createdAt)),i.onerror=()=>r(i.error)})}async clearExpiredNotifications(){const n=(await this.getNotificationHistory()).filter(i=>i.status==="expired"||i.status==="delivered"),r=await ut.getStore("scheduledNotifications","readwrite");for(const i of n)Date.now()-i.createdAt>7*24*60*60*1e3&&r.delete(i.id)}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}};Ht(Zc,"instance");let DS=Zc;const LS=DS.getInstance(),kbe=Object.freeze(Object.defineProperty({__proto__:null,unifiedNotifications:LS},Symbol.toStringTag,{value:"Module"})),Cu={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class Rbe{constructor(){Ht(this,"enabled");Ht(this,"webhookUrl");this.enabled=typeof import.meta<"u"&&(Cu==null?void 0:Cu.VITE_ALEXA_ENABLED)==="true",this.webhookUrl=typeof import.meta<"u"&&(Cu==null?void 0:Cu.VITE_ALEXA_WEBHOOK)||null}isEnabled(){return!!this.enabled&&!!this.webhookUrl}async init(){}async send(e){if(!this.isEnabled()){this.speakFallback(e);return}try{await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){console.warn("Alexa webhook failed, using speech fallback:",n),this.speakFallback(e)}}async schedule(e){if(!e.scheduledTime||e.scheduledTime<=Date.now())return this.send(e);if(this.isEnabled())try{await fetch(this.webhookUrl+"/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return}catch(r){console.warn("Alexa schedule webhook failed, falling back to local timeout:",r)}const n=e.scheduledTime-Date.now();setTimeout(()=>this.speakFallback(e),Math.max(0,n))}speakFallback(e){var n;try{const r=`${e.title}. ${e.body}`,i=new SpeechSynthesisUtterance(r);i.lang="en-US",(n=window.speechSynthesis)==null||n.speak(i)}catch{}}}const Hy=new Rbe,HC=Object.freeze(Object.defineProperty({__proto__:null,alexaNotifications:Hy},Symbol.toStringTag,{value:"Module"})),el=class el{constructor(){Ht(this,"initialized",!1)}static getInstance(){return el.instance||(el.instance=new el),el.instance}async init(){if(!this.initialized)try{Qt.isNativePlatform()?(await s2.init(),console.log("Capacitor notifications initialized for native platform")):(await Promise.all([Sbe.init(),LS.init(),Hy.init()]),console.log("Web notifications initialized for PWA")),this.initialized=!0,console.log("Unified notification service initialized for platform:",Qt.getPlatform())}catch(e){console.error("Failed to initialize unified notification service:",e)}}async sendNotification(e){this.initialized||await this.init();try{Qt.isNativePlatform()?(await this.sendCapacitorNotification(e),console.log("Sent native notification:",e.title)):(await this.sendWebNotification(e),console.log("Sent web notification:",e.title)),Hy.send({title:e.title,body:e.body,type:e.type,userId:e.userId,data:e.data}),!Qt.isNativePlatform()&&(e.type==="chat"||e.type==="task")&&await this.sendBackgroundNotification(e)}catch(n){console.error("Failed to send notification:",n)}}async scheduleNotification(e,n){const r=await LS.scheduleNotification({...e,scheduledTime:n});return Hy.schedule({title:e.title,body:e.body,type:e.type==="task"?"reminder":e.type,userId:e.userId,data:e.data,scheduledTime:n}),r}async sendCapacitorNotification(e){try{await s2.scheduleNotification({id:Date.now(),title:e.title,body:e.body,sound:"default",channelId:"app_main_channel",extra:{...e.data,type:e.type},schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0}})}catch(n){throw console.error("Failed to send Capacitor notification:",n),n}}async sendWebNotification(e){try{if("Notification"in window){if(Notification.permission==="default"&&await Notification.requestPermission()!=="granted"){console.warn("Web notification permission denied");return}Notification.permission==="granted"&&new Notification(e.title,{body:e.body,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`${e.type}-${Date.now()}`,data:{...e.data,type:e.type},requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,vibrate:[200,100,200]})}}catch(n){throw console.error("Failed to send web notification:",n),n}}async sendBackgroundNotification(e){e.scheduledTime&&await this.scheduleNotification(e,e.scheduledTime)}async sendChatNotification(e,n,r,i){return this.sendNotification({title:`New message from ${n}`,body:r.length>100?`${r.substring(0,100)}...`:r,type:"chat",data:{senderId:e,chatId:i,messagePreview:r.substring(0,50)},requireInteraction:!1})}async sendTaskAssignmentNotification(e,n,r){return this.sendNotification({title:"New Task Assignment",body:`${n} assigned you "${e}"`,type:"assignment",data:{taskId:r,assignerName:n,taskTitle:e},requireInteraction:!0})}async sendCommentNotification(e,n,r,i){return this.sendNotification({title:`New comment on "${e}"`,body:`${n}: ${r.length>80?`${r.substring(0,80)}...`:r}`,type:"comment",data:{taskId:i,commenterName:n,commentPreview:r.substring(0,50)}})}async sendPomodoroNotification(e,n){const r=e==="work_complete";return this.sendNotification({title:r?"Work Session Complete!":"Break Time Over!",body:r?`Great focus! Time for a break. Session ${n||1} completed.`:"Ready to get back to work? Your break is over.",type:"pomodoro",data:{pomodoroType:e,sessionCount:n},requireInteraction:!0})}};Ht(el,"instance");let FS=el;const W_=FS.getInstance();function US(t){const e=t??Date.now();return Math.floor(e%2e9)}function xbe(){const{user:t}=vr(),e=g.useRef(new Map),n=g.useRef(new Map),r=g.useRef(null);g.useEffect(()=>{if(!t){i(),e.current.clear();return}W_.init();const s=Gr(Oe,"chatRooms"),o=FD(s,sd("participants","array-contains",t.uid));return r.current=oc(o,a=>{const c=new Set;a.forEach(l=>{c.add(l.id)}),n.current.forEach((l,u)=>{c.has(u)||(l(),n.current.delete(u),e.current.delete(u))}),c.forEach(l=>{if(!n.current.has(l)){const u=FD(Pu(Nu,`chats/${l}/messages`),wpe("timestamp"),vpe(10)),d=gpe(u,f=>{const m=f.val(),_=f.key;if(!_||!m)return;const y={id:_,...m};if(y.senderId===t.uid){e.current.set(l,y.timestamp);return}const T=e.current.get(l)||0;if(y.timestamp<=T)return;e.current.set(l,y.timestamp);const E=`New message from ${y.senderName}`,w=y.content.length>100?`${y.content.substring(0,100)}...`:y.content,C=US(y.timestamp);Qt.isNativePlatform()?mn(async()=>{const{LocalNotifications:S}=await Promise.resolve().then(()=>Ure);return{LocalNotifications:S}},void 0).then(({LocalNotifications:S})=>{S.schedule({notifications:[{id:C,title:E,body:w,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"chat_message",senderId:y.senderId,chatRoomId:l}}]}).catch(M=>{console.error("Failed to schedule native chat notification:",M)})}):"Notification"in window&&Notification.permission==="granted"&&new Notification(E,{body:w,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`chat-message-${y.id}`,data:{type:"chat_message",senderId:y.senderId,chatRoomId:l},requireInteraction:!1,vibrate:[100,50,100]})});n.current.set(l,()=>y6(u,"child_added",d))}})}),()=>{i()}},[t]);const i=()=>{r.current&&(r.current(),r.current=null),n.current.forEach(s=>s()),n.current.clear()};return null}function Pbe(){const{user:t}=vr(),[e,n]=g.useState(new Set),[r,i]=g.useState([]);return g.useEffect(()=>{(async()=>{if(!Qt.isNativePlatform()||!t)return;if((await tn.checkPermissions()).display!=="granted"){console.log("Notification permission not granted, skipping team invite check.");return}const a=r.filter(l=>{const u=l.inviteeId===t.uid,d=l.status==="pending",f=l.createdAt&&Date.now()-new Date(l.createdAt).getTime()<3e5,m=!e.has(l.id);return u&&d&&f&&m});if(a.length===0)return;console.log(`Found ${a.length} new team invite(s) to notify about.`);const c=a.map(l=>({id:Math.floor(Math.random()*1e6),title:"New Team Invitation",body:`${l.inviterName} invited you to join "${l.teamName}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"team_invite",inviteId:l.id,teamName:l.teamName,inviterId:l.inviterId}}));try{await tn.schedule({notifications:c}),n(l=>{const u=new Set(l);return a.forEach(d=>u.add(d.id)),u})}catch(l){console.error("Failed to schedule team invite notifications:",l)}})()},[r,t,e]),g.useEffect(()=>{},[t]),null}const GW=g.createContext(null);function Nbe({children:t}){const{user:e}=vr(),n=VT(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),[l,u]=g.useState({}),d=async(T,E,w)=>{if(!e||!E.trim())return;const C=new Date().toISOString();try{const S=Gr(Oe,"taskComments",T,"comments");await $m(S,{taskId:T,userId:e.uid,userDisplayName:e.displayName||e.email,userPhotoURL:e.photoURL,content:E.trim(),createdAt:C,isEdited:!1}),await n.updateTaskLastCommentedAt(T,C),w&&await W_.sendCommentNotification(w,e.displayName||e.email||"Anonymous",E.trim(),T),yu.success("Comment added successfully")}catch(S){console.error("Error adding comment:",S),yu.error("Failed to add comment")}},f=async(T,E,w)=>{if(!(!e||!w.trim()))try{const C=tt(Oe,"taskComments",E,"comments",T);await Di(C,{content:w.trim(),updatedAt:new Date().toISOString(),isEdited:!0}),await n.updateTaskLastCommentedAt(E,new Date().toISOString()),yu.success("Comment updated successfully")}catch(C){console.error("Error updating comment:",C),yu.error("Failed to update comment")}},m=async(T,E)=>{if(e)try{const w=tt(Oe,"taskComments",E,"comments",T);await wc(w),await n.updateTaskLastCommentedAt(E,new Date().toISOString()),yu.success("Comment deleted successfully")}catch(w){console.error("Error deleting comment:",w),yu.error("Failed to delete comment")}},_=T=>{if(!T||l[T])return null;c(S=>({...S,[T]:!0}));const E=Gr(Oe,"taskComments",T,"comments"),w=Fl(E,Gp("createdAt","desc"),Sce(50)),C=oc(w,S=>{const M=S.docs.map(D=>({id:D.id,...D.data()}));i(D=>({...D,[T]:M})),o(D=>({...D,[T]:M.length})),c(D=>({...D,[T]:!1})),S.docChanges().forEach(D=>{if(D.type==="added"||D.type==="modified"){const A=D.doc.data();A.userId!==(e==null?void 0:e.uid)&&n.updateTaskLastCommentedAt(T,A.createdAt)}})},S=>{console.error("Error fetching comments:",S),c(M=>({...M,[T]:!1}))});return u(S=>({...S,[T]:C})),C},y=T=>{l[T]&&(l[T](),u(E=>{const w={...E};return delete w[T],w}))};return p.jsx(GW.Provider,{value:{comments:r,commentCounts:s,loading:a,addComment:d,updateComment:f,deleteComment:m,subscribeToTaskComments:_,unsubscribeFromTaskComments:y},children:t})}function RIe(){const t=g.useContext(GW);if(!t)throw new Error("useComments must be used within a CommentsContextProvider");return t}const QW=g.createContext(void 0);function Obe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),[s,o]=g.useState(!1),[a,c]=g.useState(0),[l,u]=g.useState(null),[d,f]=g.useState(0),[m,_]=g.useState(null),{user:y}=vr(),{toast:T}=Xl();g.useEffect(()=>{if(!y){n([]);return}i(!0);const A=Fl(Gr(Oe,"meetingRecordings"),sd("createdBy","==",y.uid),Gp("createdAt","desc")),I=oc(A,k=>{const x=[];k.forEach(N=>{x.push({id:N.id,...N.data()})}),n(x),i(!1)},k=>{console.error("Error fetching recordings:",k),T({title:"Connection error",description:"Failed to load recordings. Please try again.",variant:"destructive"}),i(!1)});return()=>I()},[y,T]),g.useEffect(()=>{let A;return s&&(A=setInterval(()=>{c(Math.floor((Date.now()-d)/1e3))},1e3)),()=>{A&&clearInterval(A)}},[s,d]);const E=async()=>{if(!y){T({title:"Authentication required",description:"Please sign in to start recording.",variant:"destructive"});return}m&&_(null);try{const A=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),I=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",k=new MediaRecorder(A,{mimeType:I}),x=[];k.ondataavailable=N=>{N.data.size>0&&x.push(N.data)},k.onstop=()=>{const N=new Blob(x,{type:I});_(N),A.getTracks().forEach(P=>P.stop())},k.start(1e3),u(k),o(!0),f(Date.now()),c(0),T({title:"Recording started 🎙️",description:"Your meeting is being recorded."})}catch(A){console.error("Error starting recording:",A),T({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},w=async()=>{!l||!s||(l.stop(),o(!1),u(null),T({title:"Recording stopped ⏹️",description:"Ready to save your recording"}))},C=g.useCallback(()=>{_(null)},[]),D={recordings:e,loading:r,isRecording:s,recordingDuration:a,recordedAudio:m,startRecording:E,stopRecording:w,deleteRecording:async A=>{if(y)try{const I=e.find(k=>k.id===A);if(!I)return;await wc(tt(Oe,"meetingRecordings",A));try{const k=HD(lL,I.audioUrl);await Bme(k)}catch(k){k.code!=="storage/object-not-found"&&console.warn("Could not delete audio file from storage:",k)}T({title:"Recording deleted",description:"The recording has been permanently removed.",variant:"destructive"})}catch(I){console.error("Error deleting recording:",I),T({title:"Delete failed",description:"Could not delete recording. Please try again.",variant:"destructive"})}},uploadRecording:async(A,I,k)=>{if(!y)return;const x=new Date().toISOString(),N=await $m(Gr(Oe,"meetingRecordings"),{title:I,audioUrl:"",duration:k,status:"uploading",createdAt:x,createdBy:y.uid,fileSize:A.size}),P=N.id;try{const R=`meetly-audio/${y.uid}/${x}-${I.replace(/[^a-zA-Z0-9]/g,"_")}.webm`,B=HD(lL,R),fe=await Vme(B,A,{customMetadata:{firestoreId:P}}),ye=await $me(fe.ref);await Di(N,{audioUrl:ye,status:"processing"}),C(),T({title:"Recording uploaded! 📤",description:"Your recording is being processed for transcription."})}catch(R){console.error("Error uploading recording:",R),await wc(tt(Oe,"meetingRecordings",P)),T({title:"Upload failed",description:"Could not upload recording. Please try again.",variant:"destructive"})}},clearRecordedAudio:C};return p.jsx(QW.Provider,{value:D,children:t})}function xIe(){const t=g.useContext(QW);if(t===void 0)throw new Error("useMeetly must be used within a MeetlyContextProvider");return t}const o2=async()=>{Qt.getPlatform()==="android"&&(await tn.createChannel({id:"app_main_channel",name:"Primary Notifications",description:"General app notifications and reminders",importance:4,vibration:!0,visibility:1}),console.log('Android notification channel "app_main_channel" created or already exists.'))},Mbe=g.lazy(()=>mn(()=>import("./TasksPage-DcE1ETlq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),Dbe=g.lazy(()=>mn(()=>import("./DashboardPage-BUts6N_A.js"),__vite__mapDeps([11,9,8,12,13,4,5,1,2,3,6,7,10,14,15]))),Lbe=g.lazy(()=>mn(()=>import("./TeamChatPage-B8d2qdyy.js"),__vite__mapDeps([16,2,10,17]))),Fbe=g.lazy(()=>mn(()=>import("./MeetlyPage-BRo23c_L.js"),__vite__mapDeps([18,19,20,6,21,13,4,7,8,17,10,22,23]))),Ube=g.lazy(()=>mn(()=>import("./TimerPage-DgCg9ZwO.js"),__vite__mapDeps([24,14]))),jbe=g.lazy(()=>mn(()=>import("./CalendarPage-B4UHdqud.js"),__vite__mapDeps([25,12,13,4,5,3,9,8,10,22,19,23,26]))),Vbe=g.lazy(()=>mn(()=>import("./NotesPage-DgQIXlZe.js"),__vite__mapDeps([27,3,21,10,26]))),$be=g.lazy(()=>mn(()=>import("./AnalyticsPage-dG0AkzB8.js"),__vite__mapDeps([28,6,14,15,23]))),Bbe=g.lazy(()=>mn(()=>import("./ChatPage-CUr6ATJs.js"),__vite__mapDeps([29,12,13,4,5,19,20]))),Hbe=g.lazy(()=>mn(()=>import("./ProfilePage-DcLcnzaK.js"),[])),zbe=g.lazy(()=>mn(()=>import("./NotFound-DnBLzKYM.js"),[])),Wbe=new Are({defaultOptions:{queries:{retry:3,staleTime:5*60*1e3}}});function Kbe(){const{addNotification:t}=_x();return g.useEffect(()=>(CL(t),()=>CL(null)),[t]),null}const qbe=async(t,e)=>{if(!t||!e){console.error("updateUserFCMToken failed: userId or token is missing.");return}try{console.log(`Attempting to save FCM token for user ${t}...`);const n=tt(Oe,"users",t);await Di(n,{fcmToken:e,lastUpdated:zI()}),console.log("SUCCESSFULLY saved FCM token to Firestore.")}catch(n){console.error("CRITICAL ERROR saving FCM token to Firestore:",n)}};function Gbe(){const{user:t}=vr(),e=oh(),[n,r]=g.useState(null);g.useEffect(()=>{t&&n&&(console.log("User and FCM token are both available. Saving to Firestore."),qbe(t.uid,n.value))},[t,n]),g.useEffect(()=>{(async()=>{Qt.isNativePlatform()?await i():await s()})()},[e]);const i=async()=>{try{o2();const o=[];return await Ri.requestPermissions(),await Ri.register(),o.push(await Ri.addListener("registration",a=>{console.log("Push registration success. Received token."),r(a)})),o.push(await Ri.addListener("registrationError",a=>{console.error("Push registration FAILED:",a)})),o.push(await Ri.addListener("pushNotificationReceived",a=>{var u,d,f,m,_,y;console.log("SILENT/DATA-ONLY Push received:",a),((u=a.data)==null?void 0:u.type)==="chat_message"&&console.log("Chat message push data:",a.data);let c=((d=a.data)==null?void 0:d.title)||"New Notification",l=((f=a.data)==null?void 0:f.body)||"Check the app for details.";if(((m=a.data)==null?void 0:m.type)==="chat_message"){const T=((_=a.data)==null?void 0:_.senderName)||"Someone",E=((y=a.data)==null?void 0:y.message)||"New chat message.";c=`New message from ${T}`,l=E,console.log(`Constructed local notification: Title='${c}', Body='${l}'`)}tn.schedule({notifications:[{id:US(),title:c,body:l,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:a.data}]})})),o.push(await Ri.addListener("pushNotificationActionPerformed",a=>{var l;console.log("Push notification action performed:",a);const c=(l=a.notification.data)==null?void 0:l.taskId;c&&e(`/tasks?taskId=${c}`)})),o.push(await tn.addListener("localNotificationActionPerformed",a=>{console.log("Local notification action performed:",a);const c=a.notification.extra;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"?e("/team-chat"):(c==null?void 0:c.type)==="team_invite"&&e("/dashboard")})),()=>{console.log("Removing all push notification listeners..."),o.forEach(a=>{try{a.remove()}catch(c){console.warn("Failed to remove listener handle:",c)}})}}catch(o){console.error("Failed to setup native notifications:",o)}},s=async()=>{try{if(await W_.init(),"Notification"in window&&Notification.permission==="default"){const o=await Notification.requestPermission();console.log("Web notification permission:",o)}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o=>{if(o.data.type==="NOTIFICATION_ACTION"){const{action:a,notificationData:c}=o.data;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"&&e("/team-chat")}})}catch(o){console.error("Failed to setup web notifications:",o)}};return g.useEffect(()=>{if(!Qt.isNativePlatform())return;o2();const o=[];return(async()=>{try{await Ri.requestPermissions(),await Ri.register(),o.push(await Ri.addListener("registration",c=>{console.log("Push registration success. Received token."),r(c)})),o.push(await Ri.addListener("registrationError",c=>{console.error("Push registration FAILED:",c)})),o.push(await Ri.addListener("pushNotificationReceived",c=>{var d,f;console.log("SILENT/DATA-ONLY Push received:",c);const l=((d=c.data)==null?void 0:d.title)||"New Notification",u=((f=c.data)==null?void 0:f.body)||"Check the app for details.";tn.schedule({notifications:[{id:US(),title:l,body:u,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:c.data}]})})),o.push(await Ri.addListener("pushNotificationActionPerformed",c=>{var u;console.log("Push notification action performed:",c);const l=(u=c.notification.data)==null?void 0:u.taskId;l&&e(`/tasks?taskId=${l}`)})),o.push(await tn.addListener("localNotificationActionPerformed",c=>{console.log("Local notification action performed:",c);const l=c.notification.extra;l!=null&&l.taskId?e("/tasks"):(l==null?void 0:l.type)==="chat_message"?e("/chat"):(l==null?void 0:l.type)==="team_invite"&&e("/dashboard")}))}catch(c){console.error("Failed to setup push notifications:",c)}})(),W_.init(),()=>{console.log("Removing all push notification listeners..."),o.forEach(c=>{try{c.remove()}catch(l){console.warn("Failed to remove listener handle:",l)}})}},[e]),p.jsxs(p.Fragment,{children:[p.jsx(Kbe,{}),p.jsx(bbe,{}),p.jsx(xbe,{}),p.jsx(Pbe,{}),p.jsxs(qN,{children:[p.jsx(wr,{path:"/signin",element:p.jsx(wbe,{})}),p.jsx(wr,{path:"/signup",element:p.jsx(Ebe,{})}),p.jsx(wr,{path:"/*",element:p.jsx(Cbe,{children:p.jsx(sW,{children:p.jsx(YEe,{children:p.jsx(g.Suspense,{fallback:p.jsx(XEe,{}),children:p.jsxs(qN,{children:[p.jsx(wr,{path:"/",element:p.jsx(Dbe,{})}),p.jsx(wr,{path:"/tasks",element:p.jsx(Mbe,{})}),p.jsx(wr,{path:"/team-chat",element:p.jsx(Lbe,{})}),p.jsx(wr,{path:"/meetly",element:p.jsx(Fbe,{})}),p.jsx(wr,{path:"/timer",element:p.jsx(Ube,{})}),p.jsx(wr,{path:"/calendar",element:p.jsx(jbe,{})}),p.jsx(wr,{path:"/notes",element:p.jsx(Vbe,{})}),p.jsx(wr,{path:"/analytics",element:p.jsx($be,{})}),p.jsx(wr,{path:"/chat",element:p.jsx(Bbe,{})}),p.jsx(wr,{path:"/profile",element:p.jsx(Hbe,{})}),p.jsx(wr,{path:"*",element:p.jsx(zbe,{})})]})})})})})})]})]})}function Qbe(){return g.useEffect(()=>{VJ()},[]),p.jsx(sW,{children:p.jsx(Rre,{client:Wbe,children:p.jsx(Vee,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:p.jsxs(u0,{children:[p.jsx(Fee,{}),p.jsx(vte,{}),p.jsx(twe,{children:p.jsx(rwe,{children:p.jsx(iwe,{children:p.jsx(t5,{children:p.jsx(Nbe,{children:p.jsx(FEe,{children:p.jsx(Obe,{children:p.jsx(H8,{children:p.jsx(Gbe,{})})})})})})})})})]})})})})}const Ybe=Qt.isNativePlatform();RU(document.getElementById("root")).render(p.jsx(Qbe,{}));const Jbe=t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available, please refresh."),confirm("A new version of the app is available. Reload?")&&e.postMessage({type:"SKIP_WAITING"}))})}},Xbe=async()=>{Ybe?console.log("Running in native Capacitor environment"):"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t),Jbe(t),navigator.serviceWorker.oncontrollerchange=()=>{console.log("Controller changed. Reloading page for new content."),window.location.reload()};const[e,n,r]=await Promise.all([mn(()=>Promise.resolve().then(()=>$Ee),void 0),mn(()=>import("./notificationScheduler-BmjTsIkj.js"),[]),mn(()=>Promise.resolve().then(()=>kbe),void 0)]);await e.offlineSync.init(),navigator.serviceWorker.addEventListener("message",i=>{i.data.type==="NOTIFICATION_ACTION"&&window.dispatchEvent(new CustomEvent("notification-action",{detail:{action:i.data.action,data:i.data.notificationData}}))})}catch(t){console.log("SW registration failed: ",t)}}),["click","keydown","scroll","touchstart"].forEach(t=>{document.addEventListener(t,()=>{},{passive:!0})}))};Xbe();export{bve as $,aI as A,at as B,FT as C,BEe as D,f5 as E,p5 as F,m5 as G,_i as H,ls as I,W1 as J,k9 as K,R9 as L,E4 as M,Rx as N,LT as O,$z as P,Ii as Q,Q as R,Pd as S,R_e as T,R4 as U,_Ie as V,It as W,tu as X,wIe as Y,Ce as Z,QJ as _,Bz as a,c0 as a$,RIe as a0,zTe as a1,WTe as a2,g9 as a3,$y as a4,qZ as a5,tc as a6,Fx as a7,UEe as a8,nZ as a9,dZ as aA,aZ as aB,ybe as aC,qW as aD,NS as aE,OS as aF,nr as aG,One as aH,eu as aI,Y1 as aJ,UZ as aK,DZ as aL,Q1 as aM,z1 as aN,AIe as aO,k4 as aP,Bk as aQ,yh as aR,Dw as aS,Ti as aT,wm as aU,mx as aV,px as aW,MT as aX,NT as aY,hh as aZ,a0 as a_,cI as aa,lI as ab,jo as ac,je as ad,kw as ae,C4 as af,PW as ag,swe as ah,Xl as ai,cu as aj,y6 as ak,FD as al,vpe as am,wpe as an,Pu as ao,LD as ap,HX as aq,wZ as ar,Nu as as,mIe as at,gIe as au,Ns as av,GX as aw,xIe as ax,S4 as ay,$Z as az,nW as b,gX as b0,pn as b1,$T as b2,o0 as b3,bm as b4,Nl as b5,uEe as b6,HS as b7,rIe as b8,WZ as b9,p0 as bA,Qt as bB,ko as bC,KH as bD,Ps as bE,Eue as bF,xT as bG,mn as bH,uIe as bI,Fl as ba,Gp as bb,sd as bc,Gr as bd,oc as be,Oe as bf,$m as bg,HD as bh,lL as bi,Vme as bj,$me as bk,Di as bl,wc as bm,tt as bn,Bme as bo,eIe as bp,m2 as bq,zEe as br,yIe as bs,vIe as bt,JX as bu,Mx as bv,V4 as bw,HZ as bx,IZ as by,xc as bz,rW as c,iW as d,te as e,K9 as f,vr as g,Z9 as h,ut as i,p as j,PT as k,qk as l,H9 as m,tW as n,We as o,UT as p,jT as q,g as r,Vz as s,co as t,VT as u,na as v,ra as w,lo as x,oh as y,eZ as z};
