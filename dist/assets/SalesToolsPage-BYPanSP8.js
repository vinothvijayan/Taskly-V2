import{c as C,am as H,j as e,an as z,T as K,a as O,b as v,d as T,r as c,e as L,f as M,g as S,h as P,n as y,I as f,m as _,L as W,$ as V,S as J,ao as Q,ap as U,aq as h}from"./index-BOMCLsi_.js";import{T as X,a as Y,b as E,c as x,d as Z,e as u,u as b,w as ee}from"./xlsx-D4hK8F-4.js";import{D as se}from"./download-C7V0izbZ.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],te=C("building",ae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],le=C("info",re),oe=H(U,"extract_google_business_data"),ne=()=>{const[i,A]=c.useState(""),[m,B]=c.useState(""),[w,F]=c.useState(""),[n,N]=c.useState([]),[d,k]=c.useState(!1),p=async(s,t)=>{var r;try{return(await oe({endpoint:s,body:t})).data}catch(l){console.error(`Error calling proxy for ${s}:`,l);const o=((r=l.details)==null?void 0:r.message)||l.message||"An unknown error occurred.";throw new Error(o)}},R=async s=>{const t=await p("/api/geocode",{locationName:s});if(t.results&&t.results.length>0){const r=t.results[0].geometry.location;return`${r.lat},${r.lng}`}return null},$=async(s,t,r,l)=>{let o=[],a=null;do{const g={location:s,radius:t,type:r};l&&(g.keyword=l),a&&(g.pagetoken=a);const j=await p("/api/nearbysearch",g);j.results&&o.push(...j.results),a=j.next_page_token||null,a&&await new Promise(G=>setTimeout(G,2e3))}while(a);return o},I=async s=>(await p("/api/placedetails",{placeId:s})).result||{},q=async()=>{if(!i||!m){h.error("Location and Place Type are required.");return}k(!0),N([]);try{const s=await R(i);if(!s)throw new Error(`Could not find coordinates for location: ${i}`);const t=await $(s,1e4,m,w),r=Array.from(new Map(t.map(a=>[a.place_id,a])).values()),o=(await Promise.all(r.map(a=>I(a.place_id)))).map(a=>({name:a.name||"N/A",address:a.vicinity||"N/A",phone:a.formatted_phone_number||"N/A",website:a.website||"N/A",google_url:a.url||"N/A"}));N(o),h.success(`Found ${o.length} businesses!`)}catch(s){console.error("Error fetching business data:",s),h.error("Failed to fetch data",{description:s.message})}finally{k(!1)}},D=()=>{if(n.length===0){h.info("No data to export.");return}const s=b.json_to_sheet(n),t=b.book_new();b.book_append_sheet(t,s,"Businesses"),ee(t,"google_business_export.xlsx")};return e.jsxs(L,{children:[e.jsx(M,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"})," Google Business Extractor"]})}),e.jsxs(P,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"location",children:"Location *"}),e.jsx(f,{id:"location",placeholder:"e.g., Chennai",value:i,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"placeType",children:"Place Type *"}),e.jsx(f,{id:"placeType",placeholder:"e.g., restaurant",value:m,onChange:s=>B(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keyword",children:"Keyword (Optional)"}),e.jsx(f,{id:"keyword",placeholder:"e.g., biryani",value:w,onChange:s=>F(s.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{onClick:q,disabled:d,children:[d?e.jsx(W,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(V,{className:"mr-2 h-4 w-4"}),d?"Searching...":"Search"]}),e.jsxs(_,{variant:"outline",onClick:D,disabled:n.length===0,children:[e.jsx(se,{className:"mr-2 h-4 w-4"})," Export to Excel"]})]}),e.jsxs(J,{className:"h-96 border rounded-md",children:[e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(E,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Phone"}),e.jsx(x,{children:"Address"}),e.jsx(x,{children:"Website"})]})}),e.jsx(Z,{children:n.map((s,t)=>e.jsxs(E,{children:[e.jsx(u,{className:"font-medium",children:s.name}),e.jsx(u,{children:s.phone}),e.jsx(u,{children:s.address}),e.jsx(u,{children:e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:s.website})})]},t))})]}),n.length===0&&!d&&e.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No results to display."})]})]})]})},ce=()=>e.jsxs(L,{children:[e.jsx(M,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"})," Email Extractor"]})}),e.jsx(P,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 border-2 border-dashed rounded-lg bg-muted/30",children:[e.jsx(le,{className:"h-10 w-10 text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold",children:"Technical Limitation"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md mt-2",children:"The Email Extractor tool cannot be run directly in the browser due to web security policies (CORS). This feature requires a server-side component to scrape websites for email addresses."})]})})]}),xe=()=>e.jsxs("div",{className:"container max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"space-y-2 mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(z,{className:"h-8 w-8 text-primary"}),"Sales Tools"]}),e.jsx("p",{className:"text-muted-foreground",children:"Powerful tools to extract business leads and contact information."})]}),e.jsxs(K,{defaultValue:"google-business",className:"w-full",children:[e.jsxs(O,{className:"grid w-full grid-cols-2",children:[e.jsx(v,{value:"google-business",children:"Google Business Extractor"}),e.jsx(v,{value:"email-extractor",children:"Email Extractor"})]}),e.jsx(T,{value:"google-business",className:"mt-6",children:e.jsx(ne,{})}),e.jsx(T,{value:"email-extractor",className:"mt-6",children:e.jsx(ce,{})})]})]});export{xe as default};
