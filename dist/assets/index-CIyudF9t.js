const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-B3yy9fxm.js","assets/index-uUgH0t7m.js","assets/SalesTrackerPage-DeN-CvMf.js","assets/xlsx-DJeG-6lL.js","assets/format-CrtYonqb.js","assets/en-US-PHonLEz-.js","assets/trending-up-CNy9roDy.js","assets/textarea-D92HBPlJ.js","assets/index-FV4twmxk.js","assets/alert-dialog-X9brdY__.js","assets/save-C8XAIkYW.js","assets/calendar-HIZ4iU5R.js","assets/startOfMonth-DUJ2JjBB.js","assets/subDays-gmpfwhzv.js","assets/chevron-left-D9T-5X23.js","assets/separator-BKX0jZPM.js","assets/download-oltLK3aY.js","assets/skeletons-_JGSiiy5.js","assets/resizable-CGjVgm2S.js","assets/upload-C2OkWRCf.js","assets/SalesOpportunityPage-CsePxtTG.js","assets/select-cJBpq2ym.js","assets/DeleteConfirmationDialog-1nFiE2UZ.js","assets/award-CfTIYRrs.js","assets/formatDistanceToNow-Bu9e27Lo.js","assets/SalesToolsPage-BM2r7C7o.js","assets/TasksPage-DrgM9B_e.js","assets/scoring-kuiBAh_1.js","assets/useTouchGestures-Ch9nyX4t.js","assets/DashboardPage-Bh30giWc.js","assets/ContributionGraph-DQDUp26k.js","assets/user-plus-DpZnq-4A.js","assets/target-BfefOx1Y.js","assets/TeamChatPage-17T-zk3Y.js","assets/smile-CA1EGhCs.js","assets/copy-Bj6ngxQ0.js","assets/MeetlyPage-DN5DUI0G.js","assets/sparkles-CvOnNNx3.js","assets/TimerPage-DJMa2-l1.js","assets/CalendarPage-CYmE7YMJ.js","assets/external-link-l9YrXZ0C.js","assets/NotesPage-BZkhNR7A.js","assets/purify.es-aGzT-_H7.js","assets/AnalyticsPage-Cy2MTKj6.js","assets/ChatPage-D4WSzakF.js","assets/ProfilePage-EI2es03B.js"])))=>i.map(i=>d[i]);
var WY=Object.defineProperty;var JO=t=>{throw TypeError(t)};var KY=(t,e,n)=>e in t?WY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var It=(t,e,n)=>KY(t,typeof e!="symbol"?e+"":e,n),XE=(t,e,n)=>e.has(t)||JO("Cannot "+n);var ee=(t,e,n)=>(XE(t,e,"read from private field"),n?n.call(t):e.get(t)),mt=(t,e,n)=>e.has(t)?JO("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ye=(t,e,n,r)=>(XE(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),yr=(t,e,n)=>(XE(t,e,"access private method"),n);var Py=(t,e,n,r)=>({set _(i){Ye(t,e,i,n)},get _(){return ee(t,e,r)}});function qY(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const GY="modulepreload",QY=function(t){return"/"+t},ZO={},Ft=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=QY(c),c in ZO)return;ZO[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":GY,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var $Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KU={exports:{}},vT={},qU={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=Symbol.for("react.element"),YY=Symbol.for("react.portal"),XY=Symbol.for("react.fragment"),JY=Symbol.for("react.strict_mode"),ZY=Symbol.for("react.profiler"),eX=Symbol.for("react.provider"),tX=Symbol.for("react.context"),nX=Symbol.for("react.forward_ref"),rX=Symbol.for("react.suspense"),iX=Symbol.for("react.memo"),sX=Symbol.for("react.lazy"),eM=Symbol.iterator;function oX(t){return t===null||typeof t!="object"?null:(t=eM&&t[eM]||t["@@iterator"],typeof t=="function"?t:null)}var GU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QU=Object.assign,YU={};function Zh(t,e,n){this.props=t,this.context=e,this.refs=YU,this.updater=n||GU}Zh.prototype.isReactComponent={};Zh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XU(){}XU.prototype=Zh.prototype;function mk(t,e,n){this.props=t,this.context=e,this.refs=YU,this.updater=n||GU}var gk=mk.prototype=new XU;gk.constructor=mk;QU(gk,Zh.prototype);gk.isPureReactComponent=!0;var tM=Array.isArray,JU=Object.prototype.hasOwnProperty,yk={current:null},ZU={key:!0,ref:!0,__self:!0,__source:!0};function e4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)JU.call(e,r)&&!ZU.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xg,type:t,key:s,ref:o,props:i,_owner:yk.current}}function aX(t,e){return{$$typeof:xg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vk(t){return typeof t=="object"&&t!==null&&t.$$typeof===xg}function cX(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nM=/\/+/g;function JE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cX(""+t.key):e.toString(36)}function Iv(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xg:case YY:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+JE(o,0):r,tM(i)?(n="",t!=null&&(n=t.replace(nM,"$&/")+"/"),Iv(i,e,n,"",function(l){return l})):i!=null&&(vk(i)&&(i=aX(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nM,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",tM(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+JE(s,a);o+=Iv(s,e,n,c,i)}else if(c=oX(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+JE(s,a++),o+=Iv(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ny(t,e,n){if(t==null)return t;var r=[],i=0;return Iv(t,r,"","",function(s){return e.call(n,s,i++)}),r}function lX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kr={current:null},Av={transition:null},uX={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:Av,ReactCurrentOwner:yk};function t4(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:Ny,forEach:function(t,e,n){Ny(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ny(t,function(){e++}),e},toArray:function(t){return Ny(t,function(e){return e})||[]},only:function(t){if(!vk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dt.Component=Zh;dt.Fragment=XY;dt.Profiler=ZY;dt.PureComponent=mk;dt.StrictMode=JY;dt.Suspense=rX;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uX;dt.act=t4;dt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=QU({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yk.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)JU.call(e,c)&&!ZU.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:xg,type:t.type,key:i,ref:s,props:r,_owner:o}};dt.createContext=function(t){return t={$$typeof:tX,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eX,_context:t},t.Consumer=t};dt.createElement=e4;dt.createFactory=function(t){var e=e4.bind(null,t);return e.type=t,e};dt.createRef=function(){return{current:null}};dt.forwardRef=function(t){return{$$typeof:nX,render:t}};dt.isValidElement=vk;dt.lazy=function(t){return{$$typeof:sX,_payload:{_status:-1,_result:t},_init:lX}};dt.memo=function(t,e){return{$$typeof:iX,type:t,compare:e===void 0?null:e}};dt.startTransition=function(t){var e=Av.transition;Av.transition={};try{t()}finally{Av.transition=e}};dt.unstable_act=t4;dt.useCallback=function(t,e){return Kr.current.useCallback(t,e)};dt.useContext=function(t){return Kr.current.useContext(t)};dt.useDebugValue=function(){};dt.useDeferredValue=function(t){return Kr.current.useDeferredValue(t)};dt.useEffect=function(t,e){return Kr.current.useEffect(t,e)};dt.useId=function(){return Kr.current.useId()};dt.useImperativeHandle=function(t,e,n){return Kr.current.useImperativeHandle(t,e,n)};dt.useInsertionEffect=function(t,e){return Kr.current.useInsertionEffect(t,e)};dt.useLayoutEffect=function(t,e){return Kr.current.useLayoutEffect(t,e)};dt.useMemo=function(t,e){return Kr.current.useMemo(t,e)};dt.useReducer=function(t,e,n){return Kr.current.useReducer(t,e,n)};dt.useRef=function(t){return Kr.current.useRef(t)};dt.useState=function(t){return Kr.current.useState(t)};dt.useSyncExternalStore=function(t,e,n){return Kr.current.useSyncExternalStore(t,e,n)};dt.useTransition=function(){return Kr.current.useTransition()};dt.version="18.3.1";qU.exports=dt;var g=qU.exports;const Z=WU(g),wk=qY({__proto__:null,default:Z},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dX=g,hX=Symbol.for("react.element"),fX=Symbol.for("react.fragment"),pX=Object.prototype.hasOwnProperty,mX=dX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gX={key:!0,ref:!0,__self:!0,__source:!0};function n4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pX.call(e,r)&&!gX.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hX,type:t,key:s,ref:o,props:i,_owner:mX.current}}vT.Fragment=fX;vT.jsx=n4;vT.jsxs=n4;KU.exports=vT;var p=KU.exports,r4={exports:{}},Fi={},i4={exports:{}},s4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var X=F.length;F.push(V);e:for(;0<X;){var ge=X-1>>>1,pe=F[ge];if(0<i(pe,V))F[ge]=V,F[X]=pe,X=ge;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var V=F[0],X=F.pop();if(X!==V){F[0]=X;e:for(var ge=0,pe=F.length,B=pe>>>1;ge<B;){var J=2*(ge+1)-1,Y=F[J],W=J+1,te=F[W];if(0>i(Y,X))W<pe&&0>i(te,Y)?(F[ge]=te,F[W]=X,ge=W):(F[ge]=Y,F[J]=X,ge=J);else if(W<pe&&0>i(te,X))F[ge]=te,F[W]=X,ge=W;else break e}}return V}function i(F,V){var X=F.sortIndex-V.sortIndex;return X!==0?X:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,m=!1,_=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(F){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=F)r(l),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(l)}}function b(F){if(v=!1,C(F),!_)if(n(c)!==null)_=!0,U(k);else{var V=n(l);V!==null&&q(b,V.startTime-F)}}function k(F,V){_=!1,v&&(v=!1,y(S),S=-1),m=!0;var X=h;try{for(C(V),d=n(c);d!==null&&(!(d.expirationTime>V)||F&&!R());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,h=d.priorityLevel;var pe=ge(d.expirationTime<=V);V=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(c)&&r(c),C(V)}else r(c);d=n(c)}if(d!==null)var B=!0;else{var J=n(l);J!==null&&q(b,J.startTime-V),B=!1}return B}finally{d=null,h=X,m=!1}}var D=!1,A=null,S=-1,x=5,N=-1;function R(){return!(t.unstable_now()-N<x)}function O(){if(A!==null){var F=t.unstable_now();N=F;var V=!0;try{V=A(!0,F)}finally{V?P():(D=!1,A=null)}}else D=!1}var P;if(typeof w=="function")P=function(){w(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=O,P=function(){K.postMessage(null)}}else P=function(){T(O,0)};function U(F){A=F,D||(D=!0,P())}function q(F,V){S=T(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,U(k))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var X=h;h=V;try{return F()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=h;h=F;try{return V()}finally{h=X}},t.unstable_scheduleCallback=function(F,V,X){var ge=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ge+X:ge):X=ge,F){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=X+pe,F={id:u++,callback:V,priorityLevel:F,startTime:X,expirationTime:pe,sortIndex:-1},X>ge?(F.sortIndex=X,e(l,F),n(c)===null&&F===n(l)&&(v?(y(S),S=-1):v=!0,q(b,X-ge))):(F.sortIndex=pe,e(c,F),_||m||(_=!0,U(k))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var V=h;return function(){var X=h;h=V;try{return F.apply(this,arguments)}finally{h=X}}}})(s4);i4.exports=s4;var yX=i4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vX=g,Di=yX;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o4=new Set,gm={};function Uu(t,e){ph(t,e),ph(t+"Capture",e)}function ph(t,e){for(gm[t]=e,t=0;t<e.length;t++)o4.add(e[t])}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kb=Object.prototype.hasOwnProperty,wX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rM={},iM={};function _X(t){return Kb.call(iM,t)?!0:Kb.call(rM,t)?!1:wX.test(t)?iM[t]=!0:(rM[t]=!0,!1)}function TX(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CX(t,e,n,r){if(e===null||typeof e>"u"||TX(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pr[t]=new qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pr[e]=new qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pr[t]=new qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pr[t]=new qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pr[t]=new qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pr[t]=new qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pr[t]=new qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pr[t]=new qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pr[t]=new qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var _k=/[\-:]([a-z])/g;function Tk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_k,Tk);pr[e]=new qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_k,Tk);pr[e]=new qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_k,Tk);pr[e]=new qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pr[t]=new qr(t,1,!1,t.toLowerCase(),null,!1,!1)});pr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pr[t]=new qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ck(t,e,n,r){var i=pr.hasOwnProperty(e)?pr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CX(e,n,i,r)&&(n=null),r||i===null?_X(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xa=vX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oy=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Cd=Symbol.for("react.fragment"),Ek=Symbol.for("react.strict_mode"),qb=Symbol.for("react.profiler"),a4=Symbol.for("react.provider"),c4=Symbol.for("react.context"),Sk=Symbol.for("react.forward_ref"),Gb=Symbol.for("react.suspense"),Qb=Symbol.for("react.suspense_list"),bk=Symbol.for("react.memo"),Ya=Symbol.for("react.lazy"),l4=Symbol.for("react.offscreen"),sM=Symbol.iterator;function Kf(t){return t===null||typeof t!="object"?null:(t=sM&&t[sM]||t["@@iterator"],typeof t=="function"?t:null)}var sn=Object.assign,ZE;function hp(t){if(ZE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ZE=e&&e[1]||""}return`
`+ZE+t}var eS=!1;function tS(t,e){if(!t||eS)return"";eS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{eS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hp(t):""}function EX(t){switch(t.tag){case 5:return hp(t.type);case 16:return hp("Lazy");case 13:return hp("Suspense");case 19:return hp("SuspenseList");case 0:case 2:case 15:return t=tS(t.type,!1),t;case 11:return t=tS(t.type.render,!1),t;case 1:return t=tS(t.type,!0),t;default:return""}}function Yb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cd:return"Fragment";case Td:return"Portal";case qb:return"Profiler";case Ek:return"StrictMode";case Gb:return"Suspense";case Qb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c4:return(t.displayName||"Context")+".Consumer";case a4:return(t._context.displayName||"Context")+".Provider";case Sk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bk:return e=t.displayName||null,e!==null?e:Yb(t.type)||"Memo";case Ya:e=t._payload,t=t._init;try{return Yb(t(e))}catch{}}return null}function SX(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yb(e);case 8:return e===Ek?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Uc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bX(t){var e=u4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function My(t){t._valueTracker||(t._valueTracker=bX(t))}function d4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xb(t,e){var n=e.checked;return sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Uc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h4(t,e){e=e.checked,e!=null&&Ck(t,"checked",e,!1)}function Jb(t,e){h4(t,e);var n=Uc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zb(t,e.type,Uc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zb(t,e,n){(e!=="number"||dw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fp=Array.isArray;function jd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Uc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function eI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(fp(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Uc(n)}}function f4(t,e){var n=Uc(e.value),r=Uc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function p4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?p4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dy,m4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dy=Dy||document.createElement("div"),Dy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dy.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ym(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IX=["Webkit","ms","Moz","O"];Object.keys(kp).forEach(function(t){IX.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kp[e]=kp[t]})});function g4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kp.hasOwnProperty(t)&&kp[t]?(""+e).trim():e+"px"}function y4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=g4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var AX=sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nI(t,e){if(e){if(AX[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function rI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iI=null;function Ik(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sI=null,Ud=null,$d=null;function uM(t){if(t=Ng(t)){if(typeof sI!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=ET(e),sI(t.stateNode,t.type,e))}}function v4(t){Ud?$d?$d.push(t):$d=[t]:Ud=t}function w4(){if(Ud){var t=Ud,e=$d;if($d=Ud=null,uM(t),e)for(t=0;t<e.length;t++)uM(e[t])}}function _4(t,e){return t(e)}function T4(){}var nS=!1;function C4(t,e,n){if(nS)return t(e,n);nS=!0;try{return _4(t,e,n)}finally{nS=!1,(Ud!==null||$d!==null)&&(T4(),w4())}}function vm(t,e){var n=t.stateNode;if(n===null)return null;var r=ET(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var oI=!1;if(da)try{var qf={};Object.defineProperty(qf,"passive",{get:function(){oI=!0}}),window.addEventListener("test",qf,qf),window.removeEventListener("test",qf,qf)}catch{oI=!1}function kX(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var xp=!1,hw=null,fw=!1,aI=null,xX={onError:function(t){xp=!0,hw=t}};function RX(t,e,n,r,i,s,o,a,c){xp=!1,hw=null,kX.apply(xX,arguments)}function PX(t,e,n,r,i,s,o,a,c){if(RX.apply(this,arguments),xp){if(xp){var l=hw;xp=!1,hw=null}else throw Error(ce(198));fw||(fw=!0,aI=l)}}function $u(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dM(t){if($u(t)!==t)throw Error(ce(188))}function NX(t){var e=t.alternate;if(!e){if(e=$u(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dM(i),t;if(s===r)return dM(i),e;s=s.sibling}throw Error(ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function S4(t){return t=NX(t),t!==null?b4(t):null}function b4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b4(t);if(e!==null)return e;t=t.sibling}return null}var I4=Di.unstable_scheduleCallback,hM=Di.unstable_cancelCallback,OX=Di.unstable_shouldYield,MX=Di.unstable_requestPaint,vn=Di.unstable_now,DX=Di.unstable_getCurrentPriorityLevel,Ak=Di.unstable_ImmediatePriority,A4=Di.unstable_UserBlockingPriority,pw=Di.unstable_NormalPriority,LX=Di.unstable_LowPriority,k4=Di.unstable_IdlePriority,wT=null,fo=null;function FX(t){if(fo&&typeof fo.onCommitFiberRoot=="function")try{fo.onCommitFiberRoot(wT,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:UX,VX=Math.log,jX=Math.LN2;function UX(t){return t>>>=0,t===0?32:31-(VX(t)/jX|0)|0}var Ly=64,Fy=4194304;function pp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=pp(a):(s&=o,s!==0&&(r=pp(s)))}else o=n&~i,o!==0?r=pp(o):s!==0&&(r=pp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-As(e),i=1<<n,r|=t[n],e&=~i;return r}function $X(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BX(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-As(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=$X(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function cI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function x4(){var t=Ly;return Ly<<=1,!(Ly&4194240)&&(Ly=64),t}function rS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-As(e),t[e]=n}function HX(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-As(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function kk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-As(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Rt=0;function R4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P4,xk,N4,O4,M4,lI=!1,Vy=[],_c=null,Tc=null,Cc=null,wm=new Map,_m=new Map,ec=[],zX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fM(t,e){switch(t){case"focusin":case"focusout":_c=null;break;case"dragenter":case"dragleave":Tc=null;break;case"mouseover":case"mouseout":Cc=null;break;case"pointerover":case"pointerout":wm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_m.delete(e.pointerId)}}function Gf(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ng(e),e!==null&&xk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WX(t,e,n,r,i){switch(e){case"focusin":return _c=Gf(_c,t,e,n,r,i),!0;case"dragenter":return Tc=Gf(Tc,t,e,n,r,i),!0;case"mouseover":return Cc=Gf(Cc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return wm.set(s,Gf(wm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,_m.set(s,Gf(_m.get(s)||null,t,e,n,r,i)),!0}return!1}function D4(t){var e=$l(t.target);if(e!==null){var n=$u(e);if(n!==null){if(e=n.tag,e===13){if(e=E4(n),e!==null){t.blockedOn=e,M4(t.priority,function(){N4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uI(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);iI=r,n.target.dispatchEvent(r),iI=null}else return e=Ng(n),e!==null&&xk(e),t.blockedOn=n,!1;e.shift()}return!0}function pM(t,e,n){kv(t)&&n.delete(e)}function KX(){lI=!1,_c!==null&&kv(_c)&&(_c=null),Tc!==null&&kv(Tc)&&(Tc=null),Cc!==null&&kv(Cc)&&(Cc=null),wm.forEach(pM),_m.forEach(pM)}function Qf(t,e){t.blockedOn===e&&(t.blockedOn=null,lI||(lI=!0,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,KX)))}function Tm(t){function e(i){return Qf(i,t)}if(0<Vy.length){Qf(Vy[0],t);for(var n=1;n<Vy.length;n++){var r=Vy[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_c!==null&&Qf(_c,t),Tc!==null&&Qf(Tc,t),Cc!==null&&Qf(Cc,t),wm.forEach(e),_m.forEach(e),n=0;n<ec.length;n++)r=ec[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ec.length&&(n=ec[0],n.blockedOn===null);)D4(n),n.blockedOn===null&&ec.shift()}var Bd=xa.ReactCurrentBatchConfig,gw=!0;function qX(t,e,n,r){var i=Rt,s=Bd.transition;Bd.transition=null;try{Rt=1,Rk(t,e,n,r)}finally{Rt=i,Bd.transition=s}}function GX(t,e,n,r){var i=Rt,s=Bd.transition;Bd.transition=null;try{Rt=4,Rk(t,e,n,r)}finally{Rt=i,Bd.transition=s}}function Rk(t,e,n,r){if(gw){var i=uI(t,e,n,r);if(i===null)fS(t,e,r,yw,n),fM(t,r);else if(WX(i,t,e,n,r))r.stopPropagation();else if(fM(t,r),e&4&&-1<zX.indexOf(t)){for(;i!==null;){var s=Ng(i);if(s!==null&&P4(s),s=uI(t,e,n,r),s===null&&fS(t,e,r,yw,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fS(t,e,r,null,n)}}var yw=null;function uI(t,e,n,r){if(yw=null,t=Ik(r),t=$l(t),t!==null)if(e=$u(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yw=t,null}function L4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DX()){case Ak:return 1;case A4:return 4;case pw:case LX:return 16;case k4:return 536870912;default:return 16}default:return 16}}var fc=null,Pk=null,xv=null;function F4(){if(xv)return xv;var t,e=Pk,n=e.length,r,i="value"in fc?fc.value:fc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xv=i.slice(t,1<r?1-r:void 0)}function Rv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jy(){return!0}function mM(){return!1}function Vi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jy:mM,this.isPropagationStopped=mM,this}return sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jy)},persist:function(){},isPersistent:jy}),e}var ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nk=Vi(ef),Pg=sn({},ef,{view:0,detail:0}),QX=Vi(Pg),iS,sS,Yf,_T=sn({},Pg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ok,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yf&&(Yf&&t.type==="mousemove"?(iS=t.screenX-Yf.screenX,sS=t.screenY-Yf.screenY):sS=iS=0,Yf=t),iS)},movementY:function(t){return"movementY"in t?t.movementY:sS}}),gM=Vi(_T),YX=sn({},_T,{dataTransfer:0}),XX=Vi(YX),JX=sn({},Pg,{relatedTarget:0}),oS=Vi(JX),ZX=sn({},ef,{animationName:0,elapsedTime:0,pseudoElement:0}),eJ=Vi(ZX),tJ=sn({},ef,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nJ=Vi(tJ),rJ=sn({},ef,{data:0}),yM=Vi(rJ),iJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aJ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oJ[t])?!!e[t]:!1}function Ok(){return aJ}var cJ=sn({},Pg,{key:function(t){if(t.key){var e=iJ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sJ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ok,charCode:function(t){return t.type==="keypress"?Rv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lJ=Vi(cJ),uJ=sn({},_T,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vM=Vi(uJ),dJ=sn({},Pg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ok}),hJ=Vi(dJ),fJ=sn({},ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),pJ=Vi(fJ),mJ=sn({},_T,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gJ=Vi(mJ),yJ=[9,13,27,32],Mk=da&&"CompositionEvent"in window,Rp=null;da&&"documentMode"in document&&(Rp=document.documentMode);var vJ=da&&"TextEvent"in window&&!Rp,V4=da&&(!Mk||Rp&&8<Rp&&11>=Rp),wM=" ",_M=!1;function j4(t,e){switch(t){case"keyup":return yJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ed=!1;function wJ(t,e){switch(t){case"compositionend":return U4(e);case"keypress":return e.which!==32?null:(_M=!0,wM);case"textInput":return t=e.data,t===wM&&_M?null:t;default:return null}}function _J(t,e){if(Ed)return t==="compositionend"||!Mk&&j4(t,e)?(t=F4(),xv=Pk=fc=null,Ed=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V4&&e.locale!=="ko"?null:e.data;default:return null}}var TJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TJ[t.type]:e==="textarea"}function $4(t,e,n,r){v4(r),e=vw(e,"onChange"),0<e.length&&(n=new Nk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pp=null,Cm=null;function CJ(t){J4(t,0)}function TT(t){var e=Id(t);if(d4(e))return t}function EJ(t,e){if(t==="change")return e}var B4=!1;if(da){var aS;if(da){var cS="oninput"in document;if(!cS){var CM=document.createElement("div");CM.setAttribute("oninput","return;"),cS=typeof CM.oninput=="function"}aS=cS}else aS=!1;B4=aS&&(!document.documentMode||9<document.documentMode)}function EM(){Pp&&(Pp.detachEvent("onpropertychange",H4),Cm=Pp=null)}function H4(t){if(t.propertyName==="value"&&TT(Cm)){var e=[];$4(e,Cm,t,Ik(t)),C4(CJ,e)}}function SJ(t,e,n){t==="focusin"?(EM(),Pp=e,Cm=n,Pp.attachEvent("onpropertychange",H4)):t==="focusout"&&EM()}function bJ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return TT(Cm)}function IJ(t,e){if(t==="click")return TT(e)}function AJ(t,e){if(t==="input"||t==="change")return TT(e)}function kJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ps=typeof Object.is=="function"?Object.is:kJ;function Em(t,e){if(Ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Kb.call(e,i)||!Ps(t[i],e[i]))return!1}return!0}function SM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bM(t,e){var n=SM(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=SM(n)}}function z4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W4(){for(var t=window,e=dw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dw(t.document)}return e}function Dk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xJ(t){var e=W4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z4(n.ownerDocument.documentElement,n)){if(r!==null&&Dk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bM(n,s);var o=bM(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RJ=da&&"documentMode"in document&&11>=document.documentMode,Sd=null,dI=null,Np=null,hI=!1;function IM(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hI||Sd==null||Sd!==dw(r)||(r=Sd,"selectionStart"in r&&Dk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Np&&Em(Np,r)||(Np=r,r=vw(dI,"onSelect"),0<r.length&&(e=new Nk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sd)))}function Uy(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bd={animationend:Uy("Animation","AnimationEnd"),animationiteration:Uy("Animation","AnimationIteration"),animationstart:Uy("Animation","AnimationStart"),transitionend:Uy("Transition","TransitionEnd")},lS={},K4={};da&&(K4=document.createElement("div").style,"AnimationEvent"in window||(delete bd.animationend.animation,delete bd.animationiteration.animation,delete bd.animationstart.animation),"TransitionEvent"in window||delete bd.transitionend.transition);function CT(t){if(lS[t])return lS[t];if(!bd[t])return t;var e=bd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in K4)return lS[t]=e[n];return t}var q4=CT("animationend"),G4=CT("animationiteration"),Q4=CT("animationstart"),Y4=CT("transitionend"),X4=new Map,AM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ol(t,e){X4.set(t,e),Uu(e,[t])}for(var uS=0;uS<AM.length;uS++){var dS=AM[uS],PJ=dS.toLowerCase(),NJ=dS[0].toUpperCase()+dS.slice(1);ol(PJ,"on"+NJ)}ol(q4,"onAnimationEnd");ol(G4,"onAnimationIteration");ol(Q4,"onAnimationStart");ol("dblclick","onDoubleClick");ol("focusin","onFocus");ol("focusout","onBlur");ol(Y4,"onTransitionEnd");ph("onMouseEnter",["mouseout","mouseover"]);ph("onMouseLeave",["mouseout","mouseover"]);ph("onPointerEnter",["pointerout","pointerover"]);ph("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(mp));function kM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PX(r,e,void 0,t),t.currentTarget=null}function J4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;kM(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;kM(i,a,l),s=c}}}if(fw)throw t=aI,fw=!1,aI=null,t}function qt(t,e){var n=e[yI];n===void 0&&(n=e[yI]=new Set);var r=t+"__bubble";n.has(r)||(Z4(e,t,2,!1),n.add(r))}function hS(t,e,n){var r=0;e&&(r|=4),Z4(n,t,r,e)}var $y="_reactListening"+Math.random().toString(36).slice(2);function Sm(t){if(!t[$y]){t[$y]=!0,o4.forEach(function(n){n!=="selectionchange"&&(OJ.has(n)||hS(n,!1,t),hS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$y]||(e[$y]=!0,hS("selectionchange",!1,e))}}function Z4(t,e,n,r){switch(L4(e)){case 1:var i=qX;break;case 4:i=GX;break;default:i=Rk}n=i.bind(null,e,n,t),i=void 0,!oI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fS(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$l(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}C4(function(){var l=s,u=Ik(n),d=[];e:{var h=X4.get(t);if(h!==void 0){var m=Nk,_=t;switch(t){case"keypress":if(Rv(n)===0)break e;case"keydown":case"keyup":m=lJ;break;case"focusin":_="focus",m=oS;break;case"focusout":_="blur",m=oS;break;case"beforeblur":case"afterblur":m=oS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=gM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=XX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hJ;break;case q4:case G4:case Q4:m=eJ;break;case Y4:m=pJ;break;case"scroll":m=QX;break;case"wheel":m=gJ;break;case"copy":case"cut":case"paste":m=nJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=vM}var v=(e&4)!==0,T=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var w=l,C;w!==null;){C=w;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,y!==null&&(b=vm(w,y),b!=null&&v.push(bm(w,b,C)))),T)break;w=w.return}0<v.length&&(h=new m(h,_,null,n,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==iI&&(_=n.relatedTarget||n.fromElement)&&($l(_)||_[ha]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=l,_=_?$l(_):null,_!==null&&(T=$u(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=l),m!==_)){if(v=gM,b="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=vM,b="onPointerLeave",y="onPointerEnter",w="pointer"),T=m==null?h:Id(m),C=_==null?h:Id(_),h=new v(b,w+"leave",m,n,u),h.target=T,h.relatedTarget=C,b=null,$l(u)===l&&(v=new v(y,w+"enter",_,n,u),v.target=C,v.relatedTarget=T,b=v),T=b,m&&_)t:{for(v=m,y=_,w=0,C=v;C;C=rd(C))w++;for(C=0,b=y;b;b=rd(b))C++;for(;0<w-C;)v=rd(v),w--;for(;0<C-w;)y=rd(y),C--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=rd(v),y=rd(y)}v=null}else v=null;m!==null&&xM(d,h,m,v,!1),_!==null&&T!==null&&xM(d,T,_,v,!0)}}e:{if(h=l?Id(l):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=EJ;else if(TM(h))if(B4)k=AJ;else{k=bJ;var D=SJ}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=IJ);if(k&&(k=k(t,l))){$4(d,k,n,u);break e}D&&D(t,h,l),t==="focusout"&&(D=h._wrapperState)&&D.controlled&&h.type==="number"&&Zb(h,"number",h.value)}switch(D=l?Id(l):window,t){case"focusin":(TM(D)||D.contentEditable==="true")&&(Sd=D,dI=l,Np=null);break;case"focusout":Np=dI=Sd=null;break;case"mousedown":hI=!0;break;case"contextmenu":case"mouseup":case"dragend":hI=!1,IM(d,n,u);break;case"selectionchange":if(RJ)break;case"keydown":case"keyup":IM(d,n,u)}var A;if(Mk)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ed?j4(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(V4&&n.locale!=="ko"&&(Ed||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ed&&(A=F4()):(fc=u,Pk="value"in fc?fc.value:fc.textContent,Ed=!0)),D=vw(l,S),0<D.length&&(S=new yM(S,t,null,n,u),d.push({event:S,listeners:D}),A?S.data=A:(A=U4(n),A!==null&&(S.data=A)))),(A=vJ?wJ(t,n):_J(t,n))&&(l=vw(l,"onBeforeInput"),0<l.length&&(u=new yM("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}J4(d,e)})}function bm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vw(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vm(t,n),s!=null&&r.unshift(bm(t,s,i)),s=vm(t,e),s!=null&&r.push(bm(t,s,i))),t=t.return}return r}function rd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xM(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=vm(n,s),c!=null&&o.unshift(bm(n,c,a))):i||(c=vm(n,s),c!=null&&o.push(bm(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MJ=/\r\n?/g,DJ=/\u0000|\uFFFD/g;function RM(t){return(typeof t=="string"?t:""+t).replace(MJ,`
`).replace(DJ,"")}function By(t,e,n){if(e=RM(e),RM(t)!==e&&n)throw Error(ce(425))}function ww(){}var fI=null,pI=null;function mI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gI=typeof setTimeout=="function"?setTimeout:void 0,LJ=typeof clearTimeout=="function"?clearTimeout:void 0,PM=typeof Promise=="function"?Promise:void 0,FJ=typeof queueMicrotask=="function"?queueMicrotask:typeof PM<"u"?function(t){return PM.resolve(null).then(t).catch(VJ)}:gI;function VJ(t){setTimeout(function(){throw t})}function pS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Tm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Tm(e)}function Ec(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function NM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tf=Math.random().toString(36).slice(2),no="__reactFiber$"+tf,Im="__reactProps$"+tf,ha="__reactContainer$"+tf,yI="__reactEvents$"+tf,jJ="__reactListeners$"+tf,UJ="__reactHandles$"+tf;function $l(t){var e=t[no];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ha]||n[no]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NM(t);t!==null;){if(n=t[no])return n;t=NM(t)}return e}t=n,n=t.parentNode}return null}function Ng(t){return t=t[no]||t[ha],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Id(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function ET(t){return t[Im]||null}var vI=[],Ad=-1;function al(t){return{current:t}}function Qt(t){0>Ad||(t.current=vI[Ad],vI[Ad]=null,Ad--)}function Ht(t,e){Ad++,vI[Ad]=t.current,t.current=e}var $c={},kr=al($c),li=al(!1),fu=$c;function mh(t,e){var n=t.type.contextTypes;if(!n)return $c;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ui(t){return t=t.childContextTypes,t!=null}function _w(){Qt(li),Qt(kr)}function OM(t,e,n){if(kr.current!==$c)throw Error(ce(168));Ht(kr,e),Ht(li,n)}function e$(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ce(108,SX(t)||"Unknown",i));return sn({},n,r)}function Tw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$c,fu=kr.current,Ht(kr,t),Ht(li,li.current),!0}function MM(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=e$(t,e,fu),r.__reactInternalMemoizedMergedChildContext=t,Qt(li),Qt(kr),Ht(kr,t)):Qt(li),Ht(li,n)}var Ko=null,ST=!1,mS=!1;function t$(t){Ko===null?Ko=[t]:Ko.push(t)}function $J(t){ST=!0,t$(t)}function cl(){if(!mS&&Ko!==null){mS=!0;var t=0,e=Rt;try{var n=Ko;for(Rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ko=null,ST=!1}catch(i){throw Ko!==null&&(Ko=Ko.slice(t+1)),I4(Ak,cl),i}finally{Rt=e,mS=!1}}return null}var kd=[],xd=0,Cw=null,Ew=0,Wi=[],Ki=0,pu=null,Jo=1,Zo="";function bl(t,e){kd[xd++]=Ew,kd[xd++]=Cw,Cw=t,Ew=e}function n$(t,e,n){Wi[Ki++]=Jo,Wi[Ki++]=Zo,Wi[Ki++]=pu,pu=t;var r=Jo;t=Zo;var i=32-As(r)-1;r&=~(1<<i),n+=1;var s=32-As(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-As(e)+i|n<<i|r,Zo=s+t}else Jo=1<<s|n<<i|r,Zo=t}function Lk(t){t.return!==null&&(bl(t,1),n$(t,1,0))}function Fk(t){for(;t===Cw;)Cw=kd[--xd],kd[xd]=null,Ew=kd[--xd],kd[xd]=null;for(;t===pu;)pu=Wi[--Ki],Wi[Ki]=null,Zo=Wi[--Ki],Wi[Ki]=null,Jo=Wi[--Ki],Wi[Ki]=null}var Ri=null,Ai=null,Xt=!1,_s=null;function r$(t,e){var n=Qi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function DM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ri=t,Ai=Ec(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ri=t,Ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pu!==null?{id:Jo,overflow:Zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ri=t,Ai=null,!0):!1;default:return!1}}function wI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _I(t){if(Xt){var e=Ai;if(e){var n=e;if(!DM(t,e)){if(wI(t))throw Error(ce(418));e=Ec(n.nextSibling);var r=Ri;e&&DM(t,e)?r$(r,n):(t.flags=t.flags&-4097|2,Xt=!1,Ri=t)}}else{if(wI(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Xt=!1,Ri=t}}}function LM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ri=t}function Hy(t){if(t!==Ri)return!1;if(!Xt)return LM(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mI(t.type,t.memoizedProps)),e&&(e=Ai)){if(wI(t))throw i$(),Error(ce(418));for(;e;)r$(t,e),e=Ec(e.nextSibling)}if(LM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ai=Ec(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ai=null}}else Ai=Ri?Ec(t.stateNode.nextSibling):null;return!0}function i$(){for(var t=Ai;t;)t=Ec(t.nextSibling)}function gh(){Ai=Ri=null,Xt=!1}function Vk(t){_s===null?_s=[t]:_s.push(t)}var BJ=xa.ReactCurrentBatchConfig;function Xf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function zy(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function FM(t){var e=t._init;return e(t._payload)}function s$(t){function e(y,w){if(t){var C=y.deletions;C===null?(y.deletions=[w],y.flags|=16):C.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Ac(y,w),y.index=0,y.sibling=null,y}function s(y,w,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<w?(y.flags|=2,w):C):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,C,b){return w===null||w.tag!==6?(w=CS(C,y.mode,b),w.return=y,w):(w=i(w,C),w.return=y,w)}function c(y,w,C,b){var k=C.type;return k===Cd?u(y,w,C.props.children,b,C.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ya&&FM(k)===w.type)?(b=i(w,C.props),b.ref=Xf(y,w,C),b.return=y,b):(b=Fv(C.type,C.key,C.props,null,y.mode,b),b.ref=Xf(y,w,C),b.return=y,b)}function l(y,w,C,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=ES(C,y.mode,b),w.return=y,w):(w=i(w,C.children||[]),w.return=y,w)}function u(y,w,C,b,k){return w===null||w.tag!==7?(w=su(C,y.mode,b,k),w.return=y,w):(w=i(w,C),w.return=y,w)}function d(y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=CS(""+w,y.mode,C),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oy:return C=Fv(w.type,w.key,w.props,null,y.mode,C),C.ref=Xf(y,null,w),C.return=y,C;case Td:return w=ES(w,y.mode,C),w.return=y,w;case Ya:var b=w._init;return d(y,b(w._payload),C)}if(fp(w)||Kf(w))return w=su(w,y.mode,C,null),w.return=y,w;zy(y,w)}return null}function h(y,w,C,b){var k=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return k!==null?null:a(y,w,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Oy:return C.key===k?c(y,w,C,b):null;case Td:return C.key===k?l(y,w,C,b):null;case Ya:return k=C._init,h(y,w,k(C._payload),b)}if(fp(C)||Kf(C))return k!==null?null:u(y,w,C,b,null);zy(y,C)}return null}function m(y,w,C,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(C)||null,a(w,y,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oy:return y=y.get(b.key===null?C:b.key)||null,c(w,y,b,k);case Td:return y=y.get(b.key===null?C:b.key)||null,l(w,y,b,k);case Ya:var D=b._init;return m(y,w,C,D(b._payload),k)}if(fp(b)||Kf(b))return y=y.get(C)||null,u(w,y,b,k,null);zy(w,b)}return null}function _(y,w,C,b){for(var k=null,D=null,A=w,S=w=0,x=null;A!==null&&S<C.length;S++){A.index>S?(x=A,A=null):x=A.sibling;var N=h(y,A,C[S],b);if(N===null){A===null&&(A=x);break}t&&A&&N.alternate===null&&e(y,A),w=s(N,w,S),D===null?k=N:D.sibling=N,D=N,A=x}if(S===C.length)return n(y,A),Xt&&bl(y,S),k;if(A===null){for(;S<C.length;S++)A=d(y,C[S],b),A!==null&&(w=s(A,w,S),D===null?k=A:D.sibling=A,D=A);return Xt&&bl(y,S),k}for(A=r(y,A);S<C.length;S++)x=m(A,y,S,C[S],b),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?S:x.key),w=s(x,w,S),D===null?k=x:D.sibling=x,D=x);return t&&A.forEach(function(R){return e(y,R)}),Xt&&bl(y,S),k}function v(y,w,C,b){var k=Kf(C);if(typeof k!="function")throw Error(ce(150));if(C=k.call(C),C==null)throw Error(ce(151));for(var D=k=null,A=w,S=w=0,x=null,N=C.next();A!==null&&!N.done;S++,N=C.next()){A.index>S?(x=A,A=null):x=A.sibling;var R=h(y,A,N.value,b);if(R===null){A===null&&(A=x);break}t&&A&&R.alternate===null&&e(y,A),w=s(R,w,S),D===null?k=R:D.sibling=R,D=R,A=x}if(N.done)return n(y,A),Xt&&bl(y,S),k;if(A===null){for(;!N.done;S++,N=C.next())N=d(y,N.value,b),N!==null&&(w=s(N,w,S),D===null?k=N:D.sibling=N,D=N);return Xt&&bl(y,S),k}for(A=r(y,A);!N.done;S++,N=C.next())N=m(A,y,S,N.value,b),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?S:N.key),w=s(N,w,S),D===null?k=N:D.sibling=N,D=N);return t&&A.forEach(function(O){return e(y,O)}),Xt&&bl(y,S),k}function T(y,w,C,b){if(typeof C=="object"&&C!==null&&C.type===Cd&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Oy:e:{for(var k=C.key,D=w;D!==null;){if(D.key===k){if(k=C.type,k===Cd){if(D.tag===7){n(y,D.sibling),w=i(D,C.props.children),w.return=y,y=w;break e}}else if(D.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ya&&FM(k)===D.type){n(y,D.sibling),w=i(D,C.props),w.ref=Xf(y,D,C),w.return=y,y=w;break e}n(y,D);break}else e(y,D);D=D.sibling}C.type===Cd?(w=su(C.props.children,y.mode,b,C.key),w.return=y,y=w):(b=Fv(C.type,C.key,C.props,null,y.mode,b),b.ref=Xf(y,w,C),b.return=y,y=b)}return o(y);case Td:e:{for(D=C.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(y,w.sibling),w=i(w,C.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=ES(C,y.mode,b),w.return=y,y=w}return o(y);case Ya:return D=C._init,T(y,w,D(C._payload),b)}if(fp(C))return _(y,w,C,b);if(Kf(C))return v(y,w,C,b);zy(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,C),w.return=y,y=w):(n(y,w),w=CS(C,y.mode,b),w.return=y,y=w),o(y)):n(y,w)}return T}var yh=s$(!0),o$=s$(!1),Sw=al(null),bw=null,Rd=null,jk=null;function Uk(){jk=Rd=bw=null}function $k(t){var e=Sw.current;Qt(Sw),t._currentValue=e}function TI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hd(t,e){bw=t,jk=Rd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function ns(t){var e=t._currentValue;if(jk!==t)if(t={context:t,memoizedValue:e,next:null},Rd===null){if(bw===null)throw Error(ce(308));Rd=t,bw.dependencies={lanes:0,firstContext:t}}else Rd=Rd.next=t;return e}var Bl=null;function Bk(t){Bl===null?Bl=[t]:Bl.push(t)}function a$(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bk(e)):(n.next=i.next,i.next=n),e.interleaved=n,fa(t,r)}function fa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xa=!1;function Hk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c$(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function aa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fa(t,n)}return i=r.interleaved,i===null?(e.next=e,Bk(r)):(e.next=i.next,i.next=e),r.interleaved=e,fa(t,n)}function Pv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kk(t,n)}}function VM(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Iw(t,e,n,r){var i=t.updateQueue;Xa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,v=a;switch(h=e,m=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){d=_.call(m,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,h=typeof _=="function"?_.call(m,d,h):_,h==null)break e;d=sn({},d,h);break e;case 2:Xa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gu|=o,t.lanes=o,t.memoizedState=d}}function jM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var Og={},po=al(Og),Am=al(Og),km=al(Og);function Hl(t){if(t===Og)throw Error(ce(174));return t}function zk(t,e){switch(Ht(km,e),Ht(Am,t),Ht(po,Og),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tI(e,t)}Qt(po),Ht(po,e)}function vh(){Qt(po),Qt(Am),Qt(km)}function l$(t){Hl(km.current);var e=Hl(po.current),n=tI(e,t.type);e!==n&&(Ht(Am,t),Ht(po,n))}function Wk(t){Am.current===t&&(Qt(po),Qt(Am))}var Zt=al(0);function Aw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gS=[];function Kk(){for(var t=0;t<gS.length;t++)gS[t]._workInProgressVersionPrimary=null;gS.length=0}var Nv=xa.ReactCurrentDispatcher,yS=xa.ReactCurrentBatchConfig,mu=0,nn=null,Fn=null,Jn=null,kw=!1,Op=!1,xm=0,HJ=0;function vr(){throw Error(ce(321))}function qk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ps(t[n],e[n]))return!1;return!0}function Gk(t,e,n,r,i,s){if(mu=s,nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nv.current=t===null||t.memoizedState===null?qJ:GJ,t=n(r,i),Op){s=0;do{if(Op=!1,xm=0,25<=s)throw Error(ce(301));s+=1,Jn=Fn=null,e.updateQueue=null,Nv.current=QJ,t=n(r,i)}while(Op)}if(Nv.current=xw,e=Fn!==null&&Fn.next!==null,mu=0,Jn=Fn=nn=null,kw=!1,e)throw Error(ce(300));return t}function Qk(){var t=xm!==0;return xm=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?nn.memoizedState=Jn=t:Jn=Jn.next=t,Jn}function rs(){if(Fn===null){var t=nn.alternate;t=t!==null?t.memoizedState:null}else t=Fn.next;var e=Jn===null?nn.memoizedState:Jn.next;if(e!==null)Jn=e,Fn=t;else{if(t===null)throw Error(ce(310));Fn=t,t={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Jn===null?nn.memoizedState=Jn=t:Jn=Jn.next=t}return Jn}function Rm(t,e){return typeof e=="function"?e(t):e}function vS(t){var e=rs(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=Fn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((mu&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,nn.lanes|=u,gu|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,Ps(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,nn.lanes|=s,gu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wS(t){var e=rs(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ps(s,e.memoizedState)||(ii=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function u$(){}function d$(t,e){var n=nn,r=rs(),i=e(),s=!Ps(r.memoizedState,i);if(s&&(r.memoizedState=i,ii=!0),r=r.queue,Yk(p$.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Jn!==null&&Jn.memoizedState.tag&1){if(n.flags|=2048,Pm(9,f$.bind(null,n,r,i,e),void 0,null),nr===null)throw Error(ce(349));mu&30||h$(n,e,i)}return i}function h$(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f$(t,e,n,r){e.value=n,e.getSnapshot=r,m$(e)&&g$(t)}function p$(t,e,n){return n(function(){m$(e)&&g$(t)})}function m$(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ps(t,n)}catch{return!0}}function g$(t){var e=fa(t,1);e!==null&&ks(e,t,1,-1)}function UM(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rm,lastRenderedState:t},e.queue=t,t=t.dispatch=KJ.bind(null,nn,t),[e.memoizedState,t]}function Pm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y$(){return rs().memoizedState}function Ov(t,e,n,r){var i=Gs();nn.flags|=t,i.memoizedState=Pm(1|e,n,void 0,r===void 0?null:r)}function bT(t,e,n,r){var i=rs();r=r===void 0?null:r;var s=void 0;if(Fn!==null){var o=Fn.memoizedState;if(s=o.destroy,r!==null&&qk(r,o.deps)){i.memoizedState=Pm(e,n,s,r);return}}nn.flags|=t,i.memoizedState=Pm(1|e,n,s,r)}function $M(t,e){return Ov(8390656,8,t,e)}function Yk(t,e){return bT(2048,8,t,e)}function v$(t,e){return bT(4,2,t,e)}function w$(t,e){return bT(4,4,t,e)}function _$(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T$(t,e,n){return n=n!=null?n.concat([t]):null,bT(4,4,_$.bind(null,e,t),n)}function Xk(){}function C$(t,e){var n=rs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function E$(t,e){var n=rs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S$(t,e,n){return mu&21?(Ps(n,e)||(n=x4(),nn.lanes|=n,gu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function zJ(t,e){var n=Rt;Rt=n!==0&&4>n?n:4,t(!0);var r=yS.transition;yS.transition={};try{t(!1),e()}finally{Rt=n,yS.transition=r}}function b$(){return rs().memoizedState}function WJ(t,e,n){var r=Ic(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},I$(t))A$(e,n);else if(n=a$(t,e,n,r),n!==null){var i=Ur();ks(n,t,r,i),k$(n,e,r)}}function KJ(t,e,n){var r=Ic(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(I$(t))A$(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ps(a,o)){var c=e.interleaved;c===null?(i.next=i,Bk(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=a$(t,e,i,r),n!==null&&(i=Ur(),ks(n,t,r,i),k$(n,e,r))}}function I$(t){var e=t.alternate;return t===nn||e!==null&&e===nn}function A$(t,e){Op=kw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kk(t,n)}}var xw={readContext:ns,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},qJ={readContext:ns,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:ns,useEffect:$M,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ov(4194308,4,_$.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ov(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ov(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WJ.bind(null,nn,t),[r.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:UM,useDebugValue:Xk,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=UM(!1),e=t[0];return t=zJ.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nn,i=Gs();if(Xt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),nr===null)throw Error(ce(349));mu&30||h$(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,$M(p$.bind(null,r,s,t),[t]),r.flags|=2048,Pm(9,f$.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gs(),e=nr.identifierPrefix;if(Xt){var n=Zo,r=Jo;n=(r&~(1<<32-As(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GJ={readContext:ns,useCallback:C$,useContext:ns,useEffect:Yk,useImperativeHandle:T$,useInsertionEffect:v$,useLayoutEffect:w$,useMemo:E$,useReducer:vS,useRef:y$,useState:function(){return vS(Rm)},useDebugValue:Xk,useDeferredValue:function(t){var e=rs();return S$(e,Fn.memoizedState,t)},useTransition:function(){var t=vS(Rm)[0],e=rs().memoizedState;return[t,e]},useMutableSource:u$,useSyncExternalStore:d$,useId:b$,unstable_isNewReconciler:!1},QJ={readContext:ns,useCallback:C$,useContext:ns,useEffect:Yk,useImperativeHandle:T$,useInsertionEffect:v$,useLayoutEffect:w$,useMemo:E$,useReducer:wS,useRef:y$,useState:function(){return wS(Rm)},useDebugValue:Xk,useDeferredValue:function(t){var e=rs();return Fn===null?e.memoizedState=t:S$(e,Fn.memoizedState,t)},useTransition:function(){var t=wS(Rm)[0],e=rs().memoizedState;return[t,e]},useMutableSource:u$,useSyncExternalStore:d$,useId:b$,unstable_isNewReconciler:!1};function ps(t,e){if(t&&t.defaultProps){e=sn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function CI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:sn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var IT={isMounted:function(t){return(t=t._reactInternals)?$u(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ur(),i=Ic(t),s=aa(r,i);s.payload=e,n!=null&&(s.callback=n),e=Sc(t,s,i),e!==null&&(ks(e,t,i,r),Pv(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ur(),i=Ic(t),s=aa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Sc(t,s,i),e!==null&&(ks(e,t,i,r),Pv(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ur(),r=Ic(t),i=aa(n,r);i.tag=2,e!=null&&(i.callback=e),e=Sc(t,i,r),e!==null&&(ks(e,t,r,n),Pv(e,t,r))}};function BM(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Em(n,r)||!Em(i,s):!0}function x$(t,e,n){var r=!1,i=$c,s=e.contextType;return typeof s=="object"&&s!==null?s=ns(s):(i=ui(e)?fu:kr.current,r=e.contextTypes,s=(r=r!=null)?mh(t,i):$c),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=IT,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function HM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&IT.enqueueReplaceState(e,e.state,null)}function EI(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Hk(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ns(s):(s=ui(e)?fu:kr.current,i.context=mh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(CI(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&IT.enqueueReplaceState(i,i.state,null),Iw(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wh(t,e){try{var n="",r=e;do n+=EX(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _S(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function SI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YJ=typeof WeakMap=="function"?WeakMap:Map;function R$(t,e,n){n=aa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pw||(Pw=!0,MI=r),SI(t,e)},n}function P$(t,e,n){n=aa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){SI(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){SI(t,e),typeof r!="function"&&(bc===null?bc=new Set([this]):bc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YJ;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=uZ.bind(null,t,e,n),e.then(t,t))}function WM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function KM(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=aa(-1,1),e.tag=2,Sc(n,e,1))),n.lanes|=1),t)}var XJ=xa.ReactCurrentOwner,ii=!1;function Dr(t,e,n,r){e.child=t===null?o$(e,null,n,r):yh(e,t.child,n,r)}function qM(t,e,n,r,i){n=n.render;var s=e.ref;return Hd(e,i),r=Gk(t,e,n,r,s,i),n=Qk(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pa(t,e,i)):(Xt&&n&&Lk(e),e.flags|=1,Dr(t,e,r,i),e.child)}function GM(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,N$(t,e,s,r,i)):(t=Fv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Em,n(o,r)&&t.ref===e.ref)return pa(t,e,i)}return e.flags|=1,t=Ac(s,r),t.ref=e.ref,t.return=e,e.child=t}function N$(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Em(s,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,pa(t,e,i)}return bI(t,e,n,r,i)}function O$(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Nd,Ei),Ei|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ht(Nd,Ei),Ei|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ht(Nd,Ei),Ei|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ht(Nd,Ei),Ei|=r;return Dr(t,e,i,n),e.child}function M$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bI(t,e,n,r,i){var s=ui(n)?fu:kr.current;return s=mh(e,s),Hd(e,i),n=Gk(t,e,n,r,s,i),r=Qk(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pa(t,e,i)):(Xt&&r&&Lk(e),e.flags|=1,Dr(t,e,n,i),e.child)}function QM(t,e,n,r,i){if(ui(n)){var s=!0;Tw(e)}else s=!1;if(Hd(e,i),e.stateNode===null)Mv(t,e),x$(e,n,r),EI(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ns(l):(l=ui(n)?fu:kr.current,l=mh(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&HM(e,o,r,l),Xa=!1;var h=e.memoizedState;o.state=h,Iw(e,r,o,i),c=e.memoizedState,a!==r||h!==c||li.current||Xa?(typeof u=="function"&&(CI(e,n,u,r),c=e.memoizedState),(a=Xa||BM(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,c$(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:ps(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ns(c):(c=ui(n)?fu:kr.current,c=mh(e,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&HM(e,o,r,c),Xa=!1,h=e.memoizedState,o.state=h,Iw(e,r,o,i);var _=e.memoizedState;a!==d||h!==_||li.current||Xa?(typeof m=="function"&&(CI(e,n,m,r),_=e.memoizedState),(l=Xa||BM(e,n,l,r,h,_,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return II(t,e,n,r,s,i)}function II(t,e,n,r,i,s){M$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&MM(e,n,!1),pa(t,e,s);r=e.stateNode,XJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=yh(e,t.child,null,s),e.child=yh(e,null,a,s)):Dr(t,e,a,s),e.memoizedState=r.state,i&&MM(e,n,!0),e.child}function D$(t){var e=t.stateNode;e.pendingContext?OM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&OM(t,e.context,!1),zk(t,e.containerInfo)}function YM(t,e,n,r,i){return gh(),Vk(i),e.flags|=256,Dr(t,e,n,r),e.child}var AI={dehydrated:null,treeContext:null,retryLane:0};function kI(t){return{baseLanes:t,cachePool:null,transitions:null}}function L$(t,e,n){var r=e.pendingProps,i=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ht(Zt,i&1),t===null)return _I(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xT(o,r,0,null),t=su(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kI(n),e.memoizedState=AI,t):Jk(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return JJ(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ac(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ac(a,s):(s=su(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=AI,r}return s=t.child,t=s.sibling,r=Ac(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jk(t,e){return e=xT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wy(t,e,n,r){return r!==null&&Vk(r),yh(e,t.child,null,n),t=Jk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JJ(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_S(Error(ce(422))),Wy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xT({mode:"visible",children:r.children},i,0,null),s=su(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&yh(e,t.child,null,o),e.child.memoizedState=kI(o),e.memoizedState=AI,s);if(!(e.mode&1))return Wy(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ce(419)),r=_S(s,r,void 0),Wy(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=nr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fa(t,i),ks(r,t,i,-1))}return ix(),r=_S(Error(ce(421))),Wy(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dZ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ai=Ec(i.nextSibling),Ri=e,Xt=!0,_s=null,t!==null&&(Wi[Ki++]=Jo,Wi[Ki++]=Zo,Wi[Ki++]=pu,Jo=t.id,Zo=t.overflow,pu=e),e=Jk(e,r.children),e.flags|=4096,e)}function XM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),TI(t.return,e,n)}function TS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function F$(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dr(t,e,r.children,n),r=Zt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XM(t,n,e);else if(t.tag===19)XM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ht(Zt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Aw(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),TS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Aw(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}TS(e,!0,n,null,s);break;case"together":TS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=Ac(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ac(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZJ(t,e,n){switch(e.tag){case 3:D$(e),gh();break;case 5:l$(e);break;case 1:ui(e.type)&&Tw(e);break;case 4:zk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ht(Sw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ht(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?L$(t,e,n):(Ht(Zt,Zt.current&1),t=pa(t,e,n),t!==null?t.sibling:null);Ht(Zt,Zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return F$(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ht(Zt,Zt.current),r)break;return null;case 22:case 23:return e.lanes=0,O$(t,e,n)}return pa(t,e,n)}var V$,xI,j$,U$;V$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xI=function(){};j$=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hl(po.current);var s=null;switch(n){case"input":i=Xb(t,i),r=Xb(t,r),s=[];break;case"select":i=sn({},i,{value:void 0}),r=sn({},r,{value:void 0}),s=[];break;case"textarea":i=eI(t,i),r=eI(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ww)}nI(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(gm.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(gm.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&qt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};U$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jf(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eZ(t,e,n){var r=e.pendingProps;switch(Fk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return ui(e.type)&&_w(),wr(e),null;case 3:return r=e.stateNode,vh(),Qt(li),Qt(kr),Kk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_s!==null&&(FI(_s),_s=null))),xI(t,e),wr(e),null;case 5:Wk(e);var i=Hl(km.current);if(n=e.type,t!==null&&e.stateNode!=null)j$(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return wr(e),null}if(t=Hl(po.current),Hy(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[no]=e,r[Im]=s,t=(e.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(i=0;i<mp.length;i++)qt(mp[i],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":oM(r,s),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qt("invalid",r);break;case"textarea":cM(r,s),qt("invalid",r)}nI(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&By(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&By(r.textContent,a,t),i=["children",""+a]):gm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",r)}switch(n){case"input":My(r),aM(r,s,!0);break;case"textarea":My(r),lM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ww)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[no]=e,t[Im]=r,V$(t,e,!1,!1),e.stateNode=t;e:{switch(o=rI(n,r),n){case"dialog":qt("cancel",t),qt("close",t),i=r;break;case"iframe":case"object":case"embed":qt("load",t),i=r;break;case"video":case"audio":for(i=0;i<mp.length;i++)qt(mp[i],t);i=r;break;case"source":qt("error",t),i=r;break;case"img":case"image":case"link":qt("error",t),qt("load",t),i=r;break;case"details":qt("toggle",t),i=r;break;case"input":oM(t,r),i=Xb(t,r),qt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=sn({},r,{value:void 0}),qt("invalid",t);break;case"textarea":cM(t,r),i=eI(t,r),qt("invalid",t);break;default:i=r}nI(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?y4(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&m4(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ym(t,c):typeof c=="number"&&ym(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gm.hasOwnProperty(s)?c!=null&&s==="onScroll"&&qt("scroll",t):c!=null&&Ck(t,s,c,o))}switch(n){case"input":My(t),aM(t,r,!1);break;case"textarea":My(t),lM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Uc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?jd(t,!!r.multiple,s,!1):r.defaultValue!=null&&jd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ww)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(t&&e.stateNode!=null)U$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Hl(km.current),Hl(po.current),Hy(e)){if(r=e.stateNode,n=e.memoizedProps,r[no]=e,(s=r.nodeValue!==n)&&(t=Ri,t!==null))switch(t.tag){case 3:By(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&By(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[no]=e,e.stateNode=r}return wr(e),null;case 13:if(Qt(Zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&Ai!==null&&e.mode&1&&!(e.flags&128))i$(),gh(),e.flags|=98560,s=!1;else if(s=Hy(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[no]=e}else gh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),s=!1}else _s!==null&&(FI(_s),_s=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?jn===0&&(jn=3):ix())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return vh(),xI(t,e),t===null&&Sm(e.stateNode.containerInfo),wr(e),null;case 10:return $k(e.type._context),wr(e),null;case 17:return ui(e.type)&&_w(),wr(e),null;case 19:if(Qt(Zt),s=e.memoizedState,s===null)return wr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jf(s,!1);else{if(jn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Aw(t),o!==null){for(e.flags|=128,Jf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ht(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&vn()>_h&&(e.flags|=128,r=!0,Jf(s,!1),e.lanes=4194304)}else{if(!r)if(t=Aw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xt)return wr(e),null}else 2*vn()-s.renderingStartTime>_h&&n!==1073741824&&(e.flags|=128,r=!0,Jf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vn(),e.sibling=null,n=Zt.current,Ht(Zt,r?n&1|2:n&1),e):(wr(e),null);case 22:case 23:return rx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ei&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function tZ(t,e){switch(Fk(e),e.tag){case 1:return ui(e.type)&&_w(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vh(),Qt(li),Qt(kr),Kk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wk(e),null;case 13:if(Qt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));gh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qt(Zt),null;case 4:return vh(),null;case 10:return $k(e.type._context),null;case 22:case 23:return rx(),null;case 24:return null;default:return null}}var Ky=!1,Er=!1,nZ=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Pd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ln(t,e,r)}else n.current=null}function RI(t,e,n){try{n()}catch(r){ln(t,e,r)}}var JM=!1;function rZ(t,e){if(fI=gw,t=W4(),Dk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=o),h===s&&++u===r&&(c=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pI={focusedElem:t,selectionRange:n},gw=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,T=_.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:ps(e.type,v),T);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(b){ln(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return _=JM,JM=!1,_}function Mp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&RI(e,n,s)}i=i.next}while(i!==r)}}function AT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function PI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $$(t){var e=t.alternate;e!==null&&(t.alternate=null,$$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[no],delete e[Im],delete e[yI],delete e[jJ],delete e[UJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function B$(t){return t.tag===5||t.tag===3||t.tag===4}function ZM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function NI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ww));else if(r!==4&&(t=t.child,t!==null))for(NI(t,e,n),t=t.sibling;t!==null;)NI(t,e,n),t=t.sibling}function OI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(OI(t,e,n),t=t.sibling;t!==null;)OI(t,e,n),t=t.sibling}var sr=null,vs=!1;function Ba(t,e,n){for(n=n.child;n!==null;)H$(t,e,n),n=n.sibling}function H$(t,e,n){if(fo&&typeof fo.onCommitFiberUnmount=="function")try{fo.onCommitFiberUnmount(wT,n)}catch{}switch(n.tag){case 5:Er||Pd(n,e);case 6:var r=sr,i=vs;sr=null,Ba(t,e,n),sr=r,vs=i,sr!==null&&(vs?(t=sr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sr.removeChild(n.stateNode));break;case 18:sr!==null&&(vs?(t=sr,n=n.stateNode,t.nodeType===8?pS(t.parentNode,n):t.nodeType===1&&pS(t,n),Tm(t)):pS(sr,n.stateNode));break;case 4:r=sr,i=vs,sr=n.stateNode.containerInfo,vs=!0,Ba(t,e,n),sr=r,vs=i;break;case 0:case 11:case 14:case 15:if(!Er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&RI(n,e,o),i=i.next}while(i!==r)}Ba(t,e,n);break;case 1:if(!Er&&(Pd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ln(n,e,a)}Ba(t,e,n);break;case 21:Ba(t,e,n);break;case 22:n.mode&1?(Er=(r=Er)||n.memoizedState!==null,Ba(t,e,n),Er=r):Ba(t,e,n);break;default:Ba(t,e,n)}}function eD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nZ),e.forEach(function(r){var i=hZ.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:sr=a.stateNode,vs=!1;break e;case 3:sr=a.stateNode.containerInfo,vs=!0;break e;case 4:sr=a.stateNode.containerInfo,vs=!0;break e}a=a.return}if(sr===null)throw Error(ce(160));H$(s,o,i),sr=null,vs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){ln(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z$(e,t),e=e.sibling}function z$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ds(e,t),Ks(t),r&4){try{Mp(3,t,t.return),AT(3,t)}catch(v){ln(t,t.return,v)}try{Mp(5,t,t.return)}catch(v){ln(t,t.return,v)}}break;case 1:ds(e,t),Ks(t),r&512&&n!==null&&Pd(n,n.return);break;case 5:if(ds(e,t),Ks(t),r&512&&n!==null&&Pd(n,n.return),t.flags&32){var i=t.stateNode;try{ym(i,"")}catch(v){ln(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&h4(i,s),rI(a,o);var l=rI(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?y4(i,d):u==="dangerouslySetInnerHTML"?m4(i,d):u==="children"?ym(i,d):Ck(i,u,d,l)}switch(a){case"input":Jb(i,s);break;case"textarea":f4(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?jd(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?jd(i,!!s.multiple,s.defaultValue,!0):jd(i,!!s.multiple,s.multiple?[]:"",!1))}i[Im]=s}catch(v){ln(t,t.return,v)}}break;case 6:if(ds(e,t),Ks(t),r&4){if(t.stateNode===null)throw Error(ce(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ln(t,t.return,v)}}break;case 3:if(ds(e,t),Ks(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tm(e.containerInfo)}catch(v){ln(t,t.return,v)}break;case 4:ds(e,t),Ks(t);break;case 13:ds(e,t),Ks(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tx=vn())),r&4&&eD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Er=(l=Er)||u,ds(e,t),Er=l):ds(e,t),Ks(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(xe=t,u=t.child;u!==null;){for(d=xe=u;xe!==null;){switch(h=xe,m=h.child,h.tag){case 0:case 11:case 14:case 15:Mp(4,h,h.return);break;case 1:Pd(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){ln(r,n,v)}}break;case 5:Pd(h,h.return);break;case 22:if(h.memoizedState!==null){nD(d);continue}}m!==null?(m.return=h,xe=m):nD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=g4("display",o))}catch(v){ln(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){ln(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ds(e,t),Ks(t),r&4&&eD(t);break;case 21:break;default:ds(e,t),Ks(t)}}function Ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(B$(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ym(i,""),r.flags&=-33);var s=ZM(t);OI(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ZM(t);NI(t,a,o);break;default:throw Error(ce(161))}}catch(c){ln(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iZ(t,e,n){xe=t,W$(t)}function W$(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ky;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Er;a=Ky;var l=Er;if(Ky=o,(Er=c)&&!l)for(xe=i;xe!==null;)o=xe,c=o.child,o.tag===22&&o.memoizedState!==null?rD(i):c!==null?(c.return=o,xe=c):rD(i);for(;s!==null;)xe=s,W$(s),s=s.sibling;xe=i,Ky=a,Er=l}tD(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xe=s):tD(t)}}function tD(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Er||AT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ps(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jM(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Tm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Er||e.flags&512&&PI(e)}catch(h){ln(e,e.return,h)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function nD(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function rD(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{AT(4,e)}catch(c){ln(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ln(e,i,c)}}var s=e.return;try{PI(e)}catch(c){ln(e,s,c)}break;case 5:var o=e.return;try{PI(e)}catch(c){ln(e,o,c)}}}catch(c){ln(e,e.return,c)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var sZ=Math.ceil,Rw=xa.ReactCurrentDispatcher,Zk=xa.ReactCurrentOwner,Zi=xa.ReactCurrentBatchConfig,wt=0,nr=null,In=null,fr=0,Ei=0,Nd=al(0),jn=0,Nm=null,gu=0,kT=0,ex=0,Dp=null,ti=null,tx=0,_h=1/0,Ho=null,Pw=!1,MI=null,bc=null,qy=!1,pc=null,Nw=0,Lp=0,DI=null,Dv=-1,Lv=0;function Ur(){return wt&6?vn():Dv!==-1?Dv:Dv=vn()}function Ic(t){return t.mode&1?wt&2&&fr!==0?fr&-fr:BJ.transition!==null?(Lv===0&&(Lv=x4()),Lv):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:L4(t.type)),t):1}function ks(t,e,n,r){if(50<Lp)throw Lp=0,DI=null,Error(ce(185));Rg(t,n,r),(!(wt&2)||t!==nr)&&(t===nr&&(!(wt&2)&&(kT|=n),jn===4&&tc(t,fr)),di(t,r),n===1&&wt===0&&!(e.mode&1)&&(_h=vn()+500,ST&&cl()))}function di(t,e){var n=t.callbackNode;BX(t,e);var r=mw(t,t===nr?fr:0);if(r===0)n!==null&&hM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hM(n),e===1)t.tag===0?$J(iD.bind(null,t)):t$(iD.bind(null,t)),FJ(function(){!(wt&6)&&cl()}),n=null;else{switch(R4(r)){case 1:n=Ak;break;case 4:n=A4;break;case 16:n=pw;break;case 536870912:n=k4;break;default:n=pw}n=Z$(n,K$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K$(t,e){if(Dv=-1,Lv=0,wt&6)throw Error(ce(327));var n=t.callbackNode;if(zd()&&t.callbackNode!==n)return null;var r=mw(t,t===nr?fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ow(t,r);else{e=r;var i=wt;wt|=2;var s=G$();(nr!==t||fr!==e)&&(Ho=null,_h=vn()+500,iu(t,e));do try{cZ();break}catch(a){q$(t,a)}while(!0);Uk(),Rw.current=s,wt=i,In!==null?e=0:(nr=null,fr=0,e=jn)}if(e!==0){if(e===2&&(i=cI(t),i!==0&&(r=i,e=LI(t,i))),e===1)throw n=Nm,iu(t,0),tc(t,r),di(t,vn()),n;if(e===6)tc(t,r);else{if(i=t.current.alternate,!(r&30)&&!oZ(i)&&(e=Ow(t,r),e===2&&(s=cI(t),s!==0&&(r=s,e=LI(t,s))),e===1))throw n=Nm,iu(t,0),tc(t,r),di(t,vn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Il(t,ti,Ho);break;case 3:if(tc(t,r),(r&130023424)===r&&(e=tx+500-vn(),10<e)){if(mw(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gI(Il.bind(null,t,ti,Ho),e);break}Il(t,ti,Ho);break;case 4:if(tc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-As(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sZ(r/1960))-r,10<r){t.timeoutHandle=gI(Il.bind(null,t,ti,Ho),r);break}Il(t,ti,Ho);break;case 5:Il(t,ti,Ho);break;default:throw Error(ce(329))}}}return di(t,vn()),t.callbackNode===n?K$.bind(null,t):null}function LI(t,e){var n=Dp;return t.current.memoizedState.isDehydrated&&(iu(t,e).flags|=256),t=Ow(t,e),t!==2&&(e=ti,ti=n,e!==null&&FI(e)),t}function FI(t){ti===null?ti=t:ti.push.apply(ti,t)}function oZ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ps(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tc(t,e){for(e&=~ex,e&=~kT,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-As(e),r=1<<n;t[n]=-1,e&=~r}}function iD(t){if(wt&6)throw Error(ce(327));zd();var e=mw(t,0);if(!(e&1))return di(t,vn()),null;var n=Ow(t,e);if(t.tag!==0&&n===2){var r=cI(t);r!==0&&(e=r,n=LI(t,r))}if(n===1)throw n=Nm,iu(t,0),tc(t,e),di(t,vn()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Il(t,ti,Ho),di(t,vn()),null}function nx(t,e){var n=wt;wt|=1;try{return t(e)}finally{wt=n,wt===0&&(_h=vn()+500,ST&&cl())}}function yu(t){pc!==null&&pc.tag===0&&!(wt&6)&&zd();var e=wt;wt|=1;var n=Zi.transition,r=Rt;try{if(Zi.transition=null,Rt=1,t)return t()}finally{Rt=r,Zi.transition=n,wt=e,!(wt&6)&&cl()}}function rx(){Ei=Nd.current,Qt(Nd)}function iu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LJ(n)),In!==null)for(n=In.return;n!==null;){var r=n;switch(Fk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_w();break;case 3:vh(),Qt(li),Qt(kr),Kk();break;case 5:Wk(r);break;case 4:vh();break;case 13:Qt(Zt);break;case 19:Qt(Zt);break;case 10:$k(r.type._context);break;case 22:case 23:rx()}n=n.return}if(nr=t,In=t=Ac(t.current,null),fr=Ei=e,jn=0,Nm=null,ex=kT=gu=0,ti=Dp=null,Bl!==null){for(e=0;e<Bl.length;e++)if(n=Bl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bl=null}return t}function q$(t,e){do{var n=In;try{if(Uk(),Nv.current=xw,kw){for(var r=nn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kw=!1}if(mu=0,Jn=Fn=nn=null,Op=!1,xm=0,Zk.current=null,n===null||n.return===null){jn=1,Nm=e,In=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=fr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=WM(o);if(m!==null){m.flags&=-257,KM(m,o,a,s,e),m.mode&1&&zM(s,l,e),e=m,c=l;var _=e.updateQueue;if(_===null){var v=new Set;v.add(c),e.updateQueue=v}else _.add(c);break e}else{if(!(e&1)){zM(s,l,e),ix();break e}c=Error(ce(426))}}else if(Xt&&a.mode&1){var T=WM(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),KM(T,o,a,s,e),Vk(wh(c,a));break e}}s=c=wh(c,a),jn!==4&&(jn=2),Dp===null?Dp=[s]:Dp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=R$(s,c,e);VM(s,y);break e;case 1:a=c;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(bc===null||!bc.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=P$(s,a,e);VM(s,b);break e}}s=s.return}while(s!==null)}Y$(n)}catch(k){e=k,In===n&&n!==null&&(In=n=n.return);continue}break}while(!0)}function G$(){var t=Rw.current;return Rw.current=xw,t===null?xw:t}function ix(){(jn===0||jn===3||jn===2)&&(jn=4),nr===null||!(gu&268435455)&&!(kT&268435455)||tc(nr,fr)}function Ow(t,e){var n=wt;wt|=2;var r=G$();(nr!==t||fr!==e)&&(Ho=null,iu(t,e));do try{aZ();break}catch(i){q$(t,i)}while(!0);if(Uk(),wt=n,Rw.current=r,In!==null)throw Error(ce(261));return nr=null,fr=0,jn}function aZ(){for(;In!==null;)Q$(In)}function cZ(){for(;In!==null&&!OX();)Q$(In)}function Q$(t){var e=J$(t.alternate,t,Ei);t.memoizedProps=t.pendingProps,e===null?Y$(t):In=e,Zk.current=null}function Y$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tZ(n,e),n!==null){n.flags&=32767,In=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jn=6,In=null;return}}else if(n=eZ(n,e,Ei),n!==null){In=n;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);jn===0&&(jn=5)}function Il(t,e,n){var r=Rt,i=Zi.transition;try{Zi.transition=null,Rt=1,lZ(t,e,n,r)}finally{Zi.transition=i,Rt=r}return null}function lZ(t,e,n,r){do zd();while(pc!==null);if(wt&6)throw Error(ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HX(t,s),t===nr&&(In=nr=null,fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qy||(qy=!0,Z$(pw,function(){return zd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zi.transition,Zi.transition=null;var o=Rt;Rt=1;var a=wt;wt|=4,Zk.current=null,rZ(t,n),z$(n,t),xJ(pI),gw=!!fI,pI=fI=null,t.current=n,iZ(n),MX(),wt=a,Rt=o,Zi.transition=s}else t.current=n;if(qy&&(qy=!1,pc=t,Nw=i),s=t.pendingLanes,s===0&&(bc=null),FX(n.stateNode),di(t,vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pw)throw Pw=!1,t=MI,MI=null,t;return Nw&1&&t.tag!==0&&zd(),s=t.pendingLanes,s&1?t===DI?Lp++:(Lp=0,DI=t):Lp=0,cl(),null}function zd(){if(pc!==null){var t=R4(Nw),e=Zi.transition,n=Rt;try{if(Zi.transition=null,Rt=16>t?16:t,pc===null)var r=!1;else{if(t=pc,pc=null,Nw=0,wt&6)throw Error(ce(331));var i=wt;for(wt|=4,xe=t.current;xe!==null;){var s=xe,o=s.child;if(xe.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(xe=l;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Mp(8,u,s)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var h=u.sibling,m=u.return;if($$(u),u===l){xe=null;break}if(h!==null){h.return=m,xe=h;break}xe=m}}}var _=s.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var T=v.sibling;v.sibling=null,v=T}while(v!==null)}}xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xe=o;else e:for(;xe!==null;){if(s=xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Mp(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xe=y;break e}xe=s.return}}var w=t.current;for(xe=w;xe!==null;){o=xe;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,xe=C;else e:for(o=w;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:AT(9,a)}}catch(k){ln(a,a.return,k)}if(a===o){xe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,xe=b;break e}xe=a.return}}if(wt=i,cl(),fo&&typeof fo.onPostCommitFiberRoot=="function")try{fo.onPostCommitFiberRoot(wT,t)}catch{}r=!0}return r}finally{Rt=n,Zi.transition=e}}return!1}function sD(t,e,n){e=wh(n,e),e=R$(t,e,1),t=Sc(t,e,1),e=Ur(),t!==null&&(Rg(t,1,e),di(t,e))}function ln(t,e,n){if(t.tag===3)sD(t,t,n);else for(;e!==null;){if(e.tag===3){sD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bc===null||!bc.has(r))){t=wh(n,t),t=P$(e,t,1),e=Sc(e,t,1),t=Ur(),e!==null&&(Rg(e,1,t),di(e,t));break}}e=e.return}}function uZ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ur(),t.pingedLanes|=t.suspendedLanes&n,nr===t&&(fr&n)===n&&(jn===4||jn===3&&(fr&130023424)===fr&&500>vn()-tx?iu(t,0):ex|=n),di(t,e)}function X$(t,e){e===0&&(t.mode&1?(e=Fy,Fy<<=1,!(Fy&130023424)&&(Fy=4194304)):e=1);var n=Ur();t=fa(t,e),t!==null&&(Rg(t,e,n),di(t,n))}function dZ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X$(t,n)}function hZ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),X$(t,n)}var J$;J$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||li.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,ZJ(t,e,n);ii=!!(t.flags&131072)}else ii=!1,Xt&&e.flags&1048576&&n$(e,Ew,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mv(t,e),t=e.pendingProps;var i=mh(e,kr.current);Hd(e,n),i=Gk(null,e,r,t,i,n);var s=Qk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ui(r)?(s=!0,Tw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hk(e),i.updater=IT,e.stateNode=i,i._reactInternals=e,EI(e,r,t,n),e=II(null,e,r,!0,s,n)):(e.tag=0,Xt&&s&&Lk(e),Dr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mv(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=pZ(r),t=ps(r,t),i){case 0:e=bI(null,e,r,t,n);break e;case 1:e=QM(null,e,r,t,n);break e;case 11:e=qM(null,e,r,t,n);break e;case 14:e=GM(null,e,r,ps(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),bI(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),QM(t,e,r,i,n);case 3:e:{if(D$(e),t===null)throw Error(ce(387));r=e.pendingProps,s=e.memoizedState,i=s.element,c$(t,e),Iw(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wh(Error(ce(423)),e),e=YM(t,e,r,n,i);break e}else if(r!==i){i=wh(Error(ce(424)),e),e=YM(t,e,r,n,i);break e}else for(Ai=Ec(e.stateNode.containerInfo.firstChild),Ri=e,Xt=!0,_s=null,n=o$(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gh(),r===i){e=pa(t,e,n);break e}Dr(t,e,r,n)}e=e.child}return e;case 5:return l$(e),t===null&&_I(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mI(r,i)?o=null:s!==null&&mI(r,s)&&(e.flags|=32),M$(t,e),Dr(t,e,o,n),e.child;case 6:return t===null&&_I(e),null;case 13:return L$(t,e,n);case 4:return zk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yh(e,null,r,n):Dr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),qM(t,e,r,i,n);case 7:return Dr(t,e,e.pendingProps,n),e.child;case 8:return Dr(t,e,e.pendingProps.children,n),e.child;case 12:return Dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ht(Sw,r._currentValue),r._currentValue=o,s!==null)if(Ps(s.value,o)){if(s.children===i.children&&!li.current){e=pa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=aa(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),TI(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),TI(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hd(e,n),i=ns(i),r=r(i),e.flags|=1,Dr(t,e,r,n),e.child;case 14:return r=e.type,i=ps(r,e.pendingProps),i=ps(r.type,i),GM(t,e,r,i,n);case 15:return N$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ps(r,i),Mv(t,e),e.tag=1,ui(r)?(t=!0,Tw(e)):t=!1,Hd(e,n),x$(e,r,i),EI(e,r,i,n),II(null,e,r,!0,t,n);case 19:return F$(t,e,n);case 22:return O$(t,e,n)}throw Error(ce(156,e.tag))};function Z$(t,e){return I4(t,e)}function fZ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(t,e,n,r){return new fZ(t,e,n,r)}function sx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pZ(t){if(typeof t=="function")return sx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sk)return 11;if(t===bk)return 14}return 2}function Ac(t,e){var n=t.alternate;return n===null?(n=Qi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fv(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cd:return su(n.children,i,s,e);case Ek:o=8,i|=8;break;case qb:return t=Qi(12,n,e,i|2),t.elementType=qb,t.lanes=s,t;case Gb:return t=Qi(13,n,e,i),t.elementType=Gb,t.lanes=s,t;case Qb:return t=Qi(19,n,e,i),t.elementType=Qb,t.lanes=s,t;case l4:return xT(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a4:o=10;break e;case c4:o=9;break e;case Sk:o=11;break e;case bk:o=14;break e;case Ya:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Qi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function su(t,e,n,r){return t=Qi(7,t,r,e),t.lanes=n,t}function xT(t,e,n,r){return t=Qi(22,t,r,e),t.elementType=l4,t.lanes=n,t.stateNode={isHidden:!1},t}function CS(t,e,n){return t=Qi(6,t,null,e),t.lanes=n,t}function ES(t,e,n){return e=Qi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mZ(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rS(0),this.expirationTimes=rS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ox(t,e,n,r,i,s,o,a,c){return t=new mZ(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hk(s),t}function gZ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Td,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eB(t){if(!t)return $c;t=t._reactInternals;e:{if($u(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ui(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(ui(n))return e$(t,n,e)}return e}function tB(t,e,n,r,i,s,o,a,c){return t=ox(n,r,!0,t,i,s,o,a,c),t.context=eB(null),n=t.current,r=Ur(),i=Ic(n),s=aa(r,i),s.callback=e??null,Sc(n,s,i),t.current.lanes=i,Rg(t,i,r),di(t,r),t}function RT(t,e,n,r){var i=e.current,s=Ur(),o=Ic(i);return n=eB(n),e.context===null?e.context=n:e.pendingContext=n,e=aa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sc(i,e,o),t!==null&&(ks(t,i,o,s),Pv(t,i,o)),o}function Mw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ax(t,e){oD(t,e),(t=t.alternate)&&oD(t,e)}function yZ(){return null}var nB=typeof reportError=="function"?reportError:function(t){console.error(t)};function cx(t){this._internalRoot=t}PT.prototype.render=cx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));RT(t,e,null,null)};PT.prototype.unmount=cx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yu(function(){RT(null,t,null,null)}),e[ha]=null}};function PT(t){this._internalRoot=t}PT.prototype.unstable_scheduleHydration=function(t){if(t){var e=O4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ec.length&&e!==0&&e<ec[n].priority;n++);ec.splice(n,0,t),n===0&&D4(t)}};function lx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function NT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aD(){}function vZ(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Mw(o);s.call(l)}}var o=tB(e,r,t,0,null,!1,!1,"",aD);return t._reactRootContainer=o,t[ha]=o.current,Sm(t.nodeType===8?t.parentNode:t),yu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Mw(c);a.call(l)}}var c=ox(t,0,!1,null,null,!1,!1,"",aD);return t._reactRootContainer=c,t[ha]=c.current,Sm(t.nodeType===8?t.parentNode:t),yu(function(){RT(e,c,n,r)}),c}function OT(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Mw(o);a.call(c)}}RT(e,o,t,i)}else o=vZ(n,e,t,i,r);return Mw(o)}P4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pp(e.pendingLanes);n!==0&&(kk(e,n|1),di(e,vn()),!(wt&6)&&(_h=vn()+500,cl()))}break;case 13:yu(function(){var r=fa(t,1);if(r!==null){var i=Ur();ks(r,t,1,i)}}),ax(t,1)}};xk=function(t){if(t.tag===13){var e=fa(t,134217728);if(e!==null){var n=Ur();ks(e,t,134217728,n)}ax(t,134217728)}};N4=function(t){if(t.tag===13){var e=Ic(t),n=fa(t,e);if(n!==null){var r=Ur();ks(n,t,e,r)}ax(t,e)}};O4=function(){return Rt};M4=function(t,e){var n=Rt;try{return Rt=t,e()}finally{Rt=n}};sI=function(t,e,n){switch(e){case"input":if(Jb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ET(r);if(!i)throw Error(ce(90));d4(r),Jb(r,i)}}}break;case"textarea":f4(t,n);break;case"select":e=n.value,e!=null&&jd(t,!!n.multiple,e,!1)}};_4=nx;T4=yu;var wZ={usingClientEntryPoint:!1,Events:[Ng,Id,ET,v4,w4,nx]},Zf={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_Z={bundleType:Zf.bundleType,version:Zf.version,rendererPackageName:Zf.rendererPackageName,rendererConfig:Zf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S4(t),t===null?null:t.stateNode},findFiberByHostInstance:Zf.findFiberByHostInstance||yZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gy.isDisabled&&Gy.supportsFiber)try{wT=Gy.inject(_Z),fo=Gy}catch{}}Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wZ;Fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lx(e))throw Error(ce(200));return gZ(t,e,null,n)};Fi.createRoot=function(t,e){if(!lx(t))throw Error(ce(299));var n=!1,r="",i=nB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ox(t,1,!1,null,null,n,!1,r,i),t[ha]=e.current,Sm(t.nodeType===8?t.parentNode:t),new cx(e)};Fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=S4(e),t=t===null?null:t.stateNode,t};Fi.flushSync=function(t){return yu(t)};Fi.hydrate=function(t,e,n){if(!NT(e))throw Error(ce(200));return OT(null,t,e,!0,n)};Fi.hydrateRoot=function(t,e,n){if(!lx(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nB;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tB(e,null,t,1,n??null,i,!1,s,o),t[ha]=e.current,Sm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new PT(e)};Fi.render=function(t,e,n){if(!NT(e))throw Error(ce(200));return OT(null,t,e,!1,n)};Fi.unmountComponentAtNode=function(t){if(!NT(t))throw Error(ce(40));return t._reactRootContainer?(yu(function(){OT(null,null,t,!1,function(){t._reactRootContainer=null,t[ha]=null})}),!0):!1};Fi.unstable_batchedUpdates=nx;Fi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!NT(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return OT(t,e,n,!1,r)};Fi.version="18.3.1-next-f1338f8080-20240426";function rB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rB)}catch(t){console.error(t)}}rB(),r4.exports=Fi;var Mg=r4.exports;const iB=WU(Mg);var ux,cD=Mg;ux=cD.createRoot,cD.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Om.apply(this,arguments)}var mc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mc||(mc={}));const lD="popstate";function TZ(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return VI("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Dw(i)}return EZ(e,n,null,t)}function rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sB(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CZ(){return Math.random().toString(36).substr(2,8)}function uD(t,e){return{usr:t.state,key:t.key,idx:e}}function VI(t,e,n,r){return n===void 0&&(n=null),Om({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nf(e):e,{state:n,key:e&&e.key||r||CZ()})}function Dw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function EZ(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=mc.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Om({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=mc.Pop;let T=u(),y=T==null?null:T-l;l=T,c&&c({action:a,location:v.location,delta:y})}function h(T,y){a=mc.Push;let w=VI(v.location,T,y);l=u()+1;let C=uD(w,l),b=v.createHref(w);try{o.pushState(C,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(b)}s&&c&&c({action:a,location:v.location,delta:1})}function m(T,y){a=mc.Replace;let w=VI(v.location,T,y);l=u();let C=uD(w,l),b=v.createHref(w);o.replaceState(C,"",b),s&&c&&c({action:a,location:v.location,delta:0})}function _(T){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof T=="string"?T:Dw(T);return w=w.replace(/ $/,"%20"),rn(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let v={get action(){return a},get location(){return t(i,o)},listen(T){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(lD,d),c=T,()=>{i.removeEventListener(lD,d),c=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let y=_(T);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(T){return o.go(T)}};return v}var dD;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dD||(dD={}));function SZ(t,e,n){return n===void 0&&(n="/"),bZ(t,e,n)}function bZ(t,e,n,r){let i=typeof e=="string"?nf(e):e,s=Th(i.pathname||"/",n);if(s==null)return null;let o=oB(t);IZ(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=FZ(s);a=DZ(o[c],l)}return a}function oB(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(rn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=kc([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(rn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),oB(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:OZ(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of aB(s.path))i(s,o,c)}),e}function aB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=aB(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function IZ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MZ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const AZ=/^:[\w-]+$/,kZ=3,xZ=2,RZ=1,PZ=10,NZ=-2,hD=t=>t==="*";function OZ(t,e){let n=t.split("/"),r=n.length;return n.some(hD)&&(r+=NZ),e&&(r+=xZ),n.filter(i=>!hD(i)).reduce((i,s)=>i+(AZ.test(s)?kZ:s===""?RZ:PZ),r)}function MZ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function DZ(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=jI({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:kc([s,d.pathname]),pathnameBase:$Z(kc([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=kc([s,d.pathnameBase]))}return o}function jI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LZ(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?l[h]=void 0:l[h]=(_||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function LZ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),sB(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sB(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Th(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function VZ(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?nf(t):t;return{pathname:n?n.startsWith("/")?n:jZ(n,e):e,search:BZ(r),hash:HZ(i)}}function jZ(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function SS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UZ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dx(t,e){let n=UZ(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=nf(t):(i=Om({},t),rn(!i.pathname||!i.pathname.includes("?"),SS("?","pathname","search",i)),rn(!i.pathname||!i.pathname.includes("#"),SS("#","pathname","hash",i)),rn(!i.search||!i.search.includes("#"),SS("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=VZ(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const kc=t=>t.join("/").replace(/\/\/+/g,"/"),$Z=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zZ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cB=["post","put","patch","delete"];new Set(cB);const WZ=["get",...cB];new Set(WZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mm.apply(this,arguments)}const MT=g.createContext(null),lB=g.createContext(null),Ra=g.createContext(null),DT=g.createContext(null),ll=g.createContext({outlet:null,matches:[],isDataRoute:!1}),uB=g.createContext(null);function KZ(t,e){let{relative:n}=e===void 0?{}:e;rf()||rn(!1);let{basename:r,navigator:i}=g.useContext(Ra),{hash:s,pathname:o,search:a}=LT(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:kc([r,o])),i.createHref({pathname:c,search:a,hash:s})}function rf(){return g.useContext(DT)!=null}function No(){return rf()||rn(!1),g.useContext(DT).location}function dB(t){g.useContext(Ra).static||g.useLayoutEffect(t)}function Bu(){let{isDataRoute:t}=g.useContext(ll);return t?see():qZ()}function qZ(){rf()||rn(!1);let t=g.useContext(MT),{basename:e,future:n,navigator:r}=g.useContext(Ra),{matches:i}=g.useContext(ll),{pathname:s}=No(),o=JSON.stringify(dx(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return dB(()=>{a.current=!0}),g.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=hx(l,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:kc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function LT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(Ra),{matches:i}=g.useContext(ll),{pathname:s}=No(),o=JSON.stringify(dx(i,r.v7_relativeSplatPath));return g.useMemo(()=>hx(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function GZ(t,e){return QZ(t,e)}function QZ(t,e,n,r){rf()||rn(!1);let{navigator:i}=g.useContext(Ra),{matches:s}=g.useContext(ll),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=No(),u;if(e){var d;let T=typeof e=="string"?nf(e):e;c==="/"||(d=T.pathname)!=null&&d.startsWith(c)||rn(!1),u=T}else u=l;let h=u.pathname||"/",m=h;if(c!=="/"){let T=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=SZ(t,{pathname:m}),v=eee(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:kc([c,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:kc([c,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&v?g.createElement(DT.Provider,{value:{location:Mm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mc.Pop}},v):v}function YZ(){let t=iee(),e=zZ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const XZ=g.createElement(YZ,null);class JZ extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(ll.Provider,{value:this.props.routeContext},g.createElement(uB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZZ(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(MT);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ll.Provider,{value:e},r)}function eee(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||rn(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:m}=n,_=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let m,_=!1,v=null,T=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||XZ,c&&(l<0&&h===0?(oee("route-fallback"),_=!0,T=null):l===h&&(_=!0,T=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),w=()=>{let C;return m?C=v:_?C=T:d.route.Component?C=g.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,g.createElement(ZZ,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(JZ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var hB=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hB||{}),fB=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fB||{});function tee(t){let e=g.useContext(MT);return e||rn(!1),e}function nee(t){let e=g.useContext(lB);return e||rn(!1),e}function ree(t){let e=g.useContext(ll);return e||rn(!1),e}function pB(t){let e=ree(),n=e.matches[e.matches.length-1];return n.route.id||rn(!1),n.route.id}function iee(){var t;let e=g.useContext(uB),n=nee(),r=pB();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function see(){let{router:t}=tee(hB.UseNavigateStable),e=pB(fB.UseNavigateStable),n=g.useRef(!1);return dB(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Mm({fromRouteId:e},s)))},[t,e])}const fD={};function oee(t,e,n){fD[t]||(fD[t]=!0)}function aee(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cee(t){let{to:e,replace:n,state:r,relative:i}=t;rf()||rn(!1);let{future:s,static:o}=g.useContext(Ra),{matches:a}=g.useContext(ll),{pathname:c}=No(),l=Bu(),u=hx(e,dx(a,s.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return g.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:i}),[l,d,i,n,r]),null}function qn(t){rn(!1)}function lee(t){let{basename:e="/",children:n=null,location:r,navigationType:i=mc.Pop,navigator:s,static:o=!1,future:a}=t;rf()&&rn(!1);let c=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:c,navigator:s,static:o,future:Mm({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=nf(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:_="default"}=r,v=g.useMemo(()=>{let T=Th(u,c);return T==null?null:{location:{pathname:T,search:d,hash:h,state:m,key:_},navigationType:i}},[c,u,d,h,m,_,i]);return v==null?null:g.createElement(Ra.Provider,{value:l},g.createElement(DT.Provider,{children:n,value:v}))}function pD(t){let{children:e,location:n}=t;return GZ(UI(e),n)}new Promise(()=>{});function UI(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let s=[...e,i];if(r.type===g.Fragment){n.push.apply(n,UI(r.props.children,s));return}r.type!==qn&&rn(!1),!r.props.index||!r.props.children||rn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=UI(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lw.apply(this,arguments)}function mB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uee(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dee(t,e){return t.button===0&&(!e||e==="_self")&&!uee(t)}const hee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fee=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pee="6";try{window.__reactRouterVersion=pee}catch{}const mee=g.createContext({isTransitioning:!1}),gee="startTransition",mD=wk[gee];function yee(t){let{basename:e,children:n,future:r,window:i}=t,s=g.useRef();s.current==null&&(s.current=TZ({window:i,v5Compat:!0}));let o=s.current,[a,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=g.useCallback(d=>{l&&mD?mD(()=>c(d)):c(d)},[c,l]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>aee(r),[r]),g.createElement(lee,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const vee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dm=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d}=e,h=mB(e,hee),{basename:m}=g.useContext(Ra),_,v=!1;if(typeof l=="string"&&wee.test(l)&&(_=l,vee))try{let C=new URL(window.location.href),b=l.startsWith("//")?new URL(C.protocol+l):new URL(l),k=Th(b.pathname,m);b.origin===C.origin&&k!=null?l=k+b.search+b.hash:v=!0}catch{}let T=KZ(l,{relative:i}),y=Tee(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function w(C){r&&r(C),C.defaultPrevented||y(C)}return g.createElement("a",Lw({},h,{href:_||T,onClick:v||s?r:w,ref:n,target:c}))}),gD=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:c,viewTransition:l,children:u}=e,d=mB(e,fee),h=LT(c,{relative:d.relative}),m=No(),_=g.useContext(lB),{navigator:v,basename:T}=g.useContext(Ra),y=_!=null&&Cee(h)&&l===!0,w=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,C=m.pathname,b=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;i||(C=C.toLowerCase(),b=b?b.toLowerCase():null,w=w.toLowerCase()),b&&T&&(b=Th(b,T)||b);const k=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let D=C===w||!o&&C.startsWith(w)&&C.charAt(k)==="/",A=b!=null&&(b===w||!o&&b.startsWith(w)&&b.charAt(w.length)==="/"),S={isActive:D,isPending:A,isTransitioning:y},x=D?r:void 0,N;typeof s=="function"?N=s(S):N=[s,D?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(S):a;return g.createElement(Dm,Lw({},d,{"aria-current":x,className:N,ref:n,style:R,to:c,viewTransition:l}),typeof u=="function"?u(S):u)});var $I;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($I||($I={}));var yD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yD||(yD={}));function _ee(t){let e=g.useContext(MT);return e||rn(!1),e}function Tee(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=Bu(),l=No(),u=LT(t,{relative:o});return g.useCallback(d=>{if(dee(d,n)){d.preventDefault();let h=r!==void 0?r:Dw(l)===Dw(u);c(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[l,c,u,r,i,n,t,s,o,a])}function Cee(t,e){e===void 0&&(e={});let n=g.useContext(mee);n==null&&rn(!1);let{basename:r}=_ee($I.useViewTransitionState),i=LT(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Th(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Th(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jI(i.pathname,o)!=null||jI(i.pathname,s)!=null}/*! @azure/msal-common v15.13.0 2025-09-24 */const ie={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},gc={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},zl={GET:"GET",POST:"POST"},sf=[ie.OPENID_SCOPE,ie.PROFILE_SCOPE,ie.OFFLINE_ACCESS_SCOPE],vD=[...sf,ie.EMAIL_SCOPE],Lr={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},wD={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},xc={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Qy={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},lr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},fx={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},FT={QUERY:"query",FRAGMENT:"fragment"},Eee={QUERY:"query"},gB={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Yy={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Lm={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ar={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},px="appmetadata",See="client_info",Fw="1",Vw={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ti={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},ir={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},xt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Fp={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},_D={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},id={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},bS={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Al={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},bee={Pop:"pop"},yB=300;/*! @azure/msal-common v15.13.0 2025-09-24 */const jw="unexpected_error",Iee="post_request_failed";/*! @azure/msal-common v15.13.0 2025-09-24 */const TD={[jw]:"Unexpected error in authentication.",[Iee]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Ot extends Error{constructor(e,n,r){const i=n?`${e}: ${n}`:e;super(i),Object.setPrototypeOf(this,Ot.prototype),this.errorCode=e||ie.EMPTY_STRING,this.errorMessage=n||ie.EMPTY_STRING,this.subError=r||ie.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function BI(t,e){return new Ot(t,e?`${TD[t]} ${e}`:TD[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */const mx="client_info_decoding_error",vB="client_info_empty_error",gx="token_parsing_error",wB="null_or_empty_token",zo="endpoints_resolution_error",_B="network_error",TB="openid_config_error",CB="hash_not_deserialized",Ch="invalid_state",EB="state_mismatch",HI="state_not_found",SB="nonce_mismatch",yx="auth_time_not_found",bB="max_age_transpired",Aee="multiple_matching_tokens",kee="multiple_matching_accounts",IB="multiple_matching_appMetadata",AB="request_cannot_be_made",kB="cannot_remove_empty_scope",xB="cannot_append_scopeset",zI="empty_input_scopeset",xee="device_code_polling_cancelled",Ree="device_code_expired",Pee="device_code_unknown_error",vx="no_account_in_silent_request",RB="invalid_cache_record",wx="invalid_cache_environment",WI="no_account_found",KI="no_crypto_object",Nee="unexpected_credential_type",Oee="invalid_assertion",Mee="invalid_client_credential",Rc="token_refresh_required",Dee="user_timeout_reached",PB="token_claims_cnf_required_for_signedjwt",NB="authorization_code_missing_from_server_response",OB="binding_key_not_removed",MB="end_session_endpoint_not_supported",_x="key_id_missing",Lee="no_network_connectivity",Fee="user_canceled",Vee="missing_tenant_id_error",it="method_not_implemented",jee="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.13.0 2025-09-24 */const CD={[mx]:"The client info could not be parsed/decoded correctly",[vB]:"The client info was empty",[gx]:"Token cannot be parsed",[wB]:"The token is null or empty",[zo]:"Endpoints cannot be resolved",[_B]:"Network request failed",[TB]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[CB]:"The hash parameters could not be deserialized",[Ch]:"State was not the expected format",[EB]:"State mismatch error",[HI]:"State not found",[SB]:"Nonce mismatch error",[yx]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[bB]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Aee]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[kee]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[IB]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[AB]:"Token request cannot be made without authorization code or refresh token.",[kB]:"Cannot remove null or empty scope from ScopeSet",[xB]:"Cannot append ScopeSet",[zI]:"Empty input ScopeSet cannot be processed",[xee]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Ree]:"Device code is expired.",[Pee]:"Device code stopped polling for unknown reasons.",[vx]:"Please pass an account object, silent flow is not supported without account information",[RB]:"Cache record object was null or undefined.",[wx]:"Invalid environment when attempting to create cache entry",[WI]:"No account found in cache for given key.",[KI]:"No crypto object detected.",[Nee]:"Unexpected credential type.",[Oee]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Mee]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Rc]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Dee]:"User defined timeout for device code polling reached",[PB]:"Cannot generate a POP jwt if the token_claims are not populated",[NB]:"Server response does not contain an authorization code to proceed",[OB]:"Could not remove the credential's binding key from storage.",[MB]:"The provided authority does not support logout",[_x]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Lee]:"No network connectivity. Check your internet connection.",[Fee]:"User cancelled the flow.",[Vee]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[it]:"This method has not been implemented",[jee]:"The nested app auth bridge is disabled"};class Tx extends Ot{constructor(e,n){super(e,n?`${CD[e]}: ${n}`:CD[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Tx.prototype)}}function ae(t,e){return new Tx(t,e)}/*! @azure/msal-common v15.13.0 2025-09-24 */const Uw={createNewGuid:()=>{throw ae(it)},base64Decode:()=>{throw ae(it)},base64Encode:()=>{throw ae(it)},base64UrlEncode:()=>{throw ae(it)},encodeKid:()=>{throw ae(it)},async getPublicKeyThumbprint(){throw ae(it)},async removeTokenBindingKey(){throw ae(it)},async clearKeystore(){throw ae(it)},async signJwt(){throw ae(it)},async hashString(){throw ae(it)}};/*! @azure/msal-common v15.13.0 2025-09-24 */var Yt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Yt||(Yt={}));let Dg=class qI{constructor(e,n,r){this.level=Yt.Info;const i=()=>{},s=e||qI.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:Yt.Info,this.correlationId=s.correlationId||ie.EMPTY_STRING,this.packageName=n||ie.EMPTY_STRING,this.packageVersion=r||ie.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Yt.Info}}clone(e,n,r){return new qI({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const s=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Yt[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,s,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:Yt.Error,containsPii:!1,correlationId:n||ie.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:Yt.Error,containsPii:!0,correlationId:n||ie.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:Yt.Warning,containsPii:!1,correlationId:n||ie.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:Yt.Warning,containsPii:!0,correlationId:n||ie.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:Yt.Info,containsPii:!1,correlationId:n||ie.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:Yt.Info,containsPii:!0,correlationId:n||ie.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:Yt.Verbose,containsPii:!1,correlationId:n||ie.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:Yt.Verbose,containsPii:!0,correlationId:n||ie.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:Yt.Trace,containsPii:!1,correlationId:n||ie.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:Yt.Trace,containsPii:!0,correlationId:n||ie.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.13.0 2025-09-24 */const DB="@azure/msal-common",Cx="15.13.0";/*! @azure/msal-common v15.13.0 2025-09-24 */const Ex={None:"none"};/*! @azure/msal-common v15.13.0 2025-09-24 */const LB="redirect_uri_empty",Uee="claims_request_parsing_error",FB="authority_uri_insecure",gp="url_parse_error",VB="empty_url_error",jB="empty_input_scopes_error",Sx="invalid_claims",UB="token_request_empty",$B="logout_request_empty",$ee="invalid_code_challenge_method",bx="pkce_params_missing",Ix="invalid_cloud_discovery_metadata",BB="invalid_authority_metadata",HB="untrusted_authority",VT="missing_ssh_jwk",zB="missing_ssh_kid",Bee="missing_nonce_authentication_header",Hee="invalid_authentication_header",WB="cannot_set_OIDCOptions",KB="cannot_allow_platform_broker",qB="authority_mismatch",GB="invalid_request_method_for_EAR",QB="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.0 2025-09-24 */const zee={[LB]:"A redirect URI is required for all calls, and none has been set.",[Uee]:"Could not parse the given claims request object.",[FB]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[gp]:"URL could not be parsed into appropriate segments.",[VB]:"URL was empty or null.",[jB]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Sx]:"Given claims parameter must be a stringified JSON object.",[UB]:"Token request was empty and not found in cache.",[$B]:"The logout request was null or undefined.",[$ee]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[bx]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Ix]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[BB]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[HB]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[VT]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[zB]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Bee]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Hee]:"Invalid authentication header provided",[WB]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[KB]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[qB]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[QB]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[GB]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class Ax extends Ot{constructor(e){super(e,zee[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Ax.prototype)}}function Lt(t){return new Ax(t)}/*! @azure/msal-common v15.13.0 2025-09-24 */class Pi{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return r.forEach(s=>{if(s.trim()){const[o,a]=s.split(/=(.+)/g,2);o&&a&&(n[i(o)]=i(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Un{constructor(e){const n=e?Pi.trimArrayEntries([...e]):[],r=n?Pi.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw Lt(jB);this.scopes=new Set,r.forEach(i=>this.scopes.add(i))}static fromString(e){const r=(e||ie.EMPTY_STRING).split(" ");return new Un(r)}static createSearchScopes(e){const n=e&&e.length>0?e:[...sf],r=new Un(n);return r.containsOnlyOIDCScopes()?r.removeScope(ie.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Un(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return vD.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw ae(xB)}}removeScope(e){if(!e)throw ae(kB);this.scopes.delete(e.trim())}removeOIDCScopes(){vD.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ae(zI);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw ae(zI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),i=this.getScopeCount();return n.size<i+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):ie.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.0 2025-09-24 */function ED(t,e){return!!t&&!!e&&t===e.split(".")[1]}function kx(t,e,n,r){if(r){const{oid:i,sub:s,tid:o,name:a,tfp:c,acr:l,preferred_username:u,upn:d,login_hint:h}=r,m=o||c||l||"";return{tenantId:m,localAccountId:i||s||"",name:a,username:u||d||"",loginHint:h,isHomeTenant:ED(m,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:ED(n,t)}}function xx(t,e,n,r){let i=t;if(e){const{isHomeTenant:s,...o}=e;i={...t,...o}}if(n){const{isHomeTenant:s,...o}=kx(t.homeAccountId,t.localAccountId,t.tenantId,n);return i={...i,...o,idTokenClaims:n,idToken:r},i}return i}/*! @azure/msal-common v15.13.0 2025-09-24 */function of(t,e){const n=Wee(t);try{const r=e(n);return JSON.parse(r)}catch{throw ae(gx)}}function Wee(t){if(!t)throw ae(wB);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw ae(gx);return n[2]}function YB(t,e){if(e===0||Date.now()-3e5>t+e)throw ae(bB)}/*! @azure/msal-common v15.13.0 2025-09-24 */function SD(t){if(!t)return t;let e=t.toLowerCase();return Pi.endsWith(e,"?")?e=e.slice(0,-1):Pi.endsWith(e,"?/")&&(e=e.slice(0,-2)),Pi.endsWith(e,"/")||(e+="/"),e}function XB(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function $w(t){if(!t||t.indexOf("=")<0)return null;try{const e=XB(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw ae(CB)}return null}function Fm(t,e=!0,n){const r=new Array;return t.forEach((i,s)=>{!e&&n&&s in n?r.push(`${s}=${i}`):r.push(`${s}=${encodeURIComponent(i)}`)}),r.join("&")}function bD(t){if(!t)return t;const e=t.split("#")[0];try{const n=new URL(e),r=n.origin+n.pathname+n.search;return SD(r)}catch{return SD(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Tt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Lt(VB);e.includes("#")||(this._urlString=Tt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return Pi.endsWith(n,"?")?n=n.slice(0,-1):Pi.endsWith(n,"?/")&&(n=n.slice(0,-2)),Pi.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Lt(gp)}if(!e.HostNameAndPort||!e.PathSegments)throw Lt(gp);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Lt(FB)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Tt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===xc.COMMON||r[0]===xc.ORGANIZATIONS)&&(r[0]=e),Tt.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Lt(gp);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let i=r.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),r.PathSegments=i,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Lt(gp);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===ie.FORWARD_SLASH){const i=new Tt(n).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Tt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!$w(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const JB={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},ID=JB.endpointMetadata,Rx=JB.instanceDiscoveryMetadata,ZB=new Set;Rx.metadata.forEach(t=>{t.aliases.forEach(e=>{ZB.add(e)})});function Kee(t,e){var i;let n;const r=t.canonicalAuthority;if(r){const s=new Tt(r).getUrlComponents().HostNameAndPort;n=AD(s,(i=t.cloudDiscoveryMetadata)==null?void 0:i.metadata,Ti.CONFIG,e)||AD(s,Rx.metadata,Ti.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function AD(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const i=Bw(e,t);if(i)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),i.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function qee(t){return Bw(Rx.metadata,t)}function Bw(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.13.0 2025-09-24 */const Hw="cache_quota_exceeded",Px="cache_error_unknown";/*! @azure/msal-common v15.13.0 2025-09-24 */const IS={[Hw]:"Exceeded cache storage capacity.",[Px]:"Unexpected error occurred when using cache storage."};class Wd extends Ot{constructor(e,n){const r=n||(IS[e]?IS[e]:IS[Px]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Wd.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function GI(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Wd(Hw):new Wd(t.name,t.message):new Wd(Px)}/*! @azure/msal-common v15.13.0 2025-09-24 */class QI{constructor(e,n,r,i,s){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(DB,Cx),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(s=>s.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,n,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(r,s))return null;const c=this.getIdToken(e,i,n,r.tenantId);return c&&(a=of(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=xx(e,r,a,c==null?void 0:c.secret),o)}getTenantProfilesFromAccountEntity(e,n,r,i){const s=e.getAccountInfo();let o=s.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=o.get(r);if(l)o=new Map([[r,l]]);else return[]}const c=[];return o.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(s,a,l,n,i);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var i;if(!e)throw ae(RB);try{e.account&&await this.setAccount(e.account,n),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(s){throw(i=this.commonLogger)==null||i.error("CacheManager.saveCacheRecord: failed"),s instanceof Ot?s:GI(s)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=Un.fromString(e.target);i.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,r,!1))return;const a=this.getAccessTokenCredential(o,n);a&&this.credentialMatchesFilter(a,r)&&Un.fromString(a.target).intersectingScopeSets(s)&&this.removeAccessToken(o,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),i=[];return r.forEach(s=>{var l;const o=this.getAccount(s,n);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const a={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},c=(l=o.tenantProfiles)==null?void 0:l.filter(u=>this.tenantProfileMatchesFilter(u,a));c&&c.length===0||i.push(o)}),i}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===ar.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===xt.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(i=>{if(!this.isAppMetadata(i))return;const s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(r[i]=s))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;const s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(r=s)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.filter(i).forEach(s=>{this.removeItem(s,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);r.idToken.filter(i).forEach(s=>{this.removeIdToken(s,n)}),r.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,n)}),r.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==ar.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==xt.POP)return;const i=r.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{var s;this.commonLogger.error(`Failed to remove token binding key ${i}`,n),(s=this.performanceClient)==null||s.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ar.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!i){const u=new Map;a.forEach((h,m)=>{h.realm===e.tenantId&&u.set(m,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,n)}),s&&n&&s.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const i=r&&r.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(o,n);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,i){const s=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);const o=Un.createSearchScopes(n.scopes),a=n.authenticationScheme||xt.BEARER,c=a.toLowerCase()!==xt.BEARER.toLowerCase()?ar.ACCESS_TOKEN_WITH_AUTH_SCHEME:ar.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,l,!0)){const _=this.getAccessTokenCredential(m,s);_&&this.credentialMatchesFilter(_,l)&&d.push(_)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(m=>{this.removeAccessToken(this.generateCredentialKey(m),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,n,r){const i=e.toLowerCase();if(n.clientId&&i.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&i.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&i.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&i.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const s=n.target.asArray();for(let o=0;o<s.length;o++){if(r&&!i.includes(s[o].toLowerCase()))return!1;if(!r&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),i=[];return r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;const o=this.getAccessTokenCredential(s,n);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,n,r,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=n?Fw:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ar.REFRESH_TOKEN,clientId:this.clientId,familyId:o},c=i&&i.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d,r);h&&this.credentialMatchesFilter(h,a)&&l.push(h)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&s&&r&&s.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),i=Object.keys(r).map(o=>r[o]),s=i.length;if(s<1)return null;if(s>1)throw ae(IB);return i[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Fw)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const i=Kee(this.staticAuthorityOptions,this.commonLogger);if(i.includes(n)&&i.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==ar.ACCESS_TOKEN&&e.credentialType!==ar.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Un.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(px)!==-1}isAuthorityMetadata(e){return e.indexOf(Vw.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Vw.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class Gee extends QI{async setAccount(){throw ae(it)}getAccount(){throw ae(it)}async setIdTokenCredential(){throw ae(it)}getIdTokenCredential(){throw ae(it)}async setAccessTokenCredential(){throw ae(it)}getAccessTokenCredential(){throw ae(it)}async setRefreshTokenCredential(){throw ae(it)}getRefreshTokenCredential(){throw ae(it)}setAppMetadata(){throw ae(it)}getAppMetadata(){throw ae(it)}setServerTelemetry(){throw ae(it)}getServerTelemetry(){throw ae(it)}setAuthorityMetadata(){throw ae(it)}getAuthorityMetadata(){throw ae(it)}getAuthorityMetadataKeys(){throw ae(it)}setThrottlingCache(){throw ae(it)}getThrottlingCache(){throw ae(it)}removeItem(){throw ae(it)}getKeys(){throw ae(it)}getAccountKeys(){throw ae(it)}getTokenKeys(){throw ae(it)}generateCredentialKey(){throw ae(it)}generateAccountKey(){throw ae(it)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const hi={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.0 2025-09-24 */const j={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},Qee={InProgress:1};/*! @azure/msal-common v15.13.0 2025-09-24 */class kD{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class e3{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Qee.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new kD}}startPerformanceMeasurement(){return new kD}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.0 2025-09-24 */const t3={tokenRenewalOffsetSeconds:yB,preventCorsPreflight:!1},Yee={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Yt.Info,correlationId:ie.EMPTY_STRING},Xee={claimsBasedCachingEnabled:!1},Jee={async sendGetRequestAsync(){throw ae(it)},async sendPostRequestAsync(){throw ae(it)}},Zee={sku:ie.SKU,version:Cx,cpu:ie.EMPTY_STRING,os:ie.EMPTY_STRING},ete={clientSecret:ie.EMPTY_STRING,clientAssertion:void 0},tte={azureCloudInstance:Ex.None,tenant:`${ie.DEFAULT_COMMON_TENANT}`},nte={application:{appName:"",appVersion:""}};function rte({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const m={...Yee,...n};return{authOptions:ite(t),systemOptions:{...t3,...e},loggerOptions:m,cacheOptions:{...Xee,...r},storageInterface:i||new Gee(t.clientId,Uw,new Dg(m),new e3),networkInterface:s||Jee,cryptoInterface:o||Uw,clientCredentials:a||ete,libraryInfo:{...Zee,...c},telemetry:{...nte,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}function ite(t){return{clientCapabilities:[],azureCloudOptions:tte,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function n3(t){return t.authOptions.authority.options.protocolMode===hi.OIDC}/*! @azure/msal-common v15.13.0 2025-09-24 */const Ss={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.0 2025-09-24 */function zw(t,e){if(!t)throw ae(vB);try{const n=e(t);return JSON.parse(n)}catch{throw ae(mx)}}function Kd(t){if(!t)throw ae(mx);const e=t.split(Lm.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?ie.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.0 2025-09-24 */const vu="client_id",r3="redirect_uri",ste="response_type",ote="response_mode",ate="grant_type",cte="claims",lte="scope",ute="refresh_token",dte="state",hte="nonce",fte="prompt",pte="code",mte="code_challenge",gte="code_challenge_method",yte="code_verifier",vte="client-request-id",wte="x-client-SKU",_te="x-client-VER",Tte="x-client-OS",Cte="x-client-CPU",Ete="x-client-current-telemetry",Ste="x-client-last-telemetry",bte="x-ms-lib-capability",Ite="x-app-name",Ate="x-app-ver",kte="post_logout_redirect_uri",xte="id_token_hint",Rte="client_secret",Pte="client_assertion",Nte="client_assertion_type",i3="token_type",s3="req_cnf",xD="return_spa_code",Ote="nativebroker",Mte="logout_hint",Dte="sid",Lte="login_hint",Fte="domain_hint",Vte="x-client-xtra-sku",Ww="brk_client_id",Kw="brk_redirect_uri",YI="instance_aware",jte="ear_jwk",Ute="ear_jwe_crypto";/*! @azure/msal-common v15.13.0 2025-09-24 */function jT(t,e,n){if(!e)return;const r=t.get(vu);r&&t.has(Ww)&&(n==null||n.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(r3)},e))}function Nx(t,e){t.set(ste,e)}function $te(t,e){t.set(ote,e||Eee.QUERY)}function Bte(t){t.set(Ote,"1")}function Ox(t,e,n=!0,r=sf){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const i=n?[...e||[],...r]:e||[],s=new Un(i);t.set(lte,s.printScopes())}function Mx(t,e){t.set(vu,e)}function Dx(t,e){t.set(r3,e)}function Hte(t,e){t.set(kte,e)}function zte(t,e){t.set(xte,e)}function Wte(t,e){t.set(Fte,e)}function Xy(t,e){t.set(Lte,e)}function qw(t,e){t.set(Lr.CCS_HEADER,`UPN:${e}`)}function Vp(t,e){t.set(Lr.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function RD(t,e){t.set(Dte,e)}function Lx(t,e,n){const r=Xte(e,n);try{JSON.parse(r)}catch{throw Lt(Sx)}t.set(cte,r)}function Fx(t,e){t.set(vte,e)}function Vx(t,e){t.set(wte,e.sku),t.set(_te,e.version),e.os&&t.set(Tte,e.os),e.cpu&&t.set(Cte,e.cpu)}function jx(t,e){e!=null&&e.appName&&t.set(Ite,e.appName),e!=null&&e.appVersion&&t.set(Ate,e.appVersion)}function Kte(t,e){t.set(fte,e)}function o3(t,e){e&&t.set(dte,e)}function qte(t,e){t.set(hte,e)}function a3(t,e,n){if(e&&n)t.set(mte,e),t.set(gte,n);else throw Lt(bx)}function Gte(t,e){t.set(pte,e)}function Qte(t,e){t.set(ute,e)}function Yte(t,e){t.set(yte,e)}function c3(t,e){t.set(Rte,e)}function l3(t,e){e&&t.set(Pte,e)}function u3(t,e){e&&t.set(Nte,e)}function d3(t,e){t.set(ate,e)}function Ux(t){t.set(See,"1")}function h3(t){t.has(YI)||t.set(YI,"true")}function Pc(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function Xte(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw Lt(Sx)}return e&&e.length>0&&(n.hasOwnProperty(Qy.ACCESS_TOKEN)||(n[Qy.ACCESS_TOKEN]={}),n[Qy.ACCESS_TOKEN][Qy.XMS_CC]={values:e}),JSON.stringify(n)}function $x(t,e){e&&(t.set(i3,xt.POP),t.set(s3,e))}function f3(t,e){e&&(t.set(i3,xt.SSH),t.set(s3,e))}function p3(t,e){t.set(Ete,e.generateCurrentRequestHeaderValue()),t.set(Ste,e.generateLastRequestHeaderValue())}function m3(t){t.set(bte,Fp.X_MS_LIB_CAPABILITY_VALUE)}function Jte(t,e){t.set(Mte,e)}function UT(t,e,n){t.has(Ww)||t.set(Ww,e),t.has(Kw)||t.set(Kw,n)}function Zte(t,e){t.set(jte,encodeURIComponent(e)),t.set(Ute,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function ene(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.13.0 2025-09-24 */const ws={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.0 2025-09-24 */function tne(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.0 2025-09-24 */function nne(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.0 2025-09-24 */function rne(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.0 2025-09-24 */const Ni=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}try{const a=t(...s);return o==null||o.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a}},re=(t,e,n,r,i)=>(...s)=>{n.trace(`Executing function ${e}`);const o=r==null?void 0:r.startMeasurement(e,i);if(i){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},i)}return r==null||r.setPreQueueTime(e,i),t(...s).then(a=>(n.trace(`Returning result from ${e}`),o==null||o.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw o==null||o.end({success:!1},a),a})};/*! @azure/msal-common v15.13.0 2025-09-24 */class $T{constructor(e,n,r,i){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=i}async detectRegion(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(j.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=id.ENVIRONMENT_VARIABLE;else{const s=$T.IMDS_OPTIONS;try{const o=await re(this.getRegionFromIMDS.bind(this),j.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(ie.IMDS_VERSION,s);if(o.status===gc.SUCCESS&&(r=o.body,n.region_source=id.IMDS),o.status===gc.BAD_REQUEST){const a=await re(this.getCurrentVersion.bind(this),j.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!a)return n.region_source=id.FAILED_AUTO_DETECTION,null;const c=await re(this.getRegionFromIMDS.bind(this),j.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,s);c.status===gc.SUCCESS&&(r=c.body,n.region_source=id.IMDS)}}catch{return n.region_source=id.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=id.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(j.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${ie.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,ie.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(j.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${ie.IMDS_ENDPOINT}?format=json`,e);return r.status===gc.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}$T.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.0 2025-09-24 */function mi(){return Math.round(new Date().getTime()/1e3)}function PD(t){return t.getTime()/1e3}function qd(t){return t?new Date(Number(t)*1e3):new Date}function Gw(t,e){const n=Number(t)||0;return mi()+e>n}function ine(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function sne(t){return Number(t)>mi()}/*! @azure/msal-common v15.13.0 2025-09-24 */function BT(t,e,n,r,i){return{credentialType:ar.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:i,lastUpdatedAt:Date.now().toString()}}function HT(t,e,n,r,i,s,o,a,c,l,u,d,h,m,_){var T,y;const v={homeAccountId:t,credentialType:ar.ACCESS_TOKEN,secret:n,cachedAt:mi().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:i,target:s,tokenType:u||xt.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(v.userAssertionHash=d),l&&(v.refreshOn=l.toString()),m&&(v.requestedClaims=m,v.requestedClaimsHash=_),((T=v.tokenType)==null?void 0:T.toLowerCase())!==xt.BEARER.toLowerCase())switch(v.credentialType=ar.ACCESS_TOKEN_WITH_AUTH_SCHEME,v.tokenType){case xt.POP:const w=of(n,c);if(!((y=w==null?void 0:w.cnf)!=null&&y.kid))throw ae(PB);v.keyId=w.cnf.kid;break;case xt.SSH:v.keyId=h}return v}function g3(t,e,n,r,i,s,o){const a={credentialType:ar.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function Bx(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function ND(t){return t?Bx(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===ar.ACCESS_TOKEN||t.credentialType===ar.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function one(t){return t?Bx(t)&&t.hasOwnProperty("realm")&&t.credentialType===ar.ID_TOKEN:!1}function OD(t){return t?Bx(t)&&t.credentialType===ar.REFRESH_TOKEN:!1}function ane(t,e){const n=t.indexOf(ir.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function cne(t,e){let n=!1;t&&(n=t.indexOf(Fp.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function lne({environment:t,clientId:e}){return[px,t,e].join(Lm.CACHE_KEY_SEPARATOR).toLowerCase()}function une(t,e){return e?t.indexOf(px)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function dne(t,e){return e?t.indexOf(Vw.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function MD(){return mi()+Vw.REFRESH_TIME_SECONDS}function Jy(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function AS(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function DD(t){return t.expiresAt<=mi()}/*! @azure/msal-common v15.13.0 2025-09-24 */class Tr{constructor(e,n,r,i,s,o,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=c||!1,this.regionDiscovery=new $T(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(ie.CIAM_AUTH_URL))return ws.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case ie.ADFS:return ws.Adfs;case ie.DSTS:return ws.Dsts}return ws.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Tt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ae(zo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ae(zo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ae(zo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ae(MB);return this.replacePath(this.metadata.end_session_endpoint)}else throw ae(zo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ae(zo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ae(zo)}canReplaceTenant(e){return e.PathSegments.length===1&&!Tr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ws.Default&&this.protocolMode!==hi.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const i=new Tt(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=s[c];if(c===0&&this.canReplaceTenant(i)){const u=new Tt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(n=n.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ws.Adfs||this.protocolMode===hi.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(j.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await re(this.updateCloudDiscoveryMetadata.bind(this),j.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await re(this.updateEndpointMetadata.bind(this),j.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(s=this.performanceClient)==null||s.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:MD(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==Ti.CACHE&&(r==null?void 0:r.source)!==Ti.CACHE&&(e.expiresAt=MD(),e.canonical_authority=this.canonicalAuthority);const i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){var i,s,o;(i=this.performanceClient)==null||i.addQueueMeasurement(j.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Ti.HARDCODED_VALUES&&(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&n.metadata){const a=await re(this.updateMetadataWithRegionalInformation.bind(this),j.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);Jy(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await re(this.getEndpointMetadataFromNetwork.bind(this),j.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(o=this.authorityOptions.azureRegionConfiguration)!=null&&o.azureRegion&&(r=await re(this.updateMetadataWithRegionalInformation.bind(this),j.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Jy(e,r,!0),Ti.NETWORK;throw ae(TB,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Jy(e,n,!1),{source:Ti.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const i=this.getEndpointMetadataFromHardcodedValues();if(i)return Jy(e,i,!1),{source:Ti.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=DD(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Ti.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Tt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Lt(BB)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(j.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const i=await this.networkInterface.sendGetRequestAsync(n,e);return tne(i.body)?i.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(i){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${i}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in ID?ID[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(j.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.azureRegion;if(n){if(n!==ie.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=bS.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,Tr.replaceWithRegionalInformation(e,n);const o=await re(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),j.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((s=this.authorityOptions.azureRegionConfiguration)==null?void 0:s.environmentRegion,this.regionDiscoveryMetadata);if(o)return this.regionDiscoveryMetadata.region_outcome=bS.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=o,Tr.replaceWithRegionalInformation(e,o);this.regionDiscoveryMetadata.region_outcome=bS.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(j.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await re(this.getCloudDiscoveryMetadataFromNetwork.bind(this),j.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return AS(e,r,!0),Ti.NETWORK;throw Lt(HB)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||ie.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||ie.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||ie.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),AS(e,n,!1),Ti.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const i=qee(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),AS(e,i,!1),Ti.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=DD(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Ti.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ws.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Tr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Bw(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Lt(Ix)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Tr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(j.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${ie.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(e,n);let o,a;if(nne(s.body))o=s.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(rne(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),o=s.body,o.error===ie.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Bw(a,this.hostnameAndPort)}catch(s){if(s instanceof Ot)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const o=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Tr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Tt.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==Ex.None){const i=n.tenant?n.tenant:ie.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${i}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return ie.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ae(zo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return ZB.has(e)}static isPublicCloudAuthority(e){return ie.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const i=new Tt(e);i.validateAsUri();const s=i.getUrlComponents();let o=`${n}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${n}.${ie.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=Tt.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=Tr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=Tr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=Tr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const i=new Tt(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(ie.CIAM_AUTH_URL)){const s=i.HostNameAndPort.split(".")[0];n=`${n}${s}${ie.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}Tr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",xc.COMMON,xc.CONSUMERS,xc.ORGANIZATIONS]);function hne(t){var i;const r=(i=new Tt(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:i.toLowerCase();switch(r){case xc.COMMON:case xc.ORGANIZATIONS:case xc.CONSUMERS:return;default:return r}}function y3(t){return t.endsWith(ie.FORWARD_SLASH)?t:`${t}${ie.FORWARD_SLASH}`}function fne(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Lt(Ix)}return{canonicalAuthority:t.authority?y3(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.13.0 2025-09-24 */async function v3(t,e,n,r,i,s,o){o==null||o.addQueueMeasurement(j.AuthorityFactoryCreateDiscoveredInstance,s);const a=Tr.transformCIAMAuthority(y3(t)),c=new Tr(a,e,n,r,i,s,o);try{return await re(c.resolveEndpointsAsync.bind(c),j.AuthorityResolveEndpointsAsync,i,o,s)(),c}catch{throw ae(zo)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Hu extends Ot{constructor(e,n,r,i,s){super(e,n,r),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,Hu.prototype)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function zT(t,e,n){var r;return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class ro{static generateThrottlingStorageKey(e){return`${Fp.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){var o;const i=ro.generateThrottlingStorageKey(n),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,r);return}throw new Hu(((o=s.errorCodes)==null?void 0:o.join(" "))||ie.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,n,r,i){if(ro.checkResponseStatus(r)||ro.checkResponseForRetryAfter(r)){const s={throttleTime:ro.calculateThrottleTime(parseInt(r.headers[Lr.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(ro.generateThrottlingStorageKey(n),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Lr.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Fp.DEFAULT_THROTTLE_TIME_SECONDS),r+Fp.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,i){const s=zT(n,r,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class WT extends Ot{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,WT.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function yp(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new WT(t,e,n)}/*! @azure/msal-common v15.13.0 2025-09-24 */class Hx{constructor(e,n){this.config=rte(e),this.logger=new Dg(this.config.loggerOptions,DB,Cx),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Lr.CONTENT_TYPE]=ie.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ss.HOME_ACCOUNT_ID:try{const r=Kd(e.credential);n[Lr.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Ss.UPN:n[Lr.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,i,s,o){var c;o&&((c=this.performanceClient)==null||c.addQueueMeasurement(o,s));const a=await this.sendPostRequest(i,e,{body:n,headers:r},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,n,r,i){var o,a,c;ro.preProcess(this.cacheManager,e,i);let s;try{s=await re(this.networkClient.sendPostRequestAsync.bind(this.networkClient),j.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(n,r);const l=s.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((o=s.body.refresh_token)==null?void 0:o.length)||0,httpVerToken:l[Lr.X_MS_HTTP_VERSION]||"",requestId:l[Lr.X_MS_REQUEST_ID]||""},i)}catch(l){if(l instanceof WT){const u=l.responseHeaders;throw u&&((c=this.performanceClient)==null||c.addFields({httpVerToken:u[Lr.X_MS_HTTP_VERSION]||"",requestId:u[Lr.X_MS_REQUEST_ID]||"",contentTypeHeader:u[Lr.CONTENT_TYPE]||void 0,contentLengthHeader:u[Lr.CONTENT_LENGTH]||void 0,httpStatus:l.httpStatus},i)),l.error}throw l instanceof Ot?l:ae(_B)}return ro.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(j.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,i=await v3(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=i}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&UT(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Pc(n,e.tokenQueryParameters),Fx(n,e.correlationId),jT(n,e.correlationId,this.performanceClient),Fm(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function w3(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ns{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){var l,u,d,h,m,_,v;const i=new Ns;n.authorityType===ws.Adfs?i.authorityType=Yy.ADFS_ACCOUNT_TYPE:n.protocolMode===hi.OIDC?i.authorityType=Yy.GENERIC_ACCOUNT_TYPE:i.authorityType=Yy.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&r&&(s=zw(e.clientInfo,r),s.xms_tdbr&&(i.dataBoundary=s.xms_tdbr==="EU"?"EU":"None")),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;const o=e.environment||n&&n.getPreferredCache();if(!o)throw ae(wx);i.environment=o,i.realm=(s==null?void 0:s.utid)||w3(e.idTokenClaims)||"",i.localAccountId=(s==null?void 0:s.uid)||((l=e.idTokenClaims)==null?void 0:l.oid)||((u=e.idTokenClaims)==null?void 0:u.sub)||"";const a=((d=e.idTokenClaims)==null?void 0:d.preferred_username)||((h=e.idTokenClaims)==null?void 0:h.upn),c=(m=e.idTokenClaims)!=null&&m.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||c||"",i.loginHint=(_=e.idTokenClaims)==null?void 0:_.login_hint,i.name=((v=e.idTokenClaims)==null?void 0:v.name)||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{const T=kx(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[T]}return i}static createFromAccountInfo(e,n,r){var s;const i=new Ns;return i.authorityType=e.authorityType||Yy.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=n,i.msGraphHost=r,i.tenantProfiles=Array.from(((s=e.tenantProfiles)==null?void 0:s.values())||[]),i.dataBoundary=e.dataBoundary,i}static generateHomeAccountId(e,n,r,i,s){if(!(n===ws.Adfs||n===ws.Dsts)){if(e)try{const o=zw(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}r.warning("No client info in response")}return(s==null?void 0:s.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let i=!0;if(r){const s=e.idTokenClaims||{},o=n.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&i}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Qw="no_tokens_found",_3="native_account_unavailable",zx="refresh_token_expired",Wx="ux_not_allowed",pne="interaction_required",mne="consent_required",gne="login_required",KT="bad_token";/*! @azure/msal-common v15.13.0 2025-09-24 */const LD=[pne,mne,gne,KT,Wx],yne=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],vne={[Qw]:"No refresh token found in the cache. Please sign-in.",[_3]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[zx]:"Refresh token has expired.",[KT]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Wx]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Os extends Ot{constructor(e,n,r,i,s,o,a,c){super(e,n,r),Object.setPrototypeOf(this,Os.prototype),this.timestamp=i||ie.EMPTY_STRING,this.traceId=s||ie.EMPTY_STRING,this.correlationId=o||ie.EMPTY_STRING,this.claims=a||ie.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function T3(t,e,n){const r=!!t&&LD.indexOf(t)>-1,i=!!n&&yne.indexOf(n)>-1,s=!!e&&LD.some(o=>e.indexOf(o)>-1);return r||s||i}function Yw(t){return new Os(t,vne[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class af{static setRequestState(e,n,r){const i=af.generateLibraryState(e,r);return n?`${i}${ie.RESOURCE_DELIM}${n}`:i}static generateLibraryState(e,n){if(!e)throw ae(KI);const r={id:e.createNewGuid()};n&&(r.meta=n);const i=JSON.stringify(r);return e.base64Encode(i)}static parseRequestState(e,n){if(!e)throw ae(KI);if(!n)throw ae(Ch);try{const r=n.split(ie.RESOURCE_DELIM),i=r[0],s=r.length>1?r.slice(1).join(ie.RESOURCE_DELIM):ie.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||ie.EMPTY_STRING,libraryState:a}}catch{throw ae(Ch)}}}/*! @azure/msal-common v15.13.0 2025-09-24 */const wne={SW:"sw"};class Eh{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var s;(s=this.performanceClient)==null||s.addQueueMeasurement(j.PopTokenGenerateCnf,e.correlationId);const r=await re(this.generateKid.bind(this),j.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(j.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:wne.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,i){const{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:c,shrOptions:l}=r,u=o?new Tt(o):void 0,d=u==null?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:mi(),m:s==null?void 0:s.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},n,l,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class _ne{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.0 2025-09-24 */class wu{constructor(e,n,r,i,s,o,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const i=`Error(s): ${e.error_codes||ie.NOT_AVAILABLE} - Timestamp: ${e.timestamp||ie.NOT_AVAILABLE} - Description: ${e.error_description||ie.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||ie.NOT_AVAILABLE} - Trace ID: ${e.trace_id||ie.NOT_AVAILABLE}`,s=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,o=new Hu(e.error,i,e.suberror,s,e.status);if(n&&e.status&&e.status>=gc.SERVER_ERROR_RANGE_START&&e.status<=gc.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(n&&e.status&&e.status>=gc.CLIENT_ERROR_RANGE_START&&e.status<=gc.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw T3(e.error,e.error_description,e.suberror)?new Os(e.error,e.error_description,e.suberror,e.timestamp||ie.EMPTY_STRING,e.trace_id||ie.EMPTY_STRING,e.correlation_id||ie.EMPTY_STRING,e.claims||ie.EMPTY_STRING,s):o}}async handleServerTokenResponse(e,n,r,i,s,o,a,c,l){var _;(_=this.performanceClient)==null||_.addQueueMeasurement(j.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=of(e.id_token||ie.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&u.nonce!==s.nonce)throw ae(SB);if(i.maxAge||i.maxAge===0){const v=u.auth_time;if(!v)throw ae(yx);YB(v,i.maxAge)}}this.homeAccountIdentifier=Ns.generateHomeAccountId(e.client_info||ie.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,u);let d;s&&s.state&&(d=af.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;const h=this.generateCacheRecord(e,n,r,i,u,o,s);let m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new _ne(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),a&&!c&&h.account){const v=this.cacheStorage.generateAccountKey(h.account.getAccountInfo());if(!this.cacheStorage.getAccount(v,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await wu.generateAuthenticationResult(this.cryptoObj,n,h,!1,i,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(h,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return wu.generateAuthenticationResult(this.cryptoObj,n,h,!1,i,u,d,e,l)}generateCacheRecord(e,n,r,i,s,o,a){const c=n.getPreferredCache();if(!c)throw ae(wx);const l=w3(s);let u,d;e.id_token&&s&&(u=BT(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=Kx(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,c,l,a,void 0,this.logger));let h=null;if(e.access_token){const v=e.scope?Un.fromString(e.scope):new Un(i.scopes||[]),T=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,y=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,w=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=r+T,b=C+y,k=w&&w>0?r+w:void 0;h=HT(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant||"",v.printScopes(),C,b,this.cryptoObj.base64Decode,k,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let v;if(e.refresh_token_expires_in){const T=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;v=r+T}m=g3(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,v)}let _=null;return e.foci&&(_={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:m,appMetadata:_}}static async generateAuthenticationResult(e,n,r,i,s,o,a,c,l){var C,b,k,D,A;let u=ie.EMPTY_STRING,d=[],h=null,m,_,v=ie.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===xt.POP&&!s.popKid){const S=new Eh(e),{secret:x,keyId:N}=r.accessToken;if(!N)throw ae(_x);u=await S.signPopToken(x,N,s)}else u=r.accessToken.secret;d=Un.fromString(r.accessToken.target).asArray(),h=qd(r.accessToken.expiresOn),m=qd(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(_=qd(r.accessToken.refreshOn))}r.appMetadata&&(v=r.appMetadata.familyId===Fw?Fw:"");const T=(o==null?void 0:o.oid)||(o==null?void 0:o.sub)||"",y=(o==null?void 0:o.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const w=r.account?xx(r.account.getAccountInfo(),void 0,o,(C=r.idToken)==null?void 0:C.secret):null;return{authority:n.canonicalAuthority,uniqueId:T,tenantId:y,scopes:d,account:w,idToken:((b=r==null?void 0:r.idToken)==null?void 0:b.secret)||"",idTokenClaims:o||{},accessToken:u,fromCache:i,expiresOn:h,extExpiresOn:m,refreshOn:_,correlationId:s.correlationId,requestId:l||ie.EMPTY_STRING,familyId:v,tokenType:((k=r.accessToken)==null?void 0:k.tokenType)||ie.EMPTY_STRING,state:a?a.userRequestState:ie.EMPTY_STRING,cloudGraphHostName:((D=r.account)==null?void 0:D.cloudGraphHostName)||ie.EMPTY_STRING,msGraphHost:((A=r.account)==null?void 0:A.msGraphHost)||ie.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function Kx(t,e,n,r,i,s,o,a,c,l,u,d){d==null||d.verbose("setCachedAccount called");const m=t.getAccountKeys().find(w=>w.startsWith(n));let _=null;m&&(_=t.getAccount(m,i));const v=_||Ns.createAccount({homeAccountId:n,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:l==null?void 0:l.cloud_graph_host_name,msGraphHost:l==null?void 0:l.msgraph_host,nativeAccountId:u},e,r),T=v.tenantProfiles||[],y=c||v.realm;if(y&&!T.find(w=>w.tenantId===y)){const w=kx(n,v.localAccountId,y,s);T.push(w)}return v.tenantProfiles=T,v}/*! @azure/msal-common v15.13.0 2025-09-24 */async function C3(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.13.0 2025-09-24 */class E3 extends Hx{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(j.AuthClientAcquireToken,e.correlationId),!e.code)throw ae(AB);const r=mi(),i=await re(this.executeTokenRequest.bind(this),j.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=(c=i.headers)==null?void 0:c[Lr.X_MS_REQUEST_ID],o=new wu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),re(o.handleServerTokenResponse.bind(o),j.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,n,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Lt($B);const n=this.createLogoutUrlQueryString(e);return Tt.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(j.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),i=Tt.appendQueryString(e.tokenEndpoint,r),s=await re(this.createTokenRequestBody.bind(this),j.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let o;if(n.clientInfo)try{const u=zw(n.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${u.uid}${Lm.CLIENT_INFO_SEPARATOR}${u.utid}`,type:Ss.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}const a=this.createTokenRequestHeaders(o||n.ccsCredential),c=zT(this.config.authOptions.clientId,n);return re(this.executePostToTokenEndpoint.bind(this),j.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(i,s,a,c,n.correlationId,j.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(j.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(Mx(n,e.embeddedClientId||((s=e.tokenBodyParameters)==null?void 0:s[vu])||this.config.authOptions.clientId),this.includeRedirectUri)Dx(n,e.redirectUri);else if(!e.redirectUri)throw Lt(LB);if(Ox(n,e.scopes,!0,this.oidcDefaultScopes),Gte(n,e.code),Vx(n,this.config.libraryInfo),jx(n,this.config.telemetry.application),m3(n),this.serverTelemetryManager&&!n3(this.config)&&p3(n,this.serverTelemetryManager),e.codeVerifier&&Yte(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&c3(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;l3(n,await C3(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),u3(n,o.assertionType)}if(d3(n,gB.AUTHORIZATION_CODE_GRANT),Ux(n),e.authenticationScheme===xt.POP){const o=new Eh(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await re(o.generateCnf.bind(o),j.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,$x(n,a)}else if(e.authenticationScheme===xt.SSH)if(e.sshJwk)f3(n,e.sshJwk);else throw Lt(VT);(!Pi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Lx(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const o=zw(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${Lm.CLIENT_INFO_SEPARATOR}${o.utid}`,type:Ss.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Ss.HOME_ACCOUNT_ID:try{const o=Kd(r.credential);Vp(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Ss.UPN:qw(n,r.credential);break}return e.embeddedClientId&&UT(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Pc(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[xD])&&Pc(n,{[xD]:"1"}),jT(n,e.correlationId,this.performanceClient),Fm(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&Hte(n,e.postLogoutRedirectUri),e.correlationId&&Fx(n,e.correlationId),e.idTokenHint&&zte(n,e.idTokenHint),e.state&&o3(n,e.state),e.logoutHint&&Jte(n,e.logoutHint),e.extraQueryParameters&&Pc(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&h3(n),Fm(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Tne=300;class Cne extends Hx{constructor(e,n){super(e,n)}async acquireToken(e){var o,a;(o=this.performanceClient)==null||o.addQueueMeasurement(j.RefreshTokenClientAcquireToken,e.correlationId);const n=mi(),r=await re(this.executeTokenRequest.bind(this),j.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=(a=r.headers)==null?void 0:a[Lr.X_MS_REQUEST_ID],s=new wu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(r.body),re(s.handleServerTokenResponse.bind(s),j.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Lt(UB);if((r=this.performanceClient)==null||r.addQueueMeasurement(j.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw ae(vx);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await re(this.acquireTokenWithCachedRefreshToken.bind(this),j.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(i){const s=i instanceof Os&&i.errorCode===Qw,o=i instanceof Hu&&i.errorCode===_D.INVALID_GRANT_ERROR&&i.subError===_D.CLIENT_MISMATCH_ERROR;if(s||o)return re(this.acquireTokenWithCachedRefreshToken.bind(this),j.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw i}return re(this.acquireTokenWithCachedRefreshToken.bind(this),j.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var s,o,a;(s=this.performanceClient)==null||s.addQueueMeasurement(j.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Ni(this.cacheManager.getRefreshToken.bind(this.cacheManager),j.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw Yw(Qw);if(r.expiresOn&&Gw(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||Tne))throw(o=this.performanceClient)==null||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Yw(zx);const i={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||xt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ss.HOME_ACCOUNT_ID}};try{return await re(this.acquireToken.bind(this),j.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(c){if(c instanceof Os&&((a=this.performanceClient)==null||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===KT)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const l=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(l,e.correlationId)}throw c}}async executeTokenRequest(e,n){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(j.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),i=Tt.appendQueryString(n.tokenEndpoint,r),s=await re(this.createTokenRequestBody.bind(this),j.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=zT(this.config.authOptions.clientId,e);return re(this.executePostToTokenEndpoint.bind(this),j.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,j.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,i,s;(r=this.performanceClient)==null||r.addQueueMeasurement(j.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(Mx(n,e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[vu])||this.config.authOptions.clientId),e.redirectUri&&Dx(n,e.redirectUri),Ox(n,e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),d3(n,gB.REFRESH_TOKEN_GRANT),Ux(n),Vx(n,this.config.libraryInfo),jx(n,this.config.telemetry.application),m3(n),this.serverTelemetryManager&&!n3(this.config)&&p3(n,this.serverTelemetryManager),Qte(n,e.refreshToken),this.config.clientCredentials.clientSecret&&c3(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const o=this.config.clientCredentials.clientAssertion;l3(n,await C3(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),u3(n,o.assertionType)}if(e.authenticationScheme===xt.POP){const o=new Eh(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await re(o.generateCnf.bind(o),j.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,$x(n,a)}else if(e.authenticationScheme===xt.SSH)if(e.sshJwk)f3(n,e.sshJwk);else throw Lt(VT);if((!Pi.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Lx(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ss.HOME_ACCOUNT_ID:try{const o=Kd(e.ccsCredential.credential);Vp(n,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Ss.UPN:qw(n,e.ccsCredential.credential);break}return e.embeddedClientId&&UT(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Pc(n,e.tokenBodyParameters),jT(n,e.correlationId,this.performanceClient),Fm(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ene extends Hx{constructor(e,n){super(e,n)}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(j.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Al.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Pi.isEmptyObj(e.claims))throw this.setCacheOutcome(Al.FORCE_REFRESH_OR_CLAIMS,e.correlationId),ae(Rc);if(!e.account)throw ae(vx);const r=e.account.tenantId||hne(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,r);if(s){if(sne(s.cachedAt)||Gw(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Al.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),ae(Rc);s.refreshOn&&Gw(s.refreshOn,0)&&(n=Al.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Al.NO_CACHED_ACCESS_TOKEN,e.correlationId),ae(Rc);const o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await re(this.generateResultFromCacheRecord.bind(this),j.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,i;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(i=this.performanceClient)==null||i.addFields({cacheOutcome:e},n),e!==Al.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(j.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=of(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const s=r==null?void 0:r.auth_time;if(!s)throw ae(yx);YB(s,n.maxAge)}return wu.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Sne={sendGetRequestAsync:()=>Promise.reject(ae(it)),sendPostRequestAsync:()=>Promise.reject(ae(it))};/*! @azure/msal-common v15.13.0 2025-09-24 */function bne(t,e,n,r){var a,c;const i=e.correlationId,s=new Map;Mx(s,e.embeddedClientId||((a=e.extraQueryParameters)==null?void 0:a[vu])||t.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Ox(s,o,!0,(c=t.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),Dx(s,e.redirectUri),Fx(s,i),$te(s,e.responseMode),Ux(s),e.prompt&&(Kte(s,e.prompt),r==null||r.addFields({prompt:e.prompt},i)),e.domainHint&&(Wte(s,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},i)),e.prompt!==lr.SELECT_ACCOUNT)if(e.sid&&e.prompt===lr.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),RD(s,e.sid),r==null||r.addFields({sidFromRequest:!0},i);else if(e.account){const l=kne(e.account);let u=xne(e.account);if(u&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Xy(s,u),r==null||r.addFields({loginHintFromClaim:!0},i);try{const d=Kd(e.account.homeAccountId);Vp(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&e.prompt===lr.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),RD(s,l),r==null||r.addFields({sidFromClaim:!0},i);try{const d=Kd(e.account.homeAccountId);Vp(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Xy(s,e.loginHint),qw(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Xy(s,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},i);try{const d=Kd(e.account.homeAccountId);Vp(s,d)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Xy(s,e.loginHint),qw(s,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},i));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&qte(s,e.nonce),e.state&&o3(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&Lx(s,e.claims,t.clientCapabilities),e.embeddedClientId&&UT(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(YI))&&h3(s),s}function qx(t,e,n,r){const i=Fm(e,n,r);return Tt.appendQueryString(t.authorizationEndpoint,i)}function Ine(t,e){if(S3(t,e),!t.code)throw ae(NB);return t}function S3(t,e){if(!t.state||!e)throw t.state?ae(HI,"Cached State"):ae(HI,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw ae(Ch,t.state)}try{r=decodeURIComponent(e)}catch{throw ae(Ch,t.state)}if(n!==r)throw ae(EB);if(t.error||t.error_description||t.suberror){const i=Ane(t);throw T3(t.error,t.error_description,t.suberror)?new Os(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Hu(t.error||"",t.error_description,t.suberror,i)}}function Ane(t){var r,i;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(i=t.error_uri)==null?void 0:i.substring(n+e.length):void 0}function kne(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}function xne(t){var e;return t.loginHint||((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.13.0 2025-09-24 */const FD=",",b3="|";function Rne(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[n,r]],[2,[i,s]]]);let a=[];if(e!=null&&e.length){if(a=e.split(FD),a.length<4)return e}else a=Array.from({length:4},()=>b3);return o.forEach((c,l)=>{var u,d;c.length===2&&((u=c[0])!=null&&u.length)&&((d=c[1])!=null&&d.length)&&Pne({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(FD)}function Pne(t){const{skuArr:e,index:n,skuName:r,skuVersion:i}=t;n>=e.length||(e[n]=[r,i].join(b3))}class Vm{constructor(e,n){this.cacheOutcome=Al.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||ie.EMPTY_STRING,this.wrapperVer=e.wrapperVer||ie.EMPTY_STRING,this.telemetryCacheKey=ir.CACHE_KEY+Lm.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${ir.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const i=n.join(ir.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(ir.VALUE_SEPARATOR);return[ir.SCHEMA_VERSION,o,i].join(ir.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Vm.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(ir.VALUE_SEPARATOR),i=e.errors.slice(0,n).join(ir.VALUE_SEPARATOR),s=e.errors.length,o=n<s?ir.OVERFLOW_TRUE:ir.OVERFLOW_FALSE,a=[s,o].join(ir.VALUE_SEPARATOR);return[ir.SCHEMA_VERSION,e.cacheHits,r,i,a].join(ir.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=ir.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Ot?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(ir.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Vm.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const i={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,i=0;const s=e.errors.length;for(n=0;n<s;n++){const o=e.failedRequests[2*n]||ie.EMPTY_STRING,a=e.failedRequests[2*n+1]||ie.EMPTY_STRING,c=e.errors[n]||ie.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+c.length+3,i<ir.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||ie.EMPTY_STRING),e.push(this.regionSource||ie.EMPTY_STRING),e.push(this.regionOutcome||ie.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return Rne(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const I3="missing_kid_error",A3="missing_alg_error";/*! @azure/msal-common v15.13.0 2025-09-24 */const Nne={[I3]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[A3]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Gx extends Ot{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,Gx.prototype)}}function VD(t){return new Gx(t,Nne[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class Qx{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw VD(I3);if(!e.alg)throw VD(A3);const n=new Qx({typ:e.typ||bee.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Yx="pkce_not_created",Xx="ear_jwk_empty",k3="ear_jwe_empty",XI="crypto_nonexistent",qT="empty_navigate_uri",x3="hash_empty_error",Jx="no_state_in_hash",R3="hash_does_not_contain_known_properties",P3="unable_to_parse_state",N3="state_interaction_type_mismatch",O3="interaction_in_progress",M3="popup_window_error",D3="empty_window_error",jm="user_cancelled",One="monitor_popup_timeout",L3="monitor_window_timeout",F3="redirect_in_iframe",V3="block_iframe_reload",j3="block_nested_popups",Mne="iframe_closed_prematurely",GT="silent_logout_unsupported",U3="no_account_error",Dne="silent_prompt_value_error",$3="no_token_request_cache_error",B3="unable_to_parse_token_request_cache_error",Lne="auth_request_not_set_error",Fne="invalid_cache_type",QT="non_browser_environment",ud="database_not_open",Xw="no_network_connectivity",H3="post_request_failed",z3="get_request_failed",JI="failed_to_parse_response",W3="unable_to_load_token",Zx="crypto_key_not_found",K3="auth_code_required",q3="auth_code_or_nativeAccountId_required",G3="spa_code_and_nativeAccountId_present",eR="database_unavailable",Q3="unable_to_acquire_token_from_native_platform",Y3="native_handshake_timeout",X3="native_extension_not_installed",tR="native_connection_not_established",jp="uninitialized_public_client_application",J3="native_prompt_not_supported",Z3="invalid_base64_string",eH="invalid_pop_token_request",tH="failed_to_build_headers",nH="failed_to_parse_headers",Vv="failed_to_decrypt_ear_response",Jw="timed_out";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Vo="For more visit: aka.ms/msaljs/browser-errors",Vne={[Yx]:"The PKCE code challenge and verifier could not be generated.",[Xx]:"No EAR encryption key provided. This is unexpected.",[k3]:"Server response does not contain ear_jwe property. This is unexpected.",[XI]:"The crypto object or function is not available.",[qT]:"Navigation URI is empty. Please check stack trace for more info.",[x3]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Vo}`,[Jx]:"Hash does not contain state. Please verify that the request originated from msal.",[R3]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Vo}`,[P3]:"Unable to parse state. Please verify that the request originated from msal.",[N3]:"Hash contains state but the interaction type does not match the caller.",[O3]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Vo}`,[M3]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[D3]:"window.open returned null or undefined window object.",[jm]:"User cancelled the flow.",[One]:`Token acquisition in popup failed due to timeout.  ${Vo}`,[L3]:`Token acquisition in iframe failed due to timeout.  ${Vo}`,[F3]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[V3]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Vo}`,[j3]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Mne]:"The iframe being monitored was closed prematurely.",[GT]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[U3]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Dne]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[$3]:"No token request found in cache.",[B3]:"The cached token request could not be parsed.",[Lne]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Fne]:"Invalid cache type",[QT]:"Login and token requests are not supported in non-browser environments.",[ud]:"Database is not open!",[Xw]:"No network connectivity. Check your internet connection.",[H3]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[z3]:"Network request failed. Please check the network trace to determine root cause.",[JI]:"Failed to parse network response. Check network trace.",[W3]:"Error loading token to cache.",[Zx]:"Cryptographic Key or Keypair not found in browser storage.",[K3]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[q3]:"An authorization code or nativeAccountId must be provided to this flow.",[G3]:"Request cannot contain both spa code and native account id.",[eR]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Q3]:`Unable to acquire token from native platform.  ${Vo}`,[Y3]:"Timed out while attempting to establish connection to browser extension",[X3]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[tR]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Vo}`,[jp]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Vo}`,[J3]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Z3]:"Invalid base64 encoded string.",[eH]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[tH]:"Failed to build request headers object.",[nH]:"Failed to parse response headers",[Vv]:"Failed to decrypt ear response",[Jw]:"The request timed out."};class Lg extends Ot{constructor(e,n){super(e,Vne[e],n),Object.setPrototypeOf(this,Lg.prototype),this.name="BrowserAuthError"}}function be(t,e){return new Lg(t,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const ni={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},qi={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},ep={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},$n={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},jD={GET:"GET",POST:"POST"},nc={SIGNIN:"signin",SIGNOUT:"signout"},Cn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Zy={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Nt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var je;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(je||(je={}));const UD={scopes:sf},rH="jwk",ZI="msal.db",jne=1,Une=`${ZI}.keys`,Mr={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},$ne=[Mr.Default,Mr.Skip,Mr.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.25.0 2025-10-09 */function ev(t){return encodeURIComponent(Um(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Bc(t){return iH(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Um(t){return iH(new TextEncoder().encode(t))}function iH(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */function xs(t){return new TextDecoder().decode(Nc(t))}function Nc(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw be(Z3)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Bne="RSASSA-PKCS1-v1_5",cf="AES-GCM",sH="HKDF",nR="SHA-256",Hne=2048,zne=new Uint8Array([1,0,1]),$D="0123456789abcdef",BD=new Uint32Array(1),rR="raw",oH="encrypt",iR="decrypt",Wne="deriveKey",Kne="crypto_subtle_undefined",sR={name:Bne,hash:nR,modulusLength:Hne,publicExponent:zne};function qne(t){if(!window)throw be(QT);if(!window.crypto)throw be(XI);if(!t&&!window.crypto.subtle)throw be(XI,Kne)}async function aH(t,e,n){e==null||e.addQueueMeasurement(j.Sha256Digest,n);const i=new TextEncoder().encode(t);return window.crypto.subtle.digest(nR,i)}function Gne(t){return window.crypto.getRandomValues(t)}function kS(){return window.crypto.getRandomValues(BD),BD[0]}function Ms(){const t=Date.now(),e=kS()*1024+(kS()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),i=e&2**30-1,s=kS();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=s>>>24,n[13]=s>>>16,n[14]=s>>>8,n[15]=s;let o="";for(let a=0;a<n.length;a++)o+=$D.charAt(n[a]>>>4),o+=$D.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(o+="-");return o}async function Qne(t,e){return window.crypto.subtle.generateKey(sR,t,e)}async function xS(t){return window.crypto.subtle.exportKey(rH,t)}async function Yne(t,e,n){return window.crypto.subtle.importKey(rH,t,sR,e,n)}async function Xne(t,e){return window.crypto.subtle.sign(sR,t,e)}async function oR(){const t=await cH(),n={alg:"dir",kty:"oct",k:Bc(new Uint8Array(t))};return Um(JSON.stringify(n))}async function Jne(t){const e=xs(t),r=JSON.parse(e).k,i=Nc(r);return window.crypto.subtle.importKey(rR,i,cf,!1,[iR])}async function Zne(t,e){const n=e.split(".");if(n.length!==5)throw be(Vv,"jwe_length");const r=await Jne(t).catch(()=>{throw be(Vv,"import_key")});try{const i=new TextEncoder().encode(n[0]),s=Nc(n[2]),o=Nc(n[3]),a=Nc(n[4]),c=a.byteLength*8,l=new Uint8Array(o.length+a.length);l.set(o),l.set(a,o.length);const u=await window.crypto.subtle.decrypt({name:cf,iv:s,tagLength:c,additionalData:i},r,l);return new TextDecoder().decode(u)}catch{throw be(Vv,"decrypt")}}async function cH(){const t=await window.crypto.subtle.generateKey({name:cf,length:256},!0,[oH,iR]);return window.crypto.subtle.exportKey(rR,t)}async function HD(t){return window.crypto.subtle.importKey(rR,t,sH,!1,[Wne])}async function lH(t,e,n){return window.crypto.subtle.deriveKey({name:sH,salt:e,hash:nR,info:new TextEncoder().encode(n)},t,{name:cf,length:256},!1,[oH,iR])}async function ere(t,e,n){const r=new TextEncoder().encode(e),i=window.crypto.getRandomValues(new Uint8Array(16)),s=await lH(t,i,n),o=await window.crypto.subtle.encrypt({name:cf,iv:new Uint8Array(12)},s,r);return{data:Bc(new Uint8Array(o)),nonce:Bc(i)}}async function zD(t,e,n,r){const i=Nc(r),s=await lH(t,Nc(e),n),o=await window.crypto.subtle.decrypt({name:cf,iv:new Uint8Array(12)},s,i);return new TextDecoder().decode(o)}async function uH(t){const e=await aH(t),n=new Uint8Array(e);return Bc(n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const YT="storage_not_supported",dH="stubbed_public_client_application_called",aR="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.25.0 2025-10-09 */const jv={[YT]:"Given storage configuration option was not supported.",[dH]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[aR]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};jv[YT],jv[dH],jv[aR];class cR extends Ot{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,cR.prototype)}}function lR(t){return new cR(t,jv[t])}/*! @azure/msal-browser v4.25.0 2025-10-09 */function hH(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function tre(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function uR(){return window.parent!==window}function nre(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${ni.POPUP_NAME_PREFIX}.`)===0}function ea(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function rre(){const e=new Tt(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function ire(){if(Tt.hashContainsKnownProperties(window.location.hash)&&uR())throw be(V3)}function sre(t){if(uR()&&!t)throw be(F3)}function ore(){if(nre())throw be(j3)}function fH(){if(typeof window>"u")throw be(QT)}function pH(t){if(!t)throw be(jp)}function dR(t){fH(),ire(),ore(),pH(t)}function WD(t,e){if(dR(t),sre(e.system.allowRedirectInIframe),e.cache.cacheLocation===$n.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw lR(aR)}function mH(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function are(){return Ms()}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Zw{navigateInternal(e,n){return Zw.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Zw.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,i)=>{setTimeout(()=>{i(be(Jw,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class cre{async sendGetRequestAsync(e,n){let r,i={},s=0;const o=KD(n);try{r=await fetch(e,{method:jD.GET,headers:o})}catch(a){throw yp(be(window.navigator.onLine?z3:Xw),void 0,void 0,a)}i=qD(r.headers);try{return s=r.status,{headers:i,body:await r.json(),status:s}}catch(a){throw yp(be(JI),s,i,a)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",i=KD(n);let s,o=0,a={};try{s=await fetch(e,{method:jD.POST,headers:i,body:r})}catch(c){throw yp(be(window.navigator.onLine?H3:Xw),void 0,void 0,c)}a=qD(s.headers);try{return o=s.status,{headers:a,body:await s.json(),status:o}}catch(c){throw yp(be(JI),o,a,c)}}}function KD(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,i])=>{e.append(r,i)}),e}catch(e){throw yp(be(tH),void 0,void 0,e)}}function qD(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw be(nH)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const lre=6e4,eA=1e4,ure=3e4,gH=2e3;function dre({auth:t,cache:e,system:n,telemetry:r},i){const s={clientId:ie.EMPTY_STRING,authority:`${ie.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:ie.EMPTY_STRING,authorityMetadata:ie.EMPTY_STRING,redirectUri:typeof window<"u"?ea():"",postLogoutRedirectUri:ie.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:hi.AAD,OIDCOptions:{serverResponseType:FT.FRAGMENT,defaultScopes:[ie.OPENID_SCOPE,ie.PROFILE_SCOPE,ie.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ex.None,tenant:ie.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},o={cacheLocation:$n.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:$n.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===$n.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Yt.Info,piiLoggingEnabled:!1},l={...{...t3,loggerOptions:a,networkClient:i?new cre:Sne,navigationClient:new Zw,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||lre,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||eA,navigateFrameWait:0,redirectNavigationTimeout:ure,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||gH,pollIntervalMilliseconds:ni.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},u={application:{appName:ie.EMPTY_STRING,appVersion:ie.EMPTY_STRING},client:new e3};if((t==null?void 0:t.protocolMode)!==hi.OIDC&&(t!=null&&t.OIDCOptions)&&new Dg(l.loggerOptions).warning(JSON.stringify(Lt(WB))),t!=null&&t.protocolMode&&t.protocolMode===hi.OIDC&&(l!=null&&l.allowPlatformBroker))throw Lt(KB);return{auth:{...s,...t,OIDCOptions:{...s.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...o,...e},system:l,telemetry:{...u,...r}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const hre="@azure/msal-browser",_u="4.25.0";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Yn="msal",hR="browser",RS="-",Ka=1,tA=1,fre=`${Yn}.${hR}.log.level`,pre=`${Yn}.${hR}.log.pii`,mre=`${Yn}.${hR}.platform.auth.dom`,GD=`${Yn}.version`,QD="account.keys",YD="token.keys";function Xs(t=tA){return t<1?`${Yn}.${QD}`:`${Yn}.${t}.${QD}`}function Wl(t,e=Ka){return e<1?`${Yn}.${YD}.${t}`:`${Yn}.${e}.${YD}.${t}`}/*! @azure/msal-browser v4.25.0 2025-10-09 */class fR{static loggerCallback(e,n){switch(e){case Yt.Error:console.error(n);return;case Yt.Info:console.info(n);return;case Yt.Verbose:console.debug(n);return;case Yt.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=dre(e,this.browserEnvironment);let n;try{n=window[$n.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(fre),i=(c=n==null?void 0:n.getItem(pre))==null?void 0:c.toLowerCase(),s=i==="true"?!0:i==="false"?!1:void 0,o={...this.config.system.loggerOptions},a=r&&Object.keys(Yt).includes(r)?Yt[r]:void 0;a&&(o.loggerCallback=fR.loggerCallback,o.logLevel=a),s!==void 0&&(o.piiLoggingEnabled=s),this.logger=new Dg(o,hre,_u),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Tu extends fR{getModuleName(){return Tu.MODULE_NAME}getId(){return Tu.ID}async initialize(){return this.available=typeof window<"u",this.available}}Tu.MODULE_NAME="";Tu.ID="StandardOperatingContext";/*! @azure/msal-browser v4.25.0 2025-10-09 */class gre{constructor(){this.dbName=ZI,this.version=jne,this.tableName=Une,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",i=>{const s=i;this.db=s.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(be(eR)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(be(ud));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,i)=>{if(!this.db)return i(be(ud));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),i(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(be(ud));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(be(ud));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();s.addEventListener("success",o=>{const a=o;this.closeConnection(),e(a.target.result)}),s.addEventListener("error",o=>{this.closeConnection(),n(o)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(be(ud));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);o.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),o.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(ZI),i=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(i),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(i),e(!0))),r.addEventListener("error",()=>(clearTimeout(i),n(!1)))})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */let XT=class{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.25.0 2025-10-09 */class yre{constructor(e){this.inMemoryCache=new XT,this.indexedDBCache=new gre,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Lg&&e.errorCode===eR)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class ma{constructor(e,n,r){this.logger=e,qne(r??!1),this.cache=new yre(this.logger),this.performanceClient=n}createNewGuid(){return Ms()}base64Encode(e){return Um(e)}base64Decode(e){return xs(e)}base64UrlEncode(e){return ev(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var u;const n=(u=this.performanceClient)==null?void 0:u.startMeasurement(j.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await Qne(ma.EXTRACTABLE,ma.POP_KEY_USAGES),i=await xS(r.publicKey),s={e:i.e,kty:i.kty,n:i.n},o=XD(s),a=await this.hashString(o),c=await xS(r.privateKey),l=await Yne(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:l,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw ae(OB)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,i){var C;const s=(C=this.performanceClient)==null?void 0:C.startMeasurement(j.CryptoOptsSignJwt,i),o=await this.cache.getItem(n);if(!o)throw be(Zx);const a=await xS(o.publicKey),c=XD(a),l=ev(JSON.stringify({kid:n})),u=Qx.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:l}),d=ev(u);e.cnf={jwk:JSON.parse(c)};const h=ev(JSON.stringify(e)),m=`${d}.${h}`,v=new TextEncoder().encode(m),T=await Xne(o.privateKey,v),y=Bc(new Uint8Array(T)),w=`${m}.${y}`;return s&&s.end({success:!0}),w}async hashString(e){return uH(e)}}ma.POP_KEY_USAGES=["sign","verify"];ma.EXTRACTABLE=!0;function XD(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.25.0 2025-10-09 */const vre=24*60*60*1e3,nA={Lax:"Lax",None:"None"};class yH{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let i=0;i<r.length;i++){const s=r[i],[o,...a]=decodeURIComponent(s).trim().split("="),c=a.join("=");if(o===n)return c}return""}getUserData(){throw ae(it)}setItem(e,n,r,i=!0,s=nA.Lax){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${s};`;if(r){const a=wre(r);o+=`expires=${a};`}(i||s===nA.None)&&(o+="Secure;"),document.cookie=o}async setUserData(){return Promise.reject(ae(it))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const i=decodeURIComponent(r).trim().split("=");n.push(i[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function wre(t){const e=new Date;return new Date(e.getTime()+t*vre).toUTCString()}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Up(t,e){const n=t.getItem(Xs(e));return n?JSON.parse(n):[]}function $p(t,e,n){const r=e.getItem(Wl(t,n));if(r){const i=JSON.parse(r);if(i&&i.hasOwnProperty("idToken")&&i.hasOwnProperty("accessToken")&&i.hasOwnProperty("refreshToken"))return i}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function rA(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.25.0 2025-10-09 */const JD="msal.cache.encryption",_re="msal.broadcast.cache";class Tre{constructor(e,n,r){if(!window.localStorage)throw lR(YT);this.memoryStorage=new XT,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(_re)}async initialize(e){const n=new yH,r=n.getItem(JD);let i={key:"",id:""};if(r)try{i=JSON.parse(r)}catch{}if(i.key&&i.id){const s=Ni(Nc,j.Base64Decode,this.logger,this.performanceClient,e)(i.key);this.encryptionCookie={id:i.id,key:await re(HD,j.GenerateHKDF,this.logger,this.performanceClient,e)(s)}}else{const s=Ms(),o=await re(cH,j.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Ni(Bc,j.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(o));this.encryptionCookie={id:s,key:await re(HD,j.GenerateHKDF,this.logger,this.performanceClient,e)(o)};const c={id:s,key:a};n.setItem(JD,JSON.stringify(c),0,!0,nA.None)}await re(this.importExistingCache.bind(this),j.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw be(jp);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw be(jp);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const i=await re(zD,j.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!i)return null;try{return JSON.parse(i)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,i){if(!this.initialized||!this.encryptionCookie)throw be(jp);const{data:s,nonce:o}=await re(ere,j.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:o,data:s,lastUpdatedAt:i};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Up(this).forEach(r=>this.removeItem(r));const n=$p(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Yn)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Up(this);n=await this.importArray(n,e),n.length?this.setItem(Xs(),JSON.stringify(n)):this.removeItem(Xs());const r=$p(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Wl(this.clientId),JSON.stringify(r)):this.removeItem(Wl(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let i;try{i=JSON.parse(r)}catch{return null}return rA(i)?i.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):re(zD,j.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,i.nonce,this.getContext(e),i.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),i)}async importArray(e,n){const r=[],i=[];return e.forEach(s=>{const o=this.getItemFromEncryptedCache(s,n).then(a=>{a?(this.memoryStorage.setItem(s,a),r.push(s)):this.removeItem(s)});i.push(o)}),await Promise.all(i),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(j.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:i,context:s}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(s&&s!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${s}`),n.end({success:!1,errorCode:"contextMismatch"});return}i?(this.memoryStorage.setItem(r,i),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */let Cre=class{constructor(){if(!window.sessionStorage)throw lR(YT)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};/*! @azure/msal-browser v4.25.0 2025-10-09 */const Le={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.25.0 2025-10-09 */function ZD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class iA extends QI{constructor(e,n,r,i,s,o,a){super(e,r,i,s,a),this.cacheConfig=n,this.logger=i,this.internalStorage=new XT,this.browserStorage=eL(e,n.cacheLocation,i,s),this.temporaryCacheStorage=eL(e,n.temporaryCacheLocation,i,s),this.cookieStorage=new yH,this.eventHandler=o}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=Up(this.browserStorage,0),r=$p(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const i=Up(this.browserStorage,1),s=$p(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:i.length,currAccessCount:s.accessToken.length,currIdCount:s.idToken.length,currRefreshCount:s.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(tA,n,i,e),this.updateV0ToCurrent(Ka,r.idToken,s.idToken,e),this.updateV0ToCurrent(Ka,r.accessToken,s.accessToken,e),this.updateV0ToCurrent(Ka,r.refreshToken,s.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Xs(0),JSON.stringify(n)):this.browserStorage.removeItem(Xs(0)),i.length>0?this.browserStorage.setItem(Xs(1),JSON.stringify(i)):this.browserStorage.removeItem(Xs(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(s,e,1)}async updateV0ToCurrent(e,n,r,i){const s=[];for(const o of[...n]){const a=this.browserStorage.getItem(o),c=this.validateAndParseJson(a||"");if(!c){ZD(n,o);continue}c.lastUpdatedAt||(c.lastUpdatedAt=Date.now().toString(),this.setItem(o,JSON.stringify(c),i));const l=rA(c)?await this.browserStorage.decryptData(o,c,i):c;let u;if(l&&(ND(l)||OD(l))&&(u=l.expiresOn),!l||ine(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||u&&Gw(u,yB)){this.browserStorage.removeItem(o),ZD(n,o),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},i);continue}if(this.cacheConfig.cacheLocation!==$n.LocalStorage||rA(c)){const d=`${Yn}.${e}${RS}${o}`,h=this.browserStorage.getItem(d);if(h){const m=this.validateAndParseJson(h);if(Number(c.lastUpdatedAt)>Number(m.lastUpdatedAt)){s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},i)}));continue}}else{s.push(this.setUserData(d,JSON.stringify(l),i,c.lastUpdatedAt).then(()=>{r.push(d),this.performanceClient.incrementFields({upgradedCacheCount:1},i)}));continue}}}return Promise.all(s)}trackVersionChanges(e){const n=this.browserStorage.getItem(GD);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==_u&&this.setItem(GD,_u,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let i=0,s=[];const o=20;for(let a=0;a<=o;a++)try{this.browserStorage.setItem(e,n),a>0&&(a<=i?this.removeAccessTokenKeys(s.slice(0,a),r,0):(this.removeAccessTokenKeys(s.slice(0,i),r,0),this.removeAccessTokenKeys(s.slice(i,a),r)));break}catch(c){const l=GI(c);if(l.errorCode===Hw&&a<o){if(!s.length){const u=e===Wl(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,d=e===Wl(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;s=[...u,...d],i=u.length}if(s.length<=a)throw l;this.removeAccessToken(s[a],r,!1)}else throw l}}async setUserData(e,n,r,i){let s=0,o=[];const a=20;for(let c=0;c<=a;c++)try{await re(this.browserStorage.setUserData.bind(this.browserStorage),j.SetUserData,this.logger,this.performanceClient)(e,n,r,i),c>0&&(c<=s?this.removeAccessTokenKeys(o.slice(0,c),r,0):(this.removeAccessTokenKeys(o.slice(0,s),r,0),this.removeAccessTokenKeys(o.slice(s,c),r)));break}catch(l){const u=GI(l);if(u.errorCode===Hw&&c<a){if(!o.length){const d=this.getTokenKeys(0).accessToken,h=this.getTokenKeys().accessToken;o=[...d,...h],s=d.length}if(o.length<=c)throw u;this.removeAccessToken(o[c],r,!1)}else throw u}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const i=this.validateAndParseJson(r);return!i||!Ns.isAccountEntity(i)?null:QI.toObject(new Ns,i)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===$n.LocalStorage&&s&&this.eventHandler.emitEvent(Le.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Up(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Xs(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),i=r.indexOf(e);if(i>-1){if(r.splice(i,1),r.length===0){this.removeItem(Xs());return}else this.setItem(Xs(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(i=>{i.includes(e.homeAccountId)&&i.includes(e.environment)&&this.browserStorage.removeItem(i)}),this.cacheConfig.cacheLocation===$n.LocalStorage&&this.eventHandler.emitEvent(Le.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),i=r.idToken.indexOf(e);i>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(i,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=Ka){this.logger.trace("removeAccessTokenKey called");const i=this.getTokenKeys(r);let s=0;if(e.forEach(o=>{const a=i.accessToken.indexOf(o);a>-1&&(i.accessToken.splice(a,1),s++)}),s>0){this.logger.info(`removed ${s} accessToken keys from tokenKeys map`),this.setTokenKeys(i,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),i=r.refreshToken.indexOf(e);i>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(i,1),this.setTokenKeys(r,n))}getTokenKeys(e=Ka){return $p(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=Ka){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Wl(this.clientId,r));return}else this.setItem(Wl(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!one(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(r),this.setTokenKeys(s,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const i=this.validateAndParseJson(r);return!i||!ND(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys(),o=s.accessToken.indexOf(r);o!==-1&&s.accessToken.splice(o,1),this.logger.trace(`access token ${o===-1?"added to":"updated in"} map`),s.accessToken.push(r),this.setTokenKeys(s,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const i=this.validateAndParseJson(r);return!i||!OD(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(r,JSON.stringify(e),n,i);const s=this.getTokenKeys();s.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(r),this.setTokenKeys(s,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!une(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=lne(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!ane(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&dne(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(Zy.WRAPPER_SKU,e),this.internalStorage.setItem(Zy.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Zy.WRAPPER_SKU)||ie.EMPTY_STRING,n=this.internalStorage.getItem(Zy.WRAPPER_VER)||ie.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(wD.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const i=this.validateAndParseJson(r);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(wD.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:mi().toString()};this.setItem(r,JSON.stringify(i),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Le.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!cne(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const s=this.cookieStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),s}const i=this.temporaryCacheStorage.getItem(r);if(!i){if(this.cacheConfig.cacheLocation===$n.LocalStorage){const s=this.browserStorage.getItem(r);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),s}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),i}setTemporaryCache(e,n,r){const i=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(i,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(i,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(Yn)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(Yn)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(j.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i,e);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(i,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return Pi.startsWith(e,Yn)?e:`${Yn}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===ar.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==xt.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Yn}.${Ka}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(RS).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${Yn}.${tA}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(RS).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Cn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Cn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Cn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Cn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Cn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Um(JSON.stringify(e));if(this.setTemporaryCache(Cn.REQUEST_PARAMS,r,!0),n){const i=Um(n);this.setTemporaryCache(Cn.VERIFIER,i,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Cn.REQUEST_PARAMS,!0);if(!e)throw be($3);const n=this.getTemporaryCache(Cn.VERIFIER,!0);let r,i="";try{r=JSON.parse(xs(e)),n&&(i=xs(n))}catch(s){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${s}`),be(B3)}return[r,i]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Cn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const n=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${Yn}.${Cn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),hH(window),null}}setInteractionInProgress(e,n=nc.SIGNIN){var i;const r=`${Yn}.${Cn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw be(O3);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&((i=this.getInteractionInProgress())==null?void 0:i.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){var a,c,l;const r=BT((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let i;n.claims&&(i=await this.cryptoImpl.hashString(n.claims));const s=HT((l=e.account)==null?void 0:l.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?PD(e.expiresOn):0,e.extExpiresOn?PD(e.extExpiresOn):0,xs,void 0,e.tokenType,void 0,n.sshKid,n.claims,i),o={idToken:r,accessToken:s};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(i){if(i instanceof Wd&&this.performanceClient&&n)try{const s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},n)}catch{}throw i}}}function eL(t,e,n,r){try{switch(e){case $n.LocalStorage:return new Tre(t,n,r);case $n.SessionStorage:return new Cre;case $n.MemoryStorage:default:break}}catch(i){n.error(i)}return new XT}const Ere=(t,e,n,r)=>{const i={cacheLocation:$n.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:$n.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new iA(t,i,Uw,e,n,r)};/*! @azure/msal-browser v4.25.0 2025-10-09 */function Sre(t,e,n,r,i){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(i||{},r):[]}function bre(t,e,n,r){const i=n.getAccountInfoFilteredBy(t,r);return i?(e.verbose("getAccount: Account matching provided filter found, returning"),i):(e.verbose("getAccount: No matching account found, returning null"),null)}function Ire(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const i=n.getAccountInfoFilteredBy({username:t},r);return i?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),i):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Are(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const i=n.getAccountInfoFilteredBy({homeAccountId:t},r);return i?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),i):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function kre(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const i=n.getAccountInfoFilteredBy({localAccountId:t},r);return i?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),i):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function xre(t,e,n){e.setActiveAccount(t,n)}function Rre(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Pre="msal.broadcast.event";class Nre{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Dg({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Pre)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const i=r||are();return this.eventCallbacks.has(i)?(this.logger.error(`Event callback with id: ${i} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(i,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${i}`),i)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,i){var o;const s={eventType:e,interactionType:n||null,payload:r||null,error:i||null,timestamp:Date.now()};switch(e){case Le.ACCOUNT_ADDED:case Le.ACCOUNT_REMOVED:case Le.ACTIVE_ACCOUNT_CHANGED:(o=this.broadcastChannel)==null||o.postMessage(s);break;default:this.invokeCallbacks(s);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],i)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${i}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class vH{constructor(e,n,r,i,s,o,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=s,this.navigationClient=o,this.platformAuthProvider=c,this.correlationId=l||Ms(),this.logger=i.clone(ni.MSAL_SKU,_u,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return Tt.getAbsoluteUrl(n,ea())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Vm(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(j.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const i={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||this.config.auth.authority,o=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&o?this.config.auth.authority.replace(Tt.getDomainFromUrl(s),n.environment):s,c=Tr.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await re(v3,j.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,i,this.logger,this.correlationId,this.performanceClient);if(n&&!l.isAlias(n.environment))throw Lt(qB);return l}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function pR(t,e,n,r){n.addQueueMeasurement(j.InitializeBaseRequest,t.correlationId);const i=t.authority||e.auth.authority,s=[...t&&t.scopes||[]],o={...t,correlationId:t.correlationId,authority:i,scopes:s};if(!o.authenticationScheme)o.authenticationScheme=xt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(o.authenticationScheme===xt.SSH){if(!t.sshJwk)throw Lt(VT);if(!t.sshKid)throw Lt(zB)}r.verbose(`Authentication Scheme set to "${o.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!Pi.isEmptyObj(t.claims)&&(o.requestedClaimsHash=await uH(t.claims)),o}async function Ore(t,e,n,r,i){r.addQueueMeasurement(j.InitializeSilentRequest,t.correlationId);const s=await re(pR,j.InitializeBaseRequest,i,r,t.correlationId)(t,n,r,i);return{...t,...s,account:e,forceRefresh:t.forceRefresh||!1}}function wH(t,e){let n;const r=t.httpMethod;if(e===hi.EAR){if(n=r||zl.POST,n!==zl.POST)throw Lt(GB)}else n=r||zl.GET;if(t.authorizePostBodyParameters&&n!==zl.POST)throw Lt(QB);return n}/*! @azure/msal-browser v4.25.0 2025-10-09 */class lf extends vH{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||Ms(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=Tt.getAbsoluteUrl(e.postLogoutRedirectUri,ea())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=Tt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ea())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=Tt.getAbsoluteUrl(ea(),ea())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(j.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await re(this.getClientConfiguration.bind(this),j.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new E3(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}=e;this.performanceClient.addQueueMeasurement(j.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:o}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:ni.MSAL_SKU,version:_u,cpu:ie.EMPTY_STRING,os:ie.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(j.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),i={interactionType:n},s=af.setRequestState(this.browserCrypto,e&&e.state||ie.EMPTY_STRING,i),a={...await re(pR,j.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:s,nonce:e.nonce||Ms(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c={...a,httpMethod:wH(a,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return c;const l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Mre(t,e){if(!e)return null;try{return af.parseRequestState(t,e).libraryState.meta}catch{throw ae(Ch)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Bp(t,e,n){const r=$w(t);if(!r)throw XB(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),be(R3)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),be(x3));return r}function Dre(t,e,n){if(!t.state)throw be(Jx);const r=Mre(e,t.state);if(!r)throw be(P3);if(r.interactionType!==n)throw be(N3)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class _H{constructor(e,n,r,i,s){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=i,this.performanceClient=s}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(j.HandleCodeResponse,n.correlationId);let r;try{r=Ine(e,n.state)}catch(i){throw i instanceof Hu&&i.subError===jm?be(jm):i}return re(this.handleCodeResponseFromServer.bind(this),j.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(j.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await re(this.authModule.updateAuthority.bind(this.authModule),j.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const s=this.createCcsCredentials(n);s&&(this.authCodeRequest.ccsCredential=s)}return await re(this.authModule.acquireToken.bind(this.authModule),j.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Ss.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Ss.UPN}:null}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Lre="ContentError",Fre="PageException",TH="user_switch";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Vre="USER_INTERACTION_REQUIRED",jre="USER_CANCEL",Ure="NO_NETWORK",$re="DISABLED",Bre="ACCOUNT_UNAVAILABLE",Hre="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.25.0 2025-10-09 */const zre=-2147186943,Wre={[TH]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class io extends Ot{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,io.prototype),this.name="NativeAuthError",this.ext=r}}function dd(t){if(t.ext&&t.ext.status&&t.ext.status===$re||t.ext&&t.ext.error&&t.ext.error===zre)return!0;switch(t.errorCode){case Lre:case Fre:return!0;default:return!1}}function e_(t,e,n){if(n&&n.status)switch(n.status){case Bre:return Yw(_3);case Vre:return new Os(t,e);case jre:return be(jm);case Ure:return be(Xw);case Hre:return Yw(Wx)}return new io(t,Wre[t]||e,n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class CH extends lf{async acquireToken(e){this.performanceClient.addQueueMeasurement(j.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(Nt.acquireTokenSilent_silentFlow),r=await re(this.getClientConfiguration.bind(this),j.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new Ene(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const o=(await re(i.acquireCachedToken.bind(i),j.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),o}catch(s){throw s instanceof Lg&&s.errorCode===Zx&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n==null?void 0:n.account)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Uv extends vH{constructor(e,n,r,i,s,o,a,c,l,u,d,h){super(e,n,r,i,s,o,c,l,h),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=d,this.silentCacheClient=new CH(e,this.nativeStorageManager,r,i,s,o,c,l,h);const m=this.platformAuthProvider.getExtensionName();this.skus=Vm.makeExtraSkuString({libraryName:ni.MSAL_SKU,libraryVersion:_u,extensionName:m,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[Vte]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(j.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(j.NativeInteractionClientAcquireToken,this.correlationId),i=mi(),s=this.initializeServerTelemetryManager(this.apiId);try{const o=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,o);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(n===Mr.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const a=await this.platformAuthProvider.sendMessage(o);return await this.handleNativeResponse(a,o,i).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),s.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(o){throw o instanceof io&&s.setNativeBrokerErrorCode(o.errorCode),r.end({success:!1}),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Un.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ae(WI);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw ae(WI);try{const i=this.createSilentCacheRequest(n,r),s=await this.silentCacheClient.acquireToken(i),o={...r,idTokenClaims:s==null?void 0:s.idTokenClaims,idToken:s==null?void 0:s.idToken};return{...s,account:o}}catch(i){throw i}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const i=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(i)}catch(a){if(a instanceof io&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),dd(a)))throw a}this.browserStorage.setTemporaryCache(Cn.NATIVE_REQUEST,JSON.stringify(i),!0);const s={apiId:Nt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(o,s)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:i,...s}=r;i&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cn.NATIVE_REQUEST));const o=mi();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const a=await this.platformAuthProvider.sendMessage(s),c=await this.handleNativeResponse(a,s,o);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),c}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var u,d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=of(e.id_token,xs),s=this.createHomeAccountIdentifier(e,i),o=(u=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId))==null?void 0:u.homeAccountId;if((d=n.extraParameters)!=null&&d.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(s!==o&&e.account.id!==n.accountId)throw e_(TH);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=Kx(this.browserStorage,a,s,xs,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const l=await this.generateAuthenticationResult(e,n,i,c,a.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId),await this.cacheNativeTokens(e,n,s,i,e.access_token,l.tenantId,r),l}createHomeAccountIdentifier(e,n){return Ns.generateHomeAccountId(e.client_info||ie.EMPTY_STRING,ws.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?Un.fromString(n):Un.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===xt.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Eh(this.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw ae(_x);return r.signPopToken(e.access_token,n.keyId,i)}else return e.access_token}async generateAuthenticationResult(e,n,r,i,s,o){const a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(n.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||ie.EMPTY_STRING,d=l.TenantId||r.tid||ie.EMPTY_STRING,h=xx(i.getAccountInfo(),void 0,r,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const m=await this.generatePopAccessToken(e,n),_=n.tokenType===xt.POP?xt.POP:xt.BEARER;return{authority:s,uniqueId:u,tenantId:d,scopes:c.asArray(),account:h,idToken:e.id_token,idTokenClaims:r,accessToken:m,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:qd(o+e.expires_in),tokenType:_,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,i,s,o,a){const c=BT(r,n.authority,e.id_token||"",n.clientId,i.tid||""),l=n.tokenType===xt.POP?ie.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,d=this.generateScopes(e.scope,n.scope),h=HT(r,n.authority,s,n.clientId,i.tid||o,d.printScopes(),u,0,xs,void 0,n.tokenType,void 0,n.keyId),m={idToken:c,accessToken:h};return this.nativeStorageManager.saveCacheRecord(m,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===xt.POP?ie.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...i}=e,s=new Un(r||[]);s.appendScopes(sf);const o={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(o.signPopToken&&e.popKid)throw be(eH);if(this.handleExtraBrokerParams(o),o.extraParameters=o.extraParameters||{},o.extraParameters.telemetry=qi.MATS_TELEMETRY,e.authenticationScheme===xt.POP){const a={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},c=new Eh(this.browserCrypto);let l;if(o.keyId)l=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:o.keyId})),o.signPopToken=!1;else{const u=await re(c.generateCnf.bind(c),j.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(a,this.logger);l=u.reqCnfString,o.keyId=u.kid,o.signPopToken=!0}o.reqCnf=l}return this.addRequestSKUs(o),o}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Tt(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case Nt.ssoSilent:case Nt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),lr.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case lr.NONE:case lr.CONSENT:case lr.LOGIN:case lr.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),be(J3)}}handleExtraBrokerParams(e){var s;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Ww)&&e.extraParameters.hasOwnProperty(Kw)&&e.extraParameters.hasOwnProperty(vu);if(!e.embeddedClientId&&!n)return;let r="";const i=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Kw],r=e.extraParameters[vu]),e.extraParameters={child_client_id:r,child_redirect_uri:i},(s=this.performanceClient)==null||s.addFields({embeddedClientId:r,embeddedRedirectUri:i},this.correlationId)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function mR(t,e,n,r,i){const s=bne({...t.auth,authority:e},n,r,i);if(Vx(s,{sku:ni.MSAL_SKU,version:_u,os:"",cpu:""}),t.auth.protocolMode!==hi.OIDC&&jx(s,t.telemetry.application),n.platformBroker&&(Bte(s),i.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===xt.POP)){const o=new ma(r,i),a=new Eh(o);let c;n.popKid?c=o.encodeKid(n.popKid):c=(await re(a.generateCnf.bind(a),j.PopTokenGenerateCnf,r,i,n.correlationId)(n,r)).reqCnfString,$x(s,c)}return jT(s,n.correlationId,i),s}async function gR(t,e,n,r,i){if(!n.codeChallenge)throw Lt(bx);const s=await re(mR,j.GetStandardParams,r,i,n.correlationId)(t,e,n,r,i);return Nx(s,fx.CODE),a3(s,n.codeChallenge,ie.S256_CODE_CHALLENGE_METHOD),Pc(s,n.extraQueryParameters||{}),qx(e,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function yR(t,e,n,r,i,s){if(!r.earJwk)throw be(Xx);const o=await mR(e,n,r,i,s);Nx(o,fx.IDTOKEN_TOKEN_REFRESHTOKEN),Zte(o,r.earJwk);const a=new Map;Pc(a,r.extraQueryParameters||{});const c=qx(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return EH(t,c,o)}async function vR(t,e,n,r,i,s){const o=await mR(e,n,r,i,s);Nx(o,fx.CODE),a3(o,r.codeChallenge,r.codeChallengeMethod||ie.S256_CODE_CHALLENGE_METHOD),ene(o,r.authorizePostBodyParameters||{});const a=new Map;Pc(a,r.extraQueryParameters||{});const c=qx(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return EH(t,c,o)}function EH(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((i,s)=>{const o=t.createElement("input");o.hidden=!0,o.name=s,o.value=i,r.appendChild(o)}),t.body.appendChild(r),r}async function SH(t,e,n,r,i,s,o,a,c,l){if(a.verbose("Account id found, calling WAM for token"),!l)throw be(tR);const u=new ma(a,c),d=new Uv(r,i,u,a,o,r.system.navigationClient,n,c,l,e,s,t.correlationId),{userRequestState:h}=af.parseRequestState(u,t.state);return re(d.acquireToken.bind(d),j.NativeInteractionClientAcquireToken,a,c,t.correlationId)({...t,state:h,prompt:void 0})}async function t_(t,e,n,r,i,s,o,a,c,l,u,d){if(ro.removeThrottle(o,i.auth.clientId,t),e.accountId)return re(SH,j.HandleResponsePlatformBroker,l,u,t.correlationId)(t,e.accountId,r,i,o,a,c,l,u,d);const h={...t,code:e.code||"",codeVerifier:n},m=new _H(s,o,h,l,u);return await re(m.handleCodeResponse.bind(m),j.HandleCodeResponse,l,u,t.correlationId)(e,t)}async function wR(t,e,n,r,i,s,o,a,c,l,u){if(ro.removeThrottle(s,r.auth.clientId,t),S3(e,t.state),!e.ear_jwe)throw be(k3);if(!t.earJwk)throw be(Xx);const d=JSON.parse(await re(Zne,j.DecryptEarResponse,c,l,t.correlationId)(t.earJwk,e.ear_jwe));if(d.accountId)return re(SH,j.HandleResponsePlatformBroker,c,l,t.correlationId)(t,d.accountId,n,r,s,o,a,c,l,u);const h=new wu(r.auth.clientId,s,new ma(c,l),c,null,null,l);h.validateTokenResponse(d);const m={code:"",state:t.state,nonce:t.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await re(h.handleServerTokenResponse.bind(h),j.HandleServerTokenResponse,c,l,t.correlationId)(d,i,mi(),t,m,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Kre=32;async function JT(t,e,n){t.addQueueMeasurement(j.GeneratePkceCodes,n);const r=Ni(qre,j.GenerateCodeVerifier,e,t,n)(t,e,n),i=await re(Gre,j.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:i}}function qre(t,e,n){try{const r=new Uint8Array(Kre);return Ni(Gne,j.GetRandomValues,e,t,n)(r),Bc(r)}catch{throw be(Yx)}}async function Gre(t,e,n,r){e.addQueueMeasurement(j.GenerateCodeChallengeFromVerifier,r);try{const i=await re(aH,j.Sha256Digest,n,e,r)(t,e,r);return Bc(new Uint8Array(i))}catch{throw be(Yx)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class n_{constructor(e,n,r,i){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=i,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(j.NativeMessageHandlerHandshake),this.platformAuthType=qi.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:ep.GetToken,request:e},r={channel:qi.CHANNEL_ID,extensionId:this.extensionId,responseId:Ms(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const i=await new Promise((o,a)=>{this.resolvers.set(r.responseId,{resolve:o,reject:a})});return this.validatePlatformBrokerResponse(i)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const i=new n_(e,n,r,qi.PREFERRED_EXTENSION_ID);return await i.sendHandshakeRequest(),i}catch{const s=new n_(e,n,r);return await s.sendHandshakeRequest(),s}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:qi.CHANNEL_ID,extensionId:this.extensionId,responseId:Ms(),body:{method:ep.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(be(Y3)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==qi.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===ep.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(be(X3))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),i=this.handshakeResolvers.get(n.responseId);try{const s=n.body.method;if(s===ep.Response){if(!r)return;const o=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(o)}`),o.status!=="Success")r.reject(e_(o.code,o.description,o.ext));else if(o.result)o.result.code&&o.result.description?r.reject(e_(o.result.code,o.result.description,o.result.ext)):r.resolve(o.result);else throw BI(jw,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(s===ep.HandshakeResponse){if(!i){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),i.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(s){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${s}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(s):i&&i.reject(s)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw BI(jw,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===qi.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class _R{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=qi.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){var i;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(i=window.navigator)!=null&&i.platformAuthentication){const s=await window.navigator.platformAuthentication.getSupportedContracts(qi.MICROSOFT_ENTRA_BROKERID);if(s!=null&&s.includes(qi.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new _R(e,n,r)}}getExtensionId(){return qi.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return qi.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:i,scope:s,redirectUri:o,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:d,...h}=e,m=this.getDOMExtraParams(h);return{accountId:n,brokerId:this.getExtensionId(),authority:i,clientId:r,correlationId:a||this.correlationId,extraParameters:{...d,...m},isSecurityTokenService:!1,redirectUri:o,scope:s,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),e_(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw BI(jw,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((i,[s,o])=>(i[s]=String(o),i),{})}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function Qre(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const i=Yre();t.trace("Has client allowed platform auth via DOM API: "+i);let s;try{i&&(s=await _R.createProvider(t,e,n)),s||(t.trace("Platform auth via DOM API not available, checking for extension"),s=await n_.createProvider(t,r||gH,e))}catch(o){t.trace("Platform auth not available",o)}return s}function Yre(){let t;try{return t=window[$n.SessionStorage],(t==null?void 0:t.getItem(mre))==="true"}catch{return!1}}function $m(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case xt.BEARER:case xt.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Xre extends lf{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=s}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||sf,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const s={...e,httpMethod:wH(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(s,r,n)}}catch(i){return Promise.reject(i)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},i=e&&e.authority,s=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,i,s)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,i,s))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const i=await re(this.initializeAuthorizationRequest.bind(this),j.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,je.Popup);n.popup&&mH(i.authority);const s=$m(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return i.platformBroker=s,this.config.auth.protocolMode===hi.EAR?this.executeEarFlow(i,n):this.executeCodeFlow(i,n,r)}async executeCodeFlow(e,n,r){var c;const i=e.correlationId,s=this.initializeServerTelemetryManager(Nt.acquireTokenPopup),o=r||await re(JT,j.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),a={...e,codeChallenge:o.challenge};try{const l=await re(this.createAuthCodeClient.bind(this),j.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i)({serverTelemetryManager:s,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===zl.POST)return await this.executeCodeFlowWithPost(a,n,l,o.verifier);{const u=await re(gR,j.GetAuthCodeUrl,this.logger,this.performanceClient,i)(this.config,l.authority,a,this.logger,this.performanceClient),d=this.initiateAuthRequest(u,n);this.eventHandler.emitEvent(Le.POPUP_OPENED,je.Popup,{popupWindow:d},null);const h=await this.monitorPopupForHash(d,n.popupWindowParent),m=Ni(Bp,j.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await re(t_,j.HandleResponseCode,this.logger,this.performanceClient,i)(e,m,o.verifier,Nt.acquireTokenPopup,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(l){throw(c=n.popup)==null||c.close(),l instanceof Ot&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),l}}async executeEarFlow(e,n){const r=e.correlationId,i=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await re(oR,j.GenerateEarKey,this.logger,this.performanceClient,r)(),o={...e,earJwk:s},a=n.popup||this.openPopup("about:blank",n);(await yR(a.document,this.config,i,o,this.logger,this.performanceClient)).submit();const l=await re(this.monitorPopupForHash.bind(this),j.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,n.popupWindowParent),u=Ni(Bp,j.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return re(wR,j.HandleResponseEar,this.logger,this.performanceClient,r)(o,u,Nt.acquireTokenPopup,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,i){const s=e.correlationId,o=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,s)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=n.popup||this.openPopup("about:blank",n);(await vR(a.document,this.config,o,e,this.logger,this.performanceClient)).submit();const l=await re(this.monitorPopupForHash.bind(this),j.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,s)(a,n.popupWindowParent),u=Ni(Bp,j.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return re(t_,j.HandleResponseCode,this.logger,this.performanceClient,s)(e,u,i,Nt.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,i){var o,a,c;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Le.LOGOUT_START,je.Popup,e);const s=this.initializeServerTelemetryManager(Nt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const l=await re(this.createAuthCodeClient.bind(this),j.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0});try{l.authority.endSessionEndpoint}catch{if((o=e.account)!=null&&o.homeAccountId&&e.postLogoutRedirectUri&&l.authority.protocolMode===hi.OIDC){if(this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,je.Popup,e),i){const h={apiId:Nt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=Tt.getAbsoluteUrl(i,ea());await this.navigationClient.navigateInternal(m,h)}(a=n.popup)==null||a.close();return}}const u=l.getLogoutUri(e);this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,je.Popup,e);const d=this.openPopup(u,n);if(this.eventHandler.emitEvent(Le.POPUP_OPENED,je.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,n.popupWindowParent).catch(()=>{}),i){const h={apiId:Nt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},m=Tt.getAbsoluteUrl(i,ea());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${m}`),await this.navigationClient.navigateInternal(m,h)}else this.logger.verbose("No main window navigation requested")}catch(l){throw(c=n.popup)==null||c.close(),l instanceof Ot&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,je.Popup,null,l),this.eventHandler.emitEvent(Le.LOGOUT_END,je.Popup),l}this.eventHandler.emitEvent(Le.LOGOUT_END,je.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),be(qT)}monitorPopupForHash(e,n){return new Promise((r,i)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const s=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(s),i(be(jm));return}let o="";try{o=e.location.href}catch{}if(!o||o==="about:blank")return;clearInterval(s);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===FT.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw be(D3);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),be(M3)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:i}){var m,_,v,T;const s=i.screenLeft?i.screenLeft:i.screenX,o=i.screenTop?i.screenTop:i.screenY,a=i.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=i.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=(m=r.popupSize)==null?void 0:m.width,u=(_=r.popupSize)==null?void 0:_.height,d=(v=r.popupPosition)==null?void 0:v.top,h=(T=r.popupPosition)==null?void 0:T.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=ni.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=ni.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-ni.POPUP_HEIGHT/2+o)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-ni.POPUP_WIDTH/2+s)),i.open(e,n,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${ni.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${ni.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Jre(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class Zre extends lf{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,a,l,u),this.nativeStorage=c}async acquireToken(e){const n=await re(this.initializeAuthorizationRequest.bind(this),j.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,je.Redirect);n.platformBroker=$m(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=s=>{s.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Le.RESTORE_FROM_BFCACHE,je.Redirect))},i=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${i}`),this.browserStorage.setTemporaryCache(Cn.ORIGIN_URI,i,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===hi.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(s){throw s instanceof Ot&&s.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),s}}async executeCodeFlow(e,n){const r=e.correlationId,i=this.initializeServerTelemetryManager(Nt.acquireTokenRedirect),s=await re(JT,j.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),o={...e,codeChallenge:s.challenge};this.browserStorage.cacheAuthorizeRequest(o,s.verifier);try{if(o.httpMethod===zl.POST)return await this.executeCodeFlowWithPost(o);{const a=await re(this.createAuthCodeClient.bind(this),j.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=await re(gR,j.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,o,this.logger,this.performanceClient);return await this.initiateAuthRequest(c,n)}}catch(a){throw a instanceof Ot&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}}async executeEarFlow(e){const n=e.correlationId,r=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await re(oR,j.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i};return this.browserStorage.cacheAuthorizeRequest(s),(await yR(document,this.config,r,s,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(be(Jw,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await vR(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((s,o)=>{setTimeout(()=>{o(be(Jw,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,i){const s=this.initializeServerTelemetryManager(Nt.handleRedirectPromise);try{const[o,a]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Jre()!=="back_forward"?i.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(Cn.ORIGIN_URI,!0)||ie.EMPTY_STRING,l=bD(c),u=bD(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&tre(c),await this.handleResponse(o,n,r,s);if(this.config.auth.navigateToLoginRequestUrl){if(!uR()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Cn.URL_HASH,a,!0);const d={apiId:Nt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let h=!0;if(!c||c==="null"){const m=rre();this.browserStorage.setTemporaryCache(Cn.ORIGIN_URI,m,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),h=await this.navigationClient.navigateInternal(m,d)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),h=await this.navigationClient.navigateInternal(c,d);if(!h)return await this.handleResponse(o,n,r,s)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,n,r,s);return null}catch(o){throw o instanceof Ot&&(o.setCorrelationId(this.correlationId),s.cacheFailedRequest(o)),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===FT.QUERY?n=window.location.search:n=window.location.hash);let r=$w(n);if(r){try{Dre(r,this.browserCrypto,je.Redirect)}catch(s){return s instanceof Ot&&this.logger.error(`Interaction type validation failed due to ${s.errorCode}: ${s.errorMessage}`),[null,""]}return hH(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const i=this.browserStorage.getTemporaryCache(Cn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cn.URL_HASH)),i&&(r=$w(i),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,i]):[null,""]}async handleResponse(e,n,r,i){if(!e.state)throw be(Jx);if(e.ear_jwe){const a=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return re(wR,j.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,Nt.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await re(this.createAuthCodeClient.bind(this),j.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:n.authority});return re(t_,j.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,Nt.acquireTokenRedirect,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Nt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=n||this.config.auth.onRedirectNavigate;if(typeof i=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),i(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),be(qT)}async logout(e){var i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Nt.logout);try{this.eventHandler.emitEvent(Le.LOGOUT_START,je.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const s={apiId:Nt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await re(this.createAuthCodeClient.bind(this),j.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===hi.OIDC)try{o.authority.endSessionEndpoint}catch{if((i=n.account)!=null&&i.homeAccountId){this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,je.Redirect,n);return}}const a=o.getLogoutUri(n);if(this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,je.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(a)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,nc.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,nc.SIGNOUT),await this.navigationClient.navigateExternal(a,s);return}}catch(s){throw s instanceof Ot&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,je.Redirect,null,s),this.eventHandler.emitEvent(Le.LOGOUT_END,je.Redirect),s}this.eventHandler.emitEvent(Le.LOGOUT_END,je.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return Tt.getAbsoluteUrl(n,ea())}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function eie(t,e,n,r,i){if(e.addQueueMeasurement(j.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),be(qT);return i?re(rie,j.SilentHandlerLoadFrame,n,e,r)(t,i,e,r):Ni(iie,j.SilentHandlerLoadFrameSync,n,e,r)(t)}async function tie(t,e,n,r,i){const s=ZT();if(!s.contentDocument)throw"No document associated with iframe!";return(await vR(s.contentDocument,t,e,n,r,i)).submit(),s}async function nie(t,e,n,r,i){const s=ZT();if(!s.contentDocument)throw"No document associated with iframe!";return(await yR(s.contentDocument,t,e,n,r,i)).submit(),s}async function tL(t,e,n,r,i,s,o){return r.addQueueMeasurement(j.SilentHandlerMonitorIframeForHash,s),new Promise((a,c)=>{e<eA&&i.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${eA}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(be(L3))},e),u=window.setInterval(()=>{let d="";const h=t.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||d==="about:blank")return;let m="";h&&(o===FT.QUERY?m=h.location.search:m=h.location.hash),window.clearTimeout(l),window.clearInterval(u),a(m)},n)}).finally(()=>{Ni(sie,j.RemoveHiddenIframe,i,r,s)(t)})}function rie(t,e,n,r){return n.addQueueMeasurement(j.SilentHandlerLoadFrame,r),new Promise((i,s)=>{const o=ZT();window.setTimeout(()=>{if(!o){s("Unable to load iframe");return}o.src=t,i(o)},e)})}function iie(t){const e=ZT();return e.src=t,e}function ZT(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function sie(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class oie extends lf{constructor(e,n,r,i,s,o,a,c,l,u,d){super(e,n,r,i,s,o,c,u,d),this.apiId=a,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(j.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==lr.NONE&&n.prompt!==lr.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${lr.NONE}`),n.prompt=lr.NONE):n.prompt=lr.NONE;const r=await re(this.initializeAuthorizationRequest.bind(this),j.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,je.Silent);return r.platformBroker=$m(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),mH(r.authority),this.config.auth.protocolMode===hi.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await re(this.createAuthCodeClient.bind(this),j.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await re(this.silentTokenHelper.bind(this),j.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(i){if(i instanceof Ot&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),!n||!(i instanceof Ot)||i.errorCode!==ni.INVALID_GRANT_ERROR)throw i;return this.performanceClient.addFields({retryError:i.errorCode},this.correlationId),await re(this.silentTokenHelper.bind(this),j.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await re(this.getDiscoveredAuthority.bind(this),j.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await re(oR,j.GenerateEarKey,this.logger,this.performanceClient,n)(),s={...e,earJwk:i},o=await re(nie,j.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,s,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=await re(tL,j.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,a),l=Ni(Bp,j.DeserializeResponse,this.logger,this.performanceClient,n)(c,a,this.logger);return re(wR,j.HandleResponseEar,this.logger,this.performanceClient,n)(s,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(be(GT))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(j.SilentIframeClientTokenHelper,r);const i=await re(JT,j.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s={...n,codeChallenge:i.challenge};let o;if(n.httpMethod===zl.POST)o=await re(tie,j.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);else{const u=await re(gR,j.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,s,this.logger,this.performanceClient);o=await re(eie,j.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const a=this.config.auth.OIDCOptions.serverResponseType,c=await re(tL,j.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=Ni(Bp,j.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return re(t_,j.HandleResponseCode,this.logger,this.performanceClient,r)(n,l,i.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class aie extends lf{async acquireToken(e){this.performanceClient.addQueueMeasurement(j.SilentRefreshClientAcquireToken,e.correlationId);const n=await re(pR,j.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const i=this.initializeServerTelemetryManager(Nt.acquireTokenSilent_silentFlow),s=await this.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return re(s.acquireTokenByRefreshToken.bind(s),j.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(o=>{throw o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o),o})}logout(){return Promise.reject(be(GT))}async createRefreshTokenClient(e){const n=await re(this.getClientConfiguration.bind(this),j.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Cne(n,this.performanceClient)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class cie{constructor(e,n,r,i){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=i}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw be(QT);const i=e.correlationId||Ms(),s=n.id_token?of(n.id_token,xs):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Tr(Tr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||Ms()):void 0,c=await this.loadAccount(e,r.clientInfo||n.client_info||"",i,s,a),l=await this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,i),u=await this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,i),d=await this.loadRefreshToken(n,c.homeAccountId,c.environment,i);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},s,a)}async loadAccount(e,n,r,i,s){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=Ns.createFromAccountInfo(e.account);return await this.storage.setAccount(l,r),l}else if(!s||!n&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),be(W3);const o=Ns.generateHomeAccountId(n,s.authorityType,this.logger,this.cryptoObj,i),a=i==null?void 0:i.tid,c=Kx(this.storage,s,o,xs,r,i,n,s.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r),c}async loadIdToken(e,n,r,i,s){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=BT(n,r,e.id_token,this.config.auth.clientId,i);return await this.storage.setIdTokenCredential(o,s),o}async loadAccessToken(e,n,r,i,s,o,a){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?Un.fromString(n.scope):new Un(e.scopes),l=o.expiresOn||n.expires_in+mi(),u=o.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+mi(),d=HT(r,i,n.access_token,this.config.auth.clientId,s,c.printScopes(),l,u,xs);return await this.storage.setAccessTokenCredential(d,a),d}async loadRefreshToken(e,n,r,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const s=g3(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(s,i),s}generateAuthenticationResult(e,n,r,i){var u,d,h;let s="",o=[],a=null,c;n!=null&&n.accessToken&&(s=n.accessToken.secret,o=Un.fromString(n.accessToken.target).asArray(),a=qd(n.accessToken.expiresOn),c=qd(n.accessToken.extendedExpiresOn));const l=n.account;return{authority:i?i.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:o,account:l.getAccountInfo(),idToken:((u=n.idToken)==null?void 0:u.secret)||"",idTokenClaims:r||{},accessToken:s,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((d=n.refreshToken)==null?void 0:d.familyId)||"",tokenType:((h=n==null?void 0:n.accessToken)==null?void 0:h.tokenType)||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class lie extends E3{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class uie extends lf{constructor(e,n,r,i,s,o,a,c,l,u){super(e,n,r,i,s,o,c,l,u),this.apiId=a}async acquireToken(e){if(!e.code)throw be(K3);const n=await re(this.initializeAuthorizationRequest.bind(this),j.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,je.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const i={...n,code:e.code},s=await re(this.getClientConfiguration.bind(this),j.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),o=new lie(s);this.logger.verbose("Auth code client created");const a=new _H(o,this.browserStorage,i,this.logger,this.performanceClient);return await re(a.handleCodeResponseFromServer.bind(a),j.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(i){throw i instanceof Ot&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}}logout(){return Promise.reject(be(GT))}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function die(t,e,n){var o;const r=((o=window.msal)==null?void 0:o.clientIds)||[],i=r.length,s=r.filter(a=>a===t).length;s>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:i,sameClientIdInstanceCount:s})}/*! @azure/msal-browser v4.25.0 2025-10-09 */function tv(t,e,n){try{dR(t)}catch(r){throw e.end({success:!1},r,n),r}}class eC{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ma(this.logger,this.performanceClient):Uw,this.eventHandler=new Nre(this.logger),this.browserStorage=this.isBrowserEnvironment?new iA(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,fne(this.config.auth)):Ere(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:$n.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:$n.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new iA(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new cie(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new eC(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),i=this.config.system.allowPlatformBroker,s=this.performanceClient.startMeasurement(j.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Le.INITIALIZE_START),!n)try{this.logMultipleInstances(s)}catch{}if(await re(this.browserStorage.initialize.bind(this.browserStorage),j.InitializeCache,this.logger,this.performanceClient,r)(r),i)try{this.platformAuthProvider=await Qre(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ni(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),j.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END),s.end({allowPlatformBroker:i,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),pH(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var c;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((c=this.browserStorage.getInteractionInProgress())==null?void 0:c.type)===nc.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),s=i&&this.platformAuthProvider&&!e;let o;this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_START,je.Redirect);let a;try{if(s&&this.platformAuthProvider){o=this.performanceClient.startMeasurement(j.AcquireTokenRedirect,(i==null?void 0:i.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),o.add({isPlatformBrokerRequest:!0});const l=new Uv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Nt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,i.accountId,this.nativeInternalStorage,i.correlationId);a=re(l.handleRedirectPromise.bind(l),j.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(this.performanceClient,o.event.correlationId)}else{const[l,u]=this.browserStorage.getCachedRequest(),d=l.correlationId;o=this.performanceClient.startMeasurement(j.AcquireTokenRedirect,d),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const h=this.createRedirectClient(d);a=re(h.handleRedirectPromise.bind(h),j.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,o.event.correlationId)(e,l,u,o)}}catch(l){throw this.browserStorage.resetRequestCache(),l}return a.then(l=>(l?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,je.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,je.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),o.end({success:!0},void 0,l.account)):o.event.errorCode?o.end({success:!1},void 0):o.discard(),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,je.Redirect),l)).catch(l=>{this.browserStorage.resetRequestCache();const u=l;throw r.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,je.Redirect,null,u):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,je.Redirect,null,u),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,je.Redirect),o.end({success:!1},u),l})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(j.AcquireTokenPreRedirect,n);r.add({scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=o=>{const a=typeof i=="function"?i(o):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,a};else{const o=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof o=="function"?o(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,c}}const s=this.getAllAccounts().length>0;try{WD(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,nc.SIGNIN),s?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,je.Redirect,e):this.eventHandler.emitEvent(Le.LOGIN_START,je.Redirect,e);let o;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?o=new Uv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Nt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof io&&dd(c))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof Os)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw c}):o=this.createRedirectClient(n).acquireToken(e),await o}catch(o){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(j.AcquireTokenRedirect,n).end({success:!1},o,e.account):r.end({success:!1},o,e.account),s?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,je.Redirect,null,o):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,je.Redirect,null,o),o}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(j.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",n),tv(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,nc.SIGNIN)}catch(a){return Promise.reject(a)}const i=this.getAllAccounts();i.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,je.Popup,e):this.eventHandler.emitEvent(Le.LOGIN_START,je.Popup,e);let s;const o=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative({...e,correlationId:n},Nt.acquireTokenPopup).then(a=>(r.end({success:!0},void 0,a.account),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof io&&dd(a))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,o);if(a instanceof Os)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,o);throw a})):s=this.createPopupClient(n).acquireToken(e,o),s.then(a=>(i.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,je.Popup,a):this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,je.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>(i.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,je.Popup,null,a):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,je.Popup,null,a),r.end({success:!1},a,e.account),Promise.reject(a))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var s,o,a;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(j.SsoSilent,n),(s=this.ssoSilentMeasurement)==null||s.add({scenarioId:e.scenarioId}),tv(this.initialized,this.ssoSilentMeasurement,e.account),(o=this.ssoSilentMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Le.SSO_SILENT_START,je.Silent,r);let i;return this.canUsePlatformBroker(r)?((a=this.ssoSilentMeasurement)==null||a.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(r,Nt.ssoSilent).catch(c=>{var l;if((l=this.ssoSilentMeasurement)==null||l.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof io&&dd(c))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c})):i=this.createSilentIframeClient(r.correlationId).acquireToken(r),i.then(c=>{var l;return this.eventHandler.emitEvent(Le.SSO_SILENT_SUCCESS,je.Silent,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c}).catch(c=>{var l;throw this.eventHandler.emitEvent(Le.SSO_SILENT_FAILURE,je.Silent,null,c),(l=this.ssoSilentMeasurement)==null||l.end({success:!1},c,e.account),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(j.AcquireTokenByCode,n);tv(this.initialized,r),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_START,je.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw be(G3);if(e.code){const i=e.code;let s=this.hybridAuthCodeResponses.get(i);return s?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),s=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(o=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_SUCCESS,je.Silent,o),this.hybridAuthCodeResponses.delete(i),r.end({success:!0,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length},void 0,o.account),o)).catch(o=>{throw this.hybridAuthCodeResponses.delete(i),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,je.Silent,null,o),r.end({success:!1},o),o}),this.hybridAuthCodeResponses.set(i,s)),await s}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const i=await this.acquireTokenNative({...e,correlationId:n},Nt.acquireTokenByCode,e.nativeAccountId).catch(s=>{throw s instanceof io&&dd(s)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:s.name,brokerErrorCode:s.errorCode}),s});return r.end({success:!0},void 0,i.account),i}else throw be(Q3);else throw be(q3)}catch(i){throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,je.Silent,null,i),r.end({success:!1},i),i}}async acquireTokenByCodeAsync(e){var i;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(j.AcquireTokenByCodeAsync,e.correlationId),(i=this.acquireTokenByCodeAsyncMeasurement)==null||i.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(s=>{var o;return(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!0,fromCache:s.fromCache}),s}).catch(s=>{var o;throw(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(j.AcquireTokenFromCache,e.correlationId),n){case Mr.Default:case Mr.AccessToken:case Mr.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return re(r.acquireToken.bind(r),j.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ae(Rc)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(j.AcquireTokenByRefreshToken,e.correlationId),n){case Mr.Default:case Mr.AccessTokenAndRefreshToken:case Mr.RefreshToken:case Mr.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return re(r.acquireToken.bind(r),j.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ae(Rc)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(j.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return re(n.acquireToken.bind(n),j.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return WD(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,nc.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return dR(this.initialized),this.browserStorage.setInteractionInProgress(!0,nc.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return Sre(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return bre(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return Ire(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return Are(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return kre(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();xre(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return Rre(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=Ns.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,i){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw be(tR);return new Uv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,i)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!$m(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case lr.NONE:case lr.CONSENT:case lr.LOGIN:case lr.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new Xre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new Zre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new oie(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Nt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new CH(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new aie(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new uie(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Nt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return fH(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==$n.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==$n.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Ms():ie.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||UD})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||UD})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(j.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),tv(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",n);const i=e.account||this.getActiveAccount();if(!i)throw be(U3);return this.acquireTokenSilentDeduped(e,i,n).then(s=>(r.end({success:!0,fromCache:s.fromCache,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),{...s,state:e.state,correlationId:n})).catch(s=>{throw s instanceof Ot&&s.setCorrelationId(n),r.end({success:!1},s,i),s})}async acquireTokenSilentDeduped(e,n,r){const i=zT(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},n.homeAccountId),s=JSON.stringify(i),o=this.activeSilentTokenRequests.get(s);if(typeof o>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const a=re(this.acquireTokenSilentAsync.bind(this),j.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(s,a),a.finally(()=>{this.activeSilentTokenRequests.delete(s)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),o}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(j.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,je.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const i=await re(Ore,j.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),s=e.cacheLookupPolicy||Mr.Default;return this.acquireTokenSilentNoIframe(i,s).catch(async a=>{if(hie(a,s))if(this.activeIframeRequest)if(s!==Mr.Skip){const[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,i.correlationId);const d=this.performanceClient.startMeasurement(j.AwaitConcurrentIframe,i.correlationId);d.add({awaitIframeCorrelationId:u});const h=await l;if(d.end({success:h}),h)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,i.correlationId),this.acquireTokenSilentNoIframe(i,s);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),re(this.acquireTokenBySilentIframe.bind(this),j.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),i.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),re(this.acquireTokenBySilentIframe.bind(this),j.AcquireTokenBySilentIframe,this.logger,this.performanceClient,i.correlationId)(i).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,je.Silent,a),this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,je.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return $m(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Nt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof io&&dd(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ae(Rc)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===Mr.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),re(this.acquireTokenFromCache.bind(this),j.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Mr.AccessToken)throw r;return this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_NETWORK_START,je.Silent,e),re(this.acquireTokenByRefreshToken.bind(this),j.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await re(JT,j.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),die(n,e,this.logger)}}function hie(t,e){const n=!(t instanceof Os&&t.subError!==KT),r=t.errorCode===ni.INVALID_GRANT_ERROR||t.errorCode===Rc,i=n&&r||t.errorCode===Qw||t.errorCode===zx,s=$ne.includes(e);return i&&s}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function fie(t,e){const n=new Tu(t);return await n.initialize(),eC.createController(n,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class TR{static async createPublicClientApplication(e){const n=await fie(e);return new TR(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new eC(new Tu(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const pie={auth:{clientId:"34cf9dc4-f837-4136-98c1-f66e913b4f95",authority:"https://login.microsoftonline.com/common",redirectUri:"https://zp1v56uxy8rdx5ypatb0ockcb9tr6a-oci3--8080--96435430.local-credentialless.webcontainer-api.io"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},hd=new TR(pie),PS={scopes:["User.Read","Notes.Read"]},mie=()=>{hd.initialize()},zMe=async()=>{try{const t=hd.getAllAccounts()[0];if(t){const n={...PS,account:t};return(await hd.acquireTokenSilent(n)).accessToken}const e=await hd.loginPopup(PS);return hd.setActiveAccount(e.account),e.accessToken}catch(t){if(console.error("MSAL login or token acquisition failed:",t),t.name==="InteractionRequiredAuthError")return(await hd.acquireTokenPopup(PS)).accessToken;throw t}},gie=1,yie=1e6;let NS=0;function vie(){return NS=(NS+1)%Number.MAX_SAFE_INTEGER,NS.toString()}const OS=new Map,nL=t=>{if(OS.has(t))return;const e=setTimeout(()=>{OS.delete(t),Hp({type:"REMOVE_TOAST",toastId:t})},yie);OS.set(t,e)},wie=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,gie)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?nL(n):t.toasts.forEach(r=>{nL(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},$v=[];let Bv={toasts:[]};function Hp(t){Bv=wie(Bv,t),$v.forEach(e=>{e(Bv)})}function _ie({...t}){const e=vie(),n=i=>Hp({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Hp({type:"DISMISS_TOAST",toastId:e});return Hp({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Pa(){const[t,e]=g.useState(Bv);return g.useEffect(()=>($v.push(e),()=>{const n=$v.indexOf(e);n>-1&&$v.splice(n,1)}),[t]),{...t,toast:_ie,dismiss:n=>Hp({type:"DISMISS_TOAST",toastId:n})}}function Se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function rL(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tC(...t){return e=>{let n=!1;const r=t.map(i=>{const s=rL(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():rL(t[i],null)}}}}function Et(...t){return g.useCallback(tC(...t),t)}function Tie(t,e){const n=g.createContext(e),r=s=>{const{children:o,...a}=s,c=g.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Gr(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),c=n.length;n=[...n,o];const l=d=>{var y;const{scope:h,children:m,..._}=d,v=((y=h==null?void 0:h[t])==null?void 0:y[c])||a,T=g.useMemo(()=>_,Object.values(_));return p.jsx(v.Provider,{value:T,children:m})};l.displayName=s+"Provider";function u(d,h){var v;const m=((v=h==null?void 0:h[t])==null?void 0:v[c])||a,_=g.useContext(m);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[l,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const c=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,Cie(i,...e)]}function Cie(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(s)[`__scope${l}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Cu(t){const e=Eie(t),n=g.forwardRef((r,i)=>{const{children:s,...o}=r,a=g.Children.toArray(s),c=a.find(bie);if(c){const l=c.props.children,u=a.map(d=>d===c?g.Children.count(l)>1?g.Children.only(null):g.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...o,ref:i,children:g.isValidElement(l)?g.cloneElement(l,void 0,u):null})}return p.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var bH=Cu("Slot");function Eie(t){const e=g.forwardRef((n,r)=>{const{children:i,...s}=n;if(g.isValidElement(i)){const o=Aie(i),a=Iie(s,i.props);return i.type!==g.Fragment&&(a.ref=r?tC(r,o):o),g.cloneElement(i,a)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var IH=Symbol("radix.slottable");function Sie(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=IH,e}function bie(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===IH}function Iie(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Aie(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function CR(t){const e=t+"CollectionProvider",[n,r]=Gr(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:T,children:y}=v,w=Z.useRef(null),C=Z.useRef(new Map).current;return p.jsx(i,{scope:T,itemMap:C,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",c=Cu(a),l=Z.forwardRef((v,T)=>{const{scope:y,children:w}=v,C=s(a,y),b=Et(T,C.collectionRef);return p.jsx(c,{ref:b,children:w})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Cu(u),m=Z.forwardRef((v,T)=>{const{scope:y,children:w,...C}=v,b=Z.useRef(null),k=Et(T,b),D=s(u,y);return Z.useEffect(()=>(D.itemMap.set(b,{ref:b,...C}),()=>void D.itemMap.delete(b))),p.jsx(h,{[d]:"",ref:k,children:w})});m.displayName=u;function _(v){const T=s(t+"CollectionConsumer",v);return Z.useCallback(()=>{const w=T.collectionRef.current;if(!w)return[];const C=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(T.itemMap.values()).sort((D,A)=>C.indexOf(D.ref.current)-C.indexOf(A.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:l,ItemSlot:m},_,r]}var kie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fe=kie.reduce((t,e)=>{const n=Cu(`Primitive.${e}`),r=g.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ER(t,e){t&&Mg.flushSync(()=>t.dispatchEvent(e))}function wn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function xie(t,e=globalThis==null?void 0:globalThis.document){const n=wn(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Rie="DismissableLayer",sA="dismissableLayer.update",Pie="dismissableLayer.pointerDownOutside",Nie="dismissableLayer.focusOutside",iL,AH=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uf=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,l=g.useContext(AH),[u,d]=g.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),_=Et(e,A=>d(A)),v=Array.from(l.layers),[T]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(T),w=u?v.indexOf(u):-1,C=l.layersWithOutsidePointerEventsDisabled.size>0,b=w>=y,k=Mie(A=>{const S=A.target,x=[...l.branches].some(N=>N.contains(S));!b||x||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},h),D=Die(A=>{const S=A.target;[...l.branches].some(N=>N.contains(S))||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},h);return xie(A=>{w===l.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},h),g.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(iL=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),sL(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=iL)}},[u,h,n,l]),g.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),sL())},[u,l]),g.useEffect(()=>{const A=()=>m({});return document.addEventListener(sA,A),()=>document.removeEventListener(sA,A)},[]),p.jsx(Fe.div,{...c,ref:_,style:{pointerEvents:C?b?"auto":"none":void 0,...t.style},onFocusCapture:Se(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Se(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Se(t.onPointerDownCapture,k.onPointerDownCapture)})});uf.displayName=Rie;var Oie="DismissableLayerBranch",kH=g.forwardRef((t,e)=>{const n=g.useContext(AH),r=g.useRef(null),i=Et(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Fe.div,{...t,ref:i})});kH.displayName=Oie;function Mie(t,e=globalThis==null?void 0:globalThis.document){const n=wn(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){xH(Pie,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Die(t,e=globalThis==null?void 0:globalThis.document){const n=wn(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&xH(Nie,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sL(){const t=new CustomEvent(sA);document.dispatchEvent(t)}function xH(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ER(i,s):i.dispatchEvent(s)}var Lie=uf,Fie=kH,gi=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Vie="Portal",Fg=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=g.useState(!1);gi(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?iB.createPortal(p.jsx(Fe.div,{...r,ref:e}),o):null});Fg.displayName=Vie;function jie(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Hn=t=>{const{present:e,children:n}=t,r=Uie(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=Et(r.ref,$ie(i));return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};Hn.displayName="Presence";function Uie(t){const[e,n]=g.useState(),r=g.useRef(null),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,c]=jie(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const l=nv(r.current);s.current=a==="mounted"?l:"none"},[a]),gi(()=>{const l=r.current,u=i.current;if(u!==t){const h=s.current,m=nv(l);t?c("MOUNT"):m==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),gi(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,d=m=>{const v=nv(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&v&&(c("ANIMATION_END"),!i.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},h=m=>{m.target===e&&(s.current=nv(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function nv(t){return(t==null?void 0:t.animationName)||"none"}function $ie(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Bie=wk[" useInsertionEffect ".trim().toString()]||gi;function Na({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=Hie({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const u=g.useRef(t!==void 0);g.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const l=g.useCallback(u=>{var d;if(a){const h=zie(u)?u(t):u;h!==t&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,t,s,o]);return[c,l]}function Hie({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),i=g.useRef(n),s=g.useRef(e);return Bie(()=>{s.current=e},[e]),g.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function zie(t){return typeof t=="function"}var Wie=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Kie="VisuallyHidden",nC=g.forwardRef((t,e)=>p.jsx(Fe.span,{...t,ref:e,style:{...Wie,...t.style}}));nC.displayName=Kie;var qie=nC,SR="ToastProvider",[bR,Gie,Qie]=CR("Toast"),[RH]=Gr("Toast",[Qie]),[Yie,rC]=RH(SR),PH=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,c]=g.useState(null),[l,u]=g.useState(0),d=g.useRef(!1),h=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${SR}\`. Expected non-empty \`string\`.`),p.jsx(bR.Provider,{scope:e,children:p.jsx(Yie,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:a,onViewportChange:c,onToastAdd:g.useCallback(()=>u(m=>m+1),[]),onToastRemove:g.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};PH.displayName=SR;var NH="ToastViewport",Xie=["F8"],oA="toast.viewportPause",aA="toast.viewportResume",OH=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Xie,label:i="Notifications ({hotkey})",...s}=t,o=rC(NH,n),a=Gie(n),c=g.useRef(null),l=g.useRef(null),u=g.useRef(null),d=g.useRef(null),h=Et(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;g.useEffect(()=>{const T=y=>{var C;r.length!==0&&r.every(b=>y[b]||y.code===b)&&((C=d.current)==null||C.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),g.useEffect(()=>{const T=c.current,y=d.current;if(_&&T&&y){const w=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(oA);y.dispatchEvent(D),o.isClosePausedRef.current=!0}},C=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(aA);y.dispatchEvent(D),o.isClosePausedRef.current=!1}},b=D=>{!T.contains(D.relatedTarget)&&C()},k=()=>{T.contains(document.activeElement)||C()};return T.addEventListener("focusin",w),T.addEventListener("focusout",b),T.addEventListener("pointermove",w),T.addEventListener("pointerleave",k),window.addEventListener("blur",w),window.addEventListener("focus",C),()=>{T.removeEventListener("focusin",w),T.removeEventListener("focusout",b),T.removeEventListener("pointermove",w),T.removeEventListener("pointerleave",k),window.removeEventListener("blur",w),window.removeEventListener("focus",C)}}},[_,o.isClosePausedRef]);const v=g.useCallback(({tabbingDirection:T})=>{const w=a().map(C=>{const b=C.ref.current,k=[b,...use(b)];return T==="forwards"?k:k.reverse()});return(T==="forwards"?w.reverse():w).flat()},[a]);return g.useEffect(()=>{const T=d.current;if(T){const y=w=>{var k,D,A;const C=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!C){const S=document.activeElement,x=w.shiftKey;if(w.target===T&&x){(k=l.current)==null||k.focus();return}const O=v({tabbingDirection:x?"backwards":"forwards"}),P=O.findIndex(z=>z===S);MS(O.slice(P+1))?w.preventDefault():x?(D=l.current)==null||D.focus():(A=u.current)==null||A.focus()}};return T.addEventListener("keydown",y),()=>T.removeEventListener("keydown",y)}},[a,v]),p.jsxs(Fie,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&p.jsx(cA,{ref:l,onFocusFromOutsideViewport:()=>{const T=v({tabbingDirection:"forwards"});MS(T)}}),p.jsx(bR.Slot,{scope:n,children:p.jsx(Fe.ol,{tabIndex:-1,...s,ref:h})}),_&&p.jsx(cA,{ref:u,onFocusFromOutsideViewport:()=>{const T=v({tabbingDirection:"backwards"});MS(T)}})]})});OH.displayName=NH;var MH="ToastFocusProxy",cA=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=rC(MH,n);return p.jsx(nC,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var l;const a=o.relatedTarget;!((l=s.viewport)!=null&&l.contains(a))&&r()}})});cA.displayName=MH;var Vg="Toast",Jie="toast.swipeStart",Zie="toast.swipeMove",ese="toast.swipeCancel",tse="toast.swipeEnd",DH=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,c]=Na({prop:r,defaultProp:i??!0,onChange:s,caller:Vg});return p.jsx(Hn,{present:n||a,children:p.jsx(ise,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:wn(t.onPause),onResume:wn(t.onResume),onSwipeStart:Se(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(t.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Se(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(t.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});DH.displayName=Vg;var[nse,rse]=RH(Vg,{onClose(){}}),ise=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,..._}=t,v=rC(Vg,n),[T,y]=g.useState(null),w=Et(e,z=>y(z)),C=g.useRef(null),b=g.useRef(null),k=i||v.duration,D=g.useRef(0),A=g.useRef(k),S=g.useRef(0),{onToastAdd:x,onToastRemove:N}=v,R=wn(()=>{var K;(T==null?void 0:T.contains(document.activeElement))&&((K=v.viewport)==null||K.focus()),o()}),O=g.useCallback(z=>{!z||z===1/0||(window.clearTimeout(S.current),D.current=new Date().getTime(),S.current=window.setTimeout(R,z))},[R]);g.useEffect(()=>{const z=v.viewport;if(z){const K=()=>{O(A.current),l==null||l()},U=()=>{const q=new Date().getTime()-D.current;A.current=A.current-q,window.clearTimeout(S.current),c==null||c()};return z.addEventListener(oA,U),z.addEventListener(aA,K),()=>{z.removeEventListener(oA,U),z.removeEventListener(aA,K)}}},[v.viewport,k,c,l,O]),g.useEffect(()=>{s&&!v.isClosePausedRef.current&&O(k)},[s,k,v.isClosePausedRef,O]),g.useEffect(()=>(x(),()=>N()),[x,N]);const P=g.useMemo(()=>T?BH(T):null,[T]);return v.viewport?p.jsxs(p.Fragment,{children:[P&&p.jsx(sse,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:P}),p.jsx(nse,{scope:n,onClose:R,children:Mg.createPortal(p.jsx(bR.ItemSlot,{scope:n,children:p.jsx(Lie,{asChild:!0,onEscapeKeyDown:Se(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||R(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Fe.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,..._,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Se(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Se(t.onPointerDown,z=>{z.button===0&&(C.current={x:z.clientX,y:z.clientY})}),onPointerMove:Se(t.onPointerMove,z=>{if(!C.current)return;const K=z.clientX-C.current.x,U=z.clientY-C.current.y,q=!!b.current,F=["left","right"].includes(v.swipeDirection),V=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,X=F?V(0,K):0,ge=F?0:V(0,U),pe=z.pointerType==="touch"?10:2,B={x:X,y:ge},J={originalEvent:z,delta:B};q?(b.current=B,rv(Zie,d,J,{discrete:!1})):oL(B,v.swipeDirection,pe)?(b.current=B,rv(Jie,u,J,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(K)>pe||Math.abs(U)>pe)&&(C.current=null)}),onPointerUp:Se(t.onPointerUp,z=>{const K=b.current,U=z.target;if(U.hasPointerCapture(z.pointerId)&&U.releasePointerCapture(z.pointerId),b.current=null,C.current=null,K){const q=z.currentTarget,F={originalEvent:z,delta:K};oL(K,v.swipeDirection,v.swipeThreshold)?rv(tse,m,F,{discrete:!0}):rv(ese,h,F,{discrete:!0}),q.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),sse=t=>{const{__scopeToast:e,children:n,...r}=t,i=rC(Vg,e),[s,o]=g.useState(!1),[a,c]=g.useState(!1);return cse(()=>o(!0)),g.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),a?null:p.jsx(Fg,{asChild:!0,children:p.jsx(nC,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},ose="ToastTitle",LH=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Fe.div,{...r,ref:e})});LH.displayName=ose;var ase="ToastDescription",FH=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Fe.div,{...r,ref:e})});FH.displayName=ase;var VH="ToastAction",jH=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx($H,{altText:n,asChild:!0,children:p.jsx(IR,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${VH}\`. Expected non-empty \`string\`.`),null)});jH.displayName=VH;var UH="ToastClose",IR=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=rse(UH,n);return p.jsx($H,{asChild:!0,children:p.jsx(Fe.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,i.onClose)})})});IR.displayName=UH;var $H=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(Fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function BH(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),lse(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...BH(r))}}),e}function rv(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ER(i,s):i.dispatchEvent(s)}var oL=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function cse(t=()=>{}){const e=wn(t);gi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function lse(t){return t.nodeType===t.ELEMENT_NODE}function use(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function MS(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var dse=PH,HH=OH,zH=DH,WH=LH,KH=FH,qH=jH,GH=IR;function QH(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=QH(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function YH(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=QH(t))&&(r&&(r+=" "),r+=e);return r}const aL=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cL=YH,jg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return cL(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],d=s==null?void 0:s[l];if(u===null)return null;const h=aL(u)||aL(d);return i[l][h]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,h]=u;return h===void 0||(l[d]=h),l},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(_=>{let[v,T]=_;return Array.isArray(T)?T.includes({...s,...a}[v]):{...s,...a}[v]===T})?[...l,d,h]:l},[]);return cL(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fse=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),lL=t=>{const e=fse(t);return e.charAt(0).toUpperCase()+e.slice(1)},XH=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),pse=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>g.createElement("svg",{ref:c,...mse,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:XH("lucide",i),...!s&&!pse(a)&&{"aria-hidden":"true"},...a},[...o.map(([l,u])=>g.createElement(l,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const n=g.forwardRef(({className:r,...i},s)=>g.createElement(gse,{ref:s,iconNode:e,className:XH(`lucide-${hse(lL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=lL(t),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],JH=$e("arrow-left",yse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wse=$e("arrow-right",vse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],lA=$e("bell",_se);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ZH=$e("calendar",Tse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],uA=$e("chart-column",Cse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ese=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Sse=$e("check-check",Ese);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iC=$e("check",bse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],e5=$e("chevron-right",Ise);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ase=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],t5=$e("chrome",Ase);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xse=$e("circle-alert",kse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Pse=$e("circle-check-big",Rse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],n5=$e("circle",Nse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],AR=$e("clock",Ose);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Dse=$e("cloud-off",Mse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],Fse=$e("command",Lse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jse=$e("dollar-sign",Vse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],$se=$e("dot",Use);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],r5=$e("file-text",Bse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mo=$e("loader-circle",Hse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Wse=$e("log-out",zse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uL=$e("mail",Kse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Gse=$e("maximize",qse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],i5=$e("menu",Qse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kR=$e("message-square",Yse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],s5=$e("mic",Xse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],Zse=$e("minimize",Jse);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eoe=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],toe=$e("notebook-text",eoe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],r_=$e("pause",noe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const roe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xR=$e("phone",roe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=[["path",{d:"M2 10h6V4",key:"zwrco"}],["path",{d:"m2 4 6 6",key:"ug085t"}],["path",{d:"M21 10V7a2 2 0 0 0-2-2h-7",key:"git5jr"}],["path",{d:"M3 14v2a2 2 0 0 0 2 2h3",key:"1f7fh3"}],["rect",{x:"12",y:"14",width:"10",height:"7",rx:"1",key:"1wjs3o"}]],o5=$e("picture-in-picture",ioe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],i_=$e("play",soe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aoe=$e("plus",ooe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],a5=$e("refresh-cw",coe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],uoe=$e("rotate-ccw",loe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dL=$e("search",doe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],foe=$e("send",hoe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],moe=$e("settings",poe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=[["path",{d:"M13 21h6a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6",key:"14qz4y"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],yoe=$e("square-arrow-out-down-left",goe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Eu=$e("square-check-big",voe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],c5=$e("square",woe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],l5=$e("timer",_oe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Coe=$e("trash-2",Toe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zp=$e("triangle-alert",Eoe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],RR=$e("user",Soe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],u5=$e("users",boe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Aoe=$e("wifi-off",Ioe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],xoe=$e("wifi",koe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Poe=$e("wrench",Roe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ul=$e("x",Noe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Moe=$e("zap",Ooe),PR="-",Doe=t=>{const e=Foe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(PR);return a[0]===""&&a.length!==1&&a.shift(),d5(a,e)||Loe(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},d5=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?d5(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(PR);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},hL=/^\[(.+)\]$/,Loe=t=>{if(hL.test(t)){const e=hL.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Foe=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return joe(Object.entries(t.classGroups),n).forEach(([s,o])=>{dA(o,r,s,e)}),r},dA=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:fL(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Voe(i)){dA(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{dA(o,fL(e,s),n,r)})})},fL=(t,e)=>{let n=t;return e.split(PR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Voe=t=>t.isThemeGetter,joe=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Uoe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},h5="!",$oe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let l=0,u=0,d;for(let T=0;T<a.length;T++){let y=a[T];if(l===0){if(y===i&&(r||a.slice(T,T+s)===e)){c.push(a.slice(u,T)),u=T+s;continue}if(y==="/"){d=T;continue}}y==="["?l++:y==="]"&&l--}const h=c.length===0?a:a.substring(u),m=h.startsWith(h5),_=m?h.substring(1):h,v=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},Boe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Hoe=t=>({cache:Uoe(t.cacheSize),parseClassName:$oe(t),...Doe(t)}),zoe=/\s+/,Woe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(zoe);let a="";for(let c=o.length-1;c>=0;c-=1){const l=o[c],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(l);let _=!!m,v=r(_?h.substring(0,m):h);if(!v){if(!_){a=l+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=l+(a.length>0?" "+a:a);continue}_=!1}const T=Boe(u).join(":"),y=d?T+h5:T,w=y+v;if(s.includes(w))continue;s.push(w);const C=i(v,_);for(let b=0;b<C.length;++b){const k=C[b];s.push(y+k)}a=l+(a.length>0?" "+a:a)}return a};function Koe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=f5(e))&&(r&&(r+=" "),r+=n);return r}const f5=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=f5(t[r]))&&(n&&(n+=" "),n+=e);return n};function qoe(t,...e){let n,r,i,s=o;function o(c){const l=e.reduce((u,d)=>d(u),t());return n=Hoe(l),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=Woe(c,n);return i(c,u),u}return function(){return s(Koe.apply(null,arguments))}}const Kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},p5=/^\[(?:([a-z-]+):)?(.+)\]$/i,Goe=/^\d+\/\d+$/,Qoe=new Set(["px","full","screen"]),Yoe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xoe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Joe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Zoe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eae=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jo=t=>Gd(t)||Qoe.has(t)||Goe.test(t),Ha=t=>df(t,"length",cae),Gd=t=>!!t&&!Number.isNaN(Number(t)),DS=t=>df(t,"number",Gd),tp=t=>!!t&&Number.isInteger(Number(t)),tae=t=>t.endsWith("%")&&Gd(t.slice(0,-1)),tt=t=>p5.test(t),za=t=>Yoe.test(t),nae=new Set(["length","size","percentage"]),rae=t=>df(t,nae,m5),iae=t=>df(t,"position",m5),sae=new Set(["image","url"]),oae=t=>df(t,sae,uae),aae=t=>df(t,"",lae),np=()=>!0,df=(t,e,n)=>{const r=p5.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},cae=t=>Xoe.test(t)&&!Joe.test(t),m5=()=>!1,lae=t=>Zoe.test(t),uae=t=>eae.test(t),dae=()=>{const t=Kt("colors"),e=Kt("spacing"),n=Kt("blur"),r=Kt("brightness"),i=Kt("borderColor"),s=Kt("borderRadius"),o=Kt("borderSpacing"),a=Kt("borderWidth"),c=Kt("contrast"),l=Kt("grayscale"),u=Kt("hueRotate"),d=Kt("invert"),h=Kt("gap"),m=Kt("gradientColorStops"),_=Kt("gradientColorStopPositions"),v=Kt("inset"),T=Kt("margin"),y=Kt("opacity"),w=Kt("padding"),C=Kt("saturate"),b=Kt("scale"),k=Kt("sepia"),D=Kt("skew"),A=Kt("space"),S=Kt("translate"),x=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",tt,e],O=()=>[tt,e],P=()=>["",jo,Ha],z=()=>["auto",Gd,tt],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",tt],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[Gd,tt];return{cacheSize:500,separator:":",theme:{colors:[np],spacing:[jo,Ha],blur:["none","",za,tt],brightness:ge(),borderColor:[t],borderRadius:["none","","full",za,tt],borderSpacing:O(),borderWidth:P(),contrast:ge(),grayscale:V(),hueRotate:ge(),invert:V(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[tae,Ha],inset:R(),margin:R(),opacity:ge(),padding:O(),saturate:ge(),scale:ge(),sepia:V(),skew:ge(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[za]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),tt]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tp,tt]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",tp,tt]}],"grid-cols":[{"grid-cols":[np]}],"col-start-end":[{col:["auto",{span:["full",tp,tt]},tt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[np]}],"row-start-end":[{row:["auto",{span:[tp,tt]},tt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[za]},za]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",za,Ha]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",DS]}],"font-family":[{font:[np]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",Gd,DS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jo,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jo,Ha]}],"underline-offset":[{"underline-offset":["auto",jo,tt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),iae]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rae]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oae]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[jo,tt]}],"outline-w":[{outline:[jo,Ha]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[jo,Ha]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",za,aae]}],"shadow-color":[{shadow:[np]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",za,tt]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[C]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[tp,tt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[jo,Ha,DS]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hae=qoe(dae);function ue(...t){return hae(YH(t))}const hA="/sounds/iphone_ding.mp3",pL="/sounds/ting.mp3",fae="/sounds/iphone_ding.mp3";async function fA(t){try{const e=new Audio(t);e.addEventListener("error",n=>{console.warn(`Sound file not found: ${t}. Skipping audio playback.`)}),await e.play()}catch{console.warn(`Could not play sound: ${t}. This is likely due to missing audio files.`)}}const pae=dse,g5=g.forwardRef(({className:t,...e},n)=>p.jsx(HH,{ref:n,className:ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));g5.displayName=HH.displayName;const mae=jg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),y5=g.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(zH,{ref:r,className:ue(mae({variant:e}),t),...n}));y5.displayName=zH.displayName;const gae=g.forwardRef(({className:t,...e},n)=>p.jsx(qH,{ref:n,className:ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));gae.displayName=qH.displayName;const v5=g.forwardRef(({className:t,...e},n)=>p.jsx(GH,{ref:n,className:ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(ul,{className:"h-4 w-4"})}));v5.displayName=GH.displayName;const w5=g.forwardRef(({className:t,...e},n)=>p.jsx(WH,{ref:n,className:ue("text-sm font-semibold",t),...e}));w5.displayName=WH.displayName;const _5=g.forwardRef(({className:t,...e},n)=>p.jsx(KH,{ref:n,className:ue("text-sm opacity-90",t),...e}));_5.displayName=KH.displayName;function yae(){const{toasts:t}=Pa();return p.jsxs(pae,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return p.jsxs(y5,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(w5,{children:n}),r&&p.jsx(_5,{children:r})]}),i,p.jsx(v5,{})]},e)}),p.jsx(g5,{})]})}var s_=["light","dark"],NR="(prefers-color-scheme: dark)",vae=typeof window>"u",OR=g.createContext(void 0),wae={setTheme:t=>{},themes:[]},_ae=()=>{var t;return(t=g.useContext(OR))!=null?t:wae},Tae=t=>g.useContext(OR)?t.children:g.createElement(Eae,{...t}),Cae=["light","dark"],Eae=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=Cae,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:c,children:l,nonce:u})=>{let[d,h]=g.useState(()=>mL(i,o)),[m,_]=g.useState(()=>mL(i)),v=c?Object.values(c):s,T=g.useCallback(b=>{let k=b;if(!k)return;b==="system"&&n&&(k=gL());let D=c?c[k]:k,A=e?bae():null,S=document.documentElement;if(a==="class"?(S.classList.remove(...v),D&&S.classList.add(D)):D?S.setAttribute(a,D):S.removeAttribute(a),r){let x=s_.includes(o)?o:null,N=s_.includes(k)?k:x;S.style.colorScheme=N}A==null||A()},[]),y=g.useCallback(b=>{let k=typeof b=="function"?b(b):b;h(k);try{localStorage.setItem(i,k)}catch{}},[t]),w=g.useCallback(b=>{let k=gL(b);_(k),d==="system"&&n&&!t&&T("system")},[d,t]);g.useEffect(()=>{let b=window.matchMedia(NR);return b.addListener(w),w(b),()=>b.removeListener(w)},[w]),g.useEffect(()=>{let b=k=>{if(k.key!==i)return;let D=k.newValue||o;y(D)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[y]),g.useEffect(()=>{T(t??d)},[t,d]);let C=g.useMemo(()=>({theme:d,setTheme:y,forcedTheme:t,resolvedTheme:d==="system"?m:d,themes:n?[...s,"system"]:s,systemTheme:n?m:void 0}),[d,y,t,m,n,s]);return g.createElement(OR.Provider,{value:C},g.createElement(Sae,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:c,children:l,attrs:v,nonce:u}),l)},Sae=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:c})=>{let l=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?s_.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(_,v=!1,T=!0)=>{let y=o?o[_]:_,w=v?_+"|| ''":`'${y}'`,C="";return i&&T&&!v&&s_.includes(_)&&(C+=`d.style.colorScheme = '${_}';`),n==="class"?v||y?C+=`c.add(${w})`:C+="null":y&&(C+=`d[s](n,${w})`),C},m=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${NR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${l?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})}),mL=(t,e)=>{if(vae)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},bae=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},gL=t=>(t||(t=window.matchMedia(NR)),t.matches?"dark":"light"),Iae=t=>{switch(t){case"success":return xae;case"info":return Pae;case"warning":return Rae;case"error":return Nae;default:return null}},Aae=Array(12).fill(0),kae=({visible:t,className:e})=>Z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Z.createElement("div",{className:"sonner-spinner"},Aae.map((n,r)=>Z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),xae=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Rae=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Pae=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Nae=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Oae=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Mae=()=>{let[t,e]=Z.useState(document.hidden);return Z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},pA=1,Dae=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:pA++,o=this.toasts.find(c=>c.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:a,title:r}):c):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0,o,a=i.then(async l=>{if(o=["resolve",l],Z.isValidElement(l))s=!1,this.create({id:r,type:"default",message:l});else if(Fae(l)&&!l.ok){s=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,d=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:r,type:"error",message:u,description:d})}else if(n.success!==void 0){s=!1;let u=typeof n.success=="function"?await n.success(l):n.success,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async l=>{if(o=["reject",l],n.error!==void 0){s=!1;let u=typeof n.error=="function"?await n.error(l):n.error,d=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var l;s&&(this.dismiss(r),r=void 0),(l=n.finally)==null||l.call(n)}),c=()=>new Promise((l,u)=>a.then(()=>o[0]==="reject"?u(o[1]):l(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||pA++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Zr=new Dae,Lae=(t,e)=>{let n=(e==null?void 0:e.id)||pA++;return Zr.addToast({title:t,...e,id:n}),n},Fae=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Vae=Lae,jae=()=>Zr.toasts,Uae=()=>Zr.getActiveToasts(),Sr=Object.assign(Vae,{success:Zr.success,info:Zr.info,warning:Zr.warning,error:Zr.error,custom:Zr.custom,message:Zr.message,promise:Zr.promise,dismiss:Zr.dismiss,loading:Zr.loading},{getHistory:jae,getToasts:Uae});function $ae(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}$ae(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function iv(t){return t.label!==void 0}var Bae=3,Hae="32px",zae="16px",yL=4e3,Wae=356,Kae=14,qae=20,Gae=200;function hs(...t){return t.filter(Boolean).join(" ")}function Qae(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Yae=t=>{var e,n,r,i,s,o,a,c,l,u,d;let{invert:h,toast:m,unstyled:_,interacting:v,setHeights:T,visibleToasts:y,heights:w,index:C,toasts:b,expanded:k,removeToast:D,defaultRichColors:A,closeButton:S,style:x,cancelButtonStyle:N,actionButtonStyle:R,className:O="",descriptionClassName:P="",duration:z,position:K,gap:U,loadingIcon:q,expandByDefault:F,classNames:V,icons:X,closeButtonAriaLabel:ge="Close toast",pauseWhenPageIsHidden:pe}=t,[B,J]=Z.useState(null),[Y,W]=Z.useState(null),[te,we]=Z.useState(!1),[_e,Pe]=Z.useState(!1),[Ee,ze]=Z.useState(!1),[nt,ye]=Z.useState(!1),[Me,vt]=Z.useState(!1),[Mt,zt]=Z.useState(0),[Ve,L]=Z.useState(0),$=Z.useRef(m.duration||z||yL),Q=Z.useRef(null),he=Z.useRef(null),le=C===0,oe=C+1<=y,ve=m.type,Qe=m.dismissible!==!1,pt=m.className||"",On=m.descriptionClassName||"",vi=Z.useMemo(()=>w.findIndex(Be=>Be.toastId===m.id)||0,[w,m.id]),Pr=Z.useMemo(()=>{var Be;return(Be=m.closeButton)!=null?Be:S},[m.closeButton,S]),Lo=Z.useMemo(()=>m.duration||z||yL,[m.duration,z]),pn=Z.useRef(0),zn=Z.useRef(0),Bs=Z.useRef(0),rr=Z.useRef(null),[ed,Fo]=K.split("-"),Mf=Z.useMemo(()=>w.reduce((Be,bt,Vt)=>Vt>=vi?Be:Be+bt.height,0),[w,vi]),Da=Mae(),Ty=m.invert||h,Mn=ve==="loading";zn.current=Z.useMemo(()=>vi*U+Mf,[vi,Mf]),Z.useEffect(()=>{$.current=Lo},[Lo]),Z.useEffect(()=>{we(!0)},[]),Z.useEffect(()=>{let Be=he.current;if(Be){let bt=Be.getBoundingClientRect().height;return L(bt),T(Vt=>[{toastId:m.id,height:bt,position:m.position},...Vt]),()=>T(Vt=>Vt.filter(Wn=>Wn.toastId!==m.id))}},[T,m.id]),Z.useLayoutEffect(()=>{if(!te)return;let Be=he.current,bt=Be.style.height;Be.style.height="auto";let Vt=Be.getBoundingClientRect().height;Be.style.height=bt,L(Vt),T(Wn=>Wn.find(wi=>wi.toastId===m.id)?Wn.map(wi=>wi.toastId===m.id?{...wi,height:Vt}:wi):[{toastId:m.id,height:Vt,position:m.position},...Wn])},[te,m.title,m.description,T,m.id]);let ls=Z.useCallback(()=>{Pe(!0),zt(zn.current),T(Be=>Be.filter(bt=>bt.toastId!==m.id)),setTimeout(()=>{D(m)},Gae)},[m,D,T,zn]);Z.useEffect(()=>{if(m.promise&&ve==="loading"||m.duration===1/0||m.type==="loading")return;let Be;return k||v||pe&&Da?(()=>{if(Bs.current<pn.current){let bt=new Date().getTime()-pn.current;$.current=$.current-bt}Bs.current=new Date().getTime()})():$.current!==1/0&&(pn.current=new Date().getTime(),Be=setTimeout(()=>{var bt;(bt=m.onAutoClose)==null||bt.call(m,m),ls()},$.current)),()=>clearTimeout(Be)},[k,v,m,ve,pe,Da,ls]),Z.useEffect(()=>{m.delete&&ls()},[ls,m.delete]);function wl(){var Be,bt,Vt;return X!=null&&X.loading?Z.createElement("div",{className:hs(V==null?void 0:V.loader,(Be=m==null?void 0:m.classNames)==null?void 0:Be.loader,"sonner-loader"),"data-visible":ve==="loading"},X.loading):q?Z.createElement("div",{className:hs(V==null?void 0:V.loader,(bt=m==null?void 0:m.classNames)==null?void 0:bt.loader,"sonner-loader"),"data-visible":ve==="loading"},q):Z.createElement(kae,{className:hs(V==null?void 0:V.loader,(Vt=m==null?void 0:m.classNames)==null?void 0:Vt.loader),visible:ve==="loading"})}return Z.createElement("li",{tabIndex:0,ref:he,className:hs(O,pt,V==null?void 0:V.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[ve],(n=m==null?void 0:m.classNames)==null?void 0:n[ve]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||_),"data-mounted":te,"data-promise":!!m.promise,"data-swiped":Me,"data-removed":_e,"data-visible":oe,"data-y-position":ed,"data-x-position":Fo,"data-index":C,"data-front":le,"data-swiping":Ee,"data-dismissible":Qe,"data-type":ve,"data-invert":Ty,"data-swipe-out":nt,"data-swipe-direction":Y,"data-expanded":!!(k||F&&te),style:{"--index":C,"--toasts-before":C,"--z-index":b.length-C,"--offset":`${_e?Mt:zn.current}px`,"--initial-height":F?"auto":`${Ve}px`,...x,...m.style},onDragEnd:()=>{ze(!1),J(null),rr.current=null},onPointerDown:Be=>{Mn||!Qe||(Q.current=new Date,zt(zn.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(ze(!0),rr.current={x:Be.clientX,y:Be.clientY}))},onPointerUp:()=>{var Be,bt,Vt,Wn;if(nt||!Qe)return;rr.current=null;let wi=Number(((Be=he.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hs=Number(((bt=he.current)==null?void 0:bt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ui=new Date().getTime()-((Vt=Q.current)==null?void 0:Vt.getTime()),Xr=B==="x"?wi:Hs,us=Math.abs(Xr)/Ui;if(Math.abs(Xr)>=qae||us>.11){zt(zn.current),(Wn=m.onDismiss)==null||Wn.call(m,m),W(B==="x"?wi>0?"right":"left":Hs>0?"down":"up"),ls(),ye(!0),vt(!1);return}ze(!1),J(null)},onPointerMove:Be=>{var bt,Vt,Wn,wi;if(!rr.current||!Qe||((bt=window.getSelection())==null?void 0:bt.toString().length)>0)return;let Hs=Be.clientY-rr.current.y,Ui=Be.clientX-rr.current.x,Xr=(Vt=t.swipeDirections)!=null?Vt:Qae(K);!B&&(Math.abs(Ui)>1||Math.abs(Hs)>1)&&J(Math.abs(Ui)>Math.abs(Hs)?"x":"y");let us={x:0,y:0};B==="y"?(Xr.includes("top")||Xr.includes("bottom"))&&(Xr.includes("top")&&Hs<0||Xr.includes("bottom")&&Hs>0)&&(us.y=Hs):B==="x"&&(Xr.includes("left")||Xr.includes("right"))&&(Xr.includes("left")&&Ui<0||Xr.includes("right")&&Ui>0)&&(us.x=Ui),(Math.abs(us.x)>0||Math.abs(us.y)>0)&&vt(!0),(Wn=he.current)==null||Wn.style.setProperty("--swipe-amount-x",`${us.x}px`),(wi=he.current)==null||wi.style.setProperty("--swipe-amount-y",`${us.y}px`)}},Pr&&!m.jsx?Z.createElement("button",{"aria-label":ge,"data-disabled":Mn,"data-close-button":!0,onClick:Mn||!Qe?()=>{}:()=>{var Be;ls(),(Be=m.onDismiss)==null||Be.call(m,m)},className:hs(V==null?void 0:V.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=X==null?void 0:X.close)!=null?s:Oae):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Z.createElement(Z.Fragment,null,ve||m.icon||m.promise?Z.createElement("div",{"data-icon":"",className:hs(V==null?void 0:V.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||wl():null,m.type!=="loading"?m.icon||(X==null?void 0:X[ve])||Iae(ve):null):null,Z.createElement("div",{"data-content":"",className:hs(V==null?void 0:V.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Z.createElement("div",{"data-title":"",className:hs(V==null?void 0:V.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Z.createElement("div",{"data-description":"",className:hs(P,On,V==null?void 0:V.description,(l=m==null?void 0:m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&iv(m.cancel)?Z.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:Be=>{var bt,Vt;iv(m.cancel)&&Qe&&((Vt=(bt=m.cancel).onClick)==null||Vt.call(bt,Be),ls())},className:hs(V==null?void 0:V.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&iv(m.action)?Z.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||R,onClick:Be=>{var bt,Vt;iv(m.action)&&((Vt=(bt=m.action).onClick)==null||Vt.call(bt,Be),!Be.defaultPrevented&&ls())},className:hs(V==null?void 0:V.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function vL(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Xae(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?zae:Hae;function c(l){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof l=="number"?`${l}px`:l})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(l=>{r[l]===void 0?n[`${o}-${l}`]=a:n[`${o}-${l}`]=typeof r[l]=="number"?`${r[l]}px`:r[l]}):c(a)}),n}var Jae=g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:c,mobileOffset:l,theme:u="light",richColors:d,duration:h,style:m,visibleToasts:_=Bae,toastOptions:v,dir:T=vL(),gap:y=Kae,loadingIcon:w,icons:C,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:k}=t,[D,A]=Z.useState([]),S=Z.useMemo(()=>Array.from(new Set([r].concat(D.filter(pe=>pe.position).map(pe=>pe.position)))),[D,r]),[x,N]=Z.useState([]),[R,O]=Z.useState(!1),[P,z]=Z.useState(!1),[K,U]=Z.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Z.useRef(null),F=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Z.useRef(null),X=Z.useRef(!1),ge=Z.useCallback(pe=>{A(B=>{var J;return(J=B.find(Y=>Y.id===pe.id))!=null&&J.delete||Zr.dismiss(pe.id),B.filter(({id:Y})=>Y!==pe.id)})},[]);return Z.useEffect(()=>Zr.subscribe(pe=>{if(pe.dismiss){A(B=>B.map(J=>J.id===pe.id?{...J,delete:!0}:J));return}setTimeout(()=>{iB.flushSync(()=>{A(B=>{let J=B.findIndex(Y=>Y.id===pe.id);return J!==-1?[...B.slice(0,J),{...B[J],...pe},...B.slice(J+1)]:[pe,...B]})})})}),[]),Z.useEffect(()=>{if(u!=="system"){U(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let pe=window.matchMedia("(prefers-color-scheme: dark)");try{pe.addEventListener("change",({matches:B})=>{U(B?"dark":"light")})}catch{pe.addListener(({matches:J})=>{try{U(J?"dark":"light")}catch(Y){console.error(Y)}})}},[u]),Z.useEffect(()=>{D.length<=1&&O(!1)},[D]),Z.useEffect(()=>{let pe=B=>{var J,Y;i.every(W=>B[W]||B.code===W)&&(O(!0),(J=q.current)==null||J.focus()),B.code==="Escape"&&(document.activeElement===q.current||(Y=q.current)!=null&&Y.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[i]),Z.useEffect(()=>{if(q.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,X.current=!1)}},[q.current]),Z.createElement("section",{ref:e,"aria-label":`${b} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((pe,B)=>{var J;let[Y,W]=pe.split("-");return D.length?Z.createElement("ol",{key:pe,dir:T==="auto"?vL():T,tabIndex:-1,ref:q,className:a,"data-sonner-toaster":!0,"data-theme":K,"data-y-position":Y,"data-lifted":R&&D.length>1&&!s,"data-x-position":W,style:{"--front-toast-height":`${((J=x[0])==null?void 0:J.height)||0}px`,"--width":`${Wae}px`,"--gap":`${y}px`,...m,...Xae(c,l)},onBlur:te=>{X.current&&!te.currentTarget.contains(te.relatedTarget)&&(X.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||X.current||(X.current=!0,V.current=te.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{P||O(!1)},onDragEnd:()=>O(!1),onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},D.filter(te=>!te.position&&B===0||te.position===pe).map((te,we)=>{var _e,Pe;return Z.createElement(Yae,{key:te.id,icons:C,index:we,toast:te,defaultRichColors:d,duration:(_e=v==null?void 0:v.duration)!=null?_e:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:_,closeButton:(Pe=v==null?void 0:v.closeButton)!=null?Pe:o,interacting:P,position:pe,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ge,toasts:D.filter(Ee=>Ee.position==te.position),heights:x.filter(Ee=>Ee.position==te.position),setHeights:N,expandByDefault:s,gap:y,loadingIcon:w,expanded:R,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const Zae=({...t})=>{const{theme:e="system"}=_ae();return p.jsx(Jae,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:w-[420px] group-[.toaster]:p-4 group-[.toaster]:bg-background/80 group-[.toaster]:backdrop-blur-lg group-[.toaster]:text-foreground group-[.toaster]:border-border/50 group-[.toaster]:shadow-elegant rounded-xl",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",icon:"group-[.toast]:text-primary"}},...t})};var ece=wk[" useId ".trim().toString()]||(()=>{}),tce=0;function go(t){const[e,n]=g.useState(ece());return gi(()=>{n(r=>r??String(tce++))},[t]),e?`radix-${e}`:""}const nce=["top","right","bottom","left"],Hc=Math.min,bi=Math.max,o_=Math.round,sv=Math.floor,yo=t=>({x:t,y:t}),rce={left:"right",right:"left",bottom:"top",top:"bottom"},ice={start:"end",end:"start"};function mA(t,e,n){return bi(t,Hc(e,n))}function ga(t,e){return typeof t=="function"?t(e):t}function ya(t){return t.split("-")[0]}function hf(t){return t.split("-")[1]}function MR(t){return t==="x"?"y":"x"}function DR(t){return t==="y"?"height":"width"}const sce=new Set(["top","bottom"]);function oo(t){return sce.has(ya(t))?"y":"x"}function LR(t){return MR(oo(t))}function oce(t,e,n){n===void 0&&(n=!1);const r=hf(t),i=LR(t),s=DR(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=a_(o)),[o,a_(o)]}function ace(t){const e=a_(t);return[gA(t),e,gA(e)]}function gA(t){return t.replace(/start|end/g,e=>ice[e])}const wL=["left","right"],_L=["right","left"],cce=["top","bottom"],lce=["bottom","top"];function uce(t,e,n){switch(t){case"top":case"bottom":return n?e?_L:wL:e?wL:_L;case"left":case"right":return e?cce:lce;default:return[]}}function dce(t,e,n,r){const i=hf(t);let s=uce(ya(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(gA)))),s}function a_(t){return t.replace(/left|right|bottom|top/g,e=>rce[e])}function hce(t){return{top:0,right:0,bottom:0,left:0,...t}}function T5(t){return typeof t!="number"?hce(t):{top:t,right:t,bottom:t,left:t}}function c_(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function TL(t,e,n){let{reference:r,floating:i}=t;const s=oo(e),o=LR(e),a=DR(o),c=ya(e),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(hf(e)){case"start":m[o]-=h*(n&&l?-1:1);break;case"end":m[o]+=h*(n&&l?-1:1);break}return m}const fce=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=TL(l,r,c),h=r,m={},_=0;for(let v=0;v<a.length;v++){const{name:T,fn:y}=a[v],{x:w,y:C,data:b,reset:k}=await y({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:l,platform:o,elements:{reference:t,floating:e}});u=w??u,d=C??d,m={...m,[T]:{...m[T],...b}},k&&_<=50&&(_++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(l=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=TL(l,h,c)),v=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:m}};async function Bm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=ga(e,t),_=T5(m),T=a[h?d==="floating"?"reference":"floating":d],y=c_(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(T)))==null||n?T:T.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},k=c_(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:C,strategy:c}):w);return{top:(y.top-k.top+_.top)/b.y,bottom:(k.bottom-y.bottom+_.bottom)/b.y,left:(y.left-k.left+_.left)/b.x,right:(k.right-y.right+_.right)/b.x}}const pce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=ga(t,e)||{};if(l==null)return{};const d=T5(u),h={x:n,y:r},m=LR(i),_=DR(m),v=await o.getDimensions(l),T=m==="y",y=T?"top":"left",w=T?"bottom":"right",C=T?"clientHeight":"clientWidth",b=s.reference[_]+s.reference[m]-h[m]-s.floating[_],k=h[m]-s.reference[m],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=D?D[C]:0;(!A||!await(o.isElement==null?void 0:o.isElement(D)))&&(A=a.floating[C]||s.floating[_]);const S=b/2-k/2,x=A/2-v[_]/2-1,N=Hc(d[y],x),R=Hc(d[w],x),O=N,P=A-v[_]-R,z=A/2-v[_]/2+S,K=mA(O,z,P),U=!c.arrow&&hf(i)!=null&&z!==K&&s.reference[_]/2-(z<O?N:R)-v[_]/2<0,q=U?z<O?z-O:z-P:0;return{[m]:h[m]+q,data:{[m]:K,centerOffset:z-K-q,...U&&{alignmentOffset:q}},reset:U}}}),mce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:v=!0,...T}=ga(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ya(i),w=oo(a),C=ya(a)===a,b=await(c.isRTL==null?void 0:c.isRTL(l.floating)),k=h||(C||!v?[a_(a)]:ace(a)),D=_!=="none";!h&&D&&k.push(...dce(a,v,_,b));const A=[a,...k],S=await Bm(e,T),x=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&x.push(S[y]),d){const z=oce(i,o,b);x.push(S[z[0]],S[z[1]])}if(N=[...N,{placement:i,overflows:x}],!x.every(z=>z<=0)){var R,O;const z=(((R=s.flip)==null?void 0:R.index)||0)+1,K=A[z];if(K&&(!(d==="alignment"?w!==oo(K):!1)||N.every(F=>oo(F.placement)===w?F.overflows[0]>0:!0)))return{data:{index:z,overflows:N},reset:{placement:K}};let U=(O=N.filter(q=>q.overflows[0]<=0).sort((q,F)=>q.overflows[1]-F.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(m){case"bestFit":{var P;const q=(P=N.filter(F=>{if(D){const V=oo(F.placement);return V===w||V==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(V=>V>0).reduce((V,X)=>V+X,0)]).sort((F,V)=>F[1]-V[1])[0])==null?void 0:P[0];q&&(U=q);break}case"initialPlacement":U=a;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function CL(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function EL(t){return nce.some(e=>t[e]>=0)}const gce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ga(t,e);switch(r){case"referenceHidden":{const s=await Bm(e,{...i,elementContext:"reference"}),o=CL(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:EL(o)}}}case"escaped":{const s=await Bm(e,{...i,altBoundary:!0}),o=CL(s,n.floating);return{data:{escapedOffsets:o,escaped:EL(o)}}}default:return{}}}}},C5=new Set(["left","top"]);async function yce(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ya(n),a=hf(n),c=oo(n)==="y",l=C5.has(o)?-1:1,u=s&&c?-1:1,d=ga(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof _=="number"&&(m=a==="end"?_*-1:_),c?{x:m*u,y:h*l}:{x:h*l,y:m*u}}const vce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await yce(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},wce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:y,y:w}=T;return{x:y,y:w}}},...c}=ga(t,e),l={x:n,y:r},u=await Bm(e,c),d=oo(ya(i)),h=MR(d);let m=l[h],_=l[d];if(s){const T=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=m+u[T],C=m-u[y];m=mA(w,m,C)}if(o){const T=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=_+u[T],C=_-u[y];_=mA(w,_,C)}const v=a.fn({...e,[h]:m,[d]:_});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:o}}}}}},_ce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=ga(t,e),u={x:n,y:r},d=oo(i),h=MR(d);let m=u[h],_=u[d];const v=ga(a,e),T=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const C=h==="y"?"height":"width",b=s.reference[h]-s.floating[C]+T.mainAxis,k=s.reference[h]+s.reference[C]-T.mainAxis;m<b?m=b:m>k&&(m=k)}if(l){var y,w;const C=h==="y"?"width":"height",b=C5.has(ya(i)),k=s.reference[d]-s.floating[C]+(b&&((y=o.offset)==null?void 0:y[d])||0)+(b?0:T.crossAxis),D=s.reference[d]+s.reference[C]+(b?0:((w=o.offset)==null?void 0:w[d])||0)-(b?T.crossAxis:0);_<k?_=k:_>D&&(_=D)}return{[h]:m,[d]:_}}}},Tce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=ga(t,e),u=await Bm(e,l),d=ya(i),h=hf(i),m=oo(i)==="y",{width:_,height:v}=s.floating;let T,y;d==="top"||d==="bottom"?(T=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,T=h==="end"?"top":"bottom");const w=v-u.top-u.bottom,C=_-u.left-u.right,b=Hc(v-u[T],w),k=Hc(_-u[y],C),D=!e.middlewareData.shift;let A=b,S=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=w),D&&!h){const N=bi(u.left,0),R=bi(u.right,0),O=bi(u.top,0),P=bi(u.bottom,0);m?S=_-2*(N!==0||R!==0?N+R:bi(u.left,u.right)):A=v-2*(O!==0||P!==0?O+P:bi(u.top,u.bottom))}await c({...e,availableWidth:S,availableHeight:A});const x=await o.getDimensions(a.floating);return _!==x.width||v!==x.height?{reset:{rects:!0}}:{}}}};function sC(){return typeof window<"u"}function ff(t){return E5(t)?(t.nodeName||"").toLowerCase():"#document"}function Oi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Oo(t){var e;return(e=(E5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function E5(t){return sC()?t instanceof Node||t instanceof Oi(t).Node:!1}function Ds(t){return sC()?t instanceof Element||t instanceof Oi(t).Element:!1}function Ao(t){return sC()?t instanceof HTMLElement||t instanceof Oi(t).HTMLElement:!1}function SL(t){return!sC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Oi(t).ShadowRoot}const Cce=new Set(["inline","contents"]);function Ug(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ls(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Cce.has(i)}const Ece=new Set(["table","td","th"]);function Sce(t){return Ece.has(ff(t))}const bce=[":popover-open",":modal"];function oC(t){return bce.some(e=>{try{return t.matches(e)}catch{return!1}})}const Ice=["transform","translate","scale","rotate","perspective"],Ace=["transform","translate","scale","rotate","perspective","filter"],kce=["paint","layout","strict","content"];function FR(t){const e=VR(),n=Ds(t)?Ls(t):t;return Ice.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Ace.some(r=>(n.willChange||"").includes(r))||kce.some(r=>(n.contain||"").includes(r))}function xce(t){let e=zc(t);for(;Ao(e)&&!Sh(e);){if(FR(e))return e;if(oC(e))return null;e=zc(e)}return null}function VR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Rce=new Set(["html","body","#document"]);function Sh(t){return Rce.has(ff(t))}function Ls(t){return Oi(t).getComputedStyle(t)}function aC(t){return Ds(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zc(t){if(ff(t)==="html")return t;const e=t.assignedSlot||t.parentNode||SL(t)&&t.host||Oo(t);return SL(e)?e.host:e}function S5(t){const e=zc(t);return Sh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ao(e)&&Ug(e)?e:S5(e)}function Hm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=S5(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Oi(i);if(s){const a=yA(o);return e.concat(o,o.visualViewport||[],Ug(i)?i:[],a&&n?Hm(a):[])}return e.concat(i,Hm(i,[],n))}function yA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function b5(t){const e=Ls(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ao(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=o_(n)!==s||o_(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function jR(t){return Ds(t)?t:t.contextElement}function Qd(t){const e=jR(t);if(!Ao(e))return yo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=b5(e);let o=(s?o_(n.width):n.width)/r,a=(s?o_(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Pce=yo(0);function I5(t){const e=Oi(t);return!VR()||!e.visualViewport?Pce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Nce(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Oi(t)?!1:e}function Su(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=jR(t);let o=yo(1);e&&(r?Ds(r)&&(o=Qd(r)):o=Qd(t));const a=Nce(s,n,r)?I5(s):yo(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=Oi(s),m=r&&Ds(r)?Oi(r):r;let _=h,v=yA(_);for(;v&&r&&m!==_;){const T=Qd(v),y=v.getBoundingClientRect(),w=Ls(v),C=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*T.x,b=y.top+(v.clientTop+parseFloat(w.paddingTop))*T.y;c*=T.x,l*=T.y,u*=T.x,d*=T.y,c+=C,l+=b,_=Oi(v),v=yA(_)}}return c_({width:u,height:d,x:c,y:l})}function cC(t,e){const n=aC(t).scrollLeft;return e?e.left+n:Su(Oo(t)).left+n}function A5(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-cC(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Oce(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Oo(r),a=e?oC(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=yo(1);const u=yo(0),d=Ao(r);if((d||!d&&!s)&&((ff(r)!=="body"||Ug(o))&&(c=aC(r)),Ao(r))){const m=Su(r);l=Qd(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const h=o&&!d&&!s?A5(o,c):yo(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}}function Mce(t){return Array.from(t.getClientRects())}function Dce(t){const e=Oo(t),n=aC(t),r=t.ownerDocument.body,i=bi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=bi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cC(t);const a=-n.scrollTop;return Ls(r).direction==="rtl"&&(o+=bi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const bL=25;function Lce(t,e){const n=Oi(t),r=Oo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const u=VR();(!u||u&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const l=cC(r);if(l<=0){const u=r.ownerDocument,d=u.body,h=getComputedStyle(d),m=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,_=Math.abs(r.clientWidth-d.clientWidth-m);_<=bL&&(s-=_)}else l<=bL&&(s+=l);return{width:s,height:o,x:a,y:c}}const Fce=new Set(["absolute","fixed"]);function Vce(t,e){const n=Su(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ao(t)?Qd(t):yo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function IL(t,e,n){let r;if(e==="viewport")r=Lce(t,n);else if(e==="document")r=Dce(Oo(t));else if(Ds(e))r=Vce(e,n);else{const i=I5(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return c_(r)}function k5(t,e){const n=zc(t);return n===e||!Ds(n)||Sh(n)?!1:Ls(n).position==="fixed"||k5(n,e)}function jce(t,e){const n=e.get(t);if(n)return n;let r=Hm(t,[],!1).filter(a=>Ds(a)&&ff(a)!=="body"),i=null;const s=Ls(t).position==="fixed";let o=s?zc(t):t;for(;Ds(o)&&!Sh(o);){const a=Ls(o),c=FR(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&Fce.has(i.position)||Ug(o)&&!c&&k5(t,o))?r=r.filter(u=>u!==o):i=a,o=zc(o)}return e.set(t,r),r}function Uce(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?oC(e)?[]:jce(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=IL(e,u,i);return l.top=bi(d.top,l.top),l.right=Hc(d.right,l.right),l.bottom=Hc(d.bottom,l.bottom),l.left=bi(d.left,l.left),l},IL(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $ce(t){const{width:e,height:n}=b5(t);return{width:e,height:n}}function Bce(t,e,n){const r=Ao(e),i=Oo(e),s=n==="fixed",o=Su(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=yo(0);function l(){c.x=cC(i)}if(r||!r&&!s)if((ff(e)!=="body"||Ug(i))&&(a=aC(e)),r){const m=Su(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&l();s&&!r&&i&&l();const u=i&&!r&&!s?A5(i,a):yo(0),d=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function LS(t){return Ls(t).position==="static"}function AL(t,e){if(!Ao(t)||Ls(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Oo(t)===n&&(n=n.ownerDocument.body),n}function x5(t,e){const n=Oi(t);if(oC(t))return n;if(!Ao(t)){let i=zc(t);for(;i&&!Sh(i);){if(Ds(i)&&!LS(i))return i;i=zc(i)}return n}let r=AL(t,e);for(;r&&Sce(r)&&LS(r);)r=AL(r,e);return r&&Sh(r)&&LS(r)&&!FR(r)?n:r||xce(t)||n}const Hce=async function(t){const e=this.getOffsetParent||x5,n=this.getDimensions,r=await n(t.floating);return{reference:Bce(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zce(t){return Ls(t).direction==="rtl"}const Wce={convertOffsetParentRelativeRectToViewportRelativeRect:Oce,getDocumentElement:Oo,getClippingRect:Uce,getOffsetParent:x5,getElementRects:Hce,getClientRects:Mce,getDimensions:$ce,getScale:Qd,isElement:Ds,isRTL:zce};function R5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Kce(t,e){let n=null,r;const i=Oo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=t.getBoundingClientRect(),{left:u,top:d,width:h,height:m}=l;if(a||e(),!h||!m)return;const _=sv(d),v=sv(i.clientWidth-(u+h)),T=sv(i.clientHeight-(d+m)),y=sv(u),C={rootMargin:-_+"px "+-v+"px "+-T+"px "+-y+"px",threshold:bi(0,Hc(1,c))||1};let b=!0;function k(D){const A=D[0].intersectionRatio;if(A!==c){if(!b)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!R5(l,t.getBoundingClientRect())&&o(),b=!1}try{n=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function qce(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=jR(t),u=i||s?[...l?Hm(l):[],...Hm(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=l&&a?Kce(l,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),n()}),l&&!c&&m.observe(l),m.observe(e));let _,v=c?Su(t):null;c&&T();function T(){const y=Su(t);v&&!R5(v,y)&&n(),v=y,_=requestAnimationFrame(T)}return n(),()=>{var y;u.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(_)}}const Gce=vce,Qce=wce,Yce=mce,Xce=Tce,Jce=gce,kL=pce,Zce=_ce,ele=(t,e,n)=>{const r=new Map,i={platform:Wce,...n},s={...i.platform,_c:r};return fce(t,e,{...i,platform:s})};var tle=typeof document<"u",nle=function(){},Hv=tle?g.useLayoutEffect:nle;function l_(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!l_(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!l_(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function P5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function xL(t,e){const n=P5(t);return Math.round(e*n)/n}function FS(t){const e=g.useRef(t);return Hv(()=>{e.current=t}),e}function rle(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=g.useState(r);l_(h,r)||m(r);const[_,v]=g.useState(null),[T,y]=g.useState(null),w=g.useCallback(F=>{F!==D.current&&(D.current=F,v(F))},[]),C=g.useCallback(F=>{F!==A.current&&(A.current=F,y(F))},[]),b=s||_,k=o||T,D=g.useRef(null),A=g.useRef(null),S=g.useRef(u),x=c!=null,N=FS(c),R=FS(i),O=FS(l),P=g.useCallback(()=>{if(!D.current||!A.current)return;const F={placement:e,strategy:n,middleware:h};R.current&&(F.platform=R.current),ele(D.current,A.current,F).then(V=>{const X={...V,isPositioned:O.current!==!1};z.current&&!l_(S.current,X)&&(S.current=X,Mg.flushSync(()=>{d(X)}))})},[h,e,n,R,O]);Hv(()=>{l===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,d(F=>({...F,isPositioned:!1})))},[l]);const z=g.useRef(!1);Hv(()=>(z.current=!0,()=>{z.current=!1}),[]),Hv(()=>{if(b&&(D.current=b),k&&(A.current=k),b&&k){if(N.current)return N.current(b,k,P);P()}},[b,k,P,N,x]);const K=g.useMemo(()=>({reference:D,floating:A,setReference:w,setFloating:C}),[w,C]),U=g.useMemo(()=>({reference:b,floating:k}),[b,k]),q=g.useMemo(()=>{const F={position:n,left:0,top:0};if(!U.floating)return F;const V=xL(U.floating,u.x),X=xL(U.floating,u.y);return a?{...F,transform:"translate("+V+"px, "+X+"px)",...P5(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:X}},[n,a,U.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:P,refs:K,elements:U,floatingStyles:q}),[u,P,K,U,q])}const ile=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?kL({element:r.current,padding:i}).fn(n):{}:r?kL({element:r,padding:i}).fn(n):{}}}},sle=(t,e)=>({...Gce(t),options:[t,e]}),ole=(t,e)=>({...Qce(t),options:[t,e]}),ale=(t,e)=>({...Zce(t),options:[t,e]}),cle=(t,e)=>({...Yce(t),options:[t,e]}),lle=(t,e)=>({...Xce(t),options:[t,e]}),ule=(t,e)=>({...Jce(t),options:[t,e]}),dle=(t,e)=>({...ile(t),options:[t,e]});var hle="Arrow",N5=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(Fe.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});N5.displayName=hle;var fle=N5;function O5(t){const[e,n]=g.useState(void 0);return gi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var UR="Popper",[M5,pf]=Gr(UR),[ple,D5]=M5(UR),L5=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return p.jsx(ple,{scope:e,anchor:r,onAnchorChange:i,children:n})};L5.displayName=UR;var F5="PopperAnchor",V5=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=D5(F5,n),o=g.useRef(null),a=Et(e,o),c=g.useRef(null);return g.useEffect(()=>{const l=c.current;c.current=(r==null?void 0:r.current)||o.current,l!==c.current&&s.onAnchorChange(c.current)}),r?null:p.jsx(Fe.div,{...i,ref:a})});V5.displayName=F5;var $R="PopperContent",[mle,gle]=M5($R),j5=g.forwardRef((t,e)=>{var te,we,_e,Pe,Ee,ze;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:_,...v}=t,T=D5($R,n),[y,w]=g.useState(null),C=Et(e,nt=>w(nt)),[b,k]=g.useState(null),D=O5(b),A=(D==null?void 0:D.width)??0,S=(D==null?void 0:D.height)??0,x=r+(s!=="center"?"-"+s:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(l)?l:[l],O=R.length>0,P={padding:N,boundary:R.filter(vle),altBoundary:O},{refs:z,floatingStyles:K,placement:U,isPositioned:q,middlewareData:F}=rle({strategy:"fixed",placement:x,whileElementsMounted:(...nt)=>qce(...nt,{animationFrame:m==="always"}),elements:{reference:T.anchor},middleware:[sle({mainAxis:i+S,alignmentAxis:o}),c&&ole({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ale():void 0,...P}),c&&cle({...P}),lle({...P,apply:({elements:nt,rects:ye,availableWidth:Me,availableHeight:vt})=>{const{width:Mt,height:zt}=ye.reference,Ve=nt.floating.style;Ve.setProperty("--radix-popper-available-width",`${Me}px`),Ve.setProperty("--radix-popper-available-height",`${vt}px`),Ve.setProperty("--radix-popper-anchor-width",`${Mt}px`),Ve.setProperty("--radix-popper-anchor-height",`${zt}px`)}}),b&&dle({element:b,padding:a}),wle({arrowWidth:A,arrowHeight:S}),h&&ule({strategy:"referenceHidden",...P})]}),[V,X]=B5(U),ge=wn(_);gi(()=>{q&&(ge==null||ge())},[q,ge]);const pe=(te=F.arrow)==null?void 0:te.x,B=(we=F.arrow)==null?void 0:we.y,J=((_e=F.arrow)==null?void 0:_e.centerOffset)!==0,[Y,W]=g.useState();return gi(()=>{y&&W(window.getComputedStyle(y).zIndex)},[y]),p.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(Pe=F.transformOrigin)==null?void 0:Pe.x,(Ee=F.transformOrigin)==null?void 0:Ee.y].join(" "),...((ze=F.hide)==null?void 0:ze.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(mle,{scope:n,placedSide:V,onArrowChange:k,arrowX:pe,arrowY:B,shouldHideArrow:J,children:p.jsx(Fe.div,{"data-side":V,"data-align":X,...v,ref:C,style:{...v.style,animation:q?void 0:"none"}})})})});j5.displayName=$R;var U5="PopperArrow",yle={top:"bottom",right:"left",bottom:"top",left:"right"},$5=g.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=gle(U5,r),o=yle[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(fle,{...i,ref:n,style:{...i.style,display:"block"}})})});$5.displayName=U5;function vle(t){return t!==null}var wle=t=>({name:"transformOrigin",options:t,fn(e){var T,y,w;const{placement:n,rects:r,middlewareData:i}=e,o=((T=i.arrow)==null?void 0:T.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[l,u]=B5(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+c/2;let _="",v="";return l==="bottom"?(_=o?d:`${h}px`,v=`${-c}px`):l==="top"?(_=o?d:`${h}px`,v=`${r.floating.height+c}px`):l==="right"?(_=`${-c}px`,v=o?d:`${m}px`):l==="left"&&(_=`${r.floating.width+c}px`,v=o?d:`${m}px`),{data:{x:_,y:v}}}});function B5(t){const[e,n="center"]=t.split("-");return[e,n]}var BR=L5,lC=V5,HR=j5,zR=$5,[uC]=Gr("Tooltip",[pf]),dC=pf(),H5="TooltipProvider",_le=700,vA="tooltip.open",[Tle,WR]=uC(H5),z5=t=>{const{__scopeTooltip:e,delayDuration:n=_le,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=g.useRef(!0),a=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),p.jsx(Tle,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:g.useCallback(l=>{a.current=l},[]),disableHoverableContent:i,children:s})};z5.displayName=H5;var zm="Tooltip",[Cle,hC]=uC(zm),W5=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=WR(zm,t.__scopeTooltip),l=dC(e),[u,d]=g.useState(null),h=go(),m=g.useRef(0),_=o??c.disableHoverableContent,v=a??c.delayDuration,T=g.useRef(!1),[y,w]=Na({prop:r,defaultProp:i??!1,onChange:A=>{A?(c.onOpen(),document.dispatchEvent(new CustomEvent(vA))):c.onClose(),s==null||s(A)},caller:zm}),C=g.useMemo(()=>y?T.current?"delayed-open":"instant-open":"closed",[y]),b=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,T.current=!1,w(!0)},[w]),k=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),D=g.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{T.current=!0,w(!0),m.current=0},v)},[v,w]);return g.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),p.jsx(BR,{...l,children:p.jsx(Cle,{scope:e,contentId:h,open:y,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?D():b()},[c.isOpenDelayedRef,D,b]),onTriggerLeave:g.useCallback(()=>{_?k():(window.clearTimeout(m.current),m.current=0)},[k,_]),onOpen:b,onClose:k,disableHoverableContent:_,children:n})})};W5.displayName=zm;var wA="TooltipTrigger",K5=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=hC(wA,n),s=WR(wA,n),o=dC(n),a=g.useRef(null),c=Et(e,a,i.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(lC,{asChild:!0,...o,children:p.jsx(Fe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Se(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Se(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Se(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Se(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:Se(t.onBlur,i.onClose),onClick:Se(t.onClick,i.onClose)})})});K5.displayName=wA;var Ele="TooltipPortal",[KMe,Sle]=uC(Ele,{forceMount:void 0}),bh="TooltipContent",q5=g.forwardRef((t,e)=>{const n=Sle(bh,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=hC(bh,t.__scopeTooltip);return p.jsx(Hn,{present:r||o.open,children:o.disableHoverableContent?p.jsx(G5,{side:i,...s,ref:e}):p.jsx(ble,{side:i,...s,ref:e})})}),ble=g.forwardRef((t,e)=>{const n=hC(bh,t.__scopeTooltip),r=WR(bh,t.__scopeTooltip),i=g.useRef(null),s=Et(e,i),[o,a]=g.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:d}=r,h=g.useCallback(()=>{a(null),d(!1)},[d]),m=g.useCallback((_,v)=>{const T=_.currentTarget,y={x:_.clientX,y:_.clientY},w=Rle(y,T.getBoundingClientRect()),C=Ple(y,w),b=Nle(v.getBoundingClientRect()),k=Mle([...C,...b]);a(k),d(!0)},[d]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(c&&u){const _=T=>m(T,u),v=T=>m(T,c);return c.addEventListener("pointerleave",_),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",v)}}},[c,u,m,h]),g.useEffect(()=>{if(o){const _=v=>{const T=v.target,y={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(T))||(u==null?void 0:u.contains(T)),C=!Ole(y,o);w?h():C&&(h(),l())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,u,o,l,h]),p.jsx(G5,{...t,ref:s})}),[Ile,Ale]=uC(zm,{isInside:!1}),kle=Sie("TooltipContent"),G5=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=hC(bh,n),l=dC(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(vA,u),()=>document.removeEventListener(vA,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(uf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(HR,{"data-state":c.stateAttribute,...l,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(kle,{children:r}),p.jsx(Ile,{scope:n,isInside:!0,children:p.jsx(qie,{id:c.contentId,role:"tooltip",children:i||r})})]})})});q5.displayName=bh;var Q5="TooltipArrow",xle=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=dC(n);return Ale(Q5,n).isInside?null:p.jsx(zR,{...i,...r,ref:e})});xle.displayName=Q5;function Rle(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Ple(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Nle(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Ole(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,h=c.y;u>r!=h>r&&n<(d-l)*(r-u)/(h-u)+l&&(i=!i)}return i}function Mle(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Dle(e)}function Dle(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Lle=z5,Fle=W5,Vle=K5,Y5=q5;const _A=Lle,RL=Fle,PL=Vle,TA=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(Y5,{ref:r,sideOffset:e,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));TA.displayName=Y5.displayName;var fC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jle={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ac,pk,LU,Ule=(LU=class{constructor(){mt(this,ac,jle);mt(this,pk,!1)}setTimeoutProvider(t){Ye(this,ac,t)}setTimeout(t,e){return ee(this,ac).setTimeout(t,e)}clearTimeout(t){ee(this,ac).clearTimeout(t)}setInterval(t,e){return ee(this,ac).setInterval(t,e)}clearInterval(t){ee(this,ac).clearInterval(t)}},ac=new WeakMap,pk=new WeakMap,LU),CA=new Ule;function $le(t){setTimeout(t,0)}var pC=typeof window>"u"||"Deno"in globalThis;function ms(){}function Ble(t,e){return typeof t=="function"?t(e):t}function Hle(t){return typeof t=="number"&&t>=0&&t!==1/0}function zle(t,e){return Math.max(t+(e||0)-Date.now(),0)}function EA(t,e){return typeof t=="function"?t(e):t}function Wle(t,e){return typeof t=="function"?t(e):t}function NL(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==KR(o,e.options))return!1}else if(!Km(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function OL(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Wm(e.options.mutationKey)!==Wm(s))return!1}else if(!Km(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function KR(t,e){return((e==null?void 0:e.queryKeyHashFn)||Wm)(t)}function Wm(t){return JSON.stringify(t,(e,n)=>SA(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Km(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Km(t[n],e[n])):!1}var Kle=Object.prototype.hasOwnProperty;function X5(t,e){if(t===e)return t;const n=ML(t)&&ML(e);if(!n&&!(SA(t)&&SA(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let c=0;for(let l=0;l<o;l++){const u=n?l:s[l],d=t[u],h=e[u];if(d===h){a[u]=d,(n?l<i:Kle.call(t,u))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[u]=h;continue}const m=X5(d,h);a[u]=m,m===d&&c++}return i===o&&c===i?t:a}function ML(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function SA(t){if(!DL(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!DL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function DL(t){return Object.prototype.toString.call(t)==="[object Object]"}function qle(t){return new Promise(e=>{CA.setTimeout(e,t)})}function Gle(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?X5(t,e):e}function Qle(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Yle(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var qR=Symbol();function J5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===qR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Jl,cc,oh,FU,Xle=(FU=class extends fC{constructor(){super();mt(this,Jl);mt(this,cc);mt(this,oh);Ye(this,oh,e=>{if(!pC&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ee(this,cc)||this.setEventListener(ee(this,oh))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,cc))==null||e.call(this),Ye(this,cc,void 0))}setEventListener(e){var n;Ye(this,oh,e),(n=ee(this,cc))==null||n.call(this),Ye(this,cc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,Jl)!==e&&(Ye(this,Jl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ee(this,Jl)=="boolean"?ee(this,Jl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Jl=new WeakMap,cc=new WeakMap,oh=new WeakMap,FU),Z5=new Xle;function Jle(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Zle=$le;function eue(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Zle;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Vr=eue(),ah,lc,ch,VU,tue=(VU=class extends fC{constructor(){super();mt(this,ah,!0);mt(this,lc);mt(this,ch);Ye(this,ch,e=>{if(!pC&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,lc)||this.setEventListener(ee(this,ch))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,lc))==null||e.call(this),Ye(this,lc,void 0))}setEventListener(e){var n;Ye(this,ch,e),(n=ee(this,lc))==null||n.call(this),Ye(this,lc,e(this.setOnline.bind(this)))}setOnline(e){ee(this,ah)!==e&&(Ye(this,ah,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,ah)}},ah=new WeakMap,lc=new WeakMap,ch=new WeakMap,VU),u_=new tue;function nue(t){return Math.min(1e3*2**t,3e4)}function e6(t){return(t??"online")==="online"?u_.isOnline():!0}var bA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function t6(t){let e=!1,n=0,r;const i=Jle(),s=()=>i.status!=="pending",o=v=>{var T;if(!s()){const y=new bA(v);h(y),(T=t.onCancel)==null||T.call(t,y)}},a=()=>{e=!0},c=()=>{e=!1},l=()=>Z5.isFocused()&&(t.networkMode==="always"||u_.isOnline())&&t.canRun(),u=()=>e6(t.networkMode)&&t.canRun(),d=v=>{s()||(r==null||r(),i.resolve(v))},h=v=>{s()||(r==null||r(),i.reject(v))},m=()=>new Promise(v=>{var T;r=y=>{(s()||l())&&v(y)},(T=t.onPause)==null||T.call(t)}).then(()=>{var v;r=void 0,s()||(v=t.onContinue)==null||v.call(t)}),_=()=>{if(s())return;let v;const T=n===0?t.initialPromise:void 0;try{v=T??t.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var D;if(s())return;const w=t.retry??(pC?0:3),C=t.retryDelay??nue,b=typeof C=="function"?C(n,y):C,k=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!k){h(y);return}n++,(D=t.onFail)==null||D.call(t,n,y),qle(b).then(()=>l()?void 0:m()).then(()=>{e?h(y):_()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?_():m().then(_),i)}}var Zl,jU,n6=(jU=class{constructor(){mt(this,Zl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hle(this.gcTime)&&Ye(this,Zl,CA.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(pC?1/0:5*60*1e3))}clearGcTimeout(){ee(this,Zl)&&(CA.clearTimeout(ee(this,Zl)),Ye(this,Zl,void 0))}},Zl=new WeakMap,jU),eu,lh,zi,tu,Gn,Ig,nu,gs,$o,UU,rue=(UU=class extends n6{constructor(n){super();mt(this,gs);mt(this,eu);mt(this,lh);mt(this,zi);mt(this,tu);mt(this,Gn);mt(this,Ig);mt(this,nu);Ye(this,nu,!1),Ye(this,Ig,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ye(this,tu,n.client),Ye(this,zi,ee(this,tu).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ye(this,eu,LL(this.options)),this.state=n.state??ee(this,eu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=ee(this,Gn))==null?void 0:n.promise}setOptions(n){if(this.options={...ee(this,Ig),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=LL(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Ye(this,eu,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,zi).remove(this)}setData(n,r){const i=Gle(this.state.data,n,this.options);return yr(this,gs,$o).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){yr(this,gs,$o).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=ee(this,Gn))==null?void 0:i.promise;return(s=ee(this,Gn))==null||s.cancel(n),r?r.then(ms).catch(ms):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,eu))}isActive(){return this.observers.some(n=>Wle(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>EA(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!zle(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=ee(this,Gn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=ee(this,Gn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),ee(this,zi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(ee(this,Gn)&&(ee(this,nu)?ee(this,Gn).cancel({revert:!0}):ee(this,Gn).cancelRetry()),this.scheduleGc()),ee(this,zi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yr(this,gs,$o).call(this,{type:"invalidate"})}async fetch(n,r){var l,u,d,h,m,_,v,T,y,w,C,b;if(this.state.fetchStatus!=="idle"&&((l=ee(this,Gn))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ee(this,Gn))return ee(this,Gn).continueRetry(),ee(this,Gn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const k=this.observers.find(D=>D.options.queryFn);k&&this.setOptions(k.options)}const i=new AbortController,s=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(Ye(this,nu,!0),i.signal)})},o=()=>{const k=J5(this.options,r),A=(()=>{const S={client:ee(this,tu),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return Ye(this,nu,!1),this.options.persister?this.options.persister(k,A,this):k(A)},c=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ee(this,tu),state:this.state,fetchFn:o};return s(k),k})();(u=this.options.behavior)==null||u.onFetch(c,this),Ye(this,lh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=c.fetchOptions)==null?void 0:d.meta))&&yr(this,gs,$o).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta}),Ye(this,Gn,t6({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:k=>{k instanceof bA&&k.revert&&this.setState({...ee(this,lh),fetchStatus:"idle"}),i.abort()},onFail:(k,D)=>{yr(this,gs,$o).call(this,{type:"failed",failureCount:k,error:D})},onPause:()=>{yr(this,gs,$o).call(this,{type:"pause"})},onContinue:()=>{yr(this,gs,$o).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const k=await ee(this,Gn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(_=(m=ee(this,zi).config).onSuccess)==null||_.call(m,k,this),(T=(v=ee(this,zi).config).onSettled)==null||T.call(v,k,this.state.error,this),k}catch(k){if(k instanceof bA){if(k.silent)return ee(this,Gn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw yr(this,gs,$o).call(this,{type:"error",error:k}),(w=(y=ee(this,zi).config).onError)==null||w.call(y,k,this),(b=(C=ee(this,zi).config).onSettled)==null||b.call(C,this.state.data,k,this),k}finally{this.scheduleGc()}}},eu=new WeakMap,lh=new WeakMap,zi=new WeakMap,tu=new WeakMap,Gn=new WeakMap,Ig=new WeakMap,nu=new WeakMap,gs=new WeakSet,$o=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...iue(i.data,this.options),fetchMeta:n.meta??null};case"success":const s={...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ye(this,lh,n.manual?s:void 0),s;case"error":const o=n.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Vr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),ee(this,zi).notify({query:this,type:"updated",action:n})})},UU);function iue(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:e6(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function LL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function FL(t){return{onFetch:(e,n)=>{var u,d,h,m,_;const r=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let v=!1;const T=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},y=J5(e.options,e.fetchOptions),w=async(C,b,k)=>{if(v)return Promise.reject();if(b==null&&C.pages.length)return Promise.resolve(C);const A=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:b,direction:k?"backward":"forward",meta:e.options.meta};return T(R),R})(),S=await y(A),{maxPages:x}=e.options,N=k?Yle:Qle;return{pages:N(C.pages,S,x),pageParams:N(C.pageParams,b,x)}};if(i&&s.length){const C=i==="backward",b=C?sue:VL,k={pages:s,pageParams:o},D=b(r,k);a=await w(k,D,C)}else{const C=t??s.length;do{const b=c===0?o[0]??r.initialPageParam:VL(r,a);if(c>0&&b==null)break;a=await w(a,b),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var v,T;return(T=(v=e.options).persister)==null?void 0:T.call(v,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function VL(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function sue(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ag,Zs,Or,ru,eo,qa,$U,oue=($U=class extends n6{constructor(n){super();mt(this,eo);mt(this,Ag);mt(this,Zs);mt(this,Or);mt(this,ru);Ye(this,Ag,n.client),this.mutationId=n.mutationId,Ye(this,Or,n.mutationCache),Ye(this,Zs,[]),this.state=n.state||aue(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){ee(this,Zs).includes(n)||(ee(this,Zs).push(n),this.clearGcTimeout(),ee(this,Or).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ye(this,Zs,ee(this,Zs).filter(r=>r!==n)),this.scheduleGc(),ee(this,Or).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){ee(this,Zs).length||(this.state.status==="pending"?this.scheduleGc():ee(this,Or).remove(this))}continue(){var n;return((n=ee(this,ru))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,c,l,u,d,h,m,_,v,T,y,w,C,b,k,D,A,S,x,N;const r=()=>{yr(this,eo,qa).call(this,{type:"continue"})},i={client:ee(this,Ag),meta:this.options.meta,mutationKey:this.options.mutationKey};Ye(this,ru,t6({fn:()=>this.options.mutationFn?this.options.mutationFn(n,i):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{yr(this,eo,qa).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{yr(this,eo,qa).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,Or).canRun(this)}));const s=this.state.status==="pending",o=!ee(this,ru).canStart();try{if(s)r();else{yr(this,eo,qa).call(this,{type:"pending",variables:n,isPaused:o}),await((c=(a=ee(this,Or).config).onMutate)==null?void 0:c.call(a,n,this,i));const O=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n,i));O!==this.state.context&&yr(this,eo,qa).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const R=await ee(this,ru).start();return await((h=(d=ee(this,Or).config).onSuccess)==null?void 0:h.call(d,R,n,this.state.context,this,i)),await((_=(m=this.options).onSuccess)==null?void 0:_.call(m,R,n,this.state.context,i)),await((T=(v=ee(this,Or).config).onSettled)==null?void 0:T.call(v,R,null,this.state.variables,this.state.context,this,i)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,R,null,n,this.state.context,i)),yr(this,eo,qa).call(this,{type:"success",data:R}),R}catch(R){try{throw await((b=(C=ee(this,Or).config).onError)==null?void 0:b.call(C,R,n,this.state.context,this,i)),await((D=(k=this.options).onError)==null?void 0:D.call(k,R,n,this.state.context,i)),await((S=(A=ee(this,Or).config).onSettled)==null?void 0:S.call(A,void 0,R,this.state.variables,this.state.context,this,i)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,R,n,this.state.context,i)),R}finally{yr(this,eo,qa).call(this,{type:"error",error:R})}}finally{ee(this,Or).runNext(this)}}},Ag=new WeakMap,Zs=new WeakMap,Or=new WeakMap,ru=new WeakMap,eo=new WeakSet,qa=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vr.batch(()=>{ee(this,Zs).forEach(i=>{i.onMutationUpdate(n)}),ee(this,Or).notify({mutation:this,type:"updated",action:n})})},$U);function aue(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qo,ys,kg,BU,cue=(BU=class extends fC{constructor(e={}){super();mt(this,qo);mt(this,ys);mt(this,kg);this.config=e,Ye(this,qo,new Set),Ye(this,ys,new Map),Ye(this,kg,0)}build(e,n,r){const i=new oue({client:e,mutationCache:this,mutationId:++Py(this,kg)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){ee(this,qo).add(e);const n=ov(e);if(typeof n=="string"){const r=ee(this,ys).get(n);r?r.push(e):ee(this,ys).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ee(this,qo).delete(e)){const n=ov(e);if(typeof n=="string"){const r=ee(this,ys).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ee(this,ys).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ov(e);if(typeof n=="string"){const r=ee(this,ys).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=ov(e);if(typeof n=="string"){const i=(r=ee(this,ys).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Vr.batch(()=>{ee(this,qo).forEach(e=>{this.notify({type:"removed",mutation:e})}),ee(this,qo).clear(),ee(this,ys).clear()})}getAll(){return Array.from(ee(this,qo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>OL(n,r))}findAll(e={}){return this.getAll().filter(n=>OL(e,n))}notify(e){Vr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ms))))}},qo=new WeakMap,ys=new WeakMap,kg=new WeakMap,BU);function ov(t){var e;return(e=t.options.scope)==null?void 0:e.id}var to,HU,lue=(HU=class extends fC{constructor(e={}){super();mt(this,to);this.config=e,Ye(this,to,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??KR(i,n);let o=this.get(s);return o||(o=new rue({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ee(this,to).has(e.queryHash)||(ee(this,to).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ee(this,to).get(e.queryHash);n&&(e.destroy(),n===e&&ee(this,to).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,to).get(e)}getAll(){return[...ee(this,to).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>NL(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>NL(e,r)):n}notify(e){Vr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},to=new WeakMap,HU),an,uc,dc,uh,dh,hc,hh,fh,zU,uue=(zU=class{constructor(t={}){mt(this,an);mt(this,uc);mt(this,dc);mt(this,uh);mt(this,dh);mt(this,hc);mt(this,hh);mt(this,fh);Ye(this,an,t.queryCache||new lue),Ye(this,uc,t.mutationCache||new cue),Ye(this,dc,t.defaultOptions||{}),Ye(this,uh,new Map),Ye(this,dh,new Map),Ye(this,hc,0)}mount(){Py(this,hc)._++,ee(this,hc)===1&&(Ye(this,hh,Z5.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,an).onFocus())})),Ye(this,fh,u_.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,an).onOnline())})))}unmount(){var t,e;Py(this,hc)._--,ee(this,hc)===0&&((t=ee(this,hh))==null||t.call(this),Ye(this,hh,void 0),(e=ee(this,fh))==null||e.call(this),Ye(this,fh,void 0))}isFetching(t){return ee(this,an).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ee(this,uc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,an).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ee(this,an).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(EA(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ee(this,an).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=ee(this,an).get(r.queryHash),s=i==null?void 0:i.state.data,o=Ble(e,s);if(o!==void 0)return ee(this,an).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Vr.batch(()=>ee(this,an).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,an).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ee(this,an);Vr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ee(this,an);return Vr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Vr.batch(()=>ee(this,an).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(ms).catch(ms)}invalidateQueries(t,e={}){return Vr.batch(()=>(ee(this,an).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Vr.batch(()=>ee(this,an).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ms)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ms)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ee(this,an).build(this,e);return n.isStaleByTime(EA(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ms).catch(ms)}fetchInfiniteQuery(t){return t.behavior=FL(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ms).catch(ms)}ensureInfiniteQueryData(t){return t.behavior=FL(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return u_.isOnline()?ee(this,uc).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,an)}getMutationCache(){return ee(this,uc)}getDefaultOptions(){return ee(this,dc)}setDefaultOptions(t){Ye(this,dc,t)}setQueryDefaults(t,e){ee(this,uh).set(Wm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ee(this,uh).values()],n={};return e.forEach(r=>{Km(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ee(this,dh).set(Wm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ee(this,dh).values()],n={};return e.forEach(r=>{Km(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ee(this,dc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=KR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===qR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ee(this,dc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ee(this,an).clear(),ee(this,uc).clear()}},an=new WeakMap,uc=new WeakMap,dc=new WeakMap,uh=new WeakMap,dh=new WeakMap,hc=new WeakMap,hh=new WeakMap,fh=new WeakMap,zU),due=g.createContext(void 0),hue=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(due.Provider,{value:t,children:e}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var bu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(bu||(bu={}));class zv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const fue=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},pue=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:fue(t),s=()=>i()!=="web",o=d=>{const h=l.get(d);return!!(h!=null&&h.platforms.has(i())||a(d))},a=d=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(m=>m.name===d)},c=d=>t.console.error(d),l=new Map,u=(d,h={})=>{const m=l.get(d);if(m)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),m.proxy;const _=i(),v=a(d);let T;const y=async()=>(!T&&_ in h?T=typeof h[_]=="function"?T=await h[_]():T=h[_]:e!==null&&!T&&"web"in h&&(T=typeof h.web=="function"?T=await h.web():T=h.web),T),w=(S,x)=>{var N,R;if(v){const O=v==null?void 0:v.methods.find(P=>x===P.name);if(O)return O.rtype==="promise"?P=>n.nativePromise(d,x.toString(),P):(P,z)=>n.nativeCallback(d,x.toString(),P,z);if(S)return(N=S[x])===null||N===void 0?void 0:N.bind(S)}else{if(S)return(R=S[x])===null||R===void 0?void 0:R.bind(S);throw new zv(`"${d}" plugin is not implemented on ${_}`,bu.Unimplemented)}},C=S=>{let x;const N=(...R)=>{const O=y().then(P=>{const z=w(P,S);if(z){const K=z(...R);return x=K==null?void 0:K.remove,K}else throw new zv(`"${d}.${S}()" is not implemented on ${_}`,bu.Unimplemented)});return S==="addListener"&&(O.remove=async()=>x()),O};return N.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(N,"name",{value:S,writable:!1,configurable:!1}),N},b=C("addListener"),k=C("removeListener"),D=(S,x)=>{const N=b({eventName:S},x),R=async()=>{const P=await N;k({eventName:S,callbackId:P},x)},O=new Promise(P=>N.then(()=>P({remove:R})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},O},A=new Proxy({},{get(S,x){switch(x){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?D:b;case"removeListener":return k;default:return C(x)}}});return r[d]=A,l.set(d,{name:d,proxy:A,platforms:new Set([...Object.keys(h),...v?[_]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=i,n.handleError=c,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=u,n.Exception=zv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},mue=t=>t.Capacitor=pue(t),yt=mue(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),zu=yt.registerPlugin;class GR{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new yt.Exception(e,bu.Unimplemented)}unavailable(e="not available"){return new yt.Exception(e,bu.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const jL=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),UL=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class gue extends GR{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=UL(i).trim(),s=UL(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=jL(e.key),r=jL(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}zu("CapacitorCookies",{web:()=>new gue});const yue=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),vue=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},wue=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,c;return Array.isArray(o)?(c="",o.forEach(l=>{a=e?encodeURIComponent(l):l,c+=`${s}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${s}=${a}`),`${r}&${c}`},"").substr(1):null,r6=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=vue(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{s.append(c,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class _ue extends GR{async request(e){const n=r6(e,e.webFetchExtra),r=wue(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await s.blob(),c=await yue(l);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const u={};return s.headers.forEach((d,h)=>{u[h]=d}),{data:c,headers:u,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}zu("CapacitorHttp",{web:()=>new _ue});const QMe=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:yt,CapacitorException:zv,get ExceptionCode(){return bu},WebPlugin:GR,buildRequestInit:r6,registerPlugin:zu},Symbol.toStringTag,{value:"Module"})),$i=zu("PushNotifications",{});var IA;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(IA||(IA={}));const jt=zu("LocalNotifications",{web:()=>Ft(()=>import("./web-Mn0iNCFm.js"),[]).then(t=>new t.LocalNotificationsWeb)}),Tue=Object.freeze(Object.defineProperty({__proto__:null,LocalNotifications:jt,get Weekday(){return IA}},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cue=()=>{};var $L={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=function(t,e){if(!t)throw mf(e)},mf=function(t){return new Error("Firebase Database ("+i6.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Eue=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},QR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(h=64)),r.push(n[u],n[d],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Eue(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new Sue;const h=s<<2|a>>4;if(r.push(h),l!==64){const m=a<<4&240|l>>2;if(r.push(m),d!==64){const _=l<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o6=function(t){const e=s6(t);return QR.encodeByteArray(e,!0)},d_=function(t){return o6(t).replace(/\./g,"")},h_=function(t){try{return QR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bue(t){return a6(void 0,t)}function a6(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Iue(n)||(t[n]=a6(t[n],e[n]));return t}function Iue(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kue=()=>Aue().__FIREBASE_DEFAULTS__,xue=()=>{if(typeof process>"u"||typeof $L>"u")return;const t=$L.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rue=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&h_(t[1]);return e&&JSON.parse(e)},mC=()=>{try{return Cue()||kue()||xue()||Rue()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c6=t=>{var e,n;return(n=(e=mC())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gC=t=>{const e=c6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},l6=()=>{var t;return(t=mC())==null?void 0:t.config},u6=t=>{var e;return(e=mC())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[d_(JSON.stringify(n)),d_(JSON.stringify(o)),""].join(".")}const Wp={};function Pue(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wp))Wp[e]?t.emulator.push(e):t.prod.push(e);return t}function Nue(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let BL=!1;function Hg(t,e){if(typeof window>"u"||typeof document>"u"||!ss(window.location.host)||Wp[t]===e||Wp[t]||BL)return;Wp[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",s=Pue().prod.length>0;function o(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{BL=!0,o()},h}function u(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=Nue(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),v=n("learnmore"),T=document.getElementById(v)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const C=h.element;a(C),u(T,v);const b=l();c(w,y),C.append(w,_,T,b),document.body.appendChild(C)}s?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function Oue(){var e;const t=(e=mC())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function h6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Due(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Lue(){return i6.NODE_ADMIN===!0}function Fue(){return!Oue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JR(){try{return typeof indexedDB=="object"}catch{return!1}}function ZR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function f6(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vue="FirebaseError";class ji extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Vue,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jue(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ji(i,a,r)}}function jue(t,e){return t.replace(Uue,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Uue=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t){return JSON.parse(t)}function tr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=qm(h_(s[0])||""),n=qm(h_(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},$ue=function(t){const e=p6(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Bue=function(t){const e=p6(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ih(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function AA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function f_(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Fs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(HL(s)&&HL(o)){if(!Fs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function HL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function wp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function zue(t,e){const n=new Wue(t,e);return n.subscribe.bind(n)}class Wue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Kue(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=VS),i.error===void 0&&(i.error=VS),i.complete===void 0&&(i.complete=VS);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kue(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function VS(){}function yC(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,de(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vC=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gue=1e3,Que=2,Yue=4*60*60*1e3,Xue=.5;function zL(t,e=Gue,n=Que){const r=e*Math.pow(n,t),i=Math.round(Xue*r*(Math.random()-.5)*2);return Math.min(Yue,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Rr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $g;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ede(e))try{this.getOrInitializeService({instanceIdentifier:kl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=kl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kl){return this.instances.has(e)}getOptions(e=kl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zue(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kl){return this.component?this.component.multipleInstances?e:kl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zue(t){return t===kl?void 0:t}function ede(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Jue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const nde={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},rde=ut.INFO,ide={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},sde=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ide[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zg{constructor(e){this.name=e,this._logLevel=rde,this._logHandler=sde,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const ode=(t,e)=>e.some(n=>t instanceof n);let WL,KL;function ade(){return WL||(WL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cde(){return KL||(KL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m6=new WeakMap,kA=new WeakMap,g6=new WeakMap,jS=new WeakMap,eP=new WeakMap;function lde(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ca(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m6.set(n,t)}).catch(()=>{}),eP.set(e,t),e}function ude(t){if(kA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kA.set(t,e)}let xA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ca(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dde(t){xA=t(xA)}function hde(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(US(this),e,...n);return g6.set(r,e.sort?e.sort():[e]),ca(r)}:cde().includes(t)?function(...e){return t.apply(US(this),e),ca(m6.get(this))}:function(...e){return ca(t.apply(US(this),e))}}function fde(t){return typeof t=="function"?hde(t):(t instanceof IDBTransaction&&ude(t),ode(t,ade())?new Proxy(t,xA):t)}function ca(t){if(t instanceof IDBRequest)return lde(t);if(jS.has(t))return jS.get(t);const e=fde(t);return e!==t&&(jS.set(t,e),eP.set(e,t)),e}const US=t=>eP.get(t);function wC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ca(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ca(o.result),c.oldVersion,c.newVersion,ca(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function $S(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ca(n).then(()=>{})}const pde=["get","getKey","getAll","getAllKeys","count"],mde=["put","add","delete","clear"],BS=new Map;function qL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(BS.get(e))return BS.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pde.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return BS.set(e,s),s}dde(t=>({...t,get:(e,n,r)=>qL(e,n)||t.get(e,n,r),has:(e,n)=>!!qL(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yde(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yde(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const RA="@firebase/app",GL="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new zg("@firebase/app"),vde="@firebase/app-compat",wde="@firebase/analytics-compat",_de="@firebase/analytics",Tde="@firebase/app-check-compat",Cde="@firebase/app-check",Ede="@firebase/auth",Sde="@firebase/auth-compat",bde="@firebase/database",Ide="@firebase/data-connect",Ade="@firebase/database-compat",kde="@firebase/functions",xde="@firebase/functions-compat",Rde="@firebase/installations",Pde="@firebase/installations-compat",Nde="@firebase/messaging",Ode="@firebase/messaging-compat",Mde="@firebase/performance",Dde="@firebase/performance-compat",Lde="@firebase/remote-config",Fde="@firebase/remote-config-compat",Vde="@firebase/storage",jde="@firebase/storage-compat",Ude="@firebase/firestore",$de="@firebase/ai",Bde="@firebase/firestore-compat",Hde="firebase",zde="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="[DEFAULT]",Wde={[RA]:"fire-core",[vde]:"fire-core-compat",[_de]:"fire-analytics",[wde]:"fire-analytics-compat",[Cde]:"fire-app-check",[Tde]:"fire-app-check-compat",[Ede]:"fire-auth",[Sde]:"fire-auth-compat",[bde]:"fire-rtdb",[Ide]:"fire-data-connect",[Ade]:"fire-rtdb-compat",[kde]:"fire-fn",[xde]:"fire-fn-compat",[Rde]:"fire-iid",[Pde]:"fire-iid-compat",[Nde]:"fire-fcm",[Ode]:"fire-fcm-compat",[Mde]:"fire-perf",[Dde]:"fire-perf-compat",[Lde]:"fire-rc",[Fde]:"fire-rc-compat",[Vde]:"fire-gcs",[jde]:"fire-gcs-compat",[Ude]:"fire-fst",[Bde]:"fire-fst-compat",[$de]:"fire-vertex","fire-js":"fire-js",[Hde]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Map,Kde=new Map,NA=new Map;function QL(t,e){try{t.container.addComponent(e)}catch(n){va.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wr(t){const e=t.name;if(NA.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;NA.set(e,t);for(const n of Gm.values())QL(n,t);for(const n of Kde.values())QL(n,t);return!0}function Us(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qde={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oc=new dl("app","Firebase",qde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gde{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=zde;function y6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:PA,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Oc.create("bad-app-name",{appName:String(i)});if(n||(n=l6()),!n)throw Oc.create("no-options");const s=Gm.get(i);if(s){if(Fs(n,s.options)&&Fs(r,s.config))return s;throw Oc.create("duplicate-app",{appName:i})}const o=new tde(i);for(const c of NA.values())o.addComponent(c);const a=new Gde(n,r,o);return Gm.set(i,a),a}function fl(t=PA){const e=Gm.get(t);if(!e&&t===PA&&l6())return y6();if(!e)throw Oc.create("no-app",{appName:t});return e}function Qde(){return Array.from(Gm.values())}function xn(t,e,n){let r=Wde[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(o.join(" "));return}Wr(new Rr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yde="firebase-heartbeat-database",Xde=1,Qm="firebase-heartbeat-store";let HS=null;function v6(){return HS||(HS=wC(Yde,Xde,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qm)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oc.create("idb-open",{originalErrorMessage:t.message})})),HS}async function Jde(t){try{const n=(await v6()).transaction(Qm),r=await n.objectStore(Qm).get(w6(t));return await n.done,r}catch(e){if(e instanceof ji)va.warn(e.message);else{const n=Oc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});va.warn(n.message)}}}async function YL(t,e){try{const r=(await v6()).transaction(Qm,"readwrite");await r.objectStore(Qm).put(e,w6(t)),await r.done}catch(n){if(n instanceof ji)va.warn(n.message);else{const r=Oc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});va.warn(r.message)}}}function w6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zde=1024,ehe=30;class the{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rhe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XL();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>ehe){const o=ihe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){va.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=XL(),{heartbeatsToSend:r,unsentEntries:i}=nhe(this._heartbeatsCache.heartbeats),s=d_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return va.warn(n),""}}}function XL(){return new Date().toISOString().substring(0,10)}function nhe(t,e=Zde){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),JL(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),JL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rhe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JR()?ZR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jde(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return YL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return YL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function JL(t){return d_(JSON.stringify({version:2,heartbeats:t})).length}function ihe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function she(t){Wr(new Rr("platform-logger",e=>new gde(e),"PRIVATE")),Wr(new Rr("heartbeat",e=>new the(e),"PRIVATE")),xn(RA,GL,t),xn(RA,GL,"esm2020"),xn("fire-js","")}she("");var ZL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mc,_6;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function x(){}x.prototype=S.prototype,A.F=S.prototype,A.prototype=new x,A.prototype.constructor=A,A.D=function(N,R,O){for(var P=Array(arguments.length-2),z=2;z<arguments.length;z++)P[z-2]=arguments[z];return S.prototype[R].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,S,x){x||(x=0);const N=Array(16);if(typeof S=="string")for(var R=0;R<16;++R)N[R]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(R=0;R<16;++R)N[R]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=A.g[0],x=A.g[1],R=A.g[2];let O=A.g[3],P;P=S+(O^x&(R^O))+N[0]+3614090360&4294967295,S=x+(P<<7&4294967295|P>>>25),P=O+(R^S&(x^R))+N[1]+3905402710&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(x^O&(S^x))+N[2]+606105819&4294967295,R=O+(P<<17&4294967295|P>>>15),P=x+(S^R&(O^S))+N[3]+3250441966&4294967295,x=R+(P<<22&4294967295|P>>>10),P=S+(O^x&(R^O))+N[4]+4118548399&4294967295,S=x+(P<<7&4294967295|P>>>25),P=O+(R^S&(x^R))+N[5]+1200080426&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(x^O&(S^x))+N[6]+2821735955&4294967295,R=O+(P<<17&4294967295|P>>>15),P=x+(S^R&(O^S))+N[7]+4249261313&4294967295,x=R+(P<<22&4294967295|P>>>10),P=S+(O^x&(R^O))+N[8]+1770035416&4294967295,S=x+(P<<7&4294967295|P>>>25),P=O+(R^S&(x^R))+N[9]+2336552879&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(x^O&(S^x))+N[10]+4294925233&4294967295,R=O+(P<<17&4294967295|P>>>15),P=x+(S^R&(O^S))+N[11]+2304563134&4294967295,x=R+(P<<22&4294967295|P>>>10),P=S+(O^x&(R^O))+N[12]+1804603682&4294967295,S=x+(P<<7&4294967295|P>>>25),P=O+(R^S&(x^R))+N[13]+4254626195&4294967295,O=S+(P<<12&4294967295|P>>>20),P=R+(x^O&(S^x))+N[14]+2792965006&4294967295,R=O+(P<<17&4294967295|P>>>15),P=x+(S^R&(O^S))+N[15]+1236535329&4294967295,x=R+(P<<22&4294967295|P>>>10),P=S+(R^O&(x^R))+N[1]+4129170786&4294967295,S=x+(P<<5&4294967295|P>>>27),P=O+(x^R&(S^x))+N[6]+3225465664&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^x&(O^S))+N[11]+643717713&4294967295,R=O+(P<<14&4294967295|P>>>18),P=x+(O^S&(R^O))+N[0]+3921069994&4294967295,x=R+(P<<20&4294967295|P>>>12),P=S+(R^O&(x^R))+N[5]+3593408605&4294967295,S=x+(P<<5&4294967295|P>>>27),P=O+(x^R&(S^x))+N[10]+38016083&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^x&(O^S))+N[15]+3634488961&4294967295,R=O+(P<<14&4294967295|P>>>18),P=x+(O^S&(R^O))+N[4]+3889429448&4294967295,x=R+(P<<20&4294967295|P>>>12),P=S+(R^O&(x^R))+N[9]+568446438&4294967295,S=x+(P<<5&4294967295|P>>>27),P=O+(x^R&(S^x))+N[14]+3275163606&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^x&(O^S))+N[3]+4107603335&4294967295,R=O+(P<<14&4294967295|P>>>18),P=x+(O^S&(R^O))+N[8]+1163531501&4294967295,x=R+(P<<20&4294967295|P>>>12),P=S+(R^O&(x^R))+N[13]+2850285829&4294967295,S=x+(P<<5&4294967295|P>>>27),P=O+(x^R&(S^x))+N[2]+4243563512&4294967295,O=S+(P<<9&4294967295|P>>>23),P=R+(S^x&(O^S))+N[7]+1735328473&4294967295,R=O+(P<<14&4294967295|P>>>18),P=x+(O^S&(R^O))+N[12]+2368359562&4294967295,x=R+(P<<20&4294967295|P>>>12),P=S+(x^R^O)+N[5]+4294588738&4294967295,S=x+(P<<4&4294967295|P>>>28),P=O+(S^x^R)+N[8]+2272392833&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^x)+N[11]+1839030562&4294967295,R=O+(P<<16&4294967295|P>>>16),P=x+(R^O^S)+N[14]+4259657740&4294967295,x=R+(P<<23&4294967295|P>>>9),P=S+(x^R^O)+N[1]+2763975236&4294967295,S=x+(P<<4&4294967295|P>>>28),P=O+(S^x^R)+N[4]+1272893353&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^x)+N[7]+4139469664&4294967295,R=O+(P<<16&4294967295|P>>>16),P=x+(R^O^S)+N[10]+3200236656&4294967295,x=R+(P<<23&4294967295|P>>>9),P=S+(x^R^O)+N[13]+681279174&4294967295,S=x+(P<<4&4294967295|P>>>28),P=O+(S^x^R)+N[0]+3936430074&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^x)+N[3]+3572445317&4294967295,R=O+(P<<16&4294967295|P>>>16),P=x+(R^O^S)+N[6]+76029189&4294967295,x=R+(P<<23&4294967295|P>>>9),P=S+(x^R^O)+N[9]+3654602809&4294967295,S=x+(P<<4&4294967295|P>>>28),P=O+(S^x^R)+N[12]+3873151461&4294967295,O=S+(P<<11&4294967295|P>>>21),P=R+(O^S^x)+N[15]+530742520&4294967295,R=O+(P<<16&4294967295|P>>>16),P=x+(R^O^S)+N[2]+3299628645&4294967295,x=R+(P<<23&4294967295|P>>>9),P=S+(R^(x|~O))+N[0]+4096336452&4294967295,S=x+(P<<6&4294967295|P>>>26),P=O+(x^(S|~R))+N[7]+1126891415&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~x))+N[14]+2878612391&4294967295,R=O+(P<<15&4294967295|P>>>17),P=x+(O^(R|~S))+N[5]+4237533241&4294967295,x=R+(P<<21&4294967295|P>>>11),P=S+(R^(x|~O))+N[12]+1700485571&4294967295,S=x+(P<<6&4294967295|P>>>26),P=O+(x^(S|~R))+N[3]+2399980690&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~x))+N[10]+4293915773&4294967295,R=O+(P<<15&4294967295|P>>>17),P=x+(O^(R|~S))+N[1]+2240044497&4294967295,x=R+(P<<21&4294967295|P>>>11),P=S+(R^(x|~O))+N[8]+1873313359&4294967295,S=x+(P<<6&4294967295|P>>>26),P=O+(x^(S|~R))+N[15]+4264355552&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~x))+N[6]+2734768916&4294967295,R=O+(P<<15&4294967295|P>>>17),P=x+(O^(R|~S))+N[13]+1309151649&4294967295,x=R+(P<<21&4294967295|P>>>11),P=S+(R^(x|~O))+N[4]+4149444226&4294967295,S=x+(P<<6&4294967295|P>>>26),P=O+(x^(S|~R))+N[11]+3174756917&4294967295,O=S+(P<<10&4294967295|P>>>22),P=R+(S^(O|~x))+N[2]+718787259&4294967295,R=O+(P<<15&4294967295|P>>>17),P=x+(O^(R|~S))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+O&4294967295}r.prototype.v=function(A,S){S===void 0&&(S=A.length);const x=S-this.blockSize,N=this.C;let R=this.h,O=0;for(;O<S;){if(R==0)for(;O<=x;)i(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<S;)if(N[R++]=A.charCodeAt(O++),R==this.blockSize){i(this,N),R=0;break}}else for(;O<S;)if(N[R++]=A[O++],R==this.blockSize){i(this,N),R=0;break}}this.h=R,this.o+=S},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var x=A.length-8;x<A.length;++x)A[x]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,x=0;x<4;++x)for(let N=0;N<32;N+=8)A[S++]=this.g[x]>>>N&255;return A};function s(A,S){var x=a;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=S(A)}function o(A,S){this.h=S;const x=[];let N=!0;for(let R=A.length-1;R>=0;R--){const O=A[R]|0;N&&O==S||(x[R]=O,N=!1)}this.g=x}var a={};function c(A){return-128<=A&&A<128?s(A,function(S){return new o([S|0],S<0?-1:0)}):new o([A|0],A<0?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return d;if(A<0)return T(l(-A));const S=[];let x=1;for(let N=0;A>=x;N++)S[N]=A/x|0,x*=4294967296;return new o(S,0)}function u(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return T(u(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=l(Math.pow(S,8));let N=d;for(let O=0;O<A.length;O+=8){var R=Math.min(8,A.length-O);const P=parseInt(A.substring(O,O+R),S);R<8?(R=l(Math.pow(S,R)),N=N.j(R).add(l(P))):(N=N.j(x),N=N.add(l(P)))}return N}var d=c(0),h=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-T(this).m();let A=0,S=1;for(let x=0;x<this.g.length;x++){const N=this.i(x);A+=(N>=0?N:4294967296+N)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(v(this))return"-"+T(this).toString(A);const S=l(Math.pow(A,6));var x=this;let N="";for(;;){const R=b(x,S).g;x=y(x,R.j(S));let O=((x.g.length>0?x.g[0]:x.h)>>>0).toString(A);if(x=R,_(x))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function v(A){return A.h==-1}t.l=function(A){return A=y(this,A),v(A)?-1:_(A)?0:1};function T(A){const S=A.g.length,x=[];for(let N=0;N<S;N++)x[N]=~A.g[N];return new o(x,~A.h).add(h)}t.abs=function(){return v(this)?T(this):this},t.add=function(A){const S=Math.max(this.g.length,A.g.length),x=[];let N=0;for(let R=0;R<=S;R++){let O=N+(this.i(R)&65535)+(A.i(R)&65535),P=(O>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);N=P>>>16,O&=65535,P&=65535,x[R]=P<<16|O}return new o(x,x[x.length-1]&-2147483648?-1:0)};function y(A,S){return A.add(T(S))}t.j=function(A){if(_(this)||_(A))return d;if(v(this))return v(A)?T(this).j(T(A)):T(T(this).j(A));if(v(A))return T(this.j(T(A)));if(this.l(m)<0&&A.l(m)<0)return l(this.m()*A.m());const S=this.g.length+A.g.length,x=[];for(var N=0;N<2*S;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(let R=0;R<A.g.length;R++){const O=this.i(N)>>>16,P=this.i(N)&65535,z=A.i(R)>>>16,K=A.i(R)&65535;x[2*N+2*R]+=P*K,w(x,2*N+2*R),x[2*N+2*R+1]+=O*K,w(x,2*N+2*R+1),x[2*N+2*R+1]+=P*z,w(x,2*N+2*R+1),x[2*N+2*R+2]+=O*z,w(x,2*N+2*R+2)}for(A=0;A<S;A++)x[A]=x[2*A+1]<<16|x[2*A];for(A=S;A<2*S;A++)x[A]=0;return new o(x,0)};function w(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function C(A,S){this.g=A,this.h=S}function b(A,S){if(_(S))throw Error("division by zero");if(_(A))return new C(d,d);if(v(A))return S=b(T(A),S),new C(T(S.g),T(S.h));if(v(S))return S=b(A,T(S)),new C(T(S.g),S.h);if(A.g.length>30){if(v(A)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var x=h,N=S;N.l(A)<=0;)x=k(x),N=k(N);var R=D(x,1),O=D(N,1);for(N=D(N,2),x=D(x,2);!_(N);){var P=O.add(N);P.l(A)<=0&&(R=R.add(x),O=P),N=D(N,1),x=D(x,1)}return S=y(A,R.j(S)),new C(R,S)}for(R=d;A.l(S)>=0;){for(x=Math.max(1,Math.floor(A.m()/S.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=l(x),P=O.j(S);v(P)||P.l(A)>0;)x-=N,O=l(x),P=O.j(S);_(O)&&(O=h),R=R.add(O),A=y(A,P)}return new C(R,A)}t.B=function(A){return b(this,A).h},t.and=function(A){const S=Math.max(this.g.length,A.g.length),x=[];for(let N=0;N<S;N++)x[N]=this.i(N)&A.i(N);return new o(x,this.h&A.h)},t.or=function(A){const S=Math.max(this.g.length,A.g.length),x=[];for(let N=0;N<S;N++)x[N]=this.i(N)|A.i(N);return new o(x,this.h|A.h)},t.xor=function(A){const S=Math.max(this.g.length,A.g.length),x=[];for(let N=0;N<S;N++)x[N]=this.i(N)^A.i(N);return new o(x,this.h^A.h)};function k(A){const S=A.g.length+1,x=[];for(let N=0;N<S;N++)x[N]=A.i(N)<<1|A.i(N-1)>>>31;return new o(x,A.h)}function D(A,S){const x=S>>5;S%=32;const N=A.g.length-x,R=[];for(let O=0;O<N;O++)R[O]=S>0?A.i(O+x)>>>S|A.i(O+x+1)<<32-S:A.i(O+x);return new o(R,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Mc=o}).apply(typeof ZL<"u"?ZL:typeof self<"u"?self:typeof window<"u"?window:{});var av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T6,_p,C6,Wv,OA,E6,S6,b6;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof av=="object"&&av];for(var E=0;E<f.length;++E){var I=f[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(f,E){if(E)e:{var I=r;f=f.split(".");for(var M=0;M<f.length-1;M++){var H=f[M];if(!(H in I))break e;I=I[H]}f=f[f.length-1],M=I[f],E=E(M),E!=M&&E!=null&&e(I,f,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(E){var I=[],M;for(M in E)Object.prototype.hasOwnProperty.call(E,M)&&I.push([M,E[M]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function c(f,E,I){return f.call.apply(f.bind,arguments)}function l(f,E,I){return l=c,l.apply(null,arguments)}function u(f,E){var I=Array.prototype.slice.call(arguments,1);return function(){var M=I.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function d(f,E){function I(){}I.prototype=E.prototype,f.Z=E.prototype,f.prototype=new I,f.prototype.constructor=f,f.Ob=function(M,H,G){for(var me=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)me[rt-2]=arguments[rt];return E.prototype[H].apply(M,me)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function m(f){const E=f.length;if(E>0){const I=Array(E);for(let M=0;M<E;M++)I[M]=f[M];return I}return[]}function _(f,E){for(let M=1;M<arguments.length;M++){const H=arguments[M];var I=typeof H;if(I=I!="object"?I:H?Array.isArray(H)?"array":I:"null",I=="array"||I=="object"&&typeof H.length=="number"){I=f.length||0;const G=H.length||0;f.length=I+G;for(let me=0;me<G;me++)f[I+me]=H[me]}else f.push(H)}}class v{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function T(f){o.setTimeout(()=>{throw f},0)}function y(){var f=A;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class w{constructor(){this.h=this.g=null}add(E,I){const M=C.get();M.set(E,I),this.h?this.h.next=M:this.g=M,this.h=M}}var C=new v(()=>new b,f=>f.reset());class b{constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let k,D=!1,A=new w,S=()=>{const f=Promise.resolve(void 0);k=()=>{f.then(x)}};function x(){for(var f;f=y();){try{f.h.call(f.g)}catch(I){T(I)}var E=C;E.j(f),E.h<100&&(E.h++,f.next=E.g,E.g=f)}D=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};o.addEventListener("test",I,E),o.removeEventListener("test",I,E)}catch{}return f}();function P(f){return/^[\s\xa0]*$/.test(f)}function z(f,E){R.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,E)}d(z,R),z.prototype.init=function(f,E){const I=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget,E||(I=="mouseover"?E=f.fromElement:I=="mouseout"&&(E=f.toElement)),this.relatedTarget=E,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),U=0;function q(f,E,I,M,H){this.listener=f,this.proxy=null,this.src=E,this.type=I,this.capture=!!M,this.ha=H,this.key=++U,this.da=this.fa=!1}function F(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function V(f,E,I){for(const M in f)E.call(I,f[M],M,f)}function X(f,E){for(const I in f)E.call(void 0,f[I],I,f)}function ge(f){const E={};for(const I in f)E[I]=f[I];return E}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,E){let I,M;for(let H=1;H<arguments.length;H++){M=arguments[H];for(I in M)f[I]=M[I];for(let G=0;G<pe.length;G++)I=pe[G],Object.prototype.hasOwnProperty.call(M,I)&&(f[I]=M[I])}}function J(f){this.src=f,this.g={},this.h=0}J.prototype.add=function(f,E,I,M,H){const G=f.toString();f=this.g[G],f||(f=this.g[G]=[],this.h++);const me=W(f,E,M,H);return me>-1?(E=f[me],I||(E.fa=!1)):(E=new q(E,this.src,G,!!M,H),E.fa=I,f.push(E)),E};function Y(f,E){const I=E.type;if(I in f.g){var M=f.g[I],H=Array.prototype.indexOf.call(M,E,void 0),G;(G=H>=0)&&Array.prototype.splice.call(M,H,1),G&&(F(E),f.g[I].length==0&&(delete f.g[I],f.h--))}}function W(f,E,I,M){for(let H=0;H<f.length;++H){const G=f[H];if(!G.da&&G.listener==E&&G.capture==!!I&&G.ha==M)return H}return-1}var te="closure_lm_"+(Math.random()*1e6|0),we={};function _e(f,E,I,M,H){if(Array.isArray(E)){for(let G=0;G<E.length;G++)_e(f,E[G],I,M,H);return null}return I=zt(I),f&&f[K]?f.J(E,I,a(M)?!!M.capture:!1,H):Pe(f,E,I,!1,M,H)}function Pe(f,E,I,M,H,G){if(!E)throw Error("Invalid event type");const me=a(H)?!!H.capture:!!H;let rt=vt(f);if(rt||(f[te]=rt=new J(f)),I=rt.add(E,I,M,me,G),I.proxy)return I;if(M=Ee(),I.proxy=M,M.src=f,M.listener=I,f.addEventListener)O||(H=me),H===void 0&&(H=!1),f.addEventListener(E.toString(),M,H);else if(f.attachEvent)f.attachEvent(ye(E.toString()),M);else if(f.addListener&&f.removeListener)f.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ee(){function f(I){return E.call(f.src,f.listener,I)}const E=Me;return f}function ze(f,E,I,M,H){if(Array.isArray(E))for(var G=0;G<E.length;G++)ze(f,E[G],I,M,H);else M=a(M)?!!M.capture:!!M,I=zt(I),f&&f[K]?(f=f.i,G=String(E).toString(),G in f.g&&(E=f.g[G],I=W(E,I,M,H),I>-1&&(F(E[I]),Array.prototype.splice.call(E,I,1),E.length==0&&(delete f.g[G],f.h--)))):f&&(f=vt(f))&&(E=f.g[E.toString()],f=-1,E&&(f=W(E,I,M,H)),(I=f>-1?E[f]:null)&&nt(I))}function nt(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[K])Y(E.i,f);else{var I=f.type,M=f.proxy;E.removeEventListener?E.removeEventListener(I,M,f.capture):E.detachEvent?E.detachEvent(ye(I),M):E.addListener&&E.removeListener&&E.removeListener(M),(I=vt(E))?(Y(I,f),I.h==0&&(I.src=null,E[te]=null)):F(f)}}}function ye(f){return f in we?we[f]:we[f]="on"+f}function Me(f,E){if(f.da)f=!0;else{E=new z(E,this);const I=f.listener,M=f.ha||f.src;f.fa&&nt(f),f=I.call(M,E)}return f}function vt(f){return f=f[te],f instanceof J?f:null}var Mt="__closure_events_fn_"+(Math.random()*1e9>>>0);function zt(f){return typeof f=="function"?f:(f[Mt]||(f[Mt]=function(E){return f.handleEvent(E)}),f[Mt])}function Ve(){N.call(this),this.i=new J(this),this.M=this,this.G=null}d(Ve,N),Ve.prototype[K]=!0,Ve.prototype.removeEventListener=function(f,E,I,M){ze(this,f,E,I,M)};function L(f,E){var I,M=f.G;if(M)for(I=[];M;M=M.G)I.push(M);if(f=f.M,M=E.type||E,typeof E=="string")E=new R(E,f);else if(E instanceof R)E.target=E.target||f;else{var H=E;E=new R(M,f),B(E,H)}H=!0;let G,me;if(I)for(me=I.length-1;me>=0;me--)G=E.g=I[me],H=$(G,M,!0,E)&&H;if(G=E.g=f,H=$(G,M,!0,E)&&H,H=$(G,M,!1,E)&&H,I)for(me=0;me<I.length;me++)G=E.g=I[me],H=$(G,M,!1,E)&&H}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var f=this.i;for(const E in f.g){const I=f.g[E];for(let M=0;M<I.length;M++)F(I[M]);delete f.g[E],f.h--}}this.G=null},Ve.prototype.J=function(f,E,I,M){return this.i.add(String(f),E,!1,I,M)},Ve.prototype.K=function(f,E,I,M){return this.i.add(String(f),E,!0,I,M)};function $(f,E,I,M){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let G=0;G<E.length;++G){const me=E[G];if(me&&!me.da&&me.capture==I){const rt=me.listener,Dn=me.ha||me.src;me.fa&&Y(f.i,me),H=rt.call(Dn,M)!==!1&&H}}return H&&!M.defaultPrevented}function Q(f,E){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=l(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:o.setTimeout(f,E||0)}function he(f){f.g=Q(()=>{f.g=null,f.i&&(f.i=!1,he(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class le extends N{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(f){N.call(this),this.h=f,this.g={}}d(oe,N);var ve=[];function Qe(f){V(f.g,function(E,I){this.g.hasOwnProperty(I)&&nt(E)},f),f.g={}}oe.prototype.N=function(){oe.Z.N.call(this),Qe(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pt=o.JSON.stringify,On=o.JSON.parse,vi=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Pr(){}function Lo(){}var pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zn(){R.call(this,"d")}d(zn,R);function Bs(){R.call(this,"c")}d(Bs,R);var rr={},ed=null;function Fo(){return ed=ed||new Ve}rr.Ia="serverreachability";function Mf(f){R.call(this,rr.Ia,f)}d(Mf,R);function Da(f){const E=Fo();L(E,new Mf(E))}rr.STAT_EVENT="statevent";function Ty(f,E){R.call(this,rr.STAT_EVENT,f),this.stat=E}d(Ty,R);function Mn(f){const E=Fo();L(E,new Ty(E,f))}rr.Ja="timingevent";function ls(f,E){R.call(this,rr.Ja,f),this.size=E}d(ls,R);function wl(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},E)}function Be(){this.g=!0}Be.prototype.ua=function(){this.g=!1};function bt(f,E,I,M,H,G){f.info(function(){if(f.g)if(G){var me="",rt=G.split("&");for(let Dt=0;Dt<rt.length;Dt++){var Dn=rt[Dt].split("=");if(Dn.length>1){const Kn=Dn[0];Dn=Dn[1];const Ws=Kn.split("_");me=Ws.length>=2&&Ws[1]=="type"?me+(Kn+"="+Dn+"&"):me+(Kn+"=redacted&")}}}else me=null;else me=G;return"XMLHTTP REQ ("+M+") [attempt "+H+"]: "+E+`
`+I+`
`+me})}function Vt(f,E,I,M,H,G,me){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+H+"]: "+E+`
`+I+`
`+G+" "+me})}function Wn(f,E,I,M){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+Hs(f,I)+(M?" "+M:"")})}function wi(f,E){f.info(function(){return"TIMEOUT: "+E})}Be.prototype.info=function(){};function Hs(f,E){if(!f.g)return E;if(!E)return null;try{const G=JSON.parse(E);if(G){for(f=0;f<G.length;f++)if(Array.isArray(G[f])){var I=G[f];if(!(I.length<2)){var M=I[1];if(Array.isArray(M)&&!(M.length<1)){var H=M[0];if(H!="noop"&&H!="stop"&&H!="close")for(let me=1;me<M.length;me++)M[me]=""}}}}return pt(G)}catch{return E}}var Ui={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},us;function FE(){}d(FE,Pr),FE.prototype.g=function(){return new XMLHttpRequest},us=new FE;function Df(f){return encodeURIComponent(String(f))}function AY(f){var E=1;f=f.split(":");const I=[];for(;E>0&&f.length;)I.push(f.shift()),E--;return f.length&&I.push(f.join(":")),I}function La(f,E,I,M){this.j=f,this.i=E,this.l=I,this.S=M||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mO}function mO(){this.i=null,this.g="",this.h=!1}var gO={},VE={};function jE(f,E,I){f.M=1,f.A=Ey(zs(E)),f.u=I,f.R=!0,yO(f,null)}function yO(f,E){f.F=Date.now(),Cy(f),f.B=zs(f.A);var I=f.B,M=f.S;Array.isArray(M)||(M=[String(M)]),RO(I.i,"t",M),f.C=0,I=f.j.L,f.h=new mO,f.g=GO(f.j,I?E:null,!f.u),f.P>0&&(f.O=new le(l(f.Y,f,f.g),f.P)),E=f.V,I=f.g,M=f.ba;var H="readystatechange";Array.isArray(H)||(H&&(ve[0]=H.toString()),H=ve);for(let G=0;G<H.length;G++){const me=_e(I,H[G],M||E.handleEvent,!1,E.h||E);if(!me)break;E.g[me.key]=me}E=f.J?ge(f.J):{},f.u?(f.v||(f.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,E)):(f.v="GET",f.g.ea(f.B,f.v,null,E)),Da(),bt(f.i,f.v,f.B,f.l,f.S,f.u)}La.prototype.ba=function(f){f=f.target;const E=this.O;E&&ja(f)==3?E.j():this.Y(f)},La.prototype.Y=function(f){try{if(f==this.g)e:{const rt=ja(this.g),Dn=this.g.ya(),Dt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||FO(this.g)))){this.K||rt!=4||Dn==7||(Dn==8||Dt<=0?Da(3):Da(2)),UE(this);var E=this.g.ca();this.X=E;var I=kY(this);if(this.o=E==200,Vt(this.i,this.v,this.B,this.l,this.S,rt,E),this.o){if(this.U&&!this.L){t:{if(this.g){var M,H=this.g;if((M=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(M)){var G=M;break t}}G=null}if(f=G)Wn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$E(this,f);else{this.o=!1,this.m=3,Mn(12),_l(this),Lf(this);break e}}if(this.R){f=!0;let Kn;for(;!this.K&&this.C<I.length;)if(Kn=xY(this,I),Kn==VE){rt==4&&(this.m=4,Mn(14),f=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==gO){this.m=4,Mn(15),Wn(this.i,this.l,I,"[Invalid Chunk]"),f=!1;break}else Wn(this.i,this.l,Kn,null),$E(this,Kn);if(vO(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||I.length!=0||this.h.h||(this.m=1,Mn(16),f=!1),this.o=this.o&&f,!f)Wn(this.i,this.l,I,"[Invalid Chunked Response]"),_l(this),Lf(this);else if(I.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),QE(me),me.P=!0,Mn(11))}}else Wn(this.i,this.l,I,null),$E(this,I);rt==4&&_l(this),this.o&&!this.K&&(rt==4?zO(this.j,this):(this.o=!1,Cy(this)))}else HY(this.g),E==400&&I.indexOf("Unknown SID")>0?(this.m=3,Mn(12)):(this.m=0,Mn(13)),_l(this),Lf(this)}}}catch{}finally{}};function kY(f){if(!vO(f))return f.g.la();const E=FO(f.g);if(E==="")return"";let I="";const M=E.length,H=ja(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return _l(f),Lf(f),"";f.h.i=new o.TextDecoder}for(let G=0;G<M;G++)f.h.h=!0,I+=f.h.i.decode(E[G],{stream:!(H&&G==M-1)});return E.length=0,f.h.g+=I,f.C=0,f.h.g}function vO(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function xY(f,E){var I=f.C,M=E.indexOf(`
`,I);return M==-1?VE:(I=Number(E.substring(I,M)),isNaN(I)?gO:(M+=1,M+I>E.length?VE:(E=E.slice(M,M+I),f.C=M+I,E)))}La.prototype.cancel=function(){this.K=!0,_l(this)};function Cy(f){f.T=Date.now()+f.H,wO(f,f.H)}function wO(f,E){if(f.D!=null)throw Error("WatchDog timer not null");f.D=wl(l(f.aa,f),E)}function UE(f){f.D&&(o.clearTimeout(f.D),f.D=null)}La.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(wi(this.i,this.B),this.M!=2&&(Da(),Mn(17)),_l(this),this.m=2,Lf(this)):wO(this,this.T-f)};function Lf(f){f.j.I==0||f.K||zO(f.j,f)}function _l(f){UE(f);var E=f.O;E&&typeof E.dispose=="function"&&E.dispose(),f.O=null,Qe(f.V),f.g&&(E=f.g,f.g=null,E.abort(),E.dispose())}function $E(f,E){try{var I=f.j;if(I.I!=0&&(I.g==f||BE(I.h,f))){if(!f.L&&BE(I.h,f)&&I.I==3){try{var M=I.Ba.g.parse(E)}catch{M=null}if(Array.isArray(M)&&M.length==3){var H=M;if(H[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<f.F)ky(I),Iy(I);else break e;GE(I),Mn(18)}}else I.xa=H[1],0<I.xa-I.K&&H[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=wl(l(I.Va,I),6e3));CO(I.h)<=1&&I.ta&&(I.ta=void 0)}else Cl(I,11)}else if((f.L||I.g==f)&&ky(I),!P(E))for(H=I.Ba.g.parse(E),E=0;E<H.length;E++){let Dt=H[E];const Kn=Dt[0];if(!(Kn<=I.K))if(I.K=Kn,Dt=Dt[1],I.I==2)if(Dt[0]=="c"){I.M=Dt[1],I.ba=Dt[2];const Ws=Dt[3];Ws!=null&&(I.ka=Ws,I.j.info("VER="+I.ka));const El=Dt[4];El!=null&&(I.za=El,I.j.info("SVER="+I.za));const Ua=Dt[5];Ua!=null&&typeof Ua=="number"&&Ua>0&&(M=1.5*Ua,I.O=M,I.j.info("backChannelRequestTimeoutMs_="+M)),M=I;const $a=f.g;if($a){const Ry=$a.g?$a.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ry){var G=M.h;G.g||Ry.indexOf("spdy")==-1&&Ry.indexOf("quic")==-1&&Ry.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(HE(G,G.h),G.h=null))}if(M.G){const YE=$a.g?$a.g.getResponseHeader("X-HTTP-Session-Id"):null;YE&&(M.wa=YE,Wt(M.J,M.G,YE))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-f.F,I.j.info("Handshake RTT: "+I.T+"ms")),M=I;var me=f;if(M.na=qO(M,M.L?M.ba:null,M.W),me.L){EO(M.h,me);var rt=me,Dn=M.O;Dn&&(rt.H=Dn),rt.D&&(UE(rt),Cy(rt)),M.g=me}else BO(M);I.i.length>0&&Ay(I)}else Dt[0]!="stop"&&Dt[0]!="close"||Cl(I,7);else I.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Cl(I,7):qE(I):Dt[0]!="noop"&&I.l&&I.l.qa(Dt),I.A=0)}}Da(4)}catch{}}var RY=class{constructor(f,E){this.g=f,this.map=E}};function _O(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function TO(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function CO(f){return f.h?1:f.g?f.g.size:0}function BE(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function HE(f,E){f.g?f.g.add(E):f.h=E}function EO(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}_O.prototype.cancel=function(){if(this.i=SO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function SO(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const I of f.g.values())E=E.concat(I.G);return E}return m(f.i)}var bO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PY(f,E){if(f){f=f.split("&");for(let I=0;I<f.length;I++){const M=f[I].indexOf("=");let H,G=null;M>=0?(H=f[I].substring(0,M),G=f[I].substring(M+1)):H=f[I],E(H,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Fa(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;f instanceof Fa?(this.l=f.l,Ff(this,f.j),this.o=f.o,this.g=f.g,Vf(this,f.u),this.h=f.h,zE(this,PO(f.i)),this.m=f.m):f&&(E=String(f).match(bO))?(this.l=!1,Ff(this,E[1]||"",!0),this.o=jf(E[2]||""),this.g=jf(E[3]||"",!0),Vf(this,E[4]),this.h=jf(E[5]||"",!0),zE(this,E[6]||"",!0),this.m=jf(E[7]||"")):(this.l=!1,this.i=new $f(null,this.l))}Fa.prototype.toString=function(){const f=[];var E=this.j;E&&f.push(Uf(E,IO,!0),":");var I=this.g;return(I||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Uf(E,IO,!0),"@"),f.push(Df(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&f.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Uf(I,I.charAt(0)=="/"?MY:OY,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Uf(I,LY)),f.join("")},Fa.prototype.resolve=function(f){const E=zs(this);let I=!!f.j;I?Ff(E,f.j):I=!!f.o,I?E.o=f.o:I=!!f.g,I?E.g=f.g:I=f.u!=null;var M=f.h;if(I)Vf(E,f.u);else if(I=!!f.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var H=E.h.lastIndexOf("/");H!=-1&&(M=E.h.slice(0,H+1)+M)}if(H=M,H==".."||H==".")M="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){M=H.lastIndexOf("/",0)==0,H=H.split("/");const G=[];for(let me=0;me<H.length;){const rt=H[me++];rt=="."?M&&me==H.length&&G.push(""):rt==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),M&&me==H.length&&G.push("")):(G.push(rt),M=!0)}M=G.join("/")}else M=H}return I?E.h=M:I=f.i.toString()!=="",I?zE(E,PO(f.i)):I=!!f.m,I&&(E.m=f.m),E};function zs(f){return new Fa(f)}function Ff(f,E,I){f.j=I?jf(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Vf(f,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);f.u=E}else f.u=null}function zE(f,E,I){E instanceof $f?(f.i=E,FY(f.i,f.l)):(I||(E=Uf(E,DY)),f.i=new $f(E,f.l))}function Wt(f,E,I){f.i.set(E,I)}function Ey(f){return Wt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function jf(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Uf(f,E,I){return typeof f=="string"?(f=encodeURI(f).replace(E,NY),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function NY(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var IO=/[#\/\?@]/g,OY=/[#\?:]/g,MY=/[#\?]/g,DY=/[#\?@]/g,LY=/#/g;function $f(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function Tl(f){f.g||(f.g=new Map,f.h=0,f.i&&PY(f.i,function(E,I){f.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}t=$f.prototype,t.add=function(f,E){Tl(this),this.i=null,f=td(this,f);let I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(E),this.h+=1,this};function AO(f,E){Tl(f),E=td(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function kO(f,E){return Tl(f),E=td(f,E),f.g.has(E)}t.forEach=function(f,E){Tl(this),this.g.forEach(function(I,M){I.forEach(function(H){f.call(E,H,M,this)},this)},this)};function xO(f,E){Tl(f);let I=[];if(typeof E=="string")kO(f,E)&&(I=I.concat(f.g.get(td(f,E))));else for(f=Array.from(f.g.values()),E=0;E<f.length;E++)I=I.concat(f[E]);return I}t.set=function(f,E){return Tl(this),this.i=null,f=td(this,f),kO(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=xO(this,f),f.length>0?String(f[0]):E):E};function RO(f,E,I){AO(f,E),I.length>0&&(f.i=null,f.g.set(td(f,E),m(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(let M=0;M<E.length;M++){var I=E[M];const H=Df(I);I=xO(this,I);for(let G=0;G<I.length;G++){let me=H;I[G]!==""&&(me+="="+Df(I[G])),f.push(me)}}return this.i=f.join("&")};function PO(f){const E=new $f;return E.i=f.i,f.g&&(E.g=new Map(f.g),E.h=f.h),E}function td(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function FY(f,E){E&&!f.j&&(Tl(f),f.i=null,f.g.forEach(function(I,M){const H=M.toLowerCase();M!=H&&(AO(this,M),RO(this,H,I))},f)),f.j=E}function VY(f,E){const I=new Be;if(o.Image){const M=new Image;M.onload=u(Va,I,"TestLoadImage: loaded",!0,E,M),M.onerror=u(Va,I,"TestLoadImage: error",!1,E,M),M.onabort=u(Va,I,"TestLoadImage: abort",!1,E,M),M.ontimeout=u(Va,I,"TestLoadImage: timeout",!1,E,M),o.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else E(!1)}function jY(f,E){const I=new Be,M=new AbortController,H=setTimeout(()=>{M.abort(),Va(I,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:M.signal}).then(G=>{clearTimeout(H),G.ok?Va(I,"TestPingServer: ok",!0,E):Va(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Va(I,"TestPingServer: error",!1,E)})}function Va(f,E,I,M,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),M(I)}catch{}}function UY(){this.g=new vi}function WE(f){this.i=f.Sb||null,this.h=f.ab||!1}d(WE,Pr),WE.prototype.g=function(){return new Sy(this.i,this.h)};function Sy(f,E){Ve.call(this),this.H=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Sy,Ve),t=Sy.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=E,this.readyState=1,Hf(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(E.body=f),(this.H||o).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bf(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Hf(this)),this.g&&(this.readyState=3,Hf(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;NO(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function NO(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?Bf(this):Hf(this),this.readyState==3&&NO(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Bf(this))},t.Na=function(f){this.g&&(this.response=f,Bf(this))},t.ga=function(){this.g&&Bf(this)};function Bf(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Hf(f)}t.setRequestHeader=function(f,E){this.A.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=E.next();return f.join(`\r
`)};function Hf(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Sy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function OO(f){let E="";return V(f,function(I,M){E+=M,E+=":",E+=I,E+=`\r
`}),E}function KE(f,E,I){e:{for(M in I){var M=!1;break e}M=!0}M||(I=OO(I),typeof f=="string"?I!=null&&Df(I):Wt(f,E,I))}function on(f){Ve.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(on,Ve);var $Y=/^https?$/i,BY=["POST","PUT"];t=on.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,E,I,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():us.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(G){MO(this,G);return}if(f=I||"",I=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var H in M)I.set(H,M[H]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const G of M.keys())I.set(G,M.get(G));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(I.keys()).find(G=>G.toLowerCase()=="content-type"),H=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(BY,E,void 0)>=0)||M||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,me]of I)this.g.setRequestHeader(G,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(G){MO(this,G)}};function MO(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.o=5,DO(f),by(f)}function DO(f){f.A||(f.A=!0,L(f,"complete"),L(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,L(this,"complete"),L(this,"abort"),by(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),by(this,!0)),on.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?LO(this):this.Xa())},t.Xa=function(){LO(this)};function LO(f){if(f.h&&typeof s<"u"){if(f.v&&ja(f)==4)setTimeout(f.Ca.bind(f),0);else if(L(f,"readystatechange"),ja(f)==4){f.h=!1;try{const G=f.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var M;if(M=G===0){let me=String(f.D).match(bO)[1]||null;!me&&o.self&&o.self.location&&(me=o.self.location.protocol.slice(0,-1)),M=!$Y.test(me?me.toLowerCase():"")}I=M}if(I)L(f,"complete"),L(f,"success");else{f.o=6;try{var H=ja(f)>2?f.g.statusText:""}catch{H=""}f.l=H+" ["+f.ca()+"]",DO(f)}}finally{by(f)}}}}function by(f,E){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const I=f.g;f.g=null,E||L(f,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ja(f){return f.g?f.g.readyState:0}t.ca=function(){try{return ja(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),On(E)}};function FO(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function HY(f){const E={};f=(f.g&&ja(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<f.length;M++){if(P(f[M]))continue;var I=AY(f[M]);const H=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const G=E[H]||[];E[H]=G,G.push(I)}X(E,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zf(f,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||E}function VO(f){this.za=0,this.i=[],this.j=new Be,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zf("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zf("baseRetryDelayMs",5e3,f),this.Za=zf("retryDelaySeedMs",1e4,f),this.Ta=zf("forwardChannelMaxRetries",2,f),this.va=zf("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new _O(f&&f.concurrentRequestLimit),this.Ba=new UY,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=VO.prototype,t.ka=8,t.I=1,t.connect=function(f,E,I,M){Mn(0),this.W=f,this.H=E||{},I&&M!==void 0&&(this.H.OSID=I,this.H.OAID=M),this.F=this.X,this.J=qO(this,null,this.W),Ay(this)};function qE(f){if(jO(f),f.I==3){var E=f.V++,I=zs(f.J);if(Wt(I,"SID",f.M),Wt(I,"RID",E),Wt(I,"TYPE","terminate"),Wf(f,I),E=new La(f,f.j,E),E.M=2,E.A=Ey(zs(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(E.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=E.A,I=!0),I||(E.g=GO(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Cy(E)}KO(f)}function Iy(f){f.g&&(QE(f),f.g.cancel(),f.g=null)}function jO(f){Iy(f),f.v&&(o.clearTimeout(f.v),f.v=null),ky(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function Ay(f){if(!TO(f.h)&&!f.m){f.m=!0;var E=f.Ea;k||S(),D||(k(),D=!0),A.add(E,f),f.D=0}}function zY(f,E){return CO(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=E.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=wl(l(f.Ea,f,E),WO(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const H=new La(this,this.j,f);let G=this.o;if(this.U&&(G?(G=ge(G),B(G,this.U)):G=this.U),this.u!==null||this.R||(H.J=G,G=null),this.S)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var M=this.i[I];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(E+=M,E>4096){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=$O(this,H,E),I=zs(this.J),Wt(I,"RID",f),Wt(I,"CVER",22),this.G&&Wt(I,"X-HTTP-Session-Id",this.G),Wf(this,I),G&&(this.R?E="headers="+Df(OO(G))+"&"+E:this.u&&KE(I,this.u,G)),HE(this.h,H),this.Ra&&Wt(I,"TYPE","init"),this.S?(Wt(I,"$req",E),Wt(I,"SID","null"),H.U=!0,jE(H,I,null)):jE(H,I,E),this.I=2}}else this.I==3&&(f?UO(this,f):this.i.length==0||TO(this.h)||UO(this))};function UO(f,E){var I;E?I=E.l:I=f.V++;const M=zs(f.J);Wt(M,"SID",f.M),Wt(M,"RID",I),Wt(M,"AID",f.K),Wf(f,M),f.u&&f.o&&KE(M,f.u,f.o),I=new La(f,f.j,I,f.D+1),f.u===null&&(I.J=f.o),E&&(f.i=E.G.concat(f.i)),E=$O(f,I,1e3),I.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),HE(f.h,I),jE(I,M,E)}function Wf(f,E){f.H&&V(f.H,function(I,M){Wt(E,M,I)}),f.l&&V({},function(I,M){Wt(E,M,I)})}function $O(f,E,I){I=Math.min(f.i.length,I);const M=f.l?l(f.l.Ka,f.l,f):null;e:{var H=f.i;let rt=-1;for(;;){const Dn=["count="+I];rt==-1?I>0?(rt=H[0].g,Dn.push("ofs="+rt)):rt=0:Dn.push("ofs="+rt);let Dt=!0;for(let Kn=0;Kn<I;Kn++){var G=H[Kn].g;const Ws=H[Kn].map;if(G-=rt,G<0)rt=Math.max(0,H[Kn].g-100),Dt=!1;else try{G="req"+G+"_"||"";try{var me=Ws instanceof Map?Ws:Object.entries(Ws);for(const[El,Ua]of me){let $a=Ua;a(Ua)&&($a=pt(Ua)),Dn.push(G+El+"="+encodeURIComponent($a))}}catch(El){throw Dn.push(G+"type="+encodeURIComponent("_badmap")),El}}catch{M&&M(Ws)}}if(Dt){me=Dn.join("&");break e}}me=void 0}return f=f.i.splice(0,I),E.G=f,me}function BO(f){if(!f.g&&!f.v){f.Y=1;var E=f.Da;k||S(),D||(k(),D=!0),A.add(E,f),f.A=0}}function GE(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=wl(l(f.Da,f),WO(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,HO(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=wl(l(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mn(10),Iy(this),HO(this))};function QE(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function HO(f){f.g=new La(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var E=zs(f.na);Wt(E,"RID","rpc"),Wt(E,"SID",f.M),Wt(E,"AID",f.K),Wt(E,"CI",f.F?"0":"1"),!f.F&&f.ia&&Wt(E,"TO",f.ia),Wt(E,"TYPE","xmlhttp"),Wf(f,E),f.u&&f.o&&KE(E,f.u,f.o),f.O&&(f.g.H=f.O);var I=f.g;f=f.ba,I.M=1,I.A=Ey(zs(E)),I.u=null,I.R=!0,yO(I,f)}t.Va=function(){this.C!=null&&(this.C=null,Iy(this),GE(this),Mn(19))};function ky(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function zO(f,E){var I=null;if(f.g==E){ky(f),QE(f),f.g=null;var M=2}else if(BE(f.h,E))I=E.G,EO(f.h,E),M=1;else return;if(f.I!=0){if(E.o)if(M==1){I=E.u?E.u.length:0,E=Date.now()-E.F;var H=f.D;M=Fo(),L(M,new ls(M,I)),Ay(f)}else BO(f);else if(H=E.m,H==3||H==0&&E.X>0||!(M==1&&zY(f,E)||M==2&&GE(f)))switch(I&&I.length>0&&(E=f.h,E.i=E.i.concat(I)),H){case 1:Cl(f,5);break;case 4:Cl(f,10);break;case 3:Cl(f,6);break;default:Cl(f,2)}}}function WO(f,E){let I=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(I*=2),I*E}function Cl(f,E){if(f.j.info("Error code "+E),E==2){var I=l(f.bb,f),M=f.Ua;const H=!M;M=new Fa(M||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ff(M,"https"),Ey(M),H?VY(M.toString(),I):jY(M.toString(),I)}else Mn(2);f.I=0,f.l&&f.l.pa(E),KO(f),jO(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function KO(f){if(f.I=0,f.ja=[],f.l){const E=SO(f.h);(E.length!=0||f.i.length!=0)&&(_(f.ja,E),_(f.ja,f.i),f.h.i.length=0,m(f.i),f.i.length=0),f.l.oa()}}function qO(f,E,I){var M=I instanceof Fa?zs(I):new Fa(I);if(M.g!="")E&&(M.g=E+"."+M.g),Vf(M,M.u);else{var H=o.location;M=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const G=new Fa(null);M&&Ff(G,M),E&&(G.g=E),H&&Vf(G,H),I&&(G.h=I),M=G}return I=f.G,E=f.wa,I&&E&&Wt(M,I,E),Wt(M,"VER",f.ka),Wf(f,M),M}function GO(f,E,I){if(E&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Aa&&!f.ma?new on(new WE({ab:I})):new on(f.ma),E.Fa(f.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function QO(){}t=QO.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function xy(){}xy.prototype.g=function(f,E){return new _i(f,E)};function _i(f,E){Ve.call(this),this.g=new VO(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(f?f["X-WebChannel-Client-Profile"]=E.sa:f={"X-WebChannel-Client-Profile":E.sa}),this.g.U=f,(f=E&&E.Qb)&&!P(f)&&(this.g.u=f),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!P(E)&&(this.g.G=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new nd(this)}d(_i,Ve),_i.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){qE(this.g)},_i.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.v&&(I={},I.__data__=pt(f),f=I);E.i.push(new RY(E.Ya++,f)),E.I==3&&Ay(E)},_i.prototype.N=function(){this.g.l=null,delete this.j,qE(this.g),delete this.g,_i.Z.N.call(this)};function YO(f){zn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const I in E){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}d(YO,zn);function XO(){Bs.call(this),this.status=1}d(XO,Bs);function nd(f){this.g=f}d(nd,QO),nd.prototype.ra=function(){L(this.g,"a")},nd.prototype.qa=function(f){L(this.g,new YO(f))},nd.prototype.pa=function(f){L(this.g,new XO)},nd.prototype.oa=function(){L(this.g,"b")},xy.prototype.createWebChannel=xy.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,b6=function(){return new xy},S6=function(){return Fo()},E6=rr,OA={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,Wv=Ui,Xr.COMPLETE="complete",C6=Xr,Lo.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,_p=Lo,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,T6=on}).apply(typeof av<"u"?av:typeof self<"u"?self:typeof window<"u"?window:{});const e2="@firebase/firestore",t2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new zg("@firebase/firestore");function fd(){return Iu.logLevel}function ke(t,...e){if(Iu.logLevel<=ut.DEBUG){const n=e.map(tP);Iu.debug(`Firestore (${gf}): ${t}`,...n)}}function wa(t,...e){if(Iu.logLevel<=ut.ERROR){const n=e.map(tP);Iu.error(`Firestore (${gf}): ${t}`,...n)}}function Ah(t,...e){if(Iu.logLevel<=ut.WARN){const n=e.map(tP);Iu.warn(`Firestore (${gf}): ${t}`,...n)}}function tP(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I6(t,r,n)}function I6(t,e,n){let r=`FIRESTORE (${gf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wa(r),new Error(r)}function At(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||I6(e,i,r)}function et(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ohe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cr.UNAUTHENTICATED))}shutdown(){}}class ahe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class che{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){At(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new la;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new la,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new la)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At(typeof r.accessToken=="string",31837,{l:r}),new A6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new Cr(e)}}class lhe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uhe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lhe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dhe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){At(this.o===void 0,3512);const r=s=>{s.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new n2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(At(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new n2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hhe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=hhe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function MA(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return zS(i)===zS(s)?ht(i,s):zS(i)?1:-1}return ht(t.length,e.length)}const fhe=55296,phe=57343;function zS(t){const e=t.charCodeAt(0);return e>=fhe&&e<=phe}function kh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="__name__";class Js{constructor(e,n,r){n===void 0?n=0:n>e.length&&He(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&He(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Js.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ht(e.length,n.length)}static compareSegments(e,n){const r=Js.isNumericId(e),i=Js.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Js.extractNumericId(e).compare(Js.extractNumericId(n)):MA(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mc.fromString(e.substring(4,e.length-2))}}class Bt extends Js{construct(e,n,r){return new Bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Bt(n)}static emptyPath(){return new Bt([])}}const mhe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Js{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return mhe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r2}static keyField(){return new dr([r2])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ce(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ce(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ce(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ce(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(Bt.fromString(e))}static fromName(e){return new De(Bt.fromString(e).popFirst(5))}static empty(){return new De(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e,n){if(!n)throw new Ce(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ghe(t,e,n,r){if(e===!0&&r===!0)throw new Ce(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function i2(t){if(!De.isDocumentKey(t))throw new Ce(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s2(t){if(De.isDocumentKey(t))throw new Ce(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function x6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _C(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He(12329,{type:typeof t})}function $r(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_C(t);throw new Ce(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wg(t,e){if(!x6(t))throw new Ce(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ce(ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=-62135596800,a2=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*a2);return new Gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<o2)throw new Ce(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a2}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wg(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:kn("string",Gt._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Gt(0,0))}static max(){return new Xe(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=-1;function yhe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Xe.fromTimestamp(r===1e9?new Gt(n+1,0):new Gt(n,r));return new Wc(i,De.empty(),e)}function vhe(t){return new Wc(t.readTime,t.key,Ym)}class Wc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wc(Xe.min(),De.empty(),Ym)}static max(){return new Wc(Xe.max(),De.empty(),Ym)}}function whe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _he="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class The{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==_he)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(i=>i?se.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new se((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new se((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Che(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}TC.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=-1;function CC(t){return t==null}function p_(t){return t===0&&1/t==-1/0}function Ehe(t){return typeof t=="number"&&Number.isInteger(t)&&!p_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="";function She(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c2(e)),e=bhe(t.get(n),e);return c2(e)}function bhe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case R6:n+="";break;default:n+=s}}return n}function c2(t){return t+R6+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=class DA{constructor(e,n){this.comparator=e,this.root=n||Dc.EMPTY}insert(e,n){return new DA(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dc.BLACK,null,null))}remove(e){return new DA(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dc.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cv(this.root,e,this.comparator,!1)}getReverseIterator(){return new cv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cv(this.root,e,this.comparator,!0)}},cv=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dc=class Bo{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Bo.RED,this.left=i??Bo.EMPTY,this.right=s??Bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Bo(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}};Dc.EMPTY=null,Dc.RED=!0,Dc.BLACK=!1;Dc.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Dc(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u2(this.data.getIterator())}getIteratorFrom(e){return new u2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bn(this.comparator);return n.data=e,n}}class u2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new ki([])}unionWith(e){let n=new Bn(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ki(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new N6("Invalid base64 string: "+s):s}}(e);return new mr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const Ihe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kc(t){if(At(!!t,39018),typeof t=="string"){let e=0;const n=Ihe.exec(t);if(At(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(t.seconds),nanos:gn(t.nanos)}}function gn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qc(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="server_timestamp",M6="__type__",D6="__previous_value__",L6="__local_write_time__";function iP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[M6])==null?void 0:r.stringValue)===O6}function EC(t){const e=t.mapValue.fields[D6];return iP(e)?EC(e):e}function Xm(t){const e=Kc(t.mapValue.fields[L6].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ahe{constructor(e,n,r,i,s,o,a,c,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}}const m_="(default)";class Jm{constructor(e,n){this.projectId=e,this.database=n||m_}static empty(){return new Jm("","")}get isDefaultDatabase(){return this.database===m_}isEqual(e){return e instanceof Jm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="__type__",khe="__max__",lv={mapValue:{}},V6="__vector__",g_="value";function Gc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iP(t)?4:Rhe(t)?9007199254740991:xhe(t)?10:11:He(28295,{value:t})}function ko(t,e){if(t===e)return!0;const n=Gc(t);if(n!==Gc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xm(t).isEqual(Xm(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Kc(i.timestampValue),a=Kc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return qc(i.bytesValue).isEqual(qc(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return gn(i.geoPointValue.latitude)===gn(s.geoPointValue.latitude)&&gn(i.geoPointValue.longitude)===gn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gn(i.integerValue)===gn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gn(i.doubleValue),a=gn(s.doubleValue);return o===a?p_(o)===p_(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return kh(t.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(l2(o)!==l2(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ko(o[c],a[c])))return!1;return!0}(t,e);default:return He(52216,{left:t})}}function Zm(t,e){return(t.values||[]).find(n=>ko(n,e))!==void 0}function xh(t,e){if(t===e)return 0;const n=Gc(t),r=Gc(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=gn(s.integerValue||s.doubleValue),c=gn(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return d2(t.timestampValue,e.timestampValue);case 4:return d2(Xm(t),Xm(e));case 5:return MA(t.stringValue,e.stringValue);case 6:return function(s,o){const a=qc(s),c=qc(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ht(a[l],c[l]);if(u!==0)return u}return ht(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ht(gn(s.latitude),gn(o.latitude));return a!==0?a:ht(gn(s.longitude),gn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h2(t.arrayValue,e.arrayValue);case 10:return function(s,o){var h,m,_,v;const a=s.fields||{},c=o.fields||{},l=(h=a[g_])==null?void 0:h.arrayValue,u=(m=c[g_])==null?void 0:m.arrayValue,d=ht(((_=l==null?void 0:l.values)==null?void 0:_.length)||0,((v=u==null?void 0:u.values)==null?void 0:v.length)||0);return d!==0?d:h2(l,u)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===lv.mapValue&&o===lv.mapValue)return 0;if(s===lv.mapValue)return 1;if(o===lv.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){const h=MA(c[d],u[d]);if(h!==0)return h;const m=xh(a[c[d]],l[u[d]]);if(m!==0)return m}return ht(c.length,u.length)}(t.mapValue,e.mapValue);default:throw He(23264,{he:n})}}function d2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=Kc(t),r=Kc(e),i=ht(n.seconds,r.seconds);return i!==0?i:ht(n.nanos,r.nanos)}function h2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=xh(n[i],r[i]);if(s)return s}return ht(n.length,r.length)}function Rh(t){return LA(t)}function LA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return De.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=LA(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${LA(n.fields[o])}`;return i+"}"}(t.mapValue):He(61005,{value:t})}function Kv(t){switch(Gc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=EC(t);return e?16+Kv(e):16;case 5:return 2*t.stringValue.length;case 6:return qc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Kv(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return pl(r.fields,(s,o)=>{i+=s.length+Kv(o)}),i}(t.mapValue);default:throw He(13486,{value:t})}}function f2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function FA(t){return!!t&&"integerValue"in t}function sP(t){return!!t&&"arrayValue"in t}function p2(t){return!!t&&"nullValue"in t}function m2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qv(t){return!!t&&"mapValue"in t}function xhe(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[F6])==null?void 0:r.stringValue)===V6}function Kp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return pl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kp(t.arrayValue.values[n]);return e}return{...t}}function Rhe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===khe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kp(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Kp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());qv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ri(Kp(this.value))}}function j6(t){const e=[];return pl(t.fields,(n,r)=>{const i=new dr([n]);if(qv(r)){const s=j6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ki(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new br(e,0,Xe.min(),Xe.min(),Xe.min(),ri.empty(),0)}static newFoundDocument(e,n,r,i){return new br(e,1,n,Xe.min(),r,i,0)}static newNoDocument(e,n){return new br(e,2,n,Xe.min(),Xe.min(),ri.empty(),0)}static newUnknownDocument(e,n){return new br(e,3,n,Xe.min(),Xe.min(),ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){this.position=e,this.inclusive=n}}function g2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),n.key):r=xh(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function y2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ko(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n="asc"){this.field=e,this.dir=n}}function Phe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{}class An extends U6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ohe(e,n,r):n==="array-contains"?new Lhe(e,r):n==="in"?new Fhe(e,r):n==="not-in"?new Vhe(e,r):n==="array-contains-any"?new jhe(e,r):new An(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mhe(e,r):new Dhe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xh(n,this.value)):n!==null&&Gc(this.value)===Gc(n)&&this.matchesComparison(xh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vs extends U6{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vs(e,n)}matches(e){return $6(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $6(t){return t.op==="and"}function B6(t){return Nhe(t)&&$6(t)}function Nhe(t){for(const e of t.filters)if(e instanceof Vs)return!1;return!0}function VA(t){if(t instanceof An)return t.field.canonicalString()+t.op.toString()+Rh(t.value);if(B6(t))return t.filters.map(e=>VA(e)).join(",");{const e=t.filters.map(n=>VA(n)).join(",");return`${t.op}(${e})`}}function H6(t,e){return t instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.field.isEqual(i.field)&&ko(r.value,i.value)}(t,e):t instanceof Vs?function(r,i){return i instanceof Vs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&H6(o,i.filters[a]),!0):!1}(t,e):void He(19439)}function z6(t){return t instanceof An?function(n){return`${n.field.canonicalString()} ${n.op} ${Rh(n.value)}`}(t):t instanceof Vs?function(n){return n.op.toString()+" {"+n.getFilters().map(z6).join(" ,")+"}"}(t):"Filter"}class Ohe extends An{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mhe extends An{constructor(e,n){super(e,"in",n),this.keys=W6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Dhe extends An{constructor(e,n){super(e,"not-in",n),this.keys=W6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function W6(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>De.fromName(r.referenceValue))}class Lhe extends An{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sP(n)&&Zm(n.arrayValue,this.value)}}class Fhe extends An{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zm(this.value.arrayValue,n)}}class Vhe extends An{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zm(this.value.arrayValue,n)}}class jhe extends An{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sP(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uhe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function v2(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Uhe(t,e,n,r,i,s,o)}function oP(t){const e=et(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>VA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),CC(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rh(r)).join(",")),e.Te=n}return e.Te}function aP(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Phe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!H6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y2(t.startAt,e.startAt)&&y2(t.endAt,e.endAt)}function jA(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $he(t,e,n,r,i,s,o,a){return new wf(t,e,n,r,i,s,o,a)}function SC(t){return new wf(t)}function w2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function K6(t){return t.collectionGroup!==null}function qp(t){const e=et(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bn(dr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new eg(s,r))}),n.has(dr.keyField().canonicalString())||e.Ie.push(new eg(dr.keyField(),r))}return e.Ie}function vo(t){const e=et(t);return e.Ee||(e.Ee=Bhe(e,qp(t))),e.Ee}function Bhe(t,e){if(t.limitType==="F")return v2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new eg(i.field,s)});const n=t.endAt?new y_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new y_(t.startAt.position,t.startAt.inclusive):null;return v2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function UA(t,e){const n=t.filters.concat([e]);return new wf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function v_(t,e,n){return new wf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bC(t,e){return aP(vo(t),vo(e))&&t.limitType===e.limitType}function q6(t){return`${oP(vo(t))}|lt:${t.limitType}`}function pd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>z6(i)).join(", ")}]`),CC(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rh(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rh(i)).join(",")),`Target(${r})`}(vo(t))}; limitType=${t.limitType})`}function IC(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):De.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of qp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const l=g2(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,qp(r),i)||r.endAt&&!function(o,a,c){const l=g2(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,qp(r),i))}(t,e)}function Hhe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G6(t){return(e,n)=>{let r=!1;for(const i of qp(t)){const s=zhe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zhe(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?xh(c,l):He(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return P6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe=new Pn(De.comparator);function _a(){return Whe}const Q6=new Pn(De.comparator);function Tp(...t){let e=Q6;for(const n of t)e=e.insert(n.key,n);return e}function Y6(t){let e=Q6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Kl(){return Gp()}function X6(){return Gp()}function Gp(){return new Ku(t=>t.toString(),(t,e)=>t.isEqual(e))}const Khe=new Pn(De.comparator),qhe=new Bn(De.comparator);function ft(...t){let e=qhe;for(const n of t)e=e.add(n);return e}const Ghe=new Bn(ht);function Qhe(){return Ghe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p_(e)?"-0":e}}function J6(t){return{integerValue:""+t}}function Yhe(t,e){return Ehe(e)?J6(e):cP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this._=void 0}}function Xhe(t,e,n){return t instanceof tg?function(i,s){const o={fields:{[M6]:{stringValue:O6},[L6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iP(s)&&(s=EC(s)),s&&(o.fields[D6]=s),{mapValue:o}}(n,e):t instanceof Ph?ez(t,e):t instanceof Nh?tz(t,e):function(i,s){const o=Z6(i,s),a=_2(o)+_2(i.Ae);return FA(o)&&FA(i.Ae)?J6(a):cP(i.serializer,a)}(t,e)}function Jhe(t,e,n){return t instanceof Ph?ez(t,e):t instanceof Nh?tz(t,e):n}function Z6(t,e){return t instanceof w_?function(r){return FA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class tg extends AC{}class Ph extends AC{constructor(e){super(),this.elements=e}}function ez(t,e){const n=nz(e);for(const r of t.elements)n.some(i=>ko(i,r))||n.push(r);return{arrayValue:{values:n}}}class Nh extends AC{constructor(e){super(),this.elements=e}}function tz(t,e){let n=nz(e);for(const r of t.elements)n=n.filter(i=>!ko(i,r));return{arrayValue:{values:n}}}class w_ extends AC{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _2(t){return gn(t.integerValue||t.doubleValue)}function nz(t){return sP(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n){this.field=e,this.transform=n}}function Zhe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ph&&i instanceof Ph||r instanceof Nh&&i instanceof Nh?kh(r.elements,i.elements,ko):r instanceof w_&&i instanceof w_?ko(r.Ae,i.Ae):r instanceof tg&&i instanceof tg}(t.transform,e.transform)}class efe{constructor(e,n){this.version=e,this.transformResults=n}}class Br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kC{}function rz(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xC(t.key,Br.none()):new Kg(t.key,t.data,Br.none());{const n=t.data,r=ri.empty();let i=new Bn(dr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ml(t.key,r,new ki(i.toArray()),Br.none())}}function tfe(t,e,n){t instanceof Kg?function(i,s,o){const a=i.value.clone(),c=C2(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ml?function(i,s,o){if(!Gv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=C2(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(iz(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Qp(t,e,n,r){return t instanceof Kg?function(s,o,a,c){if(!Gv(s.precondition,o))return a;const l=s.value.clone(),u=E2(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ml?function(s,o,a,c){if(!Gv(s.precondition,o))return a;const l=E2(s.fieldTransforms,c,o),u=o.data;return u.setAll(iz(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Gv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function nfe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Z6(r.transform,i||null);s!=null&&(n===null&&(n=ri.empty()),n.set(r.field,s))}return n||null}function T2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kh(r,i,(s,o)=>Zhe(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kg extends kC{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ml extends kC{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iz(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function C2(t,e,n){const r=new Map;At(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Jhe(o,a,n[i]))}return r}function E2(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Xhe(s,o,e))}return r}class xC extends kC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rfe extends kC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ife{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tfe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=X6();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=rz(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ft())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(n,r)=>T2(n,r))&&kh(this.baseMutations,e.baseMutations,(n,r)=>T2(n,r))}}class uP{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){At(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Khe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uP(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sfe=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ofe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn,gt;function afe(t){switch(t){case ne.OK:return He(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return He(15467,{code:t})}}function sz(t){if(t===void 0)return wa("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Tn.OK:return ne.OK;case Tn.CANCELLED:return ne.CANCELLED;case Tn.UNKNOWN:return ne.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return ne.INTERNAL;case Tn.UNAVAILABLE:return ne.UNAVAILABLE;case Tn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Tn.NOT_FOUND:return ne.NOT_FOUND;case Tn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Tn.ABORTED:return ne.ABORTED;case Tn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Tn.DATA_LOSS:return ne.DATA_LOSS;default:return He(39323,{code:t})}}(gt=Tn||(Tn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cfe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lfe=new Mc([4294967295,4294967295],0);function S2(t){const e=cfe().encode(t),n=new _6;return n.update(e),new Uint8Array(n.digest())}function b2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mc([n,r],0),new Mc([i,s],0)]}class dP{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cp(`Invalid padding: ${n}`);if(r<0)throw new Cp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Mc.fromNumber(r)));return i.compare(lfe)===1&&(i=new Mc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=S2(e),[r,i]=b2(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dP(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=S2(e),[r,i]=b2(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new RC(Xe.min(),i,new Pn(ht),_a(),ft())}}class qg{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qg(r,n,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class oz{constructor(e,n){this.targetId=e,this.Ce=n}}class az{constructor(e,n,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class I2{constructor(){this.ve=0,this.Fe=A2(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),n=ft(),r=ft();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:He(38017,{changeType:s})}}),new qg(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=A2()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ufe{constructor(e){this.Ge=e,this.ze=new Map,this.je=_a(),this.Je=uv(),this.He=uv(),this.Ye=new Pn(ht)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:He(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(jA(s))if(r===0){const o=new De(s.path);this.et(n,o,br.newNoDocument(o,Xe.min()))}else At(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=qc(r).toUint8Array()}catch(c){if(c instanceof N6)return Ah("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new dP(o,i,s)}catch(c){return Ah(c instanceof Cp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&jA(a.target)){const c=new De(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,br.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ft();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new RC(e,n,this.Ye,this.je,r);return this.je=_a(),this.Je=uv(),this.He=uv(),this.Ye=new Pn(ht),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new I2,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Bn(ht),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Bn(ht),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I2),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function uv(){return new Pn(De.comparator)}function A2(){return new Pn(De.comparator)}const dfe={asc:"ASCENDING",desc:"DESCENDING"},hfe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ffe={and:"AND",or:"OR"};class pfe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $A(t,e){return t.useProto3Json||CC(e)?e:{value:e}}function __(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mfe(t,e){return __(t,e.toTimestamp())}function wo(t){return At(!!t,49232),Xe.fromTimestamp(function(n){const r=Kc(n);return new Gt(r.seconds,r.nanos)}(t))}function hP(t,e){return BA(t,e).canonicalString()}function BA(t,e){const n=function(i){return new Bt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lz(t){const e=Bt.fromString(t);return At(pz(e),10190,{key:e.toString()}),e}function HA(t,e){return hP(t.databaseId,e.path)}function WS(t,e){const n=lz(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(dz(n))}function uz(t,e){return hP(t.databaseId,e)}function gfe(t){const e=lz(t);return e.length===4?Bt.emptyPath():dz(e)}function zA(t){return new Bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dz(t){return At(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function k2(t,e,n){return{name:HA(t,e),fields:n.value.mapValue.fields}}function yfe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:He(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(At(u===void 0||typeof u=="string",58123),mr.fromBase64String(u||"")):(At(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),mr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?ne.UNKNOWN:sz(l.code);return new Ce(u,l.message||"")}(o);n=new az(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=WS(t,r.document.name),s=wo(r.document.updateTime),o=r.document.createTime?wo(r.document.createTime):Xe.min(),a=new ri({mapValue:{fields:r.document.fields}}),c=br.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Qv(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=WS(t,r.document),s=r.readTime?wo(r.readTime):Xe.min(),o=br.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qv([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=WS(t,r.document),s=r.removedTargetIds||[];n=new Qv([],s,i,null)}else{if(!("filter"in e))return He(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ofe(i,s),a=r.targetId;n=new oz(a,o)}}return n}function vfe(t,e){let n;if(e instanceof Kg)n={update:k2(t,e.key,e.value)};else if(e instanceof xC)n={delete:HA(t,e.key)};else if(e instanceof ml)n={update:k2(t,e.key,e.data),updateMask:Afe(e.fieldMask)};else{if(!(e instanceof rfe))return He(16599,{Vt:e.type});n={verify:HA(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof w_)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw He(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mfe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:He(27497)}(t,e.precondition)),n}function wfe(t,e){return t&&t.length>0?(At(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?wo(i.updateTime):wo(s);return o.isEqual(Xe.min())&&(o=wo(s)),new efe(o,i.transformResults||[])}(n,e))):[]}function _fe(t,e){return{documents:[uz(t,e.path)]}}function Tfe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uz(t,i);const s=function(l){if(l.length!==0)return fz(Vs.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:md(h.field),direction:Sfe(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$A(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function Cfe(t){let e=gfe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){At(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const h=hz(d);return h instanceof Vs&&B6(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(_){return new eg(gd(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,CC(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){const h=!!d.before,m=d.values||[];return new y_(m,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const h=!d.before,m=d.values||[];return new y_(m,h)}(n.endAt)),$he(e,i,o,s,a,"F",c,l)}function Efe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hz(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gd(n.unaryFilter.field);return An.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gd(n.unaryFilter.field);return An.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gd(n.unaryFilter.field);return An.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gd(n.unaryFilter.field);return An.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}}(t):t.fieldFilter!==void 0?function(n){return An.create(gd(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vs.create(n.compositeFilter.filters.map(r=>hz(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return He(1026)}}(n.compositeFilter.op))}(t):He(30097,{filter:t})}function Sfe(t){return dfe[t]}function bfe(t){return hfe[t]}function Ife(t){return ffe[t]}function md(t){return{fieldPath:t.canonicalString()}}function gd(t){return dr.fromServerFormat(t.fieldPath)}function fz(t){return t instanceof An?function(n){if(n.op==="=="){if(m2(n.value))return{unaryFilter:{field:md(n.field),op:"IS_NAN"}};if(p2(n.value))return{unaryFilter:{field:md(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m2(n.value))return{unaryFilter:{field:md(n.field),op:"IS_NOT_NAN"}};if(p2(n.value))return{unaryFilter:{field:md(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:md(n.field),op:bfe(n.op),value:n.value}}}(t):t instanceof Vs?function(n){const r=n.getFilters().map(i=>fz(i));return r.length===1?r[0]:{compositeFilter:{op:Ife(n.op),filters:r}}}(t):He(54877,{filter:t})}function Afe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pz(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r,i,s=Xe.min(),o=Xe.min(),a=mr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kfe{constructor(e){this.yt=e}}function xfe(t){const e=Cfe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?v_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(){this.Cn=new Pfe}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Wc.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Wc.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class Pfe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Bn(Bt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mz=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(mz,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oh(0)}static cr(){return new Oh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="LruGarbageCollector",Nfe=1048576;function P2([t,e],[n,r]){const i=ht(t,n);return i===0?ht(e,r):i}class Ofe{constructor(e){this.Ir=e,this.buffer=new Bn(P2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mfe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(R2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vf(n)?ke(R2,"Ignoring IndexedDB error during garbage collection: ",n):await yf(n)}await this.Vr(3e5)})}}class Dfe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(TC.ce);const r=new Ofe(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(x2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x2):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),fd()<=ut.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function Lfe(t,e){return new Dfe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ffe{constructor(){this.changes=new Ku(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vfe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jfe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qp(r.mutation,i,ki.empty(),Gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ft()){const i=Kl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Tp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Kl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ft()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_a();const o=Gp(),a=function(){return Gp()}();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof ml)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Qp(u.mutation,l,u.mutation.getFieldMask(),Gt.now())):o.set(l.key,ki.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>a.set(l,new Vfe(u,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Gp();let i=new Pn((o,a)=>o-a),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||ki.empty();u=a.applyToLocalView(l,u),r.set(c,u);const d=(i.get(a.batchId)||ft()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=X6();u.forEach(h=>{if(!s.has(h)){const m=rz(n.get(h),r.get(h));m!==null&&d.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):se.resolve(Kl());let a=Ym,c=s;return o.next(l=>se.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?se.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ft())).next(u=>({batchId:a,changes:Y6(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next(r=>{let i=Tp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Tp();return this.indexManager.getCollectionParents(e,s).next(a=>se.forEach(a,c=>{const l=function(d,h){return new wf(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,br.newInvalidDocument(u)))});let a=Tp();return o.forEach((c,l)=>{const u=s.get(c);u!==void 0&&Qp(u.mutation,l,ki.empty(),Gt.now()),IC(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ufe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wo(i.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:xfe(i.bundledQuery),readTime:wo(i.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $fe{constructor(){this.overlays=new Pn(De.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kl();return se.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const i=Kl(),s=n.length+1,o=new De(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return se.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pn((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Kl(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Kl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return se.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sfe(n,r));let s=this.qr.get(n);s===void 0&&(s=ft(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bfe{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.Qr=new Bn(Xn.$r),this.Ur=new Bn(Xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Xn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Xn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new De(new Bt([])),r=new Xn(n,e),i=new Xn(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new De(new Bt([])),r=new Xn(n,e),i=new Xn(n,e+1);let s=ft();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return De.comparator(e.key,n.key)||ht(e.Yr,n.Yr)}static Kr(e,n){return ht(e.Yr,n.Yr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hfe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Bn(Xn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ife(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Xn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return se.resolve(o)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?rP:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xn(n,0),i=new Xn(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bn(ht);return n.forEach(i=>{const s=new Xn(i,0),o=new Xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;De.isDocumentKey(s)||(s=s.child(""));const o=new Xn(new De(s),0);let a=new Bn(ht);return this.Zr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),se.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){At(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return se.forEach(n.mutations,i=>{const s=new Xn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Xn(n,0),i=this.Zr.firstAfterOrEqual(r);return se.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zfe{constructor(e){this.ri=e,this.docs=function(){return new Pn(De.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():br.newInvalidDocument(n))}getEntries(e,n){let r=_a();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():br.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_a();const o=n.path,a=new De(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||whe(vhe(u),r)<=0||(i.has(u.key)||IC(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,n,r,i){He(9500)}ii(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wfe(this)}getSize(e){return se.resolve(this.size)}}class Wfe extends Ffe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kfe{constructor(e){this.persistence=e,this.si=new Ku(n=>oP(n),aP),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.oi=0,this._i=new fP,this.targetCount=0,this.ai=Oh.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Oh(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),se.waitFor(s).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),se.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this.ui={},this.overlays={},this.ci=new TC(0),this.li=!1,this.li=!0,this.hi=new Bfe,this.referenceDelegate=e(this),this.Pi=new Kfe(this),this.indexManager=new Rfe,this.remoteDocumentCache=function(i){return new zfe(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new kfe(n),this.Ii=new Ufe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $fe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Hfe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const i=new qfe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return se.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class qfe extends The{constructor(e){super(),this.currentSequenceNumber=e}}class pP{constructor(e){this.persistence=e,this.Ri=new fP,this.Vi=null}static mi(e){return new pP(e)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,r=>{const i=De.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Xe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class T_{constructor(e,n){this.persistence=e,this.pi=new Ku(r=>She(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Lfe(this,n)}static mi(e,n){return new T_(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return se.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?se.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kv(e.data.value)),n}br(e,n,r){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ft(),i=ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mP(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Fue()?8:Che(xr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Gfe;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(fd()<=ut.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",pd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(fd()<=ut.DEBUG&&ke("QueryEngine","Query:",pd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(fd()<=ut.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",pd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vo(n))):se.resolve())}ys(e,n){if(w2(n))return se.resolve(null);let r=vo(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=v_(n,null,"F"),r=vo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ft(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Ds(n,a);return this.Cs(n,l,o,c.readTime)?this.ys(e,v_(n,null,"F")):this.vs(e,l,n,c)}))})))}ws(e,n,r,i){return w2(n)||i.isEqual(Xe.min())?se.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?se.resolve(null):(fd()<=ut.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pd(n)),this.vs(e,o,n,yhe(i,Ym)).next(a=>a))})}Ds(e,n){let r=new Bn(G6(e));return n.forEach((i,s)=>{IC(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return fd()<=ut.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",pd(n)),this.ps.getDocumentsMatchingQuery(e,n,Wc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="LocalStore",Yfe=3e8;class Xfe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Pn(ht),this.xs=new Ku(s=>oP(s),aP),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jfe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Jfe(t,e,n,r){return new Xfe(t,e,n,r)}async function yz(t,e){const n=et(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=ft();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function Zfe(t,e){const n=et(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const d=l.batch,h=d.keys();let m=se.resolve();return h.forEach(_=>{m=m.next(()=>u.getEntry(c,_)).next(v=>{const T=l.docVersions.get(_);At(T!==null,48541),v.version.compareTo(T)<0&&(d.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),u.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ft();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vz(t){const e=et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function epe(t,e){const n=et(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let m=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(mr.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(v,T,y){return v.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Yfe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,u)&&a.push(n.Pi.updateTargetData(s,m))});let c=_a(),l=ft();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(tpe(s,o,e.documentUpdates).next(u=>{c=u.ks,l=u.qs})),!r.isEqual(Xe.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return se.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Ms=i,s))}function tpe(t,e,n){let r=ft(),i=ft();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_a();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Xe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ke(gP,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function npe(t,e){const n=et(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rP),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rpe(t,e){const n=et(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,se.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new yc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function WA(t,e,n){const r=et(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!vf(o))throw o;ke(gP,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function N2(t,e,n){const r=et(t);let i=Xe.min(),s=ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const d=et(c),h=d.xs.get(u);return h!==void 0?se.resolve(d.Ms.get(h)):d.Pi.getTargetData(l,u)}(r,o,vo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Xe.min(),n?s:ft())).next(a=>(ipe(r,Hhe(e),a),{documents:a,Qs:s})))}function ipe(t,e,n){let r=t.Os.get(e)||Xe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class O2{constructor(){this.activeTargetIds=Qhe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class spe{constructor(){this.Mo=new O2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new O2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ope{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="ConnectivityMonitor";class D2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(M2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(M2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv=null;function KA(){return dv===null?dv=function(){return 268435456+Math.round(2147483648*Math.random())}():dv++,"0x"+dv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="RestConnection",ape={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cpe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===m_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=KA(),a=this.zo(e,n.toUriEncodedString());ke(KS,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:l}=new URL(a),u=ss(l);return this.Jo(e,a,c,r,u).then(d=>(ke(KS,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ah(KS,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=ape[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="WebChannelConnection";class upe extends cpe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=KA();return new Promise((a,c)=>{const l=new T6;l.setWithCredentials(!0),l.listenOnce(C6.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wv.NO_ERROR:const d=l.getResponseJson();ke(_r,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Wv.TIMEOUT:ke(_r,`RPC '${e}' ${o} timed out`),c(new Ce(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Wv.HTTP_ERROR:const h=l.getStatus();if(ke(_r,`RPC '${e}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const v=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(w)>=0?w:ne.UNKNOWN}(_.status);c(new Ce(v,_.message))}else c(new Ce(ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Ce(ne.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{ke(_r,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);ke(_r,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}T_(e,n,r){const i=KA(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=b6(),a=S6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=s.join("");ke(_r,`Creating RPC '${e}' stream ${i}: ${u}`,c);const d=o.createWebChannel(u,c);this.I_(d);let h=!1,m=!1;const _=new lpe({Yo:T=>{m?ke(_r,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(h||(ke(_r,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),ke(_r,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},Zo:()=>d.close()}),v=(T,y,w)=>{T.listen(y,C=>{try{w(C)}catch(b){setTimeout(()=>{throw b},0)}})};return v(d,_p.EventType.OPEN,()=>{m||(ke(_r,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),v(d,_p.EventType.CLOSE,()=>{m||(m=!0,ke(_r,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(d))}),v(d,_p.EventType.ERROR,T=>{m||(m=!0,Ah(_r,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),_.a_(new Ce(ne.UNAVAILABLE,"The operation could not be completed")))}),v(d,_p.EventType.MESSAGE,T=>{var y;if(!m){const w=T.data[0];At(!!w,16349);const C=w,b=(C==null?void 0:C.error)||((y=C[0])==null?void 0:y.error);if(b){ke(_r,`RPC '${e}' stream ${i} received error:`,b);const k=b.status;let D=function(x){const N=Tn[x];if(N!==void 0)return sz(N)}(k),A=b.message;D===void 0&&(D=ne.INTERNAL,A="Unknown error status: "+k+" with message "+b.message),m=!0,_.a_(new Ce(D,A)),d.close()}else ke(_r,`RPC '${e}' stream ${i} received:`,w),_.u_(w)}}),v(a,E6.STAT_EVENT,T=>{T.stat===OA.PROXY?ke(_r,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===OA.NOPROXY&&ke(_r,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qS(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){return new pfe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="PersistentStream";class _z{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wz(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(wa(n.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Ce(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ke(L2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ke(L2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dpe extends _z{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=yfe(this.serializer,e),r=function(s){if(!("targetChange"in s))return Xe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Xe.min():o.readTime?wo(o.readTime):Xe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zA(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=jA(c)?{documents:_fe(s,c)}:{query:Tfe(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cz(s,o.resumeToken);const l=$A(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Xe.min())>0){a.readTime=__(s,o.snapshotVersion.toTimestamp());const l=$A(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=Efe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zA(this.serializer),n.removeTarget=e,this.q_(n)}}class hpe extends _z{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wfe(e.writeResults,e.commitTime),r=wo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zA(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vfe(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fpe{}class ppe extends fpe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ce(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,BA(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ce(ne.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,BA(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(ne.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mpe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="RemoteStore";class gpe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{qu(this)&&(ke(Au,"Restarting streams for network reachability change."),await async function(c){const l=et(c);l.Ea.add(4),await Gg(l),l.Ra.set("Unknown"),l.Ea.delete(4),await NC(l)}(this))})}),this.Ra=new mpe(r,i)}}async function NC(t){if(qu(t))for(const e of t.da)await e(!0)}async function Gg(t){for(const e of t.da)await e(!1)}function Tz(t,e){const n=et(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_P(n)?wP(n):_f(n).O_()&&vP(n,e))}function yP(t,e){const n=et(t),r=_f(n);n.Ia.delete(e),r.O_()&&Cz(n,e),n.Ia.size===0&&(r.O_()?r.L_():qu(n)&&n.Ra.set("Unknown"))}function vP(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_f(t).Y_(e)}function Cz(t,e){t.Va.Ue(e),_f(t).Z_(e)}function wP(t){t.Va=new ufe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_f(t).start(),t.Ra.ua()}function _P(t){return qu(t)&&!_f(t).x_()&&t.Ia.size>0}function qu(t){return et(t).Ea.size===0}function Ez(t){t.Va=void 0}async function ype(t){t.Ra.set("Online")}async function vpe(t){t.Ia.forEach((e,n)=>{vP(t,e)})}async function wpe(t,e){Ez(t),_P(t)?(t.Ra.ha(e),wP(t)):t.Ra.set("Unknown")}async function _pe(t,e,n){if(t.Ra.set("Online"),e instanceof az&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){ke(Au,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await C_(t,r)}else if(e instanceof Qv?t.Va.Ze(e):e instanceof oz?t.Va.st(e):t.Va.tt(e),!n.isEqual(Xe.min()))try{const r=await vz(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.Ia.get(l);u&&s.Ia.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(mr.EMPTY_BYTE_STRING,u.snapshotVersion)),Cz(s,c);const d=new yc(u.target,c,l,u.sequenceNumber);vP(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ke(Au,"Failed to raise snapshot:",r),await C_(t,r)}}async function C_(t,e,n){if(!vf(e))throw e;t.Ea.add(1),await Gg(t),t.Ra.set("Offline"),n||(n=()=>vz(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ke(Au,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await NC(t)})}function Sz(t,e){return e().catch(n=>C_(t,n,e))}async function OC(t){const e=et(t),n=Qc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rP;for(;Tpe(e);)try{const i=await npe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Cpe(e,i)}catch(i){await C_(e,i)}bz(e)&&Iz(e)}function Tpe(t){return qu(t)&&t.Ta.length<10}function Cpe(t,e){t.Ta.push(e);const n=Qc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bz(t){return qu(t)&&!Qc(t).x_()&&t.Ta.length>0}function Iz(t){Qc(t).start()}async function Epe(t){Qc(t).ra()}async function Spe(t){const e=Qc(t);for(const n of t.Ta)e.ea(n.mutations)}async function bpe(t,e,n){const r=t.Ta.shift(),i=uP.from(r,e,n);await Sz(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await OC(t)}async function Ipe(t,e){e&&Qc(t).X_&&await async function(r,i){if(function(o){return afe(o)&&o!==ne.ABORTED}(i.code)){const s=r.Ta.shift();Qc(r).B_(),await Sz(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await OC(r)}}(t,e),bz(t)&&Iz(t)}async function F2(t,e){const n=et(t);n.asyncQueue.verifyOperationInProgress(),ke(Au,"RemoteStore received new credentials");const r=qu(n);n.Ea.add(3),await Gg(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await NC(n)}async function Ape(t,e){const n=et(t);e?(n.Ea.delete(2),await NC(n)):e||(n.Ea.add(2),await Gg(n),n.Ra.set("Unknown"))}function _f(t){return t.ma||(t.ma=function(n,r,i){const s=et(n);return s.sa(),new dpe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:ype.bind(null,t),t_:vpe.bind(null,t),r_:wpe.bind(null,t),H_:_pe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),_P(t)?wP(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ez(t))})),t.ma}function Qc(t){return t.fa||(t.fa=function(n,r,i){const s=et(n);return s.sa(),new hpe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Epe.bind(null,t),r_:Ipe.bind(null,t),ta:Spe.bind(null,t),na:bpe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await OC(t)):(await t.fa.stop(),t.Ta.length>0&&(ke(Au,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new la,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new TP(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CP(t,e){if(wa("AsyncQueue",`${e}: ${t}`),vf(t))return new Ce(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{static emptySet(e){return new Yd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=Tp(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.ga=new Pn(De.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):He(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mh{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mh(e,n,Yd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kpe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xpe{constructor(){this.queries=j2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=et(n),s=i.queries;i.queries=j2(),s.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new Ce(ne.ABORTED,"Firestore shutting down"))}}function j2(){return new Ku(t=>q6(t),bC)}async function EP(t,e){const n=et(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new kpe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=CP(o,`Initialization of query '${pd(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&bP(n)}async function SP(t,e){const n=et(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Rpe(t,e){const n=et(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&bP(n)}function Ppe(t,e,n){const r=et(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function bP(t){t.Ca.forEach(e=>{e.next()})}var qA,U2;(U2=qA||(qA={})).Ma="default",U2.Cache="cache";class IP{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.key=e}}class kz{constructor(e){this.key=e}}class Npe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=G6(e),this.tu=new Yd(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new V2,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),m=IC(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;h&&m?h.data.isEqual(m.data)?_!==v&&(r.track({type:3,doc:m}),T=!0):this.su(h,m)||(r.track({type:2,doc:m}),T=!0,(c&&this.eu(m,c)>0||l&&this.eu(m,l)<0)&&(a=!0)):!h&&m?(r.track({type:0,doc:m}),T=!0):h&&!m&&(r.track({type:1,doc:h}),T=!0,(c||l)&&(a=!0)),T&&(m?(o=o.add(m),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(m,_){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:T})}};return v(m)-v(_)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new Mh(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new V2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kz(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Az(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const AP="SyncEngine";class Ope{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Mpe{constructor(e){this.key=e,this.hu=!1}}class Dpe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ku(a=>q6(a),bC),this.Iu=new Map,this.Eu=new Set,this.du=new Pn(De.comparator),this.Au=new Map,this.Ru=new fP,this.Vu={},this.mu=new Map,this.fu=Oh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Lpe(t,e,n=!0){const r=Mz(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await xz(r,e,n,!0),i}async function Fpe(t,e){const n=Mz(t);await xz(n,e,!0,!1)}async function xz(t,e,n,r){const i=await rpe(t.localStore,vo(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Vpe(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Tz(t.remoteStore,i),a}async function Vpe(t,e,n,r,i){t.pu=(d,h,m)=>async function(v,T,y,w){let C=T.view.ru(y);C.Cs&&(C=await N2(v.localStore,T.query,!1).then(({documents:A})=>T.view.ru(A,C)));const b=w&&w.targetChanges.get(T.targetId),k=w&&w.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(C,v.isPrimaryClient,b,k);return B2(v,T.targetId,D.au),D.snapshot}(t,d,h,m);const s=await N2(t.localStore,e,!0),o=new Npe(e,s.Qs),a=o.ru(s.documents),c=qg.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);B2(t,n,l.au);const u=new Ope(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function jpe(t,e,n){const r=et(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!bC(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await WA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yP(r.remoteStore,i.targetId),GA(r,i.targetId)}).catch(yf)):(GA(r,i.targetId),await WA(r.localStore,i.targetId,!0))}async function Upe(t,e){const n=et(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yP(n.remoteStore,r.targetId))}async function $pe(t,e,n){const r=Gpe(t);try{const i=await function(o,a){const c=et(o),l=Gt.now(),u=a.reduce((m,_)=>m.add(_.key),ft());let d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=_a(),v=ft();return c.Ns.getEntries(m,u).next(T=>{_=T,_.forEach((y,w)=>{w.isValidDocument()||(v=v.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(T=>{d=T;const y=[];for(const w of a){const C=nfe(w,d.get(w.key).overlayedDocument);C!=null&&y.push(new ml(w.key,C,j6(C.value.mapValue),Br.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,y,a)}).next(T=>{h=T;const y=T.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(m,T.batchId,y)})}).then(()=>({batchId:h.batchId,changes:Y6(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new Pn(ht)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l}(r,i.batchId,n),await Qg(r,i.changes),await OC(r.remoteStore)}catch(i){const s=CP(i,"Failed to persist write");n.reject(s)}}async function Rz(t,e){const n=et(t);try{const r=await epe(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?At(o.hu,14607):i.removedDocuments.size>0&&(At(o.hu,42227),o.hu=!1))}),await Qg(n,r,e)}catch(r){await yf(r)}}function $2(t,e,n){const r=et(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=et(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(const h of d.Sa)h.va(a)&&(l=!0)}),l&&bP(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bpe(t,e,n){const r=et(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Pn(De.comparator);o=o.insert(s,br.newNoDocument(s,Xe.min()));const a=ft().add(s),c=new RC(Xe.min(),new Map,new Pn(ht),o,a);await Rz(r,c),r.du=r.du.remove(s),r.Au.delete(e),kP(r)}else await WA(r.localStore,e,!1).then(()=>GA(r,e,n)).catch(yf)}async function Hpe(t,e){const n=et(t),r=e.batch.batchId;try{const i=await Zfe(n.localStore,e);Nz(n,r,null),Pz(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qg(n,i)}catch(i){await yf(i)}}async function zpe(t,e,n){const r=et(t);try{const i=await function(o,a){const c=et(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(At(d!==null,37113),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);Nz(r,e,n),Pz(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qg(r,i)}catch(i){await yf(i)}}function Pz(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Nz(t,e,n){const r=et(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function GA(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Oz(t,r)})}function Oz(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yP(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),kP(t))}function B2(t,e,n){for(const r of n)r instanceof Az?(t.Ru.addReference(r.key,e),Wpe(t,r)):r instanceof kz?(ke(AP,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Oz(t,r.key)):He(19791,{wu:r})}function Wpe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ke(AP,"New document in limbo: "+n),t.Eu.add(r),kP(t))}function kP(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new De(Bt.fromString(e)),r=t.fu.next();t.Au.set(r,new Mpe(n)),t.du=t.du.insert(n,r),Tz(t.remoteStore,new yc(vo(SC(n.path)),r,"TargetPurposeLimboResolution",TC.ce))}}async function Qg(t,e,n){const r=et(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(l=>{var u;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(u=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);const d=mP.As(c.targetId,l);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,l){const u=et(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>se.forEach(l,h=>se.forEach(h.Es,m=>u.persistence.referenceDelegate.addReference(d,h.targetId,m)).next(()=>se.forEach(h.ds,m=>u.persistence.referenceDelegate.removeReference(d,h.targetId,m)))))}catch(d){if(!vf(d))throw d;ke(gP,"Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const m=u.Ms.get(h),_=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(h,v)}}}(r.localStore,s))}async function Kpe(t,e){const n=et(t);if(!n.currentUser.isEqual(e)){ke(AP,"User change. New user:",e.toKey());const r=await yz(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new Ce(ne.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qg(n,r.Ls)}}function qpe(t,e){const n=et(t),r=n.Au.get(e);if(r&&r.hu)return ft().add(r.key);{let i=ft();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Mz(t){const e=et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qpe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bpe.bind(null,e),e.Pu.H_=Rpe.bind(null,e.eventManager),e.Pu.yu=Ppe.bind(null,e.eventManager),e}function Gpe(t){const e=et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hpe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zpe.bind(null,e),e}class E_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=PC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Jfe(this.persistence,new Qfe,e.initialUser,this.serializer)}Cu(e){return new gz(pP.mi,this.serializer)}Du(e){return new spe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}E_.provider={build:()=>new E_};class Qpe extends E_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){At(this.persistence.referenceDelegate instanceof T_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mfe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new gz(r=>T_.mi(r,n),this.serializer)}}class QA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kpe.bind(null,this.syncEngine),await Ape(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xpe}()}createDatastore(e){const n=PC(e.databaseInfo.databaseId),r=function(s){return new upe(s)}(e.databaseInfo);return function(s,o,a,c){return new ppe(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new gpe(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$2(this.syncEngine,n,0),function(){return D2.v()?new D2:new ope}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){const d=new Dpe(i,s,o,a,c,l);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=et(i);ke(Au,"RemoteStore shutting down."),s.Ea.add(5),await Gg(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}QA.provider={build:()=>new QA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="FirestoreClient";class Ype{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cr.UNAUTHENTICATED,this.clientId=nP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ke(Yc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ke(Yc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new la;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=CP(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function GS(t,e){t.asyncQueue.verifyOperationInProgress(),ke(Yc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yz(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function H2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Xpe(t);ke(Yc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>F2(e.remoteStore,i)),t._onlineComponents=e}async function Xpe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(Yc,"Using user provided OfflineComponentProvider");try{await GS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ah("Error using user provided cache. Falling back to memory cache: "+n),await GS(t,new E_)}}else ke(Yc,"Using default OfflineComponentProvider"),await GS(t,new Qpe(void 0));return t._offlineComponents}async function Dz(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(Yc,"Using user provided OnlineComponentProvider"),await H2(t,t._uninitializedComponentsProvider._online)):(ke(Yc,"Using default OnlineComponentProvider"),await H2(t,new QA))),t._onlineComponents}function Jpe(t){return Dz(t).then(e=>e.syncEngine)}async function S_(t){const e=await Dz(t),n=e.eventManager;return n.onListen=Lpe.bind(null,e.syncEngine),n.onUnlisten=jpe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Fpe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Upe.bind(null,e.syncEngine),n}function Zpe(t,e,n={}){const r=new la;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new xP({next:h=>{u.Nu(),o.enqueueAndForget(()=>SP(s,d));const m=h.docs.has(a);!m&&h.fromCache?l.reject(new Ce(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?l.reject(new Ce(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new IP(SC(a.path),u,{includeMetadataChanges:!0,qa:!0});return EP(s,d)}(await S_(t),t.asyncQueue,e,n,r)),r.promise}function eme(t,e,n={}){const r=new la;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new xP({next:h=>{u.Nu(),o.enqueueAndForget(()=>SP(s,d)),h.fromCache&&c.source==="server"?l.reject(new Ce(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new IP(a,u,{includeMetadataChanges:!0,qa:!0});return EP(s,d)}(await S_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz="firestore.googleapis.com",W2=!0;class K2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fz,this.ssl=W2}else this.host=e.host,this.ssl=e.ssl??W2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mz;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nfe)throw new Ce(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ghe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lz(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ce(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ce(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ce(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class MC{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ohe;switch(r.type){case"firstParty":return new uhe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=z2.get(n);r&&(ke("ComponentProvider","Removing Datastore"),z2.delete(n),r.terminate())}(this),Promise.resolve()}}function tme(t,e,n,r={}){var l;t=$r(t,MC);const i=ss(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Bg(`https://${a}`),Hg("Firestore",!0)),s.host!==Fz&&s.host!==a&&Ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!Fs(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Cr.MOCK_USER;else{u=YR(r.mockUserToken,(l=t._app)==null?void 0:l.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Ce(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Cr(h)}t._authCredentials=new ahe(new A6(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oa(this.firestore,e,this._query)}}class dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Wg(n,dn._jsonSchema))return new dn(e,r||null,new De(Bt.fromString(n.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:kn("string",dn._jsonSchemaVersion),referencePath:kn("string")};class Lc extends Oa{constructor(e,n,r){super(e,n,SC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new De(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function hr(t,e,...n){if(t=Ge(t),k6("collection","path",e),t instanceof MC){const r=Bt.fromString(e,...n);return s2(r),new Lc(t,null,r)}{if(!(t instanceof dn||t instanceof Lc))throw new Ce(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return s2(r),new Lc(t.firestore,null,r)}}function Ke(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=nP.newId()),k6("doc","path",e),t instanceof MC){const r=Bt.fromString(e,...n);return i2(r),new dn(t,null,new De(r))}{if(!(t instanceof dn||t instanceof Lc))throw new Ce(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return i2(r),new dn(t.firestore,t instanceof Lc?t.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="AsyncQueue";class G2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wz(this,"async_queue_retry"),this._c=()=>{const r=qS();r&&ke(q2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new la;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vf(e))throw e;ke(q2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",Q2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=TP.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&He(47125,{Pc:Q2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Q2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xo extends MC{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new G2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G2(e),this._firestoreClient=void 0,await e}}}function nme(t,e){const n=typeof t=="object"?t:fl(),r=typeof t=="string"?t:m_,i=Us(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gC("firestore");s&&tme(i,...s)}return i}function Yg(t){if(t._terminated)throw new Ce(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rme(t),t._firestoreClient}function rme(t){var r,i,s;const e=t._freezeSettings(),n=function(a,c,l,u){return new Ahe(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Lz(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ype(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gi(mr.fromBase64String(e))}catch(n){throw new Ce(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gi(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wg(e,Gi._jsonSchema))return Gi.fromBase64String(e.bytes)}}Gi._jsonSchemaVersion="firestore/bytes/1.0",Gi._jsonSchema={type:kn("string",Gi._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_o._jsonSchemaVersion}}static fromJSON(e){if(Wg(e,_o._jsonSchema))return new _o(e.latitude,e.longitude)}}_o._jsonSchemaVersion="firestore/geoPoint/1.0",_o._jsonSchema={type:kn("string",_o._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:To._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wg(e,To._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new To(e.vectorValues);throw new Ce(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}To._jsonSchemaVersion="firestore/vectorValue/1.0",To._jsonSchema={type:kn("string",To._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ime=/^__.*__$/;class sme{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ml(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kg(e,this.data,n,this.fieldTransforms)}}class Vz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ml(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jz(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:t})}}class DC{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new DC({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return b_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jz(this.Ac)&&ime.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ome{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||PC(e)}Cc(e,n,r,i=!1){return new DC({Ac:e,methodName:n,Dc:r,path:dr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jg(t){const e=t._freezeSettings(),n=PC(t._databaseId);return new ome(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RP(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);MP("Data must be an object, but it was:",o,r);const a=Hz(r,o);let c,l;if(s.merge)c=new ki(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=YA(e,d,n);if(!o.contains(h))throw new Ce(ne.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Wz(u,h)||u.push(h)}c=new ki(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new sme(new ri(a),c,l)}class Zg extends Tf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zg}}function Uz(t,e,n){return new DC({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class PP extends Tf{_toFieldTransform(e){return new lP(e.path,new tg)}isEqual(e){return e instanceof PP}}class NP extends Tf{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Uz(this,e,!0),r=this.vc.map(s=>Gu(s,n)),i=new Ph(r);return new lP(e.path,i)}isEqual(e){return e instanceof NP&&Fs(this.vc,e.vc)}}class OP extends Tf{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Uz(this,e,!0),r=this.vc.map(s=>Gu(s,n)),i=new Nh(r);return new lP(e.path,i)}isEqual(e){return e instanceof OP&&Fs(this.vc,e.vc)}}function $z(t,e,n,r){const i=t.Cc(1,e,n);MP("Data must be an object, but it was:",i,r);const s=[],o=ri.empty();pl(r,(c,l)=>{const u=DP(e,c,n);l=Ge(l);const d=i.yc(u);if(l instanceof Zg)s.push(u);else{const h=Gu(l,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new ki(s);return new Vz(o,a,i.fieldTransforms)}function Bz(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[YA(e,r,n)],c=[i];if(s.length%2!=0)throw new Ce(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(YA(e,s[h])),c.push(s[h+1]);const l=[],u=ri.empty();for(let h=a.length-1;h>=0;--h)if(!Wz(l,a[h])){const m=a[h];let _=c[h];_=Ge(_);const v=o.yc(m);if(_ instanceof Zg)l.push(m);else{const T=Gu(_,v);T!=null&&(l.push(m),u.set(m,T))}}const d=new ki(l);return new Vz(u,d,o.fieldTransforms)}function ame(t,e,n,r=!1){return Gu(n,t.Cc(r?4:3,e))}function Gu(t,e){if(zz(t=Ge(t)))return MP("Unsupported field value:",e,t),Hz(t,e);if(t instanceof Tf)return function(r,i){if(!jz(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Gu(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yhe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Gt.fromDate(r);return{timestampValue:__(i.serializer,s)}}if(r instanceof Gt){const s=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:__(i.serializer,s)}}if(r instanceof _o)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gi)return{bytesValue:cz(i.serializer,r._byteString)};if(r instanceof dn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof To)return function(o,a){return{mapValue:{fields:{[F6]:{stringValue:V6},[g_]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return cP(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${_C(r)}`)}(t,e)}function Hz(t,e){const n={};return P6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pl(t,(r,i)=>{const s=Gu(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zz(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof _o||t instanceof Gi||t instanceof dn||t instanceof Tf||t instanceof To)}function MP(t,e,n){if(!zz(n)||!x6(n)){const r=_C(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function YA(t,e,n){if((e=Ge(e))instanceof Xg)return e._internalPath;if(typeof e=="string")return DP(t,e);throw b_("Field path arguments must be of type string or ",t,!1,void 0,n)}const cme=new RegExp("[~\\*/\\[\\]]");function DP(t,e,n){if(e.search(cme)>=0)throw b_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xg(...e.split("."))._internalPath}catch{throw b_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function b_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ce(ne.INVALID_ARGUMENT,a+t+c)}function Wz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lme(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(LC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lme extends Kz{data(){return super.data()}}function LC(t,e){return typeof e=="string"?DP(t,e):e instanceof Xg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ce(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LP{}let FP=class extends LP{};function Ta(t,e,...n){let r=[];e instanceof LP&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof VP).length,a=s.filter(c=>c instanceof FC).length;if(o>1||o>0&&a>0)throw new Ce(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class FC extends FP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new FC(e,n,r)}_apply(e){const n=this._parse(e);return Gz(e._query,n),new Oa(e.firestore,e.converter,UA(e._query,n))}_parse(e){const n=Jg(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ce(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){J2(d,u);const _=[];for(const v of d)_.push(X2(c,s,v));h={arrayValue:{values:_}}}else h=X2(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||J2(d,u),h=ame(a,o,d,u==="in"||u==="not-in");return An.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yp(t,e,n){const r=e,i=LC("where",t);return FC._create(i,r,n)}class VP extends LP{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new VP(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)Gz(o,c),o=UA(o,c)}(e._query,n),new Oa(e.firestore,e.converter,UA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jP extends FP{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jP(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Ce(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ce(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eg(s,o)}(e._query,this._field,this._direction);return new Oa(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new wf(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Dh(t,e="asc"){const n=e,r=LC("orderBy",t);return jP._create(r,n)}class UP extends FP{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new UP(e,n,r)}_apply(e){return new Oa(e.firestore,e.converter,v_(e._query,this._limit,this._limitType))}}function ume(t){return UP._create("limit",t,"F")}function X2(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new Ce(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K6(e)&&n.indexOf("/")!==-1)throw new Ce(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Bt.fromString(n));if(!De.isDocumentKey(r))throw new Ce(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return f2(t,new De(r))}if(n instanceof dn)return f2(t,n._key);throw new Ce(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_C(n)}.`)}function J2(t,e){if(!Array.isArray(t)||t.length===0)throw new Ce(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gz(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ce(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dme{convertValue(e,n="none"){switch(Gc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[g_].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>gn(o.doubleValue));return new To(n)}convertGeoPoint(e){return new _o(gn(e.latitude),gn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=EC(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xm(e));default:return null}}convertTimestamp(e){const n=Kc(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Bt.fromString(e);At(pz(r),9688,{name:e});const i=new Jm(r.get(1),r.get(3)),s=new De(r.popFirst(5));return i.isEqual(n)||wa(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ep{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ou extends Kz{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(LC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ou._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ou._jsonSchemaVersion="firestore/documentSnapshot/1.0",ou._jsonSchema={type:kn("string",ou._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class Yv extends ou{data(e={}){return super.data(e)}}class au{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ep(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yv(this._firestore,this._userDataWriter,r.key,r,new Ep(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Yv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ep(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Yv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ep(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:hme(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hme(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){t=$r(t,dn);const e=$r(t.firestore,xo);return Zpe(Yg(e),t._key).then(n=>Qz(e,t,n))}au._jsonSchemaVersion="firestore/querySnapshot/1.0",au._jsonSchema={type:kn("string",au._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class BP extends dme{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function XA(t){t=$r(t,Oa);const e=$r(t.firestore,xo),n=Yg(e),r=new BP(e);return qz(t._query),eme(n,t._query).then(i=>new au(e,r,t,i))}function ng(t,e,n){t=$r(t,dn);const r=$r(t.firestore,xo),i=$P(t.converter,e,n);return ey(r,[RP(Jg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Br.none())])}function Vn(t,e,n,...r){t=$r(t,dn);const i=$r(t.firestore,xo),s=Jg(i);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Xg?Bz(s,"updateDoc",t._key,e,n,r):$z(s,"updateDoc",t._key,e),ey(i,[o.toMutation(t._key,Br.exists(!0))])}function Ro(t){return ey($r(t.firestore,xo),[new xC(t._key,Br.none())])}function Cf(t,e){const n=$r(t.firestore,xo),r=Ke(t),i=$P(t.converter,e);return ey(n,[RP(Jg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}function Co(t,...e){var c,l,u;t=Ge(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Y2(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Y2(e[r])){const d=e[r];e[r]=(c=d.next)==null?void 0:c.bind(d),e[r+1]=(l=d.error)==null?void 0:l.bind(d),e[r+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,o,a;if(t instanceof dn)o=$r(t.firestore,xo),a=SC(t._key.path),s={next:d=>{e[r]&&e[r](Qz(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=$r(t,Oa);o=$r(d.firestore,xo),a=d._query;const h=new BP(o);s={next:m=>{e[r]&&e[r](new au(o,h,d,m))},error:e[r+1],complete:e[r+2]},qz(t._query)}return function(h,m,_,v){const T=new xP(v),y=new IP(m,T,_);return h.asyncQueue.enqueueAndForget(async()=>EP(await S_(h),y)),()=>{T.Nu(),h.asyncQueue.enqueueAndForget(async()=>SP(await S_(h),y))}}(Yg(o),a,i,s)}function ey(t,e){return function(r,i){const s=new la;return r.asyncQueue.enqueueAndForget(async()=>$pe(await Jpe(r),i,s)),s.promise}(Yg(t),e)}function Qz(t,e,n){const r=n.docs.get(e._key),i=new BP(t);return new ou(t,i,e._key,r,new Ep(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fme{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jg(e)}set(e,n,r){this._verifyNotCommitted();const i=QS(e,this._firestore),s=$P(i.converter,n,r),o=RP(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Br.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=QS(e,this._firestore);let o;return o=typeof(n=Ge(n))=="string"||n instanceof Xg?Bz(this._dataReader,"WriteBatch.update",s._key,n,r,i):$z(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=QS(e,this._firestore);return this._mutations=this._mutations.concat(new xC(n._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function QS(t,e){if((t=Ge(t)).firestore!==e)throw new Ce(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(){return new Zg("deleteField")}function I_(){return new PP("serverTimestamp")}function Yz(...t){return new NP("arrayUnion",t)}function eDe(...t){return new OP("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t){return Yg(t=$r(t,xo)),new fme(t,e=>ey(t,e))}(function(e,n=!0){(function(i){gf=i})(hl),Wr(new Rr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new xo(new che(r.getProvider("auth-internal")),new dhe(o,r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ce(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jm(l.options.projectId,u)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xn(e2,t2,e),xn(e2,t2,"esm2020")})();var pme="firebase",mme="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(pme,mme,"app");function Xz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gme=Xz,Jz=new dl("auth","Firebase",Xz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new zg("@firebase/auth");function yme(t,...e){k_.logLevel<=ut.WARN&&k_.warn(`Auth (${hl}): ${t}`,...e)}function Xv(t,...e){k_.logLevel<=ut.ERROR&&k_.error(`Auth (${hl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw zP(t,...e)}function fi(t,...e){return zP(t,...e)}function HP(t,e,n){const r={...gme(),[e]:n};return new dl("auth","Firebase",r).create(e,{appName:t.name})}function Eo(t){return HP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&is(t,"argument-error"),HP(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zP(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jz.create(t,...e)}function Ae(t,e,...n){if(!t)throw zP(e,...n)}function ta(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xv(e),new Error(e)}function Ca(t,e){t||ta(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function e9(){return Z2()==="http:"||Z2()==="https:"}function Z2(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e9()||d6()||"connection"in navigator)?navigator.onLine:!0}function wme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ca(n>e,"Short delay should be less than long delay!"),this.isMobile=XR()||h6()}get(){return vme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t,e){Ca(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cme=new ty(3e4,6e4);function Qr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function yi(t,e,n,r,i={}){return n9(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Wu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l={method:e,headers:c,...s};return Mue()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ss(t.emulatorConfig.host)&&(l.credentials="include"),t9.fetch()(await r9(t,t.config.apiHost,n,a),l)})}async function n9(t,e,n){t._canInitEmulator=!1;const r={..._me,...e};try{const i=new Sme(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sp(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Sp(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Sp(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HP(t,u,l);is(t,u)}}catch(i){if(i instanceof ji)throw i;is(t,"network-request-failed",{message:String(i)})}}async function gl(t,e,n,r,i={}){const s=await yi(t,e,n,r,i);return"mfaPendingCredential"in s&&is(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function r9(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?WP(t.config,i):`${t.config.apiScheme}://${i}`;return Tme.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Eme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sme{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fi(this.auth,"network-request-failed")),Cme.get())})}}function Sp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fi(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){return t!==void 0&&t.getResponse!==void 0}function tF(t){return t!==void 0&&t.enterprise!==void 0}class i9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Eme(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bme(t){return(await yi(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function s9(t,e){return yi(t,"GET","/v2/recaptchaConfig",Qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ime(t,e){return yi(t,"POST","/v1/accounts:delete",e)}async function x_(t,e){return yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ame(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),i=KP(r);Ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xp(YS(i.auth_time)),issuedAtTime:Xp(YS(i.iat)),expirationTime:Xp(YS(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function YS(t){return Number(t)*1e3}function KP(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xv("JWT malformed, contained fewer than 3 sections"),null;try{const i=h_(n);return i?JSON.parse(i):(Xv("Failed to decode base64 JWT payload"),null)}catch(i){return Xv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nF(t){const e=KP(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ji&&kme(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kme({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xp(this.lastLoginAt),this.creationTime=Xp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R_(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Lh(t,x_(e,{idToken:n}));Ae(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?o9(i.providerUserInfo):[],o=Pme(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ZA(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,u)}async function Rme(t){const e=Ge(t);await R_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pme(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function o9(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nme(t,e){const n=await n9(t,{},async()=>{const r=Wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await r9(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&ss(t.emulatorConfig.host)&&(c.credentials="include"),t9.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ome(t,e){return yi(t,"POST","/v2/accounts:revokeToken",Qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=nF(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Nme(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xd;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xd,this.toJSON())}_performRefresh(){return ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new xme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ZA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Lh(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ame(this,e)}reload(){return Rme(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await R_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await Lh(this,Ime(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:m,providerData:_,stsTokenManager:v}=n;Ae(d&&v,e,"internal-error");const T=Xd.fromJSON(this.name,v);Ae(typeof d=="string",e,"internal-error"),Wa(r,e.name),Wa(i,e.name),Ae(typeof h=="boolean",e,"internal-error"),Ae(typeof m=="boolean",e,"internal-error"),Wa(s,e.name),Wa(o,e.name),Wa(a,e.name),Wa(c,e.name),Wa(l,e.name),Wa(u,e.name);const y=new bs({uid:d,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:T,createdAt:l,lastLoginAt:u});return _&&Array.isArray(_)&&(y.providerData=_.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xd;i.updateFromServerResponse(n);const s=new bs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await R_(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?o9(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Xd;a.updateFromIdToken(r);const c=new bs({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ZA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new Map;function na(t){Ca(t instanceof Function,"Expected a class definition");let e=rF.get(t);return e?(Ca(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rF.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}a9.type="NONE";const iF=a9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e,n){return`firebase:${t}:${e}:${n}`}class Jd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jv(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jv("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await x_(this.auth,{idToken:e}).catch(()=>{});return n?bs._fromGetAccountInfoResponse(this.auth,n,e):null}return bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Jd(na(iF),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||na(iF);const o=Jv(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){let d;if(typeof u=="string"){const h=await x_(e,{idToken:u}).catch(()=>{});if(!h)break;d=await bs._fromGetAccountInfoResponse(e,h,u)}else d=bs._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Jd(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Jd(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f9(e))return"Blackberry";if(p9(e))return"Webos";if(l9(e))return"Safari";if((e.includes("chrome/")||u9(e))&&!e.includes("edge/"))return"Chrome";if(h9(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c9(t=xr()){return/firefox\//i.test(t)}function l9(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u9(t=xr()){return/crios\//i.test(t)}function d9(t=xr()){return/iemobile/i.test(t)}function h9(t=xr()){return/android/i.test(t)}function f9(t=xr()){return/blackberry/i.test(t)}function p9(t=xr()){return/webos/i.test(t)}function qP(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Mme(t=xr()){var e;return qP(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Dme(){return Due()&&document.documentMode===10}function m9(t=xr()){return qP(t)||h9(t)||p9(t)||f9(t)||/windows phone/i.test(t)||d9(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t,e=[]){let n;switch(t){case"Browser":n=sF(xr());break;case"Worker":n=`${sF(xr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fme(t,e={}){return yi(t,"GET","/v2/passwordPolicy",Qr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vme=6;class jme{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Vme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ume{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oF(this),this.idTokenSubscription=new oF(this),this.beforeStateQueue=new Lme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=na(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Jd.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await x_(this,{idToken:e}),r=await bs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await R_(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(Eo(this));const n=e?Ge(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Fme(this),n=new jme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ome(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&na(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await Jd.create(this,[na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&yme(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function os(t){return Ge(t)}class oF{constructor(e){this.auth=e,this.observer=null,this.addObserver=zue(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ny={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $me(t){ny=t}function GP(t){return ny.loadJS(t)}function Bme(){return ny.recaptchaV2Script}function Hme(){return ny.recaptchaEnterpriseScript}function zme(){return ny.gapiScript}function y9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wme=500,Kme=6e4,hv=1e12;class qme{constructor(e){this.auth=e,this.counter=hv,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Yme(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||hv;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||hv;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||hv;return(r=this._widgets.get(n))==null||r.execute(),""}}class Gme{constructor(){this.enterprise=new Qme}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Qme{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Yme{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ae(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Xme(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Kme)},Wme))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Xme(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const Jme="recaptcha-enterprise",Jp="NO_RECAPTCHA";class v9{constructor(e){this.type=Jme,this.auth=os(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{s9(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new i9(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;tF(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Jp)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gme().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&tF(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Hme();c.length!==0&&(c+=a),GP(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function rp(t,e,n,r=!1,i=!1){const s=new v9(t);let o;if(i)o=Jp;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function cu(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await rp(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await rp(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await rp(t,e,n);return r(t,a).catch(async c=>{var l;if(((l=t._getRecaptchaConfig())==null?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await rp(t,e,n,!1,!0);return r(t,u)}return Promise.reject(c)})}else{const a=await rp(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function Zme(t){const e=os(t),n=await s9(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new i9(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new v9(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ege(t,e){const n=Us(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Fs(s,e??{}))return i;is(i,"already-initialized")}return n.initialize({options:e})}function tge(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nge(t,e,n){const r=os(t);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=w9(e),{host:o,port:a}=rge(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Fs(l,r.config.emulator)&&Fs(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ss(o)?(Bg(`${s}//${o}${c}`),Hg("Auth",!0)):ige()}function w9(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rge(t){const e=w9(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:aF(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:aF(o)}}}function aF(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ige(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ta("not implemented")}_getIdTokenResponse(e){return ta("not implemented")}_linkToIdToken(e,n){return ta("not implemented")}_getReauthenticationResolver(e){return ta("not implemented")}}async function sge(t,e){return yi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oge(t,e){return gl(t,"POST","/v1/accounts:signInWithPassword",Qr(t,e))}async function _9(t,e){return yi(t,"POST","/v1/accounts:sendOobCode",Qr(t,e))}async function age(t,e){return _9(t,e)}async function cge(t,e){return _9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lge(t,e){return gl(t,"POST","/v1/accounts:signInWithEmailLink",Qr(t,e))}async function uge(t,e){return gl(t,"POST","/v1/accounts:signInWithEmailLink",Qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends VC{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new rg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cu(e,n,"signInWithPassword",oge,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lge(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cu(e,r,"signUpPassword",sge,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uge(e,{idToken:n,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t,e){return gl(t,"POST","/v1/accounts:signInWithIdp",Qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dge="http://localhost";class Ea extends VC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Ea(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zd(e,n)}buildRequest(){const e={requestUri:dge,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF(t,e){return yi(t,"POST","/v1/accounts:sendVerificationCode",Qr(t,e))}async function hge(t,e){return gl(t,"POST","/v1/accounts:signInWithPhoneNumber",Qr(t,e))}async function fge(t,e){const n=await gl(t,"POST","/v1/accounts:signInWithPhoneNumber",Qr(t,e));if(n.temporaryProof)throw Sp(t,"account-exists-with-different-credential",n);return n}const pge={USER_NOT_FOUND:"user-not-found"};async function mge(t,e){const n={...e,operation:"REAUTH"};return gl(t,"POST","/v1/accounts:signInWithPhoneNumber",Qr(t,n),pge)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends VC{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Zp({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Zp({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return hge(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return fge(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return mge(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Zp({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gge(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yge(t){const e=vp(wp(t)).link,n=e?vp(wp(e)).deep_link_id:null,r=vp(wp(t)).deep_link_id;return(r?vp(wp(r)).link:null)||r||n||e||t}class QP{constructor(e){const n=vp(wp(e)),r=n.apiKey??null,i=n.oobCode??null,s=gge(n.mode??null);Ae(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=yge(e);try{return new QP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this.providerId=Ef.PROVIDER_ID}static credential(e,n){return rg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=QP.parseLink(n);return Ae(r,"argument-error"),rg._fromEmailAndCode(e,r.code,r.tenantId)}}Ef.PROVIDER_ID="password";Ef.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ef.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends jC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class eh extends Sf{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Ae("providerId"in n&&"signInMethod"in n,"argument-error"),Ea._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Ae(e.idToken||e.accessToken,"argument-error"),Ea._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return eh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return eh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new eh(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends Sf{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:rc.PROVIDER_ID,signInMethod:rc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rc.credentialFromTaggedObject(e)}static credentialFromError(e){return rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rc.credential(e.oauthAccessToken)}catch{return null}}}rc.FACEBOOK_SIGN_IN_METHOD="facebook.com";rc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Sf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ea._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Go.credential(n,r)}catch{return null}}}Go.GOOGLE_SIGN_IN_METHOD="google.com";Go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends Sf{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:ic.PROVIDER_ID,signInMethod:ic.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ic.credentialFromTaggedObject(e)}static credentialFromError(e){return ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ic.credential(e.oauthAccessToken)}catch{return null}}}ic.GITHUB_SIGN_IN_METHOD="github.com";ic.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Sf{constructor(){super("twitter.com")}static credential(e,n){return Ea._fromParams({providerId:sc.PROVIDER_ID,signInMethod:sc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sc.credentialFromTaggedObject(e)}static credentialFromError(e){return sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sc.credential(n,r)}catch{return null}}}sc.TWITTER_SIGN_IN_METHOD="twitter.com";sc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vge(t,e){return gl(t,"POST","/v1/accounts:signUp",Qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await bs._fromIdTokenResponse(e,r,i),o=lF(r);return new ku({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=lF(r);return new ku({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function lF(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends ji{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,P_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new P_(e,n,r,i)}}function T9(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?P_._fromErrorAndOperation(t,s,e,r):s})}async function wge(t,e,n=!1){const r=await Lh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ku._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ge(t,e,n=!1){const{auth:r}=t;if(ur(r.app))return Promise.reject(Eo(r));const i="reauthenticate";try{const s=await Lh(t,T9(r,i,e,t),n);Ae(s.idToken,r,"internal-error");const o=KP(s.idToken);Ae(o,r,"internal-error");const{sub:a}=o;return Ae(t.uid===a,r,"user-mismatch"),ku._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&is(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(t,e,n=!1){if(ur(t.app))return Promise.reject(Eo(t));const r="signIn",i=await T9(t,r,e),s=await ku._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function E9(t,e){return C9(os(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(t){const e=os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Tge(t,e,n){const r=os(t);await cu(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",cge,"EMAIL_PASSWORD_PROVIDER")}async function Cge(t,e,n){if(ur(t.app))return Promise.reject(Eo(t));const r=os(t),o=await cu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vge,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&S9(t),c}),a=await ku._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Ege(t,e,n){return ur(t.app)?Promise.reject(Eo(t)):E9(Ge(t),Ef.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&S9(t),r})}async function uF(t,e){const n=Ge(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await age(n.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sge(t,e){return yi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bge(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ge(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Lh(r,Sge(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Ige(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function Age(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function kge(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function xge(t){return Ge(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t,e){return yi(t,"POST","/v2/accounts/mfaEnrollment:start",Qr(t,e))}const N_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(N_,"1"),this.storage.removeItem(N_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rge=1e3,Pge=10;class I9 extends b9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m9(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Dme()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Pge):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Rge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I9.type="LOCAL";const Nge=I9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9 extends b9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}A9.type="SESSION";const k9=A9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oge(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new UC(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),c=await Oge(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}UC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=YP("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function Dge(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function Lge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fge(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Vge(){return XP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="firebaseLocalStorageDb",jge=1,O_="firebaseLocalStorage",R9="fbase_key";class ry{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $C(t,e){return t.transaction([O_],e?"readwrite":"readonly").objectStore(O_)}function Uge(){const t=indexedDB.deleteDatabase(x9);return new ry(t).toPromise()}function e0(){const t=indexedDB.open(x9,jge);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(O_,{keyPath:R9})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(O_)?e(r):(r.close(),await Uge(),e(await e0()))})})}async function hF(t,e,n){const r=$C(t,!0).put({[R9]:e,value:n});return new ry(r).toPromise()}async function $ge(t,e){const n=$C(t,!1).get(e),r=await new ry(n).toPromise();return r===void 0?null:r.value}function fF(t,e){const n=$C(t,!0).delete(e);return new ry(n).toPromise()}const Bge=800,Hge=3;class P9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Hge)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=UC._getInstance(Vge()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Lge(),!this.activeServiceWorker)return;this.sender=new Mge(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fge()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await e0();return await hF(e,N_,"1"),await fF(e,N_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hF(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$ge(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fF(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$C(i,!1).getAll();return new ry(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P9.type="LOCAL";const zge=P9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t,e){return yi(t,"POST","/v2/accounts/mfaSignIn:start",Qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=y9("rcb"),Wge=new ty(3e4,6e4);class Kge{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=bn().grecaptcha)!=null&&e.render)}load(e,n=""){return Ae(qge(n),e,"argument-error"),this.shouldResolveImmediately(n)&&eF(bn().grecaptcha)?Promise.resolve(bn().grecaptcha):new Promise((r,i)=>{const s=bn().setTimeout(()=>{i(fi(e,"network-request-failed"))},Wge.get());bn()[XS]=()=>{bn().clearTimeout(s),delete bn()[XS];const a=bn().grecaptcha;if(!a||!eF(a)){i(fi(e,"internal-error"));return}const c=a.render;a.render=(l,u)=>{const d=c(l,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${Bme()}?${Wu({onload:XS,render:"explicit",hl:n})}`;GP(o).catch(()=>{clearTimeout(s),i(fi(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=bn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qge(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Gge{async load(e){return new qme(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="recaptcha",Qge={theme:"light",type:"image"};class Yge{constructor(e,n,r={...Qge}){this.parameters=r,this.type=em,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=os(e),this.isInvisible=this.parameters.size==="invisible",Ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Ae(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gge:new Kge,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=bn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ae(e9()&&!XP(),this.auth,"internal-error"),await Xge(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await bme(this.auth);Ae(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Xge(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Zp._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Zge(t,e,n){if(ur(t.app))return Promise.reject(Eo(t));const r=os(t),i=await eye(r,e,Ge(n));return new Jge(i,s=>E9(r,s))}async function eye(t,e,n){var r;if(!t._getRecaptchaConfig())try{await Zme(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){Ae(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await cu(t,o,"mfaSmsEnrollment",async(u,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Jp){Ae((n==null?void 0:n.type)===em,u,"argument-error");const h=await JS(u,d,n);return dF(u,h)}return dF(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{Ae(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Ae(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await cu(t,a,"mfaSmsSignIn",async(d,h)=>{if(h.phoneSignInInfo.captchaResponse===Jp){Ae((n==null?void 0:n.type)===em,d,"argument-error");const m=await JS(d,h,n);return pF(d,m)}return pF(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await cu(t,s,"sendVerificationCode",async(l,u)=>{if(u.captchaResponse===Jp){Ae((n==null?void 0:n.type)===em,l,"argument-error");const d=await JS(l,u,n);return cF(l,d)}return cF(l,u)},"PHONE_PROVIDER").catch(l=>Promise.reject(l))).sessionInfo}}finally{n==null||n._reset()}}async function JS(t,e,n){Ae(n.type===em,t,"argument-error");const r=await n.verify();Ae(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e){return e?na(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP extends VC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tye(t){return C9(t.auth,new ZP(t),t.bypassAuthState)}function nye(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),_ge(n,new ZP(t),t.bypassAuthState)}async function rye(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),wge(n,new ZP(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tye;case"linkViaPopup":case"linkViaRedirect":return rye;case"reauthViaPopup":case"reauthViaRedirect":return nye;default:is(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iye=new ty(2e3,1e4);async function sye(t,e,n){if(ur(t.app))return Promise.reject(fi(t,"operation-not-supported-in-this-environment"));const r=os(t);Zz(t,e,jC);const i=JP(r,n);return new vc(r,"signInViaPopup",e,i).executeNotNull()}async function oye(t,e,n){const r=Ge(t);Zz(r.auth,e,jC);const i=JP(r.auth,n);return new vc(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class vc extends N9{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,vc.currentPopupAction&&vc.currentPopupAction.cancel(),vc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ca(this.filter.length===1,"Popup operations only handle one event");const e=YP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iye.get())};e()}}vc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aye="pendingRedirect",Zv=new Map;class cye extends N9{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zv.get(this.auth._key());if(!e){try{const r=await lye(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zv.set(this.auth._key(),e)}return this.bypassAuthState||Zv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lye(t,e){const n=hye(e),r=dye(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function uye(t,e){Zv.set(t._key(),e)}function dye(t){return na(t._redirectPersistence)}function hye(t){return Jv(aye,t.config.apiKey,t.name)}async function fye(t,e,n=!1){if(ur(t.app))return Promise.reject(Eo(t));const r=os(t),i=JP(r,e),o=await new cye(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pye=10*60*1e3;class mye{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gye(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!O9(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pye&&this.cachedEventUids.clear(),this.cachedEventUids.has(mF(e))}saveEventToCache(e){this.cachedEventUids.add(mF(e)),this.lastProcessedEventTime=Date.now()}}function mF(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function O9({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gye(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O9(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yye(t,e={}){return yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vye=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wye=/^https?/;async function _ye(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yye(t);for(const n of e)try{if(Tye(n))return}catch{}is(t,"unauthorized-domain")}function Tye(t){const e=JA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wye.test(n))return!1;if(vye.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cye=new ty(3e4,6e4);function gF(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Eye(t){return new Promise((e,n)=>{var i,s,o;function r(){gF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gF(),n(fi(t,"network-request-failed"))},timeout:Cye.get()})}if((s=(i=bn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=bn().gapi)!=null&&o.load)r();else{const a=y9("iframefcb");return bn()[a]=()=>{gapi.load?r():n(fi(t,"network-request-failed"))},GP(`${zme()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ew=null,e})}let ew=null;function Sye(t){return ew=ew||Eye(t),ew}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye=new ty(5e3,15e3),Iye="__/auth/iframe",Aye="emulator/auth/iframe",kye={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rye(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?WP(e,Aye):`https://${t.config.authDomain}/${Iye}`,r={apiKey:e.apiKey,appName:t.name,v:hl},i=xye.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Wu(r).slice(1)}`}async function Pye(t){const e=await Sye(t),n=bn().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:Rye(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kye,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=fi(t,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},bye.get());function c(){bn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nye={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Oye=500,Mye=600,Dye="_blank",Lye="http://localhost";class yF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fye(t,e,n,r=Oye,i=Mye){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...Nye,width:r.toString(),height:i.toString(),top:s,left:o},l=xr().toLowerCase();n&&(a=u9(l)?Dye:n),c9(l)&&(e=e||Lye,c.scrollbars="yes");const u=Object.entries(c).reduce((h,[m,_])=>`${h}${m}=${_},`,"");if(Mme(l)&&a!=="_self")return Vye(e||"",a),new yF(null);const d=window.open(e||"",a,u);Ae(d,t,"popup-blocked");try{d.focus()}catch{}return new yF(d)}function Vye(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jye="__/auth/handler",Uye="emulator/auth/handler",$ye=encodeURIComponent("fac");async function vF(t,e,n,r,i,s){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hl,eventId:i};if(e instanceof jC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Sf){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${$ye}=${encodeURIComponent(c)}`:"";return`${Bye(t)}?${Wu(a).slice(1)}${l}`}function Bye({config:t}){return t.emulator?WP(t,Uye):`https://${t.authDomain}/${jye}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="webStorageSupport";class Hye{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k9,this._completeRedirectFn=fye,this._overrideRedirectResult=uye}async _openPopup(e,n,r,i){var o;Ca((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await vF(e,n,r,JA(),i);return Fye(e,s,YP())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await vF(e,n,r,JA(),i);return Dge(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ca(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Pye(e),r=new mye(e);return n.register("authEvent",i=>(Ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ZS,{type:ZS},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[ZS];s!==void 0&&n(!!s),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_ye(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m9()||l9()||qP()}}const zye=Hye;var wF="@firebase/auth",_F="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kye(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qye(t){Wr(new Rr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g9(t)},l=new Ume(r,i,s,c);return tge(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wr(new Rr("auth-internal",e=>{const n=os(e.getProvider("auth").getImmediate());return(r=>new Wye(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(wF,_F,Kye(t)),xn(wF,_F,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gye=5*60,Qye=u6("authIdTokenMaxAge")||Gye;let TF=null;const Yye=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Qye)return;const i=n==null?void 0:n.token;TF!==i&&(TF=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xye(t=fl()){const e=Us(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ege(t,{popupRedirectResolver:zye,persistence:[zge,Nge,k9]}),r=u6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Yye(s.toString());Age(n,o,()=>o(n.currentUser)),Ige(n,a=>o(a))}}const i=c6("auth");return i&&nge(n,`http://${i}`),n}function Jye(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}$me({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=fi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Jye().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qye("Browser");var CF={};const EF="@firebase/database",SF="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M9="";function Zye(t){M9=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:qm(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tve{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new eve(e)}}catch{}return new tve},ql=D9("localStorage"),nve=D9("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new zg("@firebase/database"),rve=function(){let t=1;return function(){return t++}}(),L9=function(t){const e=que(t),n=new Hue;n.update(e);const r=n.digest();return QR.encodeByteArray(r)},iy=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=iy.apply(null,r):typeof r=="object"?e+=tr(r):e+=r,e+=" "}return e};let tm=null,bF=!0;const ive=function(t,e){de(!0,"Can't turn on custom loggers persistently."),th.logLevel=ut.VERBOSE,tm=th.log.bind(th)},cr=function(...t){if(bF===!0&&(bF=!1,tm===null&&nve.get("logging_enabled")===!0&&ive()),tm){const e=iy.apply(null,t);tm(e)}},sy=function(t){return function(...e){cr(t,...e)}},t0=function(...t){const e="FIREBASE INTERNAL ERROR: "+iy(...t);th.error(e)},Sa=function(...t){const e=`FIREBASE FATAL ERROR: ${iy(...t)}`;throw th.error(e),new Error(e)},Hr=function(...t){const e="FIREBASE WARNING: "+iy(...t);th.warn(e)},sve=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Hr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ove=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xu="[MIN_NAME]",Xc="[MAX_NAME]",Qu=function(t,e){if(t===e)return 0;if(t===xu||e===Xc)return-1;if(e===xu||t===Xc)return 1;{const n=IF(t),r=IF(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},ave=function(t,e){return t===e?0:t<e?-1:1},ip=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+tr(e))},tN=function(t){if(typeof t!="object"||t===null)return tr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=tr(e[r]),n+=":",n+=tN(t[e[r]]);return n+="}",n},F9=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function gr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const V9=function(t){de(!eN(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},cve=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lve=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function uve(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const dve=new RegExp("^-?(0*)\\d{1,10}$"),hve=-2147483648,fve=2147483647,IF=function(t){if(dve.test(t)){const e=Number(t);if(e>=hve&&e<=fve)return e}return null},bf=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Hr("Exception was thrown by user callback.",n),e},Math.floor(0))}},pve=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nm=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ur(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Hr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gve{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hr(e)}}class tw{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tw.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="5",j9="v",U9="s",$9="r",B9="f",H9=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,z9="ls",W9="p",n0="ac",K9="websocket",q9="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ql.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ql.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function yve(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Q9(t,e,n){de(typeof e=="string","typeof type must == string"),de(typeof n=="object","typeof params must == object");let r;if(e===K9)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===q9)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);yve(t)&&(n.ns=t.namespace);const i=[];return gr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vve{constructor(){this.counters_={}}incrementCounter(e,n=1){Mo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return bue(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={},tb={};function rN(t){const e=t.toString();return eb[e]||(eb[e]=new vve),eb[e]}function wve(t,e){const n=t.toString();return tb[n]||(tb[n]=e()),tb[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ve{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&bf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="start",Tve="close",Cve="pLPCommand",Eve="pRTLPCB",Y9="id",X9="pw",J9="ser",Sve="cb",bve="seg",Ive="ts",Ave="d",kve="dframe",Z9=1870,eW=30,xve=Z9-eW,Rve=25e3,Pve=3e4;class Od{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sy(e),this.stats_=rN(n),this.urlFn=c=>(this.appCheckToken&&(c[n0]=this.appCheckToken),Q9(n,q9,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new _ve(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Pve)),ove(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iN((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===AF)this.id=a,this.password=c;else if(o===Tve)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[AF]="t",r[J9]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Sve]=this.scriptTagHolder.uniqueCallbackIdentifier),r[j9]=nN,this.transportSessionId&&(r[U9]=this.transportSessionId),this.lastSessionId&&(r[z9]=this.lastSessionId),this.applicationId&&(r[W9]=this.applicationId),this.appCheckToken&&(r[n0]=this.appCheckToken),typeof location<"u"&&location.hostname&&H9.test(location.hostname)&&(r[$9]=B9);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Od.forceAllow_=!0}static forceDisallow(){Od.forceDisallow_=!0}static isAvailable(){return Od.forceAllow_?!0:!Od.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cve()&&!lve()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=tr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=o6(n),i=F9(r,xve);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[kve]="t",r[Y9]=e,r[X9]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=tr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class iN{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=rve(),window[Cve+this.uniqueCallbackIdentifier]=e,window[Eve+this.uniqueCallbackIdentifier]=n,this.myIFrame=iN.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){cr("frame writing exception"),a.stack&&cr(a.stack),cr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Y9]=this.myID,e[X9]=this.myPW,e[J9]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eW+r.length<=Z9;){const o=this.pendingSegs.shift();r=r+"&"+bve+i+"="+o.seg+"&"+Ive+i+"="+o.ts+"&"+Ave+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Rve)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{cr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nve=16384,Ove=45e3;let M_=null;typeof MozWebSocket<"u"?M_=MozWebSocket:typeof WebSocket<"u"&&(M_=WebSocket);class Ts{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sy(this.connId),this.stats_=rN(n),this.connURL=Ts.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[j9]=nN,typeof location<"u"&&location.hostname&&H9.test(location.hostname)&&(o[$9]=B9),n&&(o[U9]=n),r&&(o[z9]=r),i&&(o[n0]=i),s&&(o[W9]=s),Q9(e,K9,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ql.set("previous_websocket_failure",!0);try{let r;Lue(),this.mySock=new M_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ts.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&M_!==null&&!Ts.forceDisallow_}static previouslyFailed(){return ql.isInMemoryStorage||ql.get("previous_websocket_failure")===!0}markConnectionHealthy(){ql.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=qm(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(de(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=tr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F9(n,Nve);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ove))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ts.responsesRequiredToBeHealthy=2;Ts.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{static get ALL_TRANSPORTS(){return[Od,Ts]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ts&&Ts.isAvailable();let r=n&&!Ts.previouslyFailed();if(e.webSocketOnly&&(n||Hr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ts];else{const i=this.transports_=[];for(const s of ig.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);ig.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ig.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mve=6e4,Dve=5e3,Lve=10*1024,Fve=100*1024,nb="t",kF="d",Vve="s",xF="r",jve="e",RF="o",PF="a",NF="n",OF="p",Uve="h";class $ve{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sy("c:"+this.id+":"),this.transportManager_=new ig(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=nm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Fve?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Lve?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(nb in e){const n=e[nb];n===PF?this.upgradeIfSecondaryHealthy_():n===xF?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===RF&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ip("t",e),r=ip("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:OF,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:PF,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:NF,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ip("t",e),r=ip("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ip(nb,e);if(kF in e){const r=e[kF];if(n===Uve){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===NF){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Vve?this.onConnectionShutdown_(r):n===xF?this.onReset_(r):n===jve?t0("Server Error: "+r):n===RF?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):t0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),nN!==r&&Hr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),nm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Mve))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Dve))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:OF,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ql.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e){this.allowedEvents_=e,this.listeners_={},de(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){de(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_ extends nW{static getInstance(){return new D_}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!XR()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return de(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=32,DF=768;class Pt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function St(){return new Pt("")}function ot(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jc(t){return t.pieces_.length-t.pieceNum_}function $t(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Pt(t.pieces_,e)}function sN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Bve(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function sg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Pt(e,0)}function un(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Pt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Pt(n,0)}function at(t){return t.pieceNum_>=t.pieces_.length}function si(t,e){const n=ot(t),r=ot(e);if(n===null)return e;if(n===r)return si($t(t),$t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Hve(t,e){const n=sg(t,0),r=sg(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Qu(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function oN(t,e){if(Jc(t)!==Jc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Yi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Jc(t)>Jc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class zve{constructor(e,n){this.errorPrefix_=n,this.parts_=sg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vC(this.parts_[r]);iW(this)}}function Wve(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vC(e),iW(t)}function Kve(t){const e=t.parts_.pop();t.byteLength_-=vC(e),t.parts_.length>0&&(t.byteLength_-=1)}function iW(t){if(t.byteLength_>DF)throw new Error(t.errorPrefix_+"has a key path longer than "+DF+" bytes ("+t.byteLength_+").");if(t.parts_.length>MF)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MF+") or object contains a cycle "+Rl(t))}function Rl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN extends nW{static getInstance(){return new aN}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return de(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=1e3,qve=60*5*1e3,LF=30*1e3,Gve=1.3,Qve=3e4,Yve="server_kill",FF=3;class ua extends tW{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=ua.nextPersistentConnectionId_++,this.log_=sy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sp,this.maxReconnectDelay_=qve,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aN.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&D_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(tr(s)),de(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new $g,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),de(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;ua.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Mo(e,"w")){const r=Ih(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Hr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Bue(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=LF)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$ue(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):t0("Unrecognized action received from server: "+tr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){de(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sp,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=sp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Qve&&(this.reconnectDelay_=sp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Gve)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ua.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){de(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new $ve(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Hr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Yve)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Hr(d),c())}}}interrupt(e){cr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],AA(this.interruptReasons_)&&(this.reconnectDelay_=sp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>tN(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Pt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){cr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=FF&&(this.reconnectDelay_=LF,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){cr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=FF&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+M9.replace(/\./g,"-")]=1,XR()?e["framework.cordova"]=1:h6()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=D_.getInstance().currentlyOnline();return AA(this.interruptReasons_)&&e}}ua.nextPersistentConnectionId_=0;ua.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ct(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ct(xu,e),i=new ct(xu,n);return this.compare(r,i)!==0}minPost(){return ct.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv;class sW extends BC{static get __EMPTY_NODE(){return fv}static set __EMPTY_NODE(e){fv=e}compare(e,n){return Qu(e.name,n.name)}isDefinedOn(e){throw mf("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ct.MIN}maxPost(){return new ct(Xc,fv)}makePost(e,n){return de(typeof e=="string","KeyIndex indexValue must always be a string."),new ct(e,fv)}toString(){return".key"}}const lu=new sW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Zn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Zn.RED,this.left=i??oi.EMPTY_NODE,this.right=s??oi.EMPTY_NODE}copy(e,n,r,i,s){return new Zn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return oi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return oi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Zn.RED=!0;Zn.BLACK=!1;class Xve{copy(e,n,r,i,s){return this}insert(e,n,r){return new Zn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class oi{constructor(e,n=oi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new oi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Zn.BLACK,null,null))}remove(e){return new oi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new pv(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new pv(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new pv(this.root_,null,this.comparator_,!0,e)}}oi.EMPTY_NODE=new Xve;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jve(t,e){return Qu(t.name,e.name)}function cN(t,e){return Qu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r0;function Zve(t){r0=t}const oW=function(t){return typeof t=="number"?"number:"+V9(t):"string:"+t},aW=function(t){if(t.isLeafNode()){const e=t.val();de(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mo(e,".sv"),"Priority must be a string or number.")}else de(t===r0||t.isEmpty(),"priority of unexpected type.");de(t===r0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VF;class Qn{static set __childrenNodeConstructor(e){VF=e}static get __childrenNodeConstructor(){return VF}constructor(e,n=Qn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,de(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aW(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return at(e)?this:ot(e)===".priority"?this.priorityNode_:Qn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ot(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(de(r!==".priority"||Jc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Qn.__childrenNodeConstructor.EMPTY_NODE.updateChild($t(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oW(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=V9(this.value_):e+=this.value_,this.lazyHash_=L9(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qn.__childrenNodeConstructor?-1:(de(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Qn.VALUE_TYPE_ORDER.indexOf(n),s=Qn.VALUE_TYPE_ORDER.indexOf(r);return de(i>=0,"Unknown leaf type: "+n),de(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cW,lW;function ewe(t){cW=t}function twe(t){lW=t}class nwe extends BC{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Qu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ct.MIN}maxPost(){return new ct(Xc,new Qn("[PRIORITY-POST]",lW))}makePost(e,n){const r=cW(e);return new ct(n,new Qn("[PRIORITY-POST]",r))}toString(){return".priority"}}const tn=new nwe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rwe=Math.log(2);class iwe{constructor(e){const n=s=>parseInt(Math.log(s)/rwe,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const L_=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Zn(h,d.node,Zn.BLACK,null,null);{const m=parseInt(u/2,10)+c,_=i(c,m),v=i(m+1,l);return d=t[m],h=n?n(d):d,new Zn(h,d.node,Zn.BLACK,_,v)}},s=function(c){let l=null,u=null,d=t.length;const h=function(_,v){const T=d-_,y=d;d-=_;const w=i(T+1,y),C=t[T],b=n?n(C):C;m(new Zn(b,C.node,v,null,w))},m=function(_){l?(l.left=_,l=_):(u=_,l=_)};for(let _=0;_<c.count;++_){const v=c.nextBitIsOne(),T=Math.pow(2,c.count-(_+1));v?h(T,Zn.BLACK):(h(T,Zn.BLACK),h(T,Zn.RED))}return u},o=new iwe(t.length),a=s(o);return new oi(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rb;const sd={};class ra{static get Default(){return de(sd&&tn,"ChildrenNode.ts has not been loaded"),rb=rb||new ra({".priority":sd},{".priority":tn}),rb}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ih(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof oi?n:null}hasIndex(e){return Mo(this.indexSet_,e.toString())}addIndex(e,n){de(e!==lu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ct.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=L_(r,e.getCompare()):a=sd;const c=e.toString(),l={...this.indexSet_};l[c]=e;const u={...this.indexes_};return u[c]=a,new ra(u,l)}addToIndexes(e,n){const r=f_(this.indexes_,(i,s)=>{const o=Ih(this.indexSet_,s);if(de(o,"Missing index implementation for "+s),i===sd)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ct.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),L_(a,o.getCompare())}else return sd;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new ct(e.name,a))),c.insert(e,e.node)}});return new ra(r,this.indexSet_)}removeFromIndexes(e,n){const r=f_(this.indexes_,i=>{if(i===sd)return i;{const s=n.get(e.name);return s?i.remove(new ct(e.name,s)):i}});return new ra(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op;class qe{static get EMPTY_NODE(){return op||(op=new qe(new oi(cN),null,ra.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aW(this.priorityNode_),this.children_.isEmpty()&&de(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||op}updatePriority(e){return this.children_.isEmpty()?this:new qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?op:n}}getChild(e){const n=ot(e);return n===null?this:this.getImmediateChild(n).getChild($t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(de(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ct(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?op:this.priorityNode_;return new qe(i,o,s)}}updateChild(e,n){const r=ot(e);if(r===null)return n;{de(ot(e)!==".priority"||Jc(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild($t(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(tn,(o,a)=>{n[o]=a.val(e),r++,s&&qe.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oW(this.getPriority().val())+":"),this.forEachChild(tn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":L9(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ct(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ct(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ct(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ct.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ct.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oy?-1:0}withIndex(e){if(e===lu||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new qe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===lu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(tn),i=n.getIterator(tn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===lu?null:this.indexMap_.get(e.toString())}}qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class swe extends qe{constructor(){super(new oi(cN),qe.EMPTY_NODE,ra.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}}const oy=new swe;Object.defineProperties(ct,{MIN:{value:new ct(xu,qe.EMPTY_NODE)},MAX:{value:new ct(Xc,oy)}});sW.__EMPTY_NODE=qe.EMPTY_NODE;Qn.__childrenNodeConstructor=qe;Zve(oy);twe(oy);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const owe=!0;function er(t,e=null){if(t===null)return qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),de(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qn(n,er(e))}if(!(t instanceof Array)&&owe){const n=[];let r=!1;if(gr(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=er(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ct(o,c)))}}),n.length===0)return qe.EMPTY_NODE;const s=L_(n,Jve,o=>o.name,cN);if(r){const o=L_(n,tn.getCompare());return new qe(s,er(e),new ra({".priority":o},{".priority":tn}))}else return new qe(s,er(e),ra.Default)}else{let n=qe.EMPTY_NODE;return gr(t,(r,i)=>{if(Mo(t,r)&&r.substring(0,1)!=="."){const s=er(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(er(e))}}ewe(er);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN extends BC{constructor(e){super(),this.indexPath_=e,de(!at(e)&&ot(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Qu(e.name,n.name):s}makePost(e,n){const r=er(e),i=qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new ct(n,i)}maxPost(){const e=qe.EMPTY_NODE.updateChild(this.indexPath_,oy);return new ct(Xc,e)}toString(){return sg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class awe extends BC{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Qu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ct.MIN}maxPost(){return ct.MAX}makePost(e,n){const r=er(e);return new ct(n,r)}toString(){return".value"}}const uW=new awe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(t){return{type:"value",snapshotNode:t}}function Fh(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function og(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ag(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function cwe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){de(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(og(n,a)):de(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Fh(n,r)):o.trackChildChange(ag(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tn,(i,s)=>{n.hasChild(i)||r.trackChildChange(og(i,s))}),n.isLeafNode()||n.forEachChild(tn,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ag(i,s,o))}else r.trackChildChange(Fh(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?qe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.indexedFilter_=new uN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=cg.getStartPost_(e),this.endPost_=cg.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ct(n,r))||(r=qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=qe.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(qe.EMPTY_NODE);const s=this;return n.forEachChild(tn,(o,a)=>{s.matches(new ct(o,a))||(i=i.updateImmediateChild(o,qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lwe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new cg(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ct(n,r))||(r=qe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=qe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(qe.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,m)=>d(m,h)}else o=this.index_.getCompare();const a=e;de(a.numChildren()===this.limit_,"");const c=new ct(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const m=h==null?1:o(h,c);if(u&&!r.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(ag(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(og(n,d));const v=a.updateImmediateChild(n,qe.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Fh(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(og(l.name,l.node)),s.trackChildChange(Fh(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,qe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return de(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return de(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xu}hasEnd(){return this.endSet_}getIndexEndValue(){return de(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return de(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return de(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tn}copy(){const e=new dN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uwe(t){return t.loadsAllData()?new uN(t.getIndex()):t.hasLimit()?new lwe(t):new cg(t)}function dwe(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function hwe(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function fwe(t,e){const n=t.copy();return n.index_=e,n}function jF(t){const e={};if(t.isDefault())return e;let n;if(t.index_===tn?n="$priority":t.index_===uW?n="$value":t.index_===lu?n="$key":(de(t.index_ instanceof lN,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=tr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=tr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+tr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=tr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+tr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function UF(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends tW{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(de(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=sy("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=F_.getListenId_(e,r),a={};this.listens_[o]=a;const c=jF(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Ih(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){const r=F_.getListenId_(e,n);delete this.listens_[r]}get(e){const n=jF(e._queryParams),r=e._path.toString(),i=new $g;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Wu(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=qm(a.responseText)}catch{Hr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Hr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return{value:null,children:new Map}}function hW(t,e,n){if(at(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ot(e);t.children.has(r)||t.children.set(r,V_());const i=t.children.get(r);e=$t(e),hW(i,e,n)}}function i0(t,e,n){t.value!==null?n(e,t.value):mwe(t,(r,i)=>{const s=new Pt(e.toString()+"/"+r);i0(i,s,n)})}function mwe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gwe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&gr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=10*1e3,ywe=30*1e3,vwe=5*60*1e3;class wwe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new gwe(e);const r=$F+(ywe-$F)*Math.random();nm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;gr(e,(i,s)=>{s>0&&Mo(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),nm(this.reportStats_.bind(this),Math.floor(Math.random()*2*vwe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Is;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Is||(Is={}));function hN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Is.ACK_USER_WRITE,this.source=hN()}operationForChild(e){if(at(this.path)){if(this.affectedTree.value!=null)return de(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Pt(e));return new j_(St(),n,this.revert)}}else return de(ot(this.path)===e,"operationForChild called for unrelated child."),new j_($t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){this.source=e,this.path=n,this.type=Is.LISTEN_COMPLETE}operationForChild(e){return at(this.path)?new lg(this.source,St()):new lg(this.source,$t(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Is.OVERWRITE}operationForChild(e){return at(this.path)?new Ru(this.source,St(),this.snap.getImmediateChild(e)):new Ru(this.source,$t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Is.MERGE}operationForChild(e){if(at(this.path)){const n=this.children.subtree(new Pt(e));return n.isEmpty()?null:n.value?new Ru(this.source,St(),n.value):new Vh(this.source,St(),n)}else return de(ot(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vh(this.source,$t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(at(e))return this.isFullyInitialized()&&!this.filtered_;const n=ot(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _we{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Twe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(cwe(o.childName,o.snapshotNode))}),ap(t,i,"child_removed",e,r,n),ap(t,i,"child_added",e,r,n),ap(t,i,"child_moved",s,r,n),ap(t,i,"child_changed",e,r,n),ap(t,i,"value",e,r,n),i}function ap(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Ewe(t,a,c)),o.forEach(a=>{const c=Cwe(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Cwe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ewe(t,e,n){if(e.childName==null||n.childName==null)throw mf("Should only compare child_ events.");const r=new ct(e.childName,e.snapshotNode),i=new ct(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e){return{eventCache:t,serverCache:e}}function rm(t,e,n,r){return HC(new Pu(e,n,r),t.serverCache)}function fW(t,e,n,r){return HC(t.eventCache,new Pu(e,n,r))}function s0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Nu(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ib;const Swe=()=>(ib||(ib=new oi(ave)),ib);class Ut{static fromObject(e){let n=new Ut(null);return gr(e,(r,i)=>{n=n.set(new Pt(r),i)}),n}constructor(e,n=Swe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:St(),value:this.value};if(at(e))return null;{const r=ot(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue($t(e),n);return s!=null?{path:un(new Pt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(at(e))return this;{const n=ot(e),r=this.children.get(n);return r!==null?r.subtree($t(e)):new Ut(null)}}set(e,n){if(at(e))return new Ut(n,this.children);{const r=ot(e),s=(this.children.get(r)||new Ut(null)).set($t(e),n),o=this.children.insert(r,s);return new Ut(this.value,o)}}remove(e){if(at(e))return this.children.isEmpty()?new Ut(null):new Ut(null,this.children);{const n=ot(e),r=this.children.get(n);if(r){const i=r.remove($t(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ut(null):new Ut(this.value,s)}else return this}}get(e){if(at(e))return this.value;{const n=ot(e),r=this.children.get(n);return r?r.get($t(e)):null}}setTree(e,n){if(at(e))return n;{const r=ot(e),s=(this.children.get(r)||new Ut(null)).setTree($t(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ut(this.value,o)}}fold(e){return this.fold_(St(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(un(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,St(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(at(e))return null;{const s=ot(e),o=this.children.get(s);return o?o.findOnPath_($t(e),un(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,St(),n)}foreachOnPath_(e,n,r){if(at(e))return this;{this.value&&r(n,this.value);const i=ot(e),s=this.children.get(i);return s?s.foreachOnPath_($t(e),un(n,i),r):new Ut(null)}}foreach(e){this.foreach_(St(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(un(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.writeTree_=e}static empty(){return new Rs(new Ut(null))}}function im(t,e,n){if(at(e))return new Rs(new Ut(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=si(i,e);return s=s.updateChild(o,n),new Rs(t.writeTree_.set(i,s))}else{const i=new Ut(n),s=t.writeTree_.setTree(e,i);return new Rs(s)}}}function o0(t,e,n){let r=t;return gr(n,(i,s)=>{r=im(r,un(e,i),s)}),r}function BF(t,e){if(at(e))return Rs.empty();{const n=t.writeTree_.setTree(e,new Ut(null));return new Rs(n)}}function a0(t,e){return Yu(t,e)!=null}function Yu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(si(n.path,e)):null}function HF(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tn,(r,i)=>{e.push(new ct(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ct(r,i.value))}),e}function Fc(t,e){if(at(e))return t;{const n=Yu(t,e);return n!=null?new Rs(new Ut(n)):new Rs(t.writeTree_.subtree(e))}}function c0(t){return t.writeTree_.isEmpty()}function jh(t,e){return pW(St(),t.writeTree_,e)}function pW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(de(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=pW(un(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(un(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e){return vW(e,t)}function bwe(t,e,n,r,i){de(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=im(t.visibleWrites,e,n)),t.lastWriteId=r}function Iwe(t,e,n,r){de(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=o0(t.visibleWrites,e,n),t.lastWriteId=r}function Awe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function kwe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);de(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&xwe(a,r.path)?i=!1:Yi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Rwe(t),!0;if(r.snap)t.visibleWrites=BF(t.visibleWrites,r.path);else{const a=r.children;gr(a,c=>{t.visibleWrites=BF(t.visibleWrites,un(r.path,c))})}return!0}else return!1}function xwe(t,e){if(t.snap)return Yi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Yi(un(t.path,n),e))return!0;return!1}function Rwe(t){t.visibleWrites=mW(t.allWrites,Pwe,St()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Pwe(t){return t.visible}function mW(t,e,n){let r=Rs.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Yi(n,o)?(a=si(n,o),r=im(r,a,s.snap)):Yi(o,n)&&(a=si(o,n),r=im(r,St(),s.snap.getChild(a)));else if(s.children){if(Yi(n,o))a=si(n,o),r=o0(r,a,s.children);else if(Yi(o,n))if(a=si(o,n),at(a))r=o0(r,St(),s.children);else{const c=Ih(s.children,ot(a));if(c){const l=c.getChild($t(a));r=im(r,St(),l)}}}else throw mf("WriteRecord should have .snap or .children")}}return r}function gW(t,e,n,r,i){if(!r&&!i){const s=Yu(t.visibleWrites,e);if(s!=null)return s;{const o=Fc(t.visibleWrites,e);if(c0(o))return n;if(n==null&&!a0(o,St()))return null;{const a=n||qe.EMPTY_NODE;return jh(o,a)}}}else{const s=Fc(t.visibleWrites,e);if(!i&&c0(s))return n;if(!i&&n==null&&!a0(s,St()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Yi(l.path,e)||Yi(e,l.path))},a=mW(t.allWrites,o,e),c=n||qe.EMPTY_NODE;return jh(a,c)}}}function Nwe(t,e,n){let r=qe.EMPTY_NODE;const i=Yu(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Fc(t.visibleWrites,e);return n.forEachChild(tn,(o,a)=>{const c=jh(Fc(s,new Pt(o)),a);r=r.updateImmediateChild(o,c)}),HF(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Fc(t.visibleWrites,e);return HF(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Owe(t,e,n,r,i){de(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=un(e,n);if(a0(t.visibleWrites,s))return null;{const o=Fc(t.visibleWrites,s);return c0(o)?i.getChild(n):jh(o,i.getChild(n))}}function Mwe(t,e,n,r){const i=un(e,n),s=Yu(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Fc(t.visibleWrites,i);return jh(o,r.getNode().getImmediateChild(n))}else return null}function Dwe(t,e){return Yu(t.visibleWrites,e)}function Lwe(t,e,n,r,i,s,o){let a;const c=Fc(t.visibleWrites,e),l=Yu(c,St());if(l!=null)a=l;else if(n!=null)a=jh(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=h.getNext();for(;m&&u.length<i;)d(m,r)!==0&&u.push(m),m=h.getNext();return u}else return[]}function Fwe(){return{visibleWrites:Rs.empty(),allWrites:[],lastWriteId:-1}}function U_(t,e,n,r){return gW(t.writeTree,t.treePath,e,n,r)}function gN(t,e){return Nwe(t.writeTree,t.treePath,e)}function zF(t,e,n,r){return Owe(t.writeTree,t.treePath,e,n,r)}function $_(t,e){return Dwe(t.writeTree,un(t.treePath,e))}function Vwe(t,e,n,r,i,s){return Lwe(t.writeTree,t.treePath,e,n,r,i,s)}function yN(t,e,n){return Mwe(t.writeTree,t.treePath,e,n)}function yW(t,e){return vW(un(t.treePath,e),t.writeTree)}function vW(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jwe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;de(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),de(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ag(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,og(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Fh(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ag(r,e.snapshotNode,i.oldSnap));else throw mf("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uwe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const wW=new Uwe;class vN{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Pu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yN(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Nu(this.viewCache_),s=Vwe(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $we(t){return{filter:t}}function Bwe(t,e){de(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),de(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Hwe(t,e,n,r,i){const s=new jwe;let o,a;if(n.type===Is.OVERWRITE){const l=n;l.source.fromUser?o=l0(t,e,l.path,l.snap,r,i,s):(de(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!at(l.path),o=B_(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Is.MERGE){const l=n;l.source.fromUser?o=Wwe(t,e,l.path,l.children,r,i,s):(de(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=u0(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Is.ACK_USER_WRITE){const l=n;l.revert?o=Gwe(t,e,l.path,r,i,s):o=Kwe(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Is.LISTEN_COMPLETE)o=qwe(t,e,n.path,r,s);else throw mf("Unknown operation type: "+n.type);const c=s.getChanges();return zwe(e,o,c),{viewCache:o,changes:c}}function zwe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=s0(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(dW(s0(e)))}}function _W(t,e,n,r,i,s){const o=e.eventCache;if($_(r,n)!=null)return e;{let a,c;if(at(n))if(de(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Nu(e),u=l instanceof qe?l:qe.EMPTY_NODE,d=gN(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=U_(r,Nu(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=ot(n);if(l===".priority"){de(Jc(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=zF(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=$t(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=zF(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=yN(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return rm(e,a,o.isFullyInitialized()||at(n),t.filter.filtersNodes())}}function B_(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(at(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),m,null)}else{const m=ot(n);if(!c.isCompleteForPath(n)&&Jc(n)>1)return e;const _=$t(n),T=c.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),m,T,_,wW,null)}const d=fW(e,l,c.isFullyInitialized()||at(n),u.filtersNodes()),h=new vN(i,d,s);return _W(t,d,n,i,h,a)}function l0(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new vN(i,e,s);if(at(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=rm(e,l,!0,t.filter.filtersNodes());else{const d=ot(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=rm(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=$t(n),m=a.getNode().getImmediateChild(d);let _;if(at(h))_=r;else{const v=u.getCompleteChild(d);v!=null?sN(h)===".priority"&&v.getChild(rW(h)).isEmpty()?_=v:_=v.updateChild(h,r):_=qe.EMPTY_NODE}if(m.equals(_))c=e;else{const v=t.filter.updateChild(a.getNode(),d,_,h,u,o);c=rm(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function WF(t,e){return t.eventCache.isCompleteForChild(e)}function Wwe(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=un(n,c);WF(e,ot(u))&&(a=l0(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=un(n,c);WF(e,ot(u))||(a=l0(t,a,u,l,i,s,o))}),a}function KF(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function u0(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;at(n)?l=r:l=new Ut(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),_=KF(t,m,h);c=B_(t,c,new Pt(d),_,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{const m=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!m){const _=e.serverCache.getNode().getImmediateChild(d),v=KF(t,_,h);c=B_(t,c,new Pt(d),v,i,s,o,a)}}),c}function Kwe(t,e,n,r,i,s,o){if($_(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(at(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return B_(t,e,n,c.getNode().getChild(n),i,s,a,o);if(at(n)){let l=new Ut(null);return c.getNode().forEachChild(lu,(u,d)=>{l=l.set(new Pt(u),d)}),u0(t,e,n,l,i,s,a,o)}else return e}else{let l=new Ut(null);return r.foreach((u,d)=>{const h=un(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),u0(t,e,n,l,i,s,a,o)}}function qwe(t,e,n,r,i){const s=e.serverCache,o=fW(e,s.getNode(),s.isFullyInitialized()||at(n),s.isFiltered());return _W(t,o,n,r,wW,i)}function Gwe(t,e,n,r,i,s){let o;if($_(r,n)!=null)return e;{const a=new vN(r,e,i),c=e.eventCache.getNode();let l;if(at(n)||ot(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=U_(r,Nu(e));else{const d=e.serverCache.getNode();de(d instanceof qe,"serverChildren would be complete if leaf node"),u=gN(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{const u=ot(n);let d=yN(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,$t(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,qe.EMPTY_NODE,$t(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=U_(r,Nu(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||$_(r,St())!=null,rm(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qwe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new uN(r.getIndex()),s=uwe(r);this.processor_=$we(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(qe.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(qe.EMPTY_NODE,a.getNode(),null),u=new Pu(c,o.isFullyInitialized(),i.filtersNodes()),d=new Pu(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=HC(d,u),this.eventGenerator_=new _we(this.query_)}get query(){return this.query_}}function Ywe(t){return t.viewCache_.serverCache.getNode()}function Xwe(t,e){const n=Nu(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!at(e)&&!n.getImmediateChild(ot(e)).isEmpty())?n.getChild(e):null}function qF(t){return t.eventRegistrations_.length===0}function Jwe(t,e){t.eventRegistrations_.push(e)}function GF(t,e,n){const r=[];if(n){de(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function QF(t,e,n,r){e.type===Is.MERGE&&e.source.queryId!==null&&(de(Nu(t.viewCache_),"We should always have a full cache before handling merges"),de(s0(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Hwe(t.processor_,i,e,n,r);return Bwe(t.processor_,s.viewCache),de(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,TW(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Zwe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tn,(s,o)=>{r.push(Fh(s,o))}),n.isFullyInitialized()&&r.push(dW(n.getNode())),TW(t,r,n.getNode(),e)}function TW(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Twe(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_;class e_e{constructor(){this.views=new Map}}function t_e(t){de(!H_,"__referenceConstructor has already been defined"),H_=t}function n_e(){return de(H_,"Reference.ts has not been loaded"),H_}function r_e(t){return t.views.size===0}function wN(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return de(s!=null,"SyncTree gave us an op for an invalid query."),QF(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(QF(o,e,n,r));return s}}function i_e(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=U_(n,i?r:null),c=!1;a?c=!0:r instanceof qe?(a=gN(n,r),c=!1):(a=qe.EMPTY_NODE,c=!1);const l=HC(new Pu(a,c,!1),new Pu(r,i,!1));return new Qwe(e,l)}return o}function s_e(t,e,n,r,i,s){const o=i_e(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Jwe(o,n),Zwe(o,n)}function o_e(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Zc(t);if(i==="default")for(const[c,l]of t.views.entries())o=o.concat(GF(l,n,r)),qF(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=t.views.get(i);c&&(o=o.concat(GF(c,n,r)),qF(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Zc(t)&&s.push(new(n_e())(e._repo,e._path)),{removed:s,events:o}}function CW(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function nh(t,e){let n=null;for(const r of t.views.values())n=n||Xwe(r,e);return n}function EW(t,e){if(e._queryParams.loadsAllData())return zC(t);{const r=e._queryIdentifier;return t.views.get(r)}}function SW(t,e){return EW(t,e)!=null}function Zc(t){return zC(t)!=null}function zC(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z_;function a_e(t){de(!z_,"__referenceConstructor has already been defined"),z_=t}function c_e(){return de(z_,"Reference.ts has not been loaded"),z_}let l_e=1;class YF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ut(null),this.pendingWriteTree_=Fwe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bW(t,e,n,r,i){return bwe(t.pendingWriteTree_,e,n,r,i),i?If(t,new Ru(hN(),e,n)):[]}function u_e(t,e,n,r){Iwe(t.pendingWriteTree_,e,n,r);const i=Ut.fromObject(n);return If(t,new Vh(hN(),e,i))}function wc(t,e,n=!1){const r=Awe(t.pendingWriteTree_,e);if(kwe(t.pendingWriteTree_,e)){let s=new Ut(null);return r.snap!=null?s=s.set(St(),!0):gr(r.children,o=>{s=s.set(new Pt(o),!0)}),If(t,new j_(r.path,s,n))}else return[]}function WC(t,e,n){return If(t,new Ru(fN(),e,n))}function d_e(t,e,n){const r=Ut.fromObject(n);return If(t,new Vh(fN(),e,r))}function h_e(t,e){return If(t,new lg(fN(),e))}function f_e(t,e,n){const r=TN(t,n);if(r){const i=CN(r),s=i.path,o=i.queryId,a=si(s,e),c=new lg(pN(o),a);return EN(t,s,c)}else return[]}function d0(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||SW(o,e))){const c=o_e(o,e,n,r);r_e(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,m)=>Zc(m));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const m=g_e(h);for(let _=0;_<m.length;++_){const v=m[_],T=v.query,y=kW(t,v);t.listenProvider_.startListening(sm(T),W_(t,T),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(sm(e),null):l.forEach(h=>{const m=t.queryToTagMap.get(KC(h));t.listenProvider_.stopListening(sm(h),m)}))}y_e(t,l)}return a}function p_e(t,e,n,r){const i=TN(t,r);if(i!=null){const s=CN(i),o=s.path,a=s.queryId,c=si(o,e),l=new Ru(pN(a),c,n);return EN(t,o,l)}else return[]}function m_e(t,e,n,r){const i=TN(t,r);if(i){const s=CN(i),o=s.path,a=s.queryId,c=si(o,e),l=Ut.fromObject(n),u=new Vh(pN(a),c,l);return EN(t,o,u)}else return[]}function XF(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,m)=>{const _=si(h,i);s=s||nh(m,_),o=o||Zc(m)});let a=t.syncPointTree_.get(i);a?(o=o||Zc(a),s=s||nh(a,St())):(a=new e_e,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=qe.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,_)=>{const v=nh(_,St());v&&(s=s.updateImmediateChild(m,v))}));const l=SW(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=KC(e);de(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const m=v_e();t.queryToTagMap.set(h,m),t.tagToQueryMap.set(m,h)}const u=mN(t.pendingWriteTree_,i);let d=s_e(a,e,n,u,s,c);if(!l&&!o&&!r){const h=EW(a,e);d=d.concat(w_e(t,e,h))}return d}function _N(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=si(o,e),l=nh(a,c);if(l)return l});return gW(i,e,s,n,!0)}function If(t,e){return IW(e,t.syncPointTree_,null,mN(t.pendingWriteTree_,St()))}function IW(t,e,n,r){if(at(t.path))return AW(t,e,n,r);{const i=e.get(St());n==null&&i!=null&&(n=nh(i,St()));let s=[];const o=ot(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=yW(r,o);s=s.concat(IW(a,c,l,u))}return i&&(s=s.concat(wN(i,t,r,n))),s}}function AW(t,e,n,r){const i=e.get(St());n==null&&i!=null&&(n=nh(i,St()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=yW(r,o),u=t.operationForChild(o);u&&(s=s.concat(AW(u,a,c,l)))}),i&&(s=s.concat(wN(i,t,r,n))),s}function kW(t,e){const n=e.query,r=W_(t,n);return{hashFn:()=>(Ywe(e)||qe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?f_e(t,n._path,r):h_e(t,n._path);{const s=uve(i,n);return d0(t,n,null,s)}}}}function W_(t,e){const n=KC(e);return t.queryToTagMap.get(n)}function KC(t){return t._path.toString()+"$"+t._queryIdentifier}function TN(t,e){return t.tagToQueryMap.get(e)}function CN(t){const e=t.indexOf("$");return de(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pt(t.substr(0,e))}}function EN(t,e,n){const r=t.syncPointTree_.get(e);de(r,"Missing sync point for query tag that we're tracking");const i=mN(t.pendingWriteTree_,e);return wN(r,n,i,null)}function g_e(t){return t.fold((e,n,r)=>{if(n&&Zc(n))return[zC(n)];{let i=[];return n&&(i=CW(n)),gr(r,(s,o)=>{i=i.concat(o)}),i}})}function sm(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(c_e())(t._repo,t._path):t}function y_e(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=KC(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function v_e(){return l_e++}function w_e(t,e,n){const r=e._path,i=W_(t,e),s=kW(t,n),o=t.listenProvider_.startListening(sm(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)de(!Zc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!at(l)&&u&&Zc(u))return[zC(u).query];{let h=[];return u&&(h=h.concat(CW(u).map(m=>m.query))),gr(d,(m,_)=>{h=h.concat(_)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(sm(u),W_(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new SN(n)}node(){return this.node_}}class bN{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=un(this.path_,e);return new bN(this.syncTree_,n)}node(){return _N(this.syncTree_,this.path_)}}const __e=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},JF=function(t,e,n){if(!t||typeof t!="object")return t;if(de(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return T_e(t[".sv"],e,n);if(typeof t[".sv"]=="object")return C_e(t[".sv"],e);de(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},T_e=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:de(!1,"Unexpected server value: "+t)}},C_e=function(t,e,n){t.hasOwnProperty("increment")||de(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&de(!1,"Unexpected increment value: "+r);const i=e.node();if(de(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},xW=function(t,e,n,r){return IN(e,new bN(n,t),r)},RW=function(t,e,n){return IN(t,new SN(e),n)};function IN(t,e,n){const r=t.getPriority().val(),i=JF(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=JF(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Qn(a,er(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Qn(i))),o.forEachChild(tn,(a,c)=>{const l=IN(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function kN(t,e){let n=e instanceof Pt?e:new Pt(e),r=t,i=ot(n);for(;i!==null;){const s=Ih(r.node.children,i)||{children:{},childCount:0};r=new AN(i,r,s),n=$t(n),i=ot(n)}return r}function Af(t){return t.node.value}function PW(t,e){t.node.value=e,h0(t)}function NW(t){return t.node.childCount>0}function E_e(t){return Af(t)===void 0&&!NW(t)}function qC(t,e){gr(t.node.children,(n,r)=>{e(new AN(n,t,r))})}function OW(t,e,n,r){n&&e(t),qC(t,i=>{OW(i,e,!0)})}function S_e(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ay(t){return new Pt(t.parent===null?t.name:ay(t.parent)+"/"+t.name)}function h0(t){t.parent!==null&&b_e(t.parent,t.name,t)}function b_e(t,e,n){const r=E_e(n),i=Mo(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,h0(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,h0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_e=/[\[\].#$\/\u0000-\u001F\u007F]/,A_e=/[\[\].#$\u0000-\u001F\u007F]/,sb=10*1024*1024,xN=function(t){return typeof t=="string"&&t.length!==0&&!I_e.test(t)},MW=function(t){return typeof t=="string"&&t.length!==0&&!A_e.test(t)},k_e=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),MW(t)},f0=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!eN(t)||t&&typeof t=="object"&&Mo(t,".sv")},RN=function(t,e,n,r){r&&e===void 0||GC(yC(t,"value"),e,n)},GC=function(t,e,n){const r=n instanceof Pt?new zve(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Rl(r));if(typeof e=="function")throw new Error(t+"contains a function "+Rl(r)+" with contents = "+e.toString());if(eN(e))throw new Error(t+"contains "+e.toString()+" "+Rl(r));if(typeof e=="string"&&e.length>sb/3&&vC(e)>sb)throw new Error(t+"contains a string greater than "+sb+" utf8 bytes "+Rl(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(gr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!xN(o)))throw new Error(t+" contains an invalid key ("+o+") "+Rl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Wve(r,o),GC(t,a,r),Kve(r)}),i&&s)throw new Error(t+' contains ".value" child '+Rl(r)+" in addition to actual children.")}},x_e=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=sg(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!xN(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Hve);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Yi(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},R_e=function(t,e,n,r){const i=yC(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];gr(e,(o,a)=>{const c=new Pt(o);if(GC(i,a,un(n,c)),sN(c)===".priority"&&!f0(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),x_e(i,s)},PN=function(t,e,n,r){if(!MW(n))throw new Error(yC(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},P_e=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),PN(t,e,n)},DW=function(t,e){if(ot(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},N_e=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!k_e(n))throw new Error(yC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QC(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!oN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function LW(t,e,n){QC(t,n),FW(t,r=>oN(r,e))}function js(t,e,n){QC(t,n),FW(t,r=>Yi(r,e)||Yi(e,r))}function FW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(M_e(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function M_e(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();tm&&cr("event: "+n.toString()),bf(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_e="repo_interrupt",L_e=25;class F_e{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new O_e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=V_(),this.transactionQueueTree_=new AN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function V_e(t,e,n){if(t.stats_=rN(t.repoInfo_),t.forceRestClient_||pve())t.server_=new F_(t.repoInfo_,(r,i,s,o)=>{ZF(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>eV(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ua(t.repoInfo_,e,(r,i,s,o)=>{ZF(t,r,i,s,o)},r=>{eV(t,r)},r=>{j_e(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=wve(t.repoInfo_,()=>new wwe(t.stats_,t.server_)),t.infoData_=new pwe,t.infoSyncTree_=new YF({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=WC(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),NN(t,"connected",!1),t.serverSyncTree_=new YF({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);js(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function VW(t){const n=t.infoData_.getNode(new Pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function YC(t){return __e({timestamp:VW(t)})}function ZF(t,e,n,r,i){t.dataUpdateCount++;const s=new Pt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=f_(n,l=>er(l));o=m_e(t.serverSyncTree_,s,c,i)}else{const c=er(n);o=p_e(t.serverSyncTree_,s,c,i)}else if(r){const c=f_(n,l=>er(l));o=d_e(t.serverSyncTree_,s,c)}else{const c=er(n);o=WC(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Uh(t,s)),js(t.eventQueue_,a,o)}function eV(t,e){NN(t,"connected",e),e===!1&&B_e(t)}function j_e(t,e){gr(e,(n,r)=>{NN(t,n,r)})}function NN(t,e,n){const r=new Pt("/.info/"+e),i=er(n);t.infoData_.updateSnapshot(r,i);const s=WC(t.infoSyncTree_,r,i);js(t.eventQueue_,r,s)}function ON(t){return t.nextWriteId_++}function U_e(t,e,n,r,i){XC(t,"set",{path:e.toString(),value:n,priority:r});const s=YC(t),o=er(n,r),a=_N(t.serverSyncTree_,e),c=RW(o,a,s),l=ON(t),u=bW(t.serverSyncTree_,e,c,l,!0);QC(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,m)=>{const _=h==="ok";_||Hr("set at "+e+" failed: "+h);const v=wc(t.serverSyncTree_,l,!_);js(t.eventQueue_,e,v),m0(t,i,h,m)});const d=DN(t,e);Uh(t,d),js(t.eventQueue_,d,[])}function $_e(t,e,n,r){XC(t,"update",{path:e.toString(),value:n});let i=!0;const s=YC(t),o={};if(gr(n,(a,c)=>{i=!1,o[a]=xW(un(e,a),er(c),t.serverSyncTree_,s)}),i)cr("update() called with empty data.  Don't do anything."),m0(t,r,"ok",void 0);else{const a=ON(t),c=u_e(t.serverSyncTree_,e,o,a);QC(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||Hr("update at "+e+" failed: "+l);const h=wc(t.serverSyncTree_,a,!d),m=h.length>0?Uh(t,e):e;js(t.eventQueue_,m,h),m0(t,r,l,u)}),gr(n,l=>{const u=DN(t,un(e,l));Uh(t,u)}),js(t.eventQueue_,e,[])}}function B_e(t){XC(t,"onDisconnectEvents");const e=YC(t),n=V_();i0(t.onDisconnect_,St(),(i,s)=>{const o=xW(i,s,t.serverSyncTree_,e);hW(n,i,o)});let r=[];i0(n,St(),(i,s)=>{r=r.concat(WC(t.serverSyncTree_,i,s));const o=DN(t,i);Uh(t,o)}),t.onDisconnect_=V_(),js(t.eventQueue_,St(),r)}function H_e(t,e,n){let r;ot(e._path)===".info"?r=XF(t.infoSyncTree_,e,n):r=XF(t.serverSyncTree_,e,n),LW(t.eventQueue_,e._path,r)}function p0(t,e,n){let r;ot(e._path)===".info"?r=d0(t.infoSyncTree_,e,n):r=d0(t.serverSyncTree_,e,n),LW(t.eventQueue_,e._path,r)}function z_e(t){t.persistentConnection_&&t.persistentConnection_.interrupt(D_e)}function XC(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),cr(n,...e)}function m0(t,e,n,r){e&&bf(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function jW(t,e,n){return _N(t.serverSyncTree_,e,n)||qe.EMPTY_NODE}function MN(t,e=t.transactionQueueTree_){if(e||JC(t,e),Af(e)){const n=$W(t,e);de(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&W_e(t,ay(e),n)}else NW(e)&&qC(e,n=>{MN(t,n)})}function W_e(t,e,n){const r=n.map(l=>l.currentWriteId),i=jW(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];de(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=si(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{XC(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(wc(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();JC(t,kN(t.transactionQueueTree_,e)),MN(t,t.transactionQueueTree_),js(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)bf(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Hr("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Uh(t,e)}},o)}function Uh(t,e){const n=UW(t,e),r=ay(n),i=$W(t,n);return K_e(t,i,r),r}function K_e(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=si(n,c.path);let u=!1,d;if(de(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(wc(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=L_e)u=!0,d="maxretry",i=i.concat(wc(t.serverSyncTree_,c.currentWriteId,!0));else{const h=jW(t,c.path,o);c.currentInputSnapshot=h;const m=e[a].update(h.val());if(m!==void 0){GC("transaction failed: Data returned ",m,c.path);let _=er(m);typeof m=="object"&&m!=null&&Mo(m,".priority")||(_=_.updatePriority(h.getPriority()));const T=c.currentWriteId,y=YC(t),w=RW(_,h,y);c.currentOutputSnapshotRaw=_,c.currentOutputSnapshotResolved=w,c.currentWriteId=ON(t),o.splice(o.indexOf(T),1),i=i.concat(bW(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),i=i.concat(wc(t.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(wc(t.serverSyncTree_,c.currentWriteId,!0))}js(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}JC(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)bf(r[a]);MN(t,t.transactionQueueTree_)}function UW(t,e){let n,r=t.transactionQueueTree_;for(n=ot(e);n!==null&&Af(r)===void 0;)r=kN(r,n),e=$t(e),n=ot(e);return r}function $W(t,e){const n=[];return BW(t,e,n),n.sort((r,i)=>r.order-i.order),n}function BW(t,e,n){const r=Af(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);qC(e,i=>{BW(t,i,n)})}function JC(t,e){const n=Af(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,PW(e,n.length>0?n:void 0)}qC(e,r=>{JC(t,r)})}function DN(t,e){const n=ay(UW(t,e)),r=kN(t.transactionQueueTree_,e);return S_e(r,i=>{ob(t,i)}),ob(t,r),OW(r,i=>{ob(t,i)}),n}function ob(t,e){const n=Af(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(de(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(de(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(wc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?PW(e,void 0):n.length=s+1,js(t.eventQueue_,ay(e),i);for(let o=0;o<r.length;o++)bf(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_e(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function G_e(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Hr(`Invalid query segment '${n}' in query '${t}'`)}return e}const tV=function(t,e){const n=Q_e(t),r=n.namespace;n.domain==="firebase.com"&&Sa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Sa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||sve();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new G9(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Pt(n.pathString)}},Q_e=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=q_e(t.substring(u,d)));const h=G_e(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const m=e.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Y_e=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=nV.charAt(n%64),n=Math.floor(n/64);de(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=nV.charAt(e[i]);return de(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tr(this.snapshot.exportVal())}}class zW{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return de(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return at(this._path)?null:sN(this._path)}get ref(){return new Ma(this._repo,this._path)}get _queryIdentifier(){const e=UF(this._queryParams),n=tN(e);return n==="{}"?"default":n}get _queryObject(){return UF(this._queryParams)}isEqual(e){if(e=Ge(e),!(e instanceof kf))return!1;const n=this._repo===e._repo,r=oN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Bve(this._path)}}function X_e(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function KW(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===lu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==xu)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Xc)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===tn){if(e!=null&&!f0(e)||n!=null&&!f0(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(de(t.getIndex()instanceof lN||t.getIndex()===uW,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function J_e(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ma extends kf{constructor(e,n){super(e,n,new dN,!1)}get parent(){const e=rW(this._path);return e===null?null:new Ma(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ug{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Pt(e),r=$h(this.ref,e);return new ug(this._node.getChild(n),r,tn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new ug(i,$h(this.ref,r),tn)))}hasChild(e){const n=new Pt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Qo(t,e){return t=Ge(t),t._checkNotDeleted("ref"),e!==void 0?$h(t._root,e):t._root}function $h(t,e){return t=Ge(t),ot(t._path)===null?P_e("child","path",e):PN("child","path",e),new Ma(t._repo,un(t._path,e))}function Z_e(t,e){t=Ge(t),DW("push",t._path),RN("push",e,t._path,!0);const n=VW(t._repo),r=Y_e(n),i=$h(t,r),s=$h(t,r);let o;return e!=null?o=g0(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function g0(t,e){t=Ge(t),DW("set",t._path),RN("set",e,t._path,!1);const n=new $g;return U_e(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function eTe(t,e){R_e("update",e,t._path);const n=new $g;return $_e(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class ZC{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new HW("value",this,new ug(e.snapshotNode,new Ma(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zW(this,e,n):null}matches(e){return e instanceof ZC?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class eE{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zW(this,e,n):null}createEvent(e,n){de(e.childName!=null,"Child events should have a childName.");const r=$h(new Ma(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new HW(e.type,this,new ug(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof eE?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function qW(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,l=(u,d)=>{p0(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}const o=new WW(n,s||void 0),a=e==="value"?new ZC(o):new eE(e,o);return H_e(t._repo,t,a),()=>p0(t._repo,t,a)}function dg(t,e,n,r){return qW(t,"value",e,n,r)}function tTe(t,e,n,r){return qW(t,"child_added",e,n,r)}function GW(t,e,n){let r=null;const i=n?new WW(n):null;e==="value"?r=new ZC(i):e&&(r=new eE(e,i)),p0(t._repo,t,r)}class LN{}class nTe extends LN{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){RN("startAt",this._value,e._path,!0);const n=hwe(e._queryParams,this._value,this._key);if(J_e(n),KW(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new kf(e._repo,e._path,n,e._orderByCalled)}}function rTe(t=null,e){return new nTe(t,e)}class iTe extends LN{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new kf(e._repo,e._path,dwe(e._queryParams,this._limit),e._orderByCalled)}}function QW(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new iTe(t)}class sTe extends LN{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){X_e(e,"orderByChild");const n=new Pt(this._path);if(at(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new lN(n),i=fwe(e._queryParams,r);return KW(i),new kf(e._repo,e._path,i,!0)}}function y0(t){return PN("orderByChild","path",t),new sTe(t)}function v0(t,...e){let n=Ge(t);for(const r of e)n=r._apply(n);return n}t_e(Ma);a_e(Ma);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oTe="FIREBASE_DATABASE_EMULATOR_HOST",w0={};let aTe=!1;function cTe(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=ss(s);t.repoInfo_=new G9(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function lTe(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Sa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=tV(s,i),a=o.repoInfo,c;typeof process<"u"&&CF&&(c=CF[oTe]),c?(s=`http://${c}?ns=${a.namespace}`,o=tV(s,i),a=o.repoInfo):o.repoInfo.secure;const l=new gve(t.name,t.options,e);N_e("Invalid Firebase Database URL",o),at(o.path)||Sa("Database URL must point to the root of a Firebase Database (not including a child path).");const u=dTe(a,t,l,new mve(t,n));return new hTe(u,t)}function uTe(t,e){const n=w0[e];(!n||n[t.key]!==t)&&Sa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),z_e(t),delete n[t.key]}function dTe(t,e,n,r){let i=w0[e.name];i||(i={},w0[e.name]=i);let s=i[t.toURLString()];return s&&Sa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new F_e(t,aTe,n,r),i[t.toURLString()]=s,s}class hTe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(V_e(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ma(this._repo,St())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uTe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Sa("Cannot call "+e+" on a deleted database.")}}function fTe(t=fl(),e){const n=Us(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=gC("database");r&&pTe(n,...r)}return n}function pTe(t,e,n,r={}){t=Ge(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Fs(r,s.repoInfo_.emulatorOptions))return;Sa("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Sa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new tw(tw.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:YR(r.mockUserToken,t.app.options.projectId);o=new tw(a)}ss(e)&&(Bg(e),Hg("Database",!0)),cTe(s,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mTe(t){Zye(hl),Wr(new Rr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return lTe(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),xn(EF,SF,t),xn(EF,SF,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gTe={".sv":"timestamp"};function yTe(){return gTe}ua.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ua.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};mTe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW="firebasestorage.googleapis.com",XW="storageBucket",vTe=2*60*1e3,wTe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends ji{constructor(e,n,r=0){super(ab(e),`Firebase Storage: ${n} (${ab(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ab(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hn||(hn={}));function ab(t){return"storage/"+t}function FN(){const t="An unknown error occurred, please check the error payload for server response.";return new fn(hn.UNKNOWN,t)}function _Te(t){return new fn(hn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TTe(t){return new fn(hn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CTe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fn(hn.UNAUTHENTICATED,t)}function ETe(){return new fn(hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function STe(t){return new fn(hn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bTe(){return new fn(hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ITe(){return new fn(hn.CANCELED,"User canceled the upload/download.")}function ATe(t){return new fn(hn.INVALID_URL,"Invalid URL '"+t+"'.")}function kTe(t){return new fn(hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xTe(){return new fn(hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XW+"' property when initializing the app?")}function RTe(){return new fn(hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function PTe(){return new fn(hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NTe(t){return new fn(hn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _0(t){return new fn(hn.INVALID_ARGUMENT,t)}function JW(){return new fn(hn.APP_DELETED,"The Firebase app was deleted.")}function OTe(t){return new fn(hn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function om(t,e){return new fn(hn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cp(t){throw new fn(hn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xi.makeFromUrl(e,n)}catch{return new xi(e,"")}if(r.path==="")return r;throw kTe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),_={bucket:1,path:3},v=n===YW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",y=new RegExp(`^https?://${v}/${i}/${T}`,"i"),C=[{regex:a,indices:c,postModify:s},{regex:m,indices:_,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<C.length;b++){const k=C[b],D=k.regex.exec(e);if(D){const A=D[k.indices.bucket];let S=D[k.indices.path];S||(S=""),r=new xi(A,S),k.postModify(r);break}}if(r==null)throw ATe(e);return r}}class MTe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DTe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...T){l||(l=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(m,c())},T)}function h(){s&&clearTimeout(s)}function m(T,...y){if(l){h();return}if(T){h(),u.call(null,T,...y);return}if(c()||o){h(),u.call(null,T,...y);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,d(C)}let _=!1;function v(T){_||(_=!0,h(),!l&&(i!==null?(T||(a=2),clearTimeout(i),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function LTe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FTe(t){return t!==void 0}function VTe(t){return typeof t=="object"&&!Array.isArray(t)}function VN(t){return typeof t=="string"||t instanceof String}function rV(t){return jN()&&t instanceof Blob}function jN(){return typeof Blob<"u"}function iV(t,e,n,r){if(r<e)throw _0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ZW(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var uu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uu||(uu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jTe(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UTe{constructor(e,n,r,i,s,o,a,c,l,u,d,h=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,v)=>{this.resolve_=_,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new mv(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===uu.NO_ERROR,c=s.getStatus();if(!a||jTe(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===uu.ABORT;r(!1,new mv(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new mv(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());FTe(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=FN();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?JW():ITe();o(c)}else{const c=bTe();o(c)}};this.canceled_?n(!1,new mv(!1,null,!0)):this.backoffId_=DTe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LTe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mv{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $Te(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BTe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HTe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zTe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WTe(t,e,n,r,i,s,o=!0,a=!1){const c=ZW(t.urlParams),l=t.url+c,u=Object.assign({},t.headers);return HTe(u,e),$Te(u,n),BTe(u,s),zTe(u,r),new UTe(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KTe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qTe(...t){const e=KTe();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(jN())return new Blob(t);throw new fn(hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GTe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QTe(t){if(typeof atob>"u")throw NTe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cb{constructor(e,n){this.data=e,this.contentType=n||null}}function YTe(t,e){switch(t){case ao.RAW:return new cb(eK(e));case ao.BASE64:case ao.BASE64URL:return new cb(tK(t,e));case ao.DATA_URL:return new cb(JTe(e),ZTe(e))}throw FN()}function eK(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function XTe(t){let e;try{e=decodeURIComponent(t)}catch{throw om(ao.DATA_URL,"Malformed data URL.")}return eK(e)}function tK(t,e){switch(t){case ao.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw om(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ao.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw om(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QTe(e)}catch(i){throw i.message.includes("polyfill")?i:om(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class nK{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw om(ao.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=eCe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function JTe(t){const e=new nK(t);return e.base64?tK(ao.BASE64,e.rest):XTe(e.rest)}function ZTe(t){return new nK(t).contentType}function eCe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){let r=0,i="";rV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(rV(this.data_)){const r=this.data_,i=GTe(r,e,n);return i===null?null:new oc(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new oc(r,!0)}}static getBlob(...e){if(jN()){const n=e.map(r=>r instanceof oc?r.data_:r);return new oc(qTe.apply(null,n))}else{const n=e.map(o=>VN(o)?YTe(ao.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new oc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(t){let e;try{e=JSON.parse(t)}catch{return null}return VTe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tCe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nCe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function iK(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rCe(t,e){return e}class Nr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||rCe}}let gv=null;function iCe(t){return!VN(t)||t.length<2?t:iK(t)}function tE(){if(gv)return gv;const t=[];t.push(new Nr("bucket")),t.push(new Nr("generation")),t.push(new Nr("metageneration")),t.push(new Nr("name","fullPath",!0));function e(s,o){return iCe(o)}const n=new Nr("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Nr("size");return i.xform=r,t.push(i),t.push(new Nr("timeCreated")),t.push(new Nr("updated")),t.push(new Nr("md5Hash",null,!0)),t.push(new Nr("cacheControl",null,!0)),t.push(new Nr("contentDisposition",null,!0)),t.push(new Nr("contentEncoding",null,!0)),t.push(new Nr("contentLanguage",null,!0)),t.push(new Nr("contentType",null,!0)),t.push(new Nr("metadata","customMetadata",!0)),gv=t,gv}function sCe(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new xi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function oCe(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return sCe(r,t),r}function sK(t,e,n){const r=rK(e);return r===null?null:oCe(t,r,n)}function aCe(t,e,n,r){const i=rK(e);if(i===null||!VN(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),m=xf(h,n,r),_=ZW({alt:"media",token:l});return m+_})[0]}function oK(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class cy{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t){if(!t)throw FN()}function UN(t,e){function n(r,i){const s=sK(t,i,e);return aK(s!==null),s}return n}function cCe(t,e){function n(r,i){const s=sK(t,i,e);return aK(s!==null),aCe(s,i,t.host,t._protocol)}return n}function cK(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ETe():i=CTe():n.getStatus()===402?i=TTe(t.bucket):n.getStatus()===403?i=STe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function nE(t){const e=cK(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=_Te(t.path)),s.serverResponse=i.serverResponse,s}return n}function lCe(t,e,n){const r=e.fullServerUrl(),i=xf(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new cy(i,s,UN(t,n),o);return a.errorHandler=nE(e),a}function uCe(t,e,n){const r=e.fullServerUrl(),i=xf(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new cy(i,s,cCe(t,n),o);return a.errorHandler=nE(e),a}function dCe(t,e,n,r){const i=e.fullServerUrl(),s=xf(i,t.host,t._protocol),o="PATCH",a=oK(n,r),c={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,u=new cy(s,o,UN(t,r),l);return u.headers=c,u.body=a,u.errorHandler=nE(e),u}function hCe(t,e){const n=e.fullServerUrl(),r=xf(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(c,l){}const a=new cy(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=nE(e),a}function fCe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pCe(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fCe(null,e)),r}function mCe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let b=0;b<2;b++)C=C+Math.random().toString().slice(2);return C}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=pCe(e,r,i),u=oK(l,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=oc.getBlob(d,r,h);if(m===null)throw RTe();const _={name:l.fullPath},v=xf(s,t.host,t._protocol),T="POST",y=t.maxUploadRetryTime,w=new cy(v,T,UN(t,n),y);return w.urlParams=_,w.headers=o,w.body=m.uploadData(),w.errorHandler=cK(e),w}class gCe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw cp("cannot .send() more than once");if(ss(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yCe extends gCe{initXhr(){this.xhr_.responseType="text"}}function ly(){return new yCe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this._service=e,n instanceof xi?this._location=n:this._location=xi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ou(e,n)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iK(this._location.path)}get storage(){return this._service}get parent(){const e=tCe(this._location.path);if(e===null)return null;const n=new xi(this._location.bucket,e);return new Ou(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OTe(e)}}function vCe(t,e,n){t._throwIfRoot("uploadBytes");const r=mCe(t.storage,t._location,tE(),new oc(e,!0),n);return t.storage.makeRequestWithTokens(r,ly).then(i=>({metadata:i,ref:t}))}function wCe(t){t._throwIfRoot("getMetadata");const e=lCe(t.storage,t._location,tE());return t.storage.makeRequestWithTokens(e,ly)}function _Ce(t,e){t._throwIfRoot("updateMetadata");const n=dCe(t.storage,t._location,e,tE());return t.storage.makeRequestWithTokens(n,ly)}function TCe(t){t._throwIfRoot("getDownloadURL");const e=uCe(t.storage,t._location,tE());return t.storage.makeRequestWithTokens(e,ly).then(n=>{if(n===null)throw PTe();return n})}function CCe(t){t._throwIfRoot("deleteObject");const e=hCe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ly)}function ECe(t,e){const n=nCe(t._location.path,e),r=new xi(t._location.bucket,n);return new Ou(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SCe(t){return/^[A-Za-z]+:\/\//.test(t)}function bCe(t,e){return new Ou(t,e)}function lK(t,e){if(t instanceof $N){const n=t;if(n._bucket==null)throw xTe();const r=new Ou(n,n._bucket);return e!=null?lK(r,e):r}else return e!==void 0?ECe(t,e):t}function ICe(t,e){if(e&&SCe(e)){if(t instanceof $N)return bCe(t,e);throw _0("To use ref(service, url), the first argument must be a Storage instance.")}else return lK(t,e)}function sV(t,e){const n=e==null?void 0:e[XW];return n==null?null:xi.makeFromBucketSpec(n,t)}function ACe(t,e,n,r={}){t.host=`${e}:${n}`;const i=ss(e);i&&(Bg(`https://${t.host}/b`),Hg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:YR(s,t.app.options.projectId))}class $N{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=YW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vTe,this._maxUploadRetryTime=wTe,this._requests=new Set,i!=null?this._bucket=xi.makeFromBucketSpec(i,this._host):this._bucket=sV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xi.makeFromBucketSpec(this._url,e):this._bucket=sV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ou(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new MTe(JW());{const o=WTe(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const oV="@firebase/storage",aV="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK="storage";function kCe(t,e,n){return t=Ge(t),vCe(t,e,n)}function xCe(t){return t=Ge(t),wCe(t)}function RCe(t,e){return t=Ge(t),_Ce(t,e)}function PCe(t){return t=Ge(t),TCe(t)}function NCe(t){return t=Ge(t),CCe(t)}function lb(t,e){return t=Ge(t),ICe(t,e)}function OCe(t=fl(),e){t=Ge(t);const r=Us(t,uK).getImmediate({identifier:e}),i=gC("storage");return i&&MCe(r,...i),r}function MCe(t,e,n,r={}){ACe(t,e,n,r)}function DCe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $N(n,r,i,e,hl)}function LCe(){Wr(new Rr(uK,DCe,"PUBLIC").setMultipleInstances(!0)),xn(oV,aV,""),xn(oV,aV,"esm2020")}LCe();const dK="@firebase/installations",BN="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK=1e4,fK=`w:${BN}`,pK="FIS_v2",FCe="https://firebaseinstallations.googleapis.com/v1",VCe=60*60*1e3,jCe="installations",UCe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ce={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mu=new dl(jCe,UCe,$Ce);function mK(t){return t instanceof ji&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK({projectId:t}){return`${FCe}/projects/${t}/installations`}function yK(t){return{token:t.token,requestStatus:2,expiresIn:HCe(t.expiresIn),creationTime:Date.now()}}async function vK(t,e){const r=(await e.json()).error;return Mu.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function wK({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function BCe(t,{refreshToken:e}){const n=wK(t);return n.append("Authorization",zCe(e)),n}async function _K(t){const e=await t();return e.status>=500&&e.status<600?t():e}function HCe(t){return Number(t.replace("s","000"))}function zCe(t){return`${pK} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WCe({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=gK(t),i=wK(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={fid:n,authVersion:pK,appId:t.appId,sdkVersion:fK},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await _K(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:yK(l.authToken)}}else throw await vK("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KCe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qCe=/^[cdef][\w-]{21}$/,T0="";function GCe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=QCe(t);return qCe.test(n)?n:T0}catch{return T0}}function QCe(t){return KCe(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=new Map;function EK(t,e){const n=rE(t);SK(n,e),YCe(n,e)}function SK(t,e){const n=CK.get(t);if(n)for(const r of n)r(e)}function YCe(t,e){const n=XCe();n&&n.postMessage({key:t,fid:e}),JCe()}let Gl=null;function XCe(){return!Gl&&"BroadcastChannel"in self&&(Gl=new BroadcastChannel("[Firebase] FID Change"),Gl.onmessage=t=>{SK(t.data.key,t.data.fid)}),Gl}function JCe(){CK.size===0&&Gl&&(Gl.close(),Gl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZCe="firebase-installations-database",eEe=1,Du="firebase-installations-store";let ub=null;function HN(){return ub||(ub=wC(ZCe,eEe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Du)}}})),ub}async function K_(t,e){const n=rE(t),i=(await HN()).transaction(Du,"readwrite"),s=i.objectStore(Du),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&EK(t,e.fid),e}async function bK(t){const e=rE(t),r=(await HN()).transaction(Du,"readwrite");await r.objectStore(Du).delete(e),await r.done}async function iE(t,e){const n=rE(t),i=(await HN()).transaction(Du,"readwrite"),s=i.objectStore(Du),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&EK(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t){let e;const n=await iE(t.appConfig,r=>{const i=tEe(r),s=nEe(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===T0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function tEe(t){const e=t||{fid:GCe(),registrationStatus:0};return IK(e)}function nEe(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Mu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=rEe(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:iEe(t)}:{installationEntry:e}}async function rEe(t,e){try{const n=await WCe(t,e);return K_(t.appConfig,n)}catch(n){throw mK(n)&&n.customData.serverCode===409?await bK(t.appConfig):await K_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function iEe(t){let e=await cV(t.appConfig);for(;e.registrationStatus===1;)await TK(100),e=await cV(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await zN(t);return r||n}return e}function cV(t){return iE(t,e=>{if(!e)throw Mu.create("installation-not-found");return IK(e)})}function IK(t){return sEe(t)?{fid:t.fid,registrationStatus:0}:t}function sEe(t){return t.registrationStatus===1&&t.registrationTime+hK<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oEe({appConfig:t,heartbeatServiceProvider:e},n){const r=aEe(t,n),i=BCe(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={installation:{sdkVersion:fK,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await _K(()=>fetch(r,a));if(c.ok){const l=await c.json();return yK(l)}else throw await vK("Generate Auth Token",c)}function aEe(t,{fid:e}){return`${gK(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e=!1){let n;const r=await iE(t.appConfig,s=>{if(!AK(s))throw Mu.create("not-registered");const o=s.authToken;if(!e&&uEe(o))return s;if(o.requestStatus===1)return n=cEe(t,e),s;{if(!navigator.onLine)throw Mu.create("app-offline");const a=hEe(s);return n=lEe(t,a),a}});return n?await n:r.authToken}async function cEe(t,e){let n=await lV(t.appConfig);for(;n.authToken.requestStatus===1;)await TK(100),n=await lV(t.appConfig);const r=n.authToken;return r.requestStatus===0?WN(t,e):r}function lV(t){return iE(t,e=>{if(!AK(e))throw Mu.create("not-registered");const n=e.authToken;return fEe(n)?{...e,authToken:{requestStatus:0}}:e})}async function lEe(t,e){try{const n=await oEe(t,e),r={...e,authToken:n};return await K_(t.appConfig,r),n}catch(n){if(mK(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await bK(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await K_(t.appConfig,r)}throw n}}function AK(t){return t!==void 0&&t.registrationStatus===2}function uEe(t){return t.requestStatus===2&&!dEe(t)}function dEe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+VCe}function hEe(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function fEe(t){return t.requestStatus===1&&t.requestTime+hK<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pEe(t){const e=t,{installationEntry:n,registrationPromise:r}=await zN(e);return r?r.catch(console.error):WN(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mEe(t,e=!1){const n=t;return await gEe(n),(await WN(n,e)).token}async function gEe(t){const{registrationPromise:e}=await zN(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yEe(t){if(!t||!t.options)throw db("App Configuration");if(!t.name)throw db("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw db(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function db(t){return Mu.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kK="installations",vEe="installations-internal",wEe=t=>{const e=t.getProvider("app").getImmediate(),n=yEe(e),r=Us(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},_Ee=t=>{const e=t.getProvider("app").getImmediate(),n=Us(e,kK).getImmediate();return{getId:()=>pEe(n),getToken:i=>mEe(n,i)}};function TEe(){Wr(new Rr(kK,wEe,"PUBLIC")),Wr(new Rr(vEe,_Ee,"PRIVATE"))}TEe();xn(dK,BN);xn(dK,BN,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="analytics",CEe="firebase_id",EEe="origin",SEe=60*1e3,bEe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",KN="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new zg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IEe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mi=new dl("analytics","Analytics",IEe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AEe(t){if(!t.startsWith(KN)){const e=Mi.create("invalid-gtag-resource",{gtagURL:t});return zr.warn(e.message),""}return t}function xK(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kEe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xEe(t,e){const n=kEe("firebase-js-sdk-policy",{createScriptURL:AEe}),r=document.createElement("script"),i=`${KN}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function REe(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function PEe(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await xK(n)).find(l=>l.measurementId===i);c&&await e[c.appId]}}catch(a){zr.error(a)}t("config",i,s)}async function NEe(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await xK(n);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){zr.error(s)}}function OEe(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await NEe(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await PEe(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){zr.error(a)}}return i}function MEe(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=OEe(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function DEe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(KN)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LEe=30,FEe=1e3;class VEe{constructor(e={},n=FEe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const RK=new VEe;function jEe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function UEe(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:jEe(n)},i=bEe.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw Mi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function $Ee(t,e=RK,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Mi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Mi.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new zEe;return setTimeout(async()=>{a.abort()},SEe),PK({appId:r,apiKey:i,measurementId:s},o,a,e)}async function PK(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=RK){var a;const{appId:s,measurementId:o}=t;try{await BEe(r,e)}catch(c){if(o)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await UEe(t);return i.deleteThrottleMetadata(s),c}catch(c){const l=c;if(!HEe(l)){if(i.deleteThrottleMetadata(s),o)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw c}const u=Number((a=l==null?void 0:l.customData)==null?void 0:a.httpStatus)===503?zL(n,i.intervalMillis,LEe):zL(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,d),zr.debug(`Calling attemptFetch again in ${u} millis`),PK(t,d,r,i)}}function BEe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Mi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function HEe(t){if(!(t instanceof ji)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zEe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WEe(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function KEe(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qEe(){if(JR())try{await ZR()}catch(t){return zr.warn(Mi.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zr.warn(Mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GEe(t,e,n,r,i,s,o){const a=$Ee(t);a.then(h=>{n[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>zr.error(h)),e.push(a);const c=qEe().then(h=>{if(h)return r.getId()}),[l,u]=await Promise.all([a,c]);DEe(s)||xEe(s,l.measurementId),i("js",new Date);const d=(o==null?void 0:o.config)??{};return d[EEe]="firebase",d.update=!0,u!=null&&(d[CEe]=u),i("config",l.measurementId,d),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QEe{constructor(e){this.app=e}_delete(){return delete rh[this.app.options.appId],Promise.resolve()}}let rh={},uV=[];const dV={};let hb="dataLayer",YEe="gtag",hV,qN,fV=!1;function XEe(){const t=[];if(d6()&&t.push("This is a browser extension environment."),f6()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Mi.create("invalid-analytics-context",{errorInfo:e});zr.warn(n.message)}}function JEe(t,e,n){XEe();const r=t.options.appId;if(!r)throw Mi.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mi.create("no-api-key");if(rh[r]!=null)throw Mi.create("already-exists",{id:r});if(!fV){REe(hb);const{wrappedGtag:s,gtagCore:o}=MEe(rh,uV,dV,hb,YEe);qN=s,hV=o,fV=!0}return rh[r]=GEe(t,uV,dV,e,hV,hb,n),new QEe(t)}function ZEe(t=fl()){t=Ge(t);const e=Us(t,q_);return e.isInitialized()?e.getImmediate():eSe(t)}function eSe(t,e={}){const n=Us(t,q_);if(n.isInitialized()){const i=n.getImmediate();if(Fs(e,n.getOptions()))return i;throw Mi.create("already-initialized")}return n.initialize({options:e})}function tSe(t,e,n){t=Ge(t),KEe(qN,rh[t.app.options.appId],e,n).catch(r=>zr.error(r))}function nSe(t,e,n,r){t=Ge(t),WEe(qN,rh[t.app.options.appId],e,n,r).catch(i=>zr.error(i))}const pV="@firebase/analytics",mV="0.10.19";function rSe(){Wr(new Rr(q_,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return JEe(r,i,n)},"PUBLIC")),Wr(new Rr("analytics-internal",t,"PRIVATE")),xn(pV,mV),xn(pV,mV,"esm2020");function t(e){try{const n=e.getProvider(q_).getImmediate();return{logEvent:(r,i,s)=>nSe(n,r,i,s),setUserProperties:(r,i)=>tSe(n,r,i)}}catch(n){throw Mi.create("interop-component-reg-failed",{reason:n})}}}rSe();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iSe="/firebase-messaging-sw.js",sSe="/firebase-cloud-messaging-push-scope",NK="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oSe="https://fcmregistrations.googleapis.com/v1",OK="google.c.a.c_id",aSe="google.c.a.c_l",cSe="google.c.a.ts",lSe="google.c.a.e",gV=1e4;var yV;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(yV||(yV={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var hg;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(hg||(hg={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uSe(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="fcm_token_details_db",dSe=5,vV="fcm_token_object_Store";async function hSe(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(fb))return null;let e=null;return(await wC(fb,dSe,{upgrade:async(r,i,s,o)=>{if(i<2||!r.objectStoreNames.contains(vV))return;const a=o.objectStore(vV),c=await a.index("fcmSenderId").get(t);if(await a.clear(),!!c){if(i===2){const l=c;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:l.createTime??Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Wo(l.vapidKey)}}}else if(i===3){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wo(l.auth),p256dh:Wo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wo(l.vapidKey)}}}else if(i===4){const l=c;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wo(l.auth),p256dh:Wo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wo(l.vapidKey)}}}}}})).close(),await $S(fb),await $S("fcm_vapid_details_db"),await $S("undefined"),fSe(e)?e:null}function fSe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pSe="firebase-messaging-database",mSe=1,fg="firebase-messaging-store";let pb=null;function MK(){return pb||(pb=wC(pSe,mSe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fg)}}})),pb}async function gSe(t){const e=DK(t),r=await(await MK()).transaction(fg).objectStore(fg).get(e);if(r)return r;{const i=await hSe(t.appConfig.senderId);if(i)return await GN(t,i),i}}async function GN(t,e){const n=DK(t),i=(await MK()).transaction(fg,"readwrite");return await i.objectStore(fg).put(e,n),await i.done,e}function DK({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ySe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ar=new dl("messaging","Messaging",ySe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vSe(t,e){const n=await YN(t),r=LK(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(QN(t.appConfig),i)).json()}catch(o){throw Ar.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Ar.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Ar.create("token-subscribe-no-token");return s.token}async function wSe(t,e){const n=await YN(t),r=LK(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${QN(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Ar.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw Ar.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Ar.create("token-update-no-token");return s.token}async function _Se(t,e){const r={method:"DELETE",headers:await YN(t)};try{const s=await(await fetch(`${QN(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Ar.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Ar.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function QN({projectId:t}){return`${oSe}/projects/${t}/registrations`}async function YN({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function LK({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==NK&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TSe=7*24*60*60*1e3;async function CSe(t){const e=await SSe(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Wo(e.getKey("auth")),p256dh:Wo(e.getKey("p256dh"))},r=await gSe(t.firebaseDependencies);if(r){if(bSe(r.subscriptionOptions,n))return Date.now()>=r.createTime+TSe?ESe(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await _Se(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return wV(t.firebaseDependencies,n)}else return wV(t.firebaseDependencies,n)}async function ESe(t,e){try{const n=await wSe(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await GN(t.firebaseDependencies,r),n}catch(n){throw n}}async function wV(t,e){const r={token:await vSe(t,e),createTime:Date.now(),subscriptionOptions:e};return await GN(t,r),r.token}async function SSe(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uSe(e)})}function bSe(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return ISe(e,t),ASe(e,t),kSe(e,t),e}function ISe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function ASe(t,e){e.data&&(t.data=e.data)}function kSe(t,e){var i,s,o,a;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;t.fcmOptions={};const n=((s=e.fcmOptions)==null?void 0:s.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(a=e.fcmOptions)==null?void 0:a.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xSe(t){return typeof t=="object"&&!!t&&OK in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RSe(t){if(!t||!t.options)throw mb("App Configuration Object");if(!t.name)throw mb("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw mb(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function mb(t){return Ar.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PSe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=RSe(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NSe(t){try{t.swRegistration=await navigator.serviceWorker.register(iSe,{scope:sSe}),t.swRegistration.update().catch(()=>{}),await OSe(t.swRegistration)}catch(e){throw Ar.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function OSe(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${gV} ms`)),gV),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var o;((o=s.target)==null?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MSe(t,e){if(!e&&!t.swRegistration&&await NSe(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ar.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DSe(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=NK)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FK(t,e){if(!navigator)throw Ar.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ar.create("permission-blocked");return await DSe(t,e==null?void 0:e.vapidKey),await MSe(t,e==null?void 0:e.serviceWorkerRegistration),CSe(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LSe(t,e,n){const r=FSe(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[OK],message_name:n[aSe],message_time:n[cSe],message_device_time:Math.floor(Date.now()/1e3)})}function FSe(t){switch(t){case hg.NOTIFICATION_CLICKED:return"notification_open";case hg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VSe(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===hg.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(_V(n)):t.onMessageHandler.next(_V(n)));const r=n.data;xSe(r)&&r[lSe]==="1"&&await LSe(t,n.messageType,r)}const TV="@firebase/messaging",CV="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jSe=t=>{const e=new PSe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>VSe(e,n)),e},USe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>FK(e,r)}};function $Se(){Wr(new Rr("messaging",jSe,"PUBLIC")),Wr(new Rr("messaging-internal",USe,"PRIVATE")),xn(TV,CV),xn(TV,CV,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BSe(){try{await ZR()}catch{return!1}return typeof window<"u"&&JR()&&f6()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HSe(t,e){if(!navigator)throw Ar.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zSe(t=fl()){return BSe().then(e=>{if(!e)throw Ar.create("unsupported-browser")},e=>{throw Ar.create("indexed-db-unsupported")}),Us(Ge(t),"messaging").getImmediate()}async function EV(t,e){return t=Ge(t),FK(t,e)}function WSe(t,e){return t=Ge(t),HSe(t,e)}$Se();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KSe="type.googleapis.com/google.protobuf.Int64Value",qSe="type.googleapis.com/google.protobuf.UInt64Value";function VK(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function G_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>G_(e));if(typeof t=="function"||typeof t=="object")return VK(t,e=>G_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case KSe:case qSe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bh(e)):typeof t=="function"||typeof t=="object"?VK(t,e=>Bh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ai extends ji{constructor(e,n,r){super(`${XN}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ai.prototype)}}function GSe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Q_(t,e){let n=GSe(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!SV[o])return new ai("internal","internal");n=SV[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=Bh(i))}}catch{}return n==="ok"?null:new ai(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QSe{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ur(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="us-central1",YSe=/^data: (.*?)(?:\n|$)/;function XSe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ai("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class JSe{constructor(e,n,r,i,s=C0,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new QSe(e,n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=C0}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ZSe(t,e,n){const r=ss(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Bg(t.emulatorOrigin+"/backends"),Hg("Functions",!0))}function ebe(t,e,n){const r=i=>nbe(t,e,i,{});return r.stream=(i,s)=>ibe(t,e,i,s),r}function jK(t){return t.emulatorOrigin&&ss(t.emulatorOrigin)?"include":void 0}async function tbe(t,e,n,r,i){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:jK(i)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function UK(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function nbe(t,e,n,r){const i=t._url(e);return rbe(t,i,n,r)}async function rbe(t,e,n,r){n=G_(n);const i={data:n},s=await UK(t,r),o=r.timeout||7e4,a=XSe(o),c=await Promise.race([tbe(e,i,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!c)throw new ai("cancelled","Firebase Functions instance was deleted.");const l=Q_(c.status,c.json);if(l)throw l;if(!c.json)throw new ai("internal","Response is not valid JSON object.");let u=c.json.data;if(typeof u>"u"&&(u=c.json.result),typeof u>"u")throw new ai("internal","Response is missing data field.");return{data:Bh(u)}}function ibe(t,e,n,r){const i=t._url(e);return sbe(t,i,n,r||{})}async function sbe(t,e,n,r){var h;n=G_(n);const i={data:n},s=await UK(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r==null?void 0:r.signal,credentials:jK(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const v=new ai("cancelled","Request was cancelled.");return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}const _=Q_(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,c;const l=new Promise((m,_)=>{a=m,c=_});(h=r==null?void 0:r.signal)==null||h.addEventListener("abort",()=>{const m=new ai("cancelled","Request was cancelled.");c(m)});const u=o.body.getReader(),d=obe(u,a,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=d.getReader();return{async next(){const{value:_,done:v}=await m.read();return{value:_,done:v}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:l}}function obe(t,e,n,r){const i=(o,a)=>{const c=o.match(YSe);if(!c)return;const l=c[1];try{const u=JSON.parse(l);if("result"in u){e(Bh(u.result));return}if("message"in u){a.enqueue(Bh(u.message));return}if("error"in u){const d=Q_(0,u);a.error(d),n(d);return}}catch(u){if(u instanceof ai){a.error(u),n(u);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return c();async function c(){if(r!=null&&r.aborted){const l=new ai("cancelled","Request was cancelled");return o.error(l),n(l),Promise.resolve()}try{const{value:l,done:u}=await t.read();if(u){a.trim()&&i(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const h=new ai("cancelled","Request was cancelled");o.error(h),n(h),await t.cancel();return}a+=s.decode(l,{stream:!0});const d=a.split(`
`);a=d.pop()||"";for(const h of d)h.trim()&&i(h.trim(),o);return c()}catch(l){const u=l instanceof ai?l:Q_(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const bV="@firebase/functions",IV="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const abe="auth-internal",cbe="app-check-internal",lbe="messaging-internal";function ube(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(abe),o=n.getProvider(lbe),a=n.getProvider(cbe);return new JSe(i,s,o,a,r)};Wr(new Rr(XN,e,"PUBLIC").setMultipleInstances(!0)),xn(bV,IV,t),xn(bV,IV,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dbe(t=fl(),e=C0){const r=Us(Ge(t),XN).getImmediate({identifier:e}),i=gC("functions");return i&&hbe(r,...i),r}function hbe(t,e,n){ZSe(Ge(t),e,n)}function tDe(t,e,n){return ebe(Ge(t),e)}ube();const fbe={apiKey:"AIzaSyCmioywtCMDFJjDvq8bF0_NBZJC5nyVPYo",authDomain:"huddlely.firebaseapp.com",projectId:"huddlely",storageBucket:"huddlely.firebasestorage.app",messagingSenderId:"788189911710",appId:"1:788189911710:web:3fd75fade0c56164d5b98f",measurementId:"G-8ZE8GCXPRX"},Xu=Qde().length===0?y6(fbe):fl(),Qs=Xye(Xu),Re=nme(Xu),Yo=fTe(Xu),gb=OCe(Xu);ZEe(Xu);const sE=new Go,nDe=dbe(Xu,"us-central1");let $K=null;if(typeof window<"u")try{$K=zSe(Xu)}catch(t){console.log("Messaging not available:",t)}sE.addScope("https://www.googleapis.com/auth/calendar");sE.addScope("https://www.googleapis.com/auth/userinfo.profile");sE.addScope("https://www.googleapis.com/auth/userinfo.email");const AV=t=>new Yge(Qs,t,{size:"normal",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),pbe=async(t,e)=>{try{return await Zge(Qs,t,e)}catch(n){throw console.error("Error sending OTP:",n),n}},mbe=async(t,e)=>{try{return await t.confirm(e)}catch(n){throw console.error("Error verifying OTP:",n),n}},yb=768;function Rf(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${yb-1}px)`),r=()=>{e(window.innerWidth<yb)};return n.addEventListener("change",r),e(window.innerWidth<yb),()=>n.removeEventListener("change",r)},[]),!!t}const BK=g.createContext(void 0),gbe=({children:t})=>{const e=Rf(),[n,r]=g.useState(e?"collapsed":"expanded"),[i,s]=g.useState(!1);g.useEffect(()=>{r(e?"collapsed":"expanded")},[e]);const o=()=>{r(a=>a==="expanded"?"collapsed":"expanded")};return p.jsx(BK.Provider,{value:{state:n,setState:r,toggleSidebar:o,isChatOpenMobile:i,setChatOpenMobile:s},children:t})},oE=()=>{const t=g.useContext(BK);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},HK=g.forwardRef(({className:t,...e},n)=>p.jsx("aside",{ref:n,className:ue("flex flex-col",t),...e}));HK.displayName="Sidebar";const zK=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("flex flex-col overflow-y-auto",t),...e}));zK.displayName="SidebarContent";const WK=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("flex flex-col",t),...e}));WK.displayName="SidebarGroup";const KK=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:ue("px-4 py-2 text-xs font-semibold text-muted-foreground",t),...e}));KK.displayName="SidebarGroupLabel";const qK=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("flex flex-col",t),...e}));qK.displayName="SidebarGroupContent";const GK=g.forwardRef(({className:t,...e},n)=>p.jsx("ul",{ref:n,className:ue("space-y-1",t),...e}));GK.displayName="SidebarMenu";const E0=g.forwardRef(({className:t,...e},n)=>p.jsx("li",{ref:n,className:ue("",t),...e}));E0.displayName="SidebarMenuItem";const nw=g.forwardRef(({className:t,...e},n)=>p.jsx("button",{ref:n,className:ue("flex w-full items-center gap-3 px-3 py-2 text-sm",t),...e}));nw.displayName="SidebarMenuButton";const ybe=g.forwardRef(({className:t,...e},n)=>p.jsx("hr",{ref:n,className:ue("my-2 border-border/50",t),...e}));ybe.displayName="SidebarSeparator";const QK=g.forwardRef((t,e)=>{const{toggleSidebar:n}=oE();return p.jsx("button",{ref:e,onClick:n,...t})});QK.displayName="SidebarTrigger";const vbe=jg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function pi({className:t,variant:e,...n}){return p.jsx("div",{className:ue(vbe({variant:e}),t),...n})}var aE="Collapsible",[wbe]=Gr(aE),[_be,JN]=wbe(aE),YK=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[c,l]=Na({prop:r,defaultProp:i??!1,onChange:o,caller:aE});return p.jsx(_be,{scope:n,disabled:s,contentId:go(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:p.jsx(Fe.div,{"data-state":e1(c),"data-disabled":s?"":void 0,...a,ref:e})})});YK.displayName=aE;var XK="CollapsibleTrigger",JK=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=JN(XK,n);return p.jsx(Fe.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":e1(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Se(t.onClick,i.onOpenToggle)})});JK.displayName=XK;var ZN="CollapsibleContent",ZK=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=JN(ZN,t.__scopeCollapsible);return p.jsx(Hn,{present:n||i.open,children:({present:s})=>p.jsx(Tbe,{...r,ref:e,present:s})})});ZK.displayName=ZN;var Tbe=g.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=JN(ZN,n),[a,c]=g.useState(r),l=g.useRef(null),u=Et(e,l),d=g.useRef(0),h=d.current,m=g.useRef(0),_=m.current,v=o.open||a,T=g.useRef(v),y=g.useRef(void 0);return g.useEffect(()=>{const w=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(w)},[]),gi(()=>{const w=l.current;if(w){y.current=y.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const C=w.getBoundingClientRect();d.current=C.height,m.current=C.width,T.current||(w.style.transitionDuration=y.current.transitionDuration,w.style.animationName=y.current.animationName),c(r)}},[o.open,r]),p.jsx(Fe.div,{"data-state":e1(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":_?`${_}px`:void 0,...t.style},children:v&&i})});function e1(t){return t?"open":"closed"}var Cbe=YK;const Ebe=Cbe,Sbe=JK,bbe=ZK,eq=g.createContext(void 0);function Ibe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(null),[s,o]=g.useState(!0),{toast:a}=Pa();g.useEffect(()=>{const R=kge(Qs,async O=>{n(O),O?await l(O):i(null),o(!1)});return()=>R()},[]);const c=async R=>{const O=Ke(Re,"users",R),P=await yd(O);P.exists()&&i(P.data())},l=async R=>{const O=Ke(Re,"users",R.uid),P=await yd(O);if(P.exists()){const z=P.data();i(z),await Vn(O,{lastLoginAt:new Date().toISOString()})}else{const z={uid:R.uid,email:R.email||"",displayName:R.displayName||"",photoURL:R.photoURL||"",phoneNumber:R.phoneNumber||"",emailVerified:R.emailVerified,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),preferences:{notifications:!0,theme:"system",language:"en"},teamId:null,role:"user"};await ng(O,z),i(z)}},N={user:e,userProfile:r,loading:s,signIn:async(R,O)=>{await Ege(Qs,R,O)},signUp:async(R,O,P)=>{const z=await Cge(Qs,R,O);z.user&&P&&await bge(z.user,{displayName:P}),z.user&&await uF(z.user)},signInWithGoogle:async()=>{try{const{UniversalGoogleAuth:R}=await Ft(async()=>{const{UniversalGoogleAuth:O}=await import("./universalAuth-Dj9FqkRU.js");return{UniversalGoogleAuth:O}},[]);await R.signIn()}catch(R){console.error("Google Sign-In failed:",R),await sye(Qs,sE)}},signInWithMicrosoft:async()=>{const R=new eh("microsoft.com");try{if(!Qs.currentUser)throw new Error("You must be logged in with Google/Email before linking Microsoft.");const O=await oye(Qs.currentUser,R);a({title:"Microsoft Linked ✅",description:`Connected as ${O.user.displayName||O.user.email}`});const P=eh.credentialFromResult(O),z=P==null?void 0:P.accessToken;console.log("Microsoft Access Token:",z)}catch(O){O.code==="auth/credential-already-in-use"?a({title:"Already Linked",description:"This Microsoft account is already linked with another user.",variant:"destructive"}):(console.error("Microsoft linking error:",O),a({title:"Microsoft Link Failed",description:O.message,variant:"destructive"}))}},signInWithPhone:async R=>{const O=AV("recaptcha-container");return await pbe(R,O)},verifyPhoneOTP:async(R,O)=>{await mbe(R,O)},signOutUser:async()=>{await xge(Qs)},updateUserProfile:async R=>{if(!e||!r)return;const O=Ke(Re,"users",e.uid);await Vn(O,R),i({...r,...R}),a({title:"Profile Updated! ✨"})},sendVerificationEmail:async()=>{e&&await uF(e)},resetPassword:async R=>{await Tge(Qs,R),a({title:"Password reset email sent!",description:"Check your inbox for reset instructions."})},setupPhoneAuth:R=>AV(R),sendTeamRequest:async R=>{if(!e||!r)throw new Error("Authentication required.");if(e.email===R)throw new Error("You cannot send a request to yourself.");const O=hr(Re,"users"),P=Ta(O,Yp("email","==",R)),z=await XA(P);if(z.empty)throw new Error("No user found with this email address.");const K=z.docs[0];await Cf(hr(Re,"teamRequests"),{senderId:e.uid,senderName:r.displayName||e.email,senderEmail:e.email,receiverId:K.id,receiverEmail:K.data().email,status:"pending",createdAt:I_()}),a({title:"Team request sent! 🚀"})},fetchReceivedTeamRequests:async()=>{if(!e)return[];const R=hr(Re,"teamRequests"),O=Ta(R,Yp("receiverId","==",e.uid),Yp("status","==","pending"));return(await XA(O)).docs.map(z=>({id:z.id,...z.data()}))},acceptTeamRequest:async(R,O)=>{if(!e)throw new Error("You must be logged in to accept a request.");o(!0);const P=A_(Re);try{const z=Ke(Re,"users",O),K=await yd(z);if(!K.exists())throw new Error("The user who sent the invite no longer exists.");const q=K.data().teamId,F=Ke(Re,"users",e.uid),V=Ke(Re,"teamRequests",R);if(q){const X=Ke(Re,"teams",q);P.update(X,{memberIds:Yz(e.uid)}),P.update(F,{teamId:q})}else{const X=Ke(hr(Re,"teams"));P.set(X,{memberIds:[O,e.uid],createdAt:I_(),createdBy:O}),P.update(z,{teamId:X.id}),P.update(F,{teamId:X.id})}P.delete(V),await P.commit(),await c(e.uid),a({title:"Team request accepted! 🎉",description:"You are now part of the team."})}catch(z){throw console.error("Error accepting team request:",z),a({title:"Failed to accept request",description:z.message,variant:"destructive"}),z}finally{o(!1)}},declineTeamRequest:async R=>{const O=Ke(Re,"teamRequests",R);await Ro(O),a({title:"Team request declined"})},fetchTeamMembers:async()=>{if(!(r!=null&&r.teamId))return[];const R=Ke(Re,"teams",r.teamId),O=await yd(R);if(!O.exists())return await Vn(Ke(Re,"users",r.uid),{teamId:null}),i(K=>K?{...K,teamId:null}:null),[];const P=O.data(),z=[];for(const K of P.memberIds){const U=Ke(Re,"users",K),q=await yd(U);q.exists()&&z.push(q.data())}return z}};return p.jsx(eq.Provider,{value:N,children:!s&&t})}function Nn(){const t=g.useContext(eq);if(t===void 0)throw new Error("useAuth must be used within an AuthContextProvider");return t}const Ml=class Ml{constructor(){It(this,"db",null);It(this,"dbName","TasklyOfflineDB");It(this,"version",1)}static getInstance(){return Ml.instance||(Ml.instance=new Ml),Ml.instance}async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{n(new Error("Failed to open IndexedDB"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(!s.objectStoreNames.contains("tasks")){const o=s.createObjectStore("tasks",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("priority","priority",{unique:!1}),o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("notes")){const o=s.createObjectStore("notes",{keyPath:"id"});o.createIndex("lastModified","lastModified",{unique:!1}),o.createIndex("syncStatus","syncStatus",{unique:!1})}if(!s.objectStoreNames.contains("offlineActions")){const o=s.createObjectStore("offlineActions",{keyPath:"id"});o.createIndex("timestamp","timestamp",{unique:!1}),o.createIndex("type","type",{unique:!1})}if(s.objectStoreNames.contains("userData")||s.createObjectStore("userData",{keyPath:"key"}),!s.objectStoreNames.contains("scheduledNotifications")){const o=s.createObjectStore("scheduledNotifications",{keyPath:"id"});o.createIndex("status","status",{unique:!1}),o.createIndex("scheduledTime","scheduledTime",{unique:!1}),o.createIndex("createdAt","createdAt",{unique:!1})}s.objectStoreNames.contains("activeTimerSession")||s.createObjectStore("activeTimerSession",{keyPath:"id"})}})}async getStore(e,n="readonly"){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize IndexedDB");if(!this.db.objectStoreNames.contains(e))throw new Error(`Object store '${e}' does not exist`);return this.db.transaction([e],n).objectStore(e)}async saveTasks(e){const n=await this.getStore("tasks","readwrite"),r=e.map(i=>new Promise((s,o)=>{const a=n.put({...i,lastModified:Date.now()});a.onsuccess=()=>s(),a.onerror=()=>o(a.error)}));await Promise.all(r)}async saveTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getTasks(){const e=await this.getStore("tasks");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async getTask(e){const n=await this.getStore("tasks");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}async deleteTask(e){const n=await this.getStore("tasks","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async saveNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.put({...e,lastModified:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getNotes(){const e=await this.getStore("notes");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async deleteNote(e){const n=await this.getStore("notes","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async queueAction(e){const n=await this.getStore("offlineActions","readwrite"),r={...e,id:crypto.randomUUID(),retryCount:0};return new Promise((i,s)=>{const o=n.put(r);o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getQueuedActions(){const e=await this.getStore("offlineActions");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>{const s=i.result.sort((o,a)=>o.timestamp-a.timestamp);n(s)},i.onerror=()=>r(i.error)})}async removeAction(e){const n=await this.getStore("offlineActions","readwrite");return new Promise((r,i)=>{const s=n.delete(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async updateActionRetryCount(e,n){const r=await this.getStore("offlineActions","readwrite");return new Promise((i,s)=>{const o=r.get(e);o.onsuccess=()=>{const a=o.result;if(a){a.retryCount=n;const c=r.put(a);c.onsuccess=()=>i(),c.onerror=()=>s(c.error)}else i()},o.onerror=()=>s(o.error)})}async clearAllActions(){const e=await this.getStore("offlineActions","readwrite");return new Promise((n,r)=>{const i=e.clear();i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})}async setUserData(e,n){const r=await this.getStore("userData","readwrite");return new Promise((i,s)=>{const o=r.put({key:e,value:n,timestamp:Date.now()});o.onsuccess=()=>i(),o.onerror=()=>s(o.error)})}async getUserData(e){const n=await this.getStore("userData");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>{var o;return r((o=s.result)==null?void 0:o.value)},s.onerror=()=>i(s.error)})}async getTasksByStatus(e){const r=(await this.getStore("tasks")).index("status");return new Promise((i,s)=>{const o=r.getAll(e);o.onsuccess=()=>i(o.result),o.onerror=()=>s(o.error)})}async getUnsyncedItems(){const[e,n,r]=await Promise.all([this.getTasks(),this.getNotes(),this.getQueuedActions()]);return{tasks:e.filter(i=>i.syncStatus!=="synced"),notes:n.filter(i=>i.syncStatus!=="synced"),actions:r}}async clearDatabase(){const n=["tasks","notes","offlineActions","userData"].map(async r=>{const i=await this.getStore(r,"readwrite");return new Promise((s,o)=>{const a=i.clear();a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})});await Promise.all(n)}};It(Ml,"instance");let S0=Ml;const st=S0.getInstance(),Dl=class Dl{constructor(){It(this,"checkInterval",null)}static getInstance(){return Dl.instance||(Dl.instance=new Dl),Dl.instance}async init(){await st.init(),this.startScheduleChecker(),await this.checkMissedNotifications(),console.log("PWA Notification Scheduler Initializing...")}async scheduleNotification(e){const n={...e,createdAt:Date.now(),status:"pending"};await this.saveScheduledNotification(n),console.log("[2/5] pwaNotificationScheduler: Saving notification to IndexedDB.",n);const r=e.scheduledTime-Date.now();return r<=5*60*1e3&&r>0&&setTimeout(()=>this.deliverNotification(n.id),r),n.id}async cancelNotification(e){const n=await this.getScheduledNotification(e);n&&(n.status="expired",await this.saveScheduledNotification(n))}async saveScheduledNotification(e){const n=await st.getStore("scheduledNotifications","readwrite");return new Promise((r,i)=>{const s=n.put(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getScheduledNotification(e){const n=await st.getStore("scheduledNotifications");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result||null),s.onerror=()=>i(s.error)})}async getAllPendingNotifications(){const n=(await st.getStore("scheduledNotifications")).index("status");return new Promise((r,i)=>{const s=n.getAll("pending");s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}startScheduleChecker(){this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=window.setInterval(()=>this.checkDueNotifications(),3e4)}async checkDueNotifications(){try{if(console.log("[3/5] pwaNotificationScheduler: Checking for due notifications...",new Date().toLocaleTimeString()),typeof st.getStore!="function")return;const e=await this.getAllPendingNotifications(),n=Date.now();for(const r of e)r.scheduledTime<=n&&await this.deliverNotification(r.id)}catch(e){console.error("Error checking due notifications:",e)}}async checkMissedNotifications(){try{const e=await this.getAllPendingNotifications(),n=Date.now();let r=0;for(const i of e)i.scheduledTime<=n&&(await this.deliverNotification(i.id),r++);r>0&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly - Missed Notifications",{body:`You had ${r} missed notification${r>1?"s":""} while you were away.`,icon:"/icon-192x192.png",tag:"missed-notifications"})}catch(e){console.error("Error checking missed notifications:",e)}}async deliverNotification(e){var n;try{const r=await this.getScheduledNotification(e);if(!r||r.status!=="pending")return;if(Date.now()-r.scheduledTime>60*60*1e3){r.status="expired",await this.saveScheduledNotification(r);return}((n=r.data)==null?void 0:n.type)==="actionable-task-reminder"?(console.log("[4/5] pwaNotificationScheduler: Delivering notification! Firing event.",r),window.dispatchEvent(new CustomEvent("show-actionable-reminder",{detail:{task:r.data.task,minutesBefore:r.data.minutesBefore}}))):"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",options:{...r}}):"Notification"in window&&Notification.permission==="granted"&&new Notification(r.title,{...r}),r.status="delivered",await this.saveScheduledNotification(r)}catch(r){console.error("Error delivering notification:",r)}}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}};It(Dl,"instance");let b0=Dl;const vd=b0.getInstance(),Abe=Object.freeze(Object.defineProperty({__proto__:null,pwaNotificationScheduler:vd},Symbol.toStringTag,{value:"Module"})),kbe=jg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-elegant transition-smooth",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",focus:"gradient-primary text-focus-foreground hover:shadow-glow transition-smooth",break:"gradient-secondary text-break-foreground hover:shadow-elegant transition-smooth",success:"bg-success text-success-foreground hover:bg-success/90 transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ue=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?bH:"button";return p.jsx(o,{className:ue(kbe({variant:e,size:n,className:t})),ref:s,...i})});Ue.displayName="Button";function xbe({task:t,onSnooze:e,onComplete:n,onDismiss:r}){return p.jsxs("div",{className:"w-full max-w-sm bg-card text-card-foreground rounded-xl shadow-lg border border-border/50 p-4 flex items-start gap-4 animate-in slide-in-from-bottom-5 fade-in-0 duration-300",children:[p.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:p.jsx(lA,{className:"h-5 w-5 text-primary"})}),p.jsxs("div",{className:"flex-1 space-y-3",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"font-semibold",children:["Task Due: ",t.title]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Your scheduled task is now due."})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ue,{size:"sm",variant:"outline",onClick:e,className:"flex-1",children:[p.jsx(AR,{className:"h-4 w-4 mr-2"}),"Snooze (15m)"]}),p.jsxs(Ue,{size:"sm",variant:"focus",onClick:n,className:"flex-1",children:[p.jsx(iC,{className:"h-4 w-4 mr-2"}),"Mark Done"]})]})]}),p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-6 w-6 absolute top-2 right-2 text-muted-foreground hover:text-foreground",onClick:r,children:p.jsx(ul,{className:"h-4 w-4"})})]})}let I0=null;const kV=t=>{I0=t},Ll=class Ll{constructor(){It(this,"permission","default");It(this,"pendingAssignments",new Map);this.checkPermission(),this.setupServiceWorker()}static getInstance(){return Ll.instance||(Ll.instance=new Ll),Ll.instance}async addInAppNotification(e,n,r,i,s){if(I0)try{await I0({title:n,body:r,type:i,read:!1,data:s||{}},e),console.log("In-app notification added:",{title:n,body:r,type:i})}catch(o){console.error("Failed to add in-app notification:",o)}else console.warn("Global addNotification function not available")}checkPermission(){"Notification"in window&&(this.permission=Notification.permission)}async setupServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}catch(e){console.warn("Service Worker registration failed:",e)}}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.permission==="granted")return!0;const e=await Notification.requestPermission();return this.permission=e,e==="granted"}async showNotification(e,n){if(this.permission!=="granted")return console.warn("Notification permission not granted"),null;const r={icon:"/favicon.ico",badge:"/favicon.ico",tag:"mindmeld-notification",requireInteraction:!1,silent:!1,...n};try{if("serviceWorker"in navigator&&"actions"in Notification.prototype&&r.actions&&r.actions.length>0)if("serviceWorker"in navigator)try{return await(await navigator.serviceWorker.ready).showNotification(e,r),null}catch(s){console.warn("Service Worker notification failed, falling back to basic notification:",s);const{actions:o,...a}=r,c=new Notification(e,a);return a.requireInteraction||setTimeout(()=>{c.close()},5e3),c}else{const{actions:s,...o}=r,a=new Notification(e,o);return o.requireInteraction||setTimeout(()=>{a.close()},5e3),a}else{const s=new Notification(e,r);return r.requireInteraction||setTimeout(()=>{s.close()},5e3),s}}catch(i){return console.error("Failed to show notification:",i),null}}showActionableTaskReminder(e){Sr.custom(n=>p.jsx(xbe,{task:e,onSnooze:()=>{window.dispatchEvent(new CustomEvent("snooze-task",{detail:{taskId:e.id,minutes:15}})),Sr.info(`Task "${e.title}" snoozed for 15 minutes.`),Sr.dismiss(n)},onComplete:()=>{window.dispatchEvent(new CustomEvent("complete-task-from-toast",{detail:{taskId:e.id}})),Sr.success(`Task "${e.title}" marked as complete.`),Sr.dismiss(n)},onDismiss:()=>Sr.dismiss(n)}),{duration:6e4})}async scheduleActionableReminder(e){if(!e.dueDate)return;const n=new Date(e.dueDate);if(n<=new Date)return;const i=`actionable-reminder-${e.id}`;console.log(`[1/5] scheduleActionableReminder: Scheduling toast reminder for task "${e.title}"`),console.log(`   - Reminder will fire at due time: ${n.toLocaleString()}`),await vd.cancelNotification(i),await vd.scheduleNotification({id:i,title:`Reminder: ${e.title}`,body:"This task is now due.",scheduledTime:n.getTime(),data:{type:"actionable-task-reminder",task:e}})}showPomodoroNotification(e,n){const i={"focus-complete":{title:"🎉 Focus Session Complete!",body:`Great work! Time for a well-deserved break. Sessions completed: ${n||0}`,actions:[{action:"start-break",title:"☕ Start Break"},{action:"continue",title:"🔄 Continue Working"}]},"break-complete":{title:"⚡ Break Time Over!",body:"Ready to focus again? Let's get back to work!",actions:[{action:"start-focus",title:"🎯 Start Focus"},{action:"extend-break",title:"⏰ Extend Break"}]}}[e];this.showNotification(i.title,{body:i.body,tag:`pomodoro-${e}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:i.actions}})}showTaskCompleteNotification(e){this.showNotification("🎯 Task Completed!",{body:`Great job completing "${e}"!`,tag:"task-complete",..."serviceWorker"in navigator&&{actions:[{action:"view-stats",title:"📊 View Stats"},{action:"next-task",title:"➡️ Next Task"}]}})}showTaskAssignmentNotification(e,n,r){if(!e.assignedTo||!e.assignedTo.includes(r))return;this.addInAppNotification(r,"New Task Assignment",`${n} assigned "${e.title}" to you`,"task-assignment",{taskId:e.id,taskTitle:e.title,assignerName:n,priority:e.priority});const i=e.priority==="high"?"🔥":e.priority==="medium"?"⚡":"📝",s=e.dueDate?` (Due: ${new Date(e.dueDate).toLocaleDateString()})`:"";this.showNotification(`${i} New Task Assignment`,{body:`${n} assigned "${e.title}" to you${s}`,tag:`task-assignment-${e.id}`,requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"start-task",title:"▶️ Start Now"},{action:"view-task",title:"👁️ View Details"},{action:"mark-progress",title:"🔄 Mark In Progress"}]},data:{taskId:e.id,type:"assignment",priority:e.priority,assignerName:n}})}showBulkAssignmentNotification(e,n){this.showNotification("📋 Multiple Task Assignments",{body:`${n} assigned ${e} tasks to you`,tag:"bulk-assignment",requireInteraction:!0,..."serviceWorker"in navigator&&{actions:[{action:"view-all-tasks",title:"📋 View All Tasks"},{action:"prioritize",title:"🎯 Help Me Prioritize"}]},data:{type:"bulk-assignment",taskCount:e,assignerName:n}})}showSmartTaskSuggestion(e,n){this.showNotification("🤖 AI Task Suggestion",{body:`Based on your schedule, I suggest working on "${e.title}" now. ${n}`,tag:`ai-suggestion-${e.id}`,..."serviceWorker"in navigator&&{actions:[{action:"start-suggested",title:"🚀 Start Now"},{action:"schedule-later",title:"⏰ Schedule Later"},{action:"dismiss-suggestion",title:"❌ Not Now"}]},data:{taskId:e.id,type:"ai-suggestion",reason:n}})}showTeamCollaborationUpdate(e,n,r){const i={started:"▶️",completed:"✅",commented:"💬",updated:"📝"};this.showNotification(`${i[n]||"📋"} Team Update`,{body:`${e} ${n} "${r}"`,tag:`team-update-${Date.now()}`,..."serviceWorker"in navigator&&{actions:[{action:"view-task",title:"👁️ View Task"},{action:"send-message",title:"💬 Send Message"}]},data:{type:"team-collaboration",action:n,teamMemberName:e}})}showWorkloadBalanceAlert(e,n){this.showNotification("⚖️ Workload Balance Alert",{body:`You have ${e} active tasks. ${n}`,tag:"workload-balance",..."serviceWorker"in navigator&&{actions:[{action:"auto-prioritize",title:"🤖 Auto-Prioritize"},{action:"delegate-tasks",title:"👥 Delegate Tasks"},{action:"schedule-break",title:"☕ Schedule Break"}]},data:{type:"workload-balance",currentTasks:e}})}handleTaskAssignment(e,n,r){if(!e.assignedTo||!e.assignedTo.includes(r))return"none";const i=`${n}-${r}`;if(this.pendingAssignments.has(i)){const s=this.pendingAssignments.get(i);clearTimeout(s.timeout);const o=s.count+1;if(o>=3)return this.showBulkAssignmentNotification(o,n),this.pendingAssignments.delete(i),"bulk";const a=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:o,timeout:a})}else{const s=setTimeout(()=>{this.pendingAssignments.delete(i)},3e4);this.pendingAssignments.set(i,{count:1,timeout:s})}return this.showTaskAssignmentNotification(e,n,r),"single"}showDailyMotivation(){const e=["Ready to crush your goals today? 💪","Every small step counts towards your success! 🌟","Focus on progress, not perfection! 🎯","You've got this! Let's make today productive! 🚀","Time to turn your dreams into achievements! ✨"],n=e[Math.floor(Math.random()*e.length)];this.showNotification("🌅 Good Morning!",{body:n,tag:"daily-motivation"})}async clearScheduledNotification(e){await vd.cancelNotification(e)}async clearAllScheduledNotifications(){const e=await vd.getAllPendingNotifications();for(const n of e)await vd.cancelNotification(n.id)}getScheduledNotificationsCount(){return 0}isPermissionGranted(){return this.permission==="granted"}showDailySummary(e){const{tasksCompleted:n,focusTime:r,sessionsCompleted:i}=e;this.showNotification("📊 Daily Summary",{body:`Today: ${n} tasks completed, ${r}min focused, ${i} sessions`,tag:"daily-summary",requireInteraction:!1})}showWeeklyGoalReminder(){this.showNotification("🎯 Weekly Goals Check-in",{body:"How are you progressing with your weekly goals? Take a moment to review!",tag:"weekly-goals",..."serviceWorker"in navigator&&{actions:[{action:"review-goals",title:"📋 Review Goals"},{action:"update-goals",title:"✏️ Update Goals"}]}})}};It(Ll,"instance");let A0=Ll;const Ys=A0.getInstance();"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{const{action:e,data:n}=t.data;switch(e){case"notification-click":console.log("Notification clicked:",n);break;case"notification-action":console.log("Notification action:",n);break}});function Rbe(){const t=g.useRef({}),e=g.useCallback(i=>{if(!t.current[i]){const s=new Audio(i);s.preload="auto",s.addEventListener("error",()=>{console.warn(`Sound file not found: ${i}. Skipping audio playback.`)}),t.current[i]=s}return t.current[i]},[]),n=g.useCallback(async i=>{try{const s=e(i);s.currentTime=0;const o=s.play();o!==void 0&&await o}catch{console.warn(`Could not play sound: ${i}. This is likely due to missing audio files or browser restrictions.`)}},[e]),r=g.useCallback(()=>{e("/sounds/iphone_ding.mp3"),e("/sounds/ting.mp3")},[e]);return{playSound:n,preloadSound:e,preloadCommonSounds:r}}const tq=g.createContext(void 0);function Pbe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),{user:s}=Nn(),{toast:o}=Pa();g.useEffect(()=>{s?a():n([])},[s]);const a=()=>{if(!s)return;console.log("Setting up notifications real-time listener for user:",s.uid),i(!0);const v=Ta(hr(Re,"users",s.uid,"notifications"),Dh("timestamp","desc")),T=Co(v,y=>{console.log("Notifications snapshot received, size:",y.size);const w=[];y.forEach(C=>{w.push({id:C.id,...C.data()})}),n(w),i(!1)},y=>{console.error("Error in notifications listener:",y),o({title:"Connection error",description:"Lost connection to notifications. Retrying...",variant:"destructive"}),i(!1)});return()=>{console.log("Cleaning up notifications listener"),T()}},c=async(v,T)=>{const y=T||(s==null?void 0:s.uid);if(!y){console.warn("Cannot add notification: no target user specified and current user not authenticated");return}try{const w=hr(Re,"users",y,"notifications"),C={...v,userId:y,timestamp:new Date().toISOString()};console.log("Adding notification for user:",y,C),await Cf(w,C),console.log("Notification added successfully")}catch(w){console.error("Error adding notification:",w),o({title:"Failed to save notification",description:"Could not save the notification.",variant:"destructive"})}},l=async v=>{if(s)try{const T=Ke(Re,"users",s.uid,"notifications",v);await Vn(T,{read:!0}),console.log("Notification marked as read:",v)}catch(T){console.error("Error marking notification as read:",T)}},u=async()=>{if(s)try{const v=A_(Re);e.filter(y=>!y.read).forEach(y=>{const w=Ke(Re,"users",s.uid,"notifications",y.id);v.update(w,{read:!0})}),await v.commit(),console.log("All notifications marked as read"),o({title:"All notifications marked as read",description:"Your notification list has been cleared."})}catch(v){console.error("Error marking all notifications as read:",v),o({title:"Failed to mark notifications as read",description:"Could not update notifications.",variant:"destructive"})}},d=async v=>{if(s)try{const T=Ke(Re,"users",s.uid,"notifications",v);await Ro(T),console.log("Notification deleted:",v)}catch(T){console.error("Error deleting notification:",T),o({title:"Failed to delete notification",description:"Could not delete the notification.",variant:"destructive"})}},h=async()=>{if(s)try{const v=A_(Re);e.forEach(T=>{const y=Ke(Re,"users",s.uid,"notifications",T.id);v.delete(y)}),await v.commit(),console.log("All notifications cleared"),o({title:"All notifications cleared",description:"Your notification history has been cleared."})}catch(v){console.error("Error clearing all notifications:",v),o({title:"Failed to clear notifications",description:"Could not clear notifications.",variant:"destructive"})}},m=e.filter(v=>!v.read).length,_={notifications:e,unreadCount:m,loading:r,addNotification:c,markAsRead:l,markAllAsRead:u,deleteNotification:d,clearAllNotifications:h};return p.jsx(tq.Provider,{value:_,children:t})}function t1(){const t=g.useContext(tq);if(t===void 0)throw new Error("useNotifications must be used within a NotificationsContextProvider");return t}const nq="taskly_viewed_timestamps";function rq(){try{const t=localStorage.getItem(nq);return t?JSON.parse(t):{}}catch(t){return console.error("Error reading viewed timestamps from localStorage:",t),{}}}function Nbe(t){try{localStorage.setItem(nq,JSON.stringify(t))}catch(e){console.error("Error saving viewed timestamps to localStorage:",e)}}function rDe(t,e){if(!t||!e)return;const n=rq();n[t]=e,Nbe(n)}function Obe(t){return rq()[t]||null}function xV(t){if(!t.lastCommentedAt)return!1;const e=Obe(t.id);return e?new Date(t.lastCommentedAt)>new Date(e):!0}var rw={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,s,o,a;return a=1.70158,o=0,s=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),s<Math.abs(i)?(s=i,a=o/4):a=o/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*(((i*=1.525)+1)*t-i))+e:s/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,s;return s=rw.easeOutBounce(r-t,0,i,r),i-s+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,s;return t<r/2?(s=rw.easeInBounce(t*2,0,i,r),s*.5+e):(s=rw.easeOutBounce(t*2-r,0,i,r),s*.5+i*.5+e)}},Mbe=rw;function Dbe(t){return t*Math.PI/180}function Ci(t,e){return t+Math.random()*(e-t)}function Lbe(t,e){return Math.floor(t+Math.random()*(e-t+1))}var am;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(am||(am={}));var Ja;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Ja||(Ja={}));const Fbe=1e3/60;class Vbe{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Ci(5,20),this.h=Ci(5,20),this.radius=Ci(5,10),this.vx=typeof o=="number"?Ci(-o,o):Ci(o.min,o.max),this.vy=typeof a=="number"?Ci(-a,0):Ci(a.min,a.max),this.shape=Lbe(0,2),this.angle=Dbe(Ci(0,360)),this.angularSpin=Ci(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=Ci(0,1),this.rotationDirection=Ci(0,1)?Ja.Positive:Ja.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:o}=this.getOptions(),a=e/Fbe;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=i**a,this.vy*=i**a,this.rotateY>=1&&this.rotationDirection===Ja.Positive?this.rotationDirection=Ja.Negative:this.rotateY<=-1&&this.rotationDirection===Ja.Negative&&(this.rotationDirection=Ja.Positive);const c=.1*this.rotationDirection*a;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case am.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case am.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case am.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class jbe{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Ci(this.x,this.w+this.x),s=Ci(this.y,this.h+this.y);return new Vbe(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:o,particlesGenerated:a,lastNumberOfPieces:c}=this,{run:l,recycle:u,numberOfPieces:d,debug:h,tweenFunction:m,tweenDuration:_}=this.getOptions();if(!l)return!1;const v=this.particles.length,T=u?v:a;if(T<d){c!==d&&(this.tweenProgress=0,this.tweenFrom=T,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(_,Math.max(0,this.tweenProgress+i));const y=m(this.tweenProgress,this.tweenFrom,d,_),w=Math.round(y-T);for(let C=0;C<w;C++)this.particles.push(this.getParticle());this.particlesGenerated+=w}h&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,s.width-10,s.height-20));for(let y=this.particles.length-1;y>=0;y--){const w=this.particles[y];w.update(i),(w.y>s.height||w.y<-100||w.x>s.width+100||w.x<-100)&&(u&&T<=d?this.particles[y]=this.getParticle():this.removeParticleAt(y))}return v>0||T<d},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const n1={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Mbe.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Ube{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...n1,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:o,frameRate:a},canvas:c,context:l}=this,u=Math.min(i-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(a?u%a:0),s&&(l.fillStyle="white",l.clearRect(0,0,c.width,c.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new jbe(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const $be=Z.createRef();class r1 extends Z.Component{constructor(e){super(e),this.canvas=Z.createRef(),this.canvas=e.canvasRef||$be}componentDidMount(){if(this.canvas.current){const e=vb(this.props)[0];this.confetti=new Ube(this.canvas.current,e)}}componentDidUpdate(){const e=vb(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=vb(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return p.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}r1.defaultProps={...n1};r1.displayName="ReactConfetti";function vb(t){const e={},n={},r={},i=[...Object.keys(n1),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const o in t){const a=t[o];i.includes(o)?e[o]=a:s.includes(o)?s[o]=a:r[o]=a}return[e,r,n]}const Bbe=Z.forwardRef((t,e)=>p.jsx(r1,{canvasRef:e,...t}));function Hbe(){const[t,e]=g.useState({width:void 0,height:void 0});return g.useEffect(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}const iq=g.createContext(void 0);function zbe({children:t}){const[e,n]=g.useState(!1),{width:r,height:i}=Hbe(),s=g.useCallback(()=>{n(!0)},[]),o=()=>{n(!1)};return p.jsxs(iq.Provider,{value:{showConfetti:s},children:[t,e&&r&&i&&p.jsx(Bbe,{width:r,height:i,recycle:!1,numberOfPieces:500,gravity:.25,wind:.03,tweenDuration:6e3,colors:["#3b82f6","#f97316","#22c55e","#facc15"],onConfettiComplete:o})]})}function Wbe(){const t=g.useContext(iq);if(t===void 0)throw new Error("useConfetti must be used within a ConfettiProvider");return t}function cE(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function sq(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Kbe(t,e){const n=cE(t);return isNaN(e)?sq(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function qbe(t,e){const n=+cE(t);return sq(t,n+e)}const iDe=6048e5,sDe=864e5,Gbe=6e4,oDe=36e5,aDe=1e3,cDe=43200,lDe=1440;function cm(t){const e=cE(t);return e.setHours(0,0,0,0),e}function Qbe(t,e){return qbe(t,e*Gbe)}function Ybe(t,e){const n=cm(t),r=cm(e);return+n==+r}function Xbe(t){const e=cE(t);return e.setHours(23,59,59,999),e}const oq=zu("App",{web:()=>Ft(()=>import("./web-vTpKckwR.js"),[]).then(t=>new t.AppWeb)}),Fl=class Fl{constructor(){It(this,"isInitialized",!1)}static getInstance(){return Fl.instance||(Fl.instance=new Fl),Fl.instance}async init(){if(!yt.isNativePlatform()){console.log("Not running on native platform, skipping Capacitor notifications");return}try{if((await jt.requestPermissions()).display!=="granted"){console.warn("Notification permissions not granted");return}yt.getPlatform()==="android"&&(await jt.createChannel({id:"task-reminders",name:"Task Reminders",description:"Notifications for task reminders",importance:4,visibility:1,sound:"beep.wav",vibration:!0,lights:!0,lightColor:"#488AFF"}),await jt.createChannel({id:"pomodoro",name:"Pomodoro Timer",description:"Notifications for pomodoro sessions",importance:4,visibility:1,sound:"ding.wav",vibration:!0,lights:!0,lightColor:"#FF6B6B"})),await jt.addListener("localNotificationActionPerformed",n=>{this.handleNotificationAction(n)}),await jt.addListener("localNotificationReceived",n=>{console.log("Notification received:",n)}),oq.addListener("appStateChange",({isActive:n})=>{n&&this.handleAppResumed()}),this.isInitialized=!0,console.log("Capacitor notifications initialized")}catch(e){console.error("Failed to initialize Capacitor notifications:",e)}}handleNotificationAction(e){const{actionId:n,notification:r}=e;console.log("Notification action:",n,r),window.dispatchEvent(new CustomEvent("capacitor-notification-action",{detail:{actionId:n,notificationId:r.id,data:r.extra}}))}async handleAppResumed(){try{const e=await jt.getPending();console.log("Pending notifications:",e.notifications.length);const n=await jt.getDeliveredNotifications();console.log("Delivered notifications:",n.notifications.length)}catch(e){console.error("Error checking notifications on resume:",e)}}async scheduleNotification(e){if(!this.isInitialized||!yt.isNativePlatform()){console.warn("Capacitor notifications not available, falling back to web notifications");return}try{await jt.schedule({notifications:[e]}),console.log("Notification scheduled:",e.id)}catch(n){console.error("Failed to schedule notification:",n)}}async cancelNotification(e){if(!(!this.isInitialized||!yt.isNativePlatform()))try{await jt.cancel({notifications:[{id:e}]}),console.log("Notification cancelled:",e)}catch(n){console.error("Failed to cancel notification:",n)}}async cancelAllNotifications(){if(!(!this.isInitialized||!yt.isNativePlatform()))try{const e=await jt.getPending();e.notifications.length>0&&await jt.cancel({notifications:e.notifications.map(n=>({id:n.id}))}),console.log("All notifications cancelled")}catch(e){console.error("Failed to cancel all notifications:",e)}}async getPendingNotifications(){if(!this.isInitialized||!yt.isNativePlatform())return[];try{return(await jt.getPending()).notifications}catch(e){return console.error("Failed to get pending notifications:",e),[]}}async scheduleTaskReminder(e,n,r,i){const s=this.generateNotificationId(e);await this.scheduleNotification({id:s,title:n,body:r,schedule:{at:i,allowWhileIdle:!0},channelId:"task-reminders",iconColor:"#488AFF",extra:{taskId:e,type:"task-reminder"}})}async schedulePomodoroComplete(e){const n=Date.now();await this.scheduleNotification({id:n,title:`${e==="work"?"Work":"Break"} Session Complete`,body:`Great job! Time for your ${e==="work"?"break":"next work session"}.`,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"pomodoro",iconColor:"#FF6B6B",extra:{type:"pomodoro-complete",sessionType:e}})}async cancelTaskReminder(e){const n=this.generateNotificationId(e);await this.cancelNotification(n)}generateNotificationId(e){let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n)}isNativeNotificationsAvailable(){return this.isInitialized&&yt.isNativePlatform()}};It(Fl,"instance");let k0=Fl;const Ol=k0.getInstance(),aq=g.createContext(void 0);function Jbe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState([]),[s,o]=g.useState(!0),[a,c]=g.useState(!1),{user:l,userProfile:u}=Nn(),{addNotification:d}=t1(),{toast:h}=Pa(),{playSound:m,preloadCommonSounds:_}=Rbe(),{showConfetti:v}=Wbe(),T=B=>{const J=Y=>{if(!Y.dueDate)return 4;const W=cm(new Date(Y.dueDate)),te=cm(new Date);return W<te?1:Ybe(W,te)?2:3};return B.sort((Y,W)=>{const te=J(Y),we=J(W);if(te!==we)return te-we;if(te===3&&Y.dueDate&&W.dueDate){const ze=new Date(Y.dueDate).getTime(),nt=new Date(W.dueDate).getTime();if(ze!==nt)return ze-nt}const _e=xV(Y),Pe=xV(W);if(_e!==Pe)return _e?-1:1;const Ee={high:3,medium:2,low:1};return Ee[Y.priority]!==Ee[W.priority]?Ee[W.priority]-Ee[Y.priority]:new Date(W.createdAt).getTime()-new Date(Y.createdAt).getTime()})};g.useEffect(()=>{let B;return l&&u?(B=y(),_()):(n([]),i([]),o(!1)),()=>{B&&(console.log("Cleaning up all real-time listeners."),B())}},[l,u,_]);const y=g.useCallback(()=>{if(!l||!u)return;o(!0);const B=[],J=Ta(hr(Re,"users",l.uid,"tasks"),Dh("createdAt","desc")),Y=Co(J,W=>{const te=W.docs.map(we=>({id:we.id,...we.data()}));n(we=>{const _e=we.filter(Ee=>Ee.teamId),Pe=[...te,..._e];return T(Pe)}),o(!1)},W=>{console.error("Error in personal tasks listener:",W),h({title:"Connection error",description:"Lost connection to personal tasks.",variant:"destructive"}),o(!1)});if(B.push(Y),u.teamId){const W=Ta(hr(Re,"teams",u.teamId,"tasks"),Dh("createdAt","desc")),te=Co(W,Pe=>{const Ee=Pe.docs.map(ze=>({id:ze.id,...ze.data()}));n(ze=>{const ye=[...ze.filter(Me=>!Me.teamId),...Ee];return T(ye)})},Pe=>{console.error("Error in team tasks listener:",Pe),h({title:"Team connection error",description:"Lost connection to team tasks.",variant:"destructive"})});B.push(te);const we=Ke(Re,"teams",u.teamId),_e=Co(we,async Pe=>{if(Pe.exists()){const ze=Pe.data().memberIds||[];if(ze.length>0){const nt=ze.map(vt=>yd(Ke(Re,"users",vt))),Me=(await Promise.all(nt)).filter(vt=>vt.exists()).map(vt=>vt.data());i(Me)}else i([])}else i([])},Pe=>{console.error("Error in team members listener:",Pe),i([])});B.push(_e)}else i([]);return()=>{B.forEach(W=>W())}},[l,u,h]),w=g.useCallback(async B=>{if(!l||!u)return;const J=`temp-${Date.now()}`,Y=!!u.teamId,W={...B,id:J,assignedTo:B.assignedTo||[],teamId:Y?u.teamId:void 0,createdBy:l.uid,createdAt:new Date().toISOString(),status:"todo",priority:B.priority||"medium",subtasks:B.subtasks||[]};n(te=>T([W,...te])),h({title:"Task created",description:"Your task is being saved..."});try{const{id:te,...we}=W;we.teamId||delete we.teamId;const _e=Y?`teams/${u.teamId}/tasks`:`users/${l.uid}/tasks`,Pe=await Cf(hr(Re,_e),we),Ee={...W,id:Pe.id};if(n(ze=>T(ze.map(nt=>nt.id===J?Ee:nt))),Y){const{logActivity:ze}=await Ft(async()=>{const{logActivity:nt}=await import("./activityLogger-DMPUNEvH.js");return{logActivity:nt}},[]);ze(u.teamId,"TASK_CREATED",{uid:l.uid,displayName:u.displayName||l.email,photoURL:u.photoURL},{task:{id:Pe.id,title:Ee.title}})}if(Ee.dueDate&&(yt.isNativePlatform()?Ol.scheduleTaskReminder(Ee.id,Ee.title,"Your task is due now.",new Date(Ee.dueDate)):await Ys.scheduleActionableReminder(Ee)),Ee.assignedTo&&Ee.assignedTo.length>0){const ze=u.displayName||l.email||"Someone";for(const nt of Ee.assignedTo)nt!==l.uid&&Ys.handleTaskAssignment(Ee,ze,nt)}}catch(te){n(we=>T(we.filter(_e=>_e.id!==J))),console.error("Error adding task:",te),h({title:"Failed to create task",variant:"destructive"})}},[l,u,h]),C=g.useCallback(async(B,J)=>{if(!l||!u){h({title:"Authentication required",variant:"destructive"});return}let Y,W;if(n(te=>{if(Y=te.find(Ee=>Ee.id===B),!Y)return te;const we=J.assignedTo||Y.assignedTo||[],Pe=!!(u.teamId&&we.length>0)?u.teamId:null;return W={...Y,...J,teamId:Pe||void 0},W.teamId||delete W.teamId,T(te.map(Ee=>Ee.id===B?W:Ee))}),!(!Y||!W))try{const te=Y.assignedTo||[],_e=(W.assignedTo||[]).filter(ye=>!te.includes(ye));if(_e.length>0){const ye=u.displayName||l.email||"Someone";for(const Me of _e)Me!==l.uid&&Ys.handleTaskAssignment(W,ye,Me)}const Pe=(Y.teamId||null)!==(W.teamId||null),Ee={...J};if("estimatedTime"in Ee){const ye=Number(Ee.estimatedTime);isNaN(ye)||ye<=0?Ee.estimatedTime=xl():Ee.estimatedTime=ye}if(Ee.dueDate===""&&(Ee.dueDate=xl()),"completedAt"in J&&J.completedAt===void 0&&J.status!=="completed"&&(Ee.completedAt=xl()),Ee.teamId=W.teamId||xl(),Pe){const ye=Ke(Re,Y.teamId?`teams/${Y.teamId}/tasks`:`users/${l.uid}/tasks`,B);await Ro(ye);const Me=Ke(Re,W.teamId?`teams/${W.teamId}/tasks`:`users/${l.uid}/tasks`,B),{id:vt,...Mt}=W;Object.keys(Mt).forEach(zt=>{Mt[zt]===void 0&&delete Mt[zt]}),await ng(Me,Mt)}else{const ye=Ke(Re,Y.teamId?`teams/${Y.teamId}/tasks`:`users/${l.uid}/tasks`,B);await Vn(ye,Ee)}const ze="dueDate"in J&&Y.dueDate!==J.dueDate,nt="status"in J&&J.status==="completed";(ze||nt)&&(yt.isNativePlatform()?await Ol.cancelTaskReminder(B):await Ys.clearScheduledNotification(`actionable-reminder-${B}`)),ze&&!nt&&W.dueDate&&(yt.isNativePlatform()?await Ol.scheduleTaskReminder(B,W.title,"Your task is due now.",new Date(W.dueDate)):await Ys.scheduleActionableReminder(W)),h({title:"Task updated",description:"Your changes have been saved."})}catch(te){n(we=>T(we.map(_e=>_e.id===B?Y:_e))),console.error("Error updating task:",te),h({title:"Failed to update task",variant:"destructive"})}},[l,u,h]),b=g.useCallback(async B=>{if(!l)return;let J;if(n(Y=>(J=Y.find(W=>W.id===B),T(Y.filter(W=>W.id!==B)))),!!J)try{const Y=J.teamId?`teams/${J.teamId}/tasks/${B}`:`users/${l.uid}/tasks/${B}`;await Ro(Ke(Re,Y)),yt.isNativePlatform()?await Ol.cancelTaskReminder(B):await Ys.clearScheduledNotification(`actionable-reminder-${B}`),h({title:"Task deleted",variant:"destructive"})}catch(Y){n(W=>T([...W,J])),console.error("Error deleting task:",Y),h({title:"Failed to delete task",variant:"destructive"})}},[l,h]),k=g.useCallback(async(B,J)=>{var we;if(!l||!u)return;const W=await new Promise(_e=>{n(Pe=>{const Ee=Pe.find(ye=>ye.id===B);if(!Ee)return _e(void 0),Pe;const ze=Ee.status==="completed"?"todo":"completed",nt={...Ee,status:ze};return ze==="completed"?nt.completedAt=new Date().toISOString():delete nt.completedAt,_e(nt),T(Pe.map(ye=>ye.id===B?nt:ye))})});if(!W)return;const te=e.find(_e=>_e.id===B);try{if(W.status==="completed"){if((J==null?void 0:J.playSound)!==!1&&m(hA),v(),Ys.showTaskCompleteNotification(W.title),await d({title:"Task completed! 🎯",body:`Great job completing "${W.title}"!`,type:"task-complete",read:!1,data:{taskId:B,taskTitle:W.title}},l.uid),W.teamId){const{logActivity:Ee}=await Ft(async()=>{const{logActivity:ye}=await import("./activityLogger-DMPUNEvH.js");return{logActivity:ye}},[]),ze=(we=W.subtasks)==null?void 0:we.map(ye=>({...ye,completedAt:ye.completedAt||null})),nt={id:W.id,title:W.title,...ze&&{subtasks:ze},...W.timeSpent&&{timeSpent:W.timeSpent}};Ee(W.teamId,"TASK_COMPLETED",{uid:l.uid,displayName:u.displayName||l.email,photoURL:u.photoURL},{task:nt})}yt.isNativePlatform()&&await Ol.cancelTaskReminder(B)}const _e=W.teamId?`teams/${W.teamId}/tasks/${B}`:`users/${l.uid}/tasks/${B}`,Pe={status:W.status,completedAt:W.status==="completed"?W.completedAt:xl()};await Vn(Ke(Re,_e),Pe)}catch(_e){te&&n(Pe=>T(Pe.map(Ee=>Ee.id===B?te:Ee))),console.error("Error toggling task status:",_e),h({title:"Failed to update task",variant:"destructive"})}},[l,u,e,m,v,d,h]),D=g.useCallback(async B=>{if(!l)return;let J;if(n(Y=>{if(J=Y.find(te=>te.id===B),!J)return Y;const W=J.priority==="high"?"medium":"high";return T(Y.map(te=>te.id===B?{...te,priority:W}:te))}),!!J)try{const Y=J.teamId?`teams/${J.teamId}/tasks/${B}`:`users/${l.uid}/tasks/${B}`;await Vn(Ke(Re,Y),{priority:J.priority==="high"?"medium":"high"})}catch(Y){n(W=>T(W.map(te=>te.id===B?J:te))),console.error("Error toggling task priority:",Y),h({title:"Failed to update priority",variant:"destructive"})}},[l,h]),A=g.useCallback(async(B,J)=>{if(!l)return;let Y;if(n(W=>{if(Y=W.find(we=>we.id===B),!Y)return W;const te=(Y.timeSpent||0)+J;return T(W.map(we=>we.id===B?{...we,timeSpent:te}:we))}),!!Y)try{const W=Y.teamId?`teams/${Y.teamId}/tasks/${B}`:`users/${l.uid}/tasks/${B}`;await Vn(Ke(Re,W),{timeSpent:(Y.timeSpent||0)+J})}catch(W){throw n(te=>T(te.map(we=>we.id===B?Y:we))),console.error("Error updating task time:",W),W}},[l]),S=g.useCallback(async(B,J)=>{if(!l||!u)return;const Y=e.find(we=>we.id===B);if(!Y)return;const W={id:`sub-${Date.now()}`,title:J,isCompleted:!1,createdAt:new Date().toISOString()},te=[...Y.subtasks||[],W];n(we=>T(we.map(_e=>_e.id===B?{..._e,subtasks:te}:_e)));try{const we=Y.teamId?`teams/${Y.teamId}/tasks/${B}`:`users/${l.uid}/tasks/${B}`;if(await Vn(Ke(Re,we),{subtasks:te}),Y.teamId){const{logActivity:_e}=await Ft(async()=>{const{logActivity:Pe}=await import("./activityLogger-DMPUNEvH.js");return{logActivity:Pe}},[]);_e(Y.teamId,"SUBTASK_CREATED",{uid:l.uid,displayName:u.displayName||l.email,photoURL:u.photoURL},{task:{id:Y.id,title:Y.title},subtask:{id:W.id,title:W.title}})}h({title:"Subtask added!"})}catch(we){n(_e=>T(_e.map(Pe=>Pe.id===B?Y:Pe))),console.error("Error adding subtask:",we),h({title:"Failed to add subtask",variant:"destructive"})}},[e,l,u,h]),x=g.useCallback(async(B,J,Y)=>{const W=e.find(Ee=>Ee.id===B);if(!W||!W.subtasks)return;Y&&await Y.stopTracking();const te=W.subtasks.find(Ee=>Ee.id===J),we=te&&!te.isCompleted,_e=W.subtasks.map(Ee=>{if(Ee.id===J){const ze=!Ee.isCompleted;return ze&&m(hA),{...Ee,isCompleted:ze,completedAt:ze?new Date().toISOString():void 0}}return Ee});if(we&&te&&W.teamId&&l&&u){const{logActivity:Ee}=await Ft(async()=>{const{logActivity:ze}=await import("./activityLogger-DMPUNEvH.js");return{logActivity:ze}},[]);Ee(W.teamId,"SUBTASK_COMPLETED",{uid:l.uid,displayName:u.displayName||l.email,photoURL:u.photoURL},{task:{id:W.id,title:W.title},subtask:{id:te.id,title:te.title}})}const Pe=_e.every(Ee=>Ee.isCompleted);Pe&&W.status!=="completed"?(await C(B,{subtasks:_e}),await k(B),h({title:"Subtask updated!",description:"All subtasks completed! Parent task marked as complete."})):!Pe&&W.status==="completed"?(await C(B,{subtasks:_e,status:"todo",completedAt:xl()}),h({title:"Subtask updated!",description:"Parent task status reverted to 'todo'."})):(await C(B,{subtasks:_e}),h({title:"Subtask updated!"}))},[e,C,k,m,h,l,u]),N=g.useCallback(async(B,J)=>{const Y=e.find(te=>te.id===B);if(!Y||!Y.subtasks)return;const W=Y.subtasks.filter(te=>te.id!==J);await C(B,{subtasks:W}),h({title:"Subtask deleted!",variant:"destructive"})},[e,C,h]),R=g.useCallback(async(B,J,Y)=>{const W=e.find(we=>we.id===B);if(!W||!W.subtasks)return;const te=W.subtasks.map(we=>we.id===J?{...we,timeSpent:(we.timeSpent||0)+Y}:we);await C(B,{subtasks:te})},[e,C]),O=g.useCallback(async(B,J)=>{const Y=e.find(we=>we.id===B);if(!Y)return;const W=Y.lastCommentedAt?new Date(Y.lastCommentedAt).getTime():0;new Date(J).getTime()>W&&await C(B,{lastCommentedAt:J})},[e,C]);g.useEffect(()=>{const B=W=>{const{taskId:te,minutes:we}=W.detail,_e=e.find(Pe=>Pe.id===te);if(_e&&_e.dueDate){const Pe=Qbe(new Date(_e.dueDate),we);C(te,{dueDate:Pe.toISOString()})}},J=W=>{const{taskId:te,days:we}=W.detail,_e=e.find(Pe=>Pe.id===te);if(_e&&_e.dueDate){const Pe=Kbe(new Date(_e.dueDate),we);C(te,{dueDate:Pe.toISOString()})}},Y=W=>{const{taskId:te}=W.detail,we=e.find(_e=>_e.id===te);we&&we.status!=="completed"&&k(te)};return window.addEventListener("snooze-task",B),window.addEventListener("reschedule-task",J),window.addEventListener("complete-task-from-toast",Y),()=>{window.removeEventListener("snooze-task",B),window.removeEventListener("reschedule-task",J),window.removeEventListener("complete-task-from-toast",Y)}},[e,C,k]),g.useEffect(()=>{const B=J=>{const{task:Y}=J.detail;console.log('[5/5] TasksContext: Event listener caught "show-actionable-reminder"! Showing toast.',J.detail),Ys.showActionableTaskReminder(Y)};return window.addEventListener("show-actionable-reminder",B),()=>{window.removeEventListener("show-actionable-reminder",B)}},[]);const P=(B,J)=>e.filter(Y=>{const W=new Date(Y.createdAt);return W>=B&&W<=J}),z=B=>e.filter(J=>J.status===B),K=B=>e.filter(J=>J.priority===B),U=B=>{const J=cm(B),Y=Xbe(B);return e.filter(W=>{if(W.status!=="completed"||typeof W.completedAt!="string")return!1;const te=new Date(W.completedAt);return te>=J&&te<=Y})},pe={tasks:e,teamMembers:r,loading:s,isTaskFormActive:a,setTaskFormActive:c,addTask:w,updateTask:C,deleteTask:b,toggleTaskStatus:k,toggleTaskPriority:D,updateTaskTimeSpent:A,addSubtask:S,toggleSubtaskStatus:x,deleteSubtask:N,updateSubtaskTimeSpent:R,updateTaskLastCommentedAt:O,getTasksByDateRange:P,getTasksByStatus:z,getTasksByPriority:K,getTasksCompletedOnDate:U,getTotalTasksCount:()=>e.length,getCompletedTasksCount:()=>e.filter(B=>B.status==="completed").length,getActiveTasksCount:()=>e.filter(B=>B.status!=="completed").length,getCurrentStreak:()=>{if(e.length===0)return 0;let B=0,J=new Date;for(;U(J).length>0;)B++,J.setDate(J.getDate()-1);return B},getLongestStreak:()=>{if(e.length===0)return 0;const B=[...new Set(e.filter(W=>W.status==="completed"&&typeof W.completedAt=="string").map(W=>new Date(W.completedAt).setHours(0,0,0,0)))].sort((W,te)=>W-te);if(B.length===0)return 0;let J=0,Y=1;for(let W=1;W<B.length;W++)B[W]-B[W-1]===864e5?Y++:(J=Math.max(J,Y),Y=1);return Math.max(J,Y)}};return p.jsx(aq.Provider,{value:pe,children:t})}function uy(){const t=g.useContext(aq);if(t===void 0)throw new Error("useTasks must be used within a TasksContextProvider");return t}const cq=g.createContext(void 0);function lq({children:t}){const{user:e}=Nn(),{teamMembers:n}=uy(),[r,i]=g.useState({}),[s,o]=g.useState({}),[a,c]=g.useState({}),l=g.useCallback(y=>{console.log(`[DEBUG] TeamChatContext: incrementUnreadCount called for room ${y}`),o(w=>{const C=(w[y]||0)+1;return console.log(`[DEBUG] TeamChatContext: Unread count for ${y} is now ${C}`),{...w,[y]:C}})},[]),u=g.useCallback(y=>{o(w=>({...w,[y]:0}))},[]),d=g.useCallback(async y=>{if(e)try{const w=Qo(Yo,`presence/${e.uid}`);await g0(w,{online:y,lastSeen:Date.now()})}catch(w){console.error("Error updating online status:",w)}},[e]);g.useEffect(()=>{if(!e)return;d(!0);const y=()=>{d(!1)};window.addEventListener("beforeunload",y);const w=()=>{d(!document.hidden)};return document.addEventListener("visibilitychange",w),()=>{d(!1),window.removeEventListener("beforeunload",y),document.removeEventListener("visibilitychange",w)}},[e,d]),g.useEffect(()=>{if(!n.length)return;const y=[];return n.forEach(w=>{const C=Qo(Yo,`presence/${w.uid}`);dg(C,b=>{const k=b.val();k&&i(D=>({...D,[w.uid]:{online:k.online||!1,lastSeen:k.lastSeen||Date.now()}}))}),y.push(()=>GW(C))}),()=>{y.forEach(w=>w())}},[n]);const h=Object.values(s).reduce((y,w)=>y+w,0);g.useEffect(()=>{console.log(`[DEBUG] TeamChatContext: Total unread count updated to: ${h}`)},[h]);const m=g.useCallback(async(y,w)=>{if(e)try{const C=Qo(Yo,`messageStatus/${y}/${w}/${e.uid}`);await g0(C,{read:!0,readAt:Date.now()})}catch(C){console.error("Error marking message as read:",C)}},[e]),_=g.useCallback(async(y,w)=>{if(!(!e||w.length===0))try{const C={},b={read:!0,readAt:Date.now()};w.forEach(k=>{C[`messageStatus/${y}/${k}/${e.uid}`]=b}),await eTe(Qo(Yo),C)}catch(C){console.error("Error marking messages as read:",C)}},[e]),v=g.useCallback(async y=>{if(e)try{u(y);const w=Qo(Yo,`chats/${y}/messages`);dg(w,async C=>{const b=C.val();if(b){const k=Object.entries(b).filter(([D,A])=>A.senderId!==e.uid).map(([D])=>D);k.length>0&&await _(y,k)}},{onlyOnce:!0})}catch(w){console.error("Error marking chat as read:",w)}},[e,u,_]),T={onlineStatus:r,unreadCounts:s,messageStatus:a,totalUnreadCount:h,markMessageAsRead:m,markChatAsRead:v,markMessagesAsReadBatch:_,updateOnlineStatus:d,incrementUnreadCount:l,clearUnreadCount:u};return p.jsx(cq.Provider,{value:T,children:t})}function lE(){const t=g.useContext(cq);if(t===void 0)throw new Error("useTeamChat must be used within a TeamChatProvider");return t}const Zbe=[{title:"Dashboard",url:"/",icon:uA},{title:"Tasks",url:"/tasks",icon:Eu},{title:"Team Chat",url:"/team-chat",icon:u5},{title:"Meetly",url:"/meetly",icon:s5},{title:"Sales",icon:jse,adminOnly:!0,mobileHidden:!0,subItems:[{title:"Call Tracker",url:"/sales-tracker",icon:xR},{title:"Opportunities",url:"/sales-opportunity",icon:Moe},{title:"Sales Tools",url:"/sales-tools",icon:Poe}]},{title:"Focus Timer",url:"/timer",icon:l5},{title:"AI Assistant",url:"/chat",icon:kR},{title:"Calendar",url:"/calendar",icon:ZH},{title:"Notes",url:"/notes",icon:r5},{title:"Analytics",url:"/analytics",icon:uA}],uq=({onLinkClick:t,collapsed:e,isMobile:n})=>{const{totalUnreadCount:r}=lE(),s=No().pathname,{userProfile:o}=Nn(),a=(o==null?void 0:o.role)==="admin"||(o==null?void 0:o.role)==="superadmin",c=Zbe.filter(h=>(!h.adminOnly||a)&&(!n||!h.mobileHidden)),l=h=>!!(h==="/"&&s==="/"||h!=="/"&&s.startsWith(h)),u=h=>l(h)?"bg-primary/10 text-primary font-semibold":"hover:bg-accent/50 text-muted-foreground hover:text-foreground",d=h=>h.some(_=>l(_.url))?"bg-primary/10 text-primary font-semibold":"hover:bg-accent/50 text-muted-foreground hover:text-foreground";return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("div",{className:"flex items-center justify-center p-4 border-b border-border/50",children:e?p.jsx("div",{className:"gradient-primary h-9 w-9 rounded-lg flex items-center justify-center shadow-md",children:p.jsx(Eu,{className:"h-5 w-5 text-white"})}):p.jsxs("div",{className:"flex items-center gap-3 w-full px-2",children:[p.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 h-10 w-10 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:p.jsx(Eu,{className:"h-5 w-5 text-white"})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsx("h1",{className:"text-lg font-bold text-foreground tracking-tight truncate",children:"Taskly"})})]})}),p.jsx(zK,{className:"px-3 flex-1 py-4",children:p.jsxs(WK,{children:[p.jsx(KK,{className:e?"sr-only":"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Navigation"}),p.jsx(qK,{children:p.jsx(GK,{children:c.map(h=>h.subItems?p.jsxs(Ebe,{defaultOpen:h.subItems.some(m=>l(m.url)),children:[p.jsx(Sbe,{asChild:!0,children:p.jsxs(nw,{className:ue("w-full rounded-lg transition-all duration-200 group h-10",d(h.subItems)),children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx(h.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate flex-1 text-left",children:h.title})]}),!e&&p.jsx(e5,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-90"})]})}),p.jsx(bbe,{children:p.jsx("div",{className:ue("space-y-1 mt-1",e&&"hidden"),children:h.subItems.map(m=>p.jsx(E0,{children:p.jsx(gD,{to:m.url,className:"block",onClick:t,children:p.jsxs(nw,{className:ue("w-full rounded-lg transition-all duration-200 pl-11 h-9",u(m.url)),children:[p.jsx(m.icon,{className:"h-4 w-4 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate ml-3 flex-1 text-left",children:m.title})]})})},m.title))})})]},h.title):p.jsx(E0,{children:p.jsx(gD,{to:h.url,className:"block",onClick:t,children:p.jsxs(nw,{className:ue("w-full rounded-lg transition-all duration-200 group relative h-10",u(h.url)),children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx(h.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&p.jsx("span",{className:"text-sm truncate flex-1 text-left",children:h.title})]}),h.url==="/team-chat"&&r>0&&!e&&p.jsx(pi,{variant:"destructive",className:"h-5 min-w-[20px] flex items-center justify-center px-1.5 text-xs font-semibold flex-shrink-0",children:r>99?"99+":r})]})})},h.title))})})]})})]})};function eIe({className:t}){const{state:e,setState:n}=oE(),r=No(),i=Rf(),s=g.useRef(null),o=g.useRef(null),a=e==="collapsed",c=()=>{i||(s.current&&(clearTimeout(s.current),s.current=null),o.current=setTimeout(()=>{n("expanded")},5e3))},l=()=>{i||(o.current&&(clearTimeout(o.current),o.current=null),s.current=setTimeout(()=>{n("collapsed")},2e3))};return g.useEffect(()=>{if(r.pathname==="/sales-tracker"){const u=setTimeout(()=>{i||n("collapsed")},1e3);return()=>clearTimeout(u)}},[r.pathname,n,i]),i?null:p.jsx(HK,{className:ue("border-r border-border bg-background transition-all duration-300 ease-in-out h-full",a?"w-16":"w-64",t),onMouseEnter:c,onMouseLeave:l,children:p.jsx(uq,{collapsed:a,isMobile:i})})}const Xi=g.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Xi.displayName="Input";var dq={exports:{}},hq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh=g;function tIe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nIe=typeof Object.is=="function"?Object.is:tIe,rIe=Hh.useState,iIe=Hh.useEffect,sIe=Hh.useLayoutEffect,oIe=Hh.useDebugValue;function aIe(t,e){var n=e(),r=rIe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return sIe(function(){i.value=n,i.getSnapshot=e,wb(i)&&s({inst:i})},[t,n,e]),iIe(function(){return wb(i)&&s({inst:i}),t(function(){wb(i)&&s({inst:i})})},[t]),oIe(n),n}function wb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nIe(t,n)}catch{return!0}}function cIe(t,e){return e()}var lIe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cIe:aIe;hq.useSyncExternalStore=Hh.useSyncExternalStore!==void 0?Hh.useSyncExternalStore:lIe;dq.exports=hq;var uIe=dq.exports;function dIe(){return uIe.useSyncExternalStore(hIe,()=>!0,()=>!1)}function hIe(){return()=>{}}var i1="Avatar",[fIe]=Gr(i1),[pIe,fq]=fIe(i1),pq=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=g.useState("idle");return p.jsx(pIe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:p.jsx(Fe.span,{...r,ref:e})})});pq.displayName=i1;var mq="AvatarImage",gq=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=fq(mq,n),a=mIe(r,s),c=wn(l=>{i(l),o.onImageLoadingStatusChange(l)});return gi(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?p.jsx(Fe.img,{...s,ref:e,src:r}):null});gq.displayName=mq;var yq="AvatarFallback",vq=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=fq(yq,n),[o,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?p.jsx(Fe.span,{...i,ref:e}):null});vq.displayName=yq;function RV(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function mIe(t,{referrerPolicy:e,crossOrigin:n}){const r=dIe(),i=g.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=g.useState(()=>RV(s,t));return gi(()=>{a(RV(s,t))},[s,t]),gi(()=>{const c=d=>()=>{a(d)};if(!s)return;const l=c("loaded"),u=c("error");return s.addEventListener("load",l),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",l),s.removeEventListener("error",u)}},[s,n,e]),o}var wq=pq,_q=gq,Tq=vq;const uE=g.forwardRef(({className:t,...e},n)=>p.jsx(wq,{ref:n,className:ue("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));uE.displayName=wq.displayName;const dE=g.forwardRef(({className:t,...e},n)=>p.jsx(_q,{ref:n,className:ue("aspect-square h-full w-full",t),...e}));dE.displayName=_q.displayName;const hE=g.forwardRef(({className:t,...e},n)=>p.jsx(Tq,{ref:n,className:ue("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));hE.displayName=Tq.displayName;var gIe=g.createContext(void 0);function fE(t){const e=g.useContext(gIe);return t||e||"ltr"}var _b=0;function s1(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??PV()),document.body.insertAdjacentElement("beforeend",t[1]??PV()),_b++,()=>{_b===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_b--}},[])}function PV(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Tb="focusScope.autoFocusOnMount",Cb="focusScope.autoFocusOnUnmount",NV={bubbles:!1,cancelable:!0},yIe="FocusScope",pE=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=g.useState(null),l=wn(i),u=wn(s),d=g.useRef(null),h=Et(e,v=>c(v)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let v=function(C){if(m.paused||!a)return;const b=C.target;a.contains(b)?d.current=b:Ga(d.current,{select:!0})},T=function(C){if(m.paused||!a)return;const b=C.relatedTarget;b!==null&&(a.contains(b)||Ga(d.current,{select:!0}))},y=function(C){if(document.activeElement===document.body)for(const k of C)k.removedNodes.length>0&&Ga(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",T);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",T),w.disconnect()}}},[r,a,m.paused]),g.useEffect(()=>{if(a){MV.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(Tb,NV);a.addEventListener(Tb,l),a.dispatchEvent(y),y.defaultPrevented||(vIe(EIe(Cq(a)),{select:!0}),document.activeElement===v&&Ga(a))}return()=>{a.removeEventListener(Tb,l),setTimeout(()=>{const y=new CustomEvent(Cb,NV);a.addEventListener(Cb,u),a.dispatchEvent(y),y.defaultPrevented||Ga(v??document.body,{select:!0}),a.removeEventListener(Cb,u),MV.remove(m)},0)}}},[a,l,u,m]);const _=g.useCallback(v=>{if(!n&&!r||m.paused)return;const T=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(T&&y){const w=v.currentTarget,[C,b]=wIe(w);C&&b?!v.shiftKey&&y===b?(v.preventDefault(),n&&Ga(C,{select:!0})):v.shiftKey&&y===C&&(v.preventDefault(),n&&Ga(b,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return p.jsx(Fe.div,{tabIndex:-1,...o,ref:h,onKeyDown:_})});pE.displayName=yIe;function vIe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ga(r,{select:e}),document.activeElement!==n)return}function wIe(t){const e=Cq(t),n=OV(e,t),r=OV(e.reverse(),t);return[n,r]}function Cq(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function OV(t,e){for(const n of t)if(!_Ie(n,{upTo:e}))return n}function _Ie(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function TIe(t){return t instanceof HTMLInputElement&&"select"in t}function Ga(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&TIe(t)&&e&&t.select()}}var MV=CIe();function CIe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=DV(t,e),t.unshift(e)},remove(e){var n;t=DV(t,e),(n=t[0])==null||n.resume()}}}function DV(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function EIe(t){return t.filter(e=>e.tagName!=="A")}var Eb="rovingFocusGroup.onEntryFocus",SIe={bubbles:!1,cancelable:!0},dy="RovingFocusGroup",[x0,Eq,bIe]=CR(dy),[IIe,mE]=Gr(dy,[bIe]),[AIe,kIe]=IIe(dy),Sq=g.forwardRef((t,e)=>p.jsx(x0.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(x0.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(xIe,{...t,ref:e})})}));Sq.displayName=dy;var xIe=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=t,h=g.useRef(null),m=Et(e,h),_=fE(s),[v,T]=Na({prop:o,defaultProp:a??null,onChange:c,caller:dy}),[y,w]=g.useState(!1),C=wn(l),b=Eq(n),k=g.useRef(!1),[D,A]=g.useState(0);return g.useEffect(()=>{const S=h.current;if(S)return S.addEventListener(Eb,C),()=>S.removeEventListener(Eb,C)},[C]),p.jsx(AIe,{scope:n,orientation:r,dir:_,loop:i,currentTabStopId:v,onItemFocus:g.useCallback(S=>T(S),[T]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>A(S=>S+1),[]),onFocusableItemRemove:g.useCallback(()=>A(S=>S-1),[]),children:p.jsx(Fe.div,{tabIndex:y||D===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:Se(t.onMouseDown,()=>{k.current=!0}),onFocus:Se(t.onFocus,S=>{const x=!k.current;if(S.target===S.currentTarget&&x&&!y){const N=new CustomEvent(Eb,SIe);if(S.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=b().filter(U=>U.focusable),O=R.find(U=>U.active),P=R.find(U=>U.id===v),K=[O,P,...R].filter(Boolean).map(U=>U.ref.current);Aq(K,u)}}k.current=!1}),onBlur:Se(t.onBlur,()=>w(!1))})})}),bq="RovingFocusGroupItem",Iq=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=go(),l=s||c,u=kIe(bq,n),d=u.currentTabStopId===l,h=Eq(n),{onFocusableItemAdd:m,onFocusableItemRemove:_,currentTabStopId:v}=u;return g.useEffect(()=>{if(r)return m(),()=>_()},[r,m,_]),p.jsx(x0.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:p.jsx(Fe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Se(t.onMouseDown,T=>{r?u.onItemFocus(l):T.preventDefault()}),onFocus:Se(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:Se(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){u.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const y=NIe(T,u.orientation,u.dir);if(y!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let C=h().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")C.reverse();else if(y==="prev"||y==="next"){y==="prev"&&C.reverse();const b=C.indexOf(T.currentTarget);C=u.loop?OIe(C,b+1):C.slice(b+1)}setTimeout(()=>Aq(C))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:v!=null}):o})})});Iq.displayName=bq;var RIe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function PIe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function NIe(t,e,n){const r=PIe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return RIe[r]}function Aq(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function OIe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var kq=Sq,xq=Iq,MIe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},od=new WeakMap,yv=new WeakMap,vv={},Sb=0,Rq=function(t){return t&&(t.host||Rq(t.parentNode))},DIe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Rq(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},LIe=function(t,e,n,r){var i=DIe(e,Array.isArray(t)?t:[t]);vv[n]||(vv[n]=new WeakMap);var s=vv[n],o=[],a=new Set,c=new Set(i),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var m=h.getAttribute(r),_=m!==null&&m!=="false",v=(od.get(h)||0)+1,T=(s.get(h)||0)+1;od.set(h,v),s.set(h,T),o.push(h),v===1&&_&&yv.set(h,!0),T===1&&h.setAttribute(n,"true"),_||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),Sb++,function(){o.forEach(function(d){var h=od.get(d)-1,m=s.get(d)-1;od.set(d,h),s.set(d,m),h||(yv.has(d)||d.removeAttribute(r),yv.delete(d)),m||d.removeAttribute(n)}),Sb--,Sb||(od=new WeakMap,od=new WeakMap,yv=new WeakMap,vv={})}},o1=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=MIe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),LIe(r,i,n,"aria-hidden")):function(){return null}},so=function(){return so=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},so.apply(this,arguments)};function Pq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FIe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var iw="right-scroll-bar-position",sw="width-before-scroll-bar",VIe="with-scroll-bars-hidden",jIe="--removed-body-scroll-bar-size";function bb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function UIe(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var $Ie=typeof window<"u"?g.useLayoutEffect:g.useEffect,LV=new WeakMap;function BIe(t,e){var n=UIe(null,function(r){return t.forEach(function(i){return bb(i,r)})});return $Ie(function(){var r=LV.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||bb(a,null)}),s.forEach(function(a){i.has(a)||bb(a,o)})}LV.set(n,t)},[t]),n}function HIe(t){return t}function zIe(t,e){e===void 0&&(e=HIe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function WIe(t){t===void 0&&(t={});var e=zIe(null);return e.options=so({async:!0,ssr:!1},t),e}var Nq=function(t){var e=t.sideCar,n=Pq(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,so({},n))};Nq.isSideCarExport=!0;function KIe(t,e){return t.useMedium(e),Nq}var Oq=WIe(),Ib=function(){},gE=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Ib,onWheelCapture:Ib,onTouchMoveCapture:Ib}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noRelative,_=t.noIsolation,v=t.inert,T=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,C=t.gapMode,b=Pq(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,D=BIe([n,e]),A=so(so({},b),i);return g.createElement(g.Fragment,null,u&&g.createElement(k,{sideCar:Oq,removeScrollBar:l,shards:d,noRelative:m,noIsolation:_,inert:v,setCallbacks:s,allowPinchZoom:!!T,lockRef:n,gapMode:C}),o?g.cloneElement(g.Children.only(a),so(so({},A),{ref:D})):g.createElement(w,so({},A,{className:c,ref:D}),a))});gE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gE.classNames={fullWidth:sw,zeroRight:iw};var qIe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GIe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=qIe();return e&&t.setAttribute("nonce",e),t}function QIe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function YIe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var XIe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=GIe())&&(QIe(e,n),YIe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JIe=function(){var t=XIe();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Mq=function(){var t=JIe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},ZIe={left:0,top:0,right:0,gap:0},Ab=function(t){return parseInt(t||"",10)||0},eAe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Ab(n),Ab(r),Ab(i)]},tAe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ZIe;var e=eAe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},nAe=Mq(),ih="data-scroll-locked",rAe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(VIe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ih,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(iw,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(sw,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(iw," .").concat(iw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sw," .").concat(sw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ih,`] {
    `).concat(jIe,": ").concat(a,`px;
  }
`)},FV=function(){var t=parseInt(document.body.getAttribute(ih)||"0",10);return isFinite(t)?t:0},iAe=function(){g.useEffect(function(){return document.body.setAttribute(ih,(FV()+1).toString()),function(){var t=FV()-1;t<=0?document.body.removeAttribute(ih):document.body.setAttribute(ih,t.toString())}},[])},sAe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;iAe();var s=g.useMemo(function(){return tAe(i)},[i]);return g.createElement(nAe,{styles:rAe(s,!e,i,n?"":"!important")})},R0=!1;if(typeof window<"u")try{var wv=Object.defineProperty({},"passive",{get:function(){return R0=!0,!0}});window.addEventListener("test",wv,wv),window.removeEventListener("test",wv,wv)}catch{R0=!1}var ad=R0?{passive:!1}:!1,oAe=function(t){return t.tagName==="TEXTAREA"},Dq=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!oAe(t)&&n[e]==="visible")},aAe=function(t){return Dq(t,"overflowY")},cAe=function(t){return Dq(t,"overflowX")},VV=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Lq(t,r);if(i){var s=Fq(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lAe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},uAe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Lq=function(t,e){return t==="v"?aAe(e):cAe(e)},Fq=function(t,e){return t==="v"?lAe(e):uAe(e)},dAe=function(t,e){return t==="h"&&e==="rtl"?-1:1},hAe=function(t,e,n,r,i){var s=dAe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),l=!1,u=o>0,d=0,h=0;do{if(!a)break;var m=Fq(t,a),_=m[0],v=m[1],T=m[2],y=v-T-s*_;(_||y)&&Lq(t,a)&&(d+=y,h+=_);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(l=!0),l},_v=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jV=function(t){return[t.deltaX,t.deltaY]},UV=function(t){return t&&"current"in t?t.current:t},fAe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},pAe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},mAe=0,cd=[];function gAe(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(mAe++)[0],s=g.useState(Mq)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=FIe([t.lockRef.current],(t.shards||[]).map(UV),!0).filter(Boolean);return v.forEach(function(T){return T.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(v,T){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=_v(v),w=n.current,C="deltaX"in v?v.deltaX:w[0]-y[0],b="deltaY"in v?v.deltaY:w[1]-y[1],k,D=v.target,A=Math.abs(C)>Math.abs(b)?"h":"v";if("touches"in v&&A==="h"&&D.type==="range")return!1;var S=VV(A,D);if(!S)return!0;if(S?k=A:(k=A==="v"?"h":"v",S=VV(A,D)),!S)return!1;if(!r.current&&"changedTouches"in v&&(C||b)&&(r.current=k),!k)return!0;var x=r.current||k;return hAe(x,T,v,x==="h"?C:b)},[]),c=g.useCallback(function(v){var T=v;if(!(!cd.length||cd[cd.length-1]!==s)){var y="deltaY"in T?jV(T):_v(T),w=e.current.filter(function(k){return k.name===T.type&&(k.target===T.target||T.target===k.shadowParent)&&fAe(k.delta,y)})[0];if(w&&w.should){T.cancelable&&T.preventDefault();return}if(!w){var C=(o.current.shards||[]).map(UV).filter(Boolean).filter(function(k){return k.contains(T.target)}),b=C.length>0?a(T,C[0]):!o.current.noIsolation;b&&T.cancelable&&T.preventDefault()}}},[]),l=g.useCallback(function(v,T,y,w){var C={name:v,delta:T,target:y,should:w,shadowParent:yAe(y)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(b){return b!==C})},1)},[]),u=g.useCallback(function(v){n.current=_v(v),r.current=void 0},[]),d=g.useCallback(function(v){l(v.type,jV(v),v.target,a(v,t.lockRef.current))},[]),h=g.useCallback(function(v){l(v.type,_v(v),v.target,a(v,t.lockRef.current))},[]);g.useEffect(function(){return cd.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ad),document.addEventListener("touchmove",c,ad),document.addEventListener("touchstart",u,ad),function(){cd=cd.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,ad),document.removeEventListener("touchmove",c,ad),document.removeEventListener("touchstart",u,ad)}},[]);var m=t.removeScrollBar,_=t.inert;return g.createElement(g.Fragment,null,_?g.createElement(s,{styles:pAe(i)}):null,m?g.createElement(sAe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function yAe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const vAe=KIe(Oq,gAe);var yE=g.forwardRef(function(t,e){return g.createElement(gE,so({},t,{ref:e,sideCar:vAe}))});yE.classNames=gE.classNames;var P0=["Enter"," "],wAe=["ArrowDown","PageUp","Home"],Vq=["ArrowUp","PageDown","End"],_Ae=[...wAe,...Vq],TAe={ltr:[...P0,"ArrowRight"],rtl:[...P0,"ArrowLeft"]},CAe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hy="Menu",[pg,EAe,SAe]=CR(hy),[Ju,jq]=Gr(hy,[SAe,pf,mE]),vE=pf(),Uq=mE(),[bAe,Zu]=Ju(hy),[IAe,fy]=Ju(hy),$q=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=vE(e),[c,l]=g.useState(null),u=g.useRef(!1),d=wn(s),h=fE(i);return g.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),p.jsx(BR,{...a,children:p.jsx(bAe,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:l,children:p.jsx(IAe,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};$q.displayName=hy;var AAe="MenuAnchor",a1=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=vE(n);return p.jsx(lC,{...i,...r,ref:e})});a1.displayName=AAe;var c1="MenuPortal",[kAe,Bq]=Ju(c1,{forceMount:void 0}),Hq=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Zu(c1,e);return p.jsx(kAe,{scope:e,forceMount:n,children:p.jsx(Hn,{present:n||s.open,children:p.jsx(Fg,{asChild:!0,container:i,children:r})})})};Hq.displayName=c1;var es="MenuContent",[xAe,l1]=Ju(es),zq=g.forwardRef((t,e)=>{const n=Bq(es,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Zu(es,t.__scopeMenu),o=fy(es,t.__scopeMenu);return p.jsx(pg.Provider,{scope:t.__scopeMenu,children:p.jsx(Hn,{present:r||s.open,children:p.jsx(pg.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(RAe,{...i,ref:e}):p.jsx(PAe,{...i,ref:e})})})})}),RAe=g.forwardRef((t,e)=>{const n=Zu(es,t.__scopeMenu),r=g.useRef(null),i=Et(e,r);return g.useEffect(()=>{const s=r.current;if(s)return o1(s)},[]),p.jsx(u1,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Se(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),PAe=g.forwardRef((t,e)=>{const n=Zu(es,t.__scopeMenu);return p.jsx(u1,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),NAe=Cu("MenuContent.ScrollLock"),u1=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:_,...v}=t,T=Zu(es,n),y=fy(es,n),w=vE(n),C=Uq(n),b=EAe(n),[k,D]=g.useState(null),A=g.useRef(null),S=Et(e,A,T.onContentChange),x=g.useRef(0),N=g.useRef(""),R=g.useRef(0),O=g.useRef(null),P=g.useRef("right"),z=g.useRef(0),K=_?yE:g.Fragment,U=_?{as:NAe,allowPinchZoom:!0}:void 0,q=V=>{var te,we;const X=N.current+V,ge=b().filter(_e=>!_e.disabled),pe=document.activeElement,B=(te=ge.find(_e=>_e.ref.current===pe))==null?void 0:te.textValue,J=ge.map(_e=>_e.textValue),Y=zAe(J,X,B),W=(we=ge.find(_e=>_e.textValue===Y))==null?void 0:we.ref.current;(function _e(Pe){N.current=Pe,window.clearTimeout(x.current),Pe!==""&&(x.current=window.setTimeout(()=>_e(""),1e3))})(X),W&&setTimeout(()=>W.focus())};g.useEffect(()=>()=>window.clearTimeout(x.current),[]),s1();const F=g.useCallback(V=>{var ge,pe;return P.current===((ge=O.current)==null?void 0:ge.side)&&KAe(V,(pe=O.current)==null?void 0:pe.area)},[]);return p.jsx(xAe,{scope:n,searchRef:N,onItemEnter:g.useCallback(V=>{F(V)&&V.preventDefault()},[F]),onItemLeave:g.useCallback(V=>{var X;F(V)||((X=A.current)==null||X.focus(),D(null))},[F]),onTriggerLeave:g.useCallback(V=>{F(V)&&V.preventDefault()},[F]),pointerGraceTimerRef:R,onPointerGraceIntentChange:g.useCallback(V=>{O.current=V},[]),children:p.jsx(K,{...U,children:p.jsx(pE,{asChild:!0,trapped:i,onMountAutoFocus:Se(s,V=>{var X;V.preventDefault(),(X=A.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(uf,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:p.jsx(kq,{asChild:!0,...C,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:D,onEntryFocus:Se(c,V=>{y.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(HR,{role:"menu","aria-orientation":"vertical","data-state":oG(T.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:S,style:{outline:"none",...v.style},onKeyDown:Se(v.onKeyDown,V=>{const ge=V.target.closest("[data-radix-menu-content]")===V.currentTarget,pe=V.ctrlKey||V.altKey||V.metaKey,B=V.key.length===1;ge&&(V.key==="Tab"&&V.preventDefault(),!pe&&B&&q(V.key));const J=A.current;if(V.target!==J||!_Ae.includes(V.key))return;V.preventDefault();const W=b().filter(te=>!te.disabled).map(te=>te.ref.current);Vq.includes(V.key)&&W.reverse(),BAe(W)}),onBlur:Se(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(x.current),N.current="")}),onPointerMove:Se(t.onPointerMove,mg(V=>{const X=V.target,ge=z.current!==V.clientX;if(V.currentTarget.contains(X)&&ge){const pe=V.clientX>z.current?"right":"left";P.current=pe,z.current=V.clientX}}))})})})})})})});zq.displayName=es;var OAe="MenuGroup",d1=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Fe.div,{role:"group",...r,ref:e})});d1.displayName=OAe;var MAe="MenuLabel",Wq=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Fe.div,{...r,ref:e})});Wq.displayName=MAe;var Y_="MenuItem",$V="menu.itemSelect",wE=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=fy(Y_,t.__scopeMenu),a=l1(Y_,t.__scopeMenu),c=Et(e,s),l=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent($V,{bubbles:!0,cancelable:!0});d.addEventListener($V,m=>r==null?void 0:r(m),{once:!0}),ER(d,h),h.defaultPrevented?l.current=!1:o.onClose()}};return p.jsx(Kq,{...i,ref:c,disabled:n,onClick:Se(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),l.current=!0},onPointerUp:Se(t.onPointerUp,d=>{var h;l.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Se(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||P0.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});wE.displayName=Y_;var Kq=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=l1(Y_,n),a=Uq(n),c=g.useRef(null),l=Et(e,c),[u,d]=g.useState(!1),[h,m]=g.useState("");return g.useEffect(()=>{const _=c.current;_&&m((_.textContent??"").trim())},[s.children]),p.jsx(pg.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:p.jsx(xq,{asChild:!0,...a,focusable:!r,children:p.jsx(Fe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:l,onPointerMove:Se(t.onPointerMove,mg(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Se(t.onPointerLeave,mg(_=>o.onItemLeave(_))),onFocus:Se(t.onFocus,()=>d(!0)),onBlur:Se(t.onBlur,()=>d(!1))})})})}),DAe="MenuCheckboxItem",qq=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(Jq,{scope:t.__scopeMenu,checked:n,children:p.jsx(wE,{role:"menuitemcheckbox","aria-checked":X_(n)?"mixed":n,...i,ref:e,"data-state":f1(n),onSelect:Se(i.onSelect,()=>r==null?void 0:r(X_(n)?!0:!n),{checkForDefaultPrevented:!1})})})});qq.displayName=DAe;var Gq="MenuRadioGroup",[LAe,FAe]=Ju(Gq,{value:void 0,onValueChange:()=>{}}),Qq=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=wn(r);return p.jsx(LAe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(d1,{...i,ref:e})})});Qq.displayName=Gq;var Yq="MenuRadioItem",Xq=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=FAe(Yq,t.__scopeMenu),s=n===i.value;return p.jsx(Jq,{scope:t.__scopeMenu,checked:s,children:p.jsx(wE,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":f1(s),onSelect:Se(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});Xq.displayName=Yq;var h1="MenuItemIndicator",[Jq,VAe]=Ju(h1,{checked:!1}),Zq=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=VAe(h1,n);return p.jsx(Hn,{present:r||X_(s.checked)||s.checked===!0,children:p.jsx(Fe.span,{...i,ref:e,"data-state":f1(s.checked)})})});Zq.displayName=h1;var jAe="MenuSeparator",eG=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});eG.displayName=jAe;var UAe="MenuArrow",tG=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=vE(n);return p.jsx(zR,{...i,...r,ref:e})});tG.displayName=UAe;var $Ae="MenuSub",[uDe,nG]=Ju($Ae),bp="MenuSubTrigger",rG=g.forwardRef((t,e)=>{const n=Zu(bp,t.__scopeMenu),r=fy(bp,t.__scopeMenu),i=nG(bp,t.__scopeMenu),s=l1(bp,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,l={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),p.jsx(a1,{asChild:!0,...l,children:p.jsx(Kq,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":oG(n.open),...t,ref:tC(e,i.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Se(t.onPointerMove,mg(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Se(t.onPointerLeave,mg(d=>{var m,_;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(_=n.content)==null?void 0:_.dataset.side,T=v==="right",y=T?-5:5,w=h[T?"left":"right"],C=h[T?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:h.top},{x:C,y:h.top},{x:C,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Se(t.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||TAe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});rG.displayName=bp;var iG="MenuSubContent",sG=g.forwardRef((t,e)=>{const n=Bq(es,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Zu(es,t.__scopeMenu),o=fy(es,t.__scopeMenu),a=nG(iG,t.__scopeMenu),c=g.useRef(null),l=Et(e,c);return p.jsx(pg.Provider,{scope:t.__scopeMenu,children:p.jsx(Hn,{present:r||s.open,children:p.jsx(pg.Slot,{scope:t.__scopeMenu,children:p.jsx(u1,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Se(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Se(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Se(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=CAe[o.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});sG.displayName=iG;function oG(t){return t?"open":"closed"}function X_(t){return t==="indeterminate"}function f1(t){return X_(t)?"indeterminate":t?"checked":"unchecked"}function BAe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function HAe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function zAe(t,e,n){const i=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=HAe(t,Math.max(s,0));i.length===1&&(o=o.filter(l=>l!==n));const c=o.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function WAe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],l=a.x,u=a.y,d=c.x,h=c.y;u>r!=h>r&&n<(d-l)*(r-u)/(h-u)+l&&(i=!i)}return i}function KAe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return WAe(n,e)}function mg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var qAe=$q,GAe=a1,QAe=Hq,YAe=zq,XAe=d1,JAe=Wq,ZAe=wE,e0e=qq,t0e=Qq,n0e=Xq,r0e=Zq,i0e=eG,s0e=tG,o0e=rG,a0e=sG,_E="DropdownMenu",[c0e]=Gr(_E,[jq]),Yr=jq(),[l0e,aG]=c0e(_E),cG=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Yr(e),l=g.useRef(null),[u,d]=Na({prop:i,defaultProp:s??!1,onChange:o,caller:_E});return p.jsx(l0e,{scope:e,triggerId:go(),triggerRef:l,contentId:go(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(h=>!h),[d]),modal:a,children:p.jsx(qAe,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};cG.displayName=_E;var lG="DropdownMenuTrigger",uG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=aG(lG,n),o=Yr(n);return p.jsx(GAe,{asChild:!0,...o,children:p.jsx(Fe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:tC(e,s.triggerRef),onPointerDown:Se(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Se(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});uG.displayName=lG;var u0e="DropdownMenuPortal",dG=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Yr(e);return p.jsx(QAe,{...r,...n})};dG.displayName=u0e;var hG="DropdownMenuContent",fG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=aG(hG,n),s=Yr(n),o=g.useRef(!1);return p.jsx(YAe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Se(t.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Se(t.onInteractOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fG.displayName=hG;var d0e="DropdownMenuGroup",h0e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(XAe,{...i,...r,ref:e})});h0e.displayName=d0e;var f0e="DropdownMenuLabel",pG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(JAe,{...i,...r,ref:e})});pG.displayName=f0e;var p0e="DropdownMenuItem",mG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(ZAe,{...i,...r,ref:e})});mG.displayName=p0e;var m0e="DropdownMenuCheckboxItem",gG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(e0e,{...i,...r,ref:e})});gG.displayName=m0e;var g0e="DropdownMenuRadioGroup",y0e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(t0e,{...i,...r,ref:e})});y0e.displayName=g0e;var v0e="DropdownMenuRadioItem",yG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(n0e,{...i,...r,ref:e})});yG.displayName=v0e;var w0e="DropdownMenuItemIndicator",vG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(r0e,{...i,...r,ref:e})});vG.displayName=w0e;var _0e="DropdownMenuSeparator",wG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(i0e,{...i,...r,ref:e})});wG.displayName=_0e;var T0e="DropdownMenuArrow",C0e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(s0e,{...i,...r,ref:e})});C0e.displayName=T0e;var E0e="DropdownMenuSubTrigger",_G=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(o0e,{...i,...r,ref:e})});_G.displayName=E0e;var S0e="DropdownMenuSubContent",TG=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Yr(n);return p.jsx(a0e,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TG.displayName=S0e;var b0e=cG,I0e=uG,A0e=dG,CG=fG,EG=pG,SG=mG,bG=gG,IG=yG,AG=vG,kG=wG,xG=_G,RG=TG;const k0e=b0e,x0e=I0e,R0e=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(xG,{ref:i,className:ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,p.jsx(e5,{className:"ml-auto h-4 w-4"})]}));R0e.displayName=xG.displayName;const P0e=g.forwardRef(({className:t,...e},n)=>p.jsx(RG,{ref:n,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));P0e.displayName=RG.displayName;const PG=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(A0e,{children:p.jsx(CG,{ref:r,sideOffset:e,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));PG.displayName=CG.displayName;const ow=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(SG,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));ow.displayName=SG.displayName;const N0e=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(bG,{ref:i,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(AG,{children:p.jsx(iC,{className:"h-4 w-4"})})}),e]}));N0e.displayName=bG.displayName;const O0e=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(IG,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(AG,{children:p.jsx(n5,{className:"h-2 w-2 fill-current"})})}),e]}));O0e.displayName=IG.displayName;const M0e=g.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(EG,{ref:r,className:ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));M0e.displayName=EG.displayName;const N0=g.forwardRef(({className:t,...e},n)=>p.jsx(kG,{ref:n,className:ue("-mx-1 my-1 h-px bg-muted",t),...e}));N0.displayName=kG.displayName;var TE="Popover",[NG]=Gr(TE,[pf]),py=pf(),[D0e,yl]=NG(TE),OG=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=py(e),c=g.useRef(null),[l,u]=g.useState(!1),[d,h]=Na({prop:r,defaultProp:i??!1,onChange:s,caller:TE});return p.jsx(BR,{...a,children:p.jsx(D0e,{scope:e,contentId:go(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:n})})};OG.displayName=TE;var MG="PopoverAnchor",L0e=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=yl(MG,n),s=py(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return g.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(lC,{...s,...r,ref:e})});L0e.displayName=MG;var DG="PopoverTrigger",LG=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=yl(DG,n),s=py(n),o=Et(e,i.triggerRef),a=p.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":$G(i.open),...r,ref:o,onClick:Se(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(lC,{asChild:!0,...s,children:a})});LG.displayName=DG;var p1="PopoverPortal",[F0e,V0e]=NG(p1,{forceMount:void 0}),FG=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=yl(p1,e);return p.jsx(F0e,{scope:e,forceMount:n,children:p.jsx(Hn,{present:n||s.open,children:p.jsx(Fg,{asChild:!0,container:i,children:r})})})};FG.displayName=p1;var zh="PopoverContent",VG=g.forwardRef((t,e)=>{const n=V0e(zh,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=yl(zh,t.__scopePopover);return p.jsx(Hn,{present:r||s.open,children:s.modal?p.jsx(U0e,{...i,ref:e}):p.jsx($0e,{...i,ref:e})})});VG.displayName=zh;var j0e=Cu("PopoverContent.RemoveScroll"),U0e=g.forwardRef((t,e)=>{const n=yl(zh,t.__scopePopover),r=g.useRef(null),i=Et(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return o1(o)},[]),p.jsx(yE,{as:j0e,allowPinchZoom:!0,children:p.jsx(jG,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Se(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,l=a.button===2||c;s.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:Se(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),$0e=g.forwardRef((t,e)=>{const n=yl(zh,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(jG,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),jG=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=t,h=yl(zh,n),m=py(n);return s1(),p.jsx(pE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(uf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(HR,{"data-state":$G(h.open),role:"dialog",id:h.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),UG="PopoverClose",B0e=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=yl(UG,n);return p.jsx(Fe.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,()=>i.onOpenChange(!1))})});B0e.displayName=UG;var H0e="PopoverArrow",z0e=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=py(n);return p.jsx(zR,{...i,...r,ref:e})});z0e.displayName=H0e;function $G(t){return t?"open":"closed"}var W0e=OG,K0e=LG,q0e=FG,BG=VG;const HG=W0e,zG=K0e,m1=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(q0e,{children:p.jsx(BG,{ref:i,align:e,sideOffset:n,className:ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));m1.displayName=BG.displayName;function G0e(t,[e,n]){return Math.min(n,Math.max(e,t))}function Q0e(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var g1="ScrollArea",[WG]=Gr(g1),[Y0e,as]=WG(g1),KG=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,c]=g.useState(null),[l,u]=g.useState(null),[d,h]=g.useState(null),[m,_]=g.useState(null),[v,T]=g.useState(null),[y,w]=g.useState(0),[C,b]=g.useState(0),[k,D]=g.useState(!1),[A,S]=g.useState(!1),x=Et(e,R=>c(R)),N=fE(i);return p.jsx(Y0e,{scope:n,type:r,dir:N,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:u,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:_,scrollbarXEnabled:k,onScrollbarXEnabledChange:D,scrollbarY:v,onScrollbarYChange:T,scrollbarYEnabled:A,onScrollbarYEnabledChange:S,onCornerWidthChange:w,onCornerHeightChange:b,children:p.jsx(Fe.div,{dir:N,...o,ref:x,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});KG.displayName=g1;var qG="ScrollAreaViewport",GG=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=as(qG,n),a=g.useRef(null),c=Et(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(Fe.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GG.displayName=qG;var Do="ScrollAreaScrollbar",y1=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=as(Do,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return g.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?p.jsx(X0e,{...r,ref:e,forceMount:n}):i.type==="scroll"?p.jsx(J0e,{...r,ref:e,forceMount:n}):i.type==="auto"?p.jsx(QG,{...r,ref:e,forceMount:n}):i.type==="always"?p.jsx(v1,{...r,ref:e}):null});y1.displayName=Do;var X0e=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=as(Do,t.__scopeScrollArea),[s,o]=g.useState(!1);return g.useEffect(()=>{const a=i.scrollArea;let c=0;if(a){const l=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(Hn,{present:n||s,children:p.jsx(QG,{"data-state":s?"visible":"hidden",...r,ref:e})})}),J0e=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=as(Do,t.__scopeScrollArea),s=t.orientation==="horizontal",o=EE(()=>c("SCROLL_END"),100),[a,c]=Q0e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,c]),g.useEffect(()=>{const l=i.viewport,u=s?"scrollLeft":"scrollTop";if(l){let d=l[u];const h=()=>{const m=l[u];d!==m&&(c("SCROLL"),o()),d=m};return l.addEventListener("scroll",h),()=>l.removeEventListener("scroll",h)}},[i.viewport,s,c,o]),p.jsx(Hn,{present:n||a!=="hidden",children:p.jsx(v1,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Se(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Se(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),QG=g.forwardRef((t,e)=>{const n=as(Do,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=g.useState(!1),a=t.orientation==="horizontal",c=EE(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:u)}},10);return Wh(n.viewport,c),Wh(n.content,c),p.jsx(Hn,{present:r||s,children:p.jsx(v1,{"data-state":s?"visible":"hidden",...i,ref:e})})}),v1=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=as(Do,t.__scopeScrollArea),s=g.useRef(null),o=g.useRef(0),[a,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=e8(a.viewport,a.content),u={...r,sizes:a,onSizesChange:c,hasThumb:l>0&&l<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,m){return ike(h,o.current,a,m)}return n==="horizontal"?p.jsx(Z0e,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,m=BV(h,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}}):n==="vertical"?p.jsx(eke,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,m=BV(h,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}}):null}),Z0e=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=as(Do,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=Et(e,c,s.onScrollbarXChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(XG,{"data-orientation":"horizontal",...i,ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":CE(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),n8(h,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Z_(o.paddingLeft),paddingEnd:Z_(o.paddingRight)}})}})}),eke=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=as(Do,t.__scopeScrollArea),[o,a]=g.useState(),c=g.useRef(null),l=Et(e,c,s.onScrollbarYChange);return g.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),p.jsx(XG,{"data-orientation":"vertical",...i,ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":CE(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),n8(h,d)&&u.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Z_(o.paddingTop),paddingEnd:Z_(o.paddingBottom)}})}})}),[tke,YG]=WG(Do),XG=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:l,onWheelScroll:u,onResize:d,...h}=t,m=as(Do,n),[_,v]=g.useState(null),T=Et(e,x=>v(x)),y=g.useRef(null),w=g.useRef(""),C=m.viewport,b=r.content-r.viewport,k=wn(u),D=wn(c),A=EE(d,10);function S(x){if(y.current){const N=x.clientX-y.current.left,R=x.clientY-y.current.top;l({x:N,y:R})}}return g.useEffect(()=>{const x=N=>{const R=N.target;(_==null?void 0:_.contains(R))&&k(N,b)};return document.addEventListener("wheel",x,{passive:!1}),()=>document.removeEventListener("wheel",x,{passive:!1})},[C,_,b,k]),g.useEffect(D,[r,D]),Wh(_,A),Wh(m.content,A),p.jsx(tke,{scope:n,scrollbar:_,hasThumb:i,onThumbChange:wn(s),onThumbPointerUp:wn(o),onThumbPositionChange:D,onThumbPointerDown:wn(a),children:p.jsx(Fe.div,{...h,ref:T,style:{position:"absolute",...h.style},onPointerDown:Se(t.onPointerDown,x=>{x.button===0&&(x.target.setPointerCapture(x.pointerId),y.current=_.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),S(x))}),onPointerMove:Se(t.onPointerMove,S),onPointerUp:Se(t.onPointerUp,x=>{const N=x.target;N.hasPointerCapture(x.pointerId)&&N.releasePointerCapture(x.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),J_="ScrollAreaThumb",JG=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=YG(J_,t.__scopeScrollArea);return p.jsx(Hn,{present:n||i.hasThumb,children:p.jsx(nke,{ref:e,...r})})}),nke=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=as(J_,n),o=YG(J_,n),{onThumbPositionChange:a}=o,c=Et(e,d=>o.onThumbChange(d)),l=g.useRef(void 0),u=EE(()=>{l.current&&(l.current(),l.current=void 0)},100);return g.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!l.current){const m=ske(d,a);l.current=m,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,a]),p.jsx(Fe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Se(t.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),_=d.clientX-m.left,v=d.clientY-m.top;o.onThumbPointerDown({x:_,y:v})}),onPointerUp:Se(t.onPointerUp,o.onThumbPointerUp)})});JG.displayName=J_;var w1="ScrollAreaCorner",ZG=g.forwardRef((t,e)=>{const n=as(w1,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(rke,{...t,ref:e}):null});ZG.displayName=w1;var rke=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=as(w1,n),[s,o]=g.useState(0),[a,c]=g.useState(0),l=!!(s&&a);return Wh(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),Wh(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),l?p.jsx(Fe.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Z_(t){return t?parseInt(t,10):0}function e8(t,e){const n=t/e;return isNaN(n)?0:n}function CE(t){const e=e8(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function ike(t,e,n,r="ltr"){const i=CE(n),s=i/2,o=e||s,a=i-o,c=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return t8([c,l],d)(t)}function BV(t,e,n="ltr"){const r=CE(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,c=n==="ltr"?[0,o]:[o*-1,0],l=G0e(t,c);return t8([0,o],[0,a])(l)}function t8(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function n8(t,e){return t>0&&t<e}var ske=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function EE(t,e){const n=wn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Wh(t,e){const n=wn(e);gi(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var r8=KG,oke=GG,ake=ZG;const i8=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(r8,{ref:r,className:ue("relative overflow-hidden",t),...n,children:[p.jsx(oke,{className:"h-full w-full rounded-[inherit] touch-pan-y scrollbar-hide",children:e}),p.jsx(s8,{}),p.jsx(ake,{})]}));i8.displayName=r8.displayName;const s8=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(y1,{ref:r,orientation:e,className:ue("flex touch-none select-none transition-colors hidden md:flex",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:p.jsx(JG,{className:"relative flex-1 rounded-full bg-border"})}));s8.displayName=y1.displayName;function cke(){const{notifications:t,unreadCount:e,markAsRead:n,markAllAsRead:r,deleteNotification:i,clearAllNotifications:s}=t1(),[o,a]=g.useState(!1),c=m=>{const _=new Date(m),T=Math.floor((new Date().getTime()-_.getTime())/(1e3*60));return T<1?"Just now":T<60?`${T}m ago`:T<1440?`${Math.floor(T/60)}h ago`:_.toLocaleDateString()},l=m=>{switch(m){case"task-assignment":return"📋";case"task-complete":return"✅";case"pomodoro-complete":return"🍅";case"team-request":return"👥";default:return"🔔"}},u=async m=>{m.read||await n(m.id)},d=async()=>{await r()},h=async()=>{await s(),a(!1)};return p.jsxs(HG,{open:o,onOpenChange:a,children:[p.jsx(zG,{asChild:!0,children:p.jsxs(Ue,{variant:"ghost",size:"icon",className:ue("relative hover-scale transition-smooth h-9 w-9",e>0&&"text-primary"),children:[p.jsx(lA,{className:"h-4 w-4"}),e>0&&p.jsx(pi,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs font-bold animate-pulse",children:e>99?"99+":e})]})}),p.jsxs(m1,{className:"w-80 p-0 shadow-elegant",align:"end",children:[p.jsxs("div",{className:"p-4 border-b",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"font-semibold",children:"Notifications"}),p.jsxs("div",{className:"flex items-center gap-2",children:[e>0&&p.jsxs(Ue,{variant:"ghost",size:"sm",onClick:d,className:"text-xs hover-scale",children:[p.jsx(Sse,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.length>0&&p.jsx(Ue,{variant:"ghost",size:"sm",onClick:h,className:"text-xs hover-scale text-destructive hover:bg-destructive/10",children:p.jsx(Coe,{className:"h-3 w-3"})})]})]}),e>0&&p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e," unread notification",e!==1?"s":""]})]}),p.jsx(i8,{className:"h-[400px]",children:t.length===0?p.jsxs("div",{className:"text-center py-8 px-4",children:[p.jsx(lA,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll see updates about tasks and activities here"})]}):p.jsx("div",{className:"divide-y",children:t.map(m=>p.jsx("div",{className:ue("p-4 hover:bg-muted/30 transition-smooth cursor-pointer group",!m.read&&"bg-primary/5 border-l-2 border-l-primary"),onClick:()=>u(m),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"text-lg shrink-0 mt-0.5",children:l(m.type)}),p.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h4",{className:ue("text-sm font-medium leading-tight",!m.read&&"font-semibold"),children:m.title}),p.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!m.read&&p.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"}),p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:_=>{_.stopPropagation(),i(m.id)},children:p.jsx(ul,{className:"h-3 w-3"})})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed line-clamp-2",children:m.body}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:c(m.timestamp)}),!m.read&&p.jsxs(Ue,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),n(m.id)},className:"text-xs hover-scale opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(iC,{className:"h-3 w-3 mr-1"}),"Mark read"]})]})]})]})},m.id))})})]})]})}function lke(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var SE="Checkbox",[uke]=Gr(SE),[dke,_1]=uke(SE);function hke(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:c,required:l,value:u="on",internal_do_not_use_render:d}=t,[h,m]=Na({prop:n,defaultProp:i??!1,onChange:c,caller:SE}),[_,v]=g.useState(null),[T,y]=g.useState(null),w=g.useRef(!1),C=_?!!o||!!_.closest("form"):!0,b={checked:h,disabled:s,setChecked:m,control:_,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:l,defaultChecked:Vc(i)?!1:i,isFormControl:C,bubbleInput:T,setBubbleInput:y};return p.jsx(dke,{scope:e,...b,children:fke(d)?d(b):r})}var o8="CheckboxTrigger",a8=g.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:s,value:o,disabled:a,checked:c,required:l,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:_}=_1(o8,t),v=Et(i,u),T=g.useRef(c);return g.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const w=()=>d(T.current);return y.addEventListener("reset",w),()=>y.removeEventListener("reset",w)}},[s,d]),p.jsx(Fe.button,{type:"button",role:"checkbox","aria-checked":Vc(c)?"mixed":c,"aria-required":l,"data-state":h8(c),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:v,onKeyDown:Se(e,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Se(n,y=>{d(w=>Vc(w)?!0:!w),_&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});a8.displayName=o8;var T1=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c,onCheckedChange:l,form:u,...d}=t;return p.jsx(hke,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:l,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>p.jsxs(p.Fragment,{children:[p.jsx(a8,{...d,ref:e,__scopeCheckbox:n}),h&&p.jsx(d8,{__scopeCheckbox:n})]})})});T1.displayName=SE;var c8="CheckboxIndicator",l8=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=_1(c8,n);return p.jsx(Hn,{present:r||Vc(s.checked)||s.checked===!0,children:p.jsx(Fe.span,{"data-state":h8(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});l8.displayName=c8;var u8="CheckboxBubbleInput",d8=g.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:c,name:l,value:u,form:d,bubbleInput:h,setBubbleInput:m}=_1(u8,t),_=Et(n,m),v=lke(s),T=O5(r);g.useEffect(()=>{const w=h;if(!w)return;const C=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(C,"checked").set,D=!i.current;if(v!==s&&k){const A=new Event("click",{bubbles:D});w.indeterminate=Vc(s),k.call(w,Vc(s)?!1:s),w.dispatchEvent(A)}},[h,v,s,i]);const y=g.useRef(Vc(s)?!1:s);return p.jsx(Fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:a,disabled:c,name:l,value:u,form:d,...e,tabIndex:-1,ref:_,style:{...e.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});d8.displayName=u8;function fke(t){return typeof t=="function"}function Vc(t){return t==="indeterminate"}function h8(t){return Vc(t)?"indeterminate":t?"checked":"unchecked"}const f8=g.forwardRef(({className:t,...e},n)=>p.jsx(T1,{ref:n,className:ue("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:p.jsx(l8,{className:ue("flex items-center justify-center text-current"),children:p.jsx(iC,{className:"h-4 w-4"})})}));f8.displayName=T1.displayName;const p8=g.createContext({});function pke(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const C1=typeof window<"u",mke=C1?g.useLayoutEffect:g.useEffect,E1=g.createContext(null);function S1(t,e){t.indexOf(e)===-1&&t.push(e)}function b1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ba=(t,e,n)=>n>e?e:n<t?t:n;let I1=()=>{};const Ia={},m8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function g8(t){return typeof t=="object"&&t!==null}const y8=t=>/^0[^.\s]+$/u.test(t);function A1(t){let e;return()=>(e===void 0&&(e=t()),e)}const ts=t=>t,gke=(t,e)=>n=>e(t(n)),my=(...t)=>t.reduce(gke),gg=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class k1{constructor(){this.subscriptions=[]}add(e){return S1(this.subscriptions,e),()=>b1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const So=t=>t*1e3,Ji=t=>t/1e3;function v8(t,e){return e?t*(1e3/e):0}const w8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yke=1e-7,vke=12;function wke(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=w8(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>yke&&++a<vke);return o}function gy(t,e,n,r){if(t===e&&n===r)return ts;const i=s=>wke(s,0,1,t,n);return s=>s===0||s===1?s:w8(i(s),e,r)}const _8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,T8=t=>e=>1-t(1-e),C8=gy(.33,1.53,.69,.99),x1=T8(C8),E8=_8(x1),S8=t=>(t*=2)<1?.5*x1(t):.5*(2-Math.pow(2,-10*(t-1))),R1=t=>1-Math.sin(Math.acos(t)),b8=T8(R1),I8=_8(R1),_ke=gy(.42,0,1,1),Tke=gy(0,0,.58,1),A8=gy(.42,0,.58,1),Cke=t=>Array.isArray(t)&&typeof t[0]!="number",k8=t=>Array.isArray(t)&&typeof t[0]=="number",Eke={linear:ts,easeIn:_ke,easeInOut:A8,easeOut:Tke,circIn:R1,circInOut:I8,circOut:b8,backIn:x1,backInOut:E8,backOut:C8,anticipate:S8},Ske=t=>typeof t=="string",HV=t=>{if(k8(t)){I1(t.length===4);const[e,n,r,i]=t;return gy(e,n,r,i)}else if(Ske(t))return Eke[t];return t},Tv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function bke(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,d=!1,h=!1)=>{const _=h&&i?n:r;return d&&o.add(u),_.has(u)||_.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,l.process(u))}};return l}const Ike=40;function x8(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Tv.reduce((C,b)=>(C[b]=bke(s),C),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:h,render:m,postRender:_}=o,v=()=>{const C=Ia.useManualTiming?i.timestamp:performance.now();n=!1,Ia.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,Ike),1)),i.timestamp=C,i.isProcessing=!0,a.process(i),c.process(i),l.process(i),u.process(i),d.process(i),h.process(i),m.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},T=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:Tv.reduce((C,b)=>{const k=o[b];return C[b]=(D,A=!1,S=!1)=>(n||T(),k.schedule(D,A,S)),C},{}),cancel:C=>{for(let b=0;b<Tv.length;b++)o[Tv[b]].cancel(C)},state:i,steps:o}}const{schedule:Jt,cancel:el,state:or,steps:kb}=x8(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0);let aw;function Ake(){aw=void 0}const ci={now:()=>(aw===void 0&&ci.set(or.isProcessing||Ia.useManualTiming?or.timestamp:performance.now()),aw),set:t=>{aw=t,queueMicrotask(Ake)}},R8=t=>e=>typeof e=="string"&&e.startsWith(t),P1=R8("--"),kke=R8("var(--"),N1=t=>kke(t)?xke.test(t.split("/*")[0].trim()):!1,xke=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yg={...Pf,transform:t=>ba(0,1,t)},Cv={...Pf,default:1},lm=t=>Math.round(t*1e5)/1e5,O1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rke(t){return t==null}const Pke=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,M1=(t,e)=>n=>!!(typeof n=="string"&&Pke.test(n)&&n.startsWith(t)||e&&!Rke(n)&&Object.prototype.hasOwnProperty.call(n,e)),P8=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(O1);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Nke=t=>ba(0,255,t),xb={...Pf,transform:t=>Math.round(Nke(t))},Ql={test:M1("rgb","red"),parse:P8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+xb.transform(t)+", "+xb.transform(e)+", "+xb.transform(n)+", "+lm(yg.transform(r))+")"};function Oke(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const O0={test:M1("#"),parse:Oke,transform:Ql.transform},yy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qa=yy("deg"),bo=yy("%"),We=yy("px"),Mke=yy("vh"),Dke=yy("vw"),zV={...bo,parse:t=>bo.parse(t)/100,transform:t=>bo.transform(t*100)},Md={test:M1("hsl","hue"),parse:P8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bo.transform(lm(e))+", "+bo.transform(lm(n))+", "+lm(yg.transform(r))+")"},En={test:t=>Ql.test(t)||O0.test(t)||Md.test(t),parse:t=>Ql.test(t)?Ql.parse(t):Md.test(t)?Md.parse(t):O0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ql.transform(t):Md.transform(t),getAnimatableNone:t=>{const e=En.parse(t);return e.alpha=0,En.transform(e)}},Lke=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fke(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(O1))==null?void 0:e.length)||0)+(((n=t.match(Lke))==null?void 0:n.length)||0)>0}const N8="number",O8="color",Vke="var",jke="var(",WV="${}",Uke=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vg(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Uke,c=>(En.test(c)?(r.color.push(s),i.push(O8),n.push(En.parse(c))):c.startsWith(jke)?(r.var.push(s),i.push(Vke),n.push(c)):(r.number.push(s),i.push(N8),n.push(parseFloat(c))),++s,WV)).split(WV);return{values:n,split:a,indexes:r,types:i}}function M8(t){return vg(t).values}function D8(t){const{split:e,types:n}=vg(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===N8?s+=lm(i[o]):a===O8?s+=En.transform(i[o]):s+=i[o]}return s}}const $ke=t=>typeof t=="number"?0:En.test(t)?En.getAnimatableNone(t):t;function Bke(t){const e=M8(t);return D8(t)(e.map($ke))}const tl={test:Fke,parse:M8,createTransformer:D8,getAnimatableNone:Bke};function Rb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Hke({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=Rb(c,a,t+1/3),s=Rb(c,a,t),o=Rb(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function eT(t,e){return n=>n>0?e:t}const en=(t,e,n)=>t+(e-t)*n,Pb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},zke=[O0,Ql,Md],Wke=t=>zke.find(e=>e.test(t));function KV(t){const e=Wke(t);if(!e)return!1;let n=e.parse(t);return e===Md&&(n=Hke(n)),n}const qV=(t,e)=>{const n=KV(t),r=KV(e);if(!n||!r)return eT(t,e);const i={...n};return s=>(i.red=Pb(n.red,r.red,s),i.green=Pb(n.green,r.green,s),i.blue=Pb(n.blue,r.blue,s),i.alpha=en(n.alpha,r.alpha,s),Ql.transform(i))},M0=new Set(["none","hidden"]);function Kke(t,e){return M0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function qke(t,e){return n=>en(t,e,n)}function D1(t){return typeof t=="number"?qke:typeof t=="string"?N1(t)?eT:En.test(t)?qV:Yke:Array.isArray(t)?L8:typeof t=="object"?En.test(t)?qV:Gke:eT}function L8(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>D1(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Gke(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=D1(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Qke(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const Yke=(t,e)=>{const n=tl.createTransformer(e),r=vg(t),i=vg(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?M0.has(t)&&!i.values.length||M0.has(e)&&!r.values.length?Kke(t,e):my(L8(Qke(r,i),i.values),n):eT(t,e)};function F8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?en(t,e,n):D1(t)(t,e)}const Xke=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Jt.update(e,n),stop:()=>el(e),now:()=>or.isProcessing?or.timestamp:ci.now()}},V8=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},tT=2e4;function L1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tT;)e+=n,r=t.next(e);return e>=tT?1/0:e}function Jke(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(L1(r),tT);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ji(i)}}const Zke=5;function j8(t,e,n){const r=Math.max(e-Zke,0);return v8(n-t(r),e-r)}const cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nb=.001;function exe({duration:t=cn.duration,bounce:e=cn.bounce,velocity:n=cn.velocity,mass:r=cn.mass}){let i,s,o=1-e;o=ba(cn.minDamping,cn.maxDamping,o),t=ba(cn.minDuration,cn.maxDuration,Ji(t)),o<1?(i=l=>{const u=l*o,d=u*t,h=u-n,m=D0(l,o),_=Math.exp(-d);return Nb-h/m*_},s=l=>{const d=l*o*t,h=d*n+n,m=Math.pow(o,2)*Math.pow(l,2)*t,_=Math.exp(-d),v=D0(Math.pow(l,2),o);return(-i(l)+Nb>0?-1:1)*((h-m)*_)/v}):(i=l=>{const u=Math.exp(-l*t),d=(l-n)*t+1;return-Nb+u*d},s=l=>{const u=Math.exp(-l*t),d=(n-l)*(t*t);return u*d});const a=5/t,c=nxe(i,s,a);if(t=So(t),isNaN(c))return{stiffness:cn.stiffness,damping:cn.damping,duration:t};{const l=Math.pow(c,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:t}}}const txe=12;function nxe(t,e,n){let r=n;for(let i=1;i<txe;i++)r=r-t(r)/e(r);return r}function D0(t,e){return t*Math.sqrt(1-e*e)}const rxe=["duration","bounce"],ixe=["stiffness","damping","mass"];function GV(t,e){return e.some(n=>t[n]!==void 0)}function sxe(t){let e={velocity:cn.velocity,stiffness:cn.stiffness,damping:cn.damping,mass:cn.mass,isResolvedFromDuration:!1,...t};if(!GV(t,ixe)&&GV(t,rxe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ba(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:cn.mass,stiffness:i,damping:s}}else{const n=exe(t);e={...e,...n,mass:cn.mass},e.isResolvedFromDuration=!0}return e}function nT(t=cn.visualDuration,e=cn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=sxe({...n,velocity:-Ji(n.velocity||0)}),_=h||0,v=l/(2*Math.sqrt(c*u)),T=o-s,y=Ji(Math.sqrt(c/u)),w=Math.abs(T)<5;r||(r=w?cn.restSpeed.granular:cn.restSpeed.default),i||(i=w?cn.restDelta.granular:cn.restDelta.default);let C;if(v<1){const k=D0(y,v);C=D=>{const A=Math.exp(-v*y*D);return o-A*((_+v*y*T)/k*Math.sin(k*D)+T*Math.cos(k*D))}}else if(v===1)C=k=>o-Math.exp(-y*k)*(T+(_+y*T)*k);else{const k=y*Math.sqrt(v*v-1);C=D=>{const A=Math.exp(-v*y*D),S=Math.min(k*D,300);return o-A*((_+v*y*T)*Math.sinh(S)+k*T*Math.cosh(S))/k}}const b={calculatedDuration:m&&d||null,next:k=>{const D=C(k);if(m)a.done=k>=d;else{let A=k===0?_:0;v<1&&(A=k===0?So(_):j8(C,k,D));const S=Math.abs(A)<=r,x=Math.abs(o-D)<=i;a.done=S&&x}return a.value=a.done?o:D,a},toString:()=>{const k=Math.min(L1(b),tT),D=V8(A=>b.next(k*A).value,k,30);return k+"ms "+D},toTransition:()=>{}};return b}nT.applyToOptions=t=>{const e=Jke(t,100,nT);return t.ease=e.ease,t.duration=So(e.duration),t.type="keyframes",t};function L0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},m=S=>a!==void 0&&S<a||c!==void 0&&S>c,_=S=>a===void 0?c:c===void 0||Math.abs(a-S)<Math.abs(c-S)?a:c;let v=n*e;const T=d+v,y=o===void 0?T:o(T);y!==T&&(v=y-d);const w=S=>-v*Math.exp(-S/r),C=S=>y+w(S),b=S=>{const x=w(S),N=C(S);h.done=Math.abs(x)<=l,h.value=h.done?y:N};let k,D;const A=S=>{m(h.value)&&(k=S,D=nT({keyframes:[h.value,_(h.value)],velocity:j8(C,S,h.value),damping:i,stiffness:s,restDelta:l,restSpeed:u}))};return A(0),{calculatedDuration:null,next:S=>{let x=!1;return!D&&k===void 0&&(x=!0,b(S),A(S)),k!==void 0&&S>=k?D.next(S-k):(!x&&b(S),h)}}}function oxe(t,e,n){const r=[],i=n||Ia.mix||F8,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||ts:e;a=my(c,a)}r.push(a)}return r}function axe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(I1(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=oxe(e,r,i),c=a.length,l=u=>{if(o&&u<t[0])return e[0];let d=0;if(c>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=gg(t[d],t[d+1],u);return a[d](h)};return n?u=>l(ba(t[0],t[s-1],u)):l}function cxe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=gg(0,e,r);t.push(en(n,1,i))}}function lxe(t){const e=[0];return cxe(e,t.length-1),e}function uxe(t,e){return t.map(n=>n*e)}function dxe(t,e){return t.map(()=>e||A8).splice(0,t.length-1)}function um({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Cke(r)?r.map(HV):HV(r),s={done:!1,value:e[0]},o=uxe(n&&n.length===e.length?n:lxe(e),t),a=axe(o,e,{ease:Array.isArray(i)?i:dxe(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}const hxe=t=>t!==null;function F1(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(hxe),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const fxe={decay:L0,inertia:L0,tween:um,keyframes:um,spring:nT};function U8(t){typeof t.type=="string"&&(t.type=fxe[t.type])}class V1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const pxe=t=>t/100;class j1 extends V1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==ci.now()&&this.tick(ci.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;U8(e);const{type:n=um,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const c=n||um;c!==um&&typeof a[0]!="number"&&(this.mixKeyframes=my(pxe,F8(a[0],a[1])),a=[0,100]);const l=c({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=L1(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:m,type:_,onUpdate:v,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const y=this.currentTime-l*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,b=r;if(d){const S=Math.min(this.currentTime,i)/a;let x=Math.floor(S),N=S%1;!N&&S>=1&&(N=1),N===1&&x--,x=Math.min(x,d+1),!!(x%2)&&(h==="reverse"?(N=1-N,m&&(N-=m/a)):h==="mirror"&&(b=o)),C=ba(0,1,N)*a}const k=w?{done:!1,value:u[0]}:b.next(C);s&&(k.value=s(k.value));let{done:D}=k;!w&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return A&&_!==L0&&(k.value=F1(u,this.options,T,this.speed)),v&&v(k.value),A&&this.finish(),k}then(e,n){return this.finished.then(e,n)}get duration(){return Ji(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ji(e)}get time(){return Ji(this.currentTime)}set time(e){var n;e=So(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ci.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ji(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Xke,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ci.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function mxe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Yl=t=>t*180/Math.PI,F0=t=>{const e=Yl(Math.atan2(t[1],t[0]));return V0(e)},gxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:F0,rotateZ:F0,skewX:t=>Yl(Math.atan(t[1])),skewY:t=>Yl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},V0=t=>(t=t%360,t<0&&(t+=360),t),QV=F0,YV=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),XV=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),yxe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YV,scaleY:XV,scale:t=>(YV(t)+XV(t))/2,rotateX:t=>V0(Yl(Math.atan2(t[6],t[5]))),rotateY:t=>V0(Yl(Math.atan2(-t[2],t[0]))),rotateZ:QV,rotate:QV,skewX:t=>Yl(Math.atan(t[4])),skewY:t=>Yl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function j0(t){return t.includes("scale")?1:0}function U0(t,e){if(!t||t==="none")return j0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=yxe,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gxe,i=a}if(!i)return j0(e);const s=r[e],o=i[1].split(",").map(wxe);return typeof s=="function"?s(o):o[s]}const vxe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return U0(n,e)};function wxe(t){return parseFloat(t.trim())}const Nf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Of=new Set(Nf),JV=t=>t===Pf||t===We,_xe=new Set(["x","y","z"]),Txe=Nf.filter(t=>!_xe.has(t));function Cxe(t){const e=[];return Txe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const du={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>U0(e,"x"),y:(t,{transform:e})=>U0(e,"y")};du.translateX=du.x;du.translateY=du.y;const hu=new Set;let $0=!1,B0=!1,H0=!1;function $8(){if(B0){const t=Array.from(hu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Cxe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}B0=!1,$0=!1,hu.forEach(t=>t.complete(H0)),hu.clear()}function B8(){hu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(B0=!0)})}function Exe(){H0=!0,B8(),$8(),H0=!1}class U1{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(hu.add(this),$0||($0=!0,Jt.read(B8),Jt.resolveKeyframes($8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}mxe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),hu.delete(this)}cancel(){this.state==="scheduled"&&(hu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Sxe=t=>t.startsWith("--");function bxe(t,e,n){Sxe(e)?t.style.setProperty(e,n):t.style[e]=n}const Ixe=A1(()=>window.ScrollTimeline!==void 0),Axe={};function kxe(t,e){const n=A1(t);return()=>Axe[e]??n()}const H8=kxe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ip=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ZV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ip([0,.65,.55,1]),circOut:Ip([.55,0,1,.45]),backIn:Ip([.31,.01,.66,-.59]),backOut:Ip([.33,1.53,.69,.99])};function z8(t,e){if(t)return typeof t=="function"?H8()?V8(t,e):"ease-out":k8(t)?Ip(t):Array.isArray(t)?t.map(n=>z8(n,e)||ZV.easeOut):ZV[t]}function xxe(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:c}={},l=void 0){const u={[e]:n};c&&(u.offset=c);const d=z8(a,i);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return l&&(h.pseudoElement=l),t.animate(u,h)}function W8(t){return typeof t=="function"&&"applyToOptions"in t}function Rxe({type:t,...e}){return W8(t)&&H8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Pxe extends V1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,I1(typeof e.type!="string");const l=Rxe(e);this.animation=xxe(n,r,i,l,s),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=F1(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):bxe(n,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ji(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ji(e)}get time(){return Ji(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=So(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Ixe()?(this.animation.timeline=e,ts):n(this)}}const K8={anticipate:S8,backInOut:E8,circInOut:I8};function Nxe(t){return t in K8}function Oxe(t){typeof t.ease=="string"&&Nxe(t.ease)&&(t.ease=K8[t.ease])}const ej=10;class Mxe extends Pxe{constructor(e){Oxe(e),U8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new j1({...o,autoplay:!1}),c=So(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-ej).value,a.sample(c).value,ej),a.stop()}}const tj=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(tl.test(t)||t==="0")&&!t.startsWith("url("));function Dxe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Lxe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=tj(i,e),a=tj(s,e);return!o||!a?!1:Dxe(t)||(n==="spring"||W8(n))&&r}function z0(t){t.duration=0,t.type="keyframes"}const Fxe=new Set(["opacity","clipPath","filter","transform"]),Vxe=A1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function jxe(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=e.owner.getProps();return Vxe()&&n&&Fxe.has(n)&&(n!=="transform"||!l)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Uxe=40;class $xe extends V1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:c,motionValue:l,element:u,...d}){var _;super(),this.stop=()=>{var v,T;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=ci.now();const h={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:l,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||U1;this.keyframeResolver=new m(a,(v,T,y)=>this.onKeyframesResolved(v,T,h,!y),c,l,u),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:c,isHandoff:l,onUpdate:u}=r;this.resolvedAt=ci.now(),Lxe(e,s,o,a)||((Ia.instantAnimations||!c)&&(u==null||u(F1(e,r,n))),e[0]=e[e.length-1],z0(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Uxe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!l&&jxe(h)?new Mxe({...h,element:h.motionValue.owner.current}):new j1(h);m.finished.then(()=>this.notifyFinished()).catch(ts),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Exe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Bxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Hxe(t){const e=Bxe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function q8(t,e,n=1){const[r,i]=Hxe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return m8(o)?parseFloat(o):o}return N1(i)?q8(i,e,n+1):i}function $1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const G8=new Set(["width","height","top","left","right","bottom",...Nf]),zxe={test:t=>t==="auto",parse:t=>t},Q8=t=>e=>e.test(t),Y8=[Pf,We,bo,Qa,Dke,Mke,zxe],nj=t=>Y8.find(Q8(t));function Wxe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||y8(t):!0}const Kxe=new Set(["brightness","contrast","saturate","opacity"]);function qxe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(O1)||[];if(!r)return t;const i=n.replace(r,"");let s=Kxe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Gxe=/\b([a-z-]*)\(.*?\)/gu,W0={...tl,getAnimatableNone:t=>{const e=t.match(Gxe);return e?e.map(qxe).join(" "):t}},rj={...Pf,transform:Math.round},Qxe={rotate:Qa,rotateX:Qa,rotateY:Qa,rotateZ:Qa,scale:Cv,scaleX:Cv,scaleY:Cv,scaleZ:Cv,skew:Qa,skewX:Qa,skewY:Qa,distance:We,translateX:We,translateY:We,translateZ:We,x:We,y:We,z:We,perspective:We,transformPerspective:We,opacity:yg,originX:zV,originY:zV,originZ:We},B1={borderWidth:We,borderTopWidth:We,borderRightWidth:We,borderBottomWidth:We,borderLeftWidth:We,borderRadius:We,radius:We,borderTopLeftRadius:We,borderTopRightRadius:We,borderBottomRightRadius:We,borderBottomLeftRadius:We,width:We,maxWidth:We,height:We,maxHeight:We,top:We,right:We,bottom:We,left:We,padding:We,paddingTop:We,paddingRight:We,paddingBottom:We,paddingLeft:We,margin:We,marginTop:We,marginRight:We,marginBottom:We,marginLeft:We,backgroundPositionX:We,backgroundPositionY:We,...Qxe,zIndex:rj,fillOpacity:yg,strokeOpacity:yg,numOctaves:rj},Yxe={...B1,color:En,backgroundColor:En,outlineColor:En,fill:En,stroke:En,borderColor:En,borderTopColor:En,borderRightColor:En,borderBottomColor:En,borderLeftColor:En,filter:W0,WebkitFilter:W0},X8=t=>Yxe[t];function J8(t,e){let n=X8(t);return n!==W0&&(n=tl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Xxe=new Set(["auto","none","0"]);function Jxe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Xxe.has(s)&&vg(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=J8(n,i)}class Zxe extends U1{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="string"&&(l=l.trim(),N1(l))){const u=q8(l,n.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!G8.has(r)||e.length!==2)return;const[i,s]=e,o=nj(i),a=nj(s);if(o!==a)if(JV(o)&&JV(a))for(let c=0;c<e.length;c++){const l=e[c];typeof l=="string"&&(e[c]=parseFloat(l))}else du[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Wxe(e[i]))&&r.push(i);r.length&&Jxe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=du[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=du[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,l])=>{e.getValue(c).set(l)}),this.resolveNoneKeyframes()}}function eRe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Z8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function tRe(t){return g8(t)&&"offsetHeight"in t}const ij=30,nRe=t=>!isNaN(parseFloat(t));class rRe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=ci.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ci.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=nRe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new k1);const r=this.events[e].add(n);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ci.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ij)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ij);return v8(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kh(t,e){return new rRe(t,e)}const{schedule:H1}=x8(queueMicrotask,!1),fs={x:!1,y:!1};function e7(){return fs.x||fs.y}function iRe(t){return t==="x"||t==="y"?fs[t]?null:(fs[t]=!0,()=>{fs[t]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function t7(t,e){const n=eRe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function sj(t){return!(t.pointerType==="touch"||e7())}function sRe(t,e,n={}){const[r,i,s]=t7(t,n),o=a=>{if(!sj(a))return;const{target:c}=a,l=e(c,a);if(typeof l!="function"||!c)return;const u=d=>{sj(d)&&(l(d),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const n7=(t,e)=>e?t===e?!0:n7(t,e.parentElement):!1,z1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,oRe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aRe(t){return oRe.has(t.tagName)||t.tabIndex!==-1}const cw=new WeakSet;function oj(t){return e=>{e.key==="Enter"&&t(e)}}function Ob(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cRe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=oj(()=>{if(cw.has(n))return;Ob(n,"down");const i=oj(()=>{Ob(n,"up")}),s=()=>Ob(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function aj(t){return z1(t)&&!e7()}function lRe(t,e,n={}){const[r,i,s]=t7(t,n),o=a=>{const c=a.currentTarget;if(!aj(a))return;cw.add(c);const l=e(c,a),u=(m,_)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),cw.has(c)&&cw.delete(c),aj(m)&&typeof l=="function"&&l(m,{success:_})},d=m=>{u(m,c===window||c===document||n.useGlobalTarget||n7(c,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),tRe(a)&&(a.addEventListener("focus",l=>cRe(l,i)),!aRe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function r7(t){return g8(t)&&"ownerSVGElement"in t}function uRe(t){return r7(t)&&t.tagName==="svg"}const Ir=t=>!!(t&&t.getVelocity),dRe=[...Y8,En,tl],hRe=t=>dRe.find(Q8(t)),i7=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function fRe(t=!0){const e=g.useContext(E1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=g.useId();g.useEffect(()=>{if(t)return i(s)},[t]);const o=g.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const s7=g.createContext({strict:!1}),cj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qh={};for(const t in cj)qh[t]={isEnabled:e=>cj[t].some(n=>!!e[n])};function pRe(t){for(const e in t)qh[e]={...qh[e],...t[e]}}const mRe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mRe.has(t)}let o7=t=>!rT(t);function gRe(t){typeof t=="function"&&(o7=e=>e.startsWith("on")?!rT(e):t(e))}try{gRe(require("@emotion/is-prop-valid").default)}catch{}function yRe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(o7(i)||n===!0&&rT(i)||!e&&!rT(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const bE=g.createContext({});function IE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function wg(t){return typeof t=="string"||Array.isArray(t)}const W1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],K1=["initial",...W1];function AE(t){return IE(t.animate)||K1.some(e=>wg(t[e]))}function a7(t){return!!(AE(t)||t.variants)}function vRe(t,e){if(AE(t)){const{initial:n,animate:r}=t;return{initial:n===!1||wg(n)?n:void 0,animate:wg(r)?r:void 0}}return t.inherit!==!1?e:{}}function wRe(t){const{initial:e,animate:n}=vRe(t,g.useContext(bE));return g.useMemo(()=>({initial:e,animate:n}),[lj(e),lj(n)])}function lj(t){return Array.isArray(t)?t.join(" "):t}const _g={};function _Re(t){for(const e in t)_g[e]=t[e],P1(e)&&(_g[e].isCSSVariable=!0)}function c7(t,{layout:e,layoutId:n}){return Of.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_g[t]||t==="opacity")}const TRe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CRe=Nf.length;function ERe(t,e,n){let r="",i=!0;for(let s=0;s<CRe;s++){const o=Nf[s],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const l=Z8(a,B1[o]);if(!c){i=!1;const u=TRe[o]||o;r+=`${u}(${l}) `}n&&(e[o]=l)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function q1(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const l=e[c];if(Of.has(c)){o=!0;continue}else if(P1(c)){i[c]=l;continue}else{const u=Z8(l,B1[c]);c.startsWith("origin")?(a=!0,s[c]=u):r[c]=u}}if(e.transform||(o||n?r.transform=ERe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:l="50%",originZ:u=0}=s;r.transformOrigin=`${c} ${l} ${u}`}}const G1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function l7(t,e,n){for(const r in e)!Ir(e[r])&&!c7(r,n)&&(t[r]=e[r])}function SRe({transformTemplate:t},e){return g.useMemo(()=>{const n=G1();return q1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bRe(t,e){const n=t.style||{},r={};return l7(r,n,t),Object.assign(r,SRe(t,e)),r}function IRe(t,e){const n={},r=bRe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const ARe={offset:"stroke-dashoffset",array:"stroke-dasharray"},kRe={offset:"strokeDashoffset",array:"strokeDasharray"};function xRe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?ARe:kRe;t[s.offset]=We.transform(-r);const o=We.transform(e),a=We.transform(n);t[s.array]=`${o} ${a}`}function u7(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},c,l,u){if(q1(t,a,l),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&xRe(d,i,s,o,!1)}const d7=()=>({...G1(),attrs:{}}),h7=t=>typeof t=="string"&&t.toLowerCase()==="svg";function RRe(t,e,n,r){const i=g.useMemo(()=>{const s=d7();return u7(s,e,h7(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};l7(s,t.style,t),i.style={...s,...i.style}}return i}const PRe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Q1(t){return typeof t!="string"||t.includes("-")?!1:!!(PRe.indexOf(t)>-1||/[A-Z]/u.test(t))}function NRe(t,e,n,{latestValues:r},i,s=!1){const a=(Q1(t)?RRe:IRe)(e,r,i,t),c=yRe(e,typeof t=="string",s),l=t!==g.Fragment?{...c,...a,ref:n}:{},{children:u}=e,d=g.useMemo(()=>Ir(u)?u.get():u,[u]);return g.createElement(t,{...l,children:d})}function uj(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Y1(t,e,n,r){if(typeof e=="function"){const[i,s]=uj(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=uj(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function lw(t){return Ir(t)?t.get():t}function ORe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:MRe(n,r,i,t),renderState:e()}}function MRe(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=lw(s[h]);let{initial:o,animate:a}=t;const c=AE(t),l=a7(t);e&&l&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!IE(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const _=Y1(t,h[m]);if(_){const{transitionEnd:v,transition:T,...y}=_;for(const w in y){let C=y[w];if(Array.isArray(C)){const b=u?C.length-1:0;C=C[b]}C!==null&&(i[w]=C)}for(const w in v)i[w]=v[w]}}}return i}const f7=t=>(e,n)=>{const r=g.useContext(bE),i=g.useContext(E1),s=()=>ORe(t,e,r,i);return n?s():pke(s)};function X1(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Ir(r[o])||e.style&&Ir(e.style[o])||c7(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const DRe=f7({scrapeMotionValuesFromProps:X1,createRenderState:G1});function p7(t,e,n){const r=X1(t,e,n);for(const i in t)if(Ir(t[i])||Ir(e[i])){const s=Nf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const LRe=f7({scrapeMotionValuesFromProps:p7,createRenderState:d7}),FRe=Symbol.for("motionComponentSymbol");function Dd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function VRe(t,e,n){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Dd(n)&&(n.current=r))},[e])}const J1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jRe="framerAppearId",m7="data-"+J1(jRe),g7=g.createContext({});function URe(t,e,n,r,i){var v,T;const{visualElement:s}=g.useContext(bE),o=g.useContext(s7),a=g.useContext(E1),c=g.useContext(i7).reducedMotion,l=g.useRef(null);r=r||o.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const u=l.current,d=g.useContext(g7);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&$Re(l.current,n,i,d);const h=g.useRef(!1);g.useInsertionEffect(()=>{u&&h.current&&u.update(n,a)});const m=n[m7],_=g.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,m)));return mke(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),_.current&&u.animationState&&u.animationState.animateChanges())}),g.useEffect(()=>{u&&(!_.current&&u.animationState&&u.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),_.current=!1),u.enteringChildren=void 0)}),u}function $Re(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:y7(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Dd(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function y7(t){if(t)return t.options.allowProjection!==!1?t.projection:y7(t.parent)}function Mb(t,{forwardMotionProps:e=!1}={},n,r){n&&pRe(n);const i=Q1(t)?LRe:DRe;function s(a,c){let l;const u={...g.useContext(i7),...a,layoutId:BRe(a)},{isStatic:d}=u,h=wRe(a),m=i(a,d);if(!d&&C1){HRe();const _=zRe(u);l=_.MeasureLayout,h.visualElement=URe(t,m,u,r,_.ProjectionNode)}return p.jsxs(bE.Provider,{value:h,children:[l&&h.visualElement?p.jsx(l,{visualElement:h.visualElement,...u}):null,NRe(t,a,VRe(m,h.visualElement,c),m,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=g.forwardRef(s);return o[FRe]=t,o}function BRe({layoutId:t}){const e=g.useContext(p8).id;return e&&t!==void 0?e+"-"+t:t}function HRe(t,e){g.useContext(s7).strict}function zRe(t){const{drag:e,layout:n}=qh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function WRe(t,e){if(typeof Proxy>"u")return Mb;const n=new Map,r=(s,o)=>Mb(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Mb(o,void 0,t,e)),n.get(o))})}function v7({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function KRe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function qRe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Db(t){return t===void 0||t===1}function K0({scale:t,scaleX:e,scaleY:n}){return!Db(t)||!Db(e)||!Db(n)}function Pl(t){return K0(t)||w7(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function w7(t){return dj(t.x)||dj(t.y)}function dj(t){return t&&t!=="0%"}function iT(t,e,n){const r=t-n,i=e*r;return n+i}function hj(t,e,n,r,i){return i!==void 0&&(t=iT(t,i,r)),iT(t,n,r)+e}function q0(t,e=0,n=1,r,i){t.min=hj(t.min,e,n,r,i),t.max=hj(t.max,e,n,r,i)}function _7(t,{x:e,y:n}){q0(t.x,e.translate,e.scale,e.originPoint),q0(t.y,n.translate,n.scale,n.originPoint)}const fj=.999999999999,pj=1.0000000000001;function GRe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Fd(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,_7(t,o)),r&&Pl(s.latestValues)&&Fd(t,s.latestValues))}e.x<pj&&e.x>fj&&(e.x=1),e.y<pj&&e.y>fj&&(e.y=1)}function Ld(t,e){t.min=t.min+e,t.max=t.max+e}function mj(t,e,n,r,i=.5){const s=en(t.min,t.max,i);q0(t,e,n,s,r)}function Fd(t,e){mj(t.x,e.x,e.scaleX,e.scale,e.originX),mj(t.y,e.y,e.scaleY,e.scale,e.originY)}function T7(t,e){return v7(qRe(t.getBoundingClientRect(),e))}function QRe(t,e,n){const r=T7(t,n),{scroll:i}=e;return i&&(Ld(r.x,i.offset.x),Ld(r.y,i.offset.y)),r}const gj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vd=()=>({x:gj(),y:gj()}),yj=()=>({min:0,max:0}),mn=()=>({x:yj(),y:yj()}),G0={current:null},C7={current:!1};function YRe(){if(C7.current=!0,!!C1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>G0.current=t.matches;t.addEventListener("change",e),e()}else G0.current=!1}const XRe=new WeakMap;function JRe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ir(i))t.addValue(r,i);else if(Ir(s))t.addValue(r,Kh(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Kh(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const vj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZRe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=U1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ci.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Jt.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=AE(n),this.isVariantNode=a7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const m=d[h];c[h]!==void 0&&Ir(m)&&m.set(c[h])}}mount(e){var n;this.current=e,XRe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),C7.current||YRe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:G0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),el(this.notifyUpdate),el(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Of.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qh){const n=qh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vj.length;r++){const i=vj[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=JRe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Kh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(m8(r)||y8(r))?r=parseFloat(r):!hRe(r)&&tl.test(n)&&(r=J8(e,n)),this.setBaseTarget(e,Ir(r)?r.get():r)),Ir(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Y1(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ir(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new k1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){H1.render(this.render)}}class E7 extends ZRe{constructor(){super(...arguments),this.KeyframeResolver=Zxe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ir(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function S7(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function ePe(t){return window.getComputedStyle(t)}class tPe extends E7{constructor(){super(...arguments),this.type="html",this.renderInstance=S7}readValueFromInstance(e,n){var r;if(Of.has(n))return(r=this.projection)!=null&&r.isProjecting?j0(n):vxe(e,n);{const i=ePe(e),s=(P1(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return T7(e,n)}build(e,n,r){q1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return X1(e,n,r)}}const b7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nPe(t,e,n,r){S7(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(b7.has(i)?i:J1(i),e.attrs[i])}class rPe extends E7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Of.has(n)){const r=X8(n);return r&&r.default||0}return n=b7.has(n)?n:J1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return p7(e,n,r)}build(e,n,r){u7(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){nPe(e,n,r,i)}mount(e){this.isSVGTag=h7(e.tagName),super.mount(e)}}const iPe=(t,e)=>Q1(t)?new rPe(e):new tPe(e,{allowProjection:t!==g.Fragment});function sh(t,e,n){const r=t.getProps();return Y1(r,e,n!==void 0?n:r.custom,t)}const Q0=t=>Array.isArray(t);function sPe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Kh(n))}function oPe(t){return Q0(t)?t[t.length-1]||0:t}function aPe(t,e){const n=sh(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=oPe(s[o]);sPe(t,o,a)}}function cPe(t){return!!(Ir(t)&&t.add)}function Y0(t,e){const n=t.getValue("willChange");if(cPe(n))return n.add(e);if(!n&&Ia.WillChange){const r=new Ia.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function I7(t){return t.props[m7]}const lPe=t=>t!==null;function uPe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(lPe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const dPe={type:"spring",stiffness:500,damping:25,restSpeed:10},hPe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fPe={type:"keyframes",duration:.8},pPe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mPe=(t,{keyframes:e})=>e.length>2?fPe:Of.has(t)?t.startsWith("scale")?hPe(e[1]):dPe:pPe;function gPe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const Z1=(t,e,n,r={},i,s)=>o=>{const a=$1(r,t)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l=l-So(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};gPe(a)||Object.assign(u,mPe(t,u)),u.duration&&(u.duration=So(u.duration)),u.repeatDelay&&(u.repeatDelay=So(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(z0(u),u.delay===0&&(d=!0)),(Ia.instantAnimations||Ia.skipAnimations)&&(d=!0,z0(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const h=uPe(u.keyframes,a);if(h!==void 0){Jt.update(()=>{u.onUpdate(h),u.onComplete()});return}}return a.isSync?new j1(u):new $xe(u)};function yPe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function A7(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const c=[],l=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const d=t.getValue(u,t.latestValues[u]??null),h=a[u];if(h===void 0||l&&yPe(l,u))continue;const m={delay:n,...$1(s||{},u)},_=d.get();if(_!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===_&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=I7(t);if(y){const w=window.MotionHandoffAnimation(y,u,Jt);w!==null&&(m.startTime=w,v=!0)}}Y0(t,u),d.start(Z1(u,d,h,t.shouldReduceMotion&&G8.has(u)?{type:!1}:m,t,v));const T=d.animation;T&&c.push(T)}return o&&Promise.all(c).then(()=>{Jt.update(()=>{o&&aPe(t,o)})}),c}function k7(t,e,n,r=0,i=1){const s=Array.from(t).sort((l,u)=>l.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function X0(t,e,n={}){var c;const r=sh(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(A7(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return vPe(t,e,l,u,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function vPe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(X0(c,e,{...o,delay:n+(typeof r=="function"?0:r)+k7(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function wPe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>X0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=X0(t,e,n);else{const i=typeof e=="function"?sh(t,e,n.custom):e;r=Promise.all(A7(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function x7(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const _Pe=K1.length;function R7(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?R7(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_Pe;n++){const r=K1[n],i=t.props[r];(wg(i)||i===!1)&&(e[r]=i)}return e}const TPe=[...W1].reverse(),CPe=W1.length;function EPe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>wPe(t,n,r)))}function SPe(t){let e=EPe(t),n=wj(),r=!0;const i=c=>(l,u)=>{var h;const d=sh(t,u,c==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:_,...v}=d;l={...l,...v,..._}}return l};function s(c){e=c(t)}function o(c){const{props:l}=t,u=R7(t.parent)||{},d=[],h=new Set;let m={},_=1/0;for(let T=0;T<CPe;T++){const y=TPe[T],w=n[y],C=l[y]!==void 0?l[y]:u[y],b=wg(C),k=y===c?w.isActive:null;k===!1&&(_=T);let D=C===u[y]&&C!==l[y]&&b;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),w.protectedKeys={...m},!w.isActive&&k===null||!C&&!w.prevProp||IE(C)||typeof C=="boolean")continue;const A=bPe(w.prevProp,C);let S=A||y===c&&w.isActive&&!D&&b||T>_&&b,x=!1;const N=Array.isArray(C)?C:[C];let R=N.reduce(i(y),{});k===!1&&(R={});const{prevResolvedValues:O={}}=w,P={...O,...R},z=q=>{S=!0,h.has(q)&&(x=!0,h.delete(q)),w.needsAnimating[q]=!0;const F=t.getValue(q);F&&(F.liveStyle=!1)};for(const q in P){const F=R[q],V=O[q];if(m.hasOwnProperty(q))continue;let X=!1;Q0(F)&&Q0(V)?X=!x7(F,V):X=F!==V,X?F!=null?z(q):h.add(q):F!==void 0&&h.has(q)?z(q):w.protectedKeys[q]=!0}w.prevProp=C,w.prevResolvedValues=R,w.isActive&&(m={...m,...R}),r&&t.blockInitialAnimation&&(S=!1);const K=D&&A;S&&(!K||x)&&d.push(...N.map(q=>{const F={type:y};if(typeof q=="string"&&r&&!K&&t.manuallyAnimateOnMount&&t.parent){const{parent:V}=t,X=sh(V,q);if(V.enteringChildren&&X){const{delayChildren:ge}=X.transition||{};F.delay=k7(V.enteringChildren,t,ge)}}return{animation:q,options:F}}))}if(h.size){const T={};if(typeof l.initial!="boolean"){const y=sh(t,Array.isArray(l.initial)?l.initial[0]:l.initial);y&&y.transition&&(T.transition=y.transition)}h.forEach(y=>{const w=t.getBaseTarget(y),C=t.getValue(y);C&&(C.liveStyle=!0),T[y]=w??null}),d.push({animation:T})}let v=!!d.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function a(c,l){var d;if(n[c].isActive===l)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(c,l)}),n[c].isActive=l;const u=o(c);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=wj()}}}function bPe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!x7(e,t):!1}function Sl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wj(){return{animate:Sl(!0),whileInView:Sl(),whileHover:Sl(),whileTap:Sl(),whileDrag:Sl(),whileFocus:Sl(),exit:Sl()}}class vl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class IPe extends vl{constructor(e){super(e),e.animationState||(e.animationState=SPe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();IE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let APe=0;class kPe extends vl{constructor(){super(...arguments),this.id=APe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const xPe={animation:{Feature:IPe},exit:{Feature:kPe}};function Tg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function vy(t){return{point:{x:t.pageX,y:t.pageY}}}const RPe=t=>e=>z1(e)&&t(e,vy(e));function dm(t,e,n,r){return Tg(t,e,RPe(n),r)}const P7=1e-4,PPe=1-P7,NPe=1+P7,N7=.01,OPe=0-N7,MPe=0+N7;function jr(t){return t.max-t.min}function DPe(t,e,n){return Math.abs(t-e)<=n}function _j(t,e,n,r=.5){t.origin=r,t.originPoint=en(e.min,e.max,t.origin),t.scale=jr(n)/jr(e),t.translate=en(n.min,n.max,t.origin)-t.originPoint,(t.scale>=PPe&&t.scale<=NPe||isNaN(t.scale))&&(t.scale=1),(t.translate>=OPe&&t.translate<=MPe||isNaN(t.translate))&&(t.translate=0)}function hm(t,e,n,r){_j(t.x,e.x,n.x,r?r.originX:void 0),_j(t.y,e.y,n.y,r?r.originY:void 0)}function Tj(t,e,n){t.min=n.min+e.min,t.max=t.min+jr(e)}function LPe(t,e,n){Tj(t.x,e.x,n.x),Tj(t.y,e.y,n.y)}function Cj(t,e,n){t.min=e.min-n.min,t.max=t.min+jr(e)}function fm(t,e,n){Cj(t.x,e.x,n.x),Cj(t.y,e.y,n.y)}function Hi(t){return[t("x"),t("y")]}const O7=({current:t})=>t?t.ownerDocument.defaultView:null,Ej=(t,e)=>Math.abs(t-e);function FPe(t,e){const n=Ej(t.x,e.x),r=Ej(t.y,e.y);return Math.sqrt(n**2+r**2)}class M7{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Fb(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,_=FPe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!_)return;const{point:v}=h,{timestamp:T}=or;this.history.push({...v,timestamp:T});const{onStart:y,onMove:w}=this.handlers;m||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Lb(m,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:_,onSessionEnd:v,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Fb(h.type==="pointercancel"?this.lastMoveEventInfo:Lb(m,this.transformPagePoint),this.history);this.startEvent&&_&&_(h,y),v&&v(h,y)},!z1(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=vy(e),c=Lb(a,this.transformPagePoint),{point:l}=c,{timestamp:u}=or;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Fb(c,this.history)),this.removeListeners=my(dm(this.contextWindow,"pointermove",this.handlePointerMove),dm(this.contextWindow,"pointerup",this.handlePointerUp),dm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),el(this.updatePoint)}}function Lb(t,e){return e?{point:e(t.point)}:t}function Sj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fb({point:t},e){return{point:t,delta:Sj(t,D7(e)),offset:Sj(t,VPe(e)),velocity:jPe(e,.1)}}function VPe(t){return t[0]}function D7(t){return t[t.length-1]}function jPe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=D7(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>So(e)));)n--;if(!r)return{x:0,y:0};const s=Ji(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function UPe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?en(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?en(n,t,r.max):Math.min(t,n)),t}function bj(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function $Pe(t,{top:e,left:n,bottom:r,right:i}){return{x:bj(t.x,n,i),y:bj(t.y,e,r)}}function Ij(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function BPe(t,e){return{x:Ij(t.x,e.x),y:Ij(t.y,e.y)}}function HPe(t,e){let n=.5;const r=jr(t),i=jr(e);return i>r?n=gg(e.min,e.max-r,t.min):r>i&&(n=gg(t.min,t.max-i,e.min)),ba(0,1,n)}function zPe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const J0=.35;function WPe(t=J0){return t===!1?t=0:t===!0&&(t=J0),{x:Aj(t,"left","right"),y:Aj(t,"top","bottom")}}function Aj(t,e,n){return{min:kj(t,e),max:kj(t,n)}}function kj(t,e){return typeof t=="number"?t:t[e]||0}const KPe=new WeakMap;class qPe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vy(d).point)},o=(d,h)=>{const{drag:m,dragPropagation:_,onDragStart:v}=this.getProps();if(m&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iRe(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hi(y=>{let w=this.getAxisMotionValue(y).get()||0;if(bo.test(w)){const{projection:C}=this.visualElement;if(C&&C.layout){const b=C.layout.layoutBox[y];b&&(w=jr(b)*(parseFloat(w)/100))}}this.originPoint[y]=w}),v&&Jt.postRender(()=>v(d,h)),Y0(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},a=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:v,onDrag:T}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=h;if(_&&this.currentDirection===null){this.currentDirection=GPe(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),T&&T(d,h)},c=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Hi(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new M7(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:O7(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Jt.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ev(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=UPe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Dd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=$Pe(r.layoutBox,e):this.constraints=!1,this.elastic=WPe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Hi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zPe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Dd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=QRe(r,i.root,this.visualElement.getTransformPagePoint());let o=BPe(i.layout.layoutBox,s);if(n){const a=n(KRe(o));this.hasMutatedConstraints=!!a,a&&(o=v7(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=Hi(u=>{if(!Ev(u,n,this.currentDirection))return;let d=c&&c[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,_={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,_)});return Promise.all(l).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Y0(this.visualElement,e),r.start(Z1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Hi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hi(n=>{const{drag:r}=this.getProps();if(!Ev(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-en(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Dd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Hi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=HPe({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hi(o=>{if(!Ev(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(en(c,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;KPe.set(this.visualElement,this);const e=this.visualElement.current,n=dm(e,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Dd(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Jt.read(r);const o=Tg(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(Hi(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=c[u].translate,d.set(d.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=J0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ev(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function GPe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class QPe extends vl{constructor(e){super(e),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new qPe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}unmount(){this.removeGroupControls(),this.removeListeners()}}const xj=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class YPe extends vl{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(e){this.session=new M7(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:O7(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:xj(e),onStart:xj(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Jt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=dm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const lp={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(We.test(t))t=parseFloat(t);else return t;const n=Rj(t,e.target.x),r=Rj(t,e.target.y);return`${n}% ${r}%`}},XPe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=tl.parse(t);if(i.length>5)return r;const s=tl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const l=en(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),s(i)}};let Vb=!1;class JPe extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;_Re(ZPe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Vb&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),uw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Vb=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Jt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),H1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Vb=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L7(t){const[e,n]=fRe(),r=g.useContext(p8);return p.jsx(JPe,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(g7),isPresent:e,safeToRemove:n})}const ZPe={borderRadius:{...lp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lp,borderTopRightRadius:lp,borderBottomLeftRadius:lp,borderBottomRightRadius:lp,boxShadow:XPe};function eNe(t,e,n){const r=Ir(t)?t:Kh(t);return r.start(Z1("",r,e,n)),r.animation}const tNe=(t,e)=>t.depth-e.depth;class nNe{constructor(){this.children=[],this.isDirty=!1}add(e){S1(this.children,e),this.isDirty=!0}remove(e){b1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tNe),this.isDirty=!1,this.children.forEach(e)}}function rNe(t,e){const n=ci.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(el(r),t(s-e))};return Jt.setup(r,!0),()=>el(r)}const F7=["TopLeft","TopRight","BottomLeft","BottomRight"],iNe=F7.length,Pj=t=>typeof t=="string"?parseFloat(t):t,Nj=t=>typeof t=="number"||We.test(t);function sNe(t,e,n,r,i,s){i?(t.opacity=en(0,n.opacity??1,oNe(r)),t.opacityExit=en(e.opacity??1,0,aNe(r))):s&&(t.opacity=en(e.opacity??1,n.opacity??1,r));for(let o=0;o<iNe;o++){const a=`border${F7[o]}Radius`;let c=Oj(e,a),l=Oj(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||Nj(c)===Nj(l)?(t[a]=Math.max(en(Pj(c),Pj(l),r),0),(bo.test(l)||bo.test(c))&&(t[a]+="%")):t[a]=l}(e.rotate||n.rotate)&&(t.rotate=en(e.rotate||0,n.rotate||0,r))}function Oj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const oNe=V7(0,.5,b8),aNe=V7(.5,.95,ts);function V7(t,e,n){return r=>r<t?0:r>e?1:n(gg(t,e,r))}function Mj(t,e){t.min=e.min,t.max=e.max}function Bi(t,e){Mj(t.x,e.x),Mj(t.y,e.y)}function Dj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Lj(t,e,n,r,i){return t-=e,t=iT(t,1/n,r),i!==void 0&&(t=iT(t,1/i,r)),t}function cNe(t,e=0,n=1,r=.5,i,s=t,o=t){if(bo.test(e)&&(e=parseFloat(e),e=en(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=en(s.min,s.max,r);t===s&&(a-=e),t.min=Lj(t.min,e,n,a,i),t.max=Lj(t.max,e,n,a,i)}function Fj(t,e,[n,r,i],s,o){cNe(t,e[n],e[r],e[i],e.scale,s,o)}const lNe=["x","scaleX","originX"],uNe=["y","scaleY","originY"];function Vj(t,e,n,r){Fj(t.x,e,lNe,n?n.x:void 0,r?r.x:void 0),Fj(t.y,e,uNe,n?n.y:void 0,r?r.y:void 0)}function jj(t){return t.translate===0&&t.scale===1}function j7(t){return jj(t.x)&&jj(t.y)}function Uj(t,e){return t.min===e.min&&t.max===e.max}function dNe(t,e){return Uj(t.x,e.x)&&Uj(t.y,e.y)}function $j(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function U7(t,e){return $j(t.x,e.x)&&$j(t.y,e.y)}function Bj(t){return jr(t.x)/jr(t.y)}function Hj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hNe{constructor(){this.members=[]}add(e){S1(this.members,e),e.scheduleRender()}remove(e){if(b1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fNe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:_}=n;l&&(r=`perspective(${l}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const jb=["","X","Y","Z"],pNe=1e3;let mNe=0;function Ub(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function $7(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=I7(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&$7(r)}function B7({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=mNe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vNe),this.nodes.forEach(CNe),this.nodes.forEach(ENe),this.nodes.forEach(wNe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new nNe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new k1),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=r7(o)&&!uRe(o),this.instance=o;const{layoutId:a,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;Jt.read(()=>{d=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,u&&u(),u=rNe(h,250),uw.hasAnimatedSinceResize&&(uw.hasAnimatedSinceResize=!1,this.nodes.forEach(Kj)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||l.getDefaultTransition()||kNe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:T}=l.getProps(),y=!this.targetLayout||!U7(this.targetLayout,m),w=!d&&h;if(this.options.layoutRoot||this.resumeFrom||w||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...$1(_,"layout"),onPlay:v,onComplete:T};(l.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(u,w)}else d||Kj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),el(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SNe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Wj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(TNe),this.nodes.forEach(gNe),this.nodes.forEach(yNe)):this.nodes.forEach(Wj),this.clearAllSnapshots();const a=ci.now();or.delta=ba(0,1e3/60,a-or.timestamp),or.timestamp=a,or.isProcessing=!0,kb.update.process(or),kb.preRender.process(or),kb.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,H1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_Ne),this.sharedNodes.forEach(bNe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jr(this.snapshot.measuredBox.x)&&!jr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!j7(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&this.instance&&(a||Pl(this.latestValues)||u)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),xNe(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return mn();const a=o.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(RNe))){const{scroll:u}=this.root;u&&(Ld(a.x,u.offset.x),Ld(a.y,u.offset.y))}return a}removeElementScroll(o){var c;const a=mn();if(Bi(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Bi(a,o),Ld(a.x,d.offset.x),Ld(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const c=mn();Bi(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Fd(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Pl(u.latestValues)&&Fd(c,u.latestValues)}return Pl(this.latestValues)&&Fd(c,this.latestValues),c}removeTransform(o){const a=mn();Bi(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!Pl(l.latestValues))continue;K0(l.latestValues)&&l.updateSnapshot();const u=mn(),d=l.measurePageBox();Bi(u,d),Vj(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Pl(this.latestValues)&&Vj(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),fm(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mn(),this.targetWithTransforms=mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LPe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bi(this.target,this.layout.layoutBox),_7(this.target,this.targetDelta)):Bi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),fm(this.relativeTargetOrigin,this.target,m.target),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||K0(this.parent.latestValues)||w7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===or.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;Bi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;GRe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Dj(this.prevProjectionDelta.x,this.projectionDelta.x),Dj(this.prevProjectionDelta.y,this.projectionDelta.y)),hm(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!Hj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vd(),this.projectionDelta=Vd(),this.projectionDeltaWithTransform=Vd()}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},d=Vd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=mn(),m=c?c.source:void 0,_=this.layout?this.layout.source:void 0,v=m!==_,T=this.getStack(),y=!T||T.members.length<=1,w=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(ANe));this.animationProgress=0;let C;this.mixTargetDelta=b=>{const k=b/1e3;qj(d.x,o.x,k),qj(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),INe(this.relativeTarget,this.relativeTargetOrigin,h,k),C&&dNe(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=mn()),Bi(C,this.relativeTarget)),v&&(this.animationValues=u,sNe(u,l,this.latestValues,k,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,l;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(l=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||l.stop(),this.pendingAnimation&&(el(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{uw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Kh(0)),this.currentAnimation=eNe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pNe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:u}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&H7(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||mn();const d=jr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const h=jr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Bi(a,c),Fd(a,u),hm(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hNe),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const l={};c.z&&Ub("z",o,l,this.animationValues);for(let u=0;u<jb.length;u++)Ub(`rotate${jb[u]}`,o,l,this.animationValues),Ub(`skew${jb[u]}`,o,l,this.animationValues);o.render();for(const u in l)o.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=lw(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=lw(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Pl(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let d=fNe(this.projectionDeltaWithTransform,this.treeScale,u);c&&(d=c(u,d)),o.transform=d;const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,l.animationValues?o.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const _ in _g){if(u[_]===void 0)continue;const{correct:v,applyTo:T,isCSSVariable:y}=_g[_],w=d==="none"?u[_]:v(u[_],l);if(T){const C=T.length;for(let b=0;b<C;b++)o[T[b]]=w}else y?this.options.visualElement.renderState.vars[_]=w:o[_]=w}this.options.layoutId&&(o.pointerEvents=l===this?lw(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(zj),this.root.sharedNodes.clear()}}}function gNe(t){t.updateLayout()}function yNe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Hi(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],m=jr(h);h.min=r[d].min,h.max=h.min+m}):H7(s,e.layoutBox,r)&&Hi(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],m=jr(r[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=Vd();hm(a,r,e.layoutBox);const c=Vd();o?hm(c,t.applyTransform(i,!0),e.measuredBox):hm(c,r,e.layoutBox);const l=!j7(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const _=mn();fm(_,e.layoutBox,h.layoutBox);const v=mn();fm(v,r,m.layoutBox),U7(_,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=_,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function vNe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wNe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _Ne(t){t.clearSnapshot()}function zj(t){t.clearMeasurements()}function Wj(t){t.isLayoutDirty=!1}function TNe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function CNe(t){t.resolveTargetDelta()}function ENe(t){t.calcProjection()}function SNe(t){t.resetSkewAndRotation()}function bNe(t){t.removeLeadSnapshot()}function qj(t,e,n){t.translate=en(e.translate,0,n),t.scale=en(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Gj(t,e,n,r){t.min=en(e.min,n.min,r),t.max=en(e.max,n.max,r)}function INe(t,e,n,r){Gj(t.x,e.x,n.x,r),Gj(t.y,e.y,n.y,r)}function ANe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kNe={duration:.45,ease:[.4,0,.1,1]},Qj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Yj=Qj("applewebkit/")&&!Qj("chrome/")?Math.round:ts;function Xj(t){t.min=Yj(t.min),t.max=Yj(t.max)}function xNe(t){Xj(t.x),Xj(t.y)}function H7(t,e,n){return t==="position"||t==="preserve-aspect"&&!DPe(Bj(e),Bj(n),.2)}function RNe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const PNe=B7({attachResizeListener:(t,e)=>Tg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$b={current:void 0},z7=B7({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$b.current){const t=new PNe({});t.mount(window),t.setOptions({layoutScroll:!0}),$b.current=t}return $b.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NNe={pan:{Feature:YPe},drag:{Feature:QPe,ProjectionNode:z7,MeasureLayout:L7}};function Jj(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Jt.postRender(()=>s(e,vy(e)))}class ONe extends vl{mount(){const{current:e}=this.node;e&&(this.unmount=sRe(e,(n,r)=>(Jj(this.node,r,"Start"),i=>Jj(this.node,i,"End"))))}unmount(){}}class MNe extends vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=my(Tg(this.node.current,"focus",()=>this.onFocus()),Tg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zj(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Jt.postRender(()=>s(e,vy(e)))}class DNe extends vl{mount(){const{current:e}=this.node;e&&(this.unmount=lRe(e,(n,r)=>(Zj(this.node,r,"Start"),(i,{success:s})=>Zj(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Z0=new WeakMap,Bb=new WeakMap,LNe=t=>{const e=Z0.get(t.target);e&&e(t)},FNe=t=>{t.forEach(LNe)};function VNe({root:t,...e}){const n=t||document;Bb.has(n)||Bb.set(n,{});const r=Bb.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(FNe,{root:t,...e})),r[i]}function jNe(t,e,n){const r=VNe(e);return Z0.set(t,n),r.observe(t),()=>{Z0.delete(t),r.unobserve(t)}}const UNe={some:0,all:1};class $Ne extends vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UNe[i]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=l?u:d;h&&h(c)};return jNe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BNe(e,n))&&this.startObserver()}unmount(){}}function BNe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const HNe={inView:{Feature:$Ne},tap:{Feature:DNe},focus:{Feature:MNe},hover:{Feature:ONe}},zNe={layout:{ProjectionNode:z7,MeasureLayout:L7}},WNe={...xPe,...HNe,...NNe,...zNe},sT=WRe(WNe,iPe),KNe=(t,e=1)=>{if(t===0)return"0 Bytes";const n=1024,r=e<0?0:e,i=["Bytes","KB","MB","GB","TB"],s=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,s)).toFixed(r))+" "+i[s]},qNe=({teamMembers:t,onlineStatus:e,unreadCounts:n,userProfile:r,onSendMessage:i})=>{const[s,o]=g.useState(null),[a,c]=g.useState([]),[l,u]=g.useState(""),[d,h]=g.useState(!1),m=g.useRef(null),_=y=>y?y.split(" ").map(w=>w[0]).join("").toUpperCase():"",v=(y,w)=>[y,w].sort().join("_");g.useEffect(()=>{if(!s||!r){c([]);return}h(!0);const y=v(r.uid,s.uid),w=v0(Qo(Yo,`chats/${y}/messages`),y0("timestamp"),QW(20)),C=dg(w,b=>{const k=b.val(),D=k?Object.values(k):[];D.sort((A,S)=>A.timestamp-S.timestamp),c(D),h(!1)});return()=>C()},[s,r]),g.useEffect(()=>{var y;(y=m.current)==null||y.scrollIntoView({behavior:"smooth"})},[a]);const T=async()=>{!l.trim()||!s||(await i(s.uid,l.trim()),u(""))};return s?p.jsxs("div",{className:"h-full flex flex-col",children:[p.jsxs("header",{className:"flex items-center gap-2 mb-2 flex-shrink-0",children:[p.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>o(null),className:"h-7 w-7 text-gray-400 hover:bg-gray-700",children:p.jsx(JH,{className:"h-4 w-4"})}),p.jsx("p",{className:"text-sm font-semibold truncate",children:s.displayName})]}),p.jsx("div",{className:"flex-1 overflow-y-auto pr-1 mb-2",children:d?p.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:p.jsx(mo,{className:"h-5 w-5 animate-spin"})}):p.jsxs("div",{className:"space-y-2",children:[a.map(y=>p.jsx("div",{className:ue("flex",y.senderId===(r==null?void 0:r.uid)?"justify-end":"justify-start"),children:p.jsxs("div",{className:ue("max-w-[80%] rounded-lg text-sm",y.senderId===(r==null?void 0:r.uid)?"bg-primary text-primary-foreground":"bg-gray-700",y.type==="media"&&!y.message?"p-0.5 bg-transparent":"px-2 py-1"),children:[y.type==="media"&&y.attachments&&p.jsx("div",{className:"space-y-1",children:y.attachments.map(w=>p.jsxs("div",{children:[w.type==="image"&&p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:w.status==="uploading"?w.previewUrl:w.url,className:"rounded-md max-w-full h-auto",alt:w.fileName||"Image"}),w.status==="uploading"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:p.jsx(mo,{className:"h-4 w-4 animate-spin text-white"})}),w.status==="failed"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:p.jsx(xse,{className:"h-4 w-4 text-destructive"})})]}),w.type==="document"&&p.jsxs("a",{href:w.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 bg-black/20 rounded-md",children:[p.jsx(r5,{className:"h-5 w-5 flex-shrink-0"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs font-medium truncate",children:w.fileName}),w.fileSize&&p.jsx("p",{className:"text-[10px] text-gray-400",children:KNe(w.fileSize)})]})]})]},w.id))}),y.message&&p.jsx("p",{className:ue(y.type==="media"&&"mt-1 px-1.5 pb-0.5"),children:y.message})]})},y.id)),p.jsx("div",{ref:m})]})}),p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsx(Xi,{placeholder:"Message...",value:l,onChange:y=>u(y.target.value),onKeyPress:y=>y.key==="Enter"&&T(),className:"h-8 text-xs bg-gray-800 border-gray-600 text-white placeholder-gray-500 focus:ring-primary"}),p.jsx(Ue,{size:"icon",onClick:T,disabled:!l.trim(),className:"h-8 w-8 flex-shrink-0 gradient-primary text-primary-foreground",children:p.jsx(foe,{className:"h-4 w-4"})})]})]}):p.jsxs("div",{className:"h-full flex flex-col",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-400 mb-2 px-1 flex-shrink-0",children:"Team Members"}),p.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:p.jsx("ul",{className:"space-y-1",children:t.filter(y=>y.uid!==(r==null?void 0:r.uid)).map(y=>{var b;const w=r?v(r.uid,y.uid):"",C=n[w]||0;return p.jsxs("li",{onClick:()=>o(y),className:"flex items-center gap-2 p-2 rounded-md hover:bg-gray-800 transition-colors cursor-pointer",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(uE,{className:"h-8 w-8",children:[p.jsx(dE,{src:y.photoURL}),p.jsx(hE,{className:"text-xs",children:_(y.displayName)})]}),((b=e[y.uid])==null?void 0:b.online)&&p.jsx(n5,{className:"h-2.5 w-2.5 fill-green-500 stroke-green-500 absolute bottom-0 right-0"})]}),p.jsx("span",{className:"text-sm flex-1 truncate",children:y.displayName}),C>0&&p.jsx(pi,{variant:"destructive",className:"h-4 px-1.5 text-[10px]",children:C})]},y.uid)})})})]})},eU=({tasks:t,onToggleStatus:e,onClose:n,onAddTask:r,trackingTask:i,isTracking:s,currentSessionElapsedSeconds:o,onPlayPause:a,onStop:c,getFormattedTime:l,onStartTracking:u,teamMembers:d,onlineStatus:h,unreadCounts:m,userProfile:_,onSendMessage:v})=>{const[T,y]=g.useState("tasks"),[w,C]=g.useState(""),b=t.filter(S=>S.status!=="completed"),k=g.useCallback(S=>{try{new window.Audio(S).play().catch(N=>console.error("PiP audio play failed:",N))}catch(x){console.error("PiP sound playback failed:",x)}},[]),D=S=>{const x=t.find(R=>R.id===S),N=(x==null?void 0:x.status)!=="completed";e(S,{playSound:!1}),N&&k(hA)},A=()=>{w.trim()&&(r({title:w.trim()}),C(""))};return p.jsxs("div",{className:"h-full w-full bg-gray-900 text-gray-100 font-sans flex flex-col p-3 overflow-hidden",children:[p.jsxs("header",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ue,{variant:"ghost",size:"icon",className:ue("h-7 w-7",T==="tasks"?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-700"),onClick:()=>y("tasks"),children:p.jsx(Eu,{className:"h-4 w-4"})}),p.jsx(Ue,{variant:"ghost",size:"icon",className:ue("h-7 w-7",T==="chat"?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-700"),onClick:()=>y("chat"),children:p.jsx(kR,{className:"h-4 w-4"})})]}),p.jsx(Ue,{variant:"ghost",size:"icon",onClick:n,className:"h-7 w-7 text-gray-400 hover:bg-gray-700",title:"Return to App",children:p.jsx(yoe,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[T==="tasks"&&p.jsxs("div",{className:"h-full flex flex-col",children:[i&&p.jsx(sT.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},className:"mb-3 p-3 rounded-lg bg-gray-800 border border-gray-700 flex-shrink-0",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ue,{variant:"default",size:"icon",onClick:a,className:"h-9 w-9 rounded-full flex-shrink-0 gradient-primary text-primary-foreground shadow-lg",children:s?p.jsx(r_,{className:"h-4 w-4"}):p.jsx(i_,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Timing Task:"}),p.jsx("p",{className:"text-sm font-medium truncate",title:i.title,children:i.title})]}),p.jsx("p",{className:"text-lg font-mono text-primary font-semibold",children:l(o)}),p.jsx(Ue,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8 rounded-full text-gray-400 hover:bg-destructive/20 hover:text-destructive",children:p.jsx(c5,{className:"h-4 w-4"})})]})}),p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-400 mb-2 px-1 flex-shrink-0",children:"Today's Tasks"}),p.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:p.jsx("ul",{className:"space-y-1",children:b.length>0?b.map(S=>p.jsxs("li",{className:"flex items-center gap-2 p-2 rounded-md hover:bg-gray-800 transition-colors group",children:[p.jsx(f8,{id:`pip-task-${S.id}`,checked:S.status==="completed",onCheckedChange:()=>D(S.id),className:"border-gray-500 data-[state=checked]:bg-primary data-[state=checked]:border-primary"}),p.jsx("label",{htmlFor:`pip-task-${S.id}`,className:"text-sm flex-1 truncate cursor-pointer",children:S.title}),(i==null?void 0:i.id)!==S.id&&p.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>u(S),className:"h-7 w-7 text-gray-400 hover:bg-gray-700 opacity-0 group-hover:opacity-100 transition-opacity",title:`Start tracking "${S.title}"`,children:p.jsx(l5,{className:"h-4 w-4"})})]},S.id)):p.jsx("div",{className:"text-center py-8 text-gray-500",children:p.jsx("p",{className:"text-sm",children:"No active tasks."})})})}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-gray-700 flex-shrink-0",children:[p.jsx(Xi,{placeholder:"Add a new task...",value:w,onChange:S=>C(S.target.value),onKeyPress:S=>S.key==="Enter"&&A(),className:"h-8 text-xs bg-gray-800 border-gray-600 text-white placeholder-gray-500 focus:ring-primary"}),p.jsx(Ue,{size:"icon",onClick:A,disabled:!w.trim(),className:"h-8 w-8 flex-shrink-0 gradient-primary text-primary-foreground",children:p.jsx(aoe,{className:"h-4 w-4"})})]})]})]}),T==="chat"&&p.jsx(qNe,{teamMembers:d,onlineStatus:h,unreadCounts:m,userProfile:_,onSendMessage:v})]})]})},tU=1001;class GNe{constructor(){It(this,"timerInterval",null);It(this,"task",null);It(this,"startTime",0);It(this,"accumulatedSeconds",0);It(this,"isPaused",!1);It(this,"hasPermission",!1);It(this,"handleAppStateChange",({isActive:e})=>{this.timerInterval&&clearInterval(this.timerInterval),e&&(this.isPaused||(this.timerInterval=setInterval(()=>{this.showOrUpdateNotification()},30*1e3)))});yt.isNativePlatform()&&(this.checkPermissions(),oq.addListener("appStateChange",this.handleAppStateChange))}async checkPermissions(){const e=await jt.checkPermissions();this.hasPermission=e.display==="granted"}async requestPermissions(){const e=await jt.requestPermissions();return this.hasPermission=e.display==="granted",this.hasPermission}async start(e,n=0){if(yt.isNativePlatform()){if(!this.hasPermission&&!await this.requestPermissions()){console.warn("Notification permission denied. Cannot show timer notification.");return}await this.stop(),this.task=e,this.startTime=Date.now(),this.accumulatedSeconds=n,this.isPaused=!1,await this.showOrUpdateNotification(),this.timerInterval=setInterval(()=>{this.showOrUpdateNotification()},30*1e3)}}async stop(){yt.isNativePlatform()&&(this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.task=null,await jt.cancel({notifications:[{id:tU}]}))}async pause(){if(!(!this.task||this.isPaused)){if(this.isPaused=!0,this.startTime>0){const e=Math.floor((Date.now()-this.startTime)/1e3);this.accumulatedSeconds+=e}this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=null,this.startTime=0,await this.showOrUpdateNotification()}}async resume(){!this.task||!this.isPaused||(this.isPaused=!1,this.startTime=Date.now(),await this.showOrUpdateNotification(),this.timerInterval=setInterval(()=>{this.showOrUpdateNotification()},30*1e3))}getFormattedTime(e){const n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=Math.floor(e%60);return n>0?`${n}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}async showOrUpdateNotification(){if(!this.task)return;let e=this.accumulatedSeconds;if(!this.isPaused&&this.startTime>0){const i=Math.floor((Date.now()-this.startTime)/1e3);e+=i}const n=this.isPaused?`Paused at ${this.getFormattedTime(e)}`:`Timer running: ${this.getFormattedTime(e)}`,r={notifications:[{id:tU,title:`Tracking: ${this.task.title}`,body:n,ongoing:!0,autoCancel:!1,channelId:"app_main_channel",smallIcon:"ic_launcher",iconColor:"#488AFF"}]};await jt.schedule(r)}}const Sv=new GNe,W7=g.createContext(void 0);function QNe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(0),[s,o]=g.useState(!1),[a,c]=g.useState(null),[l,u]=g.useState(null),[d,h]=g.useState(0),[m,_]=g.useState(!1),[v,T]=g.useState(null),{user:y}=Nn(),{updateTaskTimeSpent:w,updateSubtaskTimeSpent:C}=uy(),{toast:b}=Pa();g.useEffect(()=>{if(!y)return;const K=Ke(Re,"users",y.uid,"activeTracking","currentSession"),U=Co(K,q=>{if(q.exists()){const F=q.data();if((!e||e.id!==F.taskId)&&n({id:F.taskId,title:F.taskTitle}),o(!F.isPaused),F.isPaused&&F.pausedAt)i(F.accumulatedSeconds),c(null);else{c(F.startTime);const V=Math.floor((Date.now()-F.startTime)/1e3);i(F.accumulatedSeconds+V)}}});return()=>U()},[y]),g.useEffect(()=>{if(!y)return;const K=Ke(Re,"users",y.uid,"activeTracking","currentSubtaskSession"),U=Co(K,q=>{if(q.exists()){const F=q.data();if((!l||l.subtaskId!==F.subtaskId)&&u({taskId:F.taskId,subtaskId:F.subtaskId,subtaskTitle:F.subtaskTitle}),_(!F.isPaused),F.isPaused&&F.pausedAt)h(F.accumulatedSeconds),T(null);else{T(F.startTime);const V=Math.floor((Date.now()-F.startTime)/1e3);h(F.accumulatedSeconds+V)}}});return()=>U()},[y]),g.useEffect(()=>{let K;return s&&e&&(K=setInterval(()=>{i(U=>U+1)},1e3)),()=>{K&&clearInterval(K)}},[s,e]),g.useEffect(()=>{let K;return m&&l&&(K=setInterval(()=>{h(U=>U+1)},1e3)),()=>{K&&clearInterval(K)}},[m,l]);const k=async K=>{if(!y)return;e&&e.id!==K.id&&await S();const U=Date.now(),q={taskId:K.id,taskTitle:K.title,startTime:U,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const F=Ke(Re,"users",y.uid,"activeTracking","currentSession");await ng(F,q),n(K),i(0),o(!0),c(U),Sv.start(K,0),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_TIME_TRACKING",session:q}),b({title:"Time tracking started",description:`Now tracking time for "${K.title}"`})}catch(F){console.error("Error starting tracking:",F),b({title:"Failed to start tracking",variant:"destructive"})}},D=async()=>{if(!(!e||!y||!s))try{const K=Date.now(),U=Ke(Re,"users",y.uid,"activeTracking","currentSession");await Vn(U,{pausedAt:K,isPaused:!0,accumulatedSeconds:r}),o(!1),c(null),Sv.pause(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_TIME_TRACKING"}),b({title:"Time tracking paused",description:`Paused tracking for "${e.title}"`})}catch(K){console.error("Error pausing tracking:",K),b({title:"Failed to pause tracking",variant:"destructive"})}},A=async()=>{if(!(!e||!y||s))try{const K=Date.now(),U=Ke(Re,"users",y.uid,"activeTracking","currentSession");await Vn(U,{startTime:K,pausedAt:null,isPaused:!1}),o(!0),c(K),Sv.resume(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_TIME_TRACKING"}),b({title:"Time tracking resumed",description:`Resumed tracking for "${e.title}"`})}catch(K){console.error("Error resuming tracking:",K),b({title:"Failed to resume tracking",variant:"destructive"})}},S=async()=>{if(!e||!y){n(null),i(0),o(!1),c(null);return}try{const K=Ke(Re,"users",y.uid,"activeTracking","currentSession"),U=r;if(U>0){await w(e.id,U);const q=x(U);b({title:"Time tracking stopped",description:`Saved ${q} for "${e.title}"`})}await Ro(K),Sv.stop(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_TIME_TRACKING"})}catch(K){console.error("Error stopping tracking:",K),b({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{n(null),i(0),o(!1),c(null)}},x=K=>{if(typeof K!="number"||isNaN(K)||K<0)return"0s";const U=Math.floor(K/3600),q=Math.floor(K%3600/60),F=Math.floor(K%60);return U>0?`${U}h ${q.toString().padStart(2,"0")}m`:q>0?`${q}m ${F.toString().padStart(2,"0")}s`:`${F}s`},N=async(K,U,q)=>{if(!y)return;l&&(l.taskId!==K||l.subtaskId!==U)&&await P();const F=Date.now(),V={taskId:K,subtaskId:U,subtaskTitle:q,startTime:F,pausedAt:null,isPaused:!1,accumulatedSeconds:0};try{const X=Ke(Re,"users",y.uid,"activeTracking","currentSubtaskSession");await ng(X,V),u({taskId:K,subtaskId:U,subtaskTitle:q}),h(0),_(!0),T(F),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"START_SUBTASK_TIME_TRACKING",session:V}),b({title:"Time tracking started",description:`Now tracking time for subtask "${q}"`})}catch(X){console.error("Error starting subtask tracking:",X),b({title:"Failed to start tracking",variant:"destructive"})}},R=async()=>{if(!(!l||!y||!m))try{const K=Date.now(),U=Ke(Re,"users",y.uid,"activeTracking","currentSubtaskSession");await Vn(U,{pausedAt:K,isPaused:!0,accumulatedSeconds:d}),_(!1),T(null),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"PAUSE_SUBTASK_TIME_TRACKING"}),b({title:"Time tracking paused",description:`Paused tracking for "${l.subtaskTitle}"`})}catch(K){console.error("Error pausing subtask tracking:",K),b({title:"Failed to pause tracking",variant:"destructive"})}},O=async()=>{if(!(!l||!y||m))try{const K=Date.now(),U=Ke(Re,"users",y.uid,"activeTracking","currentSubtaskSession");await Vn(U,{startTime:K,pausedAt:null,isPaused:!1}),_(!0),T(K),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"RESUME_SUBTASK_TIME_TRACKING"}),b({title:"Time tracking resumed",description:`Resumed tracking for "${l.subtaskTitle}"`})}catch(K){console.error("Error resuming subtask tracking:",K),b({title:"Failed to resume tracking",variant:"destructive"})}},P=async()=>{if(!l||!y){u(null),h(0),_(!1),T(null);return}try{const K=Ke(Re,"users",y.uid,"activeTracking","currentSubtaskSession"),U=d;if(U>0){await C(l.taskId,l.subtaskId,U);const q=x(U);b({title:"Time tracking stopped",description:`Saved ${q} for subtask "${l.subtaskTitle}"`})}await Ro(K),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"STOP_SUBTASK_TIME_TRACKING"})}catch(K){console.error("Error stopping subtask tracking:",K),b({title:"Failed to save time",description:"Could not save the tracked time. Please try again.",variant:"destructive"})}finally{u(null),h(0),_(!1),T(null)}},z={trackingTask:e,currentSessionElapsedSeconds:r,isTracking:s,startTracking:k,pauseTracking:D,resumeTracking:A,stopTracking:S,getFormattedTime:x,trackingSubtask:l,currentSubtaskElapsedSeconds:d,isTrackingSubtask:m,startSubtaskTracking:N,pauseSubtaskTracking:R,resumeSubtaskTracking:O,stopSubtaskTracking:P};return p.jsx(W7.Provider,{value:z,children:t})}function K7(){const t=g.useContext(W7);if(t===void 0)throw new Error("useTaskTimeTracker must be used within a TaskTimeTrackerProvider");return t}function q7(){const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[i,s]=g.useState(null),o=uy(),a=K7(),c=lE(),l=Nn();g.useEffect(()=>{e("documentPictureInPicture"in window)},[]);const u=g.useCallback(()=>{var m;i&&((m=i.reactRoot)==null||m.unmount(),i.close(),s(null),r(!1))},[i]),d=g.useCallback(async(m,_)=>{const{user:v,userProfile:T}=l;if(!v||!T)return;const y=[v.uid,m].sort().join("_"),w=Qo(Yo,`chats/${y}/messages`),C={senderId:v.uid,senderName:T.displayName||v.email||"Unknown",senderEmail:v.email||"",senderAvatar:T.photoURL,message:_,timestamp:yTe(),type:"text"};await Z_e(w,C);const b=Ke(Re,`chatRooms/${y}`);await ng(b,{participants:[v.uid,m],lastActivity:I_(),lastMessage:C},{merge:!0})},[l]),h=g.useCallback(async()=>{if(!(!t||n))try{const m=await window.documentPictureInPicture.requestWindow({width:320,height:480});document.head.querySelectorAll('style, link[rel="stylesheet"]').forEach(C=>{m.document.head.appendChild(C.cloneNode(!0))}),document.documentElement.classList.contains("dark")&&m.document.documentElement.classList.add("dark");const v=m.document.createElement("style");v.textContent="body { margin: 0; overflow: hidden; } #root { height: 100vh; width: 100vw; }",m.document.head.appendChild(v);const T=m.document.createElement("div");T.id="root",m.document.body.appendChild(T);const y=ux(T),w=p.jsx(eU,{tasks:o.tasks,onToggleStatus:o.toggleTaskStatus,onClose:u,onAddTask:o.addTask,trackingTask:a.trackingTask,isTracking:a.isTracking,currentSessionElapsedSeconds:a.currentSessionElapsedSeconds,onPlayPause:()=>a.isTracking?a.pauseTracking():a.resumeTracking(),onStop:a.stopTracking,getFormattedTime:a.getFormattedTime,onStartTracking:a.startTracking,teamMembers:o.teamMembers,onlineStatus:c.onlineStatus,unreadCounts:c.unreadCounts,userProfile:l.userProfile,onSendMessage:d});y.render(w),m.reactRoot=y,s(m),r(!0),m.addEventListener("pagehide",()=>{m.reactRoot&&m.reactRoot.unmount(),s(null),r(!1)})}catch(m){console.error("Error opening Picture-in-Picture window:",m)}},[t,n,o,a,c,l,u,d]);return g.useEffect(()=>{if(n&&(i!=null&&i.reactRoot)){const m=p.jsx(eU,{tasks:o.tasks,onToggleStatus:o.toggleTaskStatus,onClose:u,onAddTask:o.addTask,trackingTask:a.trackingTask,isTracking:a.isTracking,currentSessionElapsedSeconds:a.currentSessionElapsedSeconds,onPlayPause:()=>a.isTracking?a.pauseTracking():a.resumeTracking(),onStop:a.stopTracking,getFormattedTime:a.getFormattedTime,onStartTracking:a.startTracking,teamMembers:o.teamMembers,onlineStatus:c.onlineStatus,unreadCounts:c.unreadCounts,userProfile:l.userProfile,onSendMessage:d});i.reactRoot.render(m)}},[n,i,o,a,c,l,u,d]),{isPipSupported:t,isPipOpen:n,openPip:h,closePip:u}}const YNe=[{href:"/tasks",label:"Tasks",icon:p.jsx(Eu,{className:"h-5 w-5"})},{href:"/team-chat",label:"Team Chat",icon:p.jsx(u5,{className:"h-5 w-5"})},{href:"/meetly",label:"Meetly",icon:p.jsx(s5,{className:"h-5 w-5"})},{href:"/calendar",label:"Calendar",icon:p.jsx(ZH,{className:"h-5 w-5"})},{href:"/notes",label:"Notes",icon:p.jsx(toe,{className:"h-5 w-5"})},{href:"/analytics",label:"Analytics",icon:p.jsx(uA,{className:"h-5 w-5"})}];function nU({mobileTrigger:t}){const{user:e,userProfile:n,signOutUser:r}=Nn(),{state:i}=oE(),s=No(),o=Bu(),[a,c]=g.useState(!1),[l,u]=g.useState(""),d=Rf(),{isPipSupported:h,isPipOpen:m,openPip:_}=q7(),{totalUnreadCount:v}=lE();console.log(`[DEBUG] PremiumHeader: Received totalUnreadCount: ${v}`);const T=()=>{const C=s.pathname;return{"/":"Dashboard","/tasks":"Tasks","/timer":"Timer","/chat":"AI Coach","/team-chat":"Team Chat","/meetly":"Meetly","/calendar":"Calendar","/notes":"Notes","/analytics":"Analytics","/profile":"Profile"}[C]||"Dashboard"},y=C=>{C.preventDefault(),l.trim()&&console.log("Searching for:",l)},w=(C,b)=>C&&C.trim()?C.split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2):b?b.split("@")[0].slice(0,2).toUpperCase():"U";return p.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 pt-safe",children:p.jsxs("div",{className:"flex h-14 items-center px-4",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[d&&t?t:p.jsx(QK,{className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:i==="expanded"?p.jsx(ul,{className:"h-4 w-4"}):p.jsx(i5,{className:"h-4 w-4"})}),p.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm",children:[p.jsx(Dm,{to:"/",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Workspace"}),p.jsx("span",{className:"text-muted-foreground",children:"/"}),p.jsx("span",{className:"font-medium",children:T()})]})]}),p.jsx(_A,{delayDuration:0,children:p.jsx("nav",{className:"hidden md:flex items-center gap-1 ml-6",children:YNe.map(C=>p.jsxs(RL,{children:[p.jsx(PL,{asChild:!0,children:p.jsxs(Dm,{to:C.href,"aria-label":C.label,className:ue("relative flex h-9 w-9 items-center justify-center rounded-lg transition-colors hover:bg-accent",s.pathname.startsWith(C.href)?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:[C.icon,C.href==="/team-chat"&&v>0&&p.jsx(pi,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs font-bold",children:v>9?"9+":v})]})}),p.jsx(TA,{children:p.jsx("p",{children:C.label})})]},C.href))})}),p.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[p.jsx("div",{className:"w-full max-w-xs",children:p.jsxs(HG,{open:a,onOpenChange:c,children:[p.jsx(zG,{asChild:!0,children:p.jsxs(Ue,{variant:"outline",className:"w-full justify-start text-sm text-muted-foreground hover:bg-muted",children:[p.jsx(dL,{className:"mr-2 h-4 w-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Search everything..."}),p.jsx("span",{className:"sm:hidden",children:"Search..."}),p.jsx("div",{className:"ml-auto hidden sm:flex items-center gap-1",children:p.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 text-[10px] font-medium text-muted-foreground opacity-100",children:[p.jsx(Fse,{className:"h-3 w-3"}),"K"]})})]})}),p.jsx(m1,{className:"w-96 p-0",align:"center",children:p.jsx("form",{onSubmit:y,className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(dL,{className:"h-4 w-4 text-muted-foreground"}),p.jsx(Xi,{value:l,onChange:C=>u(C.target.value),placeholder:"Search tasks, notes, messages...",className:"border-0 shadow-none focus-visible:ring-0",autoFocus:!0})]})})})]})}),p.jsxs("div",{className:"flex items-center gap-2",children:[h&&p.jsx(_A,{delayDuration:0,children:p.jsxs(RL,{children:[p.jsx(PL,{asChild:!0,children:p.jsx(Ue,{variant:"ghost",size:"icon",onClick:_,className:ue("relative hover-scale transition-smooth h-9 w-9",m&&"text-primary bg-primary/10"),children:p.jsx(o5,{className:"h-4 w-4"})})}),p.jsx(TA,{children:p.jsx("p",{children:m?"Close Widget":"Open Task Widget"})})]})}),p.jsx(cke,{}),p.jsxs(k0e,{children:[p.jsx(x0e,{asChild:!0,children:p.jsx(Ue,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:p.jsxs(uE,{className:"h-8 w-8",children:[p.jsx(dE,{src:(n==null?void 0:n.photoURL)||(e==null?void 0:e.photoURL)||""}),p.jsx(hE,{className:"text-xs bg-primary/10 text-primary",children:w(n==null?void 0:n.displayName,e==null?void 0:e.email)})]})})}),p.jsxs(PG,{className:"w-56",align:"end",forceMount:!0,children:[p.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:p.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[(n==null?void 0:n.displayName)&&p.jsx("p",{className:"font-medium",children:n.displayName}),(e==null?void 0:e.email)&&p.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:e.email})]})}),p.jsx(N0,{}),p.jsxs(ow,{onClick:()=>o("/profile"),children:[p.jsx(RR,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Profile"})]}),p.jsxs(ow,{onClick:()=>o("/profile"),children:[p.jsx(moe,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsx(N0,{}),p.jsxs(ow,{onClick:r,className:"text-destructive focus:text-destructive",children:[p.jsx(Wse,{className:"mr-2 h-4 w-4"}),p.jsx("span",{children:"Log out"})]})]})]})]})]})]})})}const G7=g.createContext(void 0);function XNe({children:t}){const[e,n]=g.useState(null),[r,i]=g.useState(!1),[s,o]=g.useState(!0),a=u=>{n(u),i(!0),o(!0)},c=()=>{n(null),i(!1),o(!1)},l=()=>{o(!s)};return p.jsx(G7.Provider,{value:{activeTask:e,isTimerRunning:r,isTimerExpanded:s,startTaskTimer:a,stopTimer:c,toggleTimerSize:l},children:t})}function Q7(){const t=g.useContext(G7);if(t===void 0)throw new Error("useTimer must be used within a TimerProvider");return t}const Po=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Po.displayName="Card";const nl=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("flex flex-col space-y-1.5 p-6",t),...e}));nl.displayName="CardHeader";const rl=g.forwardRef(({className:t,...e},n)=>p.jsx("h3",{ref:n,className:ue("text-2xl font-semibold leading-none tracking-tight",t),...e}));rl.displayName="CardTitle";const eO=g.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));eO.displayName="CardDescription";const Aa=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("p-6 pt-0",t),...e}));Aa.displayName="CardContent";const JNe=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("flex items-center p-6 pt-0",t),...e}));JNe.displayName="CardFooter";var tO="Progress",nO=100,[ZNe]=Gr(tO),[e1e,t1e]=ZNe(tO),Y7=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=n1e,...o}=t;(i||i===0)&&!rU(i)&&console.error(r1e(`${i}`,"Progress"));const a=rU(i)?i:nO;r!==null&&!iU(r,a)&&console.error(i1e(`${r}`,"Progress"));const c=iU(r,a)?r:null,l=oT(c)?s(c,a):void 0;return p.jsx(e1e,{scope:n,value:c,max:a,children:p.jsx(Fe.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":oT(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":Z7(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});Y7.displayName=tO;var X7="ProgressIndicator",J7=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=t1e(X7,n);return p.jsx(Fe.div,{"data-state":Z7(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});J7.displayName=X7;function n1e(t,e){return`${Math.round(t/e*100)}%`}function Z7(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function oT(t){return typeof t=="number"}function rU(t){return oT(t)&&!isNaN(t)&&t>0}function iU(t,e){return oT(t)&&!isNaN(t)&&t<=e&&t>=0}function r1e(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${nO}\`.`}function i1e(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${nO} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var eQ=Y7,s1e=J7;const tQ=g.forwardRef(({className:t,value:e,...n},r)=>p.jsx(eQ,{ref:r,className:ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:p.jsx(s1e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));tQ.displayName=eQ.displayName;function o1e(){const{activeTask:t,isTimerExpanded:e,toggleTimerSize:n,stopTimer:r}=Q7(),[i,s]=g.useState("focus"),[o,a]=g.useState(0),[c,l]=g.useState(!1),[u,d]=g.useState(0),{toast:h}=Pa(),m=g.useRef(),_={shortBreak:5,longBreak:15,sessionsUntilLongBreak:4};g.useEffect(()=>{if(t&&i==="focus"){const k=t.estimatedTime||25;a(k*60)}else if(i==="break"){const k=u%_.sessionsUntilLongBreak===0&&u>0;a(k?_.longBreak*60:_.shortBreak*60)}},[t,i,u]);const v=i==="focus"?((t==null?void 0:t.estimatedTime)||25)*60:u%_.sessionsUntilLongBreak===0&&u>0?_.longBreak*60:_.shortBreak*60,T=(v-o)/v*100;g.useEffect(()=>(c&&o>0?m.current=setInterval(()=>{a(k=>k-1)},1e3):(clearInterval(m.current),o===0&&c&&(l(!1),i==="focus"?(d(k=>k+1),s("break"),fA(pL),Ys.showPomodoroNotification("focus-complete",u+1),h({title:"Focus session completed! 🎉",description:"Time for a break. Great work!"})):(s("focus"),fA(pL),Ys.showPomodoroNotification("break-complete"),h({title:"Break time over! ⚡",description:"Ready to focus again?"})))),()=>clearInterval(m.current)),[c,o,i,u,h]);const y=k=>{const D=Math.floor(k/60),A=k%60;return`${D.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},w=()=>{l(!c)},C=()=>{l(!1);const k=(t==null?void 0:t.estimatedTime)||25;a(i==="focus"?k*60:_.shortBreak*60)},b=()=>{h({title:"Task completed! 🎯",description:`"${t==null?void 0:t.title}" has been marked as complete.`}),r()};return t?p.jsx("div",{className:ue("fixed bottom-6 right-6 z-50 transition-all duration-300 ease-in-out",e?"w-96 h-auto":"w-72 h-20"),children:p.jsx(Po,{className:ue("shadow-elegant border-2 backdrop-blur-sm transition-all duration-300",i==="focus"?"border-focus/30 bg-card/95":"border-break/30 bg-card/95",e&&"shadow-glow"),children:p.jsx(Aa,{className:"p-4",children:e?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(AR,{className:"h-4 w-4 text-focus"}),p.jsx(pi,{variant:i==="focus"?"default":"secondary",children:i==="focus"?"Focus":"Break"})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(Zse,{className:"h-3 w-3"})}),p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",onClick:r,children:p.jsx(ul,{className:"h-3 w-3"})})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"font-semibold text-sm mb-1",children:t.title}),p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"text-center space-y-3",children:[p.jsx("div",{className:ue("text-4xl font-mono font-bold transition-colors",i==="focus"?"text-focus":"text-break"),children:y(o)}),p.jsx(tQ,{value:T,className:ue("h-2 transition-colors",i==="focus"?"[&>div]:bg-focus":"[&>div]:bg-break")})]}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsxs(Ue,{variant:i==="focus"?"focus":"break",size:"sm",onClick:w,className:"hover-scale flex-1",children:[c?p.jsx(r_,{className:"h-4 w-4 mr-2"}):p.jsx(i_,{className:"h-4 w-4 mr-2"}),c?"Pause":"Start"]}),p.jsx(Ue,{variant:"outline",size:"sm",onClick:C,className:"hover-scale",children:p.jsx(uoe,{className:"h-4 w-4"})}),i==="focus"&&p.jsx(Ue,{variant:"outline",size:"sm",onClick:b,className:"hover-scale text-success hover:text-success",children:p.jsx(Pse,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center text-xs",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-focus",children:"Sessions"}),p.jsx("div",{className:"text-lg font-bold",children:u})]}),p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-break",children:"Next Break"}),p.jsx("div",{className:"text-lg font-bold",children:_.sessionsUntilLongBreak-u%_.sessionsUntilLongBreak})]})]})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:ue("text-lg font-mono font-bold",i==="focus"?"text-focus":"text-break"),children:y(o)}),p.jsxs(pi,{variant:"secondary",className:"text-xs",children:[t.title.slice(0,12),"..."]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:w,children:c?p.jsx(r_,{className:"h-3 w-3"}):p.jsx(i_,{className:"h-3 w-3"})}),p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:n,children:p.jsx(Gse,{className:"h-3 w-3"})})]})]})})})}):null}function a1e(){const{trackingTask:t,currentSessionElapsedSeconds:e,isTracking:n,pauseTracking:r,resumeTracking:i,stopTracking:s,getFormattedTime:o}=K7(),{isPipSupported:a,isPipOpen:c,openPip:l}=q7(),u=()=>{if(!t)return 0;const h=(t.estimatedTime||0)*60,m=(t.timeSpent||0)+e;return h>0?Math.min(m/h*100,100):0},d=()=>{l()};return c||!t?null:p.jsx(sT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:260,damping:20},className:"fixed bottom-6 left-6 z-50",children:p.jsx(Po,{className:ue("w-72 shadow-elegant border backdrop-blur-sm bg-card/80 transition-all duration-300",n?"border-primary/30":"border-border"),children:p.jsxs("div",{className:"p-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ue,{variant:n?"focus":"outline",size:"icon",onClick:n?r:i,className:"h-9 w-9 rounded-full",children:n?p.jsx(r_,{className:"h-4 w-4"}):p.jsx(i_,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("p",{className:"text-sm font-mono text-primary font-semibold",children:o(e)}),t.timeSpent&&t.timeSpent>0&&p.jsxs("p",{className:"text-xs text-muted-foreground",children:["(Total: ",o((t.timeSpent||0)+e),")"]})]})]}),p.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[a&&p.jsx(Ue,{variant:"ghost",size:"icon",onClick:d,className:"h-9 w-9 rounded-full text-muted-foreground",children:p.jsx(o5,{className:"h-4 w-4"})}),p.jsx(Ue,{variant:"ghost",size:"icon",onClick:s,className:"h-9 w-9 rounded-full text-muted-foreground hover:bg-destructive/10 hover:text-destructive",children:p.jsx(c5,{className:"h-4 w-4"})})]})]}),t.estimatedTime&&p.jsx("div",{className:"mt-2 relative h-1 w-full bg-muted rounded-full overflow-hidden",children:p.jsx(sT.div,{className:"absolute top-0 left-0 h-full bg-primary",initial:{width:0},animate:{width:`${u()}%`},transition:{duration:.5,ease:"easeInOut"}})})]})})})}const sU="taskly_sync_status",c1e=3,Vl=class Vl{constructor(){It(this,"syncInProgress",!1);It(this,"syncCallbacks",[])}static getInstance(){return Vl.instance||(Vl.instance=new Vl),Vl.instance}async initialize(){await st.init()}async queueAction(e){await st.queueAction({...e,timestamp:Date.now()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{"sync"in n&&n.sync.register("background-sync").catch(r=>{console.log("Background sync registration failed:",r)})})}async storeTaskLocally(e,n="pending"){const r={...e,lastModified:Date.now(),syncStatus:n};await st.saveTask(r)}async getLocalTasks(){return st.getTasks()}async deleteTaskLocally(e){await st.deleteTask(e)}async getQueuedActions(){return st.getQueuedActions()}async clearQueuedActions(){await st.clearAllActions()}async getSyncStatus(){const e=localStorage.getItem(sU),n=e?JSON.parse(e):{lastSync:0,pending:0},r=await this.getQueuedActions(),i=await st.getUnsyncedItems();return{...n,pending:r.length+i.tasks.length+i.notes.length,conflicted:i.tasks.filter(s=>s.syncStatus==="conflict").length+i.notes.filter(s=>s.syncStatus==="conflict").length}}async updateSyncStatus(e){const n=await this.getQueuedActions(),r={lastSync:e,pending:n.length};localStorage.setItem(sU,JSON.stringify(r))}isOnline(){return navigator.onLine}async syncWhenOnline(){if(!this.isOnline()||this.syncInProgress)return{success:!1,syncedCount:0,failedCount:0};this.syncInProgress=!0;let e=0,n=0;try{const r=await this.getQueuedActions(),i=await st.getUnsyncedItems();if(r.length===0&&i.tasks.length===0&&i.notes.length===0)return this.syncInProgress=!1,{success:!0,syncedCount:0,failedCount:0};for(const s of r)try{await this.processAction(s),await st.removeAction(s.id),e++}catch(o){console.error("Failed to process action:",s,o);const a=s.retryCount+1;a>=c1e?(await st.removeAction(s.id),n++):await st.updateActionRetryCount(s.id,a)}for(const s of i.tasks)try{await this.syncTask(s),e++}catch(o){console.error("Failed to sync task:",s,o),await st.saveTask({...s,syncStatus:"conflict"}),n++}for(const s of i.notes)try{await this.syncNote(s),e++}catch(o){console.error("Failed to sync note:",s,o),await st.saveNote({...s,syncStatus:"conflict"}),n++}return await this.updateSyncStatus(Date.now()),this.syncCallbacks.forEach(s=>s(n===0)),(e>0||n>0)&&this.showSyncNotification(n===0?"success":"warning",`Synced ${e} items${n>0?`, ${n} failed`:""}`),{success:n===0,syncedCount:e,failedCount:n}}catch(r){return console.error("Sync failed:",r),this.showSyncNotification("error","Sync failed - will retry later"),{success:!1,syncedCount:e,failedCount:n+1}}finally{this.syncInProgress=!1}}async processAction(e){switch(console.log("Processing offline action:",e),e.type){case"CREATE_TASK":break;case"UPDATE_TASK":break;case"DELETE_TASK":break;case"CREATE_NOTE":break;case"UPDATE_NOTE":break;case"DELETE_NOTE":break;default:throw new Error(`Unknown action type: ${e.type}`)}}async syncTask(e){console.log("Syncing task:",e),await st.saveTask({...e,syncStatus:"synced"})}async syncNote(e){console.log("Syncing note:",e),await st.saveNote({...e,syncStatus:"synced"})}showSyncNotification(e,n){"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly Sync",{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png"})}onSyncComplete(e){this.syncCallbacks.push(e)}async getConflicts(){const e=await st.getUnsyncedItems();return{tasks:e.tasks.filter(n=>n.syncStatus==="conflict"),notes:e.notes.filter(n=>n.syncStatus==="conflict")}}async resolveTaskConflict(e,n){const r=await st.getTask(e);r&&(n?await st.saveTask({...r,syncStatus:"pending"}):await st.saveTask({...r,syncStatus:"synced"}))}async init(){await this.initialize(),window.addEventListener("online",()=>{console.log("Back online - starting sync..."),this.syncWhenOnline()}),window.addEventListener("offline",()=>{console.log("Gone offline - actions will be queued")}),this.isOnline()&&this.syncWhenOnline()}};It(Vl,"instance");let aT=Vl;const qs=aT.getInstance(),l1e=Object.freeze(Object.defineProperty({__proto__:null,OfflineSync:aT,offlineSync:qs},Symbol.toStringTag,{value:"Module"}));function nQ(){const[t,e]=g.useState({isOnline:navigator.onLine,isSyncing:!1,lastSync:0,pending:0,conflicted:0}),n=g.useCallback(async()=>{const d=await qs.getSyncStatus();e(h=>({...h,...d}))},[]);g.useEffect(()=>{let d=!0;const h=async()=>{d&&(e(v=>({...v,isOnline:!0})),await n())},m=()=>{d&&e(v=>({...v,isOnline:!1}))};n(),window.addEventListener("online",h),window.addEventListener("offline",m);const _=setInterval(n,5e3);return()=>{d=!1,window.removeEventListener("online",h),window.removeEventListener("offline",m),clearInterval(_)}},[n]);const r=g.useCallback(async()=>{if(!(!t.isOnline||t.isSyncing)){e(d=>({...d,isSyncing:!0}));try{const d=await qs.syncWhenOnline();return await n(),d}finally{e(d=>({...d,isSyncing:!1}))}}},[t.isOnline,t.isSyncing,n]),i=g.useCallback(async(d,h)=>{const m={...d,id:crypto.randomUUID(),createdAt:new Date().toISOString(),subtasks:d.subtasks||[]};return await qs.storeTaskLocally(m,"pending"),t.isOnline||await qs.queueAction({type:"CREATE_TASK",data:m,userId:h}),await n(),m},[t.isOnline,n]),s=g.useCallback(async(d,h,m)=>{const _=await st.getTask(d);if(!_)return null;const v={..._,...h,lastModified:Date.now(),syncStatus:"pending"};return await st.saveTask(v),t.isOnline||await qs.queueAction({type:"UPDATE_TASK",data:{id:d,updates:h},userId:m}),await n(),v},[t.isOnline,n]),o=g.useCallback(async(d,h)=>{await st.deleteTask(d),t.isOnline||await qs.queueAction({type:"DELETE_TASK",data:{id:d},userId:h}),await n()},[t.isOnline,n]),a=g.useCallback(async(d,h)=>{const m=await st.getTask(d);if(!m)return null;const _=m.status==="completed"?"todo":"completed",v={...m,status:_,completedAt:_==="completed"?new Date().toISOString():void 0,lastModified:Date.now(),syncStatus:"pending"};return await st.saveTask(v),t.isOnline||await qs.queueAction({type:"TOGGLE_STATUS",data:{id:d,status:_},userId:h}),await n(),v},[t.isOnline,n]),c=g.useCallback(async()=>st.getTasks(),[]),l=g.useCallback(async()=>qs.getConflicts(),[]),u=g.useCallback(async(d,h)=>{await qs.resolveTaskConflict(d,h),await n()},[n]);return{syncStatus:t,manualSync:r,createTaskOffline:i,updateTaskOffline:s,deleteTaskOffline:o,toggleTaskStatusOffline:a,getLocalTasks:c,getConflicts:l,resolveConflict:u,updateSyncStatus:n}}var kE="Dialog",[rQ,hDe]=Gr(kE),[u1e,$s]=rQ(kE),iQ=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=g.useRef(null),c=g.useRef(null),[l,u]=Na({prop:r,defaultProp:i??!1,onChange:s,caller:kE});return p.jsx(u1e,{scope:e,triggerRef:a,contentRef:c,contentId:go(),titleId:go(),descriptionId:go(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};iQ.displayName=kE;var sQ="DialogTrigger",oQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$s(sQ,n),s=Et(e,i.triggerRef);return p.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":sO(i.open),...r,ref:s,onClick:Se(t.onClick,i.onOpenToggle)})});oQ.displayName=sQ;var rO="DialogPortal",[d1e,aQ]=rQ(rO,{forceMount:void 0}),cQ=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=$s(rO,e);return p.jsx(d1e,{scope:e,forceMount:n,children:g.Children.map(r,o=>p.jsx(Hn,{present:n||s.open,children:p.jsx(Fg,{asChild:!0,container:i,children:o})}))})};cQ.displayName=rO;var cT="DialogOverlay",lQ=g.forwardRef((t,e)=>{const n=aQ(cT,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=$s(cT,t.__scopeDialog);return s.modal?p.jsx(Hn,{present:r||s.open,children:p.jsx(f1e,{...i,ref:e})}):null});lQ.displayName=cT;var h1e=Cu("DialogOverlay.RemoveScroll"),f1e=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$s(cT,n);return p.jsx(yE,{as:h1e,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(Fe.div,{"data-state":sO(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Lu="DialogContent",uQ=g.forwardRef((t,e)=>{const n=aQ(Lu,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=$s(Lu,t.__scopeDialog);return p.jsx(Hn,{present:r||s.open,children:s.modal?p.jsx(p1e,{...i,ref:e}):p.jsx(m1e,{...i,ref:e})})});uQ.displayName=Lu;var p1e=g.forwardRef((t,e)=>{const n=$s(Lu,t.__scopeDialog),r=g.useRef(null),i=Et(e,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return o1(s)},[]),p.jsx(dQ,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Se(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Se(t.onFocusOutside,s=>s.preventDefault())})}),m1e=g.forwardRef((t,e)=>{const n=$s(Lu,t.__scopeDialog),r=g.useRef(!1),i=g.useRef(!1);return p.jsx(dQ,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((l=n.triggerRef.current)==null?void 0:l.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),dQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=$s(Lu,n),c=g.useRef(null),l=Et(e,c);return s1(),p.jsxs(p.Fragment,{children:[p.jsx(pE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(uf,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":sO(a.open),...o,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(g1e,{titleId:a.titleId}),p.jsx(v1e,{contentRef:c,descriptionId:a.descriptionId})]})]})}),iO="DialogTitle",hQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$s(iO,n);return p.jsx(Fe.h2,{id:i.titleId,...r,ref:e})});hQ.displayName=iO;var fQ="DialogDescription",pQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$s(fQ,n);return p.jsx(Fe.p,{id:i.descriptionId,...r,ref:e})});pQ.displayName=fQ;var mQ="DialogClose",gQ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$s(mQ,n);return p.jsx(Fe.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,()=>i.onOpenChange(!1))})});gQ.displayName=mQ;function sO(t){return t?"open":"closed"}var yQ="DialogTitleWarning",[fDe,vQ]=Tie(yQ,{contentName:Lu,titleName:iO,docsSlug:"dialog"}),g1e=({titleId:t})=>{const e=vQ(yQ),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},y1e="DialogDescriptionWarning",v1e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vQ(y1e).contentName}}.`;return g.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},wQ=iQ,_Q=oQ,TQ=cQ,xE=lQ,RE=uQ,PE=hQ,NE=pQ,CQ=gQ;const w1e=wQ,pDe=_Q,_1e=TQ,EQ=g.forwardRef(({className:t,...e},n)=>p.jsx(xE,{ref:n,className:ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));EQ.displayName=xE.displayName;const SQ=g.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(_1e,{children:[p.jsx(EQ,{}),p.jsxs(RE,{ref:r,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,p.jsxs(CQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(ul,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));SQ.displayName=RE.displayName;const bQ=({className:t,...e})=>p.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});bQ.displayName="DialogHeader";const T1e=({className:t,...e})=>p.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});T1e.displayName="DialogFooter";const IQ=g.forwardRef(({className:t,...e},n)=>p.jsx(PE,{ref:n,className:ue("text-lg font-semibold leading-none tracking-tight",t),...e}));IQ.displayName=PE.displayName;const AQ=g.forwardRef(({className:t,...e},n)=>p.jsx(NE,{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));AQ.displayName=NE.displayName;function C1e({open:t,onOpenChange:e,conflicts:n}){const{resolveConflict:r}=nQ(),[i,s]=g.useState(null),o=async(c,l)=>{s(c);try{await r(c,l),n.tasks=n.tasks.filter(u=>u.id!==c),n.tasks.length===0&&n.notes.length===0&&e(!1)}finally{s(null)}},a=c=>new Date(c).toLocaleString();return p.jsx(w1e,{open:t,onOpenChange:e,children:p.jsxs(SQ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[p.jsxs(bQ,{children:[p.jsxs(IQ,{className:"flex items-center gap-2",children:[p.jsx(zp,{className:"h-5 w-5 text-warning"}),"Sync Conflicts Detected"]}),p.jsx(AQ,{children:"The following items have conflicts between your local changes and server data. Choose which version to keep."})]}),p.jsxs("div",{className:"space-y-4",children:[n.tasks.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Task Conflicts"}),p.jsx("div",{className:"space-y-3",children:n.tasks.map(c=>p.jsxs(Po,{className:"border-warning/20",children:[p.jsxs(nl,{className:"pb-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(rl,{className:"text-base",children:c.title}),p.jsx(pi,{variant:"outline",className:"text-warning border-warning",children:"Conflict"})]}),c.description&&p.jsx(eO,{children:c.description})]}),p.jsx(Aa,{className:"space-y-4",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(RR,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Your Changes"})]}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Status:"}),p.jsx(pi,{variant:c.status==="completed"?"default":"secondary",children:c.status})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Priority:"}),p.jsx(pi,{variant:c.priority==="high"?"destructive":"outline",children:c.priority})]}),p.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[p.jsx(AR,{className:"h-3 w-3"}),p.jsxs("span",{children:["Modified: ",a(new Date(c.lastModified).toISOString())]})]})]}),p.jsx(Ue,{onClick:()=>o(c.id,!0),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Keep My Changes"})]}),p.jsxs("div",{className:"p-3 border rounded-lg bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(zp,{className:"h-4 w-4"}),p.jsx("span",{className:"font-medium",children:"Server Version"})]}),p.jsx("div",{className:"space-y-2 text-sm",children:p.jsx("div",{className:"text-muted-foreground",children:"Server data would be displayed here in a real implementation"})}),p.jsx(Ue,{onClick:()=>o(c.id,!1),disabled:i===c.id,className:"w-full mt-3",variant:"outline",children:i===c.id?"Resolving...":"Use Server Version"})]})]})})]},c.id))})]}),n.notes.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Note Conflicts"}),p.jsx("div",{className:"text-muted-foreground",children:"Note conflict resolution would be implemented here"})]}),n.tasks.length===0&&n.notes.length===0&&p.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[p.jsx(zp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),p.jsx("p",{children:"No conflicts to resolve"})]})]}),p.jsx("div",{className:"flex justify-end gap-2 mt-6",children:p.jsx(Ue,{variant:"outline",onClick:()=>e(!1),children:"Close"})})]})})}function E1e(){const{syncStatus:t,manualSync:e,getConflicts:n}=nQ(),[r,i]=g.useState(!1),[s,o]=g.useState({tasks:[],notes:[]}),a=async()=>{!t.isOnline||t.isSyncing||await e()},c=async()=>{const l=await n();o(l),i(!0)};return t.isOnline&&t.pending===0&&t.conflicted===0?null:p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2",children:[p.jsx(pi,{variant:t.isOnline?"default":"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:t.isOnline?p.jsxs(p.Fragment,{children:[t.isSyncing?p.jsx(a5,{className:"h-3 w-3 animate-spin"}):p.jsx(xoe,{className:"h-3 w-3"}),t.pending>0&&p.jsxs("span",{children:["Syncing ",t.pending," items"]})]}):p.jsxs(p.Fragment,{children:[p.jsx(Aoe,{className:"h-3 w-3"}),p.jsx("span",{children:"Offline"}),t.pending>0&&p.jsxs(p.Fragment,{children:[p.jsx(Dse,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.pending," pending"]})]})]})}),t.conflicted>0&&p.jsxs(pi,{variant:"destructive",className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:c,children:[p.jsx(zp,{className:"h-3 w-3"}),p.jsxs("span",{children:[t.conflicted," conflicts"]})]})]}),p.jsx(C1e,{open:r,onOpenChange:i,conflicts:s})]})}function mDe(t,e){const[n,r]=g.useState(t);return g.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function S1e(){const t=g.useRef(Date.now()),e=g.useRef(0);g.useEffect(()=>{e.current+=1});const n=g.useCallback(i=>{const s=Date.now(),o=s-t.current;o>16&&console.warn(`${i} render time: ${o}ms (render #${e.current})`),t.current=s},[]),r=g.useCallback((i,s)=>{const o=performance.now();i();const a=performance.now();console.log(`${s} took ${a-o} milliseconds`)},[]);return{logRenderTime:n,measurePerformance:r,renderCount:e.current}}function b1e(){const[t,e]=g.useState({fps:0,memoryUsage:0,loadTime:0,renderTime:0}),[n,r]=g.useState(!1);if(S1e(),g.useEffect(()=>{let o=0,a=performance.now(),c;const l=()=>{o++;const u=performance.now();if(u>=a+1e3){const d=Math.round(o*1e3/(u-a));e(h=>{var m;return{...h,fps:d,loadTime:Math.round(performance.now()),memoryUsage:((m=performance.memory)==null?void 0:m.usedJSHeapSize)||0}}),o=0,a=u}c=requestAnimationFrame(l)};return n&&(c=requestAnimationFrame(l)),()=>{c&&cancelAnimationFrame(c)}},[n]),!n)return null;const i=o=>{if(o===0)return"0 Bytes";const a=1024,c=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(a));return parseFloat((o/Math.pow(a,l)).toFixed(2))+" "+c[l]},s=o=>o>=55?"bg-green-500":o>=45?"bg-yellow-500":"bg-red-500";return p.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:p.jsxs(Po,{className:"w-64 bg-background/90 backdrop-blur-sm border shadow-lg",children:[p.jsx(nl,{className:"pb-2",children:p.jsx(rl,{className:"text-sm font-medium",children:"Performance"})}),p.jsxs(Aa,{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS:"}),p.jsx(pi,{variant:"outline",className:`${s(t.fps)} text-white border-none`,children:t.fps})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Memory:"}),p.jsx(pi,{variant:"outline",children:i(t.memoryUsage)})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Load:"}),p.jsxs(pi,{variant:"outline",children:[t.loadTime,"ms"]})]})]})]})})}const I1e=wQ,A1e=_Q,k1e=TQ,kQ=g.forwardRef(({className:t,...e},n)=>p.jsx(xE,{className:ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));kQ.displayName=xE.displayName;const x1e=jg("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),xQ=g.forwardRef(({side:t="right",className:e,children:n,...r},i)=>p.jsxs(k1e,{children:[p.jsx(kQ,{}),p.jsxs(RE,{ref:i,className:ue(x1e({side:t}),e),...r,children:[n,p.jsxs(CQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(ul,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xQ.displayName=RE.displayName;const RQ=({className:t,...e})=>p.jsx("div",{className:ue("flex flex-col space-y-2 text-center sm:text-left",t),...e});RQ.displayName="SheetHeader";const PQ=g.forwardRef(({className:t,...e},n)=>p.jsx(PE,{ref:n,className:ue("text-lg font-semibold text-foreground",t),...e}));PQ.displayName=PE.displayName;const NQ=g.forwardRef(({className:t,...e},n)=>p.jsx(NE,{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));NQ.displayName=NE.displayName;function R1e({children:t}){const{isTimerRunning:e}=Q7(),{isChatOpenMobile:n,state:r,setState:i}=oE(),s=No(),o=Rf();return o?p.jsxs(I1e,{open:r==="expanded",onOpenChange:a=>i(a?"expanded":"collapsed"),children:[p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(nU,{mobileTrigger:p.jsx(A1e,{asChild:!0,children:p.jsx(Ue,{variant:"ghost",size:"icon",className:"flex items-center justify-center h-8 w-8 rounded-lg border border-border bg-background hover:bg-accent transition-colors",children:p.jsx(i5,{className:"h-4 w-4"})})})}),p.jsx("main",{className:ue("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0 h-full","pt-0",s.pathname==="/"&&"scrollbar-hide"),children:t})]}),p.jsxs(xQ,{side:"left",className:"w-64 p-0 border-r-0 flex flex-col",children:[p.jsxs(RQ,{className:"sr-only",children:[p.jsx(PQ,{children:"Main Navigation"}),p.jsx(NQ,{children:"Navigate through the main sections of the Taskly application."})]}),p.jsx(uq,{onLinkClick:()=>i("collapsed"),collapsed:!1,isMobile:o})]})]}):p.jsxs("div",{className:"h-screen flex flex-col w-full overflow-hidden bg-gradient-to-br from-background via-background to-muted/20",style:{"--app-header-offset":"3.5rem"},children:[p.jsx(nU,{}),p.jsx(E1e,{}),p.jsxs("div",{className:"flex flex-1 overflow-hidden items-start",children:[p.jsx(eIe,{className:ue("hidden md:flex","transition-all duration-300",!o&&n&&"hidden lg:flex")}),p.jsx("main",{className:ue("flex-1 transition-smooth overflow-y-auto min-h-0 touch-pan-y relative min-w-0 h-full","pt-0"),children:t})]}),p.jsx(o1e,{}),p.jsx(a1e,{}),p.jsx(b1e,{})]})}function P1e({children:t}){return p.jsx(XNe,{children:p.jsx(lq,{children:p.jsx(gbe,{children:p.jsx(R1e,{children:t})})})})}class OQ extends g.Component{constructor(){super(...arguments);It(this,"state",{hasError:!1});It(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:p.jsxs(Po,{className:"w-full max-w-md",children:[p.jsxs(nl,{className:"text-center",children:[p.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center",children:p.jsx(zp,{className:"w-6 h-6 text-destructive"})}),p.jsx(rl,{children:"Something went wrong"}),p.jsx(eO,{children:"We're sorry, but something unexpected happened. Please try again."})]}),p.jsxs(Aa,{className:"text-center space-y-4",children:[this.state.error&&p.jsxs("details",{className:"text-sm text-muted-foreground",children:[p.jsx("summary",{className:"cursor-pointer",children:"Error details"}),p.jsx("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-auto",children:this.state.error.message})]}),p.jsxs("div",{className:"flex gap-2 justify-center",children:[p.jsxs(Ue,{onClick:this.handleRetry,className:"gap-2",children:[p.jsx(a5,{className:"w-4 h-4"}),"Try Again"]}),p.jsx(Ue,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})]})}):this.props.children}}function N1e({size:t="default",className:e}){const n={sm:"w-4 h-4",default:"w-6 h-6",lg:"w-8 h-8"};return p.jsx("div",{className:ue("animate-spin rounded-full border-2 border-primary border-t-transparent",n[t],e)})}function MQ(){return p.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx(N1e,{size:"lg"}),p.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}var wy=t=>t.type==="checkbox",Xl=t=>t instanceof Date,Fr=t=>t==null;const DQ=t=>typeof t=="object";var Rn=t=>!Fr(t)&&!Array.isArray(t)&&DQ(t)&&!Xl(t),LQ=t=>Rn(t)&&t.target?wy(t.target)?t.target.checked:t.target.value:t,O1e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,FQ=(t,e)=>t.has(O1e(e)),M1e=t=>{const e=t.constructor&&t.constructor.prototype;return Rn(e)&&e.hasOwnProperty("isPrototypeOf")},oO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ln(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(oO&&(t instanceof Blob||r))&&(n||Rn(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!M1e(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Ln(t[i]));else return t;return e}var OE=t=>/^\w*$/.test(t),yn=t=>t===void 0,aO=t=>Array.isArray(t)?t.filter(Boolean):[],cO=t=>aO(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Te=(t,e,n)=>{if(!e||!Rn(t))return n;const r=(OE(e)?[e]:cO(e)).reduce((i,s)=>Fr(i)?i:i[s],t);return yn(r)||r===t?yn(t[e])?n:t[e]:r},Si=t=>typeof t=="boolean",kt=(t,e,n)=>{let r=-1;const i=OE(e)?[e]:cO(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=n;if(r!==o){const l=t[a];c=Rn(l)||Array.isArray(l)?l:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const lT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Cs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Uo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},lO=Z.createContext(null);lO.displayName="HookFormContext";const ME=()=>Z.useContext(lO),D1e=t=>{const{children:e,...n}=t;return Z.createElement(lO.Provider,{value:n},e)};var VQ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Cs.all&&(e._proxyFormState[o]=!r||Cs.all),n&&(n[o]=!0),t[o]}});return i};const uO=typeof window<"u"?Z.useLayoutEffect:Z.useEffect;function L1e(t){const e=ME(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Z.useState(n._formState),c=Z.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return uO(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:l=>{!r&&a({...n._formState,...l})}}),[i,r,s]),Z.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Z.useMemo(()=>VQ(o,n,c.current,!1),[o,n])}var Ii=t=>typeof t=="string",jQ=(t,e,n,r,i)=>Ii(t)?(r&&e.watch.add(t),Te(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Te(n,s))):(r&&(e.watchAll=!0),n),ek=t=>Fr(t)||!DQ(t);function Xo(t,e,n=new WeakSet){if(ek(t)||ek(e))return t===e;if(Xl(t)&&Xl(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Xl(o)&&Xl(a)||Rn(o)&&Rn(a)||Array.isArray(o)&&Array.isArray(a)?!Xo(o,a,n):o!==a)return!1}}return!0}function F1e(t){const e=ME(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},c=Z.useRef(i),l=Z.useRef(a),u=Z.useRef(void 0);l.current=a;const d=Z.useMemo(()=>n._getWatch(r,c.current),[n,r]),[h,m]=Z.useState(l.current?l.current(d):d);return uO(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:_=>{if(!s){const v=jQ(r,n._names,_.values||n._formValues,!1,c.current);if(l.current){const T=l.current(v);Xo(T,u.current)||(m(T),u.current=T)}else m(v)}}}),[n,s,r,o]),Z.useEffect(()=>n._removeUnmounted()),h}function V1e(t){const e=ME(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,a=FQ(i._names.array,n),c=Z.useMemo(()=>Te(i._formValues,n,Te(i._defaultValues,n,o)),[i,n,o]),l=F1e({control:i,name:n,defaultValue:c,exact:!0}),u=L1e({control:i,name:n,exact:!0}),d=Z.useRef(t),h=Z.useRef(void 0),m=Z.useRef(i.register(n,{...t.rules,value:l,...Si(t.disabled)?{disabled:t.disabled}:{}}));d.current=t;const _=Z.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Te(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Te(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Te(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Te(u.validatingFields,n)},error:{enumerable:!0,get:()=>Te(u.errors,n)}}),[u,n]),v=Z.useCallback(C=>m.current.onChange({target:{value:LQ(C),name:n},type:lT.CHANGE}),[n]),T=Z.useCallback(()=>m.current.onBlur({target:{value:Te(i._formValues,n),name:n},type:lT.BLUR}),[n,i._formValues]),y=Z.useCallback(C=>{const b=Te(i._fields,n);b&&C&&(b._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:k=>C.setCustomValidity(k),reportValidity:()=>C.reportValidity()})},[i._fields,n]),w=Z.useMemo(()=>({name:n,value:l,...Si(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:v,onBlur:T,ref:y}),[n,r,u.disabled,v,T,y,l]);return Z.useEffect(()=>{const C=i._options.shouldUnregister||s,b=h.current;b&&b!==n&&!a&&i.unregister(b),i.register(n,{...d.current.rules,...Si(d.current.disabled)?{disabled:d.current.disabled}:{}});const k=(D,A)=>{const S=Te(i._fields,D);S&&S._f&&(S._f.mount=A)};if(k(n,!0),C){const D=Ln(Te(i._options.defaultValues,n,d.current.defaultValue));kt(i._defaultValues,n,D),yn(Te(i._formValues,n))&&kt(i._formValues,n,D)}return!a&&i.register(n),h.current=n,()=>{(a?C&&!i._state.action:C)?i.unregister(n):k(n,!1)}},[n,i,a,s]),Z.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Z.useMemo(()=>({field:w,formState:u,fieldState:_}),[w,u,_])}const j1e=t=>t.render(V1e(t));var UQ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},pm=t=>Array.isArray(t)?t:[t],oU=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function $Q(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Rn(i)&&s){const o=$Q(i,s);Rn(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Jr=t=>Rn(t)&&!Object.keys(t).length,dO=t=>t.type==="file",Es=t=>typeof t=="function",uT=t=>{if(!oO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},BQ=t=>t.type==="select-multiple",hO=t=>t.type==="radio",U1e=t=>hO(t)||wy(t),Hb=t=>uT(t)&&t.isConnected;function $1e(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yn(t)?r++:t[e[r++]];return t}function B1e(t){for(const e in t)if(t.hasOwnProperty(e)&&!yn(t[e]))return!1;return!0}function _n(t,e){const n=Array.isArray(e)?e:OE(e)?[e]:cO(e),r=n.length===1?t:$1e(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Rn(r)&&Jr(r)||Array.isArray(r)&&B1e(r))&&_n(t,n.slice(0,-1)),t}var H1e=t=>{for(const e in t)if(Es(t[e]))return!0;return!1};function HQ(t){return Array.isArray(t)||Rn(t)&&!H1e(t)}function tk(t,e={}){for(const n in t)HQ(t[n])?(e[n]=Array.isArray(t[n])?[]:{},tk(t[n],e[n])):Fr(t[n])||(e[n]=!0);return e}function wd(t,e,n){n||(n=tk(e));for(const r in t)HQ(t[r])?yn(e)||ek(n[r])?n[r]=tk(t[r],Array.isArray(t[r])?[]:{}):wd(t[r],Fr(e)?{}:e[r],n[r]):n[r]=!Xo(t[r],e[r]);return n}const aU={value:!1,isValid:!1},cU={value:!0,isValid:!0};var zQ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yn(t[0].attributes.value)?yn(t[0].value)||t[0].value===""?cU:{value:t[0].value,isValid:!0}:cU:aU}return aU},WQ=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yn(t)?t:e?t===""?NaN:t&&+t:n&&Ii(t)?new Date(t):r?r(t):t;const lU={isValid:!1,value:null};var KQ=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,lU):lU;function uU(t){const e=t.ref;return dO(e)?e.files:hO(e)?KQ(t.refs).value:BQ(e)?[...e.selectedOptions].map(({value:n})=>n):wy(e)?zQ(t.refs).value:WQ(yn(e.value)?t.ref.value:e.value,t)}var z1e=(t,e,n,r)=>{const i={};for(const s of t){const o=Te(e,s);o&&kt(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},dT=t=>t instanceof RegExp,up=t=>yn(t)?t:dT(t)?t.source:Rn(t)?dT(t.value)?t.value.source:t.value:t,dU=t=>({isOnSubmit:!t||t===Cs.onSubmit,isOnBlur:t===Cs.onBlur,isOnChange:t===Cs.onChange,isOnAll:t===Cs.all,isOnTouch:t===Cs.onTouched});const hU="AsyncFunction";var W1e=t=>!!t&&!!t.validate&&!!(Es(t.validate)&&t.validate.constructor.name===hU||Rn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===hU)),K1e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),fU=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const mm=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Te(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(mm(a,e))break}else if(Rn(a)&&mm(a,e))break}}};function pU(t,e,n){const r=Te(t,n);if(r||OE(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Te(e,s),a=Te(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var q1e=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Jr(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Cs.all))},G1e=(t,e,n)=>!t||!e||t===e||pm(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Q1e=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Y1e=(t,e)=>!aO(Te(t,e)).length&&_n(t,e),X1e=(t,e,n)=>{const r=pm(Te(t,n));return kt(r,"root",e[n]),kt(t,n,r),t};function mU(t,e,n="validate"){if(Ii(t)||Array.isArray(t)&&t.every(Ii)||Si(t)&&!t)return{type:n,message:Ii(t)?t:"",ref:e}}var ld=t=>Rn(t)&&!dT(t)?t:{value:t,message:""},gU=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:l,minLength:u,min:d,max:h,pattern:m,validate:_,name:v,valueAsNumber:T,mount:y}=t._f,w=Te(n,v);if(!y||e.has(v))return{};const C=a?a[0]:o,b=O=>{i&&C.reportValidity&&(C.setCustomValidity(Si(O)?"":O||""),C.reportValidity())},k={},D=hO(o),A=wy(o),S=D||A,x=(T||dO(o))&&yn(o.value)&&yn(w)||uT(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,N=UQ.bind(null,v,r,k),R=(O,P,z,K=Uo.maxLength,U=Uo.minLength)=>{const q=O?P:z;k[v]={type:O?K:U,message:q,ref:o,...N(O?K:U,q)}};if(s?!Array.isArray(w)||!w.length:c&&(!S&&(x||Fr(w))||Si(w)&&!w||A&&!zQ(a).isValid||D&&!KQ(a).isValid)){const{value:O,message:P}=Ii(c)?{value:!!c,message:c}:ld(c);if(O&&(k[v]={type:Uo.required,message:P,ref:C,...N(Uo.required,P)},!r))return b(P),k}if(!x&&(!Fr(d)||!Fr(h))){let O,P;const z=ld(h),K=ld(d);if(!Fr(w)&&!isNaN(w)){const U=o.valueAsNumber||w&&+w;Fr(z.value)||(O=U>z.value),Fr(K.value)||(P=U<K.value)}else{const U=o.valueAsDate||new Date(w),q=X=>new Date(new Date().toDateString()+" "+X),F=o.type=="time",V=o.type=="week";Ii(z.value)&&w&&(O=F?q(w)>q(z.value):V?w>z.value:U>new Date(z.value)),Ii(K.value)&&w&&(P=F?q(w)<q(K.value):V?w<K.value:U<new Date(K.value))}if((O||P)&&(R(!!O,z.message,K.message,Uo.max,Uo.min),!r))return b(k[v].message),k}if((l||u)&&!x&&(Ii(w)||s&&Array.isArray(w))){const O=ld(l),P=ld(u),z=!Fr(O.value)&&w.length>+O.value,K=!Fr(P.value)&&w.length<+P.value;if((z||K)&&(R(z,O.message,P.message),!r))return b(k[v].message),k}if(m&&!x&&Ii(w)){const{value:O,message:P}=ld(m);if(dT(O)&&!w.match(O)&&(k[v]={type:Uo.pattern,message:P,ref:o,...N(Uo.pattern,P)},!r))return b(P),k}if(_){if(Es(_)){const O=await _(w,n),P=mU(O,C);if(P&&(k[v]={...P,...N(Uo.validate,P.message)},!r))return b(P.message),k}else if(Rn(_)){let O={};for(const P in _){if(!Jr(O)&&!r)break;const z=mU(await _[P](w,n),C,P);z&&(O={...z,...N(P,z.message)},b(z.message),r&&(k[v]=O))}if(!Jr(O)&&(k[v]={ref:C,...O},!r))return k}}return b(!0),k};const J1e={mode:Cs.onSubmit,reValidateMode:Cs.onChange,shouldFocusError:!0};function Z1e(t={}){let e={...J1e,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Es(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Rn(e.defaultValues)||Rn(e.values)?Ln(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ln(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const h={array:oU(),state:oU()},m=e.criteriaMode===Cs.all,_=L=>$=>{clearTimeout(l),l=setTimeout(L,$)},v=async L=>{if(!e.disabled&&(u.isValid||d.isValid||L)){const $=e.resolver?Jr((await A()).errors):await x(r,!0);$!==n.isValid&&h.state.next({isValid:$})}},T=(L,$)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((L||Array.from(a.mount)).forEach(Q=>{Q&&($?kt(n.validatingFields,Q,$):_n(n.validatingFields,Q))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Jr(n.validatingFields)}))},y=(L,$=[],Q,he,le=!0,oe=!0)=>{if(he&&Q&&!e.disabled){if(o.action=!0,oe&&Array.isArray(Te(r,L))){const ve=Q(Te(r,L),he.argA,he.argB);le&&kt(r,L,ve)}if(oe&&Array.isArray(Te(n.errors,L))){const ve=Q(Te(n.errors,L),he.argA,he.argB);le&&kt(n.errors,L,ve),Y1e(n.errors,L)}if((u.touchedFields||d.touchedFields)&&oe&&Array.isArray(Te(n.touchedFields,L))){const ve=Q(Te(n.touchedFields,L),he.argA,he.argB);le&&kt(n.touchedFields,L,ve)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=wd(i,s)),h.state.next({name:L,isDirty:R(L,$),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else kt(s,L,$)},w=(L,$)=>{kt(n.errors,L,$),h.state.next({errors:n.errors})},C=L=>{n.errors=L,h.state.next({errors:n.errors,isValid:!1})},b=(L,$,Q,he)=>{const le=Te(r,L);if(le){const oe=Te(s,L,yn(Q)?Te(i,L):Q);yn(oe)||he&&he.defaultChecked||$?kt(s,L,$?oe:uU(le._f)):z(L,oe),o.mount&&v()}},k=(L,$,Q,he,le)=>{let oe=!1,ve=!1;const Qe={name:L};if(!e.disabled){if(!Q||he){(u.isDirty||d.isDirty)&&(ve=n.isDirty,n.isDirty=Qe.isDirty=R(),oe=ve!==Qe.isDirty);const pt=Xo(Te(i,L),$);ve=!!Te(n.dirtyFields,L),pt?_n(n.dirtyFields,L):kt(n.dirtyFields,L,!0),Qe.dirtyFields=n.dirtyFields,oe=oe||(u.dirtyFields||d.dirtyFields)&&ve!==!pt}if(Q){const pt=Te(n.touchedFields,L);pt||(kt(n.touchedFields,L,Q),Qe.touchedFields=n.touchedFields,oe=oe||(u.touchedFields||d.touchedFields)&&pt!==Q)}oe&&le&&h.state.next(Qe)}return oe?Qe:{}},D=(L,$,Q,he)=>{const le=Te(n.errors,L),oe=(u.isValid||d.isValid)&&Si($)&&n.isValid!==$;if(e.delayError&&Q?(c=_(()=>w(L,Q)),c(e.delayError)):(clearTimeout(l),c=null,Q?kt(n.errors,L,Q):_n(n.errors,L)),(Q?!Xo(le,Q):le)||!Jr(he)||oe){const ve={...he,...oe&&Si($)?{isValid:$}:{},errors:n.errors,name:L};n={...n,...ve},h.state.next(ve)}},A=async L=>{T(L,!0);const $=await e.resolver(s,e.context,z1e(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(L),$},S=async L=>{const{errors:$}=await A(L);if(L)for(const Q of L){const he=Te($,Q);he?kt(n.errors,Q,he):_n(n.errors,Q)}else n.errors=$;return $},x=async(L,$,Q={valid:!0})=>{for(const he in L){const le=L[he];if(le){const{_f:oe,...ve}=le;if(oe){const Qe=a.array.has(oe.name),pt=le._f&&W1e(le._f);pt&&u.validatingFields&&T([oe.name],!0);const On=await gU(le,a.disabled,s,m,e.shouldUseNativeValidation&&!$,Qe);if(pt&&u.validatingFields&&T([oe.name]),On[oe.name]&&(Q.valid=!1,$))break;!$&&(Te(On,oe.name)?Qe?X1e(n.errors,On,oe.name):kt(n.errors,oe.name,On[oe.name]):_n(n.errors,oe.name))}!Jr(ve)&&await x(ve,$,Q)}}return Q.valid},N=()=>{for(const L of a.unMount){const $=Te(r,L);$&&($._f.refs?$._f.refs.every(Q=>!Hb(Q)):!Hb($._f.ref))&&te(L)}a.unMount=new Set},R=(L,$)=>!e.disabled&&(L&&$&&kt(s,L,$),!Xo(X(),i)),O=(L,$,Q)=>jQ(L,a,{...o.mount?s:yn($)?i:Ii(L)?{[L]:$}:$},Q,$),P=L=>aO(Te(o.mount?s:i,L,e.shouldUnregister?Te(i,L,[]):[])),z=(L,$,Q={})=>{const he=Te(r,L);let le=$;if(he){const oe=he._f;oe&&(!oe.disabled&&kt(s,L,WQ($,oe)),le=uT(oe.ref)&&Fr($)?"":$,BQ(oe.ref)?[...oe.ref.options].forEach(ve=>ve.selected=le.includes(ve.value)):oe.refs?wy(oe.ref)?oe.refs.forEach(ve=>{(!ve.defaultChecked||!ve.disabled)&&(Array.isArray(le)?ve.checked=!!le.find(Qe=>Qe===ve.value):ve.checked=le===ve.value||!!le)}):oe.refs.forEach(ve=>ve.checked=ve.value===le):dO(oe.ref)?oe.ref.value="":(oe.ref.value=le,oe.ref.type||h.state.next({name:L,values:Ln(s)})))}(Q.shouldDirty||Q.shouldTouch)&&k(L,le,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&V(L)},K=(L,$,Q)=>{for(const he in $){if(!$.hasOwnProperty(he))return;const le=$[he],oe=L+"."+he,ve=Te(r,oe);(a.array.has(L)||Rn(le)||ve&&!ve._f)&&!Xl(le)?K(oe,le,Q):z(oe,le,Q)}},U=(L,$,Q={})=>{const he=Te(r,L),le=a.array.has(L),oe=Ln($);kt(s,L,oe),le?(h.array.next({name:L,values:Ln(s)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&Q.shouldDirty&&h.state.next({name:L,dirtyFields:wd(i,s),isDirty:R(L,oe)})):he&&!he._f&&!Fr(oe)?K(L,oe,Q):z(L,oe,Q),fU(L,a)&&h.state.next({...n,name:L}),h.state.next({name:o.mount?L:void 0,values:Ln(s)})},q=async L=>{o.mount=!0;const $=L.target;let Q=$.name,he=!0;const le=Te(r,Q),oe=pt=>{he=Number.isNaN(pt)||Xl(pt)&&isNaN(pt.getTime())||Xo(pt,Te(s,Q,pt))},ve=dU(e.mode),Qe=dU(e.reValidateMode);if(le){let pt,On;const vi=$.type?uU(le._f):LQ(L),Pr=L.type===lT.BLUR||L.type===lT.FOCUS_OUT,Lo=!K1e(le._f)&&!e.resolver&&!Te(n.errors,Q)&&!le._f.deps||Q1e(Pr,Te(n.touchedFields,Q),n.isSubmitted,Qe,ve),pn=fU(Q,a,Pr);kt(s,Q,vi),Pr?(!$||!$.readOnly)&&(le._f.onBlur&&le._f.onBlur(L),c&&c(0)):le._f.onChange&&le._f.onChange(L);const zn=k(Q,vi,Pr),Bs=!Jr(zn)||pn;if(!Pr&&h.state.next({name:Q,type:L.type,values:Ln(s)}),Lo)return(u.isValid||d.isValid)&&(e.mode==="onBlur"?Pr&&v():Pr||v()),Bs&&h.state.next({name:Q,...pn?{}:zn});if(!Pr&&pn&&h.state.next({...n}),e.resolver){const{errors:rr}=await A([Q]);if(oe(vi),he){const ed=pU(n.errors,r,Q),Fo=pU(rr,r,ed.name||Q);pt=Fo.error,Q=Fo.name,On=Jr(rr)}}else T([Q],!0),pt=(await gU(le,a.disabled,s,m,e.shouldUseNativeValidation))[Q],T([Q]),oe(vi),he&&(pt?On=!1:(u.isValid||d.isValid)&&(On=await x(r,!0)));he&&(le._f.deps&&(!Array.isArray(le._f.deps)||le._f.deps.length>0)&&V(le._f.deps),D(Q,On,pt,zn))}},F=(L,$)=>{if(Te(n.errors,$)&&L.focus)return L.focus(),1},V=async(L,$={})=>{let Q,he;const le=pm(L);if(e.resolver){const oe=await S(yn(L)?L:le);Q=Jr(oe),he=L?!le.some(ve=>Te(oe,ve)):Q}else L?(he=(await Promise.all(le.map(async oe=>{const ve=Te(r,oe);return await x(ve&&ve._f?{[oe]:ve}:ve)}))).every(Boolean),!(!he&&!n.isValid)&&v()):he=Q=await x(r);return h.state.next({...!Ii(L)||(u.isValid||d.isValid)&&Q!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:Q}:{},errors:n.errors}),$.shouldFocus&&!he&&mm(r,F,L?le:a.mount),he},X=(L,$)=>{let Q={...o.mount?s:i};return $&&(Q=$Q($.dirtyFields?n.dirtyFields:n.touchedFields,Q)),yn(L)?Q:Ii(L)?Te(Q,L):L.map(he=>Te(Q,he))},ge=(L,$)=>({invalid:!!Te(($||n).errors,L),isDirty:!!Te(($||n).dirtyFields,L),error:Te(($||n).errors,L),isValidating:!!Te(n.validatingFields,L),isTouched:!!Te(($||n).touchedFields,L)}),pe=L=>{L&&pm(L).forEach($=>_n(n.errors,$)),h.state.next({errors:L?n.errors:{}})},B=(L,$,Q)=>{const he=(Te(r,L,{_f:{}})._f||{}).ref,le=Te(n.errors,L)||{},{ref:oe,message:ve,type:Qe,...pt}=le;kt(n.errors,L,{...pt,...$,ref:he}),h.state.next({name:L,errors:n.errors,isValid:!1}),Q&&Q.shouldFocus&&he&&he.focus&&he.focus()},J=(L,$)=>Es(L)?h.state.subscribe({next:Q=>"values"in Q&&L(O(void 0,$),Q)}):O(L,$,!0),Y=L=>h.state.subscribe({next:$=>{G1e(L.name,$.name,L.exact)&&q1e($,L.formState||u,Mt,L.reRenderRoot)&&L.callback({values:{...s},...n,...$,defaultValues:i})}}).unsubscribe,W=L=>(o.mount=!0,d={...d,...L.formState},Y({...L,formState:d})),te=(L,$={})=>{for(const Q of L?pm(L):a.mount)a.mount.delete(Q),a.array.delete(Q),$.keepValue||(_n(r,Q),_n(s,Q)),!$.keepError&&_n(n.errors,Q),!$.keepDirty&&_n(n.dirtyFields,Q),!$.keepTouched&&_n(n.touchedFields,Q),!$.keepIsValidating&&_n(n.validatingFields,Q),!e.shouldUnregister&&!$.keepDefaultValue&&_n(i,Q);h.state.next({values:Ln(s)}),h.state.next({...n,...$.keepDirty?{isDirty:R()}:{}}),!$.keepIsValid&&v()},we=({disabled:L,name:$})=>{(Si(L)&&o.mount||L||a.disabled.has($))&&(L?a.disabled.add($):a.disabled.delete($))},_e=(L,$={})=>{let Q=Te(r,L);const he=Si($.disabled)||Si(e.disabled);return kt(r,L,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:L}},name:L,mount:!0,...$}}),a.mount.add(L),Q?we({disabled:Si($.disabled)?$.disabled:e.disabled,name:L}):b(L,!0,$.value),{...he?{disabled:$.disabled||e.disabled}:{},...e.progressive?{required:!!$.required,min:up($.min),max:up($.max),minLength:up($.minLength),maxLength:up($.maxLength),pattern:up($.pattern)}:{},name:L,onChange:q,onBlur:q,ref:le=>{if(le){_e(L,$),Q=Te(r,L);const oe=yn(le.value)&&le.querySelectorAll&&le.querySelectorAll("input,select,textarea")[0]||le,ve=U1e(oe),Qe=Q._f.refs||[];if(ve?Qe.find(pt=>pt===oe):oe===Q._f.ref)return;kt(r,L,{_f:{...Q._f,...ve?{refs:[...Qe.filter(Hb),oe,...Array.isArray(Te(i,L))?[{}]:[]],ref:{type:oe.type,name:L}}:{ref:oe}}}),b(L,!1,void 0,oe)}else Q=Te(r,L,{}),Q._f&&(Q._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(FQ(a.array,L)&&o.action)&&a.unMount.add(L)}}},Pe=()=>e.shouldFocusError&&mm(r,F,a.mount),Ee=L=>{Si(L)&&(h.state.next({disabled:L}),mm(r,($,Q)=>{const he=Te(r,Q);he&&($.disabled=he._f.disabled||L,Array.isArray(he._f.refs)&&he._f.refs.forEach(le=>{le.disabled=he._f.disabled||L}))},0,!1))},ze=(L,$)=>async Q=>{let he;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let le=Ln(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:oe,values:ve}=await A();n.errors=oe,le=Ln(ve)}else await x(r);if(a.disabled.size)for(const oe of a.disabled)_n(le,oe);if(_n(n.errors,"root"),Jr(n.errors)){h.state.next({errors:{}});try{await L(le,Q)}catch(oe){he=oe}}else $&&await $({...n.errors},Q),Pe(),setTimeout(Pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Jr(n.errors)&&!he,submitCount:n.submitCount+1,errors:n.errors}),he)throw he},nt=(L,$={})=>{Te(r,L)&&(yn($.defaultValue)?U(L,Ln(Te(i,L))):(U(L,$.defaultValue),kt(i,L,Ln($.defaultValue))),$.keepTouched||_n(n.touchedFields,L),$.keepDirty||(_n(n.dirtyFields,L),n.isDirty=$.defaultValue?R(L,Ln(Te(i,L))):R()),$.keepError||(_n(n.errors,L),u.isValid&&v()),h.state.next({...n}))},ye=(L,$={})=>{const Q=L?Ln(L):i,he=Ln(Q),le=Jr(L),oe=le?i:he;if($.keepDefaultValues||(i=Q),!$.keepValues){if($.keepDirtyValues){const ve=new Set([...a.mount,...Object.keys(wd(i,s))]);for(const Qe of Array.from(ve))Te(n.dirtyFields,Qe)?kt(oe,Qe,Te(s,Qe)):U(Qe,Te(oe,Qe))}else{if(oO&&yn(L))for(const ve of a.mount){const Qe=Te(r,ve);if(Qe&&Qe._f){const pt=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(uT(pt)){const On=pt.closest("form");if(On){On.reset();break}}}}if($.keepFieldsRef)for(const ve of a.mount)U(ve,Te(oe,ve));else r={}}s=e.shouldUnregister?$.keepDefaultValues?Ln(i):{}:Ln(oe),h.array.next({values:{...oe}}),h.state.next({values:{...oe}})}a={mount:$.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!$.keepIsValid||!!$.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:$.keepSubmitCount?n.submitCount:0,isDirty:le?!1:$.keepDirty?n.isDirty:!!($.keepDefaultValues&&!Xo(L,i)),isSubmitted:$.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:le?{}:$.keepDirtyValues?$.keepDefaultValues&&s?wd(i,s):n.dirtyFields:$.keepDefaultValues&&L?wd(i,L):$.keepDirty?n.dirtyFields:{},touchedFields:$.keepTouched?n.touchedFields:{},errors:$.keepErrors?n.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Me=(L,$)=>ye(Es(L)?L(s):L,$),vt=(L,$={})=>{const Q=Te(r,L),he=Q&&Q._f;if(he){const le=he.refs?he.refs[0]:he.ref;le.focus&&(le.focus(),$.shouldSelect&&Es(le.select)&&le.select())}},Mt=L=>{n={...n,...L}},Ve={control:{register:_e,unregister:te,getFieldState:ge,handleSubmit:ze,setError:B,_subscribe:Y,_runSchema:A,_focusError:Pe,_getWatch:O,_getDirty:R,_setValid:v,_setFieldArray:y,_setDisabledField:we,_setErrors:C,_getFieldArray:P,_reset:ye,_resetDefaultValues:()=>Es(e.defaultValues)&&e.defaultValues().then(L=>{Me(L,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:N,_disableForm:Ee,_subjects:h,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return a},set _names(L){a=L},get _formState(){return n},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:W,trigger:V,register:_e,handleSubmit:ze,watch:J,setValue:U,getValues:X,reset:Me,resetField:nt,clearErrors:pe,unregister:te,setError:B,setFocus:vt,getFieldState:ge};return{...Ve,formControl:Ve}}function Cg(t={}){const e=Z.useRef(void 0),n=Z.useRef(void 0),[r,i]=Z.useState({isDirty:!1,isValidating:!1,isLoading:Es(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Es(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Es(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=Z1e(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,uO(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Z.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Z.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Z.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Z.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Z.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Z.useEffect(()=>{t.values&&!Xo(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Z.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=VQ(r,s),e.current}const yU=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Te(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},qQ=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?yU(r.ref,n,t):r.refs&&r.refs.forEach(i=>yU(i,n,t))}},eOe=(t,e)=>{e.shouldUseNativeValidation&&qQ(t,e);const n={};for(const r in t){const i=Te(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(tOe(e.names||Object.keys(t),r)){const o=Object.assign({},Te(n,r));kt(o,"root",s),kt(n,r,o)}else kt(n,r,s)}return n},tOe=(t,e)=>t.some(n=>n.startsWith(e+"."));var nOe=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var c=n[o].types,l=c&&c[r.code];n[o]=UQ(o,e,n,i,l?[].concat(l,r.message):r.message)}t.shift()}return n},Eg=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(l){return s.shouldUseNativeValidation&&qQ({},s),{errors:{},values:n.raw?r:l}})}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:eOe(nOe(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},Ct;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ct||(Ct={}));var vU;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(vU||(vU={}));const Ne=Ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Za=t=>{switch(typeof t){case"undefined":return Ne.undefined;case"string":return Ne.string;case"number":return Number.isNaN(t)?Ne.nan:Ne.number;case"boolean":return Ne.boolean;case"function":return Ne.function;case"bigint":return Ne.bigint;case"symbol":return Ne.symbol;case"object":return Array.isArray(t)?Ne.array:t===null?Ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ne.promise:typeof Map<"u"&&t instanceof Map?Ne.map:typeof Set<"u"&&t instanceof Set?Ne.set:typeof Date<"u"&&t instanceof Date?Ne.date:Ne.object;default:return Ne.unknown}},fe=Ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ka extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}static assert(e){if(!(e instanceof ka))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ka.create=t=>new ka(t);const nk=(t,e)=>{let n;switch(t.code){case fe.invalid_type:t.received===Ne.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ct.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ct.joinValues(t.keys,", ")}`;break;case fe.invalid_union:n="Invalid input";break;case fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ct.joinValues(t.options)}`;break;case fe.invalid_enum_value:n=`Invalid enum value. Expected ${Ct.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:n="Invalid function arguments";break;case fe.invalid_return_type:n="Invalid function return type";break;case fe.invalid_date:n="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ct.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case fe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case fe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case fe.custom:n="Invalid input";break;case fe.invalid_intersection_types:n="Intersection results could not be merged";break;case fe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ct.assertNever(t)}return{message:n}};let rOe=nk;function iOe(){return rOe}const sOe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function Ie(t,e){const n=iOe(),r=sOe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===nk?void 0:nk].filter(i=>!!i)});t.common.issues.push(r)}class Li{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Je;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Li.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Je;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Je=Object.freeze({status:"aborted"}),Ap=t=>({status:"dirty",value:t}),cs=t=>({status:"valid",value:t}),wU=t=>t.status==="aborted",_U=t=>t.status==="dirty",Gh=t=>t.status==="valid",hT=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));class il{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const TU=(t,e)=>{if(Gh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ka(t.common.issues);return this._error=n,this._error}}};function lt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}class _t{get description(){return this._def.description}_getType(e){return Za(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Za(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Li,ctx:{common:e.parent.common,data:e.data,parsedType:Za(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(hT(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Za(e)},i=this._parseSync({data:e,path:r.path,parent:r});return TU(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Za(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Gh(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Gh(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Za(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(hT(i)?i:Promise.resolve(i));return TU(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:fe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Xh({schema:this,typeName:Ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return jc.create(this,this._def)}nullable(){return Jh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Io.create(this)}promise(){return gT.create(this,this._def)}or(e){return pT.create([this,e],this._def)}and(e){return mT.create(this,e,this._def)}transform(e){return new Xh({...lt(this._def),schema:this,typeName:Ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ik({...lt(this._def),innerType:this,defaultValue:n,typeName:Ze.ZodDefault})}brand(){return new kOe({typeName:Ze.ZodBranded,type:this,...lt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new sk({...lt(this._def),innerType:this,catchValue:n,typeName:Ze.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return fO.create(this,e)}readonly(){return ok.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oOe=/^c[^\s-]{8,}$/i,aOe=/^[0-9a-z]+$/,cOe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,lOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uOe=/^[a-z0-9_-]{21}$/i,dOe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,hOe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,pOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zb;const mOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,yOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,vOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wOe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_Oe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,GQ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",TOe=new RegExp(`^${GQ}$`);function QQ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function COe(t){return new RegExp(`^${QQ(t)}$`)}function EOe(t){let e=`${GQ}T${QQ(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function SOe(t,e){return!!((e==="v4"||!e)&&mOe.test(t)||(e==="v6"||!e)&&yOe.test(t))}function bOe(t,e){if(!dOe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function IOe(t,e){return!!((e==="v4"||!e)&&gOe.test(t)||(e==="v6"||!e)&&vOe.test(t))}class ia extends _t{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ne.string){const s=this._getOrReturnCtx(e);return Ie(s,{code:fe.invalid_type,expected:Ne.string,received:s.parsedType}),Je}const r=new Li;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Ie(i,{code:fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ie(i,{code:fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")fOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"email",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")zb||(zb=new RegExp(pOe,"u")),zb.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"emoji",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")lOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"uuid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")uOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"nanoid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")oOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"cuid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")aOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"cuid2",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")cOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"ulid",code:fe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ie(i,{validation:"url",code:fe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"regex",code:fe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?EOe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?TOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?COe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?hOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"duration",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?SOe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"ip",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?bOe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"jwt",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?IOe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"cidr",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?wOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"base64",code:fe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?_Oe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ie(i,{validation:"base64url",code:fe.invalid_string,message:s.message}),r.dirty()):Ct.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:fe.invalid_string,...Oe.errToObj(r)})}_addCheck(e){return new ia({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Oe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new ia({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ia({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ia({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ia.create=t=>new ia({checks:[],typeName:Ze.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...lt(t)});function AOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class Fu extends _t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ne.number){const s=this._getOrReturnCtx(e);return Ie(s,{code:fe.invalid_type,expected:Ne.number,received:s.parsedType}),Je}let r;const i=new Li;for(const s of this._def.checks)s.kind==="int"?Ct.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?AOe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.not_finite,message:s.message}),i.dirty()):Ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new Fu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new Fu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ct.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Fu.create=t=>new Fu({checks:[],typeName:Ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...lt(t)});class Vu extends _t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ne.bigint)return this._getInvalidInput(e);let r;const i=new Li;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ie(r,{code:fe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ct.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ie(n,{code:fe.invalid_type,expected:Ne.bigint,received:n.parsedType}),Je}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new Vu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new Vu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Vu.create=t=>new Vu({checks:[],typeName:Ze.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...lt(t)});class fT extends _t{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ne.boolean){const r=this._getOrReturnCtx(e);return Ie(r,{code:fe.invalid_type,expected:Ne.boolean,received:r.parsedType}),Je}return cs(e.data)}}fT.create=t=>new fT({typeName:Ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...lt(t)});class Qh extends _t{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ne.date){const s=this._getOrReturnCtx(e);return Ie(s,{code:fe.invalid_type,expected:Ne.date,received:s.parsedType}),Je}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ie(s,{code:fe.invalid_date}),Je}const r=new Li;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ie(i,{code:fe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Ct.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Qh.create=t=>new Qh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ze.ZodDate,...lt(t)});class CU extends _t{_parse(e){if(this._getType(e)!==Ne.symbol){const r=this._getOrReturnCtx(e);return Ie(r,{code:fe.invalid_type,expected:Ne.symbol,received:r.parsedType}),Je}return cs(e.data)}}CU.create=t=>new CU({typeName:Ze.ZodSymbol,...lt(t)});class EU extends _t{_parse(e){if(this._getType(e)!==Ne.undefined){const r=this._getOrReturnCtx(e);return Ie(r,{code:fe.invalid_type,expected:Ne.undefined,received:r.parsedType}),Je}return cs(e.data)}}EU.create=t=>new EU({typeName:Ze.ZodUndefined,...lt(t)});class SU extends _t{_parse(e){if(this._getType(e)!==Ne.null){const r=this._getOrReturnCtx(e);return Ie(r,{code:fe.invalid_type,expected:Ne.null,received:r.parsedType}),Je}return cs(e.data)}}SU.create=t=>new SU({typeName:Ze.ZodNull,...lt(t)});class bU extends _t{constructor(){super(...arguments),this._any=!0}_parse(e){return cs(e.data)}}bU.create=t=>new bU({typeName:Ze.ZodAny,...lt(t)});class IU extends _t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cs(e.data)}}IU.create=t=>new IU({typeName:Ze.ZodUnknown,...lt(t)});class sl extends _t{_parse(e){const n=this._getOrReturnCtx(e);return Ie(n,{code:fe.invalid_type,expected:Ne.never,received:n.parsedType}),Je}}sl.create=t=>new sl({typeName:Ze.ZodNever,...lt(t)});class AU extends _t{_parse(e){if(this._getType(e)!==Ne.undefined){const r=this._getOrReturnCtx(e);return Ie(r,{code:fe.invalid_type,expected:Ne.void,received:r.parsedType}),Je}return cs(e.data)}}AU.create=t=>new AU({typeName:Ze.ZodVoid,...lt(t)});class Io extends _t{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ne.array)return Ie(n,{code:fe.invalid_type,expected:Ne.array,received:n.parsedType}),Je;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Ie(n,{code:o?fe.too_big:fe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ie(n,{code:fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ie(n,{code:fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new il(n,o,n.path,a)))).then(o=>Li.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new il(n,o,n.path,a)));return Li.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Io({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new Io({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new Io({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Io.create=(t,e)=>new Io({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ze.ZodArray,...lt(e)});function _d(t){if(t instanceof Sn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=jc.create(_d(r))}return new Sn({...t._def,shape:()=>e})}else return t instanceof Io?new Io({...t._def,type:_d(t.element)}):t instanceof jc?jc.create(_d(t.unwrap())):t instanceof Jh?Jh.create(_d(t.unwrap())):t instanceof ju?ju.create(t.items.map(e=>_d(e))):t}class Sn extends _t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ct.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ne.object){const l=this._getOrReturnCtx(e);return Ie(l,{code:fe.invalid_type,expected:Ne.object,received:l.parsedType}),Je}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sl&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],d=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new il(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof sl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Ie(i,{code:fe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new il(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,h=await u.value;l.push({key:d,value:h,alwaysSet:u.alwaysSet})}return l}).then(l=>Li.mergeObjectSync(r,l)):Li.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new Sn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Oe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Sn({...this._def,unknownKeys:"strip"})}passthrough(){return new Sn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Sn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Sn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ze.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Sn({...this._def,catchall:e})}pick(e){const n={};for(const r of Ct.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Sn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ct.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Sn({...this._def,shape:()=>n})}deepPartial(){return _d(this)}partial(e){const n={};for(const r of Ct.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Sn({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ct.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof jc;)s=s._def.innerType;n[r]=s}return new Sn({...this._def,shape:()=>n})}keyof(){return YQ(Ct.objectKeys(this.shape))}}Sn.create=(t,e)=>new Sn({shape:()=>t,unknownKeys:"strip",catchall:sl.create(),typeName:Ze.ZodObject,...lt(e)});Sn.strictCreate=(t,e)=>new Sn({shape:()=>t,unknownKeys:"strict",catchall:sl.create(),typeName:Ze.ZodObject,...lt(e)});Sn.lazycreate=(t,e)=>new Sn({shape:t,unknownKeys:"strip",catchall:sl.create(),typeName:Ze.ZodObject,...lt(e)});class pT extends _t{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ka(a.ctx.common.issues));return Ie(n,{code:fe.invalid_union,unionErrors:o}),Je}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new ka(c));return Ie(n,{code:fe.invalid_union,unionErrors:a}),Je}}get options(){return this._def.options}}pT.create=(t,e)=>new pT({options:t,typeName:Ze.ZodUnion,...lt(e)});function rk(t,e){const n=Za(t),r=Za(e);if(t===e)return{valid:!0,data:t};if(n===Ne.object&&r===Ne.object){const i=Ct.objectKeys(e),s=Ct.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=rk(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ne.array&&r===Ne.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=rk(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Ne.date&&r===Ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class mT extends _t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(wU(s)||wU(o))return Je;const a=rk(s.value,o.value);return a.valid?((_U(s)||_U(o))&&n.dirty(),{status:n.value,value:a.data}):(Ie(r,{code:fe.invalid_intersection_types}),Je)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}mT.create=(t,e,n)=>new mT({left:t,right:e,typeName:Ze.ZodIntersection,...lt(n)});class ju extends _t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.array)return Ie(r,{code:fe.invalid_type,expected:Ne.array,received:r.parsedType}),Je;if(r.data.length<this._def.items.length)return Ie(r,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Je;!this._def.rest&&r.data.length>this._def.items.length&&(Ie(r,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new il(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Li.mergeArray(n,o)):Li.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ju({...this._def,rest:e})}}ju.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ju({items:t,typeName:Ze.ZodTuple,rest:null,...lt(e)})};class kU extends _t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.map)return Ie(r,{code:fe.invalid_type,expected:Ne.map,received:r.parsedType}),Je;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new il(r,a,r.path,[l,"key"])),value:s._parse(new il(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Je;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Je;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}kU.create=(t,e,n)=>new kU({valueType:e,keyType:t,typeName:Ze.ZodMap,...lt(n)});class Sg extends _t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ne.set)return Ie(r,{code:fe.invalid_type,expected:Ne.set,received:r.parsedType}),Je;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ie(r,{code:fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ie(r,{code:fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Je;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new il(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Sg({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new Sg({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Sg.create=(t,e)=>new Sg({valueType:t,minSize:null,maxSize:null,typeName:Ze.ZodSet,...lt(e)});class xU extends _t{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}xU.create=(t,e)=>new xU({getter:t,typeName:Ze.ZodLazy,...lt(e)});class RU extends _t{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ie(n,{received:n.data,code:fe.invalid_literal,expected:this._def.value}),Je}return{status:"valid",value:e.data}}get value(){return this._def.value}}RU.create=(t,e)=>new RU({value:t,typeName:Ze.ZodLiteral,...lt(e)});function YQ(t,e){return new Yh({values:t,typeName:Ze.ZodEnum,...lt(e)})}class Yh extends _t{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ie(n,{expected:Ct.joinValues(r),received:n.parsedType,code:fe.invalid_type}),Je}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ie(n,{received:n.data,code:fe.invalid_enum_value,options:r}),Je}return cs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Yh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Yh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Yh.create=YQ;class PU extends _t{_parse(e){const n=Ct.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ne.string&&r.parsedType!==Ne.number){const i=Ct.objectValues(n);return Ie(r,{expected:Ct.joinValues(i),received:r.parsedType,code:fe.invalid_type}),Je}if(this._cache||(this._cache=new Set(Ct.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Ct.objectValues(n);return Ie(r,{received:r.data,code:fe.invalid_enum_value,options:i}),Je}return cs(e.data)}get enum(){return this._def.values}}PU.create=(t,e)=>new PU({values:t,typeName:Ze.ZodNativeEnum,...lt(e)});class gT extends _t{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ne.promise&&n.common.async===!1)return Ie(n,{code:fe.invalid_type,expected:Ne.promise,received:n.parsedType}),Je;const r=n.parsedType===Ne.promise?n.data:Promise.resolve(n.data);return cs(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}gT.create=(t,e)=>new gT({type:t,typeName:Ze.ZodPromise,...lt(e)});class Xh extends _t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Ie(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Je;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Je:c.status==="dirty"||n.value==="dirty"?Ap(c.value):c});{if(n.value==="aborted")return Je;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Je:a.status==="dirty"||n.value==="dirty"?Ap(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Je:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Je:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gh(o))return Je;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Gh(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):Je);Ct.assertNever(i)}}Xh.create=(t,e,n)=>new Xh({schema:t,typeName:Ze.ZodEffects,effect:e,...lt(n)});Xh.createWithPreprocess=(t,e,n)=>new Xh({schema:e,effect:{type:"preprocess",transform:t},typeName:Ze.ZodEffects,...lt(n)});class jc extends _t{_parse(e){return this._getType(e)===Ne.undefined?cs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jc.create=(t,e)=>new jc({innerType:t,typeName:Ze.ZodOptional,...lt(e)});class Jh extends _t{_parse(e){return this._getType(e)===Ne.null?cs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Jh.create=(t,e)=>new Jh({innerType:t,typeName:Ze.ZodNullable,...lt(e)});class ik extends _t{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ik.create=(t,e)=>new ik({innerType:t,typeName:Ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...lt(e)});class sk extends _t{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hT(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ka(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ka(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}sk.create=(t,e)=>new sk({innerType:t,typeName:Ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...lt(e)});class NU extends _t{_parse(e){if(this._getType(e)!==Ne.nan){const r=this._getOrReturnCtx(e);return Ie(r,{code:fe.invalid_type,expected:Ne.nan,received:r.parsedType}),Je}return{status:"valid",value:e.data}}}NU.create=t=>new NU({typeName:Ze.ZodNaN,...lt(t)});class kOe extends _t{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class fO extends _t{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Je:s.status==="dirty"?(n.dirty(),Ap(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Je:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new fO({in:e,out:n,typeName:Ze.ZodPipeline})}}class ok extends _t{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Gh(i)&&(i.value=Object.freeze(i.value)),i);return hT(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}ok.create=(t,e)=>new ok({innerType:t,typeName:Ze.ZodReadonly,...lt(e)});var Ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ze||(Ze={}));const sa=ia.create;Fu.create;Vu.create;const gDe=fT.create,yDe=Qh.create;sl.create;Io.create;const _y=Sn.create;pT.create;mT.create;ju.create;const vDe=Yh.create;gT.create;jc.create;Jh.create;const wDe={string:t=>ia.create({...t,coerce:!0}),number:t=>Fu.create({...t,coerce:!0}),boolean:t=>fT.create({...t,coerce:!0}),bigint:t=>Vu.create({...t,coerce:!0}),date:t=>Qh.create({...t,coerce:!0})};var xOe=Object.defineProperty,ROe=Object.defineProperties,POe=Object.getOwnPropertyDescriptors,yT=Object.getOwnPropertySymbols,XQ=Object.prototype.hasOwnProperty,JQ=Object.prototype.propertyIsEnumerable,OU=(t,e,n)=>e in t?xOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NOe=(t,e)=>{for(var n in e||(e={}))XQ.call(e,n)&&OU(t,n,e[n]);if(yT)for(var n of yT(e))JQ.call(e,n)&&OU(t,n,e[n]);return t},OOe=(t,e)=>ROe(t,POe(e)),MOe=(t,e)=>{var n={};for(var r in t)XQ.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&yT)for(var r of yT(t))e.indexOf(r)<0&&JQ.call(t,r)&&(n[r]=t[r]);return n};function DOe(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function LOe(t){let e=g.useRef();return g.useEffect(()=>{e.current=t}),e.current}var FOe=18,ZQ=40,VOe=`${ZQ}px`,jOe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function UOe({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[i,s]=g.useState(!1),[o,a]=g.useState(!1),[c,l]=g.useState(!1),u=g.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&i&&o,[i,o,n]),d=g.useCallback(()=>{let h=t.current,m=e.current;if(!h||!m||c||n==="none")return;let _=h,v=_.getBoundingClientRect().left+_.offsetWidth,T=_.getBoundingClientRect().top+_.offsetHeight/2,y=v-FOe,w=T;document.querySelectorAll(jOe).length===0&&document.elementFromPoint(y,w)===h||(s(!0),l(!0))},[t,e,c,n]);return g.useEffect(()=>{let h=t.current;if(!h||n==="none")return;function m(){let v=window.innerWidth-h.getBoundingClientRect().right;a(v>=ZQ)}m();let _=setInterval(m,1e3);return()=>{clearInterval(_)}},[t,n]),g.useEffect(()=>{let h=r||document.activeElement===e.current;if(n==="none"||!h)return;let m=setTimeout(d,0),_=setTimeout(d,2e3),v=setTimeout(d,5e3),T=setTimeout(()=>{l(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(_),clearTimeout(v),clearTimeout(T)}},[e,r,n,d]),{hasPWMBadge:i,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:VOe}}var eY=g.createContext({}),tY=g.forwardRef((t,e)=>{var n=t,{value:r,onChange:i,maxLength:s,textAlign:o="left",pattern:a,placeholder:c,inputMode:l="numeric",onComplete:u,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:_=$Oe,render:v,children:T}=n,y=MOe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),w,C,b,k,D;let[A,S]=g.useState(typeof y.defaultValue=="string"?y.defaultValue:""),x=r??A,N=LOe(x),R=g.useCallback(ye=>{i==null||i(ye),S(ye)},[i]),O=g.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),P=g.useRef(null),z=g.useRef(null),K=g.useRef({value:x,onChange:R,isIOS:typeof window<"u"&&((C=(w=window==null?void 0:window.CSS)==null?void 0:w.supports)==null?void 0:C.call(w,"-webkit-touch-callout","none"))}),U=g.useRef({prev:[(b=P.current)==null?void 0:b.selectionStart,(k=P.current)==null?void 0:k.selectionEnd,(D=P.current)==null?void 0:D.selectionDirection]});g.useImperativeHandle(e,()=>P.current,[]),g.useEffect(()=>{let ye=P.current,Me=z.current;if(!ye||!Me)return;K.current.value!==ye.value&&K.current.onChange(ye.value),U.current.prev=[ye.selectionStart,ye.selectionEnd,ye.selectionDirection];function vt(){if(document.activeElement!==ye){pe(null),J(null);return}let Ve=ye.selectionStart,L=ye.selectionEnd,$=ye.selectionDirection,Q=ye.maxLength,he=ye.value,le=U.current.prev,oe=-1,ve=-1,Qe;if(he.length!==0&&Ve!==null&&L!==null){let Pr=Ve===L,Lo=Ve===he.length&&he.length<Q;if(Pr&&!Lo){let pn=Ve;if(pn===0)oe=0,ve=1,Qe="forward";else if(pn===Q)oe=pn-1,ve=pn,Qe="backward";else if(Q>1&&he.length>1){let zn=0;if(le[0]!==null&&le[1]!==null){Qe=pn<le[1]?"backward":"forward";let Bs=le[0]===le[1]&&le[0]<Q;Qe==="backward"&&!Bs&&(zn=-1)}oe=zn+pn,ve=zn+pn+1}}oe!==-1&&ve!==-1&&oe!==ve&&P.current.setSelectionRange(oe,ve,Qe)}let pt=oe!==-1?oe:Ve,On=ve!==-1?ve:L,vi=Qe??$;pe(pt),J(On),U.current.prev=[pt,On,vi]}if(document.addEventListener("selectionchange",vt,{capture:!0}),vt(),document.activeElement===ye&&X(!0),!document.getElementById("input-otp-style")){let Ve=document.createElement("style");if(Ve.id="input-otp-style",document.head.appendChild(Ve),Ve.sheet){let L="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";dp(Ve.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),dp(Ve.sheet,`[data-input-otp]:autofill { ${L} }`),dp(Ve.sheet,`[data-input-otp]:-webkit-autofill { ${L} }`),dp(Ve.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),dp(Ve.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Mt=()=>{Me&&Me.style.setProperty("--root-height",`${ye.clientHeight}px`)};Mt();let zt=new ResizeObserver(Mt);return zt.observe(ye),()=>{document.removeEventListener("selectionchange",vt,{capture:!0}),zt.disconnect()}},[]);let[q,F]=g.useState(!1),[V,X]=g.useState(!1),[ge,pe]=g.useState(null),[B,J]=g.useState(null);g.useEffect(()=>{DOe(()=>{var ye,Me,vt,Mt;(ye=P.current)==null||ye.dispatchEvent(new Event("input"));let zt=(Me=P.current)==null?void 0:Me.selectionStart,Ve=(vt=P.current)==null?void 0:vt.selectionEnd,L=(Mt=P.current)==null?void 0:Mt.selectionDirection;zt!==null&&Ve!==null&&(pe(zt),J(Ve),U.current.prev=[zt,Ve,L])})},[x,V]),g.useEffect(()=>{N!==void 0&&x!==N&&N.length<s&&x.length===s&&(u==null||u(x))},[s,u,N,x]);let Y=UOe({containerRef:z,inputRef:P,pushPasswordManagerStrategy:d,isFocused:V}),W=g.useCallback(ye=>{let Me=ye.currentTarget.value.slice(0,s);if(Me.length>0&&O&&!O.test(Me)){ye.preventDefault();return}typeof N=="string"&&Me.length<N.length&&document.dispatchEvent(new Event("selectionchange")),R(Me)},[s,R,N,O]),te=g.useCallback(()=>{var ye;if(P.current){let Me=Math.min(P.current.value.length,s-1),vt=P.current.value.length;(ye=P.current)==null||ye.setSelectionRange(Me,vt),pe(Me),J(vt)}X(!0)},[s]),we=g.useCallback(ye=>{var Me,vt;let Mt=P.current;if(!h&&(!K.current.isIOS||!ye.clipboardData||!Mt))return;let zt=ye.clipboardData.getData("text/plain"),Ve=h?h(zt):zt;ye.preventDefault();let L=(Me=P.current)==null?void 0:Me.selectionStart,$=(vt=P.current)==null?void 0:vt.selectionEnd,Q=(L!==$?x.slice(0,L)+Ve+x.slice($):x.slice(0,L)+Ve+x.slice(L)).slice(0,s);if(Q.length>0&&O&&!O.test(Q))return;Mt.value=Q,R(Q);let he=Math.min(Q.length,s-1),le=Q.length;Mt.setSelectionRange(he,le),pe(he),J(le)},[s,R,O,x]),_e=g.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),Pe=g.useMemo(()=>({position:"absolute",inset:0,width:Y.willPushPWMBadge?`calc(100% + ${Y.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Y.willPushPWMBadge?`inset(0 ${Y.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Y.PWM_BADGE_SPACE_WIDTH,Y.willPushPWMBadge,o]),Ee=g.useMemo(()=>g.createElement("input",OOe(NOe({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":x.length===0||void 0,"data-input-otp-mss":ge,"data-input-otp-mse":B,inputMode:l,pattern:O==null?void 0:O.source,"aria-placeholder":c,style:Pe,maxLength:s,value:x,ref:P,onPaste:ye=>{var Me;we(ye),(Me=y.onPaste)==null||Me.call(y,ye)},onChange:W,onMouseOver:ye=>{var Me;F(!0),(Me=y.onMouseOver)==null||Me.call(y,ye)},onMouseLeave:ye=>{var Me;F(!1),(Me=y.onMouseLeave)==null||Me.call(y,ye)},onFocus:ye=>{var Me;te(),(Me=y.onFocus)==null||Me.call(y,ye)},onBlur:ye=>{var Me;X(!1),(Me=y.onBlur)==null||Me.call(y,ye)}})),[W,te,we,l,Pe,s,B,ge,y,O==null?void 0:O.source,x]),ze=g.useMemo(()=>({slots:Array.from({length:s}).map((ye,Me)=>{var vt;let Mt=V&&ge!==null&&B!==null&&(ge===B&&Me===ge||Me>=ge&&Me<B),zt=x[Me]!==void 0?x[Me]:null,Ve=x[0]!==void 0?null:(vt=c==null?void 0:c[Me])!=null?vt:null;return{char:zt,placeholderChar:Ve,isActive:Mt,hasFakeCaret:Mt&&zt===null}}),isFocused:V,isHovering:!y.disabled&&q}),[V,q,s,B,ge,y.disabled,x]),nt=g.useMemo(()=>v?v(ze):g.createElement(eY.Provider,{value:ze},T),[T,ze,v]);return g.createElement(g.Fragment,null,_!==null&&g.createElement("noscript",null,g.createElement("style",null,_)),g.createElement("div",{ref:z,"data-input-otp-container":!0,style:_e,className:m},nt,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ee)))});tY.displayName="Input";function dp(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var $Oe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const nY=g.forwardRef(({className:t,containerClassName:e,...n},r)=>p.jsx(tY,{ref:r,containerClassName:ue("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:ue("disabled:cursor-not-allowed",t),...n}));nY.displayName="InputOTP";const rY=g.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:ue("flex items-center",t),...e}));rY.displayName="InputOTPGroup";const Nl=g.forwardRef(({index:t,className:e,...n},r)=>{const i=g.useContext(eY),{char:s,hasFakeCaret:o,isActive:a}=i.slots[t];return p.jsxs("div",{ref:r,className:ue("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",a&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[s,o&&p.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:p.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Nl.displayName="InputOTPSlot";const BOe=g.forwardRef(({...t},e)=>p.jsx("div",{ref:e,role:"separator",...t,children:p.jsx($se,{})}));BOe.displayName="InputOTPSeparator";var HOe="Label",iY=g.forwardRef((t,e)=>p.jsx(Fe.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));iY.displayName=HOe;var sY=iY;const zOe=jg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oY=g.forwardRef(({className:t,...e},n)=>p.jsx(sY,{ref:n,className:ue(zOe(),t),...e}));oY.displayName=sY.displayName;const bg=D1e,aY=g.createContext({}),oa=({...t})=>p.jsx(aY.Provider,{value:{name:t.name},children:p.jsx(j1e,{...t})}),DE=()=>{const t=g.useContext(aY),e=g.useContext(cY),{getFieldState:n,formState:r}=ME(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},cY=g.createContext({}),co=g.forwardRef(({className:t,...e},n)=>{const r=g.useId();return p.jsx(cY.Provider,{value:{id:r},children:p.jsx("div",{ref:n,className:ue("space-y-2",t),...e})})});co.displayName="FormItem";const lo=g.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=DE();return p.jsx(oY,{ref:n,className:ue(r&&"text-destructive",t),htmlFor:i,...e})});lo.displayName="FormLabel";const uo=g.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=DE();return p.jsx(bH,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});uo.displayName="FormControl";const WOe=g.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=DE();return p.jsx("p",{ref:n,id:r,className:ue("text-sm text-muted-foreground",t),...e})});WOe.displayName="FormDescription";const ho=g.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=DE(),o=i?String(i==null?void 0:i.message):e;return o?p.jsx("p",{ref:r,id:s,className:ue("text-sm font-medium text-destructive",t),...n,children:o}):null});ho.displayName="FormMessage";const KOe=_y({phoneNumber:sa().min(10,"Phone number must be at least 10 digits").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number with country code")}),qOe=_y({otp:sa().min(6,"OTP must be 6 digits").max(6,"OTP must be 6 digits")});function GOe({onBack:t,className:e}){const{signInWithPhone:n,verifyPhoneOTP:r,loading:i}=Nn(),[s,o]=g.useState("phone"),[a,c]=g.useState(null),[l,u]=g.useState(""),d=Cg({resolver:Eg(KOe),defaultValues:{phoneNumber:""}}),h=Cg({resolver:Eg(qOe),defaultValues:{otp:""}}),m=async y=>{try{const w=y.phoneNumber.startsWith("+")?y.phoneNumber:`+${y.phoneNumber}`,C=await n(w);c(C),u(w),o("otp")}catch(w){console.error("Error sending OTP:",w)}},_=async y=>{if(a)try{await r(a,y.otp)}catch(w){console.error("Error verifying OTP:",w),h.setError("otp",{message:"Invalid OTP. Please try again."})}},v=async()=>{if(l)try{const y=await n(l);c(y)}catch(y){console.error("Error resending OTP:",y)}},T=()=>{o("phone"),c(null),h.reset()};return p.jsxs(Po,{className:ue("w-full max-w-md animate-fade-in",e),children:[p.jsx(nl,{children:p.jsxs("div",{className:"flex items-center gap-3",children:[(s==="otp"||t)&&p.jsx(Ue,{variant:"ghost",size:"icon",onClick:s==="otp"?T:t,className:"h-8 w-8",children:p.jsx(JH,{className:"h-4 w-4"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xR,{className:"h-5 w-5 text-primary"}),p.jsx(rl,{className:"text-xl",children:s==="phone"?"Sign in with Phone":"Enter Verification Code"})]})]})}),p.jsx(Aa,{className:"space-y-6",children:s==="phone"?p.jsxs(p.Fragment,{children:[p.jsx("div",{id:"recaptcha-container",className:"flex justify-center"}),p.jsx(bg,{...d,children:p.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-4",children:[p.jsx(oa,{control:d.control,name:"phoneNumber",render:({field:y})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Phone Number"}),p.jsx(uo,{children:p.jsx(Xi,{placeholder:"+1234567890",...y,className:"text-center font-mono"})}),p.jsx(ho,{}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +1 for US, +91 for India)"})]})}),p.jsx(Ue,{type:"submit",className:"w-full",disabled:i,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]})})]}):p.jsx(bg,{...h,children:p.jsxs("form",{onSubmit:h.handleSubmit(_),className:"space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("p",{className:"text-sm text-muted-foreground",children:"We've sent a 6-digit code to"}),p.jsx("p",{className:"font-medium",children:l})]}),p.jsx(oa,{control:h.control,name:"otp",render:({field:y})=>p.jsxs(co,{children:[p.jsx(lo,{className:"sr-only",children:"Verification Code"}),p.jsx(uo,{children:p.jsx("div",{className:"flex justify-center",children:p.jsx(nY,{maxLength:6,value:y.value,onChange:y.onChange,children:p.jsxs(rY,{children:[p.jsx(Nl,{index:0}),p.jsx(Nl,{index:1}),p.jsx(Nl,{index:2}),p.jsx(Nl,{index:3}),p.jsx(Nl,{index:4}),p.jsx(Nl,{index:5})]})})})}),p.jsx(ho,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Ue,{type:"submit",className:"w-full",disabled:i||h.watch("otp").length!==6,variant:"focus",children:i?p.jsxs(p.Fragment,{children:[p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Sign In"}),p.jsx(Ue,{type:"button",variant:"ghost",className:"w-full",onClick:v,disabled:i,children:"Resend OTP"})]})]})})})]})}var LE="Tabs",[QOe]=Gr(LE,[mE]),lY=mE(),[YOe,pO]=QOe(LE),uY=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...l}=t,u=fE(a),[d,h]=Na({prop:r,onChange:i,defaultProp:s??"",caller:LE});return p.jsx(YOe,{scope:n,baseId:go(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:c,children:p.jsx(Fe.div,{dir:u,"data-orientation":o,...l,ref:e})})});uY.displayName=LE;var dY="TabsList",hY=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=pO(dY,n),o=lY(n);return p.jsx(kq,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(Fe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});hY.displayName=dY;var fY="TabsTrigger",pY=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=pO(fY,n),a=lY(n),c=yY(o.baseId,r),l=vY(o.baseId,r),u=r===o.value;return p.jsx(xq,{asChild:!0,...a,focusable:!i,active:u,children:p.jsx(Fe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:Se(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Se(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Se(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});pY.displayName=fY;var mY="TabsContent",gY=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=pO(mY,n),c=yY(a.baseId,r),l=vY(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx(Hn,{present:i||u,children:({present:h})=>p.jsx(Fe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:l,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});gY.displayName=mY;function yY(t,e){return`${t}-trigger-${e}`}function vY(t,e){return`${t}-content-${e}`}var XOe=uY,wY=hY,_Y=pY,TY=gY;const JOe=XOe,CY=g.forwardRef(({className:t,...e},n)=>p.jsx(wY,{ref:n,className:ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));CY.displayName=wY.displayName;const ak=g.forwardRef(({className:t,...e},n)=>p.jsx(_Y,{ref:n,className:ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));ak.displayName=_Y.displayName;const ck=g.forwardRef(({className:t,...e},n)=>p.jsx(TY,{ref:n,className:ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ck.displayName=TY.displayName;const ZOe=_y({email:sa().email({message:"Invalid email address."}),password:sa().min(6,{message:"Password must be at least 6 characters."})}),eMe=_y({email:sa().email({message:"Invalid email address."})});function tMe(){const{signIn:t,signInWithGoogle:e,resetPassword:n,loading:r}=Nn(),i=Bu(),[s,o]=g.useState(!1),a=Rf(),c=Cg({resolver:Eg(ZOe),defaultValues:{email:"",password:""}}),l=Cg({resolver:Eg(eMe),defaultValues:{email:""}});async function u(m){try{await t(m.email,m.password),i("/")}catch{}}async function d(){try{await e(),i("/")}catch{}}async function h(m){try{await n(m.email),o(!1),l.reset()}catch{}}return s?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs(Po,{className:"w-full max-w-md shadow-elegant animate-scale-in",children:[p.jsx(nl,{children:p.jsxs(rl,{className:"text-center text-2xl flex items-center justify-center gap-2",children:[p.jsx(uL,{className:"h-6 w-6 text-primary"}),"Reset Password"]})}),p.jsx(Aa,{children:p.jsx(bg,{...l,children:p.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-4",children:[p.jsx(oa,{control:l.control,name:"email",render:({field:m})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Email Address"}),p.jsx(uo,{children:p.jsx(Xi,{placeholder:"m@example.com",...m})}),p.jsx(ho,{})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Ue,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}):"Send Reset Email"}),p.jsx(Ue,{type:"button",variant:"ghost",className:"w-full",onClick:()=>o(!1),children:"Back to Sign In"})]})]})})})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(Eu,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Smart Task Management"})]}),p.jsxs(Po,{className:"shadow-elegant animate-scale-in",children:[p.jsx(nl,{children:p.jsx(rl,{className:"text-center text-xl",children:"Welcome Back"})}),p.jsxs(Aa,{children:[p.jsxs(JOe,{defaultValue:"email",className:"w-full",children:[a?p.jsx("div",{className:"mb-6"}):p.jsxs(CY,{className:"grid w-full grid-cols-2 mb-6",children:[p.jsxs(ak,{value:"email",className:"flex items-center gap-2",children:[p.jsx(uL,{className:"h-4 w-4"}),"Email"]}),p.jsxs(ak,{value:"phone",className:"flex items-center gap-2",children:[p.jsx(xR,{className:"h-4 w-4"}),"Phone"]})]}),p.jsx(ck,{value:"email",className:"space-y-4",children:p.jsx(bg,{...c,children:p.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[p.jsx(oa,{control:c.control,name:"email",render:({field:m})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Email"}),p.jsx(uo,{children:p.jsx(Xi,{placeholder:"m@example.com",...m})}),p.jsx(ho,{})]})}),p.jsx(oa,{control:c.control,name:"password",render:({field:m})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Password"}),p.jsx(uo,{children:p.jsx(Xi,{type:"password",placeholder:"••••••••",...m})}),p.jsx(ho,{})]})}),p.jsx("div",{className:"flex justify-end",children:p.jsx(Ue,{type:"button",variant:"link",className:"px-0 text-sm",onClick:()=>o(!0),children:"Forgot password?"})}),p.jsx(Ue,{type:"submit",className:"w-full",disabled:r,variant:"focus",children:r?p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}):"Sign In"})]})})}),!a&&p.jsx(ck,{value:"phone",children:p.jsx(GOe,{})})]}),!a&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(Ue,{variant:"outline",className:"w-full hover-scale",onClick:d,disabled:r,children:[r?p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(t5,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",p.jsx(Dm,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign Up"})]})]})]})]})})}const nMe=_y({displayName:sa().min(2,{message:"Name must be at least 2 characters."}),email:sa().email({message:"Invalid email address."}),password:sa().min(8,{message:"Password must be at least 8 characters."}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,{message:"Password must contain at least one uppercase letter, one lowercase letter, and one number."}),confirmPassword:sa()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function rMe(){const{signUp:t,signInWithGoogle:e,loading:n}=Nn(),r=Bu(),i=Rf(),s=Cg({resolver:Eg(nMe),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""}});async function o(c){try{await t(c.email,c.password,c.displayName),r("/")}catch{}}async function a(){try{await e(),r("/")}catch{}}return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2 animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"gradient-primary h-16 w-16 rounded-2xl flex items-center justify-center shadow-glow",children:p.jsx(Eu,{className:"h-8 w-8 text-white"})})}),p.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",children:"Taskly"}),p.jsx("p",{className:"text-muted-foreground",children:"Start your Taskly journey"})]}),p.jsxs(Po,{className:"shadow-elegant animate-scale-in",children:[p.jsx(nl,{children:p.jsxs(rl,{className:"text-center text-xl flex items-center justify-center gap-2",children:[p.jsx(RR,{className:"h-5 w-5 text-primary"}),"Create Your Account"]})}),p.jsxs(Aa,{children:[p.jsx(bg,{...s,children:p.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[p.jsx(oa,{control:s.control,name:"displayName",render:({field:c})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Full Name"}),p.jsx(uo,{children:p.jsx(Xi,{placeholder:"John Doe",...c})}),p.jsx(ho,{})]})}),p.jsx(oa,{control:s.control,name:"email",render:({field:c})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Email"}),p.jsx(uo,{children:p.jsx(Xi,{placeholder:"m@example.com",...c})}),p.jsx(ho,{})]})}),p.jsx(oa,{control:s.control,name:"password",render:({field:c})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Password"}),p.jsx(uo,{children:p.jsx(Xi,{type:"password",placeholder:"••••••••",...c})}),p.jsx(ho,{})]})}),p.jsx(oa,{control:s.control,name:"confirmPassword",render:({field:c})=>p.jsxs(co,{children:[p.jsx(lo,{children:"Confirm Password"}),p.jsx(uo,{children:p.jsx(Xi,{type:"password",placeholder:"••••••••",...c})}),p.jsx(ho,{})]})}),p.jsx(Ue,{type:"submit",className:"w-full",disabled:n,variant:"focus",children:n?p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}):"Create Account"})]})}),!i&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),p.jsxs(Ue,{variant:"outline",className:"w-full hover-scale",onClick:a,disabled:n,children:[n?p.jsx(mo,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(t5,{className:"mr-2 h-4 w-4"}),"Continue with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",p.jsx(Dm,{to:"/signin",className:"text-primary hover:underline font-medium",children:"Sign In"})]}),p.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})]})]})})}const iMe=({children:t})=>{const{user:e,loading:n}=Nn(),r=Bu();return g.useEffect(()=>{!n&&!e&&r("/signin")},[e,n,r]),n?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx(mo,{className:"h-10 w-10 animate-spin text-primary"})}):e?p.jsx(p.Fragment,{children:t}):null},Wb=({children:t})=>{const{userProfile:e,loading:n}=Nn();return n?p.jsx(MQ,{}):!e||e.role!=="admin"&&e.role!=="superadmin"?p.jsx(cee,{to:"/",replace:!0}):p.jsx(p.Fragment,{children:t})};function sMe(){const{tasks:t}=uy(),{user:e}=Nn(),[n,r]=g.useState(new Set);return g.useEffect(()=>{(async()=>{if(!e)return;if(yt.isNativePlatform()&&(await jt.checkPermissions()).display!=="granted"){console.log("Native notification permission not granted, skipping native assignment check.");return}const s=t.filter(o=>{var u;const a=(u=o.assignedTo)==null?void 0:u.includes(e.uid),c=o.createdAt&&Date.now()-new Date(o.createdAt).getTime()<3e5,l=!n.has(o.id);return a&&c&&l});if(s.length!==0){if(console.log(`Found ${s.length} new task(s) to notify about.`),yt.isNativePlatform()){const o=s.map(a=>({id:Math.floor(Math.random()*1e6),title:"New Task Assigned",body:`You have been assigned: "${a.title}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{taskId:a.id,type:"task_assignment"}}));try{await jt.schedule({notifications:o}),console.log("Native task assignment notifications scheduled successfully")}catch(a){console.error("Failed to schedule native notifications:",a)}}else for(const o of s)try{"Notification"in window&&Notification.permission==="granted"&&new Notification("New Task Assigned",{body:`You have been assigned: "${o.title}"`,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`task-assignment-${o.id}`,data:{taskId:o.id,type:"task_assignment"},requireInteraction:!0,vibrate:[200,100,200]})}catch(a){console.error("Failed to show web notification:",a)}r(o=>{const a=new Set(o);return s.forEach(c=>a.add(c.id)),a})}})()},[t,e,n]),null}function lk(t){const e=t??Date.now();return Math.floor(e%2e9)}function oMe({senderName:t,senderAvatarUrl:e,messagePreview:n,onDismiss:r}){const i=s=>s.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return p.jsxs(sT.div,{layout:!0,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:35}},exit:{opacity:0,y:10,scale:.95,transition:{duration:.15}},className:"flex items-center gap-4 p-4 bg-background/80 backdrop-blur-lg border border-border/50 rounded-xl shadow-elegant w-full max-w-lg",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(uE,{className:"h-10 w-10 border-2 border-background",children:[p.jsx(dE,{src:e}),p.jsx(hE,{children:i(t)})]}),p.jsx("div",{className:"absolute -bottom-1 -right-1 bg-primary rounded-full p-0.5 border-2 border-background",children:p.jsx(kR,{className:"h-3 w-3 text-primary-foreground"})})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-semibold text-sm text-foreground truncate",children:t}),p.jsx("p",{className:"text-sm text-muted-foreground truncate",children:n})]}),p.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[p.jsxs(Ue,{size:"sm",variant:"secondary",className:"h-8 px-3 text-xs",onClick:r,children:["View",p.jsx(wse,{className:"h-3 w-3 ml-1.5"})]}),p.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:r,children:p.jsx(ul,{className:"h-4 w-4"})})]})]})}function aMe(){const{user:t}=Nn(),{incrementUnreadCount:e}=lE(),n=g.useRef(new Map),r=g.useRef(null);g.useEffect(()=>{if(!t){console.log("[DEBUG] ChatNotifier: User logged out, cleaning up listeners."),i();return}console.log("[DEBUG] ChatNotifier: User logged in, setting up Firestore listener for chat rooms.");const s=hr(Re,"chatRooms"),o=Ta(s,Yp("participants","array-contains",t.uid));return r.current=Co(o,a=>{console.log(`[DEBUG] ChatNotifier: Firestore snapshot received with ${a.size} chat rooms for user.`);const c=new Set;a.forEach(l=>{c.add(l.id)}),n.current.forEach((l,u)=>{c.has(u)||(l(),n.current.delete(u))}),c.forEach(l=>{if(!n.current.has(l)){console.log(`[DEBUG] ChatNotifier: Setting up new RTDB listener for chat room: ${l}`);const u=Qo(Yo,`chats/${l}/messages`),d=v0(u,y0("timestamp"),QW(1));dg(d,h=>{let m=Date.now()-1e3;if(h.exists()){const T=h.val(),y=Object.keys(T)[0];m=T[y].timestamp}console.log(`[DEBUG] ChatNotifier: Starting listener for chat ${l} for messages after timestamp: ${m}`);const _=v0(u,y0("timestamp"),rTe(m+1)),v=tTe(_,T=>{console.log(`[DEBUG] ChatNotifier: >>> NEW MESSAGE DETECTED in room ${l} <<<`);const y=T.val(),w=T.key;if(!w||!y)return;const C={id:w,...y};console.log("[DEBUG] ChatNotifier: Message Data:",C);const b=l.split("_")[0]===l.split("_")[1],k=C.senderId===t.uid;if(!k||b){console.log(`[DEBUG] ChatNotifier: Notification triggered. isFromMe: ${k}, isSelfChat: ${b}`),fA(fae),e(l),Sr.custom(N=>p.jsx(oMe,{senderName:C.senderName,senderAvatarUrl:C.senderAvatar,messagePreview:C.message,onDismiss:()=>Sr.dismiss(N)}));const A=`New message from ${C.senderName}`,S=C.message.length>100?`${C.message.substring(0,100)}...`:C.message,x=lk(C.timestamp);yt.isNativePlatform()?Ft(async()=>{const{LocalNotifications:N}=await Promise.resolve().then(()=>Tue);return{LocalNotifications:N}},void 0).then(({LocalNotifications:N})=>{N.schedule({notifications:[{id:x,title:A,body:S,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"chat_message",senderId:C.senderId,chatRoomId:l}}]}).catch(R=>console.error("Failed to schedule native chat notification:",R))}):"Notification"in window&&Notification.permission==="granted"&&new Notification(A,{body:S,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`chat-message-${C.id}`,data:{type:"chat_message",senderId:C.senderId,chatRoomId:l},requireInteraction:!1,vibrate:[100,50,100]})}else console.log(`[DEBUG] ChatNotifier: Notification ignored. isFromMe: ${k}, isSelfChat: ${b}`)});n.current.set(l,()=>GW(_,"child_added",v))},{onlyOnce:!0})}})}),()=>{i()}},[t,e]);const i=()=>{r.current&&(r.current(),r.current=null),n.current.forEach(s=>s()),n.current.clear()};return null}class cMe{constructor(){It(this,"messaging",null);It(this,"vapidKey")}async init(){try{if(!("serviceWorker"in navigator)||!("Notification"in window)){console.warn("FCM not supported in this browser");return}this.messaging=$K,await this.requestPermission(),this.setupMessageListener()}catch(e){console.error("Failed to initialize FCM:",e)}}async requestPermission(){try{if(await Notification.requestPermission()==="granted"){const n=await navigator.serviceWorker.ready,r=await EV(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:n});return r?(console.log("FCM token received:",r),r):(console.warn("No FCM token available"),null)}else return console.warn("Notification permission denied"),null}catch(e){throw console.error("Failed to get FCM token:",e),e}}setupMessageListener(){this.messaging&&WSe(this.messaging,e=>{if(console.log("Message received:",e),e.notification){const{title:n,body:r,icon:i}=e.notification;"serviceWorker"in navigator&&"showNotification"in ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(s=>{s.showNotification(n||"New Message",{body:r||"",icon:i||"/icon-192x192.png",badge:"/icon-192x192.png",tag:"fcm-message",requireInteraction:!1,silent:!1})})}})}async getToken(){this.messaging||await this.init();try{const e=await navigator.serviceWorker.ready;return await EV(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}catch(e){return console.error("Failed to get FCM token:",e),null}}}const lMe=new cMe,jl=class jl{constructor(){It(this,"checkInterval",null)}static getInstance(){return jl.instance||(jl.instance=new jl),jl.instance}async init(){await st.init(),this.startScheduleChecker(),await this.checkMissedNotifications()}async scheduleNotification(e){const n={...e,id:crypto.randomUUID(),createdAt:Date.now(),status:"pending"};await this.saveScheduledNotification(n);const r=e.scheduledTime-Date.now();return r<=5*60*1e3&&r>0&&setTimeout(()=>this.deliverNotification(n.id),r),n.id}async cancelNotification(e){const n=await this.getScheduledNotification(e);n&&(n.status="expired",await this.saveScheduledNotification(n))}async saveScheduledNotification(e){const n=await st.getStore("scheduledNotifications","readwrite");return new Promise((r,i)=>{const s=n.put(e);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async getScheduledNotification(e){const n=await st.getStore("scheduledNotifications");return new Promise((r,i)=>{const s=n.get(e);s.onsuccess=()=>r(s.result||null),s.onerror=()=>i(s.error)})}async getAllPendingNotifications(){const n=(await st.getStore("scheduledNotifications")).index("status");return new Promise((r,i)=>{const s=n.getAll("pending");s.onsuccess=()=>r(s.result),s.onerror=()=>i(s.error)})}startScheduleChecker(){this.checkInterval=window.setInterval(()=>this.checkDueNotifications(),3e4)}async checkDueNotifications(){if(!this.isDatabaseReady())return;const e=await this.getAllPendingNotifications(),n=Date.now();for(const r of e)r.scheduledTime<=n&&await this.deliverNotification(r.id)}isDatabaseReady(){try{return st&&typeof st.getStore=="function"}catch{return!1}}async checkMissedNotifications(){const e=await this.getAllPendingNotifications(),n=Date.now();let r=0;for(const i of e)i.scheduledTime<=n&&(await this.deliverNotification(i.id),r++);r>0&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Taskly - Missed Notifications",{body:`You had ${r} missed notification${r>1?"s":""} while the app was closed.`,icon:"/icon-192x192.png",tag:"missed-notifications"})}async deliverNotification(e){const n=await this.getScheduledNotification(e);if(!n||n.status!=="pending")return;if(Date.now()-n.scheduledTime>60*60*1e3){n.status="expired",await this.saveScheduledNotification(n);return}"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",options:{title:n.title,body:n.body,icon:n.icon||"/icon-192x192.png",badge:n.badge||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent,vibrate:n.vibrate||[200,100,200],actions:n.actions}}):"Notification"in window&&Notification.permission==="granted"&&new Notification(n.title,{body:n.body,icon:n.icon||"/icon-192x192.png",tag:n.tag||`notification-${e}`,data:n.data,requireInteraction:n.requireInteraction,silent:n.silent}),n.status="delivered",await this.saveScheduledNotification(n)}async getNotificationHistory(){const e=await st.getStore("scheduledNotifications");return new Promise((n,r)=>{const i=e.getAll();i.onsuccess=()=>n(i.result.sort((s,o)=>o.createdAt-s.createdAt)),i.onerror=()=>r(i.error)})}async clearExpiredNotifications(){const n=(await this.getNotificationHistory()).filter(i=>i.status==="expired"||i.status==="delivered"),r=await st.getStore("scheduledNotifications","readwrite");for(const i of n)Date.now()-i.createdAt>7*24*60*60*1e3&&r.delete(i.id)}destroy(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}};It(jl,"instance");let uk=jl;const dk=uk.getInstance(),uMe=Object.freeze(Object.defineProperty({__proto__:null,unifiedNotifications:dk},Symbol.toStringTag,{value:"Module"})),Ul=class Ul{constructor(){It(this,"initialized",!1)}static getInstance(){return Ul.instance||(Ul.instance=new Ul),Ul.instance}async init(){if(!this.initialized)try{yt.isNativePlatform()?(await Ol.init(),console.log("Capacitor notifications initialized for native platform")):(await Promise.all([lMe.init(),dk.init()]),console.log("Web notifications initialized for PWA")),this.initialized=!0,console.log("Unified notification service initialized for platform:",yt.getPlatform())}catch(e){console.error("Failed to initialize unified notification service:",e)}}async sendNotification(e){this.initialized||await this.init();try{yt.isNativePlatform()?(await this.sendCapacitorNotification(e),console.log("Sent native notification:",e.title)):(await this.sendWebNotification(e),console.log("Sent web notification:",e.title)),!yt.isNativePlatform()&&(e.type==="chat"||e.type==="task")&&await this.sendBackgroundNotification(e)}catch(n){console.error("Failed to send notification:",n)}}async scheduleNotification(e,n){return await dk.scheduleNotification({...e,scheduledTime:n})}async sendCapacitorNotification(e){try{await Ol.scheduleNotification({id:Date.now(),title:e.title,body:e.body,sound:"default",channelId:"app_main_channel",extra:{...e.data,type:e.type},schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0}})}catch(n){throw console.error("Failed to send Capacitor notification:",n),n}}async sendWebNotification(e){try{if("Notification"in window){if(Notification.permission==="default"&&await Notification.requestPermission()!=="granted"){console.warn("Web notification permission denied");return}Notification.permission==="granted"&&new Notification(e.title,{body:e.body,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:`${e.type}-${Date.now()}`,data:{...e.data,type:e.type},requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,vibrate:[200,100,200]})}}catch(n){throw console.error("Failed to send web notification:",n),n}}async sendBackgroundNotification(e){e.scheduledTime&&await this.scheduleNotification(e,e.scheduledTime)}async sendChatNotification(e,n,r,i){return this.sendNotification({title:`New message from ${n}`,body:r.length>100?`${r.substring(0,100)}...`:r,type:"chat",data:{senderId:e,chatId:i,messagePreview:r.substring(0,50)},requireInteraction:!1})}async sendTaskAssignmentNotification(e,n,r){return this.sendNotification({title:"New Task Assignment",body:`${n} assigned you "${e}"`,type:"assignment",data:{taskId:r,assignerName:n,taskTitle:e},requireInteraction:!0})}async sendCommentNotification(e,n,r,i){return this.sendNotification({title:`New comment on "${e}"`,body:`${n}: ${r.length>80?`${r.substring(0,80)}...`:r}`,type:"comment",data:{taskId:i,commenterName:n,commentPreview:r.substring(0,50)}})}async sendPomodoroNotification(e,n){const r=e==="work_complete";return this.sendNotification({title:r?"Work Session Complete!":"Break Time Over!",body:r?`Great focus! Time for a break. Session ${n||1} completed.`:"Ready to get back to work? Your break is over.",type:"pomodoro",data:{pomodoroType:e,sessionCount:n},requireInteraction:!0})}};It(Ul,"instance");let hk=Ul;const fk=hk.getInstance();function dMe(){const{user:t}=Nn(),[e,n]=g.useState(new Set),[r,i]=g.useState([]);return g.useEffect(()=>{(async()=>{if(!yt.isNativePlatform()||!t)return;if((await jt.checkPermissions()).display!=="granted"){console.log("Notification permission not granted, skipping team invite check.");return}const a=r.filter(l=>{const u=l.inviteeId===t.uid,d=l.status==="pending",h=l.createdAt&&Date.now()-new Date(l.createdAt).getTime()<3e5,m=!e.has(l.id);return u&&d&&h&&m});if(a.length===0)return;console.log(`Found ${a.length} new team invite(s) to notify about.`);const c=a.map(l=>({id:Math.floor(Math.random()*1e6),title:"New Team Invitation",body:`${l.inviterName} invited you to join "${l.teamName}"`,schedule:{at:new Date(Date.now()+1e3),allowWhileIdle:!0},channelId:"app_main_channel",extra:{type:"team_invite",inviteId:l.id,teamName:l.teamName,inviterId:l.inviterId}}));try{await jt.schedule({notifications:c}),n(l=>{const u=new Set(l);return a.forEach(d=>u.add(d.id)),u})}catch(l){console.error("Failed to schedule team invite notifications:",l)}})()},[r,t,e]),g.useEffect(()=>{},[t]),null}const EY=g.createContext(null);function hMe({children:t}){const{user:e,userProfile:n}=Nn(),r=uy(),[i,s]=g.useState({}),[o,a]=g.useState({}),[c,l]=g.useState({}),[u,d]=g.useState({}),h=async(y,w)=>{if(!e||!w.trim())return;const C=new Date().toISOString();try{const b=hr(Re,"taskComments",y.id,"comments");if(await Cf(b,{taskId:y.id,userId:e.uid,userDisplayName:e.displayName||e.email,userPhotoURL:e.photoURL,content:w.trim(),createdAt:C,isEdited:!1}),await r.updateTaskLastCommentedAt(y.id,C),y.teamId&&n){const{logActivity:k}=await Ft(async()=>{const{logActivity:D}=await import("./activityLogger-DMPUNEvH.js");return{logActivity:D}},[]);k(y.teamId,"COMMENT_ADDED",{uid:e.uid,displayName:n.displayName||e.email,photoURL:n.photoURL},{task:{id:y.id,title:y.title},comment:{contentPreview:w.trim().substring(0,100)}})}await fk.sendCommentNotification(y.title,e.displayName||e.email||"Anonymous",w.trim(),y.id),Sr.success("Comment added successfully")}catch(b){console.error("Error adding comment:",b),Sr.error("Failed to add comment")}},m=async(y,w,C)=>{if(!(!e||!C.trim()))try{const b=Ke(Re,"taskComments",w,"comments",y);await Vn(b,{content:C.trim(),updatedAt:new Date().toISOString(),isEdited:!0}),await r.updateTaskLastCommentedAt(w,new Date().toISOString()),Sr.success("Comment updated successfully")}catch(b){console.error("Error updating comment:",b),Sr.error("Failed to update comment")}},_=async(y,w)=>{if(e)try{const C=Ke(Re,"taskComments",w,"comments",y);await Ro(C),await r.updateTaskLastCommentedAt(w,new Date().toISOString()),Sr.success("Comment deleted successfully")}catch(C){console.error("Error deleting comment:",C),Sr.error("Failed to delete comment")}},v=y=>{if(!y||u[y])return null;l(k=>({...k,[y]:!0}));const w=hr(Re,"taskComments",y,"comments"),C=Ta(w,Dh("createdAt","desc"),ume(50)),b=Co(C,k=>{const D=k.docs.map(A=>({id:A.id,...A.data()}));s(A=>({...A,[y]:D})),a(A=>({...A,[y]:D.length})),l(A=>({...A,[y]:!1})),k.docChanges().forEach(A=>{if(A.type==="added"||A.type==="modified"){const S=A.doc.data();S.userId!==(e==null?void 0:e.uid)&&r.updateTaskLastCommentedAt(y,S.createdAt)}})},k=>{console.error("Error fetching comments:",k),l(D=>({...D,[y]:!1}))});return d(k=>({...k,[y]:b})),b},T=y=>{u[y]&&(u[y](),d(w=>{const C={...w};return delete C[y],C}))};return p.jsx(EY.Provider,{value:{comments:i,commentCounts:o,loading:c,addComment:h,updateComment:m,deleteComment:_,subscribeToTaskComments:v,unsubscribeFromTaskComments:T},children:t})}function _De(){const t=g.useContext(EY);if(!t)throw new Error("useComments must be used within a CommentsContextProvider");return t}const bv=zu("VoiceRecorder",{web:()=>Ft(()=>import("./web-B3yy9fxm.js"),__vite__mapDeps([0,1])).then(t=>new t.VoiceRecorderWeb)}),fMe=t=>Sr.loading(t),MU=t=>{Sr.dismiss(t)},pMe=(t,e)=>{const n=atob(t),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Uint8Array(r);return new Blob([i],{type:e})},SY=g.createContext(void 0);function mMe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!1),[s,o]=g.useState(!1),[a,c]=g.useState(0),[l,u]=g.useState(null),[d,h]=g.useState(0),[m,_]=g.useState(null),{user:v}=Nn(),{toast:T}=Pa(),y=Z.useRef(null),[w,C]=g.useState(0),b=g.useRef(null),k=g.useRef(null),D=g.useRef();g.useEffect(()=>{if(!v){n([]);return}i(!0);const U=Ta(hr(Re,"meetingRecordings"),Yp("createdBy","==",v.uid),Dh("createdAt","desc")),q=Co(U,F=>{const V=F.docs.map(X=>({id:X.id,...X.data()}));n(V),i(!1)},F=>{console.error("Error fetching recordings:",F),T({title:"Connection error",description:"Failed to load recordings.",variant:"destructive"}),i(!1)});return()=>q()},[v,T]),g.useEffect(()=>{let U;return s&&(U=setInterval(()=>{c(q=>q+1)},1e3)),()=>clearInterval(U)},[s]);const A=U=>{try{const q=new window.AudioContext,F=q.createAnalyser(),V=q.createMediaStreamSource(U);F.fftSize=256,V.connect(F),b.current=q,k.current=F,S()}catch(q){console.warn("Could not set up audio analyser:",q)}},S=()=>{if(yt.isNativePlatform()){const U=async()=>{if(!s){C(0);return}try{const{value:q}=await bv.getCurrentStatus();q!=null&&q.level&&C(q.level)}catch{}D.current=requestAnimationFrame(U)};U()}else{if(!k.current)return;const U=new Uint8Array(k.current.frequencyBinCount),q=()=>{if(!k.current||!s){C(0);return}k.current.getByteFrequencyData(U);const F=U.reduce((V,X)=>V+X,0)/U.length;C(Math.min(100,F/255*100)),D.current=requestAnimationFrame(q)};q()}},x=async()=>{if(!v)throw new Error("Authentication required.");if(m&&_(null),yt.isNativePlatform())try{if(!(await bv.requestAudioRecordingPermission()).value)throw new Error("Microphone permission was denied.");await bv.startRecording(),o(!0),h(Date.now()),c(0),S(),T({title:"Recording started 🎙️",description:"Recording will continue in the background."})}catch(U){throw console.error("Native recording failed to start:",U),new Error("Could not start native recorder. Check microphone permissions.")}else{let U=null;try{U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0}}),y.current=U;const q=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",F=new MediaRecorder(U,{mimeType:q}),V=[];F.ondataavailable=X=>{X.data.size>0&&V.push(X.data)},F.onstop=()=>{const X=new Blob(V,{type:q});_(X),U==null||U.getTracks().forEach(ge=>ge.stop()),y.current=null},F.start(),u(F),o(!0),h(Date.now()),c(0),A(U),T({title:"Recording Started 🎙️",description:"Capturing microphone audio."})}catch(q){throw U==null||U.getTracks().forEach(F=>F.stop()),console.error("Web recording failed:",q),q}}},N=async()=>{if(s){if(yt.isNativePlatform())try{const U=await bv.stopRecording();if(U.value&&U.value.recordDataBase64){const q=pMe(U.value.recordDataBase64,U.value.mimeType);_(q),c(Math.round(U.value.duration/1e3))}else throw new Error("No recording data returned.")}catch(U){console.error("Error stopping native recording:",U),T({title:"Error saving recording",variant:"destructive"})}else l&&(l.stop(),u(null));D.current&&cancelAnimationFrame(D.current),b.current&&(b.current.close(),b.current=null),C(0),o(!1),T({title:"Recording stopped ⏹️",description:"Ready to save your recording"})}},R=g.useCallback(()=>_(null),[]),K={recordings:e,loading:r,isRecording:s,recordingDuration:a,recordedAudio:m,startRecording:x,stopRecording:N,deleteRecording:async U=>{if(v)try{const q=e.find(F=>F.id===U);if(!q)return;await Ro(Ke(Re,"meetingRecordings",U));try{const F=lb(gb,q.audioUrl);await NCe(F)}catch(F){F.code!=="storage/object-not-found"&&console.warn("Could not delete audio file:",F)}T({title:"Recording deleted",variant:"destructive"})}catch(q){console.error("Error deleting recording:",q),T({title:"Delete failed",variant:"destructive"})}},uploadRecording:async(U,q,F)=>{if(!v)return;const V=new Date().toISOString(),X=await Cf(hr(Re,"meetingRecordings"),{title:q,audioUrl:"",duration:F,status:"uploading",createdAt:V,createdBy:v.uid,fileSize:U.size}),ge=X.id;try{const pe=`meetly-audio/${v.uid}/${V}-${q.replace(/[^a-zA-Z0-9]/g,"_")}.webm`,B=lb(gb,pe),Y=await kCe(B,U,{customMetadata:{firestoreId:ge}}),W=await PCe(Y.ref);await Vn(X,{audioUrl:W,filePath:pe,status:"processing"}),R(),T({title:"Recording uploaded! 📤",description:"Your recording is being processed."})}catch(pe){console.error("Error uploading recording:",pe),await Ro(Ke(Re,"meetingRecordings",ge)),T({title:"Upload failed",variant:"destructive"})}},clearRecordedAudio:R,retryProcessing:async U=>{const q=fMe("Retrying processing...");try{const F=e.find(pe=>pe.id===U);if(!F||!F.filePath)throw new Error("File path not found.");n(pe=>pe.map(B=>B.id===U?{...B,status:"processing",error:void 0}:B));const V=Ke(Re,"meetingRecordings",U);await Vn(V,{status:"processing",error:xl()});const X=lb(gb,F.filePath),ge=await xCe(X);await RCe(X,{customMetadata:{...ge.customMetadata,retry_timestamp:new Date().toISOString()}}),MU(q),T({title:"Reprocessing Started",description:"The AI is analyzing your recording again."})}catch(F){MU(q),console.error("Error retrying processing:",F);const V=e.find(X=>X.id===U);n(X=>X.map(ge=>ge.id===U?{...V,status:"failed",error:F.message}:ge)),T({title:"Retry Failed",description:F.message,variant:"destructive"})}},audioLevel:w};return p.jsx(SY.Provider,{value:K,children:t})}function TDe(){const t=g.useContext(SY);if(t===void 0)throw new Error("useMeetly must be used within a MeetlyContextProvider");return t}const bY=g.createContext(void 0);function gMe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!0),{user:s,userProfile:o}=Nn(),{toast:a}=Pa();g.useEffect(()=>{if(!s||!(o!=null&&o.teamId)){n([]),i(!1);return}i(!0);const _=Ta(hr(Re,"teams",o.teamId,"opportunities"),Dh("createdAt","desc")),v=Co(_,T=>{const y=T.docs.map(w=>({id:w.id,...w.data()}));n(y),i(!1)},T=>{console.error("Error fetching opportunities:",T),a({title:"Error",description:"Could not load sales opportunities.",variant:"destructive"}),i(!1)});return()=>v()},[s,o==null?void 0:o.teamId,a]);const m={opportunities:e,loading:r,addOpportunity:async _=>{if(!(!s||!(o!=null&&o.teamId)))try{const v={..._,teamId:o.teamId,createdBy:s.uid,createdAt:new Date().toISOString(),notes:[]};await Cf(hr(Re,"teams",o.teamId,"opportunities"),v),a({title:"Opportunity created!"})}catch(v){console.error("Error adding opportunity:",v),a({title:"Error",description:"Could not create opportunity.",variant:"destructive"})}},updateOpportunity:async(_,v)=>{if(!s||!(o!=null&&o.teamId))return;const T=e,y=T.find(b=>b.id===_);if(!y)return;const w={...y,...v},C=T.map(b=>b.id===_?w:b);n(C);try{const b=Ke(Re,"teams",o.teamId,"opportunities",_);await Vn(b,v)}catch(b){console.error("Error updating opportunity:",b),a({title:"Update Failed",description:"Could not save changes. Reverting.",variant:"destructive"}),n(T)}},deleteOpportunity:async _=>{if(!(!s||!(o!=null&&o.teamId)))try{const v=Ke(Re,"teams",o.teamId,"opportunities",_);await Ro(v),a({title:"Opportunity deleted",variant:"destructive"})}catch(v){console.error("Error deleting opportunity:",v),a({title:"Error",description:"Could not delete opportunity.",variant:"destructive"})}},addNoteToOpportunity:async(_,v)=>{if(!s||!(o!=null&&o.teamId)||!v.trim())return;const T={id:`note-${Date.now()}`,content:v.trim(),authorId:s.uid,authorName:o.displayName||s.email||"Unknown User",createdAt:new Date().toISOString()};try{const y=Ke(Re,"teams",o.teamId,"opportunities",_);await Vn(y,{notes:Yz(T)})}catch(y){console.error("Error adding note:",y),a({title:"Error",description:"Could not add note.",variant:"destructive"})}},addOpportunitiesFromContacts:async _=>{if(!(!s||!(o!=null&&o.teamId)||_.length===0))try{const v=hr(Re,"teams",o.teamId,"opportunities"),w=(await XA(v)).docs.map(D=>D.data()).filter(D=>D.stage!=="Closed Won"&&D.stage!=="Closed Lost"),C=new Set(w.map(D=>D.contact)),b=_.filter(D=>!C.has(D.name));if(b.length===0){console.log("No new interested contacts to add as opportunities.");return}const k=A_(Re);b.forEach(D=>{const A=Ke(v),S=[...D.callHistory].sort((R,O)=>new Date(O.timestamp).getTime()-new Date(R.timestamp).getTime()).find(R=>R.spokenToName&&R.spokenToName.trim()!==""),x=(S==null?void 0:S.spokenToName)||D.name,N={title:D.name,contact:x,phone:D.phone,value:0,closeDate:new Date().toISOString(),stage:"Interested Lead",teamId:o.teamId,createdBy:s.uid,createdAt:new Date().toISOString(),notes:[]};k.set(A,N)}),await k.commit(),a({title:"Leads Synced",description:`${b.length} new 'Interested' contact(s) were added to your pipeline.`})}catch(v){console.error("Error adding opportunities from contacts:",v),a({title:"Error",description:"Could not auto-import new leads.",variant:"destructive"})}}};return p.jsx(bY.Provider,{value:m,children:t})}function CDe(){const t=g.useContext(bY);if(t===void 0)throw new Error("useSalesOpportunity must be used within a SalesOpportunityProvider");return t}const IY=g.createContext(void 0);function yMe({children:t}){const[e,n]=g.useState([]),[r,i]=g.useState(!0),{user:s}=Nn(),{toast:o}=Pa();g.useEffect(()=>{if(!s){n([]),i(!1);return}i(!0);const c=Qo(Yo,"contacts"),l=dg(c,u=>{try{const d=u.val();if(d){const h=Object.entries(d).map(([m,_])=>{const v=_.callHistory?Object.entries(_.callHistory).map(([b,k])=>({...k,originalIndex:b,duration:Number(k.duration)||0})).filter(b=>b.timestamp&&typeof b.timestamp=="string"&&!isNaN(new Date(b.timestamp).getTime())):[];if(v.length===0)return{id:m,name:_.name||"N/A",phone:_.phoneNumber||m,status:"No History",lastContacted:new Date().toISOString(),callCount:_.callCount||0,callHistory:[]};const T=v.sort((b,k)=>new Date(k.timestamp).getTime()-new Date(b.timestamp).getTime()),y=T.length-1,w=T.map((b,k)=>({...b,type:k===y?"New Call":"Follow-up"})),C=w[0];return{id:m,name:_.name||"N/A",phone:_.phoneNumber||m,status:(C==null?void 0:C.feedback)||"No History",lastContacted:(C==null?void 0:C.timestamp)||new Date().toISOString(),callCount:_.callCount||0,callHistory:w}});h.sort((m,_)=>new Date(_.lastContacted).getTime()-new Date(m.lastContacted).getTime()),n(h)}else n([])}catch(d){console.error("Error transforming contact data:",d),o({title:"Error",description:"Failed to process contact data.",variant:"destructive"})}finally{i(!1)}},u=>{console.error("Firebase read error:",u),o({title:"Error",description:"Failed to fetch contacts from Firebase.",variant:"destructive"})});return()=>l()},[s,o]);const a={contacts:e,loading:r};return p.jsx(IY.Provider,{value:a,children:t})}function EDe(){const t=g.useContext(IY);if(t===void 0)throw new Error("useContacts must be used within a ContactsProvider");return t}const DU=async()=>{yt.getPlatform()==="android"&&(await jt.createChannel({id:"app_main_channel",name:"Primary Notifications",description:"General app notifications and reminders",importance:4,vibration:!0,visibility:1}),console.log('Android notification channel "app_main_channel" created or already exists.'))},vMe=g.lazy(()=>Ft(()=>import("./SalesTrackerPage-DeN-CvMf.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),wMe=g.lazy(()=>Ft(()=>import("./SalesOpportunityPage-CsePxtTG.js"),__vite__mapDeps([20,9,11,12,13,5,4,14,21,17,22,7,23,24,8]))),_Me=g.lazy(()=>Ft(()=>import("./SalesToolsPage-BM2r7C7o.js"),__vite__mapDeps([25,3,16]))),TMe=g.lazy(()=>Ft(()=>import("./TasksPage-DrgM9B_e.js"),__vite__mapDeps([26,18,22,9,7,24,13,5,8,21,27,28,23,17,14,4]))),CMe=g.lazy(()=>Ft(()=>import("./DashboardPage-Bh30giWc.js"),__vite__mapDeps([29,27,7,21,24,13,5,30,17,6,8,23,12,31,32]))),EMe=g.lazy(()=>Ft(()=>import("./TeamChatPage-17T-zk3Y.js"),__vite__mapDeps([33,7,28,16,8,14,34,35]))),SMe=g.lazy(()=>Ft(()=>import("./MeetlyPage-DN5DUI0G.js"),__vite__mapDeps([36,19,37,16,4,5,35,17]))),bMe=g.lazy(()=>Ft(()=>import("./TimerPage-DJMa2-l1.js"),__vite__mapDeps([38,32,6]))),IMe=g.lazy(()=>Ft(()=>import("./CalendarPage-CYmE7YMJ.js"),__vite__mapDeps([39,11,12,13,5,4,14,7,21,40]))),AMe=g.lazy(()=>Ft(()=>import("./NotesPage-BZkhNR7A.js"),__vite__mapDeps([41,7,42,18,16,10,40]))),kMe=g.lazy(()=>Ft(()=>import("./AnalyticsPage-Cy2MTKj6.js").then(t=>t.A),__vite__mapDeps([43,11,12,13,5,4,14,15,30,17,16,32,23,6]))),xMe=g.lazy(()=>Ft(()=>import("./ChatPage-D4WSzakF.js"),__vite__mapDeps([44,11,12,13,5,4,14,1,19,37,34]))),RMe=g.lazy(()=>Ft(()=>import("./ProfilePage-EI2es03B.js"),__vite__mapDeps([45,15,21,31]))),PMe=g.lazy(()=>Ft(()=>import("./NotFound-MlSDQRuu.js"),[])),NMe=new uue({defaultOptions:{queries:{retry:3,staleTime:5*60*1e3}}});function OMe(){const{addNotification:t}=t1();return g.useEffect(()=>(kV(t),()=>kV(null)),[t]),null}const MMe=async(t,e)=>{if(!t||!e){console.error("updateUserFCMToken failed: userId or token is missing.");return}try{console.log(`Attempting to save FCM token for user ${t}...`);const n=Ke(Re,"users",t);await Vn(n,{fcmToken:e,lastUpdated:I_()}),console.log("SUCCESSFULLY saved FCM token to Firestore.")}catch(n){console.error("CRITICAL ERROR saving FCM token to Firestore:",n)}};function DMe(){const{user:t}=Nn(),e=Bu(),[n,r]=g.useState(null);g.useEffect(()=>{t&&n&&(console.log("User and FCM token are both available. Saving to Firestore."),MMe(t.uid,n.value))},[t,n]),g.useEffect(()=>{(async()=>{yt.isNativePlatform()?await i():await s()})()},[e]);const i=async()=>{try{DU();const o=[];return await $i.requestPermissions(),await $i.register(),o.push(await $i.addListener("registration",a=>{console.log("Push registration success. Received token."),r(a)})),o.push(await $i.addListener("registrationError",a=>{console.error("Push registration FAILED:",a)})),o.push(await $i.addListener("pushNotificationReceived",a=>{var u,d,h,m,_,v;console.log("SILENT/DATA-ONLY Push received:",a),((u=a.data)==null?void 0:u.type)==="chat_message"&&console.log("Chat message push data:",a.data);let c=((d=a.data)==null?void 0:d.title)||"New Notification",l=((h=a.data)==null?void 0:h.body)||"Check the app for details.";if(((m=a.data)==null?void 0:m.type)==="chat_message"){const T=((_=a.data)==null?void 0:_.senderName)||"Someone",y=((v=a.data)==null?void 0:v.message)||"New chat message.";c=`New message from ${T}`,l=y,console.log(`Constructed local notification: Title='${c}', Body='${l}'`)}jt.schedule({notifications:[{id:lk(),title:c,body:l,schedule:{at:new Date,allowWhileIdle:!0},channelId:"app_main_channel",extra:a.data}]})})),o.push(await $i.addListener("pushNotificationActionPerformed",a=>{var l;console.log("Push notification action performed:",a);const c=(l=a.notification.data)==null?void 0:l.taskId;c&&e(`/tasks?taskId=${c}`)})),o.push(await jt.addListener("localNotificationActionPerformed",a=>{console.log("Local notification action performed:",a);const c=a.notification.extra;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"?e("/team-chat"):(c==null?void 0:c.type)==="team_invite"&&e("/dashboard")})),()=>{console.log("Removing all push notification listeners..."),o.forEach(a=>{try{a.remove()}catch(c){console.warn("Failed to remove listener handle:",c)}})}}catch(o){console.error("Failed to setup native notifications:",o)}},s=async()=>{try{if(await fk.init(),"Notification"in window&&Notification.permission==="default"){const o=await Notification.requestPermission();console.log("Web notification permission:",o)}"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o=>{if(o.data.type==="NOTIFICATION_ACTION"){const{action:a,notificationData:c}=o.data;c!=null&&c.taskId?e("/tasks"):(c==null?void 0:c.type)==="chat_message"&&e("/team-chat")}})}catch(o){console.error("Failed to setup web notifications:",o)}};return g.useEffect(()=>{if(!yt.isNativePlatform())return;DU();const o=[];return(async()=>{try{await $i.requestPermissions(),await $i.register(),o.push(await $i.addListener("registration",c=>{console.log("Push registration success. Received token."),r(c)})),o.push(await $i.addListener("registrationError",c=>{console.error("Push registration FAILED:",c)})),o.push(await $i.addListener("pushNotificationReceived",c=>{var d,h;console.log("SILENT/DATA-ONLY Push received:",c);const l=((d=c.data)==null?void 0:d.title)||"New Notification",u=((h=c.data)==null?void 0:h.body)||"Check the app for details.";jt.schedule({notifications:[{id:lk(),title:l,body:u,schedule:{at:new Date(Date.now()+100),allowWhileIdle:!0},channelId:"app_main_channel",extra:c.data}]})})),o.push(await $i.addListener("pushNotificationActionPerformed",c=>{var u;console.log("Push notification action performed:",c);const l=(u=c.notification.data)==null?void 0:u.taskId;l&&e(`/tasks?taskId=${l}`)})),o.push(await jt.addListener("localNotificationActionPerformed",c=>{console.log("Local notification action performed:",c);const l=c.notification.extra;l!=null&&l.taskId?e("/tasks"):(l==null?void 0:l.type)==="chat_message"?e("/chat"):(l==null?void 0:l.type)==="team_invite"&&e("/dashboard")}))}catch(c){console.error("Failed to setup push notifications:",c)}})(),fk.init(),()=>{console.log("Removing all push notification listeners..."),o.forEach(c=>{try{c.remove()}catch(l){console.warn("Failed to remove listener handle:",l)}})}},[e]),p.jsxs(p.Fragment,{children:[p.jsx(OMe,{}),p.jsx(sMe,{}),p.jsx(aMe,{}),p.jsx(dMe,{}),p.jsxs(pD,{children:[p.jsx(qn,{path:"/signin",element:p.jsx(tMe,{})}),p.jsx(qn,{path:"/signup",element:p.jsx(rMe,{})}),p.jsx(qn,{path:"/*",element:p.jsx(iMe,{children:p.jsx(OQ,{children:p.jsx(P1e,{children:p.jsx(g.Suspense,{fallback:p.jsx(MQ,{}),children:p.jsxs(pD,{children:[p.jsx(qn,{path:"/",element:p.jsx(CMe,{})}),p.jsx(qn,{path:"/tasks",element:p.jsx(TMe,{})}),p.jsx(qn,{path:"/team-chat",element:p.jsx(EMe,{})}),p.jsx(qn,{path:"/meetly",element:p.jsx(SMe,{})}),p.jsx(qn,{path:"/sales-tracker",element:p.jsx(Wb,{children:p.jsx(vMe,{})})}),p.jsx(qn,{path:"/sales-opportunity",element:p.jsx(Wb,{children:p.jsx(wMe,{})})}),p.jsx(qn,{path:"/sales-tools",element:p.jsx(Wb,{children:p.jsx(_Me,{})})}),p.jsx(qn,{path:"/timer",element:p.jsx(bMe,{})}),p.jsx(qn,{path:"/calendar",element:p.jsx(IMe,{})}),p.jsx(qn,{path:"/notes",element:p.jsx(AMe,{})}),p.jsx(qn,{path:"/analytics",element:p.jsx(kMe,{})}),p.jsx(qn,{path:"/chat",element:p.jsx(xMe,{})}),p.jsx(qn,{path:"/profile",element:p.jsx(RMe,{})}),p.jsx(qn,{path:"*",element:p.jsx(PMe,{})})]})})})})})})]})]})}function LMe(){return g.useEffect(()=>{mie()},[]),p.jsx(OQ,{children:p.jsx(hue,{client:NMe,children:p.jsx(Tae,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:p.jsxs(_A,{children:[p.jsx(yae,{}),p.jsx(Zae,{position:"top-center"}),p.jsx(Ibe,{children:p.jsx(zbe,{children:p.jsx(Pbe,{children:p.jsx(Jbe,{children:p.jsx(lq,{children:p.jsx(hMe,{children:p.jsx(QNe,{children:p.jsx(mMe,{children:p.jsx(gMe,{children:p.jsx(yMe,{children:p.jsx(yee,{children:p.jsx(DMe,{})})})})})})})})})})})})]})})})})}const FMe=yt.isNativePlatform();ux(document.getElementById("root")).render(p.jsx(LMe,{}));const VMe=t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Reload?")&&e.postMessage({type:"SKIP_WAITING"})})}},jMe=async()=>{FMe||"serviceWorker"in navigator&&(window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js");VMe(t),navigator.serviceWorker.oncontrollerchange=()=>{window.location.reload()};const[e,n,r]=await Promise.all([Ft(()=>Promise.resolve().then(()=>l1e),void 0),Ft(()=>Promise.resolve().then(()=>Abe),void 0),Ft(()=>Promise.resolve().then(()=>uMe),void 0)]);await e.offlineSync.init(),navigator.serviceWorker.addEventListener("message",i=>{i.data.type==="NOTIFICATION_ACTION"&&window.dispatchEvent(new CustomEvent("notification-action",{detail:{action:i.data.action,data:i.data.notificationData}}))})}catch(t){console.log("SW registration failed: ",t)}}),["click","keydown","scroll","touchstart"].forEach(t=>{document.addEventListener(t,()=>{},{passive:!0})}))};jMe();export{AQ as $,uE as A,Ue as B,AR as C,ue as D,m1 as E,f8 as F,_Q as G,TQ as H,wQ as I,RE as J,PE as K,mo as L,kR as M,NE as N,xE as O,xR as P,Xi as Q,Z as R,foe as S,JOe as T,u5 as U,Rf as V,w1e as W,ul as X,SQ as Y,bQ as Z,IQ as _,sq as a,Mg as a$,CDe as a0,s8 as a1,aoe as a2,Pse as a3,RR as a4,T1e as a5,JNe as a6,Nn as a7,Pa as a8,wse as a9,pDe as aA,k0e as aB,x0e as aC,PG as aD,ow as aE,Poe as aF,Sr as aG,tDe as aH,dbe as aI,Ybe as aJ,_De as aK,dE as aL,uy as aM,K7 as aN,tQ as aO,c5 as aP,l5 as aQ,xV as aR,n5 as aS,rDe as aT,r_ as aU,i_ as aV,CQ as aW,Wbe as aX,Q7 as aY,nQ as aZ,Eu as a_,Qo as aa,Yo as ab,Z_e as ac,eTe as ad,EDe as ae,mDe as af,dg as ag,Xbe as ah,a5 as ai,uA as aj,g0 as ak,dL as al,e5 as am,Cg as an,bg as ao,oa as ap,co as aq,lo as ar,uo as as,ho as at,Eg as au,_y as av,vDe as aw,yDe as ax,wDe as ay,sa as az,Gbe as b,s5 as b$,hDe as b0,Et as b1,fDe as b2,Gr as b3,Se as b4,Sie as b5,kbe as b6,Ebe as b7,Sbe as b8,bbe as b9,YAe as bA,ZAe as bB,XAe as bC,JAe as bD,e0e as bE,t0e as bF,n0e as bG,r0e as bH,i0e as bI,s0e as bJ,o0e as bK,a0e as bL,Na as bM,CR as bN,fE as bO,G0e as bP,O5 as bQ,lke as bR,Bu as bS,lE as bT,oE as bU,GW as bV,v0 as bW,QW as bX,y0 as bY,JH as bZ,r5 as b_,_A as ba,RL as bb,PL as bc,TA as bd,Ta as be,ume as bf,Dh as bg,hr as bh,Co as bi,fk as bj,Ke as bk,Re as bl,Vn as bm,eDe as bn,Yz as bo,iC as bp,go as bq,Fe as br,tC as bs,lDe as bt,cDe as bu,jq as bv,wn as bw,qAe as bx,GAe as by,QAe as bz,$e as c,zu as c$,yTe as c0,ng as c1,I_ as c2,Ys as c3,lb as c4,gb as c5,kCe as c6,PCe as c7,xse as c8,Sse as c9,iDe as cA,sDe as cB,_ae as cC,lA as cD,_ie as cE,gDe as cF,pf as cG,BR as cH,gi as cI,Wie as cJ,lC as cK,Fg as cL,o1 as cM,s1 as cN,yE as cO,Cu as cP,pE as cQ,uf as cR,HR as cS,zR as cT,No as cU,GR as cV,Go as cW,E9 as cX,Qs as cY,sye as cZ,sE as c_,i7 as ca,tRe as cb,pke as cc,E1 as cd,fRe as ce,mke as cf,p8 as cg,TDe as ch,yt as ci,Fse as cj,fA as ck,moe as cl,uoe as cm,pL as cn,uL as co,Moe as cp,zMe as cq,wk as cr,Ft as cs,Yp as ct,Cf as cu,Ro as cv,NCe as cw,$Me as cx,WU as cy,nDe as cz,aDe as d,r6 as d0,QMe as d1,Kbe as e,sT as f,CY as g,ak as h,ck as i,p as j,Po as k,nl as l,oDe as m,rl as n,Aa as o,Coe as p,hE as q,g as r,cm as s,cE as t,ZH as u,i8 as v,pi as w,oY as x,HG as y,zG as z};
