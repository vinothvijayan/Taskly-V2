import{r as u,j as e,D as B,ar as Z,as as _,at as $,au as U,X as z,v as K,w as I,x as q,m as N,q as v,av as ee,aw as se,F as te,ax as ae,u as ie,ay as y,C as A,S as M,I as re,t as le}from"./index-BOMCLsi_.js";import{M as L,T as O,a as ne}from"./TaskForm-DsTePK1p.js";import{u as H}from"./useTouchGestures-BNpwY5ui.js";import{T as oe}from"./textarea-iMbD7bqt.js";import{P as E}from"./plus-jVcLPC9x.js";import{S as de}from"./send-5-KT-IdZ.js";import{m as Q,T as ce}from"./skeletons-OrUvxu0E.js";import"./DeleteConfirmationDialog-ZXLq3vwY.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./index-DvSqf5q0.js";import"./checkbox-pEVMzDLQ.js";import"./index-CqAVEad7.js";import"./select-QNqOlXgW.js";import"./chevron-down-QVhbesXr.js";function me({open:r,onOpenChange:l,onCreateTask:a}){const[i,o]=u.useState(""),{notification:g}=H(),c=()=>{i.trim()&&(a==null||a({title:i.trim()}),l(!1),o(""),g("success"))},j=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),c())};return e.jsx(B,{open:r,onOpenChange:l,children:e.jsxs(Z,{children:[e.jsx(_,{className:`
            fixed inset-0 z-50 bg-black/50
            data-[state=open]:animate-in data-[state=closed]:animate-out
            data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0
          `}),e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center p-4",children:e.jsxs($,{className:`
              w-full max-w-md outline-none
              rounded-2xl border border-primary/20 bg-background shadow-2xl
              p-4 sm:p-6
              max-h-[calc(100svh-2rem)] overflow-y-auto
              data-[state=open]:animate-in data-[state=closed]:animate-out
              data-[state=open]:zoom-in-95 data-[state=closed]:zoom-out-95
              data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0
            `,children:[e.jsx(U,{className:`
                absolute right-3 top-3 inline-flex h-8 w-8 items-center justify-center
                rounded-full hover:bg-muted/60 transition
              `,"aria-label":"Close",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsxs(K,{children:[e.jsxs(I,{className:"flex items-center gap-3 text-lg sm:text-xl font-bold",children:[e.jsx("div",{className:"h-9 w-9 sm:h-10 sm:w-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"h-5 w-5 text-primary"})}),"Add Quick Task"]}),e.jsx(q,{className:"text-sm sm:text-base",children:"What would you like to accomplish?"})]}),e.jsxs("div",{className:"space-y-5 pt-4",children:[e.jsx(oe,{placeholder:"Describe your task...",value:i,onChange:m=>o(m.target.value),onKeyPress:j,className:`
                  min-h-[100px] sm:min-h-[120px]
                  text-sm sm:text-base leading-relaxed
                  border-2 border-muted focus:border-primary/50
                  rounded-xl resize-none
                `,autoFocus:!0}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(N,{onClick:()=>l(!1),variant:"outline",className:"flex-1 h-11 sm:h-12 rounded-xl border-2 hover:bg-muted/60 transition",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(N,{onClick:c,disabled:!i.trim(),variant:"focus",className:"flex-1 h-11 sm:h-12 rounded-xl shadow-lg hover:shadow-xl transition",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground text-center",children:"Press Enter to create â€¢ Swipe to dismiss"})]})]})})]})})}function xe({onCreateTask:r,className:l}){const[a,i]=u.useState(!1),{impact:o}=H(),g=()=>{i(!0),o("medium")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:v("fixed bottom-6 right-6 z-50",l),children:e.jsx(N,{onClick:g,className:v("h-16 w-16 rounded-full shadow-2xl bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary","transition-all duration-300 hover:scale-110 active:scale-95 border-2 border-white/20","shadow-glow hover:shadow-xl"),children:e.jsx(E,{className:"h-7 w-7 text-white drop-shadow-sm"})})}),e.jsx(me,{open:a,onOpenChange:i,onCreateTask:r})]})}const ue={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},he={duration:.2};function fe({children:r,className:l,staggerDelay:a=.1}){return e.jsx(Q.div,{className:l,initial:"initial",animate:"animate",variants:{initial:{},animate:{transition:{staggerChildren:a}}},children:r.map((i,o)=>e.jsx(Q.div,{variants:ue,transition:he,children:i},o))})}function ze(){const{tasks:r,teamMembers:l,addTask:a,updateTask:i,deleteTask:o,toggleTaskStatus:g,toggleTaskPriority:c,setTaskFormActive:j,loading:m}=ee(),{startTaskTimer:R}=se(),{user:t,userProfile:pe}=te(),{createTaskOffline:C,updateTaskOffline:W,deleteTaskOffline:X,toggleTaskStatusOffline:G,getLocalTasks:ge}=ae(),h=ie(),[d,x]=u.useState(null),[b,F]=u.useState("");u.useEffect(()=>(j(!!d),()=>{j(!1)}),[d,j]);const{todoTasks:f,completedTasks:p}=u.useMemo(()=>({todoTasks:r.filter(s=>s.status!=="completed"),completedTasks:r.filter(s=>s.status==="completed")}),[r]),J=async s=>{!d||!(t!=null&&t.uid)||(navigator.onLine?i(d.id,s):await W(d.id,s,t.uid),x(null))},P=async()=>{if(!b.trim()||!(t!=null&&t.uid))return;const s={title:b.trim(),priority:"medium",status:"todo",createdBy:t.uid};navigator.onLine?a(s):await C(s,t.uid),F("")},w=s=>{const n=r.find(D=>D.id===s);n&&R(n)},k=async s=>{t!=null&&t.uid&&(navigator.onLine?o(s):await X(s,t.uid))},T=async s=>{t!=null&&t.uid&&(navigator.onLine?g(s):await G(s,t.uid))},V=s=>{s.key==="Enter"&&P()},S=s=>!s||s.length===0?[]:s.map(n=>l.find(D=>D.uid===n)).filter(n=>n!==void 0),Y=u.useCallback(async s=>{if(!(t!=null&&t.uid))return;const n={...s,status:"todo",createdBy:t.uid};navigator.onLine?a({...n,createdAt:new Date().toISOString()}):await C(n,t.uid)},[t==null?void 0:t.uid,a,C]);return m?e.jsx(ce,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-full flex flex-col",children:[e.jsx("div",{className:"h-full overflow-y-auto scrollbar-hide touch-pan-y",children:e.jsxs("div",{className:"container max-w-7xl mx-auto p-4 md:p-6 flex flex-col flex-1 min-h-0",children:[e.jsxs("div",{className:v("text-center space-y-2",h?"mb-4 px-2":"mb-6"),children:[e.jsx("h1",{className:v("font-bold bg-gradient-to-r from-primary to-focus bg-clip-text text-transparent",h?"text-2xl":"text-3xl md:text-4xl"),children:"My Day"}),e.jsx("p",{className:v("text-muted-foreground",h?"text-sm px-4":"text-base md:text-lg"),children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),h?e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsxs("div",{className:"space-y-4 pb-24 px-2",children:[e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-gradient-to-r from-primary/5 to-primary/10 rounded-xl border border-primary/20 mx-1",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-base font-semibold text-primary",children:"Active Tasks"}),e.jsx("div",{className:"ml-auto bg-primary text-primary-foreground px-2.5 py-1 rounded-full text-xs font-bold shadow-sm",children:f.length})]}),e.jsx("div",{className:"space-y-3",children:f.length===0?e.jsxs("div",{className:"text-center py-12 space-y-3 mx-2",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-primary/10 to-focus/10 rounded-2xl flex items-center justify-center mx-auto shadow-lg",children:e.jsx(y,{className:"h-8 w-8 text-muted-foreground/50"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No tasks yet"}),e.jsx("p",{className:"text-sm text-muted-foreground px-4",children:"Tap the + button to add your first task"})]})]}):e.jsx(fe,{children:f.map(s=>e.jsx(L,{task:s,onEdit:x,onDelete:k,onToggleStatus:T,onTogglePriority:c,onStartTimer:w,assignedProfiles:S(s.assignedTo)},s.id))})})]}),p.length>0&&e.jsxs("div",{className:"flex flex-col space-y-4 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-gradient-to-r from-success/5 to-success/10 rounded-xl border border-success/20",children:[e.jsx(A,{className:"h-5 w-5 text-success"}),e.jsx("h2",{className:"text-lg font-semibold text-success",children:"Completed"}),e.jsx("div",{className:"ml-auto bg-success text-success-foreground px-3 py-1 rounded-full text-sm font-bold shadow-sm",children:p.length})]}),e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsx(L,{task:s,onEdit:x,onDelete:k,onToggleStatus:T,onTogglePriority:c,onStartTimer:w,assignedProfiles:S(s.assignedTo)},s.id))})]})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 flex-1 min-h-0",children:[e.jsxs("div",{className:"flex flex-col space-y-4 flex-1 min-h-0 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"My Tasks"}),e.jsx("div",{className:"ml-auto bg-primary/10 text-primary px-2 py-1 rounded-full text-sm font-medium",children:f.length})]}),e.jsx(M,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"space-y-2 pr-2",children:f.length===0?e.jsxs("div",{className:"text-center py-12 space-y-3 mx-2",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-primary/10 to-focus/10 rounded-2xl flex items-center justify-center mx-auto shadow-elegant",children:e.jsx(y,{className:"h-10 w-10 text-muted-foreground/50"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No tasks yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your first task below to get started"})]})]}):f.map(s=>e.jsx(O,{task:s,onEdit:x,onDelete:k,onToggleStatus:T,onTogglePriority:c,onStartTimer:w,assignedProfiles:S(s.assignedTo)},s.id))})})]}),e.jsxs("div",{className:"flex flex-col space-y-4 flex-1 min-h-0 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(A,{className:"h-5 w-5 text-success"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Completed"}),e.jsx("div",{className:"ml-auto bg-success/10 text-success px-2 py-1 rounded-full text-sm font-medium",children:p.length})]}),e.jsx(M,{className:"flex-1 min-h-0",children:e.jsx("div",{className:"space-y-2 pr-2",children:p.length===0?e.jsxs("div",{className:"text-center py-16 space-y-4",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-success/10 to-success/20 rounded-2xl flex items-center justify-center mx-auto shadow-elegant",children:e.jsx(A,{className:"h-10 w-10 text-muted-foreground/50"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No completed tasks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed tasks will appear here"})]})]}):p.map(s=>e.jsx(O,{task:s,onEdit:x,onDelete:k,onToggleStatus:T,onTogglePriority:c,onStartTimer:w,assignedProfiles:S(s.assignedTo)},s.id))})})]})]})]})}),!h&&e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-40 w-full max-w-2xl px-6",children:e.jsxs("div",{className:"flex items-center gap-3 bg-card/90 backdrop-blur-lg rounded-xl border-2 border-primary/20 shadow-elegant shadow-glow p-4 transition-smooth ring-2 ring-primary/30 hover:ring-primary/40",children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full bg-primary/10 hover:bg-primary/20 text-primary transition-smooth hover:scale-110 shrink-0",onClick:P,children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(re,{value:b,onChange:s=>F(s.target.value),onKeyPress:V,placeholder:"Add a task",className:"border-none shadow-none focus-visible:ring-0 bg-transparent text-base placeholder:text-muted-foreground/70 flex-1 focus:placeholder:text-muted-foreground/50"}),b.trim()&&e.jsx(N,{onClick:P,variant:"focus",size:"sm",className:"hover-scale shadow-md",children:"Add"})]})}),h&&e.jsx(xe,{onCreateTask:Y})]}),e.jsx(B,{open:!!d,onOpenChange:()=>x(null),children:e.jsxs(le,{className:"sm:max-w-[500px] shadow-elegant",children:[e.jsxs(K,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),"Edit Task"]}),e.jsx(q,{children:"Make changes to your task here. Click save when you're done."})]}),d&&e.jsx(ne,{task:d,onSubmit:J,onCancel:()=>x(null),teamMembers:l})]})})]})}export{ze as default};
