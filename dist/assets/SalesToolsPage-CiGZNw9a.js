import{c as Q,ak as X,j as e,al as Y,T as Z,a as ee,b as S,d as P,r as x,e as M,f as F,g as A,h as R,n as N,I as k,B as E,L as B,_ as $,S as I,am as se,an as ae,ao as c}from"./index-Coi4WSvr.js";import{T as U,a as D,b as v,c as j,d as G,e as y,u as g,w as H}from"./xlsx-CwQVswdx.js";import{D as K}from"./download-xAN63aXp.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],te=Q("building",re),W=X(ae,"sales_tools_proxy"),le=()=>{const[i,_]=x.useState(""),[n,f]=x.useState(""),[m,w]=x.useState(""),[d,b]=x.useState([]),[a,l]=x.useState(!1),p=async(s,t)=>{var o;try{return(await W({endpoint:s,body:t})).data}catch(h){console.error(`Error calling proxy for ${s}:`,h);const u=((o=h.details)==null?void 0:o.message)||h.message||"An unknown error occurred.";throw new Error(u)}},T=async s=>{const t=await p("/api/geocode",{locationName:s});if(t.results&&t.results.length>0){const o=t.results[0].geometry.location;return`${o.lat},${o.lng}`}return null},q=async(s,t,o,h)=>{let u=[],r=null;do{const C={location:s,radius:t,type:o};h&&(C.keyword=h),r&&(C.pagetoken=r);const L=await p("/api/nearbysearch",C);L.results&&u.push(...L.results),r=L.next_page_token||null,r&&await new Promise(J=>setTimeout(J,2e3))}while(r);return u},z=async s=>(await p("/api/placedetails",{placeId:s})).result||{},O=async()=>{if(!i||!n){c.error("Location and Place Type are required.");return}l(!0),b([]);try{const s=await T(i);if(!s)throw new Error(`Could not find coordinates for location: ${i}`);const t=await q(s,1e4,n,m),o=Array.from(new Map(t.map(r=>[r.place_id,r])).values()),u=(await Promise.all(o.map(r=>z(r.place_id)))).map(r=>({name:r.name||"N/A",address:r.vicinity||"N/A",phone:r.formatted_phone_number||"N/A",website:r.website||"N/A",google_url:r.url||"N/A"}));b(u),c.success(`Found ${u.length} businesses!`)}catch(s){console.error("Error fetching business data:",s),c.error("Failed to fetch data",{description:s.message})}finally{l(!1)}},V=()=>{if(d.length===0){c.info("No data to export.");return}const s=g.json_to_sheet(d),t=g.book_new();g.book_append_sheet(t,s,"Businesses"),H(t,"google_business_export.xlsx")};return e.jsxs(M,{children:[e.jsx(F,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"})," Google Business Extractor"]})}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"location",children:"Location *"}),e.jsx(k,{id:"location",placeholder:"e.g., Chennai",value:i,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"placeType",children:"Place Type *"}),e.jsx(k,{id:"placeType",placeholder:"e.g., restaurant",value:n,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keyword",children:"Keyword (Optional)"}),e.jsx(k,{id:"keyword",placeholder:"e.g., biryani",value:m,onChange:s=>w(s.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:O,disabled:a,children:[a?e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx($,{className:"mr-2 h-4 w-4"}),a?"Searching...":"Search"]}),e.jsxs(E,{variant:"outline",onClick:V,disabled:d.length===0,children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Export to Excel"]})]}),e.jsxs(I,{className:"h-96 border rounded-md",children:[e.jsxs(U,{children:[e.jsx(D,{children:e.jsxs(v,{children:[e.jsx(j,{children:"Name"}),e.jsx(j,{children:"Phone"}),e.jsx(j,{children:"Address"}),e.jsx(j,{children:"Website"})]})}),e.jsx(G,{children:d.map((s,t)=>e.jsxs(v,{children:[e.jsx(y,{className:"font-medium",children:s.name}),e.jsx(y,{children:s.phone}),e.jsx(y,{children:s.address}),e.jsx(y,{children:e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:s.website})})]},t))})]}),d.length===0&&!a&&e.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No results to display."})]})]})]})},ne=()=>{const[i,_]=x.useState(""),[n,f]=x.useState([]),[m,w]=x.useState(!1),d=async()=>{if(!i.trim()){c.error("Please enter a website URL.");return}w(!0),f([]);try{const a=await W({endpoint:"/api/extract-emails",body:{url:i}});if(a.data.error)throw new Error(a.data.error);const l=a.data.emails||[];f(l),l.length>0?c.success(`Found ${l.length} email(s)!`):c.info("No emails found on that page.")}catch(a){console.error("Error extracting emails:",a),c.error("Extraction Failed",{description:a.message})}finally{w(!1)}},b=()=>{if(n.length===0){c.info("No emails to export.");return}const a=n.map(T=>({Email:T})),l=g.json_to_sheet(a),p=g.book_new();g.book_append_sheet(p,l,"Emails"),H(p,"extracted_emails.xlsx")};return e.jsxs(M,{children:[e.jsx(F,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"})," Email Extractor"]})}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"website-url",children:"Website URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{id:"website-url",placeholder:"e.g., example.com",value:i,onChange:a=>_(a.target.value),onKeyPress:a=>a.key==="Enter"&&d()}),e.jsxs(E,{onClick:d,disabled:m,children:[m?e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx($,{className:"mr-2 h-4 w-4"}),m?"Extracting...":"Extract"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(E,{variant:"outline",onClick:b,disabled:n.length===0,children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Export to Excel"]})}),e.jsxs(I,{className:"h-72 border rounded-md",children:[e.jsxs(U,{children:[e.jsx(D,{children:e.jsx(v,{children:e.jsx(j,{children:"Found Emails"})})}),e.jsx(G,{children:n.map((a,l)=>e.jsx(v,{children:e.jsx(y,{className:"font-medium",children:a})},l))})]}),n.length===0&&!m&&e.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No emails found yet. Enter a URL to start."})]})]})]})},de=()=>e.jsxs("div",{className:"container max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"space-y-2 mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Y,{className:"h-8 w-8 text-primary"}),"Sales Tools"]}),e.jsx("p",{className:"text-muted-foreground",children:"Powerful tools to extract business leads and contact information."})]}),e.jsxs(Z,{defaultValue:"google-business",className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-2",children:[e.jsx(S,{value:"google-business",children:"Google Business Extractor"}),e.jsx(S,{value:"email-extractor",children:"Email Extractor"})]}),e.jsx(P,{value:"google-business",className:"mt-6",children:e.jsx(le,{})}),e.jsx(P,{value:"email-extractor",className:"mt-6",children:e.jsx(ne,{})})]})]});export{de as default};
