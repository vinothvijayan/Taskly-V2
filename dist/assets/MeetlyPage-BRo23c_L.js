import{o as q,ax as de,ai as me,r as n,j as e,t as _,e as X,v as V,w as G,ay as le,x as B,B as u,H as I,a7 as Te,az as Ae,aa as ve,ab as we,D as ue,n as xe,b as he,c as pe,ag as be,I as ge,l as ae,a6 as W,J as Re,m as ee,a5 as Pe,M as ke,aA as Z,aB as $e,z as De,u as Ue,g as Le,aC as Fe,aD as ze,aE as ie,aF as re,S as fe}from"./index-C3PoaKhJ.js";import{C as Se}from"./circle-alert-BxpbF718.js";import{U as te,F as J,L as se,S as Q,a as ne}from"./upload-BZumO5AQ.js";import{m as H}from"./proxy-wG0P1ngr.js";import{D as Ce}from"./download-Sr999xeL.js";import{f as ce}from"./format-BmZa2Fkx.js";import{C as Ie}from"./checkbox-CRixpEwR.js";import{C as _e}from"./copy-DE-hpREg.js";import{P as Be}from"./plus--53mYUUG.js";import{B as je}from"./brain-BzIxTi2q.js";import{Z as qe}from"./zap-BhNFlfJH.js";import"./en-US-DSSwd-Ay.js";import"./index-Bc21jcnc.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Oe=q("clipboard-list",Ee);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ne=q("clipboard",He);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Ge=q("cloud",Ve);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],We=q("gavel",Ke);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Je=q("globe",Ze);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Ye=q("list-checks",Xe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ye=q("shield",Qe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],oe=q("volume-2",es);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ts=q("volume-x",ss);function as({className:s}){const{isRecording:T,recordingDuration:x,startRecording:v,stopRecording:w,uploadRecording:g,recordedAudio:h,clearRecordedAudio:k}=de(),{toast:f}=me(),[d,S]=n.useState(null),[N,z]=n.useState(0),[$,A]=n.useState(!1),[a,C]=n.useState(!1),[b,D]=n.useState(""),[l,o]=n.useState(!1),M=n.useRef(null),R=n.useRef(null),E=n.useRef(null),U=n.useRef();n.useEffect(()=>{t()},[]),n.useEffect(()=>()=>{M.current&&M.current.close(),U.current&&cancelAnimationFrame(U.current),E.current&&URL.revokeObjectURL(E.current.src)},[]),n.useEffect(()=>{h&&C(!0)},[h]);const t=async()=>{try{const i=await navigator.permissions.query({name:"microphone"});console.log("Microphone permission query result:",i.state),S(i.state==="granted"),i.onchange=()=>{console.log("Microphone permission state changed to:",i.state),S(i.state==="granted")}}catch(i){console.warn("Permission API not supported or error querying permission:",i),S(null)}},r=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(p=>p.stop()),S(!0),f({title:"Microphone access granted! ðŸŽ™ï¸",description:"You can now start recording meetings."}),console.log("Microphone access successfully granted via getUserMedia.")}catch(i){S(!1),f({title:"Microphone access denied",description:"Please allow microphone access to record meetings.",variant:"destructive"}),console.error("Microphone access denied via getUserMedia:",i)}},c=i=>{try{const p=new(window.AudioContext||window.webkitAudioContext),F=p.createAnalyser(),K=p.createMediaStreamSource(i);F.fftSize=256,K.connect(F),M.current=p,R.current=F,j()}catch(p){console.warn("Could not set up audio analyser:",p)}},j=()=>{if(!R.current)return;const i=new Uint8Array(R.current.frequencyBinCount),p=()=>{if(!R.current||!T)return;R.current.getByteFrequencyData(i);const F=i.reduce((K,Me)=>K+Me,0)/i.length;z(Math.min(100,F/255*100)),U.current=requestAnimationFrame(p)};p()},L=async()=>{if(d===!1&&(await r(),!d)){console.log("Permission was false, requested, but still not granted. Aborting start recording.");return}try{await v();const i=await navigator.mediaDevices.getUserMedia({audio:!0});c(i)}catch(i){console.error("Failed to start recording after permission check:",i),f({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},O=async()=>{try{await w(),U.current&&cancelAnimationFrame(U.current),M.current&&(M.current.close(),M.current=null),z(0)}catch(i){console.error("Failed to stop recording:",i)}},P=async()=>{if(!h||!b.trim()){f({title:"Missing information",description:"Please provide a meeting title.",variant:"destructive"});return}o(!0);try{await g(h,b.trim(),x),C(!1),D("")}catch(i){console.error("Upload failed:",i)}finally{o(!1)}},m=i=>{C(i),i||(k(),D(""))},y=i=>{const p=Math.floor(i/3600),F=Math.floor(i%3600/60),K=i%60;return p>0?`${p}:${F.toString().padStart(2,"0")}:${K.toString().padStart(2,"0")}`:`${F}:${K.toString().padStart(2,"0")}`},Y=()=>{if(h)if(E.current)$?(E.current.pause(),A(!1)):(E.current.play(),A(!0));else{const i=new Audio(URL.createObjectURL(h));E.current=i,i.onended=()=>A(!1),i.play(),A(!0)}};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:X("shadow-elegant",s),children:[e.jsx(V,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Audio Recorder"]})}),e.jsxs(B,{className:"space-y-6",children:[d===!1&&e.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Se,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"font-medium text-destructive",children:"Microphone Access Required"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Please allow microphone access to record meetings."}),e.jsx(u,{onClick:r,size:"sm",variant:"outline",children:"Grant Permission"})]}),e.jsxs("div",{className:"text-center space-y-4",children:[T&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(I,{variant:"destructive",className:"animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"}),"Recording"]}),e.jsx("div",{className:"text-3xl font-mono font-bold text-primary",children:y(x)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[N>10?e.jsx(oe,{className:"h-4 w-4 text-success"}):e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Audio Level"})]}),e.jsx(Te,{value:N,className:"h-2 w-32 mx-auto"})]})]}),e.jsx("div",{className:"flex justify-center",children:T?e.jsx(u,{onClick:O,size:"lg",variant:"outline",className:"rounded-full h-16 w-16 border-red-500 text-red-500 hover:bg-red-50 shadow-lg hover:shadow-xl transition-all",children:e.jsx(Ae,{className:"h-6 w-6"})}):e.jsx(u,{onClick:L,disabled:d===!1,size:"lg",className:"rounded-full h-16 w-16 bg-red-500 hover:bg-red-600 text-white shadow-lg hover:shadow-xl transition-all",children:e.jsx(le,{className:"h-6 w-6"})})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:T?e.jsx("p",{children:"Click the stop button when your meeting is finished"}):e.jsx("p",{children:"Click the microphone to start recording your meeting"})})]}),h&&!T&&e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Recording Preview"}),e.jsx(I,{variant:"secondary",children:y(x)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{onClick:Y,size:"sm",variant:"outline",className:"rounded-full",children:$?e.jsx(ve,{className:"h-4 w-4"}):e.jsx(we,{className:"h-4 w-4"})}),e.jsxs(u,{onClick:()=>C(!0),size:"sm",variant:"default",className:"flex-1",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Save Recording"]})]})]})]})]}),e.jsx(ue,{open:a,onOpenChange:m,children:e.jsxs(xe,{className:"sm:max-w-md",children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Save Meeting Recording"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{htmlFor:"meetingTitle",children:"Meeting Title *"}),e.jsx(ge,{id:"meetingTitle",value:b,onChange:i=>D(i.target.value),placeholder:"e.g., Weekly Team Standup",autoFocus:!0})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs("span",{children:["Duration: ",y(x)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Audio: ",h?Math.round(h.size/1024):0," KB"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(u,{variant:"outline",onClick:()=>m(!1),className:"flex-1",disabled:l,children:"Cancel"}),e.jsx(u,{onClick:P,disabled:!b.trim()||l,className:"flex-1",children:l?"Uploading...":"Save & Process"})]})]})]})})]})}function is({className:s}){const{uploadRecording:T}=de(),{toast:x}=me(),v=n.useRef(null),[w,g]=n.useState(null),[h,k]=n.useState(!1),[f,d]=n.useState(""),[S,N]=n.useState(!1),[z,$]=n.useState(0),A=l=>{var M;const o=(M=l.target.files)==null?void 0:M[0];if(o){if(!o.type.startsWith("audio/")){x({title:"Invalid File Type",description:"Please select an audio file.",variant:"destructive"});return}g(o),a(o),d(o.name.replace(/\.[^/.]+$/,"")),k(!0)}},a=l=>{const o=new Audio(URL.createObjectURL(l));o.onloadedmetadata=()=>{$(Math.round(o.duration)),URL.revokeObjectURL(o.src)},o.onerror=()=>{x({title:"Error Reading File",description:"Could not determine audio duration. Please check the file.",variant:"destructive"}),URL.revokeObjectURL(o.src)}},C=async()=>{if(!w||!f.trim()){x({title:"Missing information",description:"Please provide a meeting title.",variant:"destructive"});return}N(!0);try{await T(w,f.trim(),z),b(!1)}catch(l){console.error("Upload failed:",l)}finally{N(!1)}},b=l=>{k(l),l||(g(null),d(""),$(0),v.current&&(v.current.value=""))},D=l=>{if(isNaN(l)||l<0)return"0:00";const o=Math.floor(l/3600),M=Math.floor(l%3600/60),R=l%60;return o>0?`${o}:${M.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`:`${M}:${R.toString().padStart(2,"0")}`};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:X("shadow-elegant",s),children:[e.jsx(V,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Upload Recording"]})}),e.jsxs(B,{className:"text-center space-y-4",children:[e.jsx("input",{type:"file",ref:v,onChange:A,accept:"audio/*",className:"hidden"}),e.jsxs(u,{onClick:()=>{var l;return(l=v.current)==null?void 0:l.click()},variant:"outline",className:"w-full hover-scale",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Choose Audio File"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload an existing audio file to transcribe and summarize."})]})]}),e.jsx(ue,{open:h,onOpenChange:b,children:e.jsxs(xe,{className:"sm:max-w-md",children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Save Meeting Recording"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{htmlFor:"meetingTitle",children:"Meeting Title *"}),e.jsx(ge,{id:"meetingTitle",value:f,onChange:l=>d(l.target.value),placeholder:"e.g., Weekly Team Standup",autoFocus:!0})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs("span",{children:["Duration: ",D(z)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs("span",{children:["Size: ",w?(w.size/(1024*1024)).toFixed(2):0," MB"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(u,{variant:"outline",onClick:()=>b(!1),className:"flex-1",disabled:S,children:"Cancel"}),e.jsx(u,{onClick:C,disabled:!f.trim()||S,className:"flex-1",children:S?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):"Save & Process"})]})]})]})})]})}function rs({onViewRecording:s,className:T}){const{recordings:x,loading:v,deleteRecording:w}=de(),[g,h]=n.useState(""),[k,f]=n.useState(null),d=x.filter(a=>a.title.toLowerCase().includes(g.toLowerCase())),S=a=>{const C=Math.floor(a/3600),b=Math.floor(a%3600/60),D=a%60;return C>0?`${C}:${b.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`:`${b}:${D.toString().padStart(2,"0")}`},N=a=>`${(a/1048576).toFixed(1)} MB`,z=a=>{switch(a){case"uploading":return e.jsx(W,{className:"h-4 w-4 animate-spin text-blue-500"});case"processing":return e.jsx(W,{className:"h-4 w-4 animate-spin text-orange-500"});case"completed":return e.jsx(De,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(Se,{className:"h-4 w-4 text-red-500"});default:return e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})}},$=a=>{switch(a){case"uploading":return e.jsx(I,{className:"bg-blue-100 text-blue-700 shadow-sm rounded-full",children:"Uploading"});case"processing":return e.jsx(I,{className:"bg-orange-100 text-orange-700 shadow-sm rounded-full",children:"Processing"});case"completed":return e.jsx(I,{className:"bg-green-100 text-green-700 shadow-sm rounded-full",children:"Completed"});case"failed":return e.jsx(I,{variant:"destructive",className:"rounded-full",children:"Failed"});default:return e.jsx(I,{variant:"outline",children:"Unknown"})}},A=async a=>{if(confirm("Are you sure you want to delete this recording? This action cannot be undone.")){f(a);try{await w(a)}finally{f(null)}}};return e.jsxs(_,{className:X("shadow-lg backdrop-blur-md border border-muted rounded-2xl overflow-hidden",T),children:[e.jsxs(V,{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/10 dark:to-blue-950/10 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(G,{className:"flex items-center gap-2 text-lg font-bold",children:[e.jsx(J,{className:"h-5 w-5 text-purple-600"}),"Meeting Recordings"]}),e.jsxs(I,{variant:"outline",className:"rounded-full px-3 py-0.5",children:[x.length," recording",x.length!==1?"s":""]})]}),e.jsxs("div",{className:"relative mt-3",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search recordings...",value:g,onChange:a=>h(a.target.value),className:"pl-10 rounded-full"})]})]}),e.jsx(B,{className:"p-0",children:e.jsx(ee,{className:"h-[500px]",children:v?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(W,{className:"h-8 w-8 animate-spin text-primary"})}):d.length===0?e.jsxs(H.div,{className:"text-center py-16 px-6",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"font-semibold text-lg text-muted-foreground mb-2",children:x.length===0?"No recordings yet":"No recordings found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.length===0?"Start recording your first meeting to see it here":"Try adjusting your search terms"})]}):e.jsx("div",{className:"divide-y",children:d.map((a,C)=>e.jsx(H.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:C*.05},className:X("p-4 transition-all cursor-pointer group hover:bg-gradient-to-r hover:from-purple-50 hover:to-blue-50 dark:hover:from-purple-950/10 dark:hover:to-blue-950/10"),onClick:()=>a.status==="completed"&&s(a),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:z(a.status)}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"font-medium text-sm leading-tight line-clamp-2",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[$(a.status),e.jsx(u,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity hover:text-destructive",onClick:b=>{b.stopPropagation(),A(a.id)},disabled:k===a.id,children:k===a.id?e.jsx(W,{className:"h-3 w-3 animate-spin"}):e.jsx(Pe,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),e.jsx("span",{children:S(a.duration)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-3 w-3"}),e.jsx("span",{children:ce(new Date(a.createdAt),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx("span",{children:N(a.fileSize)})]})]}),a.status==="processing"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"ðŸ¤– AI is generating transcript and summary..."}),a.status==="completed"&&e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[a.transcript&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{children:"Transcript"})]}),a.translatedTranscript&&e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(se,{className:"h-3 w-3"}),e.jsx("span",{children:"Translation"})]}),a.summary&&e.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[e.jsx($e,{className:"h-3 w-3"}),e.jsx("span",{children:"Summary"})]})]}),a.status==="failed"&&e.jsx("p",{className:"text-xs text-red-600",children:"âŒ Processing failed. Please try re-uploading."})]})]})},a.id))})})})]})}function ns({recording:s,open:T,onOpenChange:x}){const[v,w]=n.useState(!1),[g,h]=n.useState("summary"),[k,f]=n.useState([]),[d,S]=n.useState(null),{toast:N}=me(),{addTask:z}=Ue(),{user:$}=Le(),A=n.useRef(null),a=t=>{const r={keyPoints:[],decisions:[],actionItems:[]},c=t.split(`
`).filter(O=>O.trim()!=="");let j=null;const L={"key discussion points":"keyPoints","discussion points":"keyPoints","decisions made":"decisions","key decisions":"decisions","action items":"actionItems",tasks:"actionItems","next steps":"actionItems"};return c.forEach(O=>{const P=O.replace(/^(###|\*\*|\*|-|\d+\.)\s*/,"").replace(/:\**$/,"").trim().toLowerCase();let m=!1;for(const y in L)if(P===y){j=L[y],m=!0;break}if(!m){const y=O.replace(/^(\*|-|\+|â€¢|\d+\.)\s*/,"").trim();y&&(j?r[j].push(y):r.keyPoints.push(y))}}),r.keyPoints.length===0&&r.decisions.length===0&&r.actionItems.length===0?{keyPoints:c,decisions:[],actionItems:[]}:r},C=t=>{const r=[],c=t.split(`
`);let j=1;const L=["action:","action item:","follow-up:","follow up:","decision:","task:","todo:","to do:","next step:","next steps:","assign:","assigned:","deliverable:","deliverables:","deadline:","due:","complete:","finish:"];c.forEach(O=>{const P=O.trim();if(!P)return;let m="",y=!1;const Y=P.match(/^(\*|-|\+|â€¢|\d+\.)\s*(.+)/);if(Y)m=Y[2].trim(),y=!0;else{const i=P.toLowerCase();for(const p of L)if(i.startsWith(p)){m=P.substring(p.length).trim(),y=!0;break}}if(!y&&P.length>10){const i=["need to","should","must","will","plan to","going to","schedule","arrange","contact","send","create","update","review","check","verify","confirm","prepare","draft"],p=P.toLowerCase();i.some(F=>p.includes(F))&&(m=P,y=!0)}y&&m&&m.length>5&&(m=m.replace(/\*\*([^*]+)\*\*/g,"$1"),m=m.replace(/[.!?]+$/,""),m=m.charAt(0).toUpperCase()+m.slice(1),r.push({id:`suggested-task-${j++}`,title:m,description:`From meeting: "${s.title}" on ${ce(new Date(s.createdAt),"MMM dd, yyyy")}`,checked:!1}))}),f(r)};if(n.useEffect(()=>{s!=null&&s.summary?(S(a(s.summary)),C(s.summary)):(S(null),f([]))},[s==null?void 0:s.summary]),!s)return null;const b=t=>{const r=Math.floor(t/3600),c=Math.floor(t%3600/60),j=Math.round(t%60);return r>0?`${r}:${c.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`:`${c}:${j.toString().padStart(2,"0")}`},D=t=>`${(t/(1024*1024)).toFixed(1)} MB`,l=async(t,r)=>{try{await navigator.clipboard.writeText(t),N({title:"Copied to clipboard! ðŸ“‹",description:`${r} has been copied.`})}catch{N({title:"Copy failed",variant:"destructive"})}},o=(t,r)=>{const c=new Blob([t],{type:"text/plain"}),j=URL.createObjectURL(c),L=document.createElement("a");L.href=j,L.download=`${s.title}_${r}.txt`,L.click(),URL.revokeObjectURL(j),N({title:"Download started! ðŸ“¥"})},M=()=>{if(A.current)v?A.current.pause():A.current.play();else{const t=new Audio(s.audioUrl);A.current=t,t.onplay=()=>w(!0),t.onpause=()=>w(!1),t.onended=()=>w(!1),t.onerror=()=>{w(!1),N({title:"Playback failed",variant:"destructive"})},t.play()}},R=t=>{f(r=>r.map(c=>c.id===t?{...c,checked:!c.checked}:c))},E=async()=>{if(!$){N({title:"Authentication required",variant:"destructive"});return}const t=k.filter(c=>c.checked);if(t.length===0){N({title:"No tasks selected"});return}let r=0;for(const c of t)try{await z({title:c.title,description:c.description,status:"todo",priority:"medium",createdBy:$.uid}),r++}catch(j){console.error("Failed to create task:",j)}r>0?(N({title:"Tasks created! ðŸŽ¯",description:`Successfully added ${r} task(s) to your list.`}),f(c=>c.filter(j=>!j.checked))):N({title:"Task creation failed",variant:"destructive"})},U=k.filter(t=>t.checked).length;return e.jsx(ue,{open:T,onOpenChange:x,children:e.jsxs(xe,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx(he,{children:e.jsxs(pe,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Z,{className:"h-6 w-6"}),s.title]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(V,{className:"pb-3",children:e.jsx(G,{className:"text-base",children:"Recording Details"})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Duration"}),e.jsx("p",{className:"text-muted-foreground",children:b(s.duration)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Date"}),e.jsx("p",{className:"text-muted-foreground",children:ce(new Date(s.createdAt),"MMM dd, yyyy")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"File Size"}),e.jsx("p",{className:"text-muted-foreground",children:D(s.fileSize)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Audio"}),e.jsxs(u,{onClick:M,size:"sm",variant:"outline",className:"mt-1 h-7",children:[v?e.jsx(ve,{className:"h-3 w-3 mr-1"}):e.jsx(we,{className:"h-3 w-3 mr-1"}),v?"Pause":"Play"]})]})]})]})})]}),e.jsxs(Fe,{value:g,onValueChange:h,className:"flex-1 mt-4",children:[e.jsxs(ze,{className:"grid w-full grid-cols-3",children:[e.jsxs(ie,{value:"summary",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Summary"]}),e.jsxs(ie,{value:"transcript",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Transcript"]}),e.jsxs(ie,{value:"translation",className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Translation"]})]}),e.jsx(re,{value:"transcript",className:"mt-4",children:e.jsxs(_,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(G,{className:"text-base flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Transcript"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:()=>s.transcript&&l(s.transcript,"Transcript"),size:"sm",variant:"outline",disabled:!s.transcript,children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(u,{onClick:()=>s.transcript&&o(s.transcript,"transcript"),size:"sm",variant:"outline",disabled:!s.transcript,children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})}),e.jsx(B,{children:e.jsx(ee,{className:"h-[300px] pr-4",children:s.transcript?e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.transcript}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Transcript not available yet"}),s.status==="processing"&&e.jsx("p",{className:"text-xs mt-1",children:"AI is generating transcript..."}),s.status==="failed"&&e.jsx("p",{className:"text-xs mt-1 text-destructive",children:"Processing failed. Please try re-uploading."})]})})})]})}),e.jsx(re,{value:"translation",className:"mt-4",children:e.jsxs(_,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(G,{className:"text-base flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Translation"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:()=>s.translatedTranscript&&l(s.translatedTranscript,"Translation"),size:"sm",variant:"outline",disabled:!s.translatedTranscript,children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(u,{onClick:()=>s.translatedTranscript&&o(s.translatedTranscript,"translation"),size:"sm",variant:"outline",disabled:!s.translatedTranscript,children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})}),e.jsx(B,{children:e.jsx(ee,{className:"h-[300px] pr-4",children:s.translatedTranscript?e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.translatedTranscript}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(se,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Translation not available yet"}),s.status==="processing"&&e.jsx("p",{className:"text-xs mt-1",children:"AI is generating translation..."}),s.status==="failed"&&e.jsx("p",{className:"text-xs mt-1 text-destructive",children:"Processing failed. Please try re-uploading."})]})})})]})}),e.jsx(re,{value:"summary",className:"mt-4",children:e.jsxs(_,{children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(G,{className:"text-base flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"AI Summary"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:()=>s.summary&&l(s.summary,"Summary"),size:"sm",variant:"outline",disabled:!s.summary,children:[e.jsx(_e,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(u,{onClick:()=>s.summary&&o(s.summary,"summary"),size:"sm",variant:"outline",disabled:!s.summary,children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})}),e.jsx(B,{children:e.jsx(ee,{className:"h-[300px] pr-4",children:s.summary?e.jsxs("div",{className:"prose prose-sm max-w-none space-y-6",children:[d&&e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border",children:[e.jsxs("h3",{className:"font-semibold text-base mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-primary"}),"Minutes of Meeting"]}),d.keyPoints.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),"Key Discussion Points"]}),e.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:d.keyPoints.map((t,r)=>e.jsx("li",{children:t},`kp-${r}`))})]}),d.decisions.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[e.jsx(We,{className:"h-4 w-4 text-muted-foreground"}),"Decisions Made"]}),e.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:d.decisions.map((t,r)=>e.jsx("li",{children:t},`d-${r}`))})]}),d.actionItems.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 text-sm",children:[e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"}),"Action Items"]}),e.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted-foreground",children:d.actionItems.map((t,r)=>e.jsx("li",{children:t},`ai-${r}`))})]})]}),k.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-dashed border-muted-foreground/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-base flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-primary"}),"AI Task Suggestions",e.jsxs(I,{variant:"secondary",className:"ml-2",children:[k.length," found"]})]}),U>0&&e.jsxs(u,{onClick:E,variant:"focus",size:"sm",className:"hover-scale",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create ",U," Task",U>1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:k.map(t=>e.jsxs("div",{className:X("flex items-start gap-3 p-3 rounded-lg border transition-all cursor-pointer hover:bg-muted/50",t.checked?"bg-primary/5 border-primary/30":"bg-muted/20 border-border"),onClick:()=>R(t.id),children:[e.jsx(Ie,{checked:t.checked,onCheckedChange:()=>R(t.id),className:"mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm leading-tight",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})]},t.id))}),U===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select tasks above to create them in your task list"})})]}),k.length===0&&s.summary&&e.jsx("div",{className:"mt-6 pt-4 border-t border-dashed border-muted-foreground/30",children:e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(fe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No actionable items detected"}),e.jsx("p",{className:"text-xs mt-1",children:"The AI didn't find any clear action points in this summary"})]})})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Q,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Summary not available yet"}),s.status==="processing"&&e.jsx("p",{className:"text-xs mt-1",children:"AI is generating summary..."})]})})})]})})]})]})]})})}function ys(){const[s,T]=n.useState(null),[x,v]=n.useState(!1),w=g=>{T(g),v(!0)};return e.jsxs("div",{className:"container max-w-7xl mx-auto p-6 space-y-12",children:[e.jsxs(H.div,{className:"text-center space-y-6",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-purple-500/20 to-blue-500/20 backdrop-blur-lg rounded-3xl flex items-center justify-center shadow-xl",children:e.jsx(le,{className:"h-10 w-10 text-purple-600"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Meetly"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"AI-Powered Meeting Recordings, Transcriptions, and Smart Summaries â€” all in one place."})]})]}),e.jsx(H.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-6",initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.15}}},children:[{icon:je,title:"AI Transcription",desc:"Powered by Google Gemini",gradient:"from-purple-500/20 to-purple-200/30",textColor:"text-purple-700 dark:text-purple-200"},{icon:Je,title:"Auto Translation",desc:"Translate to English instantly",gradient:"from-blue-500/20 to-blue-200/30",textColor:"text-blue-700 dark:text-blue-200"},{icon:qe,title:"Smart Summary",desc:"Key points & action items",gradient:"from-green-500/20 to-green-200/30",textColor:"text-green-700 dark:text-green-200"}].map((g,h)=>e.jsx(H.div,{initial:{opacity:0,y:25},animate:{opacity:1,y:0},transition:{duration:.5,delay:h*.2},children:e.jsx(_,{className:`bg-gradient-to-br ${g.gradient} backdrop-blur-md shadow-lg hover:shadow-xl transition rounded-2xl`,children:e.jsxs(B,{className:"p-6 text-center space-y-3",children:[e.jsx(g.icon,{className:"h-10 w-10 mx-auto mb-2 text-purple-600"}),e.jsx("h3",{className:`font-semibold text-lg ${g.textColor}`,children:g.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.desc})]})})},h))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(H.div,{className:"lg:col-span-1 space-y-6",initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsx(as,{}),e.jsx(is,{}),e.jsx(_,{className:"border-muted backdrop-blur-md shadow-lg rounded-2xl",children:e.jsxs(B,{className:"p-6 space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-base flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-green-600"}),"Privacy & Security"]}),e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx(Ge,{className:"h-4 w-4 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Secure Storage"}),e.jsx("p",{className:"text-muted-foreground",children:"Recordings safely stored in Firebase"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx(je,{className:"h-4 w-4 mt-1 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"AI Processing"}),e.jsx("p",{className:"text-muted-foreground",children:"Processed via Google Gemini API"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx(ye,{className:"h-4 w-4 mt-1 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Private Access"}),e.jsx("p",{className:"text-muted-foreground",children:"Only you can access your recordings"})]})]})]})})]}),e.jsx(H.div,{className:"lg:col-span-2",initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6},children:e.jsx(rs,{onViewRecording:w})})]}),e.jsx(ns,{recording:s,open:x,onOpenChange:v})]})}export{ys as default};
