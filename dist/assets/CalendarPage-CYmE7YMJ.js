var we=Object.defineProperty;var ye=(o,a,n)=>a in o?we(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n;var F=(o,a,n)=>ye(o,typeof a!="symbol"?a+"":a,n);import{c as _,j as e,D as U,r as x,C as T,x as N,Q as G,B as v,a2 as H,w as K,co as Ne,X as be,u as E,c8 as Se,cp as Ce,W as ae,aA as ne,Y as ie,Z as re,_ as oe,$ as De,a8 as Te,L as q,a3 as ke,k as L,o as R,l as W,n as Y,ai as Ie,v as Me,U as Fe}from"./index-CIyudF9t.js";import{C as Ee}from"./calendar-HIZ4iU5R.js";import{T as le}from"./textarea-D92HBPlJ.js";import{S as ce,a as de,b as me,c as ue,d as k}from"./select-cJBpq2ym.js";import{E as Pe}from"./external-link-l9YrXZ0C.js";import"./startOfMonth-DUJ2JjBB.js";import"./subDays-gmpfwhzv.js";import"./en-US-PHonLEz-.js";import"./format-CrtYonqb.js";import"./chevron-left-D9T-5X23.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ae=_("brain",Oe);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],Z=_("calendar-plus",ze);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],$e=_("coffee",Ge);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Be=_("map-pin",He),qe=(o=15,a=!1)=>{const n=[];for(let s=0;s<24;s++)for(let m=0;m<60;m+=o){const h=`${s.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`;let d;if(a)d=h;else{const p=s>=12?"PM":"AM",f=s===0?12:s>12?s-12:s,i=m.toString().padStart(2,"0");d=`${f}:${i} ${p}`}n.push({value:h,label:d,hour:s})}return n},Le=()=>{const o=new Date,a=o.getHours(),n=o.getMinutes(),s=Math.ceil(n/15)*15,m=s>=60?a+1:a,h=s>=60?0:s;return[{label:"Now",value:`${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},{label:"Next slot",value:`${m.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}]},Re=[{label:"9:00 AM",value:"09:00"},{label:"10:00 AM",value:"10:00"},{label:"11:00 AM",value:"11:00"},{label:"1:00 PM",value:"13:00"},{label:"2:00 PM",value:"14:00"},{label:"3:00 PM",value:"15:00"},{label:"4:00 PM",value:"16:00"},{label:"5:00 PM",value:"17:00"}];function J({value:o,onChange:a,placeholder:n="Select time",disabled:s=!1,className:m,interval:h=15,format24h:d=!1}){const p=x.useMemo(()=>qe(h,d),[h,d]),f=x.useMemo(()=>Le(),[]),i=l=>{if(!l)return n;const j=p.find(b=>b.value===l);return j?j.label:l},g=l=>l>=9&&l<=17;return e.jsxs(ce,{value:o,onValueChange:a,disabled:s,children:[e.jsxs(de,{className:U("w-full",m),children:[e.jsx(T,{className:"h-4 w-4 opacity-50"}),e.jsx(me,{placeholder:n,children:o?i(o):n})]}),e.jsxs(ue,{className:"max-h-[300px]",children:[e.jsxs("div",{className:"p-2 border-b border-border",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Quick"}),f.map(l=>e.jsx(k,{value:l.value,className:"text-sm",children:e.jsx("span",{className:"font-medium",children:l.label})},l.label))]}),e.jsxs("div",{className:"p-2 border-b border-border",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Common"}),Re.map(l=>e.jsx(k,{value:l.value,className:"text-sm",children:l.label},l.value))]}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"All times"}),p.map(l=>e.jsx(k,{value:l.value,className:U("text-sm",g(l.hour)&&"bg-primary/5"),children:l.label},l.value))]})]})]})}function Ue({startTime:o,endTime:a,onStartTimeChange:n,onEndTimeChange:s,disabled:m=!1,className:h,interval:d=15,format24h:p=!1}){const f=i=>{if(n==null||n(i),!a&&i)try{const[g,l]=i.split(":").map(Number),j=new Date;j.setHours(g,l,0,0);const b=new Date(j.getTime()+60*60*1e3),O=`${b.getHours().toString().padStart(2,"0")}:${b.getMinutes().toString().padStart(2,"0")}`;s==null||s(O)}catch(g){console.warn("Could not auto-calculate end time:",g)}};return e.jsxs("div",{className:U("grid grid-cols-2 gap-4",h),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Start time"}),e.jsx(J,{value:o,onChange:f,placeholder:"Start time",disabled:m,interval:d,format24h:p})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"End time"}),e.jsx(J,{value:a,onChange:s,placeholder:"End time",disabled:m,interval:d,format24h:p})]})]})}const P=class P{constructor(){F(this,"gapi",null);F(this,"tokenClient",null);F(this,"isInitialized",!1);F(this,"isSignedIn",!1);F(this,"config",{clientId:"788189911710-116qci5dmm007uqott3qh3o5cai6l35v.apps.googleusercontent.com",discoveryDoc:"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest",scopes:"https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events"})}static getInstance(){return P.instance||(P.instance=new P),P.instance}async initialize(){try{return!this.config.clientId||this.config.clientId.startsWith("YOUR_")?(console.warn("Google Client ID not configured."),!1):(window.gapi||await this.loadGoogleAPI(),window.google||await this.loadGoogleIdentityServicesAPI(),this.gapi=window.gapi,new Promise(a=>{this.gapi.load("client",async()=>{try{await this.gapi.client.init({discoveryDocs:[this.config.discoveryDoc]}),this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:this.config.clientId,scope:this.config.scopes,callback:""}),this.isInitialized=!0,a(!0)}catch(n){console.warn("Google Calendar API initialization failed. This may be due to missing API credentials or unauthorized origins."),console.error("Error details:",n),a(!1)}})}))}catch(a){return console.error("Failed to initialize Google Calendar API:",a),!1}}loadGoogleAPI(){return new Promise((a,n)=>{const s=document.createElement("script");s.src="https://apis.google.com/js/api.js",s.onload=()=>a(),s.onerror=()=>n(new Error("Failed to load Google API")),document.head.appendChild(s)})}loadGoogleIdentityServicesAPI(){return new Promise((a,n)=>{const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.onload=()=>a(),s.onerror=()=>n(new Error("Failed to load Google Identity Services API")),document.head.appendChild(s)})}async signIn(a=!0){return this.isInitialized?new Promise(n=>{this.tokenClient.callback=s=>{s.error?(a?console.error("Google Calendar sign-in failed:",s.error):console.log("No active Google session found silently."),this.isSignedIn=!1,n(!1)):(this.gapi.client.setToken(s),this.isSignedIn=!0,n(!0))},this.gapi.client.getToken()===null?this.tokenClient.requestAccessToken({prompt:a?"":"none"}):(this.isSignedIn=!0,n(!0))}):(console.warn("Google Calendar API not initialized. Please check your configuration."),!1)}async signOut(){if(this.isInitialized&&this.isSignedIn){const a=this.gapi.client.getToken();a&&a.access_token&&(window.google.accounts.oauth2.revoke(a.access_token),this.gapi.client.setToken("")),this.isSignedIn=!1}}isUserSignedIn(){var a,n,s;return this.isSignedIn&&!!((s=(n=(a=this.gapi)==null?void 0:a.client)==null?void 0:n.getToken())!=null&&s.access_token)}get isApiInitialized(){return this.isInitialized}async getEvents(a,n){if(!this.isSignedIn)throw new Error("User not signed in to Google Calendar");try{const s=new Date;return(await this.gapi.client.calendar.events.list({calendarId:"primary",timeMin:a||s.toISOString(),timeMax:n||new Date(s.getTime()+7*24*60*60*1e3).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:50,orderBy:"startTime"})).result.items||[]}catch(s){throw console.error("Failed to fetch calendar events:",s),s}}async createEvent(a){if(!this.isSignedIn)throw new Error("User not signed in to Google Calendar");try{return(await this.gapi.client.calendar.events.insert({calendarId:"primary",resource:a})).result}catch(n){throw console.error("Failed to create calendar event:",n),n}}async createCustomMeeting(a,n,s,m,h){const d={summary:a,description:n||void 0,location:s||void 0,start:{dateTime:m.toISOString()},end:{dateTime:h.toISOString()},colorId:"2"};return this.createEvent(d)}async createFocusBlock(a,n,s){const m=s||new Date,h=new Date(m.getTime()+n*60*1e3),d={summary:`ðŸŽ¯ Focus: ${a}`,description:`Focus session created by MindMeld
Duration: ${n} minutes`,start:{dateTime:m.toISOString()},end:{dateTime:h.toISOString()},colorId:"9"};return this.createEvent(d)}async getUpcomingEvents(a=10){const n=new Date,s=new Date(n);return s.setHours(23,59,59,999),this.getEvents(n.toISOString(),s.toISOString())}async getTodaysEvents(){const a=new Date,n=new Date(a);n.setHours(0,0,0,0);const s=new Date(a);return s.setHours(23,59,59,999),this.getEvents(n.toISOString(),s.toISOString())}async findFreeSlots(a,n){const s=n||new Date,m=new Date(s);m.setHours(9,0,0,0);const h=new Date(s);h.setHours(17,0,0,0);try{const d=await this.getEvents(m.toISOString(),h.toISOString()),p=[],f=d.filter(g=>g.start.dateTime).sort((g,l)=>new Date(g.start.dateTime).getTime()-new Date(l.start.dateTime).getTime());let i=m;for(const g of f){const l=new Date(g.start.dateTime);i<l&&l.getTime()-i.getTime()>=a*60*1e3&&p.push({start:new Date(i),end:new Date(l)});const j=new Date(g.end.dateTime);i=j>i?j:i}return i<h&&h.getTime()-i.getTime()>=a*60*1e3&&p.push({start:new Date(i),end:new Date(h)}),p}catch(d){return console.error("Failed to find free slots:",d),[]}}};F(P,"instance");let X=P;const C=X.getInstance();function _e({attendees:o,onAttendeesChange:a,label:n="Attendees"}){const[s,m]=x.useState(""),h=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),d=()=>{if(!s.trim())return;const i=s.trim().toLowerCase();h(i)&&(o.some(g=>g.email===i)||(a([...o,{email:i}]),m("")))},p=i=>{a(o.filter(g=>g.email!==i))},f=i=>{i.key==="Enter"&&(i.preventDefault(),d())};return e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:n}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:s,onChange:i=>m(i.target.value),onKeyPress:f,placeholder:"Enter email address",className:"flex-1"}),e.jsx(v,{type:"button",variant:"outline",size:"sm",onClick:d,disabled:!s.trim()||!h(s.trim()),children:e.jsx(H,{className:"h-4 w-4"})})]}),o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(i=>e.jsxs(K,{variant:"secondary",className:"flex items-center gap-1 px-2 py-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:i.email}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",className:"h-auto w-auto p-0 hover:bg-transparent",onClick:()=>p(i.email),children:e.jsx(be,{className:"h-3 w-3 hover:text-destructive"})})]},i.email))})]})}const se=[{value:"focus",label:"Focus Session",icon:Ae,color:"bg-blue-500"},{value:"meeting",label:"Meeting",icon:E,color:"bg-green-500"},{value:"break",label:"Break",icon:$e,color:"bg-amber-500"},{value:"urgent",label:"Urgent Task",icon:Se,color:"bg-red-500"},{value:"other",label:"Other",icon:Ce,color:"bg-purple-500"}],Qe=[15,30,45,60,90,120];function Ve({onCreateReminder:o,children:a}){const[n,s]=x.useState(!1),[m,h]=x.useState(""),[d,p]=x.useState(""),[f,i]=x.useState(30),[g,l]=x.useState(""),[j,b]=x.useState("focus"),[O,A]=x.useState(""),[D,z]=x.useState(!0),c=()=>{if(!m.trim())return;const u=D?f:parseInt(g)||30;o({title:m.trim(),duration:u,type:j,description:d.trim()||void 0,startTime:O||void 0}),h(""),p(""),i(30),l(""),b("focus"),A(""),z(!0),s(!1)};return se.find(u=>u.value===j),e.jsxs(ae,{open:n,onOpenChange:s,children:[e.jsx(ne,{asChild:!0,children:a}),e.jsxs(ie,{className:"sm:max-w-[500px]",children:[e.jsxs(re,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Create Custom Reminder"]}),e.jsx(De,{children:"Create a custom reminder for a focus session, meeting, or break."})]}),e.jsxs("div",{className:"space-y-5 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Reminder Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:se.map(u=>{const w=u.icon;return e.jsxs(v,{type:"button",variant:j===u.value?"default":"outline",size:"sm",onClick:()=>b(u.value),className:"h-auto p-3 flex flex-col items-center gap-1",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:u.label})]},u.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"title",children:"Title *"}),e.jsx(G,{id:"title",value:m,onChange:u=>h(u.target.value),placeholder:"What would you like to be reminded about?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(le,{id:"description",value:d,onChange:u=>p(u.target.value),placeholder:"Add any additional notes...",rows:2})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Duration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"quick-duration",checked:D,onChange:()=>z(!0),className:"w-4 h-4"}),e.jsx(N,{htmlFor:"quick-duration",className:"cursor-pointer",children:"Quick Select"})]}),D&&e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Qe.map(u=>e.jsxs(v,{type:"button",variant:f===u?"default":"outline",size:"sm",onClick:()=>i(u),children:[u,"m"]},u))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"custom-duration",checked:!D,onChange:()=>z(!1),className:"w-4 h-4"}),e.jsx(N,{htmlFor:"custom-duration",className:"cursor-pointer",children:"Custom Duration"})]}),!D&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{value:g,onChange:u=>l(u.target.value),placeholder:"30",type:"number",min:"1",max:"480",className:"w-20"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"minutes"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"startTime",children:"Start Time (Optional)"}),e.jsx(J,{value:O,onChange:A,placeholder:"Leave empty for next available slot"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to schedule for the next available time slot"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(v,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(v,{onClick:c,disabled:!m.trim(),children:"Create Reminder"})]})]})]})}function it(){const[o,a]=x.useState(new Date),[n,s]=x.useState([]),[m,h]=x.useState([]),[d,p]=x.useState([]),[f,i]=x.useState(!1),[g,l]=x.useState(!1),[j,b]=x.useState(!0),[O,A]=x.useState(!1),[D,z]=x.useState(!1),[c,u]=x.useState({title:"",description:"",location:"",date:"",startTime:"",endTime:"",duration:"60",attendees:[]}),{toast:w}=Te();x.useEffect(()=>{he()},[]),x.useEffect(()=>{f&&M(o)},[o,f]);const he=async()=>{try{if(b(!0),await C.initialize()){const r=await C.signIn(!1);i(r),r&&(await $(),await M(o))}}catch(t){console.error("Failed to initialize calendar:",t)}finally{b(!1)}},ee=async()=>{try{l(!0),await C.signIn(!0)?(i(!0),await $(),await M(o),w({title:"Calendar Connected! ðŸ“…",description:"Successfully connected to Google Calendar."})):w({title:"Connection Failed",description:"Unable to connect to Google Calendar. Please ensure the API is properly configured and authorized origins are set up in Google Cloud Console.",variant:"destructive"})}catch(t){console.error("Failed to connect to Google Calendar:",t),w({title:"Connection Failed",description:"Failed to connect to Google Calendar. Please check your API credentials and ensure https://localhost:8080 is added to authorized JavaScript origins in Google Cloud Console.",variant:"destructive"})}finally{l(!1)}},ge=async()=>{try{await C.signOut(),i(!1),s([]),h([]),p([]),w({title:"Calendar Disconnected",description:"Successfully disconnected from Google Calendar."})}catch(t){console.error("Failed to disconnect from Google Calendar:",t)}},$=async()=>{try{const t=await C.getTodaysEvents();h(t);const r=await C.findFreeSlots(60);p(r)}catch(t){console.error("Failed to load today's events:",t)}},M=async t=>{try{l(!0);const r=new Date(t);r.setHours(0,0,0,0);const I=new Date(t);I.setHours(23,59,59,999);const S=await C.getEvents(r.toISOString(),I.toISOString());s(S)}catch(r){console.error("Failed to load events for date:",r),w({title:"Failed to Load Events",description:"Could not load calendar events. Please try again.",variant:"destructive"})}finally{l(!1)}},te=async t=>{try{const r=d[0];if(!r)throw new Error("Failed to connect to Google Calendar");await C.createFocusBlock("Deep Work Session",t,r.start),await $(),await M(o),w({title:"Focus Block Created! ðŸŽ¯",description:`${t}-minute focus session scheduled.`})}catch(r){console.error("Google Calendar connection error:",r),console.error("Failed to create focus block:",r),w({title:"Failed to Create Focus Block",description:r instanceof Error?r.message:"Failed to connect to Google Calendar. This may be due to missing API credentials or unauthorized domain.",variant:"destructive"})}},xe=async t=>{try{let r;if(t.startTime){const y=new Date,[Q,V]=t.startTime.split(":").map(Number);r=new Date(y),r.setHours(Q,V,0,0),r<new Date&&r.setDate(r.getDate()+1)}else{const y=d[0];if(!y)throw new Error("No available time slots found");r=y.start}const I=new Date(r.getTime()+t.duration*60*1e3),S={summary:t.title,description:t.description,start:{dateTime:r.toISOString()},end:{dateTime:I.toISOString()},colorId:t.type==="focus"?"1":t.type==="break"?"5":"3"};await C.createEvent(S),await $(),await M(o),w({title:"Reminder Created! â°",description:`${t.title} scheduled for ${t.duration} minutes.`})}catch(r){console.error("Failed to create custom reminder:",r),w({title:"Failed to Create Reminder",description:r instanceof Error?r.message:"Could not create the reminder. Please try again.",variant:"destructive"})}},pe=async()=>{if(!c.title||!c.date||!c.startTime){w({title:"Missing Information",description:"Please fill in the title, date, and start time.",variant:"destructive"});return}try{z(!0);const t=new Date(c.date),[r,I]=c.startTime.split(":").map(Number),S=new Date(t);S.setHours(r,I,0,0);let y;if(c.endTime){const[V,je]=c.endTime.split(":").map(Number);y=new Date(t),y.setHours(V,je,0,0)}else y=new Date(S.getTime()+parseInt(c.duration)*60*1e3);y<=S&&(y=new Date(S.getTime()+60*1e3));const Q={summary:c.title,description:c.description||void 0,location:c.location||void 0,start:{dateTime:S.toISOString()},end:{dateTime:y.toISOString()},attendees:c.attendees.length>0?c.attendees:void 0,colorId:"2"};await C.createEvent(Q),await $(),await M(o),u({title:"",description:"",location:"",date:"",startTime:"",endTime:"",duration:"60",attendees:[]}),A(!1),w({title:"Meeting Created! ðŸ“…",description:`"${c.title}" has been added to your calendar.`})}catch(t){console.error("Failed to create custom event:",t),w({title:"Failed to Create Meeting",description:"Could not create the meeting. Please try again.",variant:"destructive"})}finally{z(!1)}},B=t=>new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),fe=(t,r)=>`${B(t)} - ${B(r)}`,ve=(t,r)=>{const I=new Date(t),y=(new Date(r).getTime()-I.getTime())/(1e3*60);return Math.round(y)};return j?e.jsx("div",{className:"container max-w-6xl mx-auto p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(q,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Initializing calendar..."})]})}):e.jsxs("div",{className:"container max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Calendar"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect your calendar and schedule focus sessions seamlessly"})]}),e.jsx("div",{className:"flex items-center gap-3",children:f?e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"secondary",className:"text-success border-success/20 bg-success/10",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),"Connected"]}),e.jsxs(ae,{open:O,onOpenChange:A,children:[e.jsx(ne,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"hover-scale border-primary/20 hover:bg-primary/5",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"New Meeting"]})}),e.jsxs(ie,{className:"sm:max-w-[500px] shadow-elegant",children:[e.jsx(re,{children:e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Create New Meeting"]})}),e.jsxs("div",{className:"space-y-5 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"title",children:"Meeting Title *"}),e.jsx(G,{id:"title",value:c.title,onChange:t=>u({...c,title:t.target.value}),placeholder:"Team standup, Client call, etc.",className:"transition-smooth focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(le,{id:"description",value:c.description,onChange:t=>u({...c,description:t.target.value}),placeholder:"Meeting agenda, notes, etc.",rows:3,className:"transition-smooth focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"location",children:"Location"}),e.jsx(G,{id:"location",value:c.location,onChange:t=>u({...c,location:t.target.value}),placeholder:"Conference room, Zoom link, etc.",className:"transition-smooth focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"date",children:"Date *"}),e.jsx(G,{id:"date",type:"date",value:c.date,onChange:t=>u({...c,date:t.target.value}),className:"transition-smooth focus:ring-2 focus:ring-primary/20"})]}),e.jsx(Ue,{startTime:c.startTime,endTime:c.endTime,onStartTimeChange:t=>u({...c,startTime:t}),onEndTimeChange:t=>u({...c,endTime:t})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsxs(ce,{value:c.duration,onValueChange:t=>u({...c,duration:t}),children:[e.jsx(de,{children:e.jsx(me,{})}),e.jsxs(ue,{children:[e.jsx(k,{value:"15",children:"15 minutes"}),e.jsx(k,{value:"30",children:"30 minutes"}),e.jsx(k,{value:"45",children:"45 minutes"}),e.jsx(k,{value:"60",children:"1 hour"}),e.jsx(k,{value:"90",children:"1.5 hours"}),e.jsx(k,{value:"120",children:"2 hours"})]})]})]}),e.jsx(_e,{attendees:c.attendees,onAttendeesChange:t=>u({...c,attendees:t})}),e.jsx("p",{className:"text-xs text-muted-foreground bg-muted/30 p-2 rounded-md",children:"* If end time is not specified, duration will be used"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(v,{variant:"outline",onClick:()=>A(!1),disabled:D,className:"hover-scale",children:"Cancel"}),e.jsx(v,{onClick:pe,disabled:D||!c.title||!c.date||!c.startTime,variant:"focus",className:"hover-scale",children:D?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Create Meeting"]})})]})]})]}),e.jsx(v,{variant:"outline",onClick:ge,className:"hover-scale text-destructive hover:bg-destructive/5 hover:border-destructive/20",children:"Disconnect"})]}):e.jsxs(v,{onClick:ee,disabled:g,variant:"focus",className:"hover-scale shadow-elegant",children:[g?e.jsx(q,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(E,{className:"h-4 w-4 mr-2"}),"Connect Google Calendar"]})})]}),f?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(L,{className:"lg:col-span-1 shadow-elegant border-primary/10",children:[e.jsx(W,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Calendar"]})}),e.jsx(R,{children:e.jsx(Ee,{mode:"single",selected:o,onSelect:t=>t&&a(t),className:"rounded-lg border shadow-sm"})})]}),e.jsxs(L,{className:"lg:col-span-2 shadow-elegant border-focus/10",children:[e.jsx(W,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),o.toDateString()===new Date().toDateString()?"Today's Schedule":`Events for ${o.toLocaleDateString()}`]}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>M(o),disabled:g,className:"hover-scale",children:e.jsx(Ie,{className:U("h-4 w-4",g&&"animate-spin")})})]})}),e.jsx(R,{children:e.jsx(Me,{className:"h-[450px]",children:n.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx("div",{className:"h-16 w-16 bg-muted/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(E,{className:"h-8 w-8 opacity-50"})}),e.jsx("h4",{className:"font-medium mb-1",children:"No events scheduled"}),e.jsx("p",{className:"text-sm",children:"This day is free for focus work"})]}):e.jsx("div",{className:"space-y-3",children:n.map(t=>e.jsx("div",{className:"p-4 border rounded-lg hover:bg-muted/30 transition-smooth hover:shadow-sm border-l-4 border-l-primary/30",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold truncate text-foreground",children:t.summary}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2 leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-muted-foreground",children:[t.start.dateTime&&t.end.dateTime&&e.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 px-2 py-1 rounded-full",children:[e.jsx(T,{className:"h-3 w-3"}),fe(t.start.dateTime,t.end.dateTime),e.jsxs("span",{className:"ml-1 font-medium",children:["(",ve(t.start.dateTime,t.end.dateTime),"m)"]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 px-2 py-1 rounded-full",children:[e.jsx(Be,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:t.location})]}),t.attendees&&t.attendees.length>0&&e.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 px-2 py-1 rounded-full",children:[e.jsx(Fe,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium",children:t.attendees.length})]})]})]}),e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-scale",children:e.jsx(Pe,{className:"h-3 w-3"})})]})},t.id))})})})]}),o.toDateString()===new Date().toDateString()&&e.jsxs(L,{className:"lg:col-span-3 shadow-elegant border-success/10",children:[e.jsx(W,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Quick Actions"]})}),e.jsx(R,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-success"}),"Available Time Slots"]}),d.length===0?e.jsxs("div",{className:"text-center py-6 bg-muted/20 rounded-lg border-dashed border-2 border-muted-foreground/20",children:[e.jsx(T,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No free time slots available today"})]}):e.jsx("div",{className:"space-y-2",children:d.slice(0,3).map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-success/5 border border-success/20 rounded-lg hover:bg-success/10 transition-smooth",children:[e.jsxs("span",{className:"text-sm font-medium",children:[B(t.start.toISOString())," - ",B(t.end.toISOString())]}),e.jsxs(K,{variant:"secondary",className:"text-success bg-success/10 border-success/20",children:[Math.round((t.end.getTime()-t.start.getTime())/(1e3*60)),"m"]})]},r))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-focus"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>te(25),disabled:d.length===0,className:"hover-scale border-focus/20 hover:bg-focus/5",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"25 min"]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>te(60),disabled:d.length===0,className:"hover-scale border-focus/20 hover:bg-focus/5",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"1 hour"]})]}),e.jsx(Ve,{onCreateReminder:xe,children:e.jsxs(v,{variant:"outline",className:"w-full hover-scale border-primary/20 hover:bg-primary/5",disabled:d.length===0,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Custom Reminder"]})}),d.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground p-2 bg-muted/20 rounded-md",children:"No available time slots for new events"})]})]})]})})]})]}):e.jsx(L,{className:"shadow-elegant border-dashed border-2 border-muted-foreground/20",children:e.jsxs(R,{className:"flex flex-col items-center justify-center py-16 space-y-6",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-primary/10 to-focus/10 rounded-2xl flex items-center justify-center shadow-elegant",children:e.jsx(E,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Connect Your Calendar"}),e.jsx("p",{className:"text-muted-foreground max-w-lg leading-relaxed",children:"Connect your Google Calendar to view events, schedule focus sessions, and find optimal times for deep work."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 max-w-2xl",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx(E,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"View Events"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"See your schedule"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx(T,{className:"h-6 w-6 mx-auto mb-2 text-focus"}),e.jsx("p",{className:"text-sm font-medium",children:"Focus Blocks"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Schedule deep work"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx(H,{className:"h-6 w-6 mx-auto mb-2 text-success"}),e.jsx("p",{className:"text-sm font-medium",children:"Create Meetings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add custom events"})]})]})]}),e.jsxs(v,{onClick:ee,disabled:g,variant:"focus",size:"lg",className:"hover-scale shadow-elegant",children:[g?e.jsx(q,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(E,{className:"h-4 w-4 mr-2"}),"Connect Google Calendar"]})]})})]})}export{it as default};
