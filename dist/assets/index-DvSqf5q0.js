import{c as D,r as t,j as M}from"./index-BOMCLsi_.js";import{t as H}from"./en-US-DSSwd-Ay.js";import{M as _,i as b,u as k,P as W,b as q,c as A,L as K}from"./skeletons-OrUvxu0E.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],X=D("square-pen",U);function J(s){const r=H(s);return r.setHours(23,59,59,999),r}class B extends t.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const l=e.offsetParent,m=b(l)&&l.offsetWidth||0,n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft,n.right=m-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function F({children:s,isPresent:r,anchorX:e,root:l}){const m=t.useId(),n=t.useRef(null),p=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=t.useContext(_);return t.useInsertionEffect(()=>{const{width:y,height:o,top:C,left:i,right:u}=p.current;if(r||!n.current||!y||!o)return;const a=e==="left"?`left: ${i}`:`right: ${u}`;n.current.dataset.motionPopId=m;const f=document.createElement("style");g&&(f.nonce=g);const d=l??document.head;return d.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${o}px !important;
            ${a}px !important;
            top: ${C}px !important;
          }
        `),()=>{d.contains(f)&&d.removeChild(f)}},[r]),M.jsx(B,{isPresent:r,childRef:n,sizeRef:p,children:t.cloneElement(s,{ref:n})})}const G=({children:s,initial:r,isPresent:e,onExitComplete:l,custom:m,presenceAffectsLayout:n,mode:p,anchorX:g,root:y})=>{const o=k(N),C=t.useId();let i=!0,u=t.useMemo(()=>(i=!1,{id:C,initial:r,isPresent:e,custom:m,onExitComplete:a=>{o.set(a,!0);for(const f of o.values())if(!f)return;l&&l()},register:a=>(o.set(a,!1),()=>o.delete(a))}),[e,o,l]);return n&&i&&(u={...u}),t.useMemo(()=>{o.forEach((a,f)=>o.set(f,!1))},[e]),t.useEffect(()=>{!e&&!o.size&&l&&l()},[e]),p==="popLayout"&&(s=M.jsx(F,{isPresent:e,anchorX:g,root:y,children:s})),M.jsx(W.Provider,{value:u,children:s})};function N(){return new Map}const P=s=>s.key||"";function $(s){const r=[];return t.Children.forEach(s,e=>{t.isValidElement(e)&&r.push(e)}),r}const Q=({children:s,custom:r,initial:e=!0,onExitComplete:l,presenceAffectsLayout:m=!0,mode:n="sync",propagate:p=!1,anchorX:g="left",root:y})=>{const[o,C]=q(p),i=t.useMemo(()=>$(s),[s]),u=p&&!o?[]:i.map(P),a=t.useRef(!0),f=t.useRef(i),d=k(()=>new Map),[z,I]=t.useState(i),[x,j]=t.useState(i);A(()=>{a.current=!1,f.current=i;for(let h=0;h<x.length;h++){const c=P(x[h]);u.includes(c)?d.delete(c):d.get(c)!==!0&&d.set(c,!1)}},[x,u.length,u.join("-")]);const R=[];if(i!==z){let h=[...i];for(let c=0;c<x.length;c++){const E=x[c],w=P(E);u.includes(w)||(h.splice(c,0,E),R.push(E))}return n==="wait"&&R.length&&(h=R),j($(h)),I(i),null}const{forceRender:v}=t.useContext(K);return M.jsx(M.Fragment,{children:x.map(h=>{const c=P(h),E=p&&!o?!1:i===x||u.includes(c),w=()=>{if(d.has(c))d.set(c,!0);else return;let L=!0;d.forEach(S=>{S||(L=!1)}),L&&(v==null||v(),j(f.current),p&&(C==null||C()),l&&l())};return M.jsx(G,{isPresent:E,initial:!a.current||e?void 0:!1,custom:r,presenceAffectsLayout:m,mode:n,root:y,onExitComplete:E?void 0:w,anchorX:g,children:h},c)})})};export{Q as A,X as S,J as e};
