import{c as Te,m as ze,r as a,bq as B,br as R,I as We,H as _e,O as Ge,J as Xe,bs as H,j as l,D as T,al as Je,y as Ye,z as Ze,B as G,w as Qe,X as et,E as tt,bp as rt,x as L,Q as le,b7 as nt,b8 as lt,b9 as at,s as ue}from"./index-CIyudF9t.js";import{T as st}from"./textarea-D92HBPlJ.js";import{e as it,S as we,a as Se,b as je,c as Ce,d as P}from"./select-cJBpq2ym.js";import{d as ot,g as ct}from"./formatDistanceToNow-Bu9e27Lo.js";import{s as ut}from"./subDays-gmpfwhzv.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],mt=Te("chevrons-up-down",dt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Qt=Te("star",ft);function pt(e,r,t){const d=ot(e,r)/ze;return ct(t==null?void 0:t.roundingMethod)(d)}var Ne=1,ht=.9,vt=.8,gt=.17,ae=.1,se=.999,xt=.9999,bt=.99,yt=/[\\\/_+.#"@\[\(\{&]/,wt=/[\\\/_+.#"@\[\(\{&]/g,St=/[\s-]/,De=/[\s-]/g;function de(e,r,t,d,i,u,s){if(u===r.length)return i===e.length?Ne:bt;var p=`${i},${u}`;if(s[p]!==void 0)return s[p];for(var f=d.charAt(u),c=t.indexOf(f,i),o=0,v,x,S,I;c>=0;)v=de(e,r,t,d,c+1,u+1,s),v>o&&(c===i?v*=Ne:yt.test(e.charAt(c-1))?(v*=vt,S=e.slice(i,c-1).match(wt),S&&i>0&&(v*=Math.pow(se,S.length))):St.test(e.charAt(c-1))?(v*=ht,I=e.slice(i,c-1).match(De),I&&i>0&&(v*=Math.pow(se,I.length))):(v*=gt,i>0&&(v*=Math.pow(se,c-i))),e.charAt(c)!==r.charAt(u)&&(v*=xt)),(v<ae&&t.charAt(c-1)===d.charAt(u+1)||d.charAt(u+1)===d.charAt(u)&&t.charAt(c-1)!==d.charAt(u))&&(x=de(e,r,t,d,c+1,u+2,s),x*ae>v&&(v=x*ae)),v>o&&(o=v),c=t.indexOf(f,c+1);return s[p]=o,o}function Ee(e){return e.toLowerCase().replace(De," ")}function jt(e,r,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,de(e,r,Ee(e),Ee(r),0,0,{})}var q='[cmdk-group=""]',ie='[cmdk-group-items=""]',Ct='[cmdk-group-heading=""]',Re='[cmdk-item=""]',Ie=`${Re}:not([aria-disabled="true"])`,me="cmdk-item-select",O="data-value",Nt=(e,r,t)=>jt(e,r,t),ke=a.createContext(void 0),z=()=>a.useContext(ke),Ae=a.createContext(void 0),fe=()=>a.useContext(Ae),Me=a.createContext(void 0),Fe=a.forwardRef((e,r)=>{let t=K(()=>{var n,h;return{search:"",value:(h=(n=e.value)!=null?n:e.defaultValue)!=null?h:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=K(()=>new Set),i=K(()=>new Map),u=K(()=>new Map),s=K(()=>new Set),p=Le(e),{label:f,children:c,value:o,onValueChange:v,filter:x,shouldFilter:S,loop:I,disablePointerSelection:U=!1,vimBindings:k=!0,...W}=e,J=B(),pe=B(),Y=B(),A=a.useRef(null),w=Pt();M(()=>{if(o!==void 0){let n=o.trim();t.current.value=n,C.emit()}},[o]),M(()=>{w(6,ve)},[]);let C=a.useMemo(()=>({subscribe:n=>(s.current.add(n),()=>s.current.delete(n)),snapshot:()=>t.current,setState:(n,h,g)=>{var m,b,y,E;if(!Object.is(t.current[n],h)){if(t.current[n]=h,n==="search")te(),Q(),w(1,ee);else if(n==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let j=document.getElementById(Y);j?j.focus():(m=document.getElementById(J))==null||m.focus()}if(w(7,()=>{var j;t.current.selectedItemId=(j=F())==null?void 0:j.id,C.emit()}),g||w(5,ve),((b=p.current)==null?void 0:b.value)!==void 0){let j=h??"";(E=(y=p.current).onValueChange)==null||E.call(y,j);return}}C.emit()}},emit:()=>{s.current.forEach(n=>n())}}),[]),Z=a.useMemo(()=>({value:(n,h,g)=>{var m;h!==((m=u.current.get(n))==null?void 0:m.value)&&(u.current.set(n,{value:h,keywords:g}),t.current.filtered.items.set(n,he(h,g)),w(2,()=>{Q(),C.emit()}))},item:(n,h)=>(d.current.add(n),h&&(i.current.has(h)?i.current.get(h).add(n):i.current.set(h,new Set([n]))),w(3,()=>{te(),Q(),t.current.value||ee(),C.emit()}),()=>{u.current.delete(n),d.current.delete(n),t.current.filtered.items.delete(n);let g=F();w(4,()=>{te(),(g==null?void 0:g.getAttribute("id"))===n&&ee(),C.emit()})}),group:n=>(i.current.has(n)||i.current.set(n,new Set),()=>{u.current.delete(n),i.current.delete(n)}),filter:()=>p.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:J,inputId:Y,labelId:pe,listInnerRef:A}),[]);function he(n,h){var g,m;let b=(m=(g=p.current)==null?void 0:g.filter)!=null?m:Nt;return n?b(n,t.current.search,h):0}function Q(){if(!t.current.search||p.current.shouldFilter===!1)return;let n=t.current.filtered.items,h=[];t.current.filtered.groups.forEach(m=>{let b=i.current.get(m),y=0;b.forEach(E=>{let j=n.get(E);y=Math.max(j,y)}),h.push([m,y])});let g=A.current;V().sort((m,b)=>{var y,E;let j=m.getAttribute("id"),_=b.getAttribute("id");return((y=n.get(_))!=null?y:0)-((E=n.get(j))!=null?E:0)}).forEach(m=>{let b=m.closest(ie);b?b.appendChild(m.parentElement===b?m:m.closest(`${ie} > *`)):g.appendChild(m.parentElement===g?m:m.closest(`${ie} > *`))}),h.sort((m,b)=>b[1]-m[1]).forEach(m=>{var b;let y=(b=A.current)==null?void 0:b.querySelector(`${q}[${O}="${encodeURIComponent(m[0])}"]`);y==null||y.parentElement.appendChild(y)})}function ee(){let n=V().find(g=>g.getAttribute("aria-disabled")!=="true"),h=n==null?void 0:n.getAttribute(O);C.setState("value",h||void 0)}function te(){var n,h,g,m;if(!t.current.search||p.current.shouldFilter===!1){t.current.filtered.count=d.current.size;return}t.current.filtered.groups=new Set;let b=0;for(let y of d.current){let E=(h=(n=u.current.get(y))==null?void 0:n.value)!=null?h:"",j=(m=(g=u.current.get(y))==null?void 0:g.keywords)!=null?m:[],_=he(E,j);t.current.filtered.items.set(y,_),_>0&&b++}for(let[y,E]of i.current)for(let j of E)if(t.current.filtered.items.get(j)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=b}function ve(){var n,h,g;let m=F();m&&(((n=m.parentElement)==null?void 0:n.firstChild)===m&&((g=(h=m.closest(q))==null?void 0:h.querySelector(Ct))==null||g.scrollIntoView({block:"nearest"})),m.scrollIntoView({block:"nearest"}))}function F(){var n;return(n=A.current)==null?void 0:n.querySelector(`${Re}[aria-selected="true"]`)}function V(){var n;return Array.from(((n=A.current)==null?void 0:n.querySelectorAll(Ie))||[])}function re(n){let h=V()[n];h&&C.setState("value",h.getAttribute(O))}function ne(n){var h;let g=F(),m=V(),b=m.findIndex(E=>E===g),y=m[b+n];(h=p.current)!=null&&h.loop&&(y=b+n<0?m[m.length-1]:b+n===m.length?m[0]:m[b+n]),y&&C.setState("value",y.getAttribute(O))}function ge(n){let h=F(),g=h==null?void 0:h.closest(q),m;for(;g&&!m;)g=n>0?Ft(g,q):Lt(g,q),m=g==null?void 0:g.querySelector(Ie);m?C.setState("value",m.getAttribute(O)):ne(n)}let xe=()=>re(V().length-1),be=n=>{n.preventDefault(),n.metaKey?xe():n.altKey?ge(1):ne(1)},ye=n=>{n.preventDefault(),n.metaKey?re(0):n.altKey?ge(-1):ne(-1)};return a.createElement(R.div,{ref:r,tabIndex:-1,...W,"cmdk-root":"",onKeyDown:n=>{var h;(h=W.onKeyDown)==null||h.call(W,n);let g=n.nativeEvent.isComposing||n.keyCode===229;if(!(n.defaultPrevented||g))switch(n.key){case"n":case"j":{k&&n.ctrlKey&&be(n);break}case"ArrowDown":{be(n);break}case"p":case"k":{k&&n.ctrlKey&&ye(n);break}case"ArrowUp":{ye(n);break}case"Home":{n.preventDefault(),re(0);break}case"End":{n.preventDefault(),xe();break}case"Enter":{n.preventDefault();let m=F();if(m){let b=new Event(me);m.dispatchEvent(b)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:Z.inputId,id:Z.labelId,style:Ot},f),X(e,n=>a.createElement(Ae.Provider,{value:C},a.createElement(ke.Provider,{value:Z},n))))}),Et=a.forwardRef((e,r)=>{var t,d;let i=B(),u=a.useRef(null),s=a.useContext(Me),p=z(),f=Le(e),c=(d=(t=f.current)==null?void 0:t.forceMount)!=null?d:s==null?void 0:s.forceMount;M(()=>{if(!c)return p.item(i,s==null?void 0:s.id)},[c]);let o=Pe(i,u,[e.value,e.children,u],e.keywords),v=fe(),x=D(w=>w.value&&w.value===o.current),S=D(w=>c||p.filter()===!1?!0:w.search?w.filtered.items.get(i)>0:!0);a.useEffect(()=>{let w=u.current;if(!(!w||e.disabled))return w.addEventListener(me,I),()=>w.removeEventListener(me,I)},[S,e.onSelect,e.disabled]);function I(){var w,C;U(),(C=(w=f.current).onSelect)==null||C.call(w,o.current)}function U(){v.setState("value",o.current,!0)}if(!S)return null;let{disabled:k,value:W,onSelect:J,forceMount:pe,keywords:Y,...A}=e;return a.createElement(R.div,{ref:H(u,r),...A,id:i,"cmdk-item":"",role:"option","aria-disabled":!!k,"aria-selected":!!x,"data-disabled":!!k,"data-selected":!!x,onPointerMove:k||p.getDisablePointerSelection()?void 0:U,onClick:k?void 0:I},e.children)}),It=a.forwardRef((e,r)=>{let{heading:t,children:d,forceMount:i,...u}=e,s=B(),p=a.useRef(null),f=a.useRef(null),c=B(),o=z(),v=D(S=>i||o.filter()===!1?!0:S.search?S.filtered.groups.has(s):!0);M(()=>o.group(s),[]),Pe(s,p,[e.value,e.heading,f]);let x=a.useMemo(()=>({id:s,forceMount:i}),[i]);return a.createElement(R.div,{ref:H(p,r),...u,"cmdk-group":"",role:"presentation",hidden:v?void 0:!0},t&&a.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:c},t),X(e,S=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?c:void 0},a.createElement(Me.Provider,{value:x},S))))}),Tt=a.forwardRef((e,r)=>{let{alwaysRender:t,...d}=e,i=a.useRef(null),u=D(s=>!s.search);return!t&&!u?null:a.createElement(R.div,{ref:H(i,r),...d,"cmdk-separator":"",role:"separator"})}),Dt=a.forwardRef((e,r)=>{let{onValueChange:t,...d}=e,i=e.value!=null,u=fe(),s=D(c=>c.search),p=D(c=>c.selectedItemId),f=z();return a.useEffect(()=>{e.value!=null&&u.setState("search",e.value)},[e.value]),a.createElement(R.input,{ref:r,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":p,id:f.inputId,type:"text",value:i?e.value:s,onChange:c=>{i||u.setState("search",c.target.value),t==null||t(c.target.value)}})}),Rt=a.forwardRef((e,r)=>{let{children:t,label:d="Suggestions",...i}=e,u=a.useRef(null),s=a.useRef(null),p=D(c=>c.selectedItemId),f=z();return a.useEffect(()=>{if(s.current&&u.current){let c=s.current,o=u.current,v,x=new ResizeObserver(()=>{v=requestAnimationFrame(()=>{let S=c.offsetHeight;o.style.setProperty("--cmdk-list-height",S.toFixed(1)+"px")})});return x.observe(c),()=>{cancelAnimationFrame(v),x.unobserve(c)}}},[]),a.createElement(R.div,{ref:H(u,r),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":d,id:f.listId},X(e,c=>a.createElement("div",{ref:H(s,f.listInnerRef),"cmdk-list-sizer":""},c)))}),kt=a.forwardRef((e,r)=>{let{open:t,onOpenChange:d,overlayClassName:i,contentClassName:u,container:s,...p}=e;return a.createElement(We,{open:t,onOpenChange:d},a.createElement(_e,{container:s},a.createElement(Ge,{"cmdk-overlay":"",className:i}),a.createElement(Xe,{"aria-label":e.label,"cmdk-dialog":"",className:u},a.createElement(Fe,{ref:r,...p}))))}),At=a.forwardRef((e,r)=>D(t=>t.filtered.count===0)?a.createElement(R.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),Mt=a.forwardRef((e,r)=>{let{progress:t,children:d,label:i="Loading...",...u}=e;return a.createElement(R.div,{ref:r,...u,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},X(e,s=>a.createElement("div",{"aria-hidden":!0},s)))}),N=Object.assign(Fe,{List:Rt,Item:Et,Input:Dt,Group:It,Separator:Tt,Dialog:kt,Empty:At,Loading:Mt});function Ft(e,r){let t=e.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function Lt(e,r){let t=e.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function Le(e){let r=a.useRef(e);return M(()=>{r.current=e}),r}var M=typeof window>"u"?a.useEffect:a.useLayoutEffect;function K(e){let r=a.useRef();return r.current===void 0&&(r.current=e()),r}function D(e){let r=fe(),t=()=>e(r.snapshot());return a.useSyncExternalStore(r.subscribe,t,t)}function Pe(e,r,t,d=[]){let i=a.useRef(),u=z();return M(()=>{var s;let p=(()=>{var c;for(let o of t){if(typeof o=="string")return o.trim();if(typeof o=="object"&&"current"in o)return o.current?(c=o.current.textContent)==null?void 0:c.trim():i.current}})(),f=d.map(c=>c.trim());u.value(e,p,f),(s=r.current)==null||s.setAttribute(O,p),i.current=p}),i}var Pt=()=>{let[e,r]=a.useState(),t=K(()=>new Map);return M(()=>{t.current.forEach(d=>d()),t.current=new Map},[e]),(d,i)=>{t.current.set(d,i),r({})}};function $t(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function X({asChild:e,children:r},t){return e&&a.isValidElement(r)?a.cloneElement($t(r),{ref:r.ref},t(r.props.children)):t(r)}var Ot={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const $e=a.forwardRef(({className:e,...r},t)=>l.jsx(N,{ref:t,className:T("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));$e.displayName=N.displayName;const Oe=a.forwardRef(({className:e,...r},t)=>l.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[l.jsx(Je,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),l.jsx(N.Input,{ref:t,className:T("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));Oe.displayName=N.Input.displayName;const Ke=a.forwardRef(({className:e,...r},t)=>l.jsx(N.List,{ref:t,className:T("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));Ke.displayName=N.List.displayName;const Be=a.forwardRef((e,r)=>l.jsx(N.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));Be.displayName=N.Empty.displayName;const Ue=a.forwardRef(({className:e,...r},t)=>l.jsx(N.Group,{ref:t,className:T("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));Ue.displayName=N.Group.displayName;const Kt=a.forwardRef(({className:e,...r},t)=>l.jsx(N.Separator,{ref:t,className:T("-mx-1 h-px bg-border",e),...r}));Kt.displayName=N.Separator.displayName;const Ve=a.forwardRef(({className:e,...r},t)=>l.jsx(N.Item,{ref:t,className:T("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...r}));Ve.displayName=N.Item.displayName;function Bt({options:e,selected:r,onChange:t,placeholder:d="Select items...",label:i,className:u}){const[s,p]=a.useState(!1),f=o=>{t(r.filter(v=>v!==o))},c=o=>{r.includes(o)?t(r.filter(v=>v!==o)):t([...r,o])};return l.jsxs("div",{className:T("grid gap-2",u),children:[i&&l.jsx("label",{className:"text-sm font-medium",children:i}),l.jsxs(Ye,{open:s,onOpenChange:p,children:[l.jsx(Ze,{asChild:!0,children:l.jsxs(G,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between text-left font-normal",onClick:()=>p(!s),children:[l.jsx("div",{className:"flex gap-1 flex-wrap",children:r.length>0?r.map(o=>{const v=e.find(x=>x.value===o);return l.jsxs(Qe,{variant:"secondary",className:"mr-1 mb-1",onClick:x=>{x.preventDefault(),x.stopPropagation(),f(o)},children:[v==null?void 0:v.label,l.jsx("button",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:x=>{x.key==="Enter"&&f(o)},onMouseDown:x=>{x.preventDefault(),x.stopPropagation()},onClick:x=>{x.preventDefault(),x.stopPropagation(),f(o)},children:l.jsx(et,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},o)}):l.jsx("span",{className:"text-muted-foreground",children:d})}),l.jsx(mt,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),l.jsx(tt,{className:"w-full p-0",children:l.jsxs($e,{children:[l.jsx(Oe,{placeholder:"Search..."}),l.jsx(Be,{children:"No item found."}),l.jsx(Ue,{children:l.jsx(Ke,{children:e.map(o=>l.jsxs(Ve,{onSelect:()=>c(o.value),children:[l.jsx(rt,{className:T("mr-2 h-4 w-4",r.includes(o.value)?"opacity-100":"opacity-0")}),o.label]},o.value))})})]})})]})]})}function Ut({members:e,selectedIds:r,onSelectionChange:t,label:d="Assigned Members",placeholder:i="Select team members"}){const u=e.map(s=>({label:s.displayName||s.email,value:s.uid}));return l.jsx(Bt,{options:u,selected:r,onChange:t,label:d,placeholder:i})}const Vt=e=>e?e.length===10&&e.match(/^\d{4}-\d{2}-\d{2}$/)?`${e}T09:00`:e.slice(0,16):"";function er({task:e,onSubmit:r,onCancel:t,teamMembers:d}){var c;const[i,u]=a.useState(!1),[s,p]=a.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",priority:(e==null?void 0:e.priority)||"medium",status:(e==null?void 0:e.status)||"todo",estimatedTime:((c=e==null?void 0:e.estimatedTime)==null?void 0:c.toString())||"",dueDate:Vt(e==null?void 0:e.dueDate),assignedTo:(e==null?void 0:e.assignedTo)||[]}),f=o=>{o.preventDefault(),r({...s,estimatedTime:s.estimatedTime?parseInt(s.estimatedTime,10):void 0,assignedTo:s.assignedTo})};return l.jsxs("form",{onSubmit:f,className:"flex flex-col flex-1 overflow-hidden",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx(L,{htmlFor:"title",className:"text-sm font-medium",children:"Title *"}),l.jsx(le,{id:"title",value:s.title,onChange:o=>p({...s,title:o.target.value}),placeholder:"Enter task title",className:"mt-2 transition-smooth focus:ring-2 focus:ring-primary/20",required:!0})]}),l.jsxs("div",{children:[l.jsx(L,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),l.jsx(st,{id:"description",value:s.description,onChange:o=>p({...s,description:o.target.value}),placeholder:"Enter task description",className:"mt-2 transition-smooth focus:ring-2 focus:ring-primary/20",rows:3})]}),l.jsxs("div",{children:[l.jsx(L,{htmlFor:"dueDate",className:"text-sm font-medium",children:"Due Date"}),l.jsx(le,{id:"dueDate",type:"datetime-local",value:s.dueDate,onChange:o=>p({...s,dueDate:o.target.value}),className:"mt-2 transition-smooth focus:ring-2 focus:ring-primary/20"})]}),l.jsxs(nt,{open:i,onOpenChange:u,children:[l.jsx(lt,{asChild:!0,children:l.jsxs(G,{variant:"ghost",className:"w-full justify-between px-2 text-muted-foreground hover:text-foreground",children:[l.jsx("span",{children:"Advanced Options"}),l.jsx(it,{className:T("h-4 w-4 transition-transform",i&&"rotate-180")})]})}),l.jsxs(at,{className:"space-y-4 pt-4 animate-in fade-in-0 zoom-in-95",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(L,{htmlFor:"priority",className:"text-sm font-medium",children:"Priority"}),l.jsxs(we,{value:s.priority,onValueChange:o=>p({...s,priority:o}),children:[l.jsx(Se,{className:"mt-2",children:l.jsx(je,{})}),l.jsxs(Ce,{children:[l.jsx(P,{value:"low",children:"Low"}),l.jsx(P,{value:"medium",children:"Medium"}),l.jsx(P,{value:"high",children:"High"})]})]})]}),l.jsxs("div",{children:[l.jsx(L,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),l.jsxs(we,{value:s.status,onValueChange:o=>p({...s,status:o}),children:[l.jsx(Se,{className:"mt-2",children:l.jsx(je,{})}),l.jsxs(Ce,{children:[l.jsx(P,{value:"todo",children:"To Do"}),l.jsx(P,{value:"in-progress",children:"In Progress"}),l.jsx(P,{value:"completed",children:"Completed"})]})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.jsxs("div",{children:[l.jsx(L,{htmlFor:"estimatedTime",className:"text-sm font-medium",children:"Estimated Time (minutes)"}),l.jsx(le,{id:"estimatedTime",type:"number",value:s.estimatedTime,onChange:o=>p({...s,estimatedTime:o.target.value}),placeholder:"25",className:"mt-2 transition-smooth focus:ring-2 focus:ring-primary/20",min:"1"})]})}),d.length>0&&l.jsx("div",{children:l.jsx(Ut,{members:d,selectedIds:s.assignedTo,onSelectionChange:o=>p({...s,assignedTo:o})})})]})]})]}),l.jsxs("div",{className:"flex-shrink-0 flex gap-3 p-6 border-t",children:[l.jsx(G,{type:"button",variant:"outline",onClick:t,className:"hover-scale flex-1",children:"Cancel"}),l.jsx(G,{type:"submit",variant:"focus",className:"flex-1",children:e?"Update Task":"Create Task"})]})]})}const oe={simple:10,standard:20,complex:30},qt={high:1.5,medium:1,low:.75},$={earlyBird:1.2,onTrack:1.1,onTime:1,slightlyLate:.75,delayed:.5,overdue:0},ce={warmUp:1.05,inTheZone:1.1,onFire:1.2},qe=e=>{const r=e.estimatedTime||25;return r<30?oe.simple:r<=90?oe.standard:oe.complex},He=e=>qt[e.priority]||1,Ht=e=>{if(!e.dueDate||!e.completedAt)return $.onTime;const r=new Date(e.dueDate),t=new Date(e.completedAt),d=pt(r,t);return d>24?$.earlyBird:d>=0?$.onTrack:d>-24?$.slightlyLate:d>-72?$.delayed:$.overdue},zt=e=>{var i,u;if(e.status!=="completed")return 0;const t=qe(e)*He(e)*Ht(e),d=((i=e.subtasks)==null?void 0:i.length)||0;if(d>0){const p=(((u=e.subtasks)==null?void 0:u.filter(f=>f.isCompleted).length)||0)/d;return t*p}return t},Wt=(e,r)=>{if(e.length===0)return 0;const t=new Set(e.map(u=>ue(new Date(u.completedAt)).getTime()));let d=0,i=ue(r);for(;t.has(i.getTime());)d++,i=ut(i,1);return d},_t=e=>e>=7?ce.onFire:e>=4?ce.inTheZone:e>=2?ce.warmUp:1,tr=(e,r,t)=>{const d=e.filter(f=>f.status==="completed"&&f.completedAt),i=d.filter(f=>{const c=new Date(f.completedAt);return c>=r&&c<=t}),u={};i.forEach(f=>{const c=ue(new Date(f.completedAt)).toISOString();u[c]||(u[c]=[]),u[c].push(f)});let s=0;for(const f in u){const c=new Date(f),v=u[f].reduce((I,U)=>I+zt(U),0),x=Wt(d,c),S=_t(x);s+=v*S}return e.filter(f=>f.status!=="completed"&&f.subtasks&&f.subtasks.length>0).forEach(f=>{const c=f.subtasks.length,o=f.subtasks.filter(v=>v.isCompleted).length;if(o>0){const v=o/c,S=qe(f)*He(f)*v;s+=S}}),Math.round(s)};export{Qt as S,er as T,tr as c};
